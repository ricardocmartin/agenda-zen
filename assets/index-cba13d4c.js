var xp=Object.defineProperty;var vp=(t,e,s)=>e in t?xp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var H=(t,e,s)=>(vp(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ka(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Ee={},Mn=[],Bt=()=>{},_p=()=>!1,lr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ga=t=>t.startsWith("onUpdate:"),et=Object.assign,Ya=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},wp=Object.prototype.hasOwnProperty,Se=(t,e)=>wp.call(t,e),ie=Array.isArray,An=t=>Ji(t)==="[object Map]",qn=t=>Ji(t)==="[object Set]",Bl=t=>Ji(t)==="[object Date]",ue=t=>typeof t=="function",Ge=t=>typeof t=="string",Ht=t=>typeof t=="symbol",Le=t=>t!==null&&typeof t=="object",yu=t=>(Le(t)||ue(t))&&ue(t.then)&&ue(t.catch),xu=Object.prototype.toString,Ji=t=>xu.call(t),kp=t=>Ji(t).slice(8,-1),vu=t=>Ji(t)==="[object Object]",Ja=t=>Ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mi=Ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Sp=/-(\w)/g,Rt=cr(t=>t.replace(Sp,(e,s)=>s?s.toUpperCase():"")),Cp=/\B([A-Z])/g,fn=cr(t=>t.replace(Cp,"-$1").toLowerCase()),dr=cr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dr=cr(t=>t?`on${dr(t)}`:""),Bs=(t,e)=>!Object.is(t,e),Po=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},_u=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Ho=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vl;const ur=()=>Vl||(Vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oi(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=Ge(n)?Ep(n):Oi(n);if(i)for(const o in i)e[o]=i[o]}return e}else if(Ge(t)||Le(t))return t}const Mp=/;(?![^(]*\))/g,Ap=/:([^]+)/,Pp=/\/\*[^]*?\*\//g;function Ep(t){const e={};return t.replace(Pp,"").split(Mp).forEach(s=>{if(s){const n=s.split(Ap);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ve(t){let e="";if(Ge(t))e=t;else if(ie(t))for(let s=0;s<t.length;s++){const n=Ve(t[s]);n&&(e+=n+" ")}else if(Le(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Tp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Op=Ka(Tp);function wu(t){return!!t||t===""}function Dp(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Xi(t[n],e[n]);return s}function Xi(t,e){if(t===e)return!0;let s=Bl(t),n=Bl(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=Ht(t),n=Ht(e),s||n)return t===e;if(s=ie(t),n=ie(e),s||n)return s&&n?Dp(t,e):!1;if(s=Le(t),n=Le(e),s||n){if(!s||!n)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const r in t){const a=t.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!Xi(t[r],e[r]))return!1}}return String(t)===String(e)}function Xa(t,e){return t.findIndex(s=>Xi(s,e))}const ku=t=>!!(t&&t.__v_isRef===!0),C=t=>Ge(t)?t:t==null?"":ie(t)||Le(t)&&(t.toString===xu||!ue(t.toString))?ku(t)?C(t.value):JSON.stringify(t,Su,2):String(t),Su=(t,e)=>ku(e)?Su(t,e.value):An(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],o)=>(s[Ir(n,o)+" =>"]=i,s),{})}:qn(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Ir(s))}:Ht(e)?Ir(e):Le(e)&&!ie(e)&&!vu(e)?String(e):e,Ir=(t,e="")=>{var s;return Ht(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vt;class Ip{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vt,!e&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=vt;try{return vt=this,e()}finally{vt=s}}}on(){++this._on===1&&(this.prevScope=vt,vt=this)}off(){this._on>0&&--this._on===0&&(vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Rp(){return vt}let Ie;const Rr=new WeakSet;class Cu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vt&&vt.active&&vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rr.has(this)&&(Rr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Au(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$l(this),Pu(this);const e=Ie,s=Vt;Ie=this,Vt=!0;try{return this.fn()}finally{Eu(this),Ie=e,Vt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)el(e);this.deps=this.depsTail=void 0,$l(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){da(this)&&this.run()}get dirty(){return da(this)}}let Mu=0,gi,bi;function Au(t,e=!1){if(t.flags|=8,e){t.next=bi,bi=t;return}t.next=gi,gi=t}function Qa(){Mu++}function Za(){if(--Mu>0)return;if(bi){let e=bi;for(bi=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;gi;){let e=gi;for(gi=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Pu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Eu(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),el(n),Lp(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function da(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Tu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Tu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Di)||(t.globalVersion=Di,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!da(t))))return;t.flags|=2;const e=t.dep,s=Ie,n=Vt;Ie=t,Vt=!0;try{Pu(t);const i=t.fn(t._value);(e.version===0||Bs(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ie=s,Vt=n,Eu(t),t.flags&=-3}}function el(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)el(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Lp(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Vt=!0;const Ou=[];function ws(){Ou.push(Vt),Vt=!1}function ks(){const t=Ou.pop();Vt=t===void 0?!0:t}function $l(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Ie;Ie=void 0;try{e()}finally{Ie=s}}}let Di=0;class Fp{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ie||!Vt||Ie===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ie)s=this.activeLink=new Fp(Ie,this),Ie.deps?(s.prevDep=Ie.depsTail,Ie.depsTail.nextDep=s,Ie.depsTail=s):Ie.deps=Ie.depsTail=s,Du(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Ie.depsTail,s.nextDep=void 0,Ie.depsTail.nextDep=s,Ie.depsTail=s,Ie.deps===s&&(Ie.deps=n)}return s}trigger(e){this.version++,Di++,this.notify(e)}notify(e){Qa();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Za()}}}function Du(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Du(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const ua=new WeakMap,ln=Symbol(""),ha=Symbol(""),Ii=Symbol("");function at(t,e,s){if(Vt&&Ie){let n=ua.get(t);n||ua.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new tl),i.map=n,i.key=s),i.track()}}function ms(t,e,s,n,i,o){const r=ua.get(t);if(!r){Di++;return}const a=l=>{l&&l.trigger()};if(Qa(),e==="clear")r.forEach(a);else{const l=ie(t),c=l&&Ja(s);if(l&&s==="length"){const u=Number(n);r.forEach((h,f)=>{(f==="length"||f===Ii||!Ht(f)&&f>=u)&&a(h)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(Ii)),e){case"add":l?c&&a(r.get("length")):(a(r.get(ln)),An(t)&&a(r.get(ha)));break;case"delete":l||(a(r.get(ln)),An(t)&&a(r.get(ha)));break;case"set":An(t)&&a(r.get(ln));break}}Za()}function gn(t){const e=ke(t);return e===t?e:(at(e,"iterate",Ii),It(t)?e:e.map(tt))}function hr(t){return at(t=ke(t),"iterate",Ii),t}const jp={__proto__:null,[Symbol.iterator](){return Lr(this,Symbol.iterator,tt)},concat(...t){return gn(this).concat(...t.map(e=>ie(e)?gn(e):e))},entries(){return Lr(this,"entries",t=>(t[1]=tt(t[1]),t))},every(t,e){return rs(this,"every",t,e,void 0,arguments)},filter(t,e){return rs(this,"filter",t,e,s=>s.map(tt),arguments)},find(t,e){return rs(this,"find",t,e,tt,arguments)},findIndex(t,e){return rs(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return rs(this,"findLast",t,e,tt,arguments)},findLastIndex(t,e){return rs(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return rs(this,"forEach",t,e,void 0,arguments)},includes(...t){return Fr(this,"includes",t)},indexOf(...t){return Fr(this,"indexOf",t)},join(t){return gn(this).join(t)},lastIndexOf(...t){return Fr(this,"lastIndexOf",t)},map(t,e){return rs(this,"map",t,e,void 0,arguments)},pop(){return Xn(this,"pop")},push(...t){return Xn(this,"push",t)},reduce(t,...e){return Hl(this,"reduce",t,e)},reduceRight(t,...e){return Hl(this,"reduceRight",t,e)},shift(){return Xn(this,"shift")},some(t,e){return rs(this,"some",t,e,void 0,arguments)},splice(...t){return Xn(this,"splice",t)},toReversed(){return gn(this).toReversed()},toSorted(t){return gn(this).toSorted(t)},toSpliced(...t){return gn(this).toSpliced(...t)},unshift(...t){return Xn(this,"unshift",t)},values(){return Lr(this,"values",tt)}};function Lr(t,e,s){const n=hr(t),i=n[e]();return n!==t&&!It(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const Np=Array.prototype;function rs(t,e,s,n,i,o){const r=hr(t),a=r!==t&&!It(t),l=r[e];if(l!==Np[e]){const h=l.apply(t,o);return a?tt(h):h}let c=s;r!==t&&(a?c=function(h,f){return s.call(this,tt(h),f,t)}:s.length>2&&(c=function(h,f){return s.call(this,h,f,t)}));const u=l.call(r,c,n);return a&&i?i(u):u}function Hl(t,e,s,n){const i=hr(t);let o=s;return i!==t&&(It(t)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,t)}):o=function(r,a,l){return s.call(this,r,tt(a),l,t)}),i[e](o,...n)}function Fr(t,e,s){const n=ke(t);at(n,"iterate",Ii);const i=n[e](...s);return(i===-1||i===!1)&&il(s[0])?(s[0]=ke(s[0]),n[e](...s)):i}function Xn(t,e,s=[]){ws(),Qa();const n=ke(t)[e].apply(t,s);return Za(),ks(),n}const Up=Ka("__proto__,__v_isRef,__isVue"),Iu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ht));function Bp(t){Ht(t)||(t=String(t));const e=ke(this);return at(e,"has",t),e.hasOwnProperty(t)}class Ru{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?Jp:Nu:o?ju:Fu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const r=ie(e);if(!i){let l;if(r&&(l=jp[s]))return l;if(s==="hasOwnProperty")return Bp}const a=Reflect.get(e,s,dt(e)?e:n);return(Ht(s)?Iu.has(s):Up(s))||(i||at(e,"get",s),o)?a:dt(a)?r&&Ja(s)?a:a.value:Le(a)?i?Bu(a):fr(a):a}}class Lu extends Ru{constructor(e=!1){super(!1,e)}set(e,s,n,i){let o=e[s];if(!this._isShallow){const l=$s(o);if(!It(n)&&!$s(n)&&(o=ke(o),n=ke(n)),!ie(e)&&dt(o)&&!dt(n))return l?!1:(o.value=n,!0)}const r=ie(e)&&Ja(s)?Number(s)<e.length:Se(e,s),a=Reflect.set(e,s,n,dt(e)?e:i);return e===ke(i)&&(r?Bs(n,o)&&ms(e,"set",s,n):ms(e,"add",s,n)),a}deleteProperty(e,s){const n=Se(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&ms(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!Ht(s)||!Iu.has(s))&&at(e,"has",s),n}ownKeys(e){return at(e,"iterate",ie(e)?"length":ln),Reflect.ownKeys(e)}}class Vp extends Ru{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const $p=new Lu,Hp=new Vp,zp=new Lu(!0);const fa=t=>t,oo=t=>Reflect.getPrototypeOf(t);function Wp(t,e,s){return function(...n){const i=this.__v_raw,o=ke(i),r=An(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=i[t](...n),u=s?fa:e?zo:tt;return!e&&at(o,"iterate",l?ha:ln),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function ro(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function qp(t,e){const s={get(i){const o=this.__v_raw,r=ke(o),a=ke(i);t||(Bs(i,a)&&at(r,"get",i),at(r,"get",a));const{has:l}=oo(r),c=e?fa:t?zo:tt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!t&&at(ke(i),"iterate",ln),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=ke(o),a=ke(i);return t||(Bs(i,a)&&at(r,"has",i),at(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=ke(a),c=e?fa:t?zo:tt;return!t&&at(l,"iterate",ln),a.forEach((u,h)=>i.call(o,c(u),c(h),r))}};return et(s,t?{add:ro("add"),set:ro("set"),delete:ro("delete"),clear:ro("clear")}:{add(i){!e&&!It(i)&&!$s(i)&&(i=ke(i));const o=ke(this);return oo(o).has.call(o,i)||(o.add(i),ms(o,"add",i,i)),this},set(i,o){!e&&!It(o)&&!$s(o)&&(o=ke(o));const r=ke(this),{has:a,get:l}=oo(r);let c=a.call(r,i);c||(i=ke(i),c=a.call(r,i));const u=l.call(r,i);return r.set(i,o),c?Bs(o,u)&&ms(r,"set",i,o):ms(r,"add",i,o),this},delete(i){const o=ke(this),{has:r,get:a}=oo(o);let l=r.call(o,i);l||(i=ke(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&ms(o,"delete",i,void 0),c},clear(){const i=ke(this),o=i.size!==0,r=i.clear();return o&&ms(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Wp(i,t,e)}),s}function sl(t,e){const s=qp(t,e);return(n,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Se(s,i)&&i in n?s:n,i,o)}const Kp={get:sl(!1,!1)},Gp={get:sl(!1,!0)},Yp={get:sl(!0,!1)};const Fu=new WeakMap,ju=new WeakMap,Nu=new WeakMap,Jp=new WeakMap;function Xp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qp(t){return t.__v_skip||!Object.isExtensible(t)?0:Xp(kp(t))}function fr(t){return $s(t)?t:nl(t,!1,$p,Kp,Fu)}function Uu(t){return nl(t,!1,zp,Gp,ju)}function Bu(t){return nl(t,!0,Hp,Yp,Nu)}function nl(t,e,s,n,i){if(!Le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=Qp(t);if(o===0)return t;const r=i.get(t);if(r)return r;const a=new Proxy(t,o===2?n:s);return i.set(t,a),a}function Pn(t){return $s(t)?Pn(t.__v_raw):!!(t&&t.__v_isReactive)}function $s(t){return!!(t&&t.__v_isReadonly)}function It(t){return!!(t&&t.__v_isShallow)}function il(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function Zp(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&_u(t,"__v_skip",!0),t}const tt=t=>Le(t)?fr(t):t,zo=t=>Le(t)?Bu(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function em(t){return Vu(t,!1)}function tm(t){return Vu(t,!0)}function Vu(t,e){return dt(t)?t:new sm(t,e)}class sm{constructor(e,s){this.dep=new tl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ke(e),this._value=s?e:tt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||It(e)||$s(e);e=n?e:ke(e),Bs(e,s)&&(this._rawValue=e,this._value=n?e:tt(e),this.dep.trigger())}}function En(t){return dt(t)?t.value:t}const nm={get:(t,e,s)=>e==="__v_raw"?t:En(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return dt(i)&&!dt(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function $u(t){return Pn(t)?t:new Proxy(t,nm)}class im{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new tl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Di-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ie!==this)return Au(this,!0),!0}get value(){const e=this.dep.track();return Tu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function om(t,e,s=!1){let n,i;return ue(t)?n=t:(n=t.get,i=t.set),new im(n,i,s)}const ao={},Wo=new WeakMap;let tn;function rm(t,e=!1,s=tn){if(s){let n=Wo.get(s);n||Wo.set(s,n=[]),n.push(t)}}function am(t,e,s=Ee){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=S=>i?S:It(S)||i===!1||i===0?gs(S,1):gs(S);let u,h,f,p,m=!1,g=!1;if(dt(t)?(h=()=>t.value,m=It(t)):Pn(t)?(h=()=>c(t),m=!0):ie(t)?(g=!0,m=t.some(S=>Pn(S)||It(S)),h=()=>t.map(S=>{if(dt(S))return S.value;if(Pn(S))return c(S);if(ue(S))return l?l(S,2):S()})):ue(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){ws();try{f()}finally{ks()}}const S=tn;tn=u;try{return l?l(t,3,[p]):t(p)}finally{tn=S}}:h=Bt,e&&i){const S=h,P=i===!0?1/0:i;h=()=>gs(S(),P)}const y=Rp(),w=()=>{u.stop(),y&&y.active&&Ya(y.effects,u)};if(o&&e){const S=e;e=(...P)=>{S(...P),w()}}let k=g?new Array(t.length).fill(ao):ao;const A=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const P=u.run();if(i||m||(g?P.some((N,F)=>Bs(N,k[F])):Bs(P,k))){f&&f();const N=tn;tn=u;try{const F=[P,k===ao?void 0:g&&k[0]===ao?[]:k,p];l?l(e,3,F):e(...F),k=P}finally{tn=N}}}else u.run()};return a&&a(A),u=new Cu(h),u.scheduler=r?()=>r(A,!1):A,p=S=>rm(S,!1,u),f=u.onStop=()=>{const S=Wo.get(u);if(S){if(l)l(S,4);else for(const P of S)P();Wo.delete(u)}},e?n?A(!0):k=u.run():r?r(A.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function gs(t,e=1/0,s){if(e<=0||!Le(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,dt(t))gs(t.value,e,s);else if(ie(t))for(let n=0;n<t.length;n++)gs(t[n],e,s);else if(qn(t)||An(t))t.forEach(n=>{gs(n,e,s)});else if(vu(t)){for(const n in t)gs(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&gs(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qi(t,e,s,n){try{return n?t(...n):t()}catch(i){pr(i,e,s)}}function is(t,e,s,n){if(ue(t)){const i=Qi(t,e,s,n);return i&&yu(i)&&i.catch(o=>{pr(o,e,s)}),i}if(ie(t)){const i=[];for(let o=0;o<t.length;o++)i.push(is(t[o],e,s,n));return i}}function pr(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||Ee;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(o){ws(),Qi(o,null,10,[t,l,c]),ks();return}}lm(t,s,i,n,r)}function lm(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const mt=[];let Zt=-1;const Tn=[];let Ts=null,kn=0;const Hu=Promise.resolve();let qo=null;function ol(t){const e=qo||Hu;return t?e.then(this?t.bind(this):t):e}function cm(t){let e=Zt+1,s=mt.length;for(;e<s;){const n=e+s>>>1,i=mt[n],o=Ri(i);o<t||o===t&&i.flags&2?e=n+1:s=n}return e}function rl(t){if(!(t.flags&1)){const e=Ri(t),s=mt[mt.length-1];!s||!(t.flags&2)&&e>=Ri(s)?mt.push(t):mt.splice(cm(e),0,t),t.flags|=1,zu()}}function zu(){qo||(qo=Hu.then(qu))}function dm(t){ie(t)?Tn.push(...t):Ts&&t.id===-1?Ts.splice(kn+1,0,t):t.flags&1||(Tn.push(t),t.flags|=1),zu()}function zl(t,e,s=Zt+1){for(;s<mt.length;s++){const n=mt[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;mt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Wu(t){if(Tn.length){const e=[...new Set(Tn)].sort((s,n)=>Ri(s)-Ri(n));if(Tn.length=0,Ts){Ts.push(...e);return}for(Ts=e,kn=0;kn<Ts.length;kn++){const s=Ts[kn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ts=null,kn=0}}const Ri=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qu(t){const e=Bt;try{for(Zt=0;Zt<mt.length;Zt++){const s=mt[Zt];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Qi(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Zt<mt.length;Zt++){const s=mt[Zt];s&&(s.flags&=-2)}Zt=-1,mt.length=0,Wu(),qo=null,(mt.length||Tn.length)&&qu()}}let st=null,Ku=null;function Ko(t){const e=st;return st=t,Ku=t&&t.type.__scopeId||null,e}function X(t,e=st,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&Zl(-1);const o=Ko(e);let r;try{r=t(...i)}finally{Ko(o),n._d&&Zl(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function M(t,e){if(st===null)return t;const s=yr(st),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,r,a,l=Ee]=e[i];o&&(ue(o)&&(o={mounted:o,updated:o}),o.deep&&gs(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return t}function Gs(t,e,s,n){const i=t.dirs,o=e&&e.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(ws(),is(l,s,8,[t.el,a,t,e]),ks())}}const um=Symbol("_vte"),hm=t=>t.__isTeleport;function al(t,e){t.shapeFlag&6&&t.component?(t.transition=e,al(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Gu(t,e){return ue(t)?(()=>et({name:t.name},e,{setup:t}))():t}function Yu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Go(t,e,s,n,i=!1){if(ie(t)){t.forEach((m,g)=>Go(m,e&&(ie(e)?e[g]:e),s,n,i));return}if(On(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Go(t,e,s,n.component.subTree);return}const o=n.shapeFlag&4?yr(n.component):n.el,r=i?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ee?a.refs={}:a.refs,h=a.setupState,f=ke(h),p=h===Ee?()=>!1:m=>Se(f,m);if(c!=null&&c!==l&&(Ge(c)?(u[c]=null,p(c)&&(h[c]=null)):dt(c)&&(c.value=null)),ue(l))Qi(l,a,12,[r,u]);else{const m=Ge(l),g=dt(l);if(m||g){const y=()=>{if(t.f){const w=m?p(l)?h[l]:u[l]:l.value;i?ie(w)&&Ya(w,o):ie(w)?w.includes(o)||w.push(o):m?(u[l]=[o],p(l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else m?(u[l]=r,p(l)&&(h[l]=r)):g&&(l.value=r,t.k&&(u[t.k]=r))};r?(y.id=-1,Mt(y,s)):y()}}}ur().requestIdleCallback;ur().cancelIdleCallback;const On=t=>!!t.type.__asyncLoader,Ju=t=>t.type.__isKeepAlive;function fm(t,e){Xu(t,"a",e)}function pm(t,e){Xu(t,"da",e)}function Xu(t,e,s=lt){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(mr(e,n,s),s){let i=s.parent;for(;i&&i.parent;)Ju(i.parent.vnode)&&mm(n,e,s,i),i=i.parent}}function mm(t,e,s,n){const i=mr(e,t,n,!0);Qu(()=>{Ya(n[e],i)},s)}function mr(t,e,s=lt,n=!1){if(s){const i=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...r)=>{ws();const a=Zi(s),l=is(e,s,t,r);return a(),ks(),l});return n?i.unshift(o):i.push(o),o}}const Cs=t=>(e,s=lt)=>{(!ji||t==="sp")&&mr(t,(...n)=>e(...n),s)},gm=Cs("bm"),bm=Cs("m"),ym=Cs("bu"),xm=Cs("u"),vm=Cs("bum"),Qu=Cs("um"),_m=Cs("sp"),wm=Cs("rtg"),km=Cs("rtc");function Sm(t,e=lt){mr("ec",t,e)}const Zu="components";function V(t,e){return Mm(Zu,t,!0,e)||t}const Cm=Symbol.for("v-ndc");function Mm(t,e,s=!0,n=!1){const i=st||lt;if(i){const o=i.type;if(t===Zu){const a=hg(o,!1);if(a&&(a===e||a===Rt(e)||a===dr(Rt(e))))return o}const r=Wl(i[t]||o[t],e)||Wl(i.appContext[t],e);return!r&&n?o:r}}function Wl(t,e){return t&&(t[e]||t[Rt(e)]||t[dr(Rt(e))])}function ne(t,e,s,n){let i;const o=s&&s[n],r=ie(t);if(r||Ge(t)){const a=r&&Pn(t);let l=!1,c=!1;a&&(l=!It(t),c=$s(t),t=hr(t)),i=new Array(t.length);for(let u=0,h=t.length;u<h;u++)i[u]=e(l?c?zo(tt(t[u])):tt(t[u]):t[u],u,void 0,o&&o[u])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o&&o[a])}else if(Le(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(t[u],u,l,o&&o[l])}}else i=[];return s&&(s[n]=i),i}function eh(t,e,s={},n,i){if(st.ce||st.parent&&On(st.parent)&&st.parent.ce)return e!=="default"&&(s.name=e),b(),Ze(q,null,[O("slot",s,n&&n())],64);let o=t[e];o&&o._c&&(o._d=!1),b();const r=o&&th(o(s)),a=s.key||r&&r.key,l=Ze(q,{key:(a&&!Ht(a)?a:`_${e}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function th(t){return t.some(e=>Fi(e)?!(e.type===Ss||e.type===q&&!th(e.children)):!0)?t:null}const pa=t=>t?vh(t)?yr(t):pa(t.parent):null,yi=et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pa(t.parent),$root:t=>pa(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ll(t),$forceUpdate:t=>t.f||(t.f=()=>{rl(t.update)}),$nextTick:t=>t.n||(t.n=ol.bind(t.proxy)),$watch:t=>Km.bind(t)}),jr=(t,e)=>t!==Ee&&!t.__isScriptSetup&&Se(t,e),Am={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return o[e]}else{if(jr(n,e))return r[e]=1,n[e];if(i!==Ee&&Se(i,e))return r[e]=2,i[e];if((c=t.propsOptions[0])&&Se(c,e))return r[e]=3,o[e];if(s!==Ee&&Se(s,e))return r[e]=4,s[e];ma&&(r[e]=0)}}const u=yi[e];let h,f;if(u)return e==="$attrs"&&at(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==Ee&&Se(s,e))return r[e]=4,s[e];if(f=l.config.globalProperties,Se(f,e))return f[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:o}=t;return jr(i,e)?(i[e]=s,!0):n!==Ee&&Se(n,e)?(n[e]=s,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||t!==Ee&&Se(t,r)||jr(e,r)||(a=o[0])&&Se(a,r)||Se(n,r)||Se(yi,r)||Se(i.config.globalProperties,r)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Se(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ql(t){return ie(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ma=!0;function Pm(t){const e=ll(t),s=t.proxy,n=t.ctx;ma=!1,e.beforeCreate&&Kl(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:y,beforeDestroy:w,beforeUnmount:k,destroyed:A,unmounted:S,render:P,renderTracked:N,renderTriggered:F,errorCaptured:$,serverPrefetch:Q,expose:oe,inheritAttrs:ae,components:he,directives:Pe,filters:Ye}=e;if(c&&Em(c,n,null),r)for(const re in r){const fe=r[re];ue(fe)&&(n[re]=fe.bind(s))}if(i){const re=i.call(s,s);Le(re)&&(t.data=fr(re))}if(ma=!0,o)for(const re in o){const fe=o[re],Te=ue(fe)?fe.bind(s,s):ue(fe.get)?fe.get.bind(s,s):Bt,ht=!ue(fe)&&ue(fe.set)?fe.set.bind(s):Bt,ft=Nt({get:Te,set:ht});Object.defineProperty(n,re,{enumerable:!0,configurable:!0,get:()=>ft.value,set:He=>ft.value=He})}if(a)for(const re in a)sh(a[re],n,s,re);if(l){const re=ue(l)?l.call(s):l;Reflect.ownKeys(re).forEach(fe=>{Eo(fe,re[fe])})}u&&Kl(u,t,"c");function de(re,fe){ie(fe)?fe.forEach(Te=>re(Te.bind(s))):fe&&re(fe.bind(s))}if(de(gm,h),de(bm,f),de(ym,p),de(xm,m),de(fm,g),de(pm,y),de(Sm,$),de(km,N),de(wm,F),de(vm,k),de(Qu,S),de(_m,Q),ie(oe))if(oe.length){const re=t.exposed||(t.exposed={});oe.forEach(fe=>{Object.defineProperty(re,fe,{get:()=>s[fe],set:Te=>s[fe]=Te})})}else t.exposed||(t.exposed={});P&&t.render===Bt&&(t.render=P),ae!=null&&(t.inheritAttrs=ae),he&&(t.components=he),Pe&&(t.directives=Pe),Q&&Yu(t)}function Em(t,e,s=Bt){ie(t)&&(t=ga(t));for(const n in t){const i=t[n];let o;Le(i)?"default"in i?o=vs(i.from||n,i.default,!0):o=vs(i.from||n):o=vs(i),dt(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[n]=o}}function Kl(t,e,s){is(ie(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function sh(t,e,s,n){let i=n.includes(".")?mh(s,n):()=>s[n];if(Ge(t)){const o=e[t];ue(o)&&To(i,o)}else if(ue(t))To(i,t.bind(s));else if(Le(t))if(ie(t))t.forEach(o=>sh(o,e,s,n));else{const o=ue(t.handler)?t.handler.bind(s):e[t.handler];ue(o)&&To(i,o,t)}}function ll(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!i.length&&!s&&!n?l=e:(l={},i.length&&i.forEach(c=>Yo(l,c,r,!0)),Yo(l,e,r)),Le(e)&&o.set(e,l),l}function Yo(t,e,s,n=!1){const{mixins:i,extends:o}=e;o&&Yo(t,o,s,!0),i&&i.forEach(r=>Yo(t,r,s,!0));for(const r in e)if(!(n&&r==="expose")){const a=Tm[r]||s&&s[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const Tm={data:Gl,props:Yl,emits:Yl,methods:ai,computed:ai,beforeCreate:pt,created:pt,beforeMount:pt,mounted:pt,beforeUpdate:pt,updated:pt,beforeDestroy:pt,beforeUnmount:pt,destroyed:pt,unmounted:pt,activated:pt,deactivated:pt,errorCaptured:pt,serverPrefetch:pt,components:ai,directives:ai,watch:Dm,provide:Gl,inject:Om};function Gl(t,e){return e?t?function(){return et(ue(t)?t.call(this,this):t,ue(e)?e.call(this,this):e)}:e:t}function Om(t,e){return ai(ga(t),ga(e))}function ga(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function pt(t,e){return t?[...new Set([].concat(t,e))]:e}function ai(t,e){return t?et(Object.create(null),t,e):e}function Yl(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:et(Object.create(null),ql(t),ql(e??{})):e}function Dm(t,e){if(!t)return e;if(!e)return t;const s=et(Object.create(null),t);for(const n in e)s[n]=pt(t[n],e[n]);return s}function nh(){return{app:null,config:{isNativeTag:_p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Im=0;function Rm(t,e){return function(n,i=null){ue(n)||(n=et({},n)),i!=null&&!Le(i)&&(i=null);const o=nh(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Im++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:pg,get config(){return o.config},set config(u){},use(u,...h){return r.has(u)||(u&&ue(u.install)?(r.add(u),u.install(c,...h)):ue(u)&&(r.add(u),u(c,...h))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,h){return h?(o.components[u]=h,c):o.components[u]},directive(u,h){return h?(o.directives[u]=h,c):o.directives[u]},mount(u,h,f){if(!l){const p=c._ceVNode||O(n,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&e?e(p,u):t(p,u,f),l=!0,c._container=u,u.__vue_app__=c,yr(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(is(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return o.provides[u]=h,c},runWithContext(u){const h=Dn;Dn=c;try{return u()}finally{Dn=h}}};return c}}let Dn=null;function Eo(t,e){if(lt){let s=lt.provides;const n=lt.parent&&lt.parent.provides;n===s&&(s=lt.provides=Object.create(n)),s[t]=e}}function vs(t,e,s=!1){const n=lt||st;if(n||Dn){const i=Dn?Dn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&ue(e)?e.call(n&&n.proxy):e}}const ih={},oh=()=>Object.create(ih),rh=t=>Object.getPrototypeOf(t)===ih;function Lm(t,e,s,n=!1){const i={},o=oh();t.propsDefaults=Object.create(null),ah(t,e,i,o);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);s?t.props=n?i:Uu(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function Fm(t,e,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,a=ke(i),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(gr(t.emitsOptions,f))continue;const p=e[f];if(l)if(Se(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const m=Rt(f);i[m]=ba(l,a,m,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{ah(t,e,i,o)&&(c=!0);let u;for(const h in a)(!e||!Se(e,h)&&((u=fn(h))===h||!Se(e,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(i[h]=ba(l,a,h,void 0,t,!0)):delete i[h]);if(o!==a)for(const h in o)(!e||!Se(e,h))&&(delete o[h],c=!0)}c&&ms(t.attrs,"set","")}function ah(t,e,s,n){const[i,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(mi(l))continue;const c=e[l];let u;i&&Se(i,u=Rt(l))?!o||!o.includes(u)?s[u]=c:(a||(a={}))[u]=c:gr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=ke(s),c=a||Ee;for(let u=0;u<o.length;u++){const h=o[u];s[h]=ba(i,l,h,c[h],t,!Se(c,h))}}return r}function ba(t,e,s,n,i,o){const r=t[s];if(r!=null){const a=Se(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ue(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Zi(i);n=c[s]=l.call(null,e),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===fn(s))&&(n=!0))}return n}const jm=new WeakMap;function lh(t,e,s=!1){const n=s?jm:e.propsCache,i=n.get(t);if(i)return i;const o=t.props,r={},a=[];let l=!1;if(!ue(t)){const u=h=>{l=!0;const[f,p]=lh(h,e,!0);et(r,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return Le(t)&&n.set(t,Mn),Mn;if(ie(o))for(let u=0;u<o.length;u++){const h=Rt(o[u]);Jl(h)&&(r[h]=Ee)}else if(o)for(const u in o){const h=Rt(u);if(Jl(h)){const f=o[u],p=r[h]=ie(f)||ue(f)?{type:f}:et({},f),m=p.type;let g=!1,y=!0;if(ie(m))for(let w=0;w<m.length;++w){const k=m[w],A=ue(k)&&k.name;if(A==="Boolean"){g=!0;break}else A==="String"&&(y=!1)}else g=ue(m)&&m.name==="Boolean";p[0]=g,p[1]=y,(g||Se(p,"default"))&&a.push(h)}}const c=[r,a];return Le(t)&&n.set(t,c),c}function Jl(t){return t[0]!=="$"&&!mi(t)}const cl=t=>t[0]==="_"||t==="$stable",dl=t=>ie(t)?t.map(ts):[ts(t)],Nm=(t,e,s)=>{if(e._n)return e;const n=X((...i)=>dl(e(...i)),s);return n._c=!1,n},ch=(t,e,s)=>{const n=t._ctx;for(const i in t){if(cl(i))continue;const o=t[i];if(ue(o))e[i]=Nm(i,o,n);else if(o!=null){const r=dl(o);e[i]=()=>r}}},dh=(t,e)=>{const s=dl(e);t.slots.default=()=>s},uh=(t,e,s)=>{for(const n in e)(s||!cl(n))&&(t[n]=e[n])},Um=(t,e,s)=>{const n=t.slots=oh();if(t.vnode.shapeFlag&32){const i=e._;i?(uh(n,e,s),s&&_u(n,"_",i,!0)):ch(e,n)}else e&&dh(t,e)},Bm=(t,e,s)=>{const{vnode:n,slots:i}=t;let o=!0,r=Ee;if(n.shapeFlag&32){const a=e._;a?s&&a===1?o=!1:uh(i,e,s):(o=!e.$stable,ch(e,i)),r=e}else e&&(dh(t,e),r={default:1});if(o)for(const a in i)!cl(a)&&r[a]==null&&delete i[a]},Mt=eg;function Vm(t){return $m(t)}function $m(t,e){const s=ur();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=Bt,insertStaticContent:m}=t,g=(x,_,E,j=null,I=null,U=null,K=void 0,W=null,z=!!_.dynamicChildren)=>{if(x===_)return;x&&!Qn(x,_)&&(j=R(x),He(x,I,U,!0),x=null),_.patchFlag===-2&&(z=!1,_.dynamicChildren=null);const{type:B,ref:se,shapeFlag:Y}=_;switch(B){case br:y(x,_,E,j);break;case Ss:w(x,_,E,j);break;case Oo:x==null&&k(_,E,j,K);break;case q:he(x,_,E,j,I,U,K,W,z);break;default:Y&1?P(x,_,E,j,I,U,K,W,z):Y&6?Pe(x,_,E,j,I,U,K,W,z):(Y&64||Y&128)&&B.process(x,_,E,j,I,U,K,W,z,Z)}se!=null&&I&&Go(se,x&&x.ref,U,_||x,!_)},y=(x,_,E,j)=>{if(x==null)n(_.el=a(_.children),E,j);else{const I=_.el=x.el;_.children!==x.children&&c(I,_.children)}},w=(x,_,E,j)=>{x==null?n(_.el=l(_.children||""),E,j):_.el=x.el},k=(x,_,E,j)=>{[x.el,x.anchor]=m(x.children,_,E,j,x.el,x.anchor)},A=({el:x,anchor:_},E,j)=>{let I;for(;x&&x!==_;)I=f(x),n(x,E,j),x=I;n(_,E,j)},S=({el:x,anchor:_})=>{let E;for(;x&&x!==_;)E=f(x),i(x),x=E;i(_)},P=(x,_,E,j,I,U,K,W,z)=>{_.type==="svg"?K="svg":_.type==="math"&&(K="mathml"),x==null?N(_,E,j,I,U,K,W,z):Q(x,_,I,U,K,W,z)},N=(x,_,E,j,I,U,K,W)=>{let z,B;const{props:se,shapeFlag:Y,transition:ee,dirs:le}=x;if(z=x.el=r(x.type,U,se&&se.is,se),Y&8?u(z,x.children):Y&16&&$(x.children,z,null,j,I,Nr(x,U),K,W),le&&Gs(x,null,j,"created"),F(z,x,x.scopeId,K,j),se){for(const Oe in se)Oe!=="value"&&!mi(Oe)&&o(z,Oe,null,se[Oe],U,j);"value"in se&&o(z,"value",null,se.value,U),(B=se.onVnodeBeforeMount)&&Jt(B,j,x)}le&&Gs(x,null,j,"beforeMount");const ve=Hm(I,ee);ve&&ee.beforeEnter(z),n(z,_,E),((B=se&&se.onVnodeMounted)||ve||le)&&Mt(()=>{B&&Jt(B,j,x),ve&&ee.enter(z),le&&Gs(x,null,j,"mounted")},I)},F=(x,_,E,j,I)=>{if(E&&p(x,E),j)for(let U=0;U<j.length;U++)p(x,j[U]);if(I){let U=I.subTree;if(_===U||bh(U.type)&&(U.ssContent===_||U.ssFallback===_)){const K=I.vnode;F(x,K,K.scopeId,K.slotScopeIds,I.parent)}}},$=(x,_,E,j,I,U,K,W,z=0)=>{for(let B=z;B<x.length;B++){const se=x[B]=W?Os(x[B]):ts(x[B]);g(null,se,_,E,j,I,U,K,W)}},Q=(x,_,E,j,I,U,K)=>{const W=_.el=x.el;let{patchFlag:z,dynamicChildren:B,dirs:se}=_;z|=x.patchFlag&16;const Y=x.props||Ee,ee=_.props||Ee;let le;if(E&&Ys(E,!1),(le=ee.onVnodeBeforeUpdate)&&Jt(le,E,_,x),se&&Gs(_,x,E,"beforeUpdate"),E&&Ys(E,!0),(Y.innerHTML&&ee.innerHTML==null||Y.textContent&&ee.textContent==null)&&u(W,""),B?oe(x.dynamicChildren,B,W,E,j,Nr(_,I),U):K||fe(x,_,W,null,E,j,Nr(_,I),U,!1),z>0){if(z&16)ae(W,Y,ee,E,I);else if(z&2&&Y.class!==ee.class&&o(W,"class",null,ee.class,I),z&4&&o(W,"style",Y.style,ee.style,I),z&8){const ve=_.dynamicProps;for(let Oe=0;Oe<ve.length;Oe++){const Me=ve[Oe],kt=Y[Me],ot=ee[Me];(ot!==kt||Me==="value")&&o(W,Me,kt,ot,I,E)}}z&1&&x.children!==_.children&&u(W,_.children)}else!K&&B==null&&ae(W,Y,ee,E,I);((le=ee.onVnodeUpdated)||se)&&Mt(()=>{le&&Jt(le,E,_,x),se&&Gs(_,x,E,"updated")},j)},oe=(x,_,E,j,I,U,K)=>{for(let W=0;W<_.length;W++){const z=x[W],B=_[W],se=z.el&&(z.type===q||!Qn(z,B)||z.shapeFlag&70)?h(z.el):E;g(z,B,se,null,j,I,U,K,!0)}},ae=(x,_,E,j,I)=>{if(_!==E){if(_!==Ee)for(const U in _)!mi(U)&&!(U in E)&&o(x,U,_[U],null,I,j);for(const U in E){if(mi(U))continue;const K=E[U],W=_[U];K!==W&&U!=="value"&&o(x,U,W,K,I,j)}"value"in E&&o(x,"value",_.value,E.value,I)}},he=(x,_,E,j,I,U,K,W,z)=>{const B=_.el=x?x.el:a(""),se=_.anchor=x?x.anchor:a("");let{patchFlag:Y,dynamicChildren:ee,slotScopeIds:le}=_;le&&(W=W?W.concat(le):le),x==null?(n(B,E,j),n(se,E,j),$(_.children||[],E,se,I,U,K,W,z)):Y>0&&Y&64&&ee&&x.dynamicChildren?(oe(x.dynamicChildren,ee,E,I,U,K,W),(_.key!=null||I&&_===I.subTree)&&hh(x,_,!0)):fe(x,_,E,se,I,U,K,W,z)},Pe=(x,_,E,j,I,U,K,W,z)=>{_.slotScopeIds=W,x==null?_.shapeFlag&512?I.ctx.activate(_,E,j,K,z):Ye(_,E,j,I,U,K,z):xe(x,_,z)},Ye=(x,_,E,j,I,U,K)=>{const W=x.component=ag(x,j,I);if(Ju(x)&&(W.ctx.renderer=Z),lg(W,!1,K),W.asyncDep){if(I&&I.registerDep(W,de,K),!x.el){const z=W.subTree=O(Ss);w(null,z,_,E)}}else de(W,x,_,E,I,U,K)},xe=(x,_,E)=>{const j=_.component=x.component;if(Qm(x,_,E))if(j.asyncDep&&!j.asyncResolved){re(j,_,E);return}else j.next=_,j.update();else _.el=x.el,j.vnode=_},de=(x,_,E,j,I,U,K)=>{const W=()=>{if(x.isMounted){let{next:Y,bu:ee,u:le,parent:ve,vnode:Oe}=x;{const St=fh(x);if(St){Y&&(Y.el=Oe.el,re(x,Y,K)),St.asyncDep.then(()=>{x.isUnmounted||W()});return}}let Me=Y,kt;Ys(x,!1),Y?(Y.el=Oe.el,re(x,Y,K)):Y=Oe,ee&&Po(ee),(kt=Y.props&&Y.props.onVnodeBeforeUpdate)&&Jt(kt,ve,Y,Oe),Ys(x,!0);const ot=Ur(x),Ft=x.subTree;x.subTree=ot,g(Ft,ot,h(Ft.el),R(Ft),x,I,U),Y.el=ot.el,Me===null&&Zm(x,ot.el),le&&Mt(le,I),(kt=Y.props&&Y.props.onVnodeUpdated)&&Mt(()=>Jt(kt,ve,Y,Oe),I)}else{let Y;const{el:ee,props:le}=_,{bm:ve,m:Oe,parent:Me,root:kt,type:ot}=x,Ft=On(_);if(Ys(x,!1),ve&&Po(ve),!Ft&&(Y=le&&le.onVnodeBeforeMount)&&Jt(Y,Me,_),Ys(x,!0),ee&&Ue){const St=()=>{x.subTree=Ur(x),Ue(ee,x.subTree,x,I,null)};Ft&&ot.__asyncHydrate?ot.__asyncHydrate(ee,x,St):St()}else{kt.ce&&kt.ce._injectChildStyle(ot);const St=x.subTree=Ur(x);g(null,St,E,j,x,I,U),_.el=St.el}if(Oe&&Mt(Oe,I),!Ft&&(Y=le&&le.onVnodeMounted)){const St=_;Mt(()=>Jt(Y,Me,St),I)}(_.shapeFlag&256||Me&&On(Me.vnode)&&Me.vnode.shapeFlag&256)&&x.a&&Mt(x.a,I),x.isMounted=!0,_=E=j=null}};x.scope.on();const z=x.effect=new Cu(W);x.scope.off();const B=x.update=z.run.bind(z),se=x.job=z.runIfDirty.bind(z);se.i=x,se.id=x.uid,z.scheduler=()=>rl(se),Ys(x,!0),B()},re=(x,_,E)=>{_.component=x;const j=x.vnode.props;x.vnode=_,x.next=null,Fm(x,_.props,j,E),Bm(x,_.children,E),ws(),zl(x),ks()},fe=(x,_,E,j,I,U,K,W,z=!1)=>{const B=x&&x.children,se=x?x.shapeFlag:0,Y=_.children,{patchFlag:ee,shapeFlag:le}=_;if(ee>0){if(ee&128){ht(B,Y,E,j,I,U,K,W,z);return}else if(ee&256){Te(B,Y,E,j,I,U,K,W,z);return}}le&8?(se&16&&qe(B,I,U),Y!==B&&u(E,Y)):se&16?le&16?ht(B,Y,E,j,I,U,K,W,z):qe(B,I,U,!0):(se&8&&u(E,""),le&16&&$(Y,E,j,I,U,K,W,z))},Te=(x,_,E,j,I,U,K,W,z)=>{x=x||Mn,_=_||Mn;const B=x.length,se=_.length,Y=Math.min(B,se);let ee;for(ee=0;ee<Y;ee++){const le=_[ee]=z?Os(_[ee]):ts(_[ee]);g(x[ee],le,E,null,I,U,K,W,z)}B>se?qe(x,I,U,!0,!1,Y):$(_,E,j,I,U,K,W,z,Y)},ht=(x,_,E,j,I,U,K,W,z)=>{let B=0;const se=_.length;let Y=x.length-1,ee=se-1;for(;B<=Y&&B<=ee;){const le=x[B],ve=_[B]=z?Os(_[B]):ts(_[B]);if(Qn(le,ve))g(le,ve,E,null,I,U,K,W,z);else break;B++}for(;B<=Y&&B<=ee;){const le=x[Y],ve=_[ee]=z?Os(_[ee]):ts(_[ee]);if(Qn(le,ve))g(le,ve,E,null,I,U,K,W,z);else break;Y--,ee--}if(B>Y){if(B<=ee){const le=ee+1,ve=le<se?_[le].el:j;for(;B<=ee;)g(null,_[B]=z?Os(_[B]):ts(_[B]),E,ve,I,U,K,W,z),B++}}else if(B>ee)for(;B<=Y;)He(x[B],I,U,!0),B++;else{const le=B,ve=B,Oe=new Map;for(B=ve;B<=ee;B++){const Ct=_[B]=z?Os(_[B]):ts(_[B]);Ct.key!=null&&Oe.set(Ct.key,B)}let Me,kt=0;const ot=ee-ve+1;let Ft=!1,St=0;const Jn=new Array(ot);for(B=0;B<ot;B++)Jn[B]=0;for(B=le;B<=Y;B++){const Ct=x[B];if(kt>=ot){He(Ct,I,U,!0);continue}let Yt;if(Ct.key!=null)Yt=Oe.get(Ct.key);else for(Me=ve;Me<=ee;Me++)if(Jn[Me-ve]===0&&Qn(Ct,_[Me])){Yt=Me;break}Yt===void 0?He(Ct,I,U,!0):(Jn[Yt-ve]=B+1,Yt>=St?St=Yt:Ft=!0,g(Ct,_[Yt],E,null,I,U,K,W,z),kt++)}const Nl=Ft?zm(Jn):Mn;for(Me=Nl.length-1,B=ot-1;B>=0;B--){const Ct=ve+B,Yt=_[Ct],Ul=Ct+1<se?_[Ct+1].el:j;Jn[B]===0?g(null,Yt,E,Ul,I,U,K,W,z):Ft&&(Me<0||B!==Nl[Me]?ft(Yt,E,Ul,2):Me--)}}},ft=(x,_,E,j,I=null)=>{const{el:U,type:K,transition:W,children:z,shapeFlag:B}=x;if(B&6){ft(x.component.subTree,_,E,j);return}if(B&128){x.suspense.move(_,E,j);return}if(B&64){K.move(x,_,E,Z);return}if(K===q){n(U,_,E);for(let Y=0;Y<z.length;Y++)ft(z[Y],_,E,j);n(x.anchor,_,E);return}if(K===Oo){A(x,_,E);return}if(j!==2&&B&1&&W)if(j===0)W.beforeEnter(U),n(U,_,E),Mt(()=>W.enter(U),I);else{const{leave:Y,delayLeave:ee,afterLeave:le}=W,ve=()=>{x.ctx.isUnmounted?i(U):n(U,_,E)},Oe=()=>{Y(U,()=>{ve(),le&&le()})};ee?ee(U,ve,Oe):Oe()}else n(U,_,E)},He=(x,_,E,j=!1,I=!1)=>{const{type:U,props:K,ref:W,children:z,dynamicChildren:B,shapeFlag:se,patchFlag:Y,dirs:ee,cacheIndex:le}=x;if(Y===-2&&(I=!1),W!=null&&(ws(),Go(W,null,E,x,!0),ks()),le!=null&&(_.renderCache[le]=void 0),se&256){_.ctx.deactivate(x);return}const ve=se&1&&ee,Oe=!On(x);let Me;if(Oe&&(Me=K&&K.onVnodeBeforeUnmount)&&Jt(Me,_,x),se&6)Gt(x.component,E,j);else{if(se&128){x.suspense.unmount(E,j);return}ve&&Gs(x,null,_,"beforeUnmount"),se&64?x.type.remove(x,_,E,Z,j):B&&!B.hasOnce&&(U!==q||Y>0&&Y&64)?qe(B,_,E,!1,!0):(U===q&&Y&384||!I&&se&16)&&qe(z,_,E),j&&Ot(x)}(Oe&&(Me=K&&K.onVnodeUnmounted)||ve)&&Mt(()=>{Me&&Jt(Me,_,x),ve&&Gs(x,null,_,"unmounted")},E)},Ot=x=>{const{type:_,el:E,anchor:j,transition:I}=x;if(_===q){bt(E,j);return}if(_===Oo){S(x);return}const U=()=>{i(E),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(x.shapeFlag&1&&I&&!I.persisted){const{leave:K,delayLeave:W}=I,z=()=>K(E,U);W?W(x.el,U,z):z()}else U()},bt=(x,_)=>{let E;for(;x!==_;)E=f(x),i(x),x=E;i(_)},Gt=(x,_,E)=>{const{bum:j,scope:I,job:U,subTree:K,um:W,m:z,a:B,parent:se,slots:{__:Y}}=x;Xl(z),Xl(B),j&&Po(j),se&&ie(Y)&&Y.forEach(ee=>{se.renderCache[ee]=void 0}),I.stop(),U&&(U.flags|=8,He(K,x,_,E)),W&&Mt(W,_),Mt(()=>{x.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},qe=(x,_,E,j=!1,I=!1,U=0)=>{for(let K=U;K<x.length;K++)He(x[K],_,E,j,I)},R=x=>{if(x.shapeFlag&6)return R(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const _=f(x.anchor||x.el),E=_&&_[um];return E?f(E):_};let J=!1;const G=(x,_,E)=>{x==null?_._vnode&&He(_._vnode,null,null,!0):g(_._vnode||null,x,_,null,null,null,E),_._vnode=x,J||(J=!0,zl(),Wu(),J=!1)},Z={p:g,um:He,m:ft,r:Ot,mt:Ye,mc:$,pc:fe,pbc:oe,n:R,o:t};let _e,Ue;return e&&([_e,Ue]=e(Z)),{render:G,hydrate:_e,createApp:Rm(G,_e)}}function Nr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Ys({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Hm(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function hh(t,e,s=!1){const n=t.children,i=e.children;if(ie(n)&&ie(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Os(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&hh(r,a)),a.type===br&&(a.el=r.el),a.type===Ss&&!a.el&&(a.el=r.el)}}function zm(t){const e=t.slice(),s=[0];let n,i,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=s[s.length-1],t[i]<c){e[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,t[s[a]]<c?o=a+1:r=a;c<t[s[o]]&&(o>0&&(e[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=e[r];return s}function fh(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fh(e)}function Xl(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Wm=Symbol.for("v-scx"),qm=()=>vs(Wm);function To(t,e,s){return ph(t,e,s)}function ph(t,e,s=Ee){const{immediate:n,deep:i,flush:o,once:r}=s,a=et({},s),l=e&&n||!e&&o!=="post";let c;if(ji){if(o==="sync"){const p=qm();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Bt,p.resume=Bt,p.pause=Bt,p}}const u=lt;a.call=(p,m,g)=>is(p,u,m,g);let h=!1;o==="post"?a.scheduler=p=>{Mt(p,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():rl(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=am(t,e,a);return ji&&(c?c.push(f):l&&f()),f}function Km(t,e,s){const n=this.proxy,i=Ge(t)?t.includes(".")?mh(n,t):()=>n[t]:t.bind(n,n);let o;ue(e)?o=e:(o=e.handler,s=e);const r=Zi(this),a=ph(i,o.bind(n),s);return r(),a}function mh(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Gm=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rt(e)}Modifiers`]||t[`${fn(e)}Modifiers`];function Ym(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Ee;let i=s;const o=e.startsWith("update:"),r=o&&Gm(n,e.slice(7));r&&(r.trim&&(i=s.map(u=>Ge(u)?u.trim():u)),r.number&&(i=s.map(Ho)));let a,l=n[a=Dr(e)]||n[a=Dr(Rt(e))];!l&&o&&(l=n[a=Dr(fn(e))]),l&&is(l,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,is(c,t,6,i)}}function gh(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const o=t.emits;let r={},a=!1;if(!ue(t)){const l=c=>{const u=gh(c,e,!0);u&&(a=!0,et(r,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Le(t)&&n.set(t,null),null):(ie(o)?o.forEach(l=>r[l]=null):et(r,o),Le(t)&&n.set(t,r),r)}function gr(t,e){return!t||!lr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,fn(e))||Se(t,e))}function Ur(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:p,ctx:m,inheritAttrs:g}=t,y=Ko(t);let w,k;try{if(s.shapeFlag&4){const S=i||n,P=S;w=ts(c.call(P,S,u,h,p,f,m)),k=a}else{const S=e;w=ts(S.length>1?S(h,{attrs:a,slots:r,emit:l}):S(h,null)),k=e.props?a:Jm(a)}}catch(S){xi.length=0,pr(S,t,1),w=O(Ss)}let A=w;if(k&&g!==!1){const S=Object.keys(k),{shapeFlag:P}=A;S.length&&P&7&&(o&&S.some(Ga)&&(k=Xm(k,o)),A=Fn(A,k,!1,!0))}return s.dirs&&(A=Fn(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(s.dirs):s.dirs),s.transition&&al(A,s.transition),w=A,Ko(y),w}const Jm=t=>{let e;for(const s in t)(s==="class"||s==="style"||lr(s))&&((e||(e={}))[s]=t[s]);return e},Xm=(t,e)=>{const s={};for(const n in t)(!Ga(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Qm(t,e,s){const{props:n,children:i,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ql(n,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(r[f]!==n[f]&&!gr(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Ql(n,r,c):!0:!!r;return!1}function Ql(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==t[o]&&!gr(s,o))return!0}return!1}function Zm({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const bh=t=>t.__isSuspense;function eg(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):dm(t)}const q=Symbol.for("v-fgt"),br=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),Oo=Symbol.for("v-stc"),xi=[];let Tt=null;function b(t=!1){xi.push(Tt=t?null:[])}function tg(){xi.pop(),Tt=xi[xi.length-1]||null}let Li=1;function Zl(t,e=!1){Li+=t,t<0&&Tt&&e&&(Tt.hasOnce=!0)}function yh(t){return t.dynamicChildren=Li>0?Tt||Mn:null,tg(),Li>0&&Tt&&Tt.push(t),t}function v(t,e,s,n,i,o){return yh(d(t,e,s,n,i,o,!0))}function Ze(t,e,s,n,i){return yh(O(t,e,s,n,i,!0))}function Fi(t){return t?t.__v_isVNode===!0:!1}function Qn(t,e){return t.type===e.type&&t.key===e.key}const xh=({key:t})=>t??null,Do=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Ge(t)||dt(t)||ue(t)?{i:st,r:t,k:e,f:!!s}:t:null);function d(t,e=null,s=null,n=0,i=null,o=t===q?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xh(e),ref:e&&Do(e),scopeId:Ku,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:st};return a?(ul(l,s),o&128&&t.normalize(l)):s&&(l.shapeFlag|=Ge(s)?8:16),Li>0&&!r&&Tt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Tt.push(l),l}const O=sg;function sg(t,e=null,s=null,n=0,i=null,o=!1){if((!t||t===Cm)&&(t=Ss),Fi(t)){const a=Fn(t,e,!0);return s&&ul(a,s),Li>0&&!o&&Tt&&(a.shapeFlag&6?Tt[Tt.indexOf(t)]=a:Tt.push(a)),a.patchFlag=-2,a}if(fg(t)&&(t=t.__vccOpts),e){e=ng(e);let{class:a,style:l}=e;a&&!Ge(a)&&(e.class=Ve(a)),Le(l)&&(il(l)&&!ie(l)&&(l=et({},l)),e.style=Oi(l))}const r=Ge(t)?1:bh(t)?128:hm(t)?64:Le(t)?4:ue(t)?2:0;return d(t,e,s,n,i,r,o,!0)}function ng(t){return t?il(t)||rh(t)?et({},t):t:null}function Fn(t,e,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=t,c=e?ig(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&xh(c),ref:e&&e.ref?s&&o?ie(o)?o.concat(Do(e)):[o,Do(e)]:Do(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==q?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fn(t.ssContent),ssFallback:t.ssFallback&&Fn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&al(u,l.clone(u)),u}function te(t=" ",e=0){return O(br,null,t,e)}function Hs(t,e){const s=O(Oo,null,t);return s.staticCount=e,s}function L(t="",e=!1){return e?(b(),Ze(Ss,null,t)):O(Ss,null,t)}function ts(t){return t==null||typeof t=="boolean"?O(Ss):ie(t)?O(q,null,t.slice()):Fi(t)?Os(t):O(br,null,String(t))}function Os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Fn(t)}function ul(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ie(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),ul(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!rh(e)?e._ctx=st:i===3&&st&&(st.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:st},s=32):(e=String(e),n&64?(s=16,e=[te(e)]):s=8);t.children=e,t.shapeFlag|=s}function ig(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Ve([e.class,n.class]));else if(i==="style")e.style=Oi([e.style,n.style]);else if(lr(i)){const o=e[i],r=n[i];r&&o!==r&&!(ie(o)&&o.includes(r))&&(e[i]=o?[].concat(o,r):r)}else i!==""&&(e[i]=n[i])}return e}function Jt(t,e,s,n=null){is(t,e,7,[s,n])}const og=nh();let rg=0;function ag(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||og,o={uid:rg++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ip(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lh(n,i),emitsOptions:gh(n,i),emit:null,emitted:null,propsDefaults:Ee,inheritAttrs:n.inheritAttrs,ctx:Ee,data:Ee,props:Ee,attrs:Ee,slots:Ee,refs:Ee,setupState:Ee,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ym.bind(null,o),t.ce&&t.ce(o),o}let lt=null,Jo,ya;{const t=ur(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Jo=e("__VUE_INSTANCE_SETTERS__",s=>lt=s),ya=e("__VUE_SSR_SETTERS__",s=>ji=s)}const Zi=t=>{const e=lt;return Jo(t),t.scope.on(),()=>{t.scope.off(),Jo(e)}},ec=()=>{lt&&lt.scope.off(),Jo(null)};function vh(t){return t.vnode.shapeFlag&4}let ji=!1;function lg(t,e=!1,s=!1){e&&ya(e);const{props:n,children:i}=t.vnode,o=vh(t);Lm(t,n,o,e),Um(t,i,s||e);const r=o?cg(t,e):void 0;return e&&ya(!1),r}function cg(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Am);const{setup:n}=s;if(n){ws();const i=t.setupContext=n.length>1?ug(t):null,o=Zi(t),r=Qi(n,t,0,[t.props,i]),a=yu(r);if(ks(),o(),(a||t.sp)&&!On(t)&&Yu(t),a){if(r.then(ec,ec),e)return r.then(l=>{tc(t,l,e)}).catch(l=>{pr(l,t,0)});t.asyncDep=r}else tc(t,r,e)}else _h(t,e)}function tc(t,e,s){ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Le(e)&&(t.setupState=$u(e)),_h(t,s)}let sc;function _h(t,e,s){const n=t.type;if(!t.render){if(!e&&sc&&!n.render){const i=n.template||ll(t).template;if(i){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=et(et({isCustomElement:o,delimiters:a},r),l);n.render=sc(i,c)}}t.render=n.render||Bt}{const i=Zi(t);ws();try{Pm(t)}finally{ks(),i()}}}const dg={get(t,e){return at(t,"get",""),t[e]}};function ug(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,dg),slots:t.slots,emit:t.emit,expose:e}}function yr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($u(Zp(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in yi)return yi[s](t)},has(e,s){return s in e||s in yi}})):t.proxy}function hg(t,e=!0){return ue(t)?t.displayName||t.name:t.name||e&&t.__name}function fg(t){return ue(t)&&"__vccOpts"in t}const Nt=(t,e)=>om(t,e,ji);function wh(t,e,s){const n=arguments.length;return n===2?Le(e)&&!ie(e)?Fi(e)?O(t,null,[e]):O(t,e):O(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Fi(s)&&(s=[s]),O(t,e,s))}const pg="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xa;const nc=typeof window<"u"&&window.trustedTypes;if(nc)try{xa=nc.createPolicy("vue",{createHTML:t=>t})}catch{}const kh=xa?t=>xa.createHTML(t):t=>t,mg="http://www.w3.org/2000/svg",gg="http://www.w3.org/1998/Math/MathML",hs=typeof document<"u"?document:null,ic=hs&&hs.createElement("template"),bg={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?hs.createElementNS(mg,t):e==="mathml"?hs.createElementNS(gg,t):s?hs.createElement(t,{is:s}):hs.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>hs.createTextNode(t),createComment:t=>hs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,o){const r=s?s.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{ic.innerHTML=kh(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=ic.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},yg=Symbol("_vtc");function xg(t,e,s){const n=t[yg];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Xo=Symbol("_vod"),Sh=Symbol("_vsh"),In={beforeMount(t,{value:e},{transition:s}){t[Xo]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Zn(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),Zn(t,!0),n.enter(t)):n.leave(t,()=>{Zn(t,!1)}):Zn(t,e))},beforeUnmount(t,{value:e}){Zn(t,e)}};function Zn(t,e){t.style.display=e?t[Xo]:"none",t[Sh]=!e}const vg=Symbol(""),_g=/(^|;)\s*display\s*:/;function wg(t,e,s){const n=t.style,i=Ge(s);let o=!1;if(s&&!i){if(e)if(Ge(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Io(n,a,"")}else for(const r in e)s[r]==null&&Io(n,r,"");for(const r in s)r==="display"&&(o=!0),Io(n,r,s[r])}else if(i){if(e!==s){const r=n[vg];r&&(s+=";"+r),n.cssText=s,o=_g.test(s)}}else e&&t.removeAttribute("style");Xo in t&&(t[Xo]=o?n.display:"",t[Sh]&&(n.display="none"))}const oc=/\s*!important$/;function Io(t,e,s){if(ie(s))s.forEach(n=>Io(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=kg(t,e);oc.test(s)?t.setProperty(fn(n),s.replace(oc,""),"important"):t[n]=s}}const rc=["Webkit","Moz","ms"],Br={};function kg(t,e){const s=Br[e];if(s)return s;let n=Rt(e);if(n!=="filter"&&n in t)return Br[e]=n;n=dr(n);for(let i=0;i<rc.length;i++){const o=rc[i]+n;if(o in t)return Br[e]=o}return e}const ac="http://www.w3.org/1999/xlink";function lc(t,e,s,n,i,o=Op(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ac,e.slice(6,e.length)):t.setAttributeNS(ac,e,s):s==null||o&&!wu(s)?t.removeAttribute(e):t.setAttribute(e,o?"":Ht(s)?String(s):s)}function cc(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?kh(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let r=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=wu(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{t[e]=s}catch{}r&&t.removeAttribute(i||e)}function Rs(t,e,s,n){t.addEventListener(e,s,n)}function Sg(t,e,s,n){t.removeEventListener(e,s,n)}const dc=Symbol("_vei");function Cg(t,e,s,n,i=null){const o=t[dc]||(t[dc]={}),r=o[e];if(n&&r)r.value=n;else{const[a,l]=Mg(e);if(n){const c=o[e]=Eg(n,i);Rs(t,a,c,l)}else r&&(Sg(t,a,r,l),o[e]=void 0)}}const uc=/(?:Once|Passive|Capture)$/;function Mg(t){let e;if(uc.test(t)){e={};let n;for(;n=t.match(uc);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fn(t.slice(2)),e]}let Vr=0;const Ag=Promise.resolve(),Pg=()=>Vr||(Ag.then(()=>Vr=0),Vr=Date.now());function Eg(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;is(Tg(n,s.value),e,5,[n])};return s.value=t,s.attached=Pg(),s}function Tg(t,e){if(ie(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const hc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Og=(t,e,s,n,i,o)=>{const r=i==="svg";e==="class"?xg(t,n,r):e==="style"?wg(t,s,n):lr(e)?Ga(e)||Cg(t,e,s,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Dg(t,e,n,r))?(cc(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&lc(t,e,n,r,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ge(n))?cc(t,Rt(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),lc(t,e,n,r))};function Dg(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&hc(e)&&ue(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return hc(e)&&Ge(s)?!1:e in t}const jn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ie(e)?s=>Po(e,s):e};function Ig(t){t.target.composing=!0}function fc(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _s=Symbol("_assign"),D={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[_s]=jn(i);const o=n||i.props&&i.props.type==="number";Rs(t,e?"change":"input",r=>{if(r.target.composing)return;let a=t.value;s&&(a=a.trim()),o&&(a=Ho(a)),t[_s](a)}),s&&Rs(t,"change",()=>{t.value=t.value.trim()}),e||(Rs(t,"compositionstart",Ig),Rs(t,"compositionend",fc),Rs(t,"change",fc))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(t[_s]=jn(r),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?Ho(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===l)||(t.value=l))}},hl={deep:!0,created(t,e,s){t[_s]=jn(s),Rs(t,"change",()=>{const n=t._modelValue,i=Ni(t),o=t.checked,r=t[_s];if(ie(n)){const a=Xa(n,i),l=a!==-1;if(o&&!l)r(n.concat(i));else if(!o&&l){const c=[...n];c.splice(a,1),r(c)}}else if(qn(n)){const a=new Set(n);o?a.add(i):a.delete(i),r(a)}else r(Ch(t,o))})},mounted:pc,beforeUpdate(t,e,s){t[_s]=jn(s),pc(t,e,s)}};function pc(t,{value:e,oldValue:s},n){t._modelValue=e;let i;if(ie(e))i=Xa(e,n.props.value)>-1;else if(qn(e))i=e.has(n.props.value);else{if(e===s)return;i=Xi(e,Ch(t,!0))}t.checked!==i&&(t.checked=i)}const Ce={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const i=qn(e);Rs(t,"change",()=>{const o=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>s?Ho(Ni(r)):Ni(r));t[_s](t.multiple?i?new Set(o):o:o[0]),t._assigning=!0,ol(()=>{t._assigning=!1})}),t[_s]=jn(n)},mounted(t,{value:e}){mc(t,e)},beforeUpdate(t,e,s){t[_s]=jn(s)},updated(t,{value:e}){t._assigning||mc(t,e)}};function mc(t,e){const s=t.multiple,n=ie(e);if(!(s&&!n&&!qn(e))){for(let i=0,o=t.options.length;i<o;i++){const r=t.options[i],a=Ni(r);if(s)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=e.some(c=>String(c)===String(a)):r.selected=Xa(e,a)>-1}else r.selected=e.has(a);else if(Xi(Ni(r),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ni(t){return"_value"in t?t._value:t.value}function Ch(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Rg=["ctrl","shift","alt","meta"],Lg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Rg.some(s=>t[`${s}Key`]&&!e.includes(s))},Ke=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<e.length;r++){const a=Lg[e[r]];if(a&&a(i,e))return}return t(i,...o)})},Fg=et({patchProp:Og},bg);let gc;function jg(){return gc||(gc=Vm(Fg))}const Ng=(...t)=>{const e=jg().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=Bg(n);if(!i)return;const o=e._component;!ue(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,Ug(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function Ug(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Bg(t){return Ge(t)?document.querySelector(t):t}const ce=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},Vg={name:"CookieBanner",data(){return{consentGiven:!1}},mounted(){this.consentGiven=localStorage.getItem("cookieConsent")==="true"},methods:{acceptCookies(){this.consentGiven=!0,localStorage.setItem("cookieConsent","true")}}},$g={key:0,class:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50"};function Hg(t,e,s,n,i,o){return i.consentGiven?L("",!0):(b(),v("div",$g,[e[1]||(e[1]=d("p",{class:"mb-2"},[te(" Utilizamos cookies para melhorar sua experiência. Ao continuar, você concorda com nossa "),d("a",{href:"#",class:"underline"},"política de privacidade"),te(". ")],-1)),d("button",{onClick:e[0]||(e[0]=(...r)=>o.acceptCookies&&o.acceptCookies(...r)),class:"btn"}," Aceitar ")]))}const zg=ce(Vg,[["render",Hg]]),Wg={name:"App",components:{CookieBanner:zg}};function qg(t,e,s,n,i,o){const r=V("router-view"),a=V("CookieBanner");return b(),v(q,null,[O(r),O(a)],64)}const Kg=ce(Wg,[["render",qg]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Sn=typeof document<"u";function Mh(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Gg(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Mh(t.default)}const we=Object.assign;function $r(t,e){const s={};for(const n in e){const i=e[n];s[n]=zt(i)?i.map(t):t(i)}return s}const vi=()=>{},zt=Array.isArray,Ah=/#/g,Yg=/&/g,Jg=/\//g,Xg=/=/g,Qg=/\?/g,Ph=/\+/g,Zg=/%5B/g,eb=/%5D/g,Eh=/%5E/g,tb=/%60/g,Th=/%7B/g,sb=/%7C/g,Oh=/%7D/g,nb=/%20/g;function fl(t){return encodeURI(""+t).replace(sb,"|").replace(Zg,"[").replace(eb,"]")}function ib(t){return fl(t).replace(Th,"{").replace(Oh,"}").replace(Eh,"^")}function va(t){return fl(t).replace(Ph,"%2B").replace(nb,"+").replace(Ah,"%23").replace(Yg,"%26").replace(tb,"`").replace(Th,"{").replace(Oh,"}").replace(Eh,"^")}function ob(t){return va(t).replace(Xg,"%3D")}function rb(t){return fl(t).replace(Ah,"%23").replace(Qg,"%3F")}function ab(t){return t==null?"":rb(t).replace(Jg,"%2F")}function Ui(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const lb=/\/$/,cb=t=>t.replace(lb,"");function Hr(t,e,s="/"){let n,i={},o="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),i=t(o)),a>-1&&(n=n||e.slice(0,a),r=e.slice(a,e.length)),n=fb(n??e,s),{fullPath:n+(o&&"?")+o+r,path:n,query:i,hash:Ui(r)}}function db(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function bc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ub(t,e,s){const n=e.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&Nn(e.matched[n],s.matched[i])&&Dh(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Nn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Dh(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!hb(t[s],e[s]))return!1;return!0}function hb(t,e){return zt(t)?yc(t,e):zt(e)?yc(e,t):t===e}function yc(t,e){return zt(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function fb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=s.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(r).join("/")}const As={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Bi;(function(t){t.pop="pop",t.push="push"})(Bi||(Bi={}));var _i;(function(t){t.back="back",t.forward="forward",t.unknown=""})(_i||(_i={}));function pb(t){if(!t)if(Sn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),cb(t)}const mb=/^[^#]+#/;function gb(t,e){return t.replace(mb,"#")+e}function bb(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const xr=()=>({left:window.scrollX,top:window.scrollY});function yb(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;e=bb(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function xc(t,e){return(history.state?history.state.position-e:-1)+t}const _a=new Map;function xb(t,e){_a.set(t,e)}function vb(t){const e=_a.get(t);return _a.delete(t),e}let _b=()=>location.protocol+"//"+location.host;function Ih(t,e){const{pathname:s,search:n,hash:i}=e,o=t.indexOf("#");if(o>-1){let a=i.includes(t.slice(o))?t.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),bc(l,"")}return bc(s,t)+n+i}function wb(t,e,s,n){let i=[],o=[],r=null;const a=({state:f})=>{const p=Ih(t,location),m=s.value,g=e.value;let y=0;if(f){if(s.value=p,e.value=f,r&&r===m){r=null;return}y=g?f.position-g.position:0}else n(p);i.forEach(w=>{w(s.value,m,{delta:y,type:Bi.pop,direction:y?y>0?_i.forward:_i.back:_i.unknown})})};function l(){r=s.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return o.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(we({},f.state,{scroll:xr()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function vc(t,e,s,n=!1,i=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:i?xr():null}}function kb(t){const{history:e,location:s}=window,n={value:Ih(t,s)},i={value:e.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const h=t.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?t:t.slice(h))+l:_b()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function r(l,c){const u=we({},e.state,vc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,u,!0),n.value=l}function a(l,c){const u=we({},i.value,e.state,{forward:l,scroll:xr()});o(u.current,u,!0);const h=we({},vc(n.value,l,null),{position:u.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function Sb(t){t=pb(t);const e=kb(t),s=wb(t,e.state,e.location,e.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=we({location:"",base:t,go:n,createHref:gb.bind(null,t)},e,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function Cb(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Sb(t)}function Mb(t){return typeof t=="string"||t&&typeof t=="object"}function Rh(t){return typeof t=="string"||typeof t=="symbol"}const Lh=Symbol("");var _c;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_c||(_c={}));function Un(t,e){return we(new Error,{type:t,[Lh]:!0},e)}function as(t,e){return t instanceof Error&&Lh in t&&(e==null||!!(t.type&e))}const wc="[^/]+?",Ab={sensitive:!1,strict:!1,start:!0,end:!0},Pb=/[.+*?^${}()[\]/\\]/g;function Eb(t,e){const s=we({},Ab,e),n=[];let i=s.start?"^":"";const o=[];for(const c of t){const u=c.length?[]:[90];s.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(Pb,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:g,optional:y,regexp:w}=f;o.push({name:m,repeatable:g,optional:y});const k=w||wc;if(k!==wc){p+=10;try{new RegExp(`(${k})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${k}): `+S.message)}}let A=g?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(A=y&&c.length<2?`(?:/${A})`:"/"+A),y&&(A+="?"),i+=A,p+=20,y&&(p+=-8),g&&(p+=-20),k===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function a(c){const u=c.match(r),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=o[f-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:y}=p,w=m in c?c[m]:"";if(zt(w)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const k=zt(w)?w.join("/"):w;if(!k)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=k}}return u||"/"}return{re:r,score:n,keys:o,parse:a,stringify:l}}function Tb(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Fh(t,e){let s=0;const n=t.score,i=e.score;for(;s<n.length&&s<i.length;){const o=Tb(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(kc(n))return 1;if(kc(i))return-1}return i.length-n.length}function kc(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ob={type:0,value:""},Db=/[a-zA-Z0-9_]/;function Ib(t){if(!t)return[[]];if(t==="/")return[[Ob]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=0,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,c="",u="";function h(){c&&(s===0?o.push({type:0,value:c}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&h(),r()):l===":"?(h(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:Db.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),r(),i}function Rb(t,e,s){const n=Eb(Ib(t.path),s),i=we(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Lb(t,e){const s=[],n=new Map;e=Ac({strict:!1,end:!0,sensitive:!1},e);function i(h){return n.get(h)}function o(h,f,p){const m=!p,g=Cc(h);g.aliasOf=p&&p.record;const y=Ac(e,h),w=[g];if("alias"in h){const S=typeof h.alias=="string"?[h.alias]:h.alias;for(const P of S)w.push(Cc(we({},g,{components:p?p.record.components:g.components,path:P,aliasOf:p?p.record:g})))}let k,A;for(const S of w){const{path:P}=S;if(f&&P[0]!=="/"){const N=f.record.path,F=N[N.length-1]==="/"?"":"/";S.path=f.record.path+(P&&F+P)}if(k=Rb(S,f,y),p?p.alias.push(k):(A=A||k,A!==k&&A.alias.push(k),m&&h.name&&!Mc(k)&&r(h.name)),jh(k)&&l(k),g.children){const N=g.children;for(let F=0;F<N.length;F++)o(N[F],k,p&&p.children[F])}p=p||k}return A?()=>{r(A)}:vi}function r(h){if(Rh(h)){const f=n.get(h);f&&(n.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(r),h.alias.forEach(r))}}function a(){return s}function l(h){const f=Nb(h,s);s.splice(f,0,h),h.record.name&&!Mc(h)&&n.set(h.record.name,h)}function c(h,f){let p,m={},g,y;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw Un(1,{location:h});y=p.record.name,m=we(Sc(f.params,p.keys.filter(A=>!A.optional).concat(p.parent?p.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),h.params&&Sc(h.params,p.keys.map(A=>A.name))),g=p.stringify(m)}else if(h.path!=null)g=h.path,p=s.find(A=>A.re.test(g)),p&&(m=p.parse(g),y=p.record.name);else{if(p=f.name?n.get(f.name):s.find(A=>A.re.test(f.path)),!p)throw Un(1,{location:h,currentLocation:f});y=p.record.name,m=we({},f.params,h.params),g=p.stringify(m)}const w=[];let k=p;for(;k;)w.unshift(k.record),k=k.parent;return{name:y,path:g,params:m,matched:w,meta:jb(w)}}t.forEach(h=>o(h));function u(){s.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Sc(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function Cc(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Fb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Fb(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Mc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jb(t){return t.reduce((e,s)=>we(e,s.meta),{})}function Ac(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function Nb(t,e){let s=0,n=e.length;for(;s!==n;){const o=s+n>>1;Fh(t,e[o])<0?n=o:s=o+1}const i=Ub(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function Ub(t){let e=t;for(;e=e.parent;)if(jh(e)&&Fh(t,e)===0)return e}function jh({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Bb(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Ph," "),r=o.indexOf("="),a=Ui(r<0?o:o.slice(0,r)),l=r<0?null:Ui(o.slice(r+1));if(a in e){let c=e[a];zt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Pc(t){let e="";for(let s in t){const n=t[s];if(s=ob(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(zt(n)?n.map(o=>o&&va(o)):[n&&va(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+s,o!=null&&(e+="="+o))})}return e}function Vb(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=zt(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const $b=Symbol(""),Ec=Symbol(""),pl=Symbol(""),Nh=Symbol(""),wa=Symbol("");function ei(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Ds(t,e,s,n,i,o=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Un(4,{from:s,to:e})):f instanceof Error?l(f):Mb(f)?l(Un(2,{from:e,to:f})):(r&&n.enterCallbacks[i]===r&&typeof f=="function"&&r.push(f),a())},u=o(()=>t.call(n&&n.instances[i],e,s,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function zr(t,e,s,n,i=o=>o()){const o=[];for(const r of t)for(const a in r.components){let l=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(Mh(l)){const u=(l.__vccOpts||l)[e];u&&o.push(Ds(u,s,n,r,a,i))}else{let c=l();o.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const h=Gg(u)?u.default:u;r.mods[a]=u,r.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&Ds(p,s,n,r,a,i)()}))}}return o}function Tc(t){const e=vs(pl),s=vs(Nh),n=Nt(()=>{const l=En(t.to);return e.resolve(l)}),i=Nt(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=s.matched;if(!u||!h.length)return-1;const f=h.findIndex(Nn.bind(null,u));if(f>-1)return f;const p=Oc(l[c-2]);return c>1&&Oc(u)===p&&h[h.length-1].path!==p?h.findIndex(Nn.bind(null,l[c-2])):f}),o=Nt(()=>i.value>-1&&Kb(s.params,n.value.params)),r=Nt(()=>i.value>-1&&i.value===s.matched.length-1&&Dh(s.params,n.value.params));function a(l={}){if(qb(l)){const c=e[En(t.replace)?"replace":"push"](En(t.to)).catch(vi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Nt(()=>n.value.href),isActive:o,isExactActive:r,navigate:a}}function Hb(t){return t.length===1?t[0]:t}const zb=Gu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tc,setup(t,{slots:e}){const s=fr(Tc(t)),{options:n}=vs(pl),i=Nt(()=>({[Dc(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Dc(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&Hb(e.default(s));return t.custom?o:wh("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),Wb=zb;function qb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Kb(t,e){for(const s in e){const n=e[s],i=t[s];if(typeof n=="string"){if(n!==i)return!1}else if(!zt(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function Oc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dc=(t,e,s)=>t??e??s,Gb=Gu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=vs(wa),i=Nt(()=>t.route||n.value),o=vs(Ec,0),r=Nt(()=>{let c=En(o);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Nt(()=>i.value.matched[r.value]);Eo(Ec,Nt(()=>r.value+1)),Eo($b,a),Eo(wa,i);const l=em();return To(()=>[l.value,a.value,t.name],([c,u,h],[f,p,m])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Nn(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return Ic(s.default,{Component:f,route:c});const p=h.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=wh(f,we({},m,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Ic(s.default,{Component:y,route:c})||y}}});function Ic(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Yb=Gb;function Jb(t){const e=Lb(t.routes,t),s=t.parseQuery||Bb,n=t.stringifyQuery||Pc,i=t.history,o=ei(),r=ei(),a=ei(),l=tm(As);let c=As;Sn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$r.bind(null,R=>""+R),h=$r.bind(null,ab),f=$r.bind(null,Ui);function p(R,J){let G,Z;return Rh(R)?(G=e.getRecordMatcher(R),Z=J):Z=R,e.addRoute(Z,G)}function m(R){const J=e.getRecordMatcher(R);J&&e.removeRoute(J)}function g(){return e.getRoutes().map(R=>R.record)}function y(R){return!!e.getRecordMatcher(R)}function w(R,J){if(J=we({},J||l.value),typeof R=="string"){const _=Hr(s,R,J.path),E=e.resolve({path:_.path},J),j=i.createHref(_.fullPath);return we(_,E,{params:f(E.params),hash:Ui(_.hash),redirectedFrom:void 0,href:j})}let G;if(R.path!=null)G=we({},R,{path:Hr(s,R.path,J.path).path});else{const _=we({},R.params);for(const E in _)_[E]==null&&delete _[E];G=we({},R,{params:h(_)}),J.params=h(J.params)}const Z=e.resolve(G,J),_e=R.hash||"";Z.params=u(f(Z.params));const Ue=db(n,we({},R,{hash:ib(_e),path:Z.path})),x=i.createHref(Ue);return we({fullPath:Ue,hash:_e,query:n===Pc?Vb(R.query):R.query||{}},Z,{redirectedFrom:void 0,href:x})}function k(R){return typeof R=="string"?Hr(s,R,l.value.path):we({},R)}function A(R,J){if(c!==R)return Un(8,{from:J,to:R})}function S(R){return F(R)}function P(R){return S(we(k(R),{replace:!0}))}function N(R){const J=R.matched[R.matched.length-1];if(J&&J.redirect){const{redirect:G}=J;let Z=typeof G=="function"?G(R):G;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=k(Z):{path:Z},Z.params={}),we({query:R.query,hash:R.hash,params:Z.path!=null?{}:R.params},Z)}}function F(R,J){const G=c=w(R),Z=l.value,_e=R.state,Ue=R.force,x=R.replace===!0,_=N(G);if(_)return F(we(k(_),{state:typeof _=="object"?we({},_e,_.state):_e,force:Ue,replace:x}),J||G);const E=G;E.redirectedFrom=J;let j;return!Ue&&ub(n,Z,G)&&(j=Un(16,{to:E,from:Z}),ft(Z,Z,!0,!1)),(j?Promise.resolve(j):oe(E,Z)).catch(I=>as(I)?as(I,2)?I:ht(I):fe(I,E,Z)).then(I=>{if(I){if(as(I,2))return F(we({replace:x},k(I.to),{state:typeof I.to=="object"?we({},_e,I.to.state):_e,force:Ue}),J||E)}else I=he(E,Z,!0,x,_e);return ae(E,Z,I),I})}function $(R,J){const G=A(R,J);return G?Promise.reject(G):Promise.resolve()}function Q(R){const J=bt.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(R):R()}function oe(R,J){let G;const[Z,_e,Ue]=Xb(R,J);G=zr(Z.reverse(),"beforeRouteLeave",R,J);for(const _ of Z)_.leaveGuards.forEach(E=>{G.push(Ds(E,R,J))});const x=$.bind(null,R,J);return G.push(x),qe(G).then(()=>{G=[];for(const _ of o.list())G.push(Ds(_,R,J));return G.push(x),qe(G)}).then(()=>{G=zr(_e,"beforeRouteUpdate",R,J);for(const _ of _e)_.updateGuards.forEach(E=>{G.push(Ds(E,R,J))});return G.push(x),qe(G)}).then(()=>{G=[];for(const _ of Ue)if(_.beforeEnter)if(zt(_.beforeEnter))for(const E of _.beforeEnter)G.push(Ds(E,R,J));else G.push(Ds(_.beforeEnter,R,J));return G.push(x),qe(G)}).then(()=>(R.matched.forEach(_=>_.enterCallbacks={}),G=zr(Ue,"beforeRouteEnter",R,J,Q),G.push(x),qe(G))).then(()=>{G=[];for(const _ of r.list())G.push(Ds(_,R,J));return G.push(x),qe(G)}).catch(_=>as(_,8)?_:Promise.reject(_))}function ae(R,J,G){a.list().forEach(Z=>Q(()=>Z(R,J,G)))}function he(R,J,G,Z,_e){const Ue=A(R,J);if(Ue)return Ue;const x=J===As,_=Sn?history.state:{};G&&(Z||x?i.replace(R.fullPath,we({scroll:x&&_&&_.scroll},_e)):i.push(R.fullPath,_e)),l.value=R,ft(R,J,G,x),ht()}let Pe;function Ye(){Pe||(Pe=i.listen((R,J,G)=>{if(!Gt.listening)return;const Z=w(R),_e=N(Z);if(_e){F(we(_e,{replace:!0,force:!0}),Z).catch(vi);return}c=Z;const Ue=l.value;Sn&&xb(xc(Ue.fullPath,G.delta),xr()),oe(Z,Ue).catch(x=>as(x,12)?x:as(x,2)?(F(we(k(x.to),{force:!0}),Z).then(_=>{as(_,20)&&!G.delta&&G.type===Bi.pop&&i.go(-1,!1)}).catch(vi),Promise.reject()):(G.delta&&i.go(-G.delta,!1),fe(x,Z,Ue))).then(x=>{x=x||he(Z,Ue,!1),x&&(G.delta&&!as(x,8)?i.go(-G.delta,!1):G.type===Bi.pop&&as(x,20)&&i.go(-1,!1)),ae(Z,Ue,x)}).catch(vi)}))}let xe=ei(),de=ei(),re;function fe(R,J,G){ht(R);const Z=de.list();return Z.length?Z.forEach(_e=>_e(R,J,G)):console.error(R),Promise.reject(R)}function Te(){return re&&l.value!==As?Promise.resolve():new Promise((R,J)=>{xe.add([R,J])})}function ht(R){return re||(re=!R,Ye(),xe.list().forEach(([J,G])=>R?G(R):J()),xe.reset()),R}function ft(R,J,G,Z){const{scrollBehavior:_e}=t;if(!Sn||!_e)return Promise.resolve();const Ue=!G&&vb(xc(R.fullPath,0))||(Z||!G)&&history.state&&history.state.scroll||null;return ol().then(()=>_e(R,J,Ue)).then(x=>x&&yb(x)).catch(x=>fe(x,R,J))}const He=R=>i.go(R);let Ot;const bt=new Set,Gt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:w,options:t,push:S,replace:P,go:He,back:()=>He(-1),forward:()=>He(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:de.add,isReady:Te,install(R){const J=this;R.component("RouterLink",Wb),R.component("RouterView",Yb),R.config.globalProperties.$router=J,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>En(l)}),Sn&&!Ot&&l.value===As&&(Ot=!0,S(i.location).catch(_e=>{}));const G={};for(const _e in As)Object.defineProperty(G,_e,{get:()=>l.value[_e],enumerable:!0});R.provide(pl,J),R.provide(Nh,Uu(G)),R.provide(wa,l);const Z=R.unmount;bt.add(R),R.unmount=function(){bt.delete(R),bt.size<1&&(c=As,Pe&&Pe(),Pe=null,l.value=As,Ot=!1,re=!1),Z()}}};function qe(R){return R.reduce((J,G)=>J.then(()=>Q(G)),Promise.resolve())}return Gt}function Xb(t,e){const s=[],n=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let r=0;r<o;r++){const a=e.matched[r];a&&(t.matched.find(c=>Nn(c,a))?n.push(a):s.push(a));const l=t.matched[r];l&&(e.matched.find(c=>Nn(c,l))||i.push(l))}return[s,n,i]}const Qb={name:"Navbar",data(){return{open:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route(){this.open=!1}},methods:{toggleMenu(){this.open=!this.open},handleScroll(){this.open&&(this.open=!1)}}},Zb={class:"flex items-center justify-between px-8 py-4 bg-white shadow relative"},e0={class:"hidden md:flex items-center space-x-4"},t0={key:0,class:"absolute top-full left-0 w-full bg-white shadow-md md:hidden flex flex-col items-start space-y-4 py-4 px-8"};function s0(t,e,s,n,i,o){const r=V("router-link");return b(),v("nav",Zb,[O(r,{to:"/",class:"text-xl font-bold text-blue-600"},{default:X(()=>e[5]||(e[5]=[te("Agenda Zen")])),_:1,__:[5]}),d("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden focus:outline-none"},e[6]||(e[6]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),d("div",e0,[O(r,{to:"/buscar",class:"text-blue-600 hover:underline"},{default:X(()=>e[7]||(e[7]=[te("Buscar")])),_:1,__:[7]}),O(r,{to:"/planos",class:"text-blue-600 hover:underline"},{default:X(()=>e[8]||(e[8]=[te("Planos")])),_:1,__:[8]}),O(r,{to:"/contato",class:"text-blue-600 hover:underline"},{default:X(()=>e[9]||(e[9]=[te("Contato")])),_:1,__:[9]}),O(r,{to:"/login",class:"btn"},{default:X(()=>e[10]||(e[10]=[te("Login")])),_:1,__:[10]})]),i.open?(b(),v("div",t0,[O(r,{onClick:e[1]||(e[1]=a=>i.open=!1),to:"/buscar",class:"text-blue-600 hover:underline"},{default:X(()=>e[11]||(e[11]=[te("Buscar")])),_:1,__:[11]}),O(r,{onClick:e[2]||(e[2]=a=>i.open=!1),to:"/planos",class:"text-blue-600 hover:underline"},{default:X(()=>e[12]||(e[12]=[te("Planos")])),_:1,__:[12]}),O(r,{onClick:e[3]||(e[3]=a=>i.open=!1),to:"/contato",class:"text-blue-600 hover:underline"},{default:X(()=>e[13]||(e[13]=[te("Contato")])),_:1,__:[13]}),O(r,{onClick:e[4]||(e[4]=a=>i.open=!1),to:"/login",class:"btn"},{default:X(()=>e[14]||(e[14]=[te("Login")])),_:1,__:[14]})])):L("",!0)])}const qt=ce(Qb,[["render",s0]]),n0="/hero-illustration.png",i0={name:"HeroBanner"},o0={class:"text-center py-20"},r0={class:"max-w-4xl mx-auto px-4"},a0={class:"grid grid-cols-1 md:grid-cols-2 items-center gap-8"},l0={class:"space-x-4"};function c0(t,e,s,n,i,o){const r=V("router-link");return b(),v("section",o0,[d("div",r0,[d("div",a0,[d("div",null,[e[2]||(e[2]=d("h1",{class:"text-4xl font-bold text-blue-800 mb-4"},"Sua agenda digital simples e profissional",-1)),e[3]||(e[3]=d("p",{class:"text-gray-600 text-lg mb-6"},"Perfeita para psicólogos, terapeutas, dentistas, cabeleireiros e mais",-1)),d("div",l0,[O(r,{to:"/login",class:"bg-white border border-blue-600 text-blue-600 px-6 py-2 rounded hover:bg-blue-100"},{default:X(()=>e[0]||(e[0]=[te("Entrar")])),_:1,__:[0]}),O(r,{to:"/cadastro",class:"btn"},{default:X(()=>e[1]||(e[1]=[te("Criar conta")])),_:1,__:[1]})])]),e[4]||(e[4]=d("div",null,[d("img",{src:n0,alt:"Ilustração profissional usando a plataforma",class:"w-full h-auto mx-auto"})],-1))])])])}const d0=ce(i0,[["render",c0]]),cs="/icons/check.svg",u0={name:"FeaturesSection"},h0={class:"py-16 px-8"};function f0(t,e,s,n,i,o){return b(),v("section",h0,e[0]||(e[0]=[Hs('<h2 class="text-2xl font-bold text-center mb-8">Funcionalidades</h2><ul class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 text-lg"><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Cadastro e autenticação de usuários</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Gestão de clientes, serviços e salas</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Controle de agendamentos em lista, calendário ou semana</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Dashboard com estatísticas e gráficos</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Configuração de perfil público com link personalizado</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Geração de comprovantes de atendimento</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Lembretes automáticos para seus clientes</span></li><li class="flex items-start"><img src="'+cs+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Pagamentos via Pix de forma prática e segura</span></li></ul>',2)]))}const p0=ce(u0,[["render",f0]]),m0="/about-illustration.png",g0={name:"AboutSection"},b0={class:"px-8 py-16"};function y0(t,e,s,n,i,o){return b(),v("section",b0,e[0]||(e[0]=[d("div",{class:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center"},[d("div",null,[d("img",{src:m0,alt:"Ilustração sobre agendamento",class:"w-full h-auto mx-auto"})]),d("div",null,[d("h2",{class:"text-2xl font-bold mb-4"},"O que é o Agenda Zen?"),d("p",{class:"text-gray-700 text-lg"}," O Agenda Zen é uma plataforma pensada para profissionais que trabalham com agendamentos. Criamos uma solução simples, bonita e eficiente para divulgar seus serviços, aceitar agendamentos online, enviar lembretes automáticos e receber pagamentos por Pix — tudo sem complicação. ")])],-1)]))}const x0=ce(g0,[["render",y0]]),v0={name:"Footer"},_0={class:"bg-gray-100 text-center text-sm text-gray-500 py-6 space-y-4"},w0={class:"flex flex-wrap justify-center space-x-2"};function k0(t,e,s,n,i,o){const r=V("router-link");return b(),v("footer",_0,[e[9]||(e[9]=d("div",{class:"space-x-4 text-blue-600"},[d("a",{href:"https://www.instagram.com/agendazen_",target:"_blank",class:"hover:underline"},"Instagram"),d("a",{href:"https://www.facebook.com/agenda.zen",target:"_blank",class:"hover:underline"},"Facebook"),d("a",{href:"https://x.com/agenda_zen",target:"_blank",class:"hover:underline"},"X")],-1)),d("div",w0,[O(r,{to:"/termos-de-uso",class:"hover:underline"},{default:X(()=>e[0]||(e[0]=[te("Termos de uso")])),_:1,__:[0]}),e[5]||(e[5]=d("span",null,"|",-1)),O(r,{to:"/planos",class:"hover:underline"},{default:X(()=>e[1]||(e[1]=[te("Planos")])),_:1,__:[1]}),e[6]||(e[6]=d("span",null,"|",-1)),O(r,{to:"/contato",class:"hover:underline"},{default:X(()=>e[2]||(e[2]=[te("Contato")])),_:1,__:[2]}),e[7]||(e[7]=d("span",null,"|",-1)),O(r,{to:"/faq",class:"hover:underline"},{default:X(()=>e[3]||(e[3]=[te("FAQ")])),_:1,__:[3]}),e[8]||(e[8]=d("span",null,"|",-1)),O(r,{to:"/politica-de-privacidade",class:"hover:underline"},{default:X(()=>e[4]||(e[4]=[te("Política de privacidade")])),_:1,__:[4]})]),e[10]||(e[10]=d("p",null,"© 2025 Agenda Zen — Todos os direitos reservados",-1))])}const Kt=ce(v0,[["render",k0]]),S0={name:"Home",components:{Navbar:qt,HeroBanner:d0,FeaturesSection:p0,AboutSection:x0,Footer:Kt}};function C0(t,e,s,n,i,o){const r=V("Navbar"),a=V("HeroBanner"),l=V("FeaturesSection"),c=V("AboutSection"),u=V("Footer");return b(),v(q,null,[O(r),O(a),O(l),O(c),O(u)],64)}const M0=ce(S0,[["render",C0]]),A0="modulepreload",P0=function(t){return"/"+t},Rc={},Bn=function(e,s,n){if(!s||s.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=P0(o),o in Rc)return;Rc[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===o&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":A0,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},E0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Bn(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class ml extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class T0 extends ml{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class O0 extends ml{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class D0 extends ml{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ka;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ka||(ka={}));var I0=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class R0{constructor(e,{headers:s={},customFetch:n,region:i=ka.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=E0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return I0(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=r):typeof r=="string"?(a["Content-Type"]="text/plain",c=r):typeof FormData<"u"&&r instanceof FormData?c=r:(a["Content-Type"]="application/json",c=JSON.stringify(r)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new T0(m)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new O0(u);if(!u.ok)throw new D0(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function L0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var _t={},gl={},vr={},eo={},_r={},wr={},F0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vn=F0();const j0=Vn.fetch,Uh=Vn.fetch.bind(Vn),Bh=Vn.Headers,N0=Vn.Request,U0=Vn.Response,Kn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bh,Request:N0,Response:U0,default:Uh,fetch:j0},Symbol.toStringTag,{value:"Module"})),B0=L0(Kn);var kr={};Object.defineProperty(kr,"__esModule",{value:!0});let V0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};kr.default=V0;var Vh=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});const $0=Vh(B0),H0=Vh(kr);let z0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=$0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var r,a,l;let c=null,u=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),y=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(u=[],c=null,f=200,p="OK")}catch{o.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new H0.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var r,a,l;return{error:{message:`${(r=o==null?void 0:o.name)!==null&&r!==void 0?r:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};wr.default=z0;var W0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r,"__esModule",{value:!0});const q0=W0(wr);let K0=class extends q0.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const r=o?`${o}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(r,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:r="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_r.default=K0;var G0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eo,"__esModule",{value:!0});const Y0=G0(_r);let J0=class extends Y0.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const r=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${r}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};eo.default=J0;var X0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vr,"__esModule",{value:!0});const ti=X0(eo);let Q0=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=s,this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let o=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),n&&(this.headers.Prefer=`count=${n}`),new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const r=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(r.length>0){const a=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){const r="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ti.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new ti.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ti.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vr.default=Q0;var Sr={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.version=void 0;Cr.version="0.0.0-automated";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.DEFAULT_HEADERS=void 0;const Z0=Cr;Sr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Z0.version}`};var $h=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gl,"__esModule",{value:!0});const ey=$h(vr),ty=$h(eo),sy=Sr;let ny=class Hh{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},sy.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new ey.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Hh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:o}={}){let r;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(r=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(r="POST",l=s);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new ty.default({method:r,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};gl.default=ny;var Gn=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_t,"__esModule",{value:!0});_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const zh=Gn(gl);_t.PostgrestClient=zh.default;const Wh=Gn(vr);_t.PostgrestQueryBuilder=Wh.default;const qh=Gn(eo);_t.PostgrestFilterBuilder=qh.default;const Kh=Gn(_r);_t.PostgrestTransformBuilder=Kh.default;const Gh=Gn(wr);_t.PostgrestBuilder=Gh.default;const Yh=Gn(kr);_t.PostgrestError=Yh.default;var iy=_t.default={PostgrestClient:zh.default,PostgrestQueryBuilder:Wh.default,PostgrestFilterBuilder:qh.default,PostgrestTransformBuilder:Kh.default,PostgrestBuilder:Gh.default,PostgrestError:Yh.default};const{PostgrestClient:oy,PostgrestQueryBuilder:gI,PostgrestFilterBuilder:bI,PostgrestTransformBuilder:yI,PostgrestBuilder:xI,PostgrestError:vI}=iy,ry="2.11.2",ay={"X-Client-Info":`realtime-js/${ry}`},ly="1.0.0",Jh=1e4,cy=1e3;var Rn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rn||(Rn={}));var At;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(At||(At={}));var jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jt||(jt={}));var Sa;(function(t){t.websocket="websocket"})(Sa||(Sa={}));var rn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rn||(rn={}));class dy{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(e.slice(r,r+i));r=r+i;const l=n.decode(e.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(e.slice(r,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Xh{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const Lc=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,r)=>(o[r]=uy(r,t,e,i),o),{})},uy=(t,e,s,n)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,r=s[t];return o&&!n.includes(o)?Qh(o,r):Ca(r)},Qh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return my(e,s)}switch(t){case De.bool:return hy(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return fy(e);case De.json:case De.jsonb:return py(e);case De.timestamp:return gy(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Ca(e);default:return Ca(e)}},Ca=t=>t,hy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},py=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},my=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let o;const r=t.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>Qh(e,a))}return t},gy=t=>typeof t=="string"?t.replace(" ","T"):t,Zh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wr{constructor(e,s,n={},i=Jh){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fc||(Fc={}));class wi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wi.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=wi.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wi.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const o=this.cloneDeep(e),r=this.transformState(s),a={},l={};return this.map(o,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const h=o[c];if(h){const f=u.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),m=u.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(e,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,u,l)}),this.map(r,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jc||(jc={}));var Nc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Nc||(Nc={}));var fs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fs||(fs={}));class bl{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Wr(this,jt.join,this.params,this.timeout),this.rejoinTimer=new Xh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new wi(this),this.broadcastEndpointURL=Zh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:r,private:a}}=this.params;this._onError(u=>e==null?void 0:e(fs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(fs.CLOSED));const l={},c={broadcast:o,presence:r,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(fs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let g=0;g<p;g++){const y=f[g],{filter:{event:w,schema:k,table:A,filter:S}}=y,P=u&&u[g];if(P&&P.event===w&&P.schema===k&&P.table===A&&P.filter===S)m.push(Object.assign(Object.assign({},y),{id:P.id}));else{this.unsubscribe(),e==null||e(fs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(fs.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(fs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:r}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=At.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Wr(this,jt.leave,{},e);i.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Wr(this,e,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,o;const r=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=jt;if(n&&[a,l,c,u].indexOf(r)>=0&&n!==this._joinRef())return;let f=this._onMessage(r,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===r}).map(p=>p.callback(f,n)):(o=this.bindings[r])===null||o===void 0||o.filter(p=>{var m,g,y,w,k,A;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in p){const S=p.id,P=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((y=s.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(k=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return S==="*"||S===((A=s==null?void 0:s.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===r}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:y,commit_timestamp:w,type:k,errors:A}=m;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:k,new:{},old:{},errors:A}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&bl.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jt.close,{},e)}_onError(e){this._on(jt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Lc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Lc(e.columns,e.old_record)),s}}const by=()=>{},yy=typeof WebSocket<"u",xy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vy{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ay,this.params={},this.timeout=Jh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=by,this.conn=null,this.sendBuffer=[],this.serializer=new dy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let r;return o?r=o:typeof fetch>"u"?r=(...a)=>Bn(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:l})=>l(...a)):r=fetch,(...a)=>r(...a)},this.endPoint=`${e}/${Sa.websocket}`,this.httpEndpoint=Zh(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,r)=>r(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(yy){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new _y(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Bn(()=>import("./browser-70af18c2.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ly}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rn.connecting:return rn.Connecting;case Rn.open:return rn.Open;case Rn.closing:return rn.Closing;default:return rn.Closed}}isConnected(){return this.connectionState()===rn.Open}channel(e,s={config:{}}){const n=new bl(`realtime:${e}`,s,this);return this.channels.push(n),n}push(e){const{topic:s,event:n,payload:i,ref:o}=e,r=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(i=>{s&&i.updateJoinPayload({access_token:s}),i.joinedOnce&&i._isJoined()&&i._push(jt.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(cy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:i,payload:o,ref:r}=s;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${i} ${r&&"("+r+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,o,r)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(jt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([xy],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class _y{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Rn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class yl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class wy extends yl{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ma extends yl{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var ky=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const ef=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Bn(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Sy=()=>ky(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bn(()=>Promise.resolve().then(()=>Kn),void 0)).Response:Response}),Aa=t=>{if(Array.isArray(t))return t.map(s=>Aa(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Aa(n)}),e};var pn=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const qr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cy=(t,e,s)=>pn(void 0,void 0,void 0,function*(){const n=yield Sy();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new wy(qr(i),t.status||500))}).catch(i=>{e(new Ma(qr(i),i))}):e(new Ma(qr(t),t))}),My=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function to(t,e,s,n,i,o){return pn(this,void 0,void 0,function*(){return new Promise((r,a)=>{t(s,My(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>Cy(l,a,n))})})}function Qo(t,e,s,n){return pn(this,void 0,void 0,function*(){return to(t,"GET",e,s,n)})}function Is(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return to(t,"POST",e,n,i,s)})}function Ay(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return to(t,"PUT",e,n,i,s)})}function Py(t,e,s,n){return pn(this,void 0,void 0,function*(){return to(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function tf(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return to(t,"DELETE",e,n,i,s)})}var yt=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Ey={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ty{constructor(e,s={},n,i){this.url=e,this.headers=s,this.bucketId=n,this.fetch=ef(i)}uploadOrUpdate(e,s,n,i){return yt(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Uc),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},r!=null&&r.duplex?{duplex:r.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Xe(o))return{data:null,error:o};throw o}})}upload(e,s,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return yt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Uc.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const o=yield Is(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new yl("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:a},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}update(e,s,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return yt(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}copy(e,s,n){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield Is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Is(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return yt(this,void 0,void 0,function*(){try{const i=yield Is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}download(e,s){return yt(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Qo(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}info(e){return yt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Qo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Aa(n),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}exists(e){return yt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Py(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Xe(n)&&n instanceof Ma){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return yt(this,void 0,void 0,function*(){try{return{data:yield tf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}list(e,s,n){return yt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ey),s),{prefix:e||""});return{data:yield Is(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Oy="2.7.1",Dy={"X-Client-Info":`storage-js/${Oy}`};var bn=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Iy{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Dy),s),this.fetch=ef(n)}listBuckets(){return bn(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}getBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return bn(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return bn(this,void 0,void 0,function*(){try{return{data:yield Ay(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield tf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}}class Ry extends Iy{constructor(e,s={},n){super(e,s,n)}from(e){return new Ty(this.url,this.headers,e,this.fetch)}}const Ly="2.49.8";let li="";typeof Deno<"u"?li="deno":typeof document<"u"?li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?li="react-native":li="node";const Fy={"X-Client-Info":`supabase-js-${li}/${Ly}`},jy={headers:Fy},Ny={schema:"public"},Uy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},By={};var Vy=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const $y=t=>{let e;return t?e=t:typeof fetch>"u"?e=Uh:e=fetch,(...s)=>e(...s)},Hy=()=>typeof Headers>"u"?Bh:Headers,zy=(t,e,s)=>{const n=$y(s),i=Hy();return(o,r)=>Vy(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var Wy=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function qy(t){return t.endsWith("/")?t:t+"/"}function Ky(t,e){var s,n;const{db:i,auth:o,realtime:r,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Wy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const sf="2.69.1",Cn=30*1e3,Pa=3,Kr=Pa*Cn,Gy="http://localhost:9999",Yy="supabase.auth.token",Jy={"X-Client-Info":`gotrue-js/${sf}`},Ea="X-Supabase-Api-Version",nf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qy=6e5;class xl extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zy extends xl{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function ex(t){return me(t)&&t.name==="AuthApiError"}class of extends xl{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class qs extends xl{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class Ps extends qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tx(t){return me(t)&&t.name==="AuthSessionMissingError"}class Gr extends qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lo extends qs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class co extends qs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sx(t){return me(t)&&t.name==="AuthImplicitGrantRedirectError"}class Bc extends qs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ta extends qs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Yr(t){return me(t)&&t.name==="AuthRetryableFetchError"}class Vc extends qs{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class ki extends qs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hc=` 	
\r=`.split(""),nx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Hc.length;e+=1)t[Hc[e].charCodeAt(0)]=-2;for(let e=0;e<$c.length;e+=1)t[$c[e].charCodeAt(0)]=e;return t})();function rf(t,e,s){const n=nx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zc(t){const e=[],s=r=>{e.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{rx(r,n,s)};for(let r=0;r<t.length;r+=1)rf(t.charCodeAt(r),i,o);return e.join("")}function ix(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ox(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}ix(n,e)}}function rx(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ax(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)rf(t.charCodeAt(i),s,n);return new Uint8Array(e)}function lx(t){const e=[];return ox(t,s=>e.push(s)),new Uint8Array(e)}function cx(t){return Math.round(Date.now()/1e3)+t}function dx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},Si=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function ux(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const af=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Bn(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},hx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",lf=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},uo=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ho=async(t,e)=>{await t.removeItem(e)};class Mr{constructor(){this.promise=new Mr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Mr.promiseConstructor=Promise;function Jr(t){const e=t.split(".");if(e.length!==3)throw new ki("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Xy.test(e[n]))throw new ki("JWT not in base64url format");return{header:JSON.parse(zc(e[0])),payload:JSON.parse(zc(e[1])),signature:ax(e[2]),raw:{header:e[0],payload:e[1]}}}async function fx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function px(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await t(o);if(!e(o,null,r)){n(r);return}}catch(r){if(!e(o,r)){i(r);return}}})()})}function mx(t){return("0"+t.toString(16)).substr(-2)}function gx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,mx).join("")}async function bx(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function yx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await bx(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(t,e,s=!1){const n=gx();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await lf(t,`${e}-code-verifier`,i);const o=await yx(n);return[o,n===o?"plain":"s256"]}const xx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vx(t){const e=t.headers.get(Ea);if(!e||!e.match(xx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _x(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var kx=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const sn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sx=[502,503,504];async function Wc(t){var e;if(!hx(t))throw new Ta(sn(t),0);if(Sx.includes(t.status))throw new Ta(sn(t),t.status);let s;try{s=await t.json()}catch(o){throw new of(sn(o),o)}let n;const i=vx(t);if(i&&i.getTime()>=nf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Vc(sn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new Vc(sn(s),t.status,s.weak_password.reasons);throw new Zy(sn(s),t.status||500,n)}const Cx=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function be(t,e,s,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Ea]||(o[Ea]=nf["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await Mx(t,e,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Mx(t,e,s,n,i,o){const r=Cx(e,n,i,o);let a;try{a=await t(s,Object.assign({},r))}catch(l){throw console.error(l),new Ta(sn(l),0)}if(a.ok||await Wc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Wc(l)}}function Es(t){var e;let s=null;Tx(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=cx(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function qc(t){const e=Es(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ls(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ax(t){return{data:t,error:null}}function Px(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=t,r=kx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function Ex(t){return t}function Tx(t){return t.access_token&&t.refresh_token&&t.expires_in}var Ox=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class Dx{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=af(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ls})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Ox(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Px,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(me(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ls})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ex});if(u.error)throw u.error;const h=await u.json(),f=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(me(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ls})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ls})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ls})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:s,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}}const Ix={getItem:t=>Si()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Si()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Si()&&globalThis.localStorage.removeItem(t)}};function Kc(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Rx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&Si()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Lx extends cf{}async function Fx(t,e,s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Lx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Rx();const jx={url:Gy,storageKey:Yy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gc(t,e,s){return await s()}class Vi{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vi.nextInstanceID,Vi.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},jx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Dx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=af(i.fetch),this.lock=i.lock||Gc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Xt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Fx:this.lock=Gc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Si()?this.storage=Ix:(this.memoryStorage={},this.storage=Kc(this.memoryStorage)):(this.memoryStorage={},this.storage=Kc(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=ux(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),sx(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return me(s)?{error:s}:{error:new of("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Es}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,n,i;try{let o;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await yn(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Es})}else if("phone"in e){const{phone:u,password:h,options:f}=e;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Es})}else throw new lo("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:r,options:a}=e;s=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qc})}else if("phone"in e){const{phone:o,password:r,options:a}=e;s=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qc})}else throw new lo("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Gr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await uo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Es});if(await ho(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Gr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=e,a=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Es}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,o,r;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await yn(this.storage,this.storageKey));const{error:h}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new lo("You must provide either an email or phone number.")}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Es});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await yn(this.storage,this.storageKey)),await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:Ax})}catch(o){if(me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ps;const{error:i}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:r}=await be(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:r,error:a}=await be(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:a}}throw new lo("You must provide either an email or phone number and a type")}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Kr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ls}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ls})})}catch(s){if(me(s))return tx(s)&&(await this._removeSession(),await ho(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ps;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await yn(this.storage,this.storageKey));const{data:c,error:u}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:Ls});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ps;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Jr(e.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(me(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:r,error:a}=s;if(a)throw a;e=(n=r.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ps;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Xt())throw new co("No browser detected.");if(e.error||e.error_description||e.error_code)throw new co(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new co("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bc("No code detected.");const{data:k,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!r||!c)throw new co("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:g,error:y}=await this._getUser(o);if(y)throw y;const w={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:f,refresh_token:r,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,e);if(a&&!(ex(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ho(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=dx(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await yn(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,u;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Xt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await px(async i=>(i>0&&await fx(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Es})),(i,o)=>{const r=200*Math.pow(2,i);return o&&Yr(o)&&Date.now()+r-n<Cn})}catch(n){if(this._debug(s,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Xt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await uo(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Kr;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Kr}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Yr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mr;const{data:o,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!o.session)throw new Ps;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),me(o)){const r={session:null,error:o};return Yr(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lf(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ho(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Cn}ms, refresh threshold is ${Pa} ticks`),i<=Pa&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await yn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Jr(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(r=>r.kid===e);if(n||(n=this.jwks.keys.find(r=>r.kid===e),n&&this.jwks_cached_at+Qy>Date.now()))return n;const{data:i,error:o}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!i.keys||i.keys.length===0)throw new ki("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(r=>r.kid===e),!n)throw new ki("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Jr(n);if(_x(o.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:i,signature:r},error:null}}const c=wx(i.alg),u=await this.fetchJwk(i.kid,s),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,r,lx(`${a}.${l}`)))throw new ki("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}Vi.nextInstanceID=0;const Nx=Vi;class Ux extends Nx{constructor(e){super(e)}}var Bx=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Vx{constructor(e,s,n){var i,o,r;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=qy(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Ny,realtime:By,auth:Object.assign(Object.assign({},Uy),{storageKey:c}),global:jy},h=Ky(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=h.auth)!==null&&r!==void 0?r:{},this.headers,h.global.fetch),this.fetch=zy(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new oy(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new R0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ry(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Bx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ux({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $x=(t,e,s)=>new Vx(t,e,s),Hx="https://nivvbndswqkjnifvkauf.supabase.co",zx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pdnZibmRzd3Fram5pZnZrYXVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NTAzMzEsImV4cCI6MjA2MzQyNjMzMX0.UocPLAEg1htKV7ZivlqRR3GZhDDCNi1jSseGikVpYv4",T=$x(Hx,zx);function vl(t){const e=t.replace(/\D/g,"").slice(0,11),s=e.slice(0,3),n=e.slice(3,6),i=e.slice(6,9),o=e.slice(9,11);return e.length<=3?e:e.length<=6?`${s}.${e.slice(3)}`:e.length<=9?`${s}.${n}.${e.slice(6)}`:`${s}.${n}.${i}-${o}`}function df(t){const e=t.replace(/\D/g,"").slice(0,8),s=e.slice(0,5),n=e.slice(5);return e.length<=5?e:`${s}-${n}`}function Wt(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ze(t){if(!t)return"";const e=t.split("-");if(e.length!==3)return t;const[s,n,i]=e;return`${i.padStart(2,"0")}/${n.padStart(2,"0")}/${s}`}function Wx(t){const e=String(t??"").replace(/\D/g,"");return e?(parseInt(e,10)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):""}function qx(t){const e=String(t??"").replace(/\D/g,"");return e?parseInt(e,10)/100:0}const Kx={name:"Signup",components:{Navbar:qt,Footer:Kt},data(){return{name:"",email:"",password:""}},methods:{async handleSignup(){if(!this.name){alert("Informe o nome");return}if(this.email&&!Wt(this.email)){alert("E-mail inválido");return}const{data:t,error:e}=await T.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,display_name:this.name}}});alert(e?"Erro ao cadastrar: "+e.message:"Cadastro realizado! Verifique seu e-mail para ativar a conta.")}}},Gx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},Yx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Jx={class:"mt-6 text-center text-sm text-gray-500"};function Xx(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("section",Gx,[d("div",Yx,[e[10]||(e[10]=d("div",{class:"mb-8 text-center"},[d("h2",{class:"text-3xl font-extrabold text-blue-700"},"Crie sua conta"),d("p",{class:"text-gray-500"},"Comece agora a organizar seus atendimentos com praticidade")],-1)),d("form",{onSubmit:e[3]||(e[3]=Ke((...c)=>o.handleSignup&&o.handleSignup(...c),["prevent"])),class:"space-y-5"},[d("div",null,[e[4]||(e[4]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"name"},"Nome",-1)),M(d("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.name=c),type:"text",id:"name",placeholder:"Seu nome",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.name]])]),d("div",null,[e[5]||(e[5]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(d("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>i.email=c),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.email]])]),d("div",null,[e[6]||(e[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.password=c),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.password]])]),e[7]||(e[7]=d("button",{type:"submit",class:"btn w-full"},"Cadastrar",-1))],32),d("p",Jx,[e[9]||(e[9]=te(" Já tem uma conta? ")),O(a,{to:"/login",class:"text-blue-600 hover:underline"},{default:X(()=>e[8]||(e[8]=[te("Entrar")])),_:1,__:[8]})])])]),O(l)],64)}const Qx=ce(Kx,[["render",Xx]]),Zx={name:"Login",components:{Navbar:qt,Footer:Kt},data(){return{email:"",password:"",loginError:""}},methods:{async handleLogin(){if(this.loginError="",this.email&&!Wt(this.email)){this.loginError="E-mail inválido";return}const{error:t}=await T.auth.signInWithPassword({email:this.email,password:this.password});t?t.message&&t.message.toLowerCase().includes("confirm")?alert("Você precisa confirmar o e-mail antes de acessar o sistema."):this.loginError="E-mail ou senha inválidos":this.$router.push("/dashboard")},async handleGoogleLogin(){const{error:t}=await T.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/#/dashboard"}});t&&alert("Erro ao entrar com Google: "+t.message)},clearError(){this.loginError=""}}},ev={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-blue-100 px-4"},tv={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},sv={key:0,class:"text-red-600 text-center text-sm"},nv={class:"mt-6 text-center text-sm text-gray-500"};function iv(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("section",ev,[d("div",tv,[e[11]||(e[11]=d("div",{class:"mb-8 text-center"},[d("h2",{class:"text-3xl font-extrabold text-blue-700"},"Entrar"),d("p",{class:"text-gray-500"},"Acesse sua conta do Agenda Zen")],-1)),d("form",{onSubmit:e[5]||(e[5]=Ke((...c)=>o.handleLogin&&o.handleLogin(...c),["prevent"])),class:"space-y-5"},[d("div",null,[e[6]||(e[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(d("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.email=c),onInput:e[1]||(e[1]=(...c)=>o.clearError&&o.clearError(...c)),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[D,i.email]])]),d("div",null,[e[7]||(e[7]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.password=c),onInput:e[3]||(e[3]=(...c)=>o.clearError&&o.clearError(...c)),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[D,i.password]])]),i.loginError?(b(),v("p",sv,C(i.loginError),1)):L("",!0),e[8]||(e[8]=d("button",{type:"submit",class:"btn w-full"},"Entrar",-1)),d("button",{type:"button",onClick:e[4]||(e[4]=(...c)=>o.handleGoogleLogin&&o.handleGoogleLogin(...c)),class:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition duration-200"},"Entrar com Google")],32),d("p",nv,[e[10]||(e[10]=te(" Ainda não tem conta? ")),O(a,{to:"/cadastro",class:"text-blue-600 hover:underline"},{default:X(()=>e[9]||(e[9]=[te("Criar agora")])),_:1,__:[9]})])])]),O(l)],64)}const ov=ce(Zx,[["render",iv]]);function Yn(t){const e=String(t??"").replace(/\D/g,"").slice(0,11),s=e.slice(0,2);if(e.length<=2)return e?`(${s}`:"";if(e.length<=6){const o=e.slice(2);return`(${s}) ${o}`}if(e.length<=10){const o=e.slice(2,6),r=e.slice(6);return`(${s}) ${o}${r?`-${r}`:""}`}const n=e.slice(2,7),i=e.slice(7);return`(${s}) ${n}-${i}`}function Zo(t){return String(t??"").replace(/\D/g,"")}const rv={name:"Onboarding",data(){return{userId:null,step:1,form:{businessName:"",phone:"",email:""},agenda:{dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},serviceForm:{name:"",duration:"",price:""},services:[],daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:Yn,generateSlug(t){return t?t.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):""},async next(){this.step===1?(await this.saveProfile(),this.step++):this.step===2?(await this.saveAgenda(),this.step++):this.step===3&&(await this.saveServices(),await this.markOnboardingComplete(),this.step++)},prev(){this.step>1&&this.step--},async saveProfile(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail inválido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.generateSlug(this.form.businessName),phone:this.form.phone,email:this.form.email};await T.from("profiles").upsert(t,{onConflict:["id"]})},async saveAgenda(){const t={start:null,end:null,days:[]};for(const[s,n]of Object.entries(this.agenda.dailySchedule))n.enabled&&n.start&&n.end&&(t.days.push(s),(!t.start||n.start<t.start)&&(t.start=n.start),(!t.end||n.end>t.end)&&(t.end=n.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule};await T.from("profiles").upsert(e,{onConflict:["id"]})},async saveServices(){for(const t of this.services)await T.from("services").insert({name:t.name,duration:t.duration,price:parseFloat(t.price),user_id:this.userId,active:!0})},addService(){this.serviceForm.name&&(this.services.push({name:this.serviceForm.name,duration:this.serviceForm.duration,price:this.serviceForm.price}),this.serviceForm={name:"",duration:"",price:""})},removeService(t){this.services.splice(t,1)},async markOnboardingComplete(){await T.from("profiles").upsert({id:this.userId,onboarding_complete:!0},{onConflict:["id"]})},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id}},av={class:"min-h-screen flex bg-gray-100 items-center justify-center p-4"},lv={class:"bg-white p-6 rounded-lg shadow w-full max-w-2xl"},cv={key:0,class:"space-y-4"},dv={key:1,class:"space-y-4"},uv={class:"mt-1 space-y-2"},hv=["onUpdate:modelValue"],fv={class:"w-20"},pv=["onUpdate:modelValue"],mv=["onUpdate:modelValue"],gv={key:2,class:"space-y-4"},bv={class:"flex justify-end"},yv={class:"mt-4 space-y-1"},xv=["onClick"],vv={key:3,class:"space-y-4 text-center"},_v={key:4,class:"flex justify-between mt-6"},wv={key:5,class:"flex justify-center mt-6"};function kv(t,e,s,n,i,o){return b(),v("div",av,[d("div",lv,[i.step===1?(b(),v("div",cv,[e[14]||(e[14]=d("h2",{class:"text-xl font-semibold mb-4"},"Bem-vindo! Vamos começar pelo seu perfil.",-1)),d("div",null,[e[11]||(e[11]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>i.form.businessName=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.businessName]])]),d("div",null,[e[12]||(e[12]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>i.form.phone=r),onInput:e[2]||(e[2]=r=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.phone]])]),d("div",null,[e[13]||(e[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=r=>i.form.email=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.email]])])])):i.step===2?(b(),v("div",dv,[e[17]||(e[17]=d("h2",{class:"text-xl font-semibold mb-4"},"Horários de atendimento",-1)),d("div",null,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),d("div",uv,[(b(!0),v(q,null,ne(i.daysOfWeekOptions,r=>(b(),v("div",{key:r.value,class:"flex items-center space-x-2"},[M(d("input",{type:"checkbox","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].enabled=a},null,8,hv),[[hl,i.agenda.dailySchedule[r.value].enabled]]),d("span",fv,C(r.label),1),M(d("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].start=a,class:"border rounded-md px-2 py-1"},null,8,pv),[[D,i.agenda.dailySchedule[r.value].start]]),e[15]||(e[15]=d("span",null,"-",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].end=a,class:"border rounded-md px-2 py-1"},null,8,mv),[[D,i.agenda.dailySchedule[r.value].end]])]))),128))])])])):i.step===3?(b(),v("div",gv,[e[21]||(e[21]=d("h2",{class:"text-xl font-semibold mb-4"},"Cadastre seus serviços",-1)),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>i.serviceForm.name=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.serviceForm.name]])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=r=>i.serviceForm.duration=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.serviceForm.duration]])]),d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),M(d("input",{type:"number",step:"0.01","onUpdate:modelValue":e[6]||(e[6]=r=>i.serviceForm.price=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.serviceForm.price]])]),d("div",bv,[d("button",{onClick:e[7]||(e[7]=(...r)=>o.addService&&o.addService(...r)),class:"btn"},"Adicionar")]),d("ul",yv,[(b(!0),v(q,null,ne(i.services,(r,a)=>(b(),v("li",{key:a,class:"flex justify-between"},[d("span",null,C(r.name)+" - "+C(r.duration)+" minutos - "+C(o.formatPrice(r.price)),1),d("button",{onClick:l=>o.removeService(a),class:"text-red-600 hover:underline"},"Remover",8,xv)]))),128))])])):i.step===4?(b(),v("div",vv,e[22]||(e[22]=[d("h2",{class:"text-2xl font-semibold"},"Pronto!",-1),d("p",null,"Seu cadastro inicial está concluído.",-1),d("p",{class:"text-lg"},"Bem-vindo ao Agenda Zen!",-1)]))):L("",!0),i.step<4?(b(),v("div",_v,[i.step>1?(b(),v("button",{key:0,onClick:e[8]||(e[8]=(...r)=>o.prev&&o.prev(...r)),class:"px-4 py-2 border rounded"},"Voltar")):L("",!0),d("button",{onClick:e[9]||(e[9]=(...r)=>o.next&&o.next(...r)),class:"btn ml-auto"},C(i.step===3?"Finalizar":"Próximo"),1)])):(b(),v("div",wv,[d("button",{onClick:e[10]||(e[10]=r=>t.$router.push("/dashboard")),class:"btn"},"Ir para o Dashboard")]))])])}const Sv=ce(rv,[["render",kv]]),Cv={name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}}},Mv={class:"space-y-6 mt-8"},Av={class:"space-y-2"},Pv={class:"space-y-2"},Ev={class:"space-y-2"},Tv={class:"space-y-2"},Ov={class:"space-y-2"};function Dv(t,e,s,n,i,o){const r=V("router-link");return b(),v("div",null,[s.isOpen?(b(),v("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:e[0]||(e[0]=a=>t.$emit("close"))})):L("",!0),d("aside",{class:Ve(["fixed inset-y-0 left-0 transform bg-white shadow-md transition-all duration-200 z-50 md:relative overflow-hidden flex flex-col min-h-screen",s.isOpen?"w-64 p-6 translate-x-0":"w-0 p-0 -translate-x-full"])},[d("button",{class:"absolute top-4 right-4 text-gray-600 focus:outline-none",onClick:e[1]||(e[1]=a=>t.$emit("close"))},e[2]||(e[2]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[22]||(e[22]=d("h2",{class:"text-2xl font-bold text-blue-600 mb-6"},"Agenda Zen",-1)),d("nav",Mv,[d("div",Av,[e[5]||(e[5]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Agendamentos",-1)),O(r,{to:"/dashboard",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[3]||(e[3]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3m10-11v10a1 1 0 01-1 1h-3m-6 0h6"})],-1),d("span",null,"Início",-1)])),_:1,__:[3]}),O(r,{to:"/agendamentos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[4]||(e[4]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),d("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),d("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),d("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),d("span",null,"Agendamentos",-1)])),_:1,__:[4]})]),d("div",Pv,[e[9]||(e[9]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Cadastros",-1)),O(r,{to:"/clientes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[6]||(e[6]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"7",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Clientes",-1)])),_:1,__:[6]}),O(r,{to:"/servicos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[7]||(e[7]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V5a4 4 0 018 0v2"})],-1),d("span",null,"Serviços",-1)])),_:1,__:[7]}),O(r,{to:"/salas",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[8]||(e[8]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v18M15 3v18M3 9h18M3 15h18"})],-1),d("span",null,"Salas",-1)])),_:1,__:[8]})]),d("div",Ev,[e[13]||(e[13]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Centro Financeiro",-1)),O(r,{to:"/despesas",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[10]||(e[10]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})],-1),d("span",null,"Despesas",-1)])),_:1,__:[10]}),O(r,{to:"/comprovantes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[11]||(e[11]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1),d("span",null,"Comprovantes",-1)])),_:1,__:[11]}),O(r,{to:"/templates",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[12]||(e[12]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h16v4H4V4zm0 6h16v10H4V10z"})],-1),d("span",null,"Templates",-1)])),_:1,__:[12]})]),d("div",Tv,[e[17]||(e[17]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Relatórios",-1)),O(r,{to:"/relatorio-agendamentos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[14]||(e[14]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),d("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),d("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),d("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),d("span",null,"Agendamentos",-1)])),_:1,__:[14]}),O(r,{to:"/recebimento",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[15]||(e[15]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})],-1),d("span",null,"Recebimento",-1)])),_:1,__:[15]}),O(r,{to:"/faturamento",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[16]||(e[16]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3v18h18M9 17v-4M13 17v-8M17 17V7"})],-1),d("span",null,"Faturamento",-1)])),_:1,__:[16]})]),d("div",Ov,[e[21]||(e[21]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Conta",-1)),O(r,{to:"/configuracao",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[18]||(e[18]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Perfil",-1)])),_:1,__:[18]}),O(r,{to:"/usuarios",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[19]||(e[19]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Usuários",-1)])),_:1,__:[19]}),O(r,{to:"/minha-assinatura",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:X(()=>e[20]||(e[20]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",ry:"2","stroke-width":"2"}),d("line",{x1:"3",y1:"9",x2:"21",y2:"9","stroke-width":"2"})],-1),d("span",null,"Minha Assinatura",-1)])),_:1,__:[20]})])])],2)])}const nt=ce(Cv,[["render",Dv]]),Iv={name:"HeaderUser",props:{title:{type:String,default:"Agenda Zen"}},data(){return{userName:null,showMenu:!1}},async mounted(){var e,s;const{data:{user:t}}=await T.auth.getUser();if(!t)this.$router.push("/login");else{const n=((e=t.user_metadata)==null?void 0:e.display_name)||((s=t.user_metadata)==null?void 0:s.name);this.userName=n&&n.trim()!==""?n:t.email}},methods:{toggleMenu(){this.showMenu=!this.showMenu},async handleLogout(){this.showMenu=!1,await T.auth.signOut(),this.$router.push("/")}}},Rv={class:"flex justify-between items-center mb-8"},Lv={class:"text-2xl font-semibold text-gray-800"},Fv={key:0,class:"relative"},jv={class:"text-gray-600"},Nv={key:0,class:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md"};function Uv(t,e,s,n,i,o){const r=V("router-link");return b(),v("header",Rv,[d("h1",Lv,C(s.title),1),i.userName?(b(),v("div",Fv,[d("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"flex items-center space-x-2 focus:outline-none"},[e[3]||(e[3]=d("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1)),d("span",jv,C(i.userName),1),(b(),v("svg",{class:Ve(["w-4 h-4 text-gray-600 transition-transform",{"rotate-180":i.showMenu}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[2]||(e[2]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),i.showMenu?(b(),v("div",Nv,[O(r,{to:"/",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[4]||(e[4]=[te("Início")])),_:1,__:[4]}),O(r,{to:"/configuracao",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[5]||(e[5]=[te("Perfil")])),_:1,__:[5]}),O(r,{to:"/usuarios",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[6]||(e[6]=[te("Usuários")])),_:1,__:[6]}),O(r,{to:"/minha-assinatura",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[7]||(e[7]=[te("Assinatura")])),_:1,__:[7]}),d("button",{onClick:e[1]||(e[1]=(...a)=>o.handleLogout&&o.handleLogout(...a)),class:"w-full text-left px-4 py-2 hover:bg-gray-100"},"Sair")])):L("",!0)])):L("",!0)])}const it=ce(Iv,[["render",Uv]]),Bv={name:"Modal"},Vv={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg md:max-w-4xl max-h-[90vh] overflow-y-auto"};function $v(t,e,s,n,i,o){return b(),v("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[0]||(e[0]=Ke(r=>t.$emit("close"),["self"]))},[d("div",Vv,[eh(t.$slots,"default")])])}const os=ce(Bv,[["render",$v]]);function uf(){return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function hf(t,e){if(!t||!e)return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}));const s=`${t}T${e}`;return new Date(new Date(s).toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function gt(t,e=1){if(!t)return"";const[s,n]=t.split(":").map(Number),i=new Date;i.setHours(s),i.setMinutes(n),i.setSeconds(0),i.setMinutes(i.getMinutes()+e*60);const o=String(i.getHours()).padStart(2,"0"),r=String(i.getMinutes()).padStart(2,"0");return`${o}:${r}`}function ff(t,e=1){if(!t)return"";const[s,n,i]=t.split("-").map(Number),o=new Date(s,n-1,i);o.setDate(o.getDate()+e);const r=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${r}-${a}-${l}`}function Yc(t,e=1){if(!t)return"";const[s,n,i]=t.split("-").map(Number),o=new Date(s,n-1,i);o.setMonth(o.getMonth()+e);const r=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${r}-${a}-${l}`}const Hv={name:"WeekView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0},startHour:{type:Number,default:6},endHour:{type:Number,default:23}},data(){const t=uf(),e=t.getDay()===0?7:t.getDay(),s=new Date(t);s.setDate(t.getDate()-e+1);const n=new Date(s);return n.setDate(s.getDate()+6),{weekStart:s,weekEnd:n,dayLabels:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],minuteHeight:1}},computed:{computedStartHour(){return this.startHour},computedEndHour(){return this.endHour},totalHours(){return Math.max(0,this.computedEndHour-this.computedStartHour+1)},events(){const t=this.weekStart.toISOString().split("T")[0],e=this.weekEnd.toISOString().split("T")[0],s=this.appointments.filter(o=>o.date>=t&&o.date<=e).map(o=>{const r=gt(o.time),[a,l]=r.split(":"),c=hf(o.date,r),u=new Date(c.getTime()+Number(o.duration||0)*6e4),h=c.getDay()===0?7:c.getDay();return{id:o.id,title:this.getClientName(o.client_id),startTime:`${a}:${l}`,endTime:`${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`,day:h,appointment:o,lane:0,totalLanes:1}}),n={},i=o=>{const[r,a]=o.split(":").map(Number);return r*60+a};return s.forEach(o=>{n[o.day]||(n[o.day]=[]),n[o.day].push(o)}),Object.values(n).forEach(o=>{o.sort((a,l)=>i(a.startTime)-i(l.startTime));let r=[];o.forEach(a=>{r=r.filter(u=>i(u.endTime)>i(a.startTime));let l=0;for(;r.some(u=>u.lane===l);)l++;a.lane=l,r.push(a);const c=Math.max(...r.map(u=>u.lane))+1;r.forEach(u=>{u.totalLanes=Math.max(u.totalLanes,c)})})}),s}},methods:{updateMinuteHeight(){if(this.$refs.grid){const e=window.getComputedStyle(this.$refs.grid).gridTemplateRows.split(" ")[0],s=parseFloat(e);!isNaN(s)&&s>0&&(this.minuteHeight=s/60)}},getStatusClass(t){return t.from_site&&!t.confirmed?"bg-red-500":t.status==="completed"?"bg-green-500":t.status==="no_show"?"bg-gray-400":"bg-blue-500"},getStatusTitle(t){return t.from_site&&!t.confirmed?"pendente confirmação de pagamento":t.status==="completed"?"atendimento finalizado":t.status==="no_show"?"cliente faltou":""},getEventStyle(t){const e=parseInt(t.startTime.split(":")[0]),s=parseInt(t.startTime.split(":")[1]),n=parseInt(t.endTime.split(":")[0]),i=parseInt(t.endTime.split(":")[1]),o=e*60+s,r=n*60+i,a=this.computedStartHour*60,l=this.minuteHeight,c=(o-a)*l+60,u=(r-o)*l,h="(100% - 64px) / 7",f=`calc((${h}) / ${t.totalLanes})`;return{top:`${c}px`,height:`${u}px`,left:`calc(64px + (${h}) * ${t.day-1} + ${f} * ${t.lane})`,width:`calc(${f} - 4px)`}},formatDate(t){return t instanceof Date?ze(t.toISOString().split("T")[0]):t},prevWeek(){const t=new Date(this.weekStart);t.setDate(t.getDate()-7);const e=new Date(this.weekEnd);e.setDate(e.getDate()-7),this.weekStart=t,this.weekEnd=e},nextWeek(){const t=new Date(this.weekStart);t.setDate(t.getDate()+7);const e=new Date(this.weekEnd);e.setDate(e.getDate()+7),this.weekStart=t,this.weekEnd=e}},watch:{computedStartHour(){this.$nextTick(this.updateMinuteHeight)},computedEndHour(){this.$nextTick(this.updateMinuteHeight)}},mounted(){this.updateMinuteHeight()}},zv={class:"bg-white rounded-lg shadow overflow-hidden"},Wv={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},qv={class:"font-semibold"},Kv={class:"relative overflow-x-auto"},Gv={class:"flex justify-center items-start border bg-gray-50"},Yv=["title","onClick"];function Jv(t,e,s,n,i,o){return b(),v("div",zv,[d("div",Wv,[d("button",{onClick:e[0]||(e[0]=(...r)=>o.prevWeek&&o.prevWeek(...r)),class:"p-1 rounded hover:bg-gray-200"},e[2]||(e[2]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("div",qv,C(o.formatDate(i.weekStart))+" - "+C(o.formatDate(i.weekEnd)),1),d("button",{onClick:e[1]||(e[1]=(...r)=>o.nextWeek&&o.nextWeek(...r)),class:"p-1 rounded hover:bg-gray-200"},e[3]||(e[3]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),d("div",Kv,[d("div",{ref:"grid",class:"grid gap-px text-sm bg-gray-100 relative",style:Oi({gridTemplateColumns:"64px repeat(7, 1fr)",gridTemplateRows:`repeat(${o.totalHours}, 60px)`})},[e[4]||(e[4]=d("div",{class:"bg-gray-50"},null,-1)),(b(!0),v(q,null,ne(i.dayLabels,(r,a)=>(b(),v("div",{key:"day-"+a,class:"font-semibold text-center border px-1 bg-gray-50"},C(r),1))),128)),(b(!0),v(q,null,ne(o.totalHours,r=>(b(),v(q,{key:"line-"+r},[d("div",Gv,C((o.computedStartHour+r-1).toString().padStart(2,"0"))+":00 ",1),(b(),v(q,null,ne(7,a=>d("div",{key:"cell-"+a+"-"+r,class:"relative bg-white border"})),64))],64))),128)),(b(!0),v(q,null,ne(o.events,r=>(b(),v("div",{key:r.id,class:Ve(["absolute text-white rounded px-2 py-1 event cursor-pointer",o.getStatusClass(r.appointment)]),style:Oi(o.getEventStyle(r)),title:o.getStatusTitle(r.appointment),onClick:a=>t.$emit("select",r.appointment)},C(r.title)+" - "+C(r.startTime),15,Yv))),128))],4)])])}const pf=ce(Hv,[["render",Jv],["__scopeId","data-v-19089637"]]),Xv={name:"AppointmentDetails",props:{appointment:{type:Object,required:!0},getClientName:{type:Function,required:!0},getServiceName:{type:Function,required:!0},getRoomName:{type:Function,default:()=>""},getRoomLink:{type:Function,default:()=>""}},methods:{addHoursToTime:gt,formatDateBR:ze}},Qv={class:"relative"},Zv={key:0,class:"space-y-1 border rounded-md p-4 bg-gray-50 text-gray-700"},e_={key:0},t_={key:1},s_=["href"];function n_(t,e,s,n,i,o){return b(),v("div",Qv,[d("button",{onClick:e[0]||(e[0]=r=>t.$emit("close")),class:"absolute top-0 right-0 m-2 px-2 py-1 rounded border text-sm"}," Fechar "),e[8]||(e[8]=d("h3",{class:"text-lg font-semibold mb-4"},"Detalhes do Agendamento",-1)),s.appointment?(b(),v("div",Zv,[d("p",null,[e[1]||(e[1]=d("strong",null,"Data:",-1)),te(" "+C(o.formatDateBR(s.appointment.date)),1)]),d("p",null,[e[2]||(e[2]=d("strong",null,"Hora:",-1)),te(" "+C(o.addHoursToTime(s.appointment.time)),1)]),d("p",null,[e[3]||(e[3]=d("strong",null,"Cliente:",-1)),te(" "+C(s.getClientName(s.appointment.client_id)),1)]),d("p",null,[e[4]||(e[4]=d("strong",null,"Serviço:",-1)),te(" "+C(s.getServiceName(s.appointment.service_id)),1)]),d("p",null,[e[5]||(e[5]=d("strong",null,"Duração:",-1)),te(" "+C(s.appointment.duration)+" minutos",1)]),d("p",null,[e[6]||(e[6]=d("strong",null,"Descrição:",-1)),te(" "+C(s.appointment.description),1)]),s.appointment.room_id?(b(),v("p",e_,[e[7]||(e[7]=d("strong",null,"Sala:",-1)),te(" "+C(s.getRoomName(s.appointment.room_id)),1)])):L("",!0),s.appointment.room_id&&s.getRoomLink(s.appointment.room_id)?(b(),v("p",t_,[d("a",{href:s.getRoomLink(s.appointment.room_id),target:"_blank",class:"text-blue-600 underline"},"Acessar Google Meet",8,s_)])):L("",!0)])):L("",!0),eh(t.$slots,"actions")])}const mf=ce(Xv,[["render",n_]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function so(t){return t+.5|0}const Fs=(t,e,s)=>Math.max(Math.min(t,s),e);function ci(t){return Fs(so(t*2.55),0,255)}function Vs(t){return Fs(so(t*255),0,255)}function ps(t){return Fs(so(t/2.55)/100,0,1)}function Jc(t){return Fs(so(t*100),0,100)}const Dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Oa=[..."0123456789ABCDEF"],i_=t=>Oa[t&15],o_=t=>Oa[(t&240)>>4]+Oa[t&15],fo=t=>(t&240)>>4===(t&15),r_=t=>fo(t.r)&&fo(t.g)&&fo(t.b)&&fo(t.a);function a_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Dt[t[1]]*17,g:255&Dt[t[2]]*17,b:255&Dt[t[3]]*17,a:e===5?Dt[t[4]]*17:255}:(e===7||e===9)&&(s={r:Dt[t[1]]<<4|Dt[t[2]],g:Dt[t[3]]<<4|Dt[t[4]],b:Dt[t[5]]<<4|Dt[t[6]],a:e===9?Dt[t[7]]<<4|Dt[t[8]]:255})),s}const l_=(t,e)=>t<255?e(t):"";function c_(t){var e=r_(t)?i_:o_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+l_(t.a,e):void 0}const d_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gf(t,e,s){const n=e*Math.min(s,1-s),i=(o,r=(o+t/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function u_(t,e,s){const n=(i,o=(i+t/60)%6)=>s-s*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function h_(t,e,s){const n=gf(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function f_(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function _l(t){const s=t.r/255,n=t.g/255,i=t.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=f_(s,n,i,u,o),l=l*60+.5),[l|0,c||0,a]}function wl(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Vs)}function kl(t,e,s){return wl(gf,t,e,s)}function p_(t,e,s){return wl(h_,t,e,s)}function m_(t,e,s){return wl(u_,t,e,s)}function bf(t){return(t%360+360)%360}function g_(t){const e=d_.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ci(+e[5]):Vs(+e[5]));const i=bf(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=p_(i,o,r):e[1]==="hsv"?n=m_(i,o,r):n=kl(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function b_(t,e){var s=_l(t);s[0]=bf(s[0]+e),s=kl(s),t.r=s[0],t.g=s[1],t.b=s[2]}function y_(t){if(!t)return;const e=_l(t),s=e[0],n=Jc(e[1]),i=Jc(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${ps(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Xc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Qc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function x_(){const t={},e=Object.keys(Qc),s=Object.keys(Xc);let n,i,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,Xc[o]);o=parseInt(Qc[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let po;function v_(t){po||(po=x_(),po.transparent=[0,0,0,0]);const e=po[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const __=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function w_(t){const e=__.exec(t);let s=255,n,i,o;if(e){if(e[7]!==n){const r=+e[7];s=e[8]?ci(r):Fs(r*255,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?ci(n):Fs(n,0,255)),i=255&(e[4]?ci(i):Fs(i,0,255)),o=255&(e[6]?ci(o):Fs(o,0,255)),{r:n,g:i,b:o,a:s}}}function k_(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ps(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Xr=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,vn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function S_(t,e,s){const n=vn(ps(t.r)),i=vn(ps(t.g)),o=vn(ps(t.b));return{r:Vs(Xr(n+s*(vn(ps(e.r))-n))),g:Vs(Xr(i+s*(vn(ps(e.g))-i))),b:Vs(Xr(o+s*(vn(ps(e.b))-o))),a:t.a+s*(e.a-t.a)}}function mo(t,e,s){if(t){let n=_l(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=kl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function yf(t,e){return t&&Object.assign(e||{},t)}function Zc(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Vs(t[3]))):(e=yf(t,{r:0,g:0,b:0,a:1}),e.a=Vs(e.a)),e}function C_(t){return t.charAt(0)==="r"?w_(t):g_(t)}class $i{constructor(e){if(e instanceof $i)return e;const s=typeof e;let n;s==="object"?n=Zc(e):s==="string"&&(n=a_(e)||v_(e)||C_(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=yf(this._rgb);return e&&(e.a=ps(e.a)),e}set rgb(e){this._rgb=Zc(e)}rgbString(){return this._valid?k_(this._rgb):void 0}hexString(){return this._valid?c_(this._rgb):void 0}hslString(){return this._valid?y_(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=S_(this._rgb,e._rgb,s)),this}clone(){return new $i(this.rgb)}alpha(e){return this._rgb.a=Vs(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=so(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mo(this._rgb,2,e),this}darken(e){return mo(this._rgb,2,-e),this}saturate(e){return mo(this._rgb,1,e),this}desaturate(e){return mo(this._rgb,1,-e),this}rotate(e){return b_(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const M_=(()=>{let t=0;return()=>t++})();function ge(t){return t==null}function Fe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function $e(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Pt(t,e){return $e(t)?t:e}function pe(t,e){return typeof t>"u"?e:t}const A_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Re(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Ae(t,e,s,n){let i,o,r;if(Fe(t))if(o=t.length,n)for(i=o-1;i>=0;i--)e.call(s,t[i],i);else for(i=0;i<o;i++)e.call(s,t[i],i);else if(ye(t))for(r=Object.keys(t),o=r.length,i=0;i<o;i++)e.call(s,t[r[i]],r[i])}function er(t,e){let s,n,i,o;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],o=e[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function tr(t){if(Fe(t))return t.map(tr);if(ye(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=tr(t[s[i]]);return e}return t}function vf(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function P_(t,e,s,n){if(!vf(t))return;const i=e[t],o=s[t];ye(i)&&ye(o)?Hi(i,o,n):e[t]=tr(o)}function Hi(t,e,s){const n=Fe(e)?e:[e],i=n.length;if(!ye(t))return t;s=s||{};const o=s.merger||P_;let r;for(let a=0;a<i;++a){if(r=n[a],!ye(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],t,r,s)}return t}function Ci(t,e){return Hi(t,e,{merger:E_})}function E_(t,e,s){if(!vf(t))return;const n=e[t],i=s[t];ye(n)&&ye(i)?Ci(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=tr(i))}const ed={"":t=>t,x:t=>t.x,y:t=>t.y};function T_(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function O_(t){const e=T_(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function zs(t,e){return(ed[e]||(ed[e]=O_(e)))(t)}function Sl(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zi=t=>typeof t<"u",Ws=t=>typeof t=="function",td=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function D_(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ne=Math.PI,je=2*Ne,I_=je+Ne,sr=Number.POSITIVE_INFINITY,R_=Ne/180,We=Ne/2,Xs=Ne/4,sd=Ne*2/3,js=Math.log10,ns=Math.sign;function Mi(t,e,s){return Math.abs(t-e)<s}function nd(t){const e=Math.round(t);t=Mi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(js(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function L_(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,o)=>i-o).pop(),e}function F_(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function $n(t){return!F_(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function j_(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function _f(t,e,s){let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n][s],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ut(t){return t*(Ne/180)}function Cl(t){return t*(180/Ne)}function id(t){if(!$e(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function wf(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*Ne&&(o+=je),{angle:o,distance:i}}function Da(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function N_(t,e){return(t-e+I_)%je-Ne}function Et(t){return(t%je+je)%je}function Wi(t,e,s,n){const i=Et(t),o=Et(e),r=Et(s),a=Et(o-i),l=Et(r-i),c=Et(i-o),u=Et(i-r);return i===o||i===r||n&&o===r||a>l&&c<u}function Qe(t,e,s){return Math.max(e,Math.min(s,t))}function U_(t){return Qe(t,-32768,32767)}function bs(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Ml(t,e,s){s=s||(r=>t[r]<e);let n=t.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const ys=(t,e,s,n)=>Ml(t,s,n?i=>{const o=t[i][e];return o<s||o===s&&t[i+1][e]===s}:i=>t[i][e]<s),B_=(t,e,s)=>Ml(t,s,n=>t[n][e]>=s);function V_(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const kf=["push","pop","shift","splice","unshift"];function $_(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),kf.forEach(s=>{const n="_onData"+Sl(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function od(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(kf.forEach(o=>{delete t[o]}),delete t._chartjs)}function Sf(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Cf=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Mf(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,Cf.call(window,()=>{n=!1,t.apply(e,s)}))}}function H_(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Al=t=>t==="start"?"left":t==="end"?"right":"center",rt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,z_=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function Af(t,e,s){const n=e.length;let i=0,o=n;if(t._sorted){const{iScale:r,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=r.axis,{min:h,max:f,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(i=Math.min(ys(l,u,h).lo,s?n:ys(e,u,r.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(y=>!ge(y[a.axis]));i-=Math.max(0,g)}i=Qe(i,0,n-1)}if(m){let g=Math.max(ys(l,r.axis,f,!0).hi+1,s?0:ys(e,u,r.getPixelForValue(f),!0).hi+1);if(c){const y=l.slice(g-1).findIndex(w=>!ge(w[a.axis]));g+=Math.max(0,y)}o=Qe(g,i,n)-i}else o=n-i}return{start:i,count:o}}function Pf(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const go=t=>t===0||t===1,rd=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*je/s)),ad=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*je/s)+1,Ai={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*We)+1,easeOutSine:t=>Math.sin(t*We),easeInOutSine:t=>-.5*(Math.cos(Ne*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>go(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>go(t)?t:rd(t,.075,.3),easeOutElastic:t=>go(t)?t:ad(t,.075,.3),easeInOutElastic(t){return go(t)?t:t<.5?.5*rd(t*2,.1125,.45):.5+.5*ad(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ai.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ai.easeInBounce(t*2)*.5:Ai.easeOutBounce(t*2-1)*.5+.5};function Pl(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ld(t){return Pl(t)?t:new $i(t)}function Qr(t){return Pl(t)?t:new $i(t).saturate(.5).darken(.1).hexString()}const W_=["x","y","borderWidth","radius","tension"],q_=["color","borderColor","backgroundColor"];function K_(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:q_},numbers:{type:"number",properties:W_}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function G_(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const cd=new Map;function Y_(t,e){e=e||{};const s=t+JSON.stringify(e);let n=cd.get(s);return n||(n=new Intl.NumberFormat(t,e),cd.set(s,n)),n}function no(t,e,s){return Y_(e,s).format(t)}const Ef={values(t){return Fe(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,o=t;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=J_(t,s)}const r=js(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),no(t,n,l)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(js(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?Ef.numeric.call(this,t,e,s):""}};function J_(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Ar={formatters:Ef};function X_(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ar.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const un=Object.create(null),Ia=Object.create(null);function Pi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];t=t[o]||(t[o]=Object.create(null))}return t}function Zr(t,e,s){return typeof e=="string"?Hi(Pi(t,e),s):Hi(Pi(t,""),e)}class Q_{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Qr(i.backgroundColor),this.hoverBorderColor=(n,i)=>Qr(i.borderColor),this.hoverColor=(n,i)=>Qr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Zr(this,e,s)}get(e){return Pi(this,e)}describe(e,s){return Zr(Ia,e,s)}override(e,s){return Zr(un,e,s)}route(e,s,n,i){const o=Pi(this,e),r=Pi(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return ye(l)?Object.assign({},c,l):pe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(s=>s(this))}}var Be=new Q_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[K_,G_,X_]);function Z_(t){return!t||ge(t.size)||ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function nr(t,e,s,n,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,s.push(i)),o>n&&(n=o),n}function e1(t,e,s,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=s.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=s[l],h!=null&&!Fe(h))r=nr(t,i,o,r,h);else if(Fe(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!Fe(f)&&(r=nr(t,i,o,r,f));t.restore();const p=o.length/2;if(p>s.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return r}function Qs(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function dd(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ra(t,e,s,n){Tf(t,e,s,n,null)}function Tf(t,e,s,n,i){let o,r,a,l,c,u,h,f;const p=e.pointStyle,m=e.rotation,g=e.radius;let y=(m||0)*R_;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:i?t.ellipse(s,n,i/2,g,0,0,je):t.arc(s,n,g,0,je),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(s+Math.sin(y)*u,n-Math.cos(y)*g),y+=sd,t.lineTo(s+Math.sin(y)*u,n-Math.cos(y)*g),y+=sd,t.lineTo(s+Math.sin(y)*u,n-Math.cos(y)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(y+Xs)*l,h=Math.cos(y+Xs)*(i?i/2-c:l),a=Math.sin(y+Xs)*l,f=Math.sin(y+Xs)*(i?i/2-c:l),t.arc(s-h,n-a,c,y-Ne,y-We),t.arc(s+f,n-r,c,y-We,y),t.arc(s+h,n+a,c,y,y+We),t.arc(s-f,n+r,c,y+We,y+Ne),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(s-u,n-l,2*u,2*l);break}y+=Xs;case"rectRot":h=Math.cos(y)*(i?i/2:g),r=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+f,n-r),t.lineTo(s+h,n+a),t.lineTo(s-f,n+r),t.closePath();break;case"crossRot":y+=Xs;case"cross":h=Math.cos(y)*(i?i/2:g),r=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r);break;case"star":h=Math.cos(y)*(i?i/2:g),r=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r),y+=Xs,h=Math.cos(y)*(i?i/2:g),r=Math.cos(y)*g,a=Math.sin(y)*g,f=Math.sin(y)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r);break;case"line":r=i?i/2:Math.cos(y)*g,a=Math.sin(y)*g,t.moveTo(s-r,n-a),t.lineTo(s+r,n+a);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(y)*(i?i/2:g),n+Math.sin(y)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xs(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Pr(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Er(t){t.restore()}function t1(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const o=(e.x+s.x)/2;t.lineTo(o,e.y),t.lineTo(o,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function s1(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function n1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function i1(t,e,s,n,i){if(i.strikethrough||i.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function o1(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function hn(t,e,s,n,i,o={}){const r=Fe(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,n1(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&o1(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ge(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,s,n,o.maxWidth)),t.fillText(c,s,n,o.maxWidth),i1(t,s,n,c,o),n+=Number(i.lineHeight);t.restore()}function qi(t,e){const{x:s,y:n,w:i,h:o,radius:r}=e;t.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*Ne,Ne,!0),t.lineTo(s,n+o-r.bottomLeft),t.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,Ne,We,!0),t.lineTo(s+i-r.bottomRight,n+o),t.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,We,0,!0),t.lineTo(s+i,n+r.topRight),t.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-We,!0),t.lineTo(s+r.topLeft,n)}const r1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,a1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function l1(t,e){const s=(""+t).match(r1);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const c1=t=>+t||0;function El(t,e){const s={},n=ye(e),i=n?Object.keys(e):e,o=ye(t)?n?r=>pe(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of i)s[r]=c1(o(r));return s}function Of(t){return El(t,{top:"y",right:"x",bottom:"y",left:"x"})}function cn(t){return El(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ut(t){const e=Of(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Je(t,e){t=t||{},e=e||Be.font;let s=pe(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=pe(t.style,e.style);n&&!(""+n).match(a1)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:pe(t.family,e.family),lineHeight:l1(pe(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:pe(t.weight,e.weight),string:""};return i.string=Z_(i),i}function di(t,e,s,n){let i=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),s!==void 0&&Fe(a)&&(a=a[s%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function d1(t,e,s){const{min:n,max:i}=t,o=xf(e,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function Ks(t,e){return Object.assign(Object.create(t),e)}function Tl(t,e=[""],s,n,i=()=>t[0]){const o=s||t;typeof n>"u"&&(n=Lf("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>Tl([a,...t],e,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return If(a,l,()=>y1(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return hd(a).includes(l)},ownKeys(a){return hd(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Hn(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Df(t,n),setContext:o=>Hn(t,o,s,n),override:o=>Hn(t.override(o),e,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return If(o,r,()=>h1(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function Df(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Ws(s)?s:()=>s,isIndexable:Ws(n)?n:()=>n}}const u1=(t,e)=>t?t+Sl(e):e,Ol=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function If(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function h1(t,e,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=t;let a=n[e];return Ws(a)&&r.isScriptable(e)&&(a=f1(e,a,t,s)),Fe(a)&&a.length&&(a=p1(e,a,t,r.isIndexable)),Ol(e,a)&&(a=Hn(a,i,o&&o[e],r)),a}function f1(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,r||n);return a.delete(t),Ol(t,l)&&(l=Dl(i._scopes,i,t,l)),l}function p1(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(ye(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Dl(c,i,t,u);e.push(Hn(h,o,r&&r[t],a))}}return e}function Rf(t,e,s){return Ws(t)?t(e,s):t}const m1=(t,e)=>t===!0?e:typeof t=="string"?zs(e,t):void 0;function g1(t,e,s,n,i){for(const o of e){const r=m1(s,o);if(r){t.add(r);const a=Rf(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function Dl(t,e,s,n){const i=e._rootScopes,o=Rf(e._fallback,s,n),r=[...t,...i],a=new Set;a.add(n);let l=ud(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=ud(a,r,o,l,n),l===null)?!1:Tl(Array.from(a),[""],i,o,()=>b1(e,s,n))}function ud(t,e,s,n,i){for(;s;)s=g1(t,e,s,n,i);return s}function b1(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return Fe(i)&&ye(s)?s:i||{}}function y1(t,e,s,n){let i;for(const o of e)if(i=Lf(u1(o,t),s),typeof i<"u")return Ol(t,i)?Dl(s,n,t,i):i}function Lf(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function hd(t){let e=t._keys;return e||(e=t._keys=x1(t._scopes)),e}function x1(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Ff(t,e,s,n){const{iScale:i}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+s,u=e[c],r[a]={r:i.parse(zs(u,o),c)};return r}const v1=Number.EPSILON||1e-14,zn=(t,e)=>e<t.length&&!t[e].skip&&t[e],jf=t=>t==="x"?"y":"x";function _1(t,e,s,n){const i=t.skip?e:t,o=e,r=s.skip?e:s,a=Da(o,i),l=Da(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,f=n*u;return{previous:{x:o.x-h*(r.x-i.x),y:o.y-h*(r.y-i.y)},next:{x:o.x+f*(r.x-i.x),y:o.y+f*(r.y-i.y)}}}function w1(t,e,s){const n=t.length;let i,o,r,a,l,c=zn(t,0);for(let u=0;u<n-1;++u)if(l=c,c=zn(t,u+1),!(!l||!c)){if(Mi(e[u],0,v1)){s[u]=s[u+1]=0;continue}i=s[u]/e[u],o=s[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=i*r*e[u],s[u+1]=o*r*e[u])}}function k1(t,e,s="x"){const n=jf(s),i=t.length;let o,r,a,l=zn(t,0);for(let c=0;c<i;++c){if(r=a,a=l,l=zn(t,c+1),!a)continue;const u=a[s],h=a[n];r&&(o=(u-r[s])/3,a[`cp1${s}`]=u-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[s]-u)/3,a[`cp2${s}`]=u+o,a[`cp2${n}`]=h+o*e[c])}}function S1(t,e="x"){const s=jf(e),n=t.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=zn(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=zn(t,r+1),!!l){if(c){const u=c[e]-l[e];i[r]=u!==0?(c[s]-l[s])/u:0}o[r]=a?c?ns(i[r-1])!==ns(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}w1(t,i,o),k1(t,o,e)}function bo(t,e,s){return Math.max(Math.min(t,s),e)}function C1(t,e){let s,n,i,o,r,a=xs(t[0],e);for(s=0,n=t.length;s<n;++s)r=o,o=a,a=s<n-1&&xs(t[s+1],e),o&&(i=t[s],r&&(i.cp1x=bo(i.cp1x,e.left,e.right),i.cp1y=bo(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=bo(i.cp2x,e.left,e.right),i.cp2y=bo(i.cp2y,e.top,e.bottom)))}function M1(t,e,s,n,i){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")S1(t,i);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=_1(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&C1(t,s)}function Il(){return typeof window<"u"&&typeof document<"u"}function Rl(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ir(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Tr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function A1(t,e){return Tr(t).getPropertyValue(e)}const P1=["top","right","bottom","left"];function dn(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=P1[i];n[o]=parseFloat(t[e+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const E1=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function T1(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(E1(i,o,t.target))a=i,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function nn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Tr(s),o=i.boxSizing==="border-box",r=dn(i,"padding"),a=dn(i,"border","width"),{x:l,y:c,box:u}=T1(t,s),h=r.left+(u&&a.left),f=r.top+(u&&a.top);let{width:p,height:m}=e;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-h)/p*s.width/n),y:Math.round((c-f)/m*s.height/n)}}function O1(t,e,s){let n,i;if(e===void 0||s===void 0){const o=t&&Rl(t);if(!o)e=t.clientWidth,s=t.clientHeight;else{const r=o.getBoundingClientRect(),a=Tr(o),l=dn(a,"border","width"),c=dn(a,"padding");e=r.width-c.width-l.width,s=r.height-c.height-l.height,n=ir(a.maxWidth,o,"clientWidth"),i=ir(a.maxHeight,o,"clientHeight")}}return{width:e,height:s,maxWidth:n||sr,maxHeight:i||sr}}const yo=t=>Math.round(t*10)/10;function D1(t,e,s,n){const i=Tr(t),o=dn(i,"margin"),r=ir(i.maxWidth,t,"clientWidth")||sr,a=ir(i.maxHeight,t,"clientHeight")||sr,l=O1(t,e,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=dn(i,"border","width"),p=dn(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=yo(Math.min(c,r,l.maxWidth)),u=yo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=yo(c/2)),(e!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=yo(Math.floor(u*n))),{width:c,height:u}}function fd(t,e,s){const n=e||1,i=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(t.currentDevicePixelRatio=n,r.height=i,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const I1=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Il()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function pd(t,e){const s=A1(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function on(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function R1(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function L1(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=on(t,i,s),a=on(i,o,s),l=on(o,e,s),c=on(r,a,s),u=on(a,l,s);return on(c,u,s)}const F1=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},j1=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ln(t,e,s){return t?F1(e,s):j1()}function Nf(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Uf(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Bf(t){return t==="angle"?{between:Wi,compare:N_,normalize:Et}:{between:bs,compare:(e,s)=>e-s,normalize:e=>e}}function md({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function N1(t,e,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Bf(n),l=e.length;let{start:c,end:u,loop:h}=t,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&r(a(e[c%l][n]),i,o);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function Vf(t,e,s){if(!s)return[t];const{property:n,start:i,end:o}=s,r=e.length,{compare:a,between:l,normalize:c}=Bf(n),{start:u,end:h,loop:f,style:p}=N1(t,e,s),m=[];let g=!1,y=null,w,k,A;const S=()=>l(i,A,w)&&a(i,A)!==0,P=()=>a(o,w)===0||l(o,A,w),N=()=>g||S(),F=()=>!g||P();for(let $=u,Q=u;$<=h;++$)k=e[$%r],!k.skip&&(w=c(k[n]),w!==A&&(g=l(w,i,o),y===null&&N()&&(y=a(w,i)===0?$:Q),y!==null&&F()&&(m.push(md({start:y,end:$,loop:f,count:r,style:p})),y=null),Q=$,A=w));return y!==null&&m.push(md({start:y,end:h,loop:f,count:r,style:p})),m}function $f(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const o=Vf(n[i],t.points,e);o.length&&s.push(...o)}return s}function U1(t,e,s,n){let i=0,o=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}function B1(t,e,s,n){const i=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=s;++l){const c=t[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%i,end:(l-1)%i,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%i,end:r%i,loop:n}),o}function V1(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const o=!!t._loop,{start:r,end:a}=U1(s,i,o,n);if(n===!0)return gd(t,[{start:r,end:a,loop:o}],s,e);const l=a<r?a+i:a,c=!!t._fullLoop&&r===0&&a===i-1;return gd(t,B1(s,r,l,c),s,e)}function gd(t,e,s,n){return!n||!n.setContext||!s?e:$1(t,e,s,n)}function $1(t,e,s,n){const i=t._chart.getContext(),o=bd(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=s.length,c=[];let u=o,h=e[0].start,f=h;function p(m,g,y,w){const k=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=k;for(;s[g%l].skip;)g+=k;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:y,style:w}),u=w,h=g%l)}}for(const m of e){h=a?h:m.start;let g=s[h%l],y;for(f=h+1;f<=m.end;f++){const w=s[f%l];y=bd(n.setContext(Ks(i,{type:"segment",p0:g,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),H1(y,u)&&p(h,f-1,m.loop,u),g=w,u=y}h<f-1&&p(h,f-1,m.loop,u)}return c}function bd(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function H1(t,e){if(!e)return!1;const s=[],n=function(i,o){return Pl(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function xo(t,e,s){return t.options.clip?t[s]:e[s]}function z1(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:xo(s,e,"left"),right:xo(s,e,"right"),top:xo(n,e,"top"),bottom:xo(n,e,"bottom")}:e}function Hf(t,e){const s=e._clip;if(s.disabled)return!1;const n=z1(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class W1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:e,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Cf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),o.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=o.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ds=new W1;const yd="transparent",q1={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=ld(t||yd),i=n.valid&&ld(e||yd);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class K1{constructor(e,s,n,i){const o=s[n];i=di([e.to,i,o,e.from]);const r=di([e.from,o,i]);this._active=!0,this._fn=e.fn||q1[e.type||typeof r],this._easing=Ai[e.easing]||Ai.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=di([e.to,s,i,e.from]),this._from=di([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class zf{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ye(e))return;const s=Object.keys(Be.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!ye(o))return;const r={};for(const a of s)r[a]=o[a];(Fe(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,s){const n=s.options,i=Y1(e,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&G1(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,s){const n=this._properties,i=[],o=e.$animations||(e.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,s));continue}const u=s[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}o[c]=h=new K1(f,e,c,u),i.push(h)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return ds.add(this._chart,n),!0}}function G1(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const o=t[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function Y1(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function xd(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,o=s.max===void 0?e:0;return{start:n?o:i,end:n?i:o}}function J1(t,e,s){if(s===!1)return!1;const n=xd(t,s),i=xd(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function X1(t){let e,s,n,i;return ye(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function Wf(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function vd(t,e,s,n={}){const i=t.keys,o=n.mode==="single";let r,a,l,c;if(e===null)return;let u=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(u=!0,n.all)continue;break}c=t.values[l],$e(c)&&(o||e===0||ns(e)===ns(c))&&(e+=c)}return!u&&!n.all?0:e}function Q1(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[i]:u,[o]:t[u]};return a}function ea(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Z1(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function ew(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function tw(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function _d(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const o=t[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function wd(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=Z1(o,r,n),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[l]:g,[c]:y}=m,w=m._stacks||(m._stacks={});f=w[c]=tw(i,u,g),f[a]=y,f._top=_d(f,r,!0,n.type),f._bottom=_d(f,r,!1,n.type);const k=f._visualValues||(f._visualValues={});k[a]=y}}function ta(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function sw(t,e){return Ks(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function nw(t,e,s){return Ks(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function si(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const sa=t=>t==="reset"||t==="none",kd=(t,e)=>e?t:Object.assign({},t),iw=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Wf(s,!0),values:null};class $t{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ea(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&si(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,o=s.xAxisID=pe(n.xAxisID,ta(e,"x")),r=s.yAxisID=pe(n.yAxisID,ta(e,"y")),a=s.rAxisID=pe(n.rAxisID,ta(e,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),u=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&od(this._data,this),e._stacked&&si(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ye(s)){const i=this._cachedMeta;this._data=Q1(s,i)}else if(n!==s){if(n){od(n,this);const i=this._cachedMeta;si(i),i._parsed=[]}s&&Object.isExtensible(s)&&$_(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=ea(s.vScale,s),s.stack!==n.stack&&(i=!0,si(s),s.stack=n.stack),this._resyncElements(e),(i||o!==s._stacked)&&(wd(this,s._parsed),s._stacked=ea(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&s===i.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Fe(i[e])?f=this.parseArrayData(n,i,e,s):ye(i[e])?f=this.parseObjectData(n,i,e,s):f=this.parsePrimitiveData(n,i,e,s);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&wd(this,f)}parsePrimitiveData(e,s,n,i){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+n,h[f]={[a]:u||o.parse(c[m],m),[l]:r.parse(s[m],m)};return h}parseArrayData(e,s,n,i){const{xScale:o,yScale:r}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+n,h=s[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,s,n,i){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,f,p;for(u=0,h=i;u<h;++u)f=u+n,p=s[f],c[u]={x:o.parse(zs(p,a),f),y:r.parse(zs(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,o=this._cachedMeta,r=s[e.axis],a={keys:Wf(i,!0),values:s._stacks[e.axis]._visualValues};return vd(a,r,o.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=vd(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&e===n.iScale,r=i.length,a=this._getOtherScale(e),l=iw(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=ew(a);let f,p;function m(){p=i[f];const g=p[a.axis];return!$e(p[e.axis])||u>g||h<g}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][e.axis],$e(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=X1(pe(this.options.clip,J1(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?r.push(h):h.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=nw(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=sw(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=e+"-"+s,a=o[r],l=this.enableOptionSharing&&zi(n);if(a)return kd(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Be.elements[e]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(kd(g,l))),g}_resolveAnimations(e,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,n,s))}const c=new zf(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||sa(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(e,s,n,i){sa(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!sa(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,s,n=!0){const i=this._cachedMeta,o=i.data,r=e+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&si(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}H($t,"defaults",{}),H($t,"datasetElementType",null),H($t,"dataElementType",null);function ow(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=Sf(n.sort((i,o)=>i-o))}return t._cache.$bar}function rw(t){const e=t.iScale,s=ow(e,t.type);let n=e._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(zi(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=e.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)r=e.getPixelForTick(i),l();return n}function aw(t,e,s,n){const i=s.barThickness;let o,r;return ge(i)?(o=e.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function lw(t,e,s,n){const i=e.pixels,o=i[t];let r=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function cw(t,e,s,n){const i=s.parse(t[0],n),o=s.parse(t[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[s.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function qf(t,e,s,n){return Fe(t)?cw(t,e,s,n):e[s.axis]=s.parse(t,n),e}function Sd(t,e,s,n){const i=t.iScale,o=t.vScale,r=i.getLabels(),a=i===o,l=[];let c,u,h,f;for(c=s,u=s+n;c<u;++c)f=e[c],h={},h[i.axis]=a||i.parse(r[c],c),l.push(qf(f,h,o,c));return l}function na(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function dw(t,e,s){return t!==0?ns(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function uw(t){let e,s,n,i,o;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:e,top:i,bottom:o}}function hw(t,e,s,n){let i=e.borderSkipped;const o={};if(!i){t.borderSkipped=o;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=uw(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(o[Cd(u,r,a,l)]=!0,i=c)),o[Cd(i,r,a,l)]=!0,t.borderSkipped=o}function Cd(t,e,s,n){return n?(t=fw(t,e,s),t=Md(t,s,e)):t=Md(t,e,s),t}function fw(t,e,s){return t===e?s:t===s?e:t}function Md(t,e,s){return t==="start"?e:t==="end"?s:t}function pw(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Ro extends $t{parsePrimitiveData(e,s,n,i){return Sd(e,s,n,i)}parseArrayData(e,s,n,i){return Sd(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let f,p,m,g;for(f=n,p=n+i;f<p;++f)g=s[f],m={},m[o.axis]=o.parse(zs(g,c),f),h.push(qf(zs(g,u),m,r,f));return h}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(e),r=o._custom,a=na(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,i);for(let p=s;p<s+n;p++){const m=this.getParsed(p),g=o||ge(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,u),w=(m._stacks||{})[a.axis],k={horizontal:c,base:g.base,enableBorderRadius:!w||na(m._custom)||r===w._top||r===w._bottom,x:c?g.head:y.center,y:c?y.center:g.head,height:c?y.size:Math.abs(g.size),width:c?Math.abs(g.size):y.size};f&&(k.options=h||this.resolveDataElementOptions(p,e[p].active?"active":i));const A=k.options||e[p].options;hw(k,A,w,r),pw(k,A,u.ratio),this.updateElement(e[p],p,k,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const h=u._parsed.find(p=>p[n.axis]===l),f=h&&h[u.vScale.axis];if(ge(f)||isNaN(f))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,s,n){const i=this._getStacks(e,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||rw(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,u=na(c);let h=l[s.axis],f=0,p=n?this.applyStack(s,l,n):h,m,g;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&ns(h)!==ns(c.barEnd)&&(f=0),f+=h);const y=!ge(o)&&!u?o:f;let w=s.getPixelForValue(y);if(this.chart.getDataVisibility(e)?m=s.getPixelForValue(f+p):m=w,g=m-w,Math.abs(g)<r){g=dw(g,s,a)*r,h===a&&(w-=g/2);const k=s.getPixelForDecimal(0),A=s.getPixelForDecimal(1),S=Math.min(k,A),P=Math.max(k,A);w=Math.max(Math.min(w,P),S),m=w+g,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(w))}if(w===s.getPixelForValue(a)){const k=ns(g)*s.getLineWidthForValue(a)/2;w+=k,g-=k}return{size:g,base:w,head:m,center:m+g/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,o=i.skipNull,r=pe(i.maxBarThickness,1/0);let a,l;if(s.grouped){const c=o?this._getStackCount(e):s.stackCount,u=i.barThickness==="flex"?lw(e,s,i,c):aw(e,s,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}H(Ro,"id","bar"),H(Ro,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(Ro,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Lo extends $t{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,i){const o=super.parsePrimitiveData(e,s,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,s,n,i){const o=super.parseArrayData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=pe(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,s,n,i){const o=super.parseObjectData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=pe(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(s,i),u=r.axis,h=a.axis;for(let f=s;f<s+n;f++){const p=e[f],m=!o&&this.getParsed(f),g={},y=g[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[u]),w=g[h]=o?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(y)||isNaN(w),c&&(g.options=l||this.resolveDataElementOptions(f,p.active?"active":i),o&&(g.options.radius=0)),this.updateElement(p,f,g,i)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return s!=="active"&&(i.radius=0),i.radius+=pe(n&&n._custom,o),i}}H(Lo,"id","bubble"),H(Lo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),H(Lo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function mw(t,e,s){let n=1,i=1,o=0,r=0;if(e<je){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(A,S,P)=>Wi(A,a,l,!0)?1:Math.max(S,S*s,P,P*s),m=(A,S,P)=>Wi(A,a,l,!0)?-1:Math.min(S,S*s,P,P*s),g=p(0,c,h),y=p(We,u,f),w=m(Ne,c,h),k=m(Ne+We,u,f);n=(g-w)/2,i=(y-k)/2,o=-(g+w)/2,r=-(y+k)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class an extends $t{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(ye(n[e])){const{key:l="value"}=this._parsing;o=c=>+zs(n[c],l)}let r,a;for(r=e,a=e+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Ut(this.options.rotation-90)}_getCircumference(){return Ut(this.options.circumference)}_getRotationExtents(){let e=je,s=-je;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();e=Math.min(e,o),s=Math.max(s,o+r)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(A_(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=mw(h,u,l),y=(n.width-r)/f,w=(n.height-r)/p,k=Math.max(Math.min(y,w)/2,0),A=xf(this.options.radius,k),S=Math.max(A*l,0),P=(A-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*A,this.offsetY=g*A,i.total=this.calculateTotal(),this.outerRadius=A-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/je)}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(s,i);let w=this._getRotation(),k;for(k=0;k<s;++k)w+=this._circumference(k,o);for(k=s;k<s+n;++k){const A=this._circumference(k,o),S=e[k],P={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+A,circumference:A,outerRadius:m,innerRadius:p};y&&(P.options=g||this.resolveDataElementOptions(k,S.active?"active":i)),w+=A,this.updateElement(S,k,P,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?je*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=no(s._parsed[e],n.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,o,r,a,l;if(!e){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),e=r.data,a=r.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(pe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(an,"id","doughnut"),H(an,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(an,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),H(an,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class Fo extends $t{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Af(s,i,r);this._drawStart=a,this._drawCount=l,Pf(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,i),f=r.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,y=$n(m)?m:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||i==="none",k=s+n,A=e.length;let S=s>0&&this.getParsed(s-1);for(let P=0;P<A;++P){const N=e[P],F=w?N:{};if(P<s||P>=k){F.skip=!0;continue}const $=this.getParsed(P),Q=ge($[p]),oe=F[f]=r.getPixelForValue($[f],P),ae=F[p]=o||Q?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,$,l):$[p],P);F.skip=isNaN(oe)||isNaN(ae)||Q,F.stop=P>0&&Math.abs($[f]-S[f])>y,g&&(F.parsed=$,F.raw=c.data[P]),h&&(F.options=u||this.resolveDataElementOptions(P,N.active?"active":i)),w||this.updateElement(N,P,F,i),S=$}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(Fo,"id","line"),H(Fo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(Fo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ei extends $t{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=no(s._parsed[e].r,n.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,s,n,i){return Ff.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,i=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*Ne;let p=f,m;const g=360/this.countVisibleElements();for(m=0;m<s;++m)p+=this._computeAngle(m,i,g);for(m=s;m<s+n;m++){const y=e[m];let w=p,k=p+this._computeAngle(m,i,g),A=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=k,o&&(l.animateScale&&(A=0),l.animateRotate&&(w=k=f));const S={x:u,y:h,innerRadius:0,outerRadius:A,startAngle:w,endAngle:k,options:this.resolveDataElementOptions(m,y.active?"active":i)};this.updateElement(y,m,S,i)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?Ut(this.resolveDataElementOptions(e,s).angle||n):0}}H(Ei,"id","polarArea"),H(Ei,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),H(Ei,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class La extends an{}H(La,"id","pie"),H(La,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class jo extends $t{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,i){return Ff.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta,n=s.dataset,i=s.data||[],o=s.iScale.getLabels();if(n.points=i,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,s,n,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=s;a<s+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,f=r?o.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}H(jo,"id","radar"),H(jo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(jo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class No extends $t{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=Af(s,n,i);if(this._drawStart=o,this._drawCount=r,Pf(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(u),f=this.includeOptions(i,h),p=r.axis,m=a.axis,{spanGaps:g,segment:y}=this.options,w=$n(g)?g:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||i==="none";let A=s>0&&this.getParsed(s-1);for(let S=s;S<s+n;++S){const P=e[S],N=this.getParsed(S),F=k?P:{},$=ge(N[m]),Q=F[p]=r.getPixelForValue(N[p],S),oe=F[m]=o||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],S);F.skip=isNaN(Q)||isNaN(oe)||$,F.stop=S>0&&Math.abs(N[p]-A[p])>w,y&&(F.parsed=N,F.raw=c.data[S]),f&&(F.options=h||this.resolveDataElementOptions(S,P.active?"active":i)),k||this.updateElement(P,S,F,i),A=N}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}H(No,"id","scatter"),H(No,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(No,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var gw=Object.freeze({__proto__:null,BarController:Ro,BubbleController:Lo,DoughnutController:an,LineController:Fo,PieController:La,PolarAreaController:Ei,RadarController:jo,ScatterController:No});function Zs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ll{constructor(e){H(this,"options");this.options=e||{}}static override(e){Object.assign(Ll.prototype,e)}init(){}formats(){return Zs()}parse(){return Zs()}format(){return Zs()}add(){return Zs()}diff(){return Zs()}startOf(){return Zs()}endOf(){return Zs()}}var bw={_date:Ll};function yw(t,e,s,n){const{controller:i,data:o,_sorted:r}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const c=a._reversePixels?B_:ys;if(n){if(i._sharedOptions){const u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(o,e,s-h),p=c(o,e,s+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(o,e,s);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!ge(g[h.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(g=>!ge(g[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:o.length-1}}function io(t,e,s,n,i){const o=t.getSortedVisibleDatasetMetas(),r=s[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:f}=yw(o[a],e,r,i);for(let p=h;p<=f;++p){const m=u[p];m.skip||n(m,c,p)}}}function xw(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const o=e?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ia(t,e,s,n,i){const o=[];return!i&&!t.isPointInArea(e)||io(t,s,e,function(a,l,c){!i&&!xs(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function vw(t,e,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=wf(r,{x:e.x,y:e.y});Wi(h,c,u)&&i.push({element:r,datasetIndex:a,index:l})}return io(t,s,e,o),i}function _w(t,e,s,n,i,o){let r=[];const a=xw(s);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,i);if(n&&!p)return;const m=u.getCenterPoint(i);if(!(!!o||t.isPointInArea(m))&&!p)return;const y=a(e,m);y<l?(r=[{element:u,datasetIndex:h,index:f}],l=y):y===l&&r.push({element:u,datasetIndex:h,index:f})}return io(t,s,e,c),r}function oa(t,e,s,n,i,o){return!o&&!t.isPointInArea(e)?[]:s==="r"&&!n?vw(t,e,s,i):_w(t,e,s,n,i,o)}function Ad(t,e,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return io(t,s,e,(l,c,u)=>{l[r]&&l[r](e[s],i)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),n&&!a?[]:o}var ww={evaluateInteractionItems:io,modes:{index(t,e,s,n){const i=nn(e,t),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?ia(t,i,o,n,r):oa(t,i,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,s,n){const i=nn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?ia(t,i,o,n,r):oa(t,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,s,n){const i=nn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return ia(t,i,o,n,r)},nearest(t,e,s,n){const i=nn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return oa(t,i,o,s.intersect,n,r)},x(t,e,s,n){const i=nn(e,t);return Ad(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=nn(e,t);return Ad(t,i,"y",s.intersect,n)}}};const Kf=["left","top","right","bottom"];function ni(t,e){return t.filter(s=>s.pos===e)}function Pd(t,e){return t.filter(s=>Kf.indexOf(s.pos)===-1&&s.box.axis===e)}function ii(t,e){return t.sort((s,n)=>{const i=e?n:s,o=e?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function kw(t){const e=[];let s,n,i,o,r,a;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,e.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return e}function Sw(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Kf.includes(i))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Cw(t,e){const s=Sw(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&e.availableHeight)}return s}function Mw(t){const e=kw(t),s=ii(e.filter(c=>c.box.fullSize),!0),n=ii(ni(e,"left"),!0),i=ii(ni(e,"right")),o=ii(ni(e,"top"),!0),r=ii(ni(e,"bottom")),a=Pd(e,"x"),l=Pd(e,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:ni(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function Ed(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Gf(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Aw(t,e,s,n){const{pos:i,box:o}=s,r=t.maxPadding;if(!ye(i)){s.size&&(t[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?o.height:o.width),s.size=h.size/h.count,t[i]+=s.size}o.getPadding&&Gf(r,o.getPadding());const a=Math.max(0,e.outerWidth-Ed(r,t,"left","right")),l=Math.max(0,e.outerHeight-Ed(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function Pw(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function Ew(t,e){const s=e.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(e[r],s[r])}),o}return n(t?["left","right"]:["top","bottom"])}function ui(t,e,s,n){const i=[];let o,r,a,l,c,u;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Ew(a.horizontal,e));const{same:h,other:f}=Aw(e,s,a,n);c|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&ui(i,e,s,n)||u}function vo(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function Td(t,e,s,n){const i=s.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;zi(c.start)&&(r=c.start),l.fullSize?vo(l,i.left,r,s.outerWidth-i.right-i.left,f):vo(l,e.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*u,f=c.size||l.width;zi(c.start)&&(o=c.start),l.fullSize?vo(l,o,i.top,f,s.outerHeight-i.bottom-i.top):vo(l,o,e.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=r}var ct={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=ut(t.options.layout.padding),o=Math.max(e-i.width,0),r=Math.max(s-i.height,0),a=Mw(t.boxes),l=a.vertical,c=a.horizontal;Ae(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},i);Gf(f,ut(n));const p=Object.assign({maxPadding:f,w:o,h:r,x:i.left,y:i.top},i),m=Cw(l.concat(c),h);ui(a.fullSize,p,h,m),ui(l,p,h,m),ui(c,p,h,m)&&ui(l,p,h,m),Pw(p),Td(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Td(a.rightAndBottom,p,h,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ae(a.chartArea,g=>{const y=g.box;Object.assign(y,t.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Yf{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Tw extends Yf{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Uo="$chartjs",Ow={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Od=t=>t===null||t==="";function Dw(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[Uo]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Od(i)){const o=pd(t,"width");o!==void 0&&(t.width=o)}if(Od(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=pd(t,"height");o!==void 0&&(t.height=o)}return t}const Jf=I1?{passive:!0}:!1;function Iw(t,e,s){t&&t.addEventListener(e,s,Jf)}function Rw(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Jf)}function Lw(t,e){const s=Ow[t.type]||t.type,{x:n,y:i}=nn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function or(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Fw(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||or(a.addedNodes,n),r=r&&!or(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function jw(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||or(a.removedNodes,n),r=r&&!or(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ki=new Map;let Dd=0;function Xf(){const t=window.devicePixelRatio;t!==Dd&&(Dd=t,Ki.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Nw(t,e){Ki.size||window.addEventListener("resize",Xf),Ki.set(t,e)}function Uw(t){Ki.delete(t),Ki.size||window.removeEventListener("resize",Xf)}function Bw(t,e,s){const n=t.canvas,i=n&&Rl(n);if(!i)return;const o=Mf((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(i),Nw(t,o),r}function ra(t,e,s){s&&s.disconnect(),e==="resize"&&Uw(t)}function Vw(t,e,s){const n=t.canvas,i=Mf(o=>{t.ctx!==null&&s(Lw(o,t))},t);return Iw(n,e,i),i}class $w extends Yf{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Dw(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Uo])return!1;const n=s[Uo].initial;["height","width"].forEach(o=>{const r=n[o];ge(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[Uo],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),r={attach:Fw,detach:jw,resize:Bw}[s]||Vw;i[s]=r(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:ra,detach:ra,resize:ra}[s]||Rw)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return D1(e,s,n,i)}isAttached(e){const s=e&&Rl(e);return!!(s&&s.isConnected)}}function Hw(t){return!Il()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Tw:$w}var Ao;let Ms=(Ao=class{constructor(){H(this,"x");H(this,"y");H(this,"active",!1);H(this,"options");H(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return $n(this.x)&&$n(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}},H(Ao,"defaults",{}),H(Ao,"defaultRoutes"),Ao);function zw(t,e){const s=t.options.ticks,n=Ww(t),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?Kw(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return Gw(e,c,o,r/i),c;const u=qw(o,e,i);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(_o(e,c,u,ge(p)?0:a-p,a),h=0,f=r-1;h<f;h++)_o(e,c,u,o[h],o[h+1]);return _o(e,c,u,l,ge(p)?e.length:l+p),c}return _o(e,c,u),c}function Ww(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function qw(t,e,s){const n=Yw(t),i=e.length/s;if(!n)return Math.max(i,1);const o=L_(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function Kw(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Gw(t,e,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),i++,o=s[i*n])}function _o(t,e,s,n,i){const o=pe(n,0),r=Math.min(pe(i,t.length),t.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*s))}function Yw(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Jw=t=>t==="left"?"right":t==="right"?"left":t,Id=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Rd=(t,e)=>Math.min(e||t,t);function Ld(t,e){const s=[],n=t.length/e,i=t.length;let o=0;for(;o<i;o+=n)s.push(t[Math.floor(o)]);return s}function Xw(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<o-a||l>r+a)))return l}function Qw(t,e){Ae(t,s=>{const n=s.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function oi(t){return t.drawTicks?t.tickLength:0}function Fd(t,e){if(!t.display)return 0;const s=Je(t.font,e),n=ut(t.padding);return(Fe(t.text)?t.text.length:1)*s.lineHeight+n.height}function Zw(t,e){return Ks(t,{scale:e,type:"scale"})}function ek(t,e,s){return Ks(t,{tick:s,index:e,type:"tick"})}function tk(t,e,s){let n=Al(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Jw(n)),n}function sk(t,e,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,p,m;const g=r-i,y=a-o;if(t.isHorizontal()){if(p=rt(n,o,a),ye(s)){const w=Object.keys(s)[0],k=s[w];m=u[w].getPixelForValue(k)+g-e}else s==="center"?m=(c.bottom+c.top)/2+g-e:m=Id(t,s,e);f=a-o}else{if(ye(s)){const w=Object.keys(s)[0],k=s[w];p=u[w].getPixelForValue(k)-y+e}else s==="center"?p=(c.left+c.right)/2-y+e:p=Id(t,s,e);m=rt(n,r,i),h=s==="left"?-We:We}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class mn extends Ms{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=Pt(e,Number.POSITIVE_INFINITY),s=Pt(s,Number.NEGATIVE_INFINITY),n=Pt(n,Number.POSITIVE_INFINITY),i=Pt(i,Number.NEGATIVE_INFINITY),{min:Pt(e,n),max:Pt(s,i),minDefined:$e(e),maxDefined:$e(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:Pt(s,Pt(n,s)),max:Pt(n,Pt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Re(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=d1(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ld(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=zw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Re(this.options.afterUpdate,[this])}beforeSetDimensions(){Re(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Re(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Re(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Re(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n],o.label=Re(s.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Re(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Re(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Rd(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Qe(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(e.offset?.5:1)),l=this.maxHeight-oi(e.grid)-s.padding-Fd(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=Cl(Math.min(Math.asin(Qe((u.highest.height+6)/a,-1,1)),Math.asin(Qe(l/c,-1,1))-Math.asin(Qe(f/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Re(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Re(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Fd(i,s.options.font);if(a?(e.width=this.maxWidth,e.height=oi(o)+l):(e.height=this.maxHeight,e.width=oi(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Ut(this.labelRotation),g=Math.cos(m),y=Math.sin(m);if(a){const w=n.mirror?0:y*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=n.mirror?0:g*h.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(c,u,y,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=n*s.height):(f=n*e.height,p=i*s.width):o==="start"?p=s.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=s.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=s.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Re(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ge(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Ld(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Rd(s,n));let c=0,u=0,h,f,p,m,g,y,w,k,A,S,P;for(h=0;h<s;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),i.font=y=g.string,w=o[y]=o[y]||{data:{},gc:[]},k=g.lineHeight,A=S=0,!ge(m)&&!Fe(m))A=nr(i,w.data,w.gc,A,m),S=k;else if(Fe(m))for(f=0,p=m.length;f<p;++f)P=m[f],!ge(P)&&!Fe(P)&&(A=nr(i,w.data,w.gc,A,P),S+=k);r.push(A),a.push(S),c=Math.max(A,c),u=Math.max(S,u)}Qw(o,s);const N=r.indexOf(c),F=a.indexOf(u),$=Q=>({width:r[Q]||0,height:a[Q]||0});return{first:$(0),last:$(s-1),widest:$(N),highest:$(F),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return U_(this._alignToPixels?Qs(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=ek(this.getContext(),e,n))}return this.$context||(this.$context=Zw(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Ut(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=oi(o),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,y=g/2,w=function(de){return Qs(n,de,g)};let k,A,S,P,N,F,$,Q,oe,ae,he,Pe;if(r==="top")k=w(this.bottom),F=this.bottom-f,Q=k-y,ae=w(e.top)+y,Pe=e.bottom;else if(r==="bottom")k=w(this.top),ae=e.top,Pe=w(e.bottom)-y,F=k+y,Q=this.top+f;else if(r==="left")k=w(this.right),N=this.right-f,$=k-y,oe=w(e.left)+y,he=e.right;else if(r==="right")k=w(this.left),oe=e.left,he=w(e.right)-y,N=k+y,$=this.left+f;else if(s==="x"){if(r==="center")k=w((e.top+e.bottom)/2+.5);else if(ye(r)){const de=Object.keys(r)[0],re=r[de];k=w(this.chart.scales[de].getPixelForValue(re))}ae=e.top,Pe=e.bottom,F=k+y,Q=F+f}else if(s==="y"){if(r==="center")k=w((e.left+e.right)/2);else if(ye(r)){const de=Object.keys(r)[0],re=r[de];k=w(this.chart.scales[de].getPixelForValue(re))}N=k-y,$=N-f,oe=e.left,he=e.right}const Ye=pe(i.ticks.maxTicksLimit,h),xe=Math.max(1,Math.ceil(h/Ye));for(A=0;A<h;A+=xe){const de=this.getContext(A),re=o.setContext(de),fe=a.setContext(de),Te=re.lineWidth,ht=re.color,ft=fe.dash||[],He=fe.dashOffset,Ot=re.tickWidth,bt=re.tickColor,Gt=re.tickBorderDash||[],qe=re.tickBorderDashOffset;S=Xw(this,A,l),S!==void 0&&(P=Qs(n,S,Te),c?N=$=oe=he=P:F=Q=ae=Pe=P,p.push({tx1:N,ty1:F,tx2:$,ty2:Q,x1:oe,y1:ae,x2:he,y2:Pe,width:Te,color:ht,borderDash:ft,borderDashOffset:He,tickWidth:Ot,tickColor:bt,tickBorderDash:Gt,tickBorderDashOffset:qe}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,f=oi(n.grid),p=f+u,m=h?-u:p,g=-Ut(this.labelRotation),y=[];let w,k,A,S,P,N,F,$,Q,oe,ae,he,Pe="middle";if(i==="top")N=this.bottom-m,F=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+m,F=this._getXAxisLabelAlignment();else if(i==="left"){const xe=this._getYAxisLabelAlignment(f);F=xe.textAlign,P=xe.x}else if(i==="right"){const xe=this._getYAxisLabelAlignment(f);F=xe.textAlign,P=xe.x}else if(s==="x"){if(i==="center")N=(e.top+e.bottom)/2+p;else if(ye(i)){const xe=Object.keys(i)[0],de=i[xe];N=this.chart.scales[xe].getPixelForValue(de)+p}F=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")P=(e.left+e.right)/2-p;else if(ye(i)){const xe=Object.keys(i)[0],de=i[xe];P=this.chart.scales[xe].getPixelForValue(de)}F=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?Pe="top":l==="end"&&(Pe="bottom"));const Ye=this._getLabelSizes();for(w=0,k=a.length;w<k;++w){A=a[w],S=A.label;const xe=o.setContext(this.getContext(w));$=this.getPixelForTick(w)+o.labelOffset,Q=this._resolveTickFontOptions(w),oe=Q.lineHeight,ae=Fe(S)?S.length:1;const de=ae/2,re=xe.color,fe=xe.textStrokeColor,Te=xe.textStrokeWidth;let ht=F;r?(P=$,F==="inner"&&(w===k-1?ht=this.options.reverse?"left":"right":w===0?ht=this.options.reverse?"right":"left":ht="center"),i==="top"?c==="near"||g!==0?he=-ae*oe+oe/2:c==="center"?he=-Ye.highest.height/2-de*oe+oe:he=-Ye.highest.height+oe/2:c==="near"||g!==0?he=oe/2:c==="center"?he=Ye.highest.height/2-de*oe:he=Ye.highest.height-ae*oe,h&&(he*=-1),g!==0&&!xe.showLabelBackdrop&&(P+=oe/2*Math.sin(g))):(N=$,he=(1-ae)*oe/2);let ft;if(xe.showLabelBackdrop){const He=ut(xe.backdropPadding),Ot=Ye.heights[w],bt=Ye.widths[w];let Gt=he-He.top,qe=0-He.left;switch(Pe){case"middle":Gt-=Ot/2;break;case"bottom":Gt-=Ot;break}switch(F){case"center":qe-=bt/2;break;case"right":qe-=bt;break;case"inner":w===k-1?qe-=bt:w>0&&(qe-=bt/2);break}ft={left:qe,top:Gt,width:bt+He.width,height:Ot+He.height,color:xe.backdropColor}}y.push({label:S,font:Q,textOffset:he,options:{rotation:g,color:re,strokeColor:fe,strokeWidth:Te,textAlign:ht,textBaseline:Pe,translation:[P,N],backdrop:ft}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Ut(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,u;return s==="left"?i?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,o,r),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Qs(e,this.left,r)-r/2,u=Qs(e,this.right,a)+a/2,h=f=l):(h=Qs(e,this.top,r)-r/2,f=Qs(e,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Pr(n,i);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;hn(n,c,0,u,l,a)}i&&Er(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=Je(n.font),r=ut(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||ye(s)?(l+=r.bottom,Fe(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=sk(this,l,s,a);hn(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:tk(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=pe(e.grid&&e.grid.z,-1),i=pe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==mn.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Je(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;ok(s)&&(n=this.register(s));const i=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,nk(e,r,n),this.override&&Be.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in Be[i]&&(delete Be[i][n],this.override&&delete un[n])}}function nk(t,e,s){const n=Hi(Object.create(null),[s?Be.get(s):{},Be.get(e),t.defaults]);Be.set(e,n),t.defaultRoutes&&ik(e,t.defaultRoutes),t.descriptors&&Be.describe(e,t.descriptors)}function ik(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),o=[t].concat(n).join("."),r=e[s].split("."),a=r.pop(),l=r.join(".");Be.route(o,i,l,a)})}function ok(t){return"id"in t&&"defaults"in t}class rk{constructor(){this.controllers=new wo($t,"datasets",!0),this.elements=new wo(Ms,"elements"),this.plugins=new wo(Object,"plugins"),this.scales=new wo(mn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ae(i,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,s,n){const i=Sl(e);Re(n["before"+i],[],n),s[e](n),Re(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var es=new rk;class ak{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),r=this._notify(o,e,s,n);return s==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,s,n,i){i=i||{};for(const o of e){const r=o.plugin,a=r[n],l=[s,i,o.options];if(Re(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=pe(n.options&&n.options.plugins,{}),o=lk(n);return i===!1&&!s?[]:dk(e,o,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function lk(t){const e={},s=[],n=Object.keys(es.plugins.items);for(let o=0;o<n.length;o++)s.push(es.getPlugin(n[o]));const i=t.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),e[r.id]=!0)}return{plugins:s,localIds:e}}function ck(t,e){return!e&&t===!1?null:t===!0?{}:t}function dk(t,{plugins:e,localIds:s},n,i){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=ck(n[l],i);c!==null&&o.push({plugin:a,options:uk(t.config,{plugin:a,local:s[l]},c,r)})}return o}function uk(t,{plugin:e,local:s},n,i){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return s&&e.defaults&&r.push(e.defaults),t.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fa(t,e){const s=Be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function hk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function fk(t,e){return t===e?"_index_":"_value_"}function jd(t){if(t==="x"||t==="y"||t==="r")return t}function pk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ja(t,...e){if(jd(t))return t;for(const s of e){const n=s.axis||pk(s.position)||t.length>1&&jd(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Nd(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function mk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return Nd(t,"x",s[0])||Nd(t,"y",s[0])}return{}}function gk(t,e){const s=un[t.type]||{scales:{}},n=e.scales||{},i=Fa(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!ye(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=ja(r,a,mk(r,t),Be.scales[a.type]),c=fk(l,i),u=s.scales||{};o[r]=Ci(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||Fa(a,e),u=(un[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=hk(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Ci(o[p],[{axis:f},n[p],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Ci(a,[Be.scales[a.type],Be.scale])}),o}function Qf(t){const e=t.options||(t.options={});e.plugins=pe(e.plugins,{}),e.scales=gk(t,e)}function Zf(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function bk(t){return t=t||{},t.data=Zf(t.data),Qf(t),t}const Ud=new Map,ep=new Set;function ko(t,e){let s=Ud.get(t);return s||(s=e(),Ud.set(t,s),ep.add(s)),s}const ri=(t,e,s)=>{const n=zs(e,s);n!==void 0&&t.add(n)};class yk{constructor(e){this._config=bk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Zf(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ko(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return ko(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return ko(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return ko(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:o}=this,r=this._cachedScopes(e,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{e&&(l.add(e),u.forEach(h=>ri(l,e,h))),u.forEach(h=>ri(l,i,h)),u.forEach(h=>ri(l,un[o]||{},h)),u.forEach(h=>ri(l,Be,h)),u.forEach(h=>ri(l,Ia,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ep.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:e,type:s}=this;return[e,un[s]||{},Be.datasets[s]||{},{type:s},Be,Ia]}resolveNamedOptions(e,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Bd(this._resolverCache,e,i);let l=r;if(vk(r,s)){o.$shared=!1,n=Ws(n)?n():n;const c=this.createResolver(e,n,a);l=Hn(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(e,s,n=[""],i){const{resolver:o}=Bd(this._resolverCache,e,n);return ye(s)?Hn(o,s,void 0,i):o}}function Bd(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let o=n.get(i);return o||(o={resolver:Tl(e,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const xk=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>Ws(t[e]));function vk(t,e){const{isScriptable:s,isIndexable:n}=Df(t);for(const i of e){const o=s(i),r=n(i),a=(r||o)&&t[i];if(o&&(Ws(a)||xk(a))||r&&Fe(a))return!0}return!1}var _k="4.4.9";const wk=["top","bottom","left","right","chartArea"];function Vd(t,e){return t==="top"||t==="bottom"||wk.indexOf(t)===-1&&e==="x"}function $d(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function Hd(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Re(s&&s.onComplete,[t],e)}function kk(t){const e=t.chart,s=e.options.animation;Re(s&&s.onProgress,[t],e)}function tp(t){return Il()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Bo={},zd=t=>{const e=tp(t);return Object.values(Bo).filter(s=>s.canvas===e).pop()};function Sk(t,e,s){const n=Object.keys(t);for(const i of n){const o=+i;if(o>=e){const r=t[i];delete t[i],(s>0||o>e)&&(t[o+s]=r)}}}function Ck(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}class ss{static register(...e){es.add(...e),Wd()}static unregister(...e){es.remove(...e),Wd()}constructor(e,s){const n=this.config=new yk(s),i=tp(e),o=zd(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Hw(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=M_(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ak,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=H_(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Bo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",Hd),ds.listen(this,"progress",kk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return ge(e)?s&&o?o:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dd(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(e,s){ds.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,e,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,fd(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Re(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Ae(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=ja(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ae(o,r=>{const a=r.options,l=a.id,c=ja(l,a),u=pe(a.type,r.dtype);(a.position===void 0||Vd(a.position,c)!==Vd(r.dposition))&&(a.position=r.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const f=es.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),Ae(i,(r,a)=>{r||delete n[a]}),Ae(n,r=>{ct.configure(this,r,r.options),ct.addBox(this,r)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort($d("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Fa(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=es.getController(a),{datasetElementType:c,dataElementType:u}=Be.datasets[a];Object.assign(l,{dataElementType:es.getElement(u),datasetElementType:c&&es.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Ae(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Ae(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($d("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ae(this.scales,e=>{ct.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!td(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;Sk(e,i,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!td(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ct.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Ae(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Ws(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),Hd({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Hf(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Pr(s,i),e.controller.draw(),i&&Er(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return xs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const o=ww.modes[s];return typeof o=="function"?o(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ks(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,i);zi(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ds.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),dd(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Bo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),e[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ae(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(s.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Ae(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Ae(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!er(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(s,e),a=n?e:o(e,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(e,i,n,r),l=D_(e),c=Ck(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Re(o.onHover,[e,a,this],this),l&&Re(o.onClick,[e,a,this],this));const u=!er(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}}H(ss,"defaults",Be),H(ss,"instances",Bo),H(ss,"overrides",un),H(ss,"registry",es),H(ss,"version",_k),H(ss,"getChart",zd);function Wd(){return Ae(ss.instances,t=>t._plugins.invalidate())}function Mk(t,e,s){const{startAngle:n,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,r,a,n-c,s+c),l>i?(c=i/l,t.arc(o,r,l,s+c,n-c,!0)):t.arc(o,r,i,s+We,n-We),t.closePath(),t.clip()}function Ak(t){return El(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Pk(t,e,s,n){const i=Ak(t.options.borderRadius),o=(s-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(s-Math.min(o,l))*n/2;return Qe(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Qe(i.innerStart,0,r),innerEnd:Qe(i.innerEnd,0,r)}}function _n(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function rr(t,e,s,n,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+n+s-c,0),f=u>0?u+n+s+c:0;let p=0;const m=i-l;if(n){const xe=u>0?u-n:0,de=h>0?h-n:0,re=(xe+de)/2,fe=re!==0?m*re/(re+n):m;p=(m-fe)/2}const g=Math.max(.001,m*h-s/Ne)/h,y=(m-g)/2,w=l+y+p,k=i-y-p,{outerStart:A,outerEnd:S,innerStart:P,innerEnd:N}=Pk(e,f,h,k-w),F=h-A,$=h-S,Q=w+A/F,oe=k-S/$,ae=f+P,he=f+N,Pe=w+P/ae,Ye=k-N/he;if(t.beginPath(),o){const xe=(Q+oe)/2;if(t.arc(r,a,h,Q,xe),t.arc(r,a,h,xe,oe),S>0){const Te=_n($,oe,r,a);t.arc(Te.x,Te.y,S,oe,k+We)}const de=_n(he,k,r,a);if(t.lineTo(de.x,de.y),N>0){const Te=_n(he,Ye,r,a);t.arc(Te.x,Te.y,N,k+We,Ye+Math.PI)}const re=(k-N/f+(w+P/f))/2;if(t.arc(r,a,f,k-N/f,re,!0),t.arc(r,a,f,re,w+P/f,!0),P>0){const Te=_n(ae,Pe,r,a);t.arc(Te.x,Te.y,P,Pe+Math.PI,w-We)}const fe=_n(F,w,r,a);if(t.lineTo(fe.x,fe.y),A>0){const Te=_n(F,Q,r,a);t.arc(Te.x,Te.y,A,w-We,Q)}}else{t.moveTo(r,a);const xe=Math.cos(Q)*h+r,de=Math.sin(Q)*h+a;t.lineTo(xe,de);const re=Math.cos(oe)*h+r,fe=Math.sin(oe)*h+a;t.lineTo(re,fe)}t.closePath()}function Ek(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){rr(t,e,s,n,l,i);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%je||je))}return rr(t,e,s,n,l,i),t.fill(),l}function Tk(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(o){rr(t,e,s,n,m,i);for(let g=0;g<o;++g)t.stroke();isNaN(a)||(m=r+(a%je||je))}p&&Mk(t,e,m),o||(rr(t,e,s,n,m,i),t.stroke())}class hi extends Ms{constructor(s){super();H(this,"circumference");H(this,"endAngle");H(this,"fullCircles");H(this,"innerRadius");H(this,"outerRadius");H(this,"pixelMargin");H(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.getProps(["x","y"],i),{angle:r,distance:a}=wf(o,{x:s,y:n}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=pe(f,c-l),g=Wi(r,l,c)&&l!==c,y=m>=je||g,w=bs(a,u+p,h+p);return y&&w}getCenterPoint(s){const{x:n,y:i,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:u}=this.options,h=(o+r)/2,f=(a+l+u+c)/2;return{x:n+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:i}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>je?Math.floor(i/je):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(Ne,i||0)),u=o*c;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,Ek(s,this,u,r,a),Tk(s,this,u,r,a),s.restore()}}H(hi,"id","arc"),H(hi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),H(hi,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(hi,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function sp(t,e,s=e){t.lineCap=pe(s.borderCapStyle,e.borderCapStyle),t.setLineDash(pe(s.borderDash,e.borderDash)),t.lineDashOffset=pe(s.borderDashOffset,e.borderDashOffset),t.lineJoin=pe(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=pe(s.borderWidth,e.borderWidth),t.strokeStyle=pe(s.borderColor,e.borderColor)}function Ok(t,e,s){t.lineTo(s.x,s.y)}function Dk(t){return t.stepped?t1:t.tension||t.cubicInterpolationMode==="monotone"?s1:Ok}function np(t,e,s={}){const n=t.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=e,l=Math.max(i,r),c=Math.min(o,a),u=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function Ik(t,e,s,n){const{points:i,options:o}=e,{count:r,start:a,loop:l,ilen:c}=np(i,s,n),u=Dk(o);let{move:h=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%r],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):u(t,g,m,f,o.stepped),g=m);return l&&(m=i[(a+(f?c:0))%r],u(t,g,m,f,o.stepped)),!!l}function Rk(t,e,s,n){const i=e.points,{count:o,start:r,ilen:a}=np(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,f,p,m,g,y,w;const k=S=>(r+(c?a-S:S))%o,A=()=>{g!==y&&(t.lineTo(u,y),t.lineTo(u,g),t.lineTo(u,w))};for(l&&(p=i[k(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[k(f)],p.skip)continue;const S=p.x,P=p.y,N=S|0;N===m?(P<g?g=P:P>y&&(y=P),u=(h*u+S)/++h):(A(),t.lineTo(S,P),m=N,h=0,g=y=P),w=P}A()}function Na(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Rk:Ik}function Lk(t){return t.stepped?R1:t.tension||t.cubicInterpolationMode==="monotone"?L1:on}function Fk(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),sp(t,e.options),t.stroke(i)}function jk(t,e,s,n){const{segments:i,options:o}=e,r=Na(e);for(const a of i)sp(t,o,a.style),t.beginPath(),r(t,e,a,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Nk=typeof Path2D=="function";function Uk(t,e,s,n){Nk&&!e.options.segment?Fk(t,e,s,n):jk(t,e,s,n)}class Ns extends Ms{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;M1(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=V1(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],o=this.points,r=$f(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=Lk(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:f}=r[c],p=o[h],m=o[f];if(p===m){a.push(p);continue}const g=Math.abs((i-p[s])/(m[s]-p[s])),y=l(p,m,g,n.stepped);y[s]=e[s],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,s,n){return Na(this)(e,this,s,n)}path(e,s,n){const i=this.segments,o=Na(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(e,this,a,{start:s,end:s+n-1});return!!r}draw(e,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),Uk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}H(Ns,"id","line"),H(Ns,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(Ns,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(Ns,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function qd(t,e,s,n){const i=t.options,{[s]:o}=t.getProps([s],n);return Math.abs(e-o)<i.radius+i.hitRadius}class Vo extends Ms{constructor(s){super();H(this,"parsed");H(this,"skip");H(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],i);return Math.pow(s-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,n){return qd(this,s,"x",n)}inYRange(s,n){return qd(this,s,"y",n)}getCenterPoint(s){const{x:n,y:i}=this.getProps(["x","y"],s);return{x:n,y:i}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const i=n&&s.borderWidth||0;return(n+i)*2}draw(s,n){const i=this.options;this.skip||i.radius<.1||!xs(this,n,this.size(i)/2)||(s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.fillStyle=i.backgroundColor,Ra(s,i,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}H(Vo,"id","point"),H(Vo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(Vo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ip(t,e){const{x:s,y:n,base:i,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-h,u=n+h):(h=o/2,a=s-h,l=s+h,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function Us(t,e,s,n){return t?0:Qe(e,s,n)}function Bk(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,o=Of(n);return{t:Us(i.top,o.top,0,s),r:Us(i.right,o.right,0,e),b:Us(i.bottom,o.bottom,0,s),l:Us(i.left,o.left,0,e)}}function Vk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=cn(i),r=Math.min(e,s),a=t.borderSkipped,l=n||ye(i);return{topLeft:Us(!l||a.top||a.left,o.topLeft,0,r),topRight:Us(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Us(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Us(!l||a.bottom||a.right,o.bottomRight,0,r)}}function $k(t){const e=ip(t),s=e.right-e.left,n=e.bottom-e.top,i=Bk(t,s/2,n/2),o=Vk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function aa(t,e,s,n){const i=e===null,o=s===null,a=t&&!(i&&o)&&ip(t,n);return a&&(i||bs(e,a.left,a.right))&&(o||bs(s,a.top,a.bottom))}function Hk(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function zk(t,e){t.rect(e.x,e.y,e.w,e.h)}function la(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,o=(t.x+t.w!==s.x+s.w?e:0)-n,r=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+o,h:t.h+r,radius:t.radius}}class $o extends Ms{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=$k(this),a=Hk(r.radius)?qi:zk;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,la(r,s,o)),e.clip(),a(e,la(o,-s,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,la(o,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return aa(this,e,s,n)}inXRange(e,s){return aa(this,e,null,s)}inYRange(e,s){return aa(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}H($o,"id","bar"),H($o,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H($o,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Wk=Object.freeze({__proto__:null,ArcElement:hi,BarElement:$o,LineElement:Ns,PointElement:Vo});const Ua=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Kd=Ua.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function op(t){return Ua[t%Ua.length]}function rp(t){return Kd[t%Kd.length]}function qk(t,e){return t.borderColor=op(e),t.backgroundColor=rp(e),++e}function Kk(t,e){return t.backgroundColor=t.data.map(()=>op(e++)),e}function Gk(t,e){return t.backgroundColor=t.data.map(()=>rp(e++)),e}function Yk(t){let e=0;return(s,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof an?e=Kk(s,e):i instanceof Ei?e=Gk(s,e):i&&(e=qk(s,e))}}function Gd(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Jk(t){return t&&(t.borderColor||t.backgroundColor)}function Xk(){return Be.borderColor!=="rgba(0,0,0,0.1)"||Be.backgroundColor!=="rgba(0,0,0,0.1)"}var Qk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:o}=i,r=Gd(n)||Jk(i)||o&&Gd(o)||Xk();if(!s.forceOverride&&r)return;const a=Yk(t);n.forEach(a)}};function Zk(t,e,s,n,i){const o=i.samples||n;if(o>=s)return t.slice(e,e+s);const r=[],a=(s-2)/(o-2);let l=0;const c=e+s-1;let u=e,h,f,p,m,g;for(r[l++]=t[u],h=0;h<o-2;h++){let y=0,w=0,k;const A=Math.floor((h+1)*a)+1+e,S=Math.min(Math.floor((h+2)*a)+1,s)+e,P=S-A;for(k=A;k<S;k++)y+=t[k].x,w+=t[k].y;y/=P,w/=P;const N=Math.floor(h*a)+1+e,F=Math.min(Math.floor((h+1)*a)+1,s)+e,{x:$,y:Q}=t[u];for(p=m=-1,k=N;k<F;k++)m=.5*Math.abs(($-y)*(t[k].y-Q)-($-t[k].x)*(w-Q)),m>p&&(p=m,f=t[k],g=k);r[l++]=f,u=g}return r[l++]=t[c],r}function e2(t,e,s,n){let i=0,o=0,r,a,l,c,u,h,f,p,m,g;const y=[],w=e+s-1,k=t[e].x,S=t[w].x-k;for(r=e;r<e+s;++r){a=t[r],l=(a.x-k)/S*n,c=a.y;const P=l|0;if(P===u)c<m?(m=c,h=r):c>g&&(g=c,f=r),i=(o*i+a.x)/++o;else{const N=r-1;if(!ge(h)&&!ge(f)){const F=Math.min(h,f),$=Math.max(h,f);F!==p&&F!==N&&y.push({...t[F],x:i}),$!==p&&$!==N&&y.push({...t[$],x:i})}r>0&&N!==p&&y.push(t[N]),y.push(a),u=P,o=0,m=g=c,h=f=p=r}}return y}function ap(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Yd(t){t.data.datasets.forEach(e=>{ap(e)})}function t2(t,e){const s=e.length;let n=0,i;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Qe(ys(e,o.axis,r).lo,0,s-1)),c?i=Qe(ys(e,o.axis,a).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var s2={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){Yd(t);return}const n=t.width;t.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=t.getDatasetMeta(o),c=r||i.data;if(di([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:f}=t2(l,c);const p=s.threshold||4*n;if(f<=p){ap(i);return}ge(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(s.algorithm){case"lttb":m=Zk(c,h,f,n,s);break;case"min-max":m=e2(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=m})},destroy(t){Yd(t)}};function n2(t,e,s){const n=t.segments,i=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Fl(l,c,i);const u=Ba(s,i[l],i[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=$f(e,u);for(const f of h){const p=Ba(s,o[f.start],o[f.end],f.loop),m=Vf(a,i,p);for(const g of m)r.push({source:g,target:f,start:{[s]:Jd(u,p,"start",Math.max)},end:{[s]:Jd(u,p,"end",Math.min)}})}}return r}function Ba(t,e,s,n){if(n)return;let i=e[t],o=s[t];return t==="angle"&&(i=Et(i),o=Et(o)),{property:t,start:i,end:o}}function i2(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=Fl(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function Fl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Jd(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function lp(t,e){let s=[],n=!1;return Fe(t)?(n=!0,s=t):s=i2(t,e),s.length?new Ns({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Xd(t){return t&&t.fill!==!1}function o2(t,e,s){let i=t[e].fill;const o=[e];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!$e(i))return i;if(r=t[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function r2(t,e,s){const n=d2(t);if(ye(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return $e(i)&&Math.floor(i)===i?a2(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function a2(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function l2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ye(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function c2(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ye(t)?n=t.value:n=e.getBaseValue(),n}function d2(t){const e=t.options,s=e.fill;let n=pe(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function u2(t){const{scale:e,index:s,line:n}=t,i=[],o=n.segments,r=n.points,a=h2(e,s);a.push(lp({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)f2(i,r[u],a)}return new Ns({points:i,options:{}})}function h2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===e)break;o.hidden||s.unshift(o.dataset)}return s}function f2(t,e,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=p2(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function p2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][s],f=r[u.end][s];if(bs(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:n}}class cp{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:je},e.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,o=e.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function m2(t){const{chart:e,fill:s,line:n}=t;if($e(s))return g2(e,s);if(s==="stack")return u2(t);if(s==="shape")return!0;const i=b2(t);return i instanceof cp?i:lp(i,n)}function g2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function b2(t){return(t.scale||{}).getPointPositionForValue?x2(t):y2(t)}function y2(t){const{scale:e={},fill:s}=t,n=l2(s,e);if($e(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function x2(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,r=c2(s,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new cp({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,r));return a}function ca(t,e,s){const n=m2(e),{chart:i,index:o,line:r,scale:a,axis:l}=e,c=r.options,u=c.fill,h=c.backgroundColor,{above:f=h,below:p=h}=u||{},m=i.getDatasetMeta(o),g=Hf(i,m);n&&r.points.length&&(Pr(t,s),v2(t,{line:r,target:n,above:f,below:p,area:s,scale:a,axis:l,clip:g}),Er(t))}function v2(t,e){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=e,c=s._loop?"angle":e.axis;t.save(),c==="x"&&o!==i&&(Qd(t,n,r.top),Zd(t,{line:s,target:n,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Qd(t,n,r.bottom)),Zd(t,{line:s,target:n,color:o,scale:a,property:c,clip:l}),t.restore()}function Qd(t,e,s){const{segments:n,points:i}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],h=i[Fl(l,c,i)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Zd(t,e){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=e,l=n2(s,n,i);for(const{source:c,target:u,start:h,end:f}of l){const{style:{backgroundColor:p=o}={}}=c,m=n!==!0;t.save(),t.fillStyle=p,_2(t,r,a,m&&Ba(i,h,f)),t.beginPath();const g=!!s.pathSegment(t,c);let y;if(m){g?t.closePath():eu(t,n,f,i);const w=!!n.pathSegment(t,u,{move:g,reverse:!0});y=g&&w,y||eu(t,n,h,i)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function _2(t,e,s,n){const i=e.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,u,h;o==="x"?(l=r,c=i.top,u=a,h=i.bottom):(l=i.left,c=r,u=i.right,h=a),t.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),h=Math.min(h,s.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function eu(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var w2={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Ns&&(l={visible:t.isDatasetVisible(r),index:r,fill:r2(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=o2(i,r,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&ca(t.ctx,a,o))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Xd(o)&&ca(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Xd(n)||s.drawTime!=="beforeDatasetDraw"||ca(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tu=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},k2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class su extends Ms{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Re(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Je(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=tu(n,o);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,g)=>{const y=n+s/2+o.measureText(m.text).width;(g===0||c[c.length-1]+y+2*a>r)&&(h+=u,c[c.length-(g>0?0:1)]=0,p+=u,f++),l[g]={left:0,top:p,row:f,width:y,height:i},c[c.length-1]+=y+a}),h}_fitCols(e,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let h=a,f=0,p=0,m=0,g=0;return this.legendItems.forEach((y,w)=>{const{itemWidth:k,itemHeight:A}=S2(n,s,o,y,i);w>0&&p+A+2*a>u&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,g++,f=p=0),l[w]={left:m,top:p,col:g,width:k,height:A},f=Math.max(f,k),p+=A+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=Ln(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=rt(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=rt(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=rt(n,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=rt(n,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pr(e,this),this._draw(),Er(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=e,a=Be.color,l=Ln(e.rtl,this.left,this.width),c=Je(r.font),{padding:u}=r,h=c.size,f=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:y}=tu(r,h),w=function(N,F,$){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const Q=pe($.lineWidth,1);if(i.fillStyle=pe($.fillStyle,a),i.lineCap=pe($.lineCap,"butt"),i.lineDashOffset=pe($.lineDashOffset,0),i.lineJoin=pe($.lineJoin,"miter"),i.lineWidth=Q,i.strokeStyle=pe($.strokeStyle,a),i.setLineDash(pe($.lineDash,[])),r.usePointStyle){const oe={radius:g*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:Q},ae=l.xPlus(N,m/2),he=F+f;Tf(i,oe,ae,he,r.pointStyleWidth&&m)}else{const oe=F+Math.max((h-g)/2,0),ae=l.leftForLtr(N,m),he=cn($.borderRadius);i.beginPath(),Object.values(he).some(Pe=>Pe!==0)?qi(i,{x:ae,y:oe,w:m,h:g,radius:he}):i.rect(ae,oe,m,g),i.fill(),Q!==0&&i.stroke()}i.restore()},k=function(N,F,$){hn(i,$.text,N,F+y/2,c,{strikethrough:$.hidden,textAlign:l.textAlign($.textAlign)})},A=this.isHorizontal(),S=this._computeTitleHeight();A?p={x:rt(o,this.left+u,this.right-n[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:rt(o,this.top+S+u,this.bottom-s[0].height),line:0},Nf(this.ctx,e.textDirection);const P=y+u;this.legendItems.forEach((N,F)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const $=i.measureText(N.text).width,Q=l.textAlign(N.textAlign||(N.textAlign=r.textAlign)),oe=m+f+$;let ae=p.x,he=p.y;l.setWidth(this.width),A?F>0&&ae+oe+u>this.right&&(he=p.y+=P,p.line++,ae=p.x=rt(o,this.left+u,this.right-n[p.line])):F>0&&he+P>this.bottom&&(ae=p.x=ae+s[p.line].width+u,p.line++,he=p.y=rt(o,this.top+S+u,this.bottom-s[p.line].height));const Pe=l.x(ae);if(w(Pe,he,N),ae=z_(Q,ae+m+f,A?ae+oe:this.right,e.rtl),k(l.x(ae),he,N),A)p.x+=oe+u;else if(typeof N.text!="string"){const Ye=c.lineHeight;p.y+=dp(N,Ye)+u}else p.y+=P}),Uf(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Je(s.font),i=ut(s.padding);if(!s.display)return;const o=Ln(e.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=rt(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);u=c+rt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=rt(a,h,h+f);r.textAlign=o.textAlign(Al(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,hn(r,s.text,p,u,n)}_computeTitleHeight(){const e=this.options.title,s=Je(e.font),n=ut(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,o;if(bs(e,this.left,this.right)&&bs(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],bs(e,i.left,i.left+i.width)&&bs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!A2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=k2(i,n);i&&!o&&Re(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!o&&Re(s.onHover,[e,n,this],this)}else n&&Re(s.onClick,[e,n,this],this)}}function S2(t,e,s,n,i){const o=C2(n,t,e,s),r=M2(i,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function C2(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),e+s.size/2+n.measureText(i).width}function M2(t,e,s){let n=t;return typeof e.text!="string"&&(n=dp(e,s)),n}function dp(t,e){const s=t.text?t.text.length:0;return e*s}function A2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var P2={id:"legend",_element:su,start(t,e,s){const n=t.legend=new su({ctx:t.ctx,options:s,chart:t});ct.configure(t,n,s),ct.addBox(t,n)},stop(t){ct.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;ct.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=ut(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class jl extends Ms{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=Fe(n.text)?n.text.length:1;this._padding=ut(n.padding);const o=i*Je(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=rt(a,n,o),h=s+e,c=o-n):(r.position==="left"?(u=n+e,h=rt(a,i,s),l=Ne*-.5):(u=o-e,h=rt(a,s,i),l=Ne*.5),c=i-s),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Je(s.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);hn(e,s.text,0,0,n,{color:s.color,maxWidth:l,rotation:c,textAlign:Al(s.align),textBaseline:"middle",translation:[r,a]})}}function E2(t,e){const s=new jl({ctx:t.ctx,options:e,chart:t});ct.configure(t,s,e),ct.addBox(t,s),t.titleBlock=s}var T2={id:"title",_element:jl,start(t,e,s){E2(t,s)},stop(t){const e=t.titleBlock;ct.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;ct.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const So=new WeakMap;var O2={id:"subtitle",start(t,e,s){const n=new jl({ctx:t.ctx,options:s,chart:t});ct.configure(t,n,s),ct.addBox(t,n),So.set(t,n)},stop(t){ct.removeBox(t,So.get(t)),So.delete(t)},beforeUpdate(t,e,s){const n=So.get(t);ct.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fi={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,o=0;for(e=0,s=t.length;e<s;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Da(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Qt(t,e){return e&&(Fe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function us(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function D2(t,e){const{element:s,datasetIndex:n,index:i}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:t,label:r,parsed:o.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function nu(t,e){const s=t.chart.ctx,{body:n,footer:i,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=Je(e.bodyFont),c=Je(e.titleFont),u=Je(e.footerFont),h=o.length,f=i.length,p=n.length,m=ut(e.padding);let g=m.height,y=0,w=n.reduce((S,P)=>S+P.before.length+P.lines.length+P.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*S+(w-p)*l.lineHeight+(w-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let k=0;const A=function(S){y=Math.max(y,s.measureText(S).width+k)};return s.save(),s.font=c.string,Ae(t.title,A),s.font=l.string,Ae(t.beforeBody.concat(t.afterBody),A),k=e.displayColors?r+2+e.boxPadding:0,Ae(n,S=>{Ae(S.before,A),Ae(S.lines,A),Ae(S.after,A)}),k=0,s.font=u.string,Ae(t.footer,A),s.restore(),y+=m.width,{width:y,height:g}}function I2(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function R2(t,e,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(t==="left"&&i+o+r>e.width||t==="right"&&i-o-r<0)return!0}function L2(t,e,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),R2(c,t,e,s)&&(c="center"),c}function iu(t,e,s){const n=s.yAlign||e.yAlign||I2(t,s);return{xAlign:s.xAlign||e.xAlign||L2(t,e,s,n),yAlign:n}}function F2(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function j2(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function ou(t,e,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=cn(r);let m=F2(e,a);const g=j2(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+i:a==="right"&&(m+=Math.max(h,p)+i),{x:Qe(m,0,n.width-e.width),y:Qe(g,0,n.height-e.height)}}function Co(t,e,s){const n=ut(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function ru(t){return Qt([],us(t))}function N2(t,e,s){return Ks(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function au(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const up={beforeTitle:ls,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ge(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function xt(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?up[e].call(s,n):i}class Va extends Ms{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new zf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=N2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=xt(n,"beforeTitle",this,e),o=xt(n,"title",this,e),r=xt(n,"afterTitle",this,e);let a=[];return a=Qt(a,us(i)),a=Qt(a,us(o)),a=Qt(a,us(r)),a}getBeforeBody(e,s){return ru(xt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return Ae(e,o=>{const r={before:[],lines:[],after:[]},a=au(n,o);Qt(r.before,us(xt(a,"beforeLabel",this,o))),Qt(r.lines,xt(a,"label",this,o)),Qt(r.after,us(xt(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(e,s){return ru(xt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=xt(n,"beforeFooter",this,e),o=xt(n,"footer",this,e),r=xt(n,"afterFooter",this,e);let a=[];return a=Qt(a,us(i)),a=Qt(a,us(o)),a=Qt(a,us(r)),a}_createItems(e){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(D2(this.chart,s[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,n))),Ae(a,u=>{const h=au(e.callbacks,u);i.push(xt(h,"labelColor",this,u)),o.push(xt(h,"labelPointStyle",this,u)),r.push(xt(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=fi[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=nu(this,n),c=Object.assign({},a,l),u=iu(this.chart,n,c),h=ou(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const o=this.getCaretPosition(e,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=cn(a),{x:f,y:p}=e,{width:m,height:g}=s;let y,w,k,A,S,P;return o==="center"?(S=p+g/2,i==="left"?(y=f,w=y-r,A=S+r,P=S-r):(y=f+m,w=y+r,A=S-r,P=S+r),k=y):(i==="left"?w=f+Math.max(l,u)+r:i==="right"?w=f+m-Math.max(c,h)-r:w=this.caretX,o==="top"?(A=p,S=A-r,y=w-r,k=w+r):(A=p+g,S=A+r,y=w+r,k=w-r),P=A),{x1:y,x2:w,x3:k,y1:A,y2:S,y3:P}}drawTitle(e,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=Ln(n.rtl,this.x,this.width);for(e.x=Co(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=Je(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,u=Je(o.bodyFont),h=Co(this,"left",o),f=i.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=s.y+p;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=i.leftForLtr(f,c)+c/2,w=m+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Ra(e,g,y,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Ra(e,g,y,w)}else{e.lineWidth=ye(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(f,c),y=i.leftForLtr(i.xPlus(f,1),c-2),w=cn(r.borderRadius);Object.values(w).some(k=>k!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,qi(e,{x:g,y:m,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),qi(e,{x:y,y:m+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=r.backgroundColor,e.fillRect(y,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=Je(n.bodyFont);let f=h.lineHeight,p=0;const m=Ln(n.rtl,this.x,this.width),g=function($){s.fillText($,m.x(e.x+p),e.y+f/2),e.y+=f+o},y=m.textAlign(r);let w,k,A,S,P,N,F;for(s.textAlign=r,s.textBaseline="middle",s.font=h.string,e.x=Co(this,y,n),s.fillStyle=n.bodyColor,Ae(this.beforeBody,g),p=a&&y!=="right"?r==="center"?c/2+u:c+2+u:0,S=0,N=i.length;S<N;++S){for(w=i[S],k=this.labelTextColors[S],s.fillStyle=k,Ae(w.before,g),A=w.lines,a&&A.length&&(this._drawColorBox(s,e,S,m,n),f=Math.max(h.lineHeight,l)),P=0,F=A.length;P<F;++P)g(A[P]),f=h.lineHeight;Ae(w.after,g)}p=0,f=h.lineHeight,Ae(this.afterBody,g),e.y-=o}drawFooter(e,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=Ln(n.rtl,this.x,this.width);for(e.x=Co(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=Je(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=cn(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+h,l),r==="top"&&this.drawCaret(e,s,n,i),s.lineTo(a+c-f,l),s.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(e,s,n,i),s.lineTo(a+c,l+u-m),s.quadraticCurveTo(a+c,l+u,a+c-m,l+u),r==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(a+p,l+u),s.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(e,s,n,i),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=fi[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=nu(this,e),l=Object.assign({},r,this._size),c=iu(s,e,l),u=ou(e,l,c,s);(i._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=ut(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,i,s),Nf(e,s.textDirection),o.y+=r.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),Uf(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!er(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(e,o,s,n),a=this._positionChanged(r,e),l=s||!er(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,n,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,s){const{caretX:n,caretY:i,options:o}=this,r=fi[o.position].call(this,e,s);return r!==!1&&(n!==r.x||i!==r.y)}}H(Va,"positioners",fi);var U2={id:"tooltip",_element:Va,positioners:fi,afterInit(t,e,s){s&&(t.tooltip=new Va({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:up},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},B2=Object.freeze({__proto__:null,Colors:Qk,Decimation:s2,Filler:w2,Legend:P2,SubTitle:O2,Title:T2,Tooltip:U2});const V2=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function $2(t,e,s,n){const i=t.indexOf(e);if(i===-1)return V2(t,e,s,n);const o=t.lastIndexOf(e);return i!==o?s:i}const H2=(t,e)=>t===null?null:Qe(Math.round(t),0,e);function lu(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $a extends mn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:o}of s)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ge(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:$2(n,e,pe(s,e),this._addedLabels),H2(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=s;r++)i.push({value:r});return i}getLabelForValue(e){return lu.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}H($a,"id","category"),H($a,"defaults",{ticks:{callback:lu}});function z2(t,e){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=o||1,m=u-1,{min:g,max:y}=e,w=!ge(r),k=!ge(a),A=!ge(c),S=(y-g)/(h+1);let P=nd((y-g)/m/p)*p,N,F,$,Q;if(P<1e-14&&!w&&!k)return[{value:g},{value:y}];Q=Math.ceil(y/P)-Math.floor(g/P),Q>m&&(P=nd(Q*P/m/p)*p),ge(l)||(N=Math.pow(10,l),P=Math.ceil(P*N)/N),i==="ticks"?(F=Math.floor(g/P)*P,$=Math.ceil(y/P)*P):(F=g,$=y),w&&k&&o&&j_((a-r)/o,P/1e3)?(Q=Math.round(Math.min((a-r)/P,u)),P=(a-r)/Q,F=r,$=a):A?(F=w?r:F,$=k?a:$,Q=c-1,P=($-F)/Q):(Q=($-F)/P,Mi(Q,Math.round(Q),P/1e3)?Q=Math.round(Q):Q=Math.ceil(Q));const oe=Math.max(id(P),id(F));N=Math.pow(10,ge(l)?oe:l),F=Math.round(F*N)/N,$=Math.round($*N)/N;let ae=0;for(w&&(f&&F!==r?(s.push({value:r}),F<r&&ae++,Mi(Math.round((F+ae*P)*N)/N,r,cu(r,S,t))&&ae++):F<r&&ae++);ae<Q;++ae){const he=Math.round((F+ae*P)*N)/N;if(k&&he>a)break;s.push({value:he})}return k&&f&&$!==a?s.length&&Mi(s[s.length-1].value,a,cu(a,S,t))?s[s.length-1].value=a:s.push({value:a}):(!k||$===a)&&s.push({value:$}),s}function cu(t,e,{horizontal:s,minRotation:n}){const i=Ut(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class ar extends mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(e){const l=ns(i),c=ns(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(i-l)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=z2(i,o);return e.bounds==="ticks"&&_f(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return no(e,this.chart.options.locale,this.options.ticks.format)}}class Ha extends ar{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=$e(e)?e:0,this.max=$e(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Ut(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(Ha,"id","linear"),H(Ha,"defaults",{ticks:{callback:Ar.formatters.numeric}});const Gi=t=>Math.floor(js(t)),en=(t,e)=>Math.pow(10,Gi(t)+e);function du(t){return t/Math.pow(10,Gi(t))===1}function uu(t,e,s){const n=Math.pow(10,s),i=Math.floor(t/n);return Math.ceil(e/n)-i}function W2(t,e){const s=e-t;let n=Gi(s);for(;uu(t,e,n)>10;)n++;for(;uu(t,e,n)<10;)n--;return Math.min(n,Gi(t))}function q2(t,{min:e,max:s}){e=Pt(t.min,e);const n=[],i=Gi(e);let o=W2(e,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),f=Pt(t.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<s;)n.push({value:f,major:du(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;const p=Pt(t.max,f);return n.push({value:p,major:du(p),significand:h}),n}class za extends mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=ar.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return $e(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=$e(e)?Math.max(0,e):null,this.max=$e(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$e(this._userMin)&&(this.min=e===en(this.min,0)?en(this.min,-1):en(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const o=a=>n=e?n:a,r=a=>i=s?i:a;n===i&&(n<=0?(o(1),r(10)):(o(en(n,-1)),r(en(i,1)))),n<=0&&o(en(i,-1)),i<=0&&r(en(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=q2(s,this);return e.bounds==="ticks"&&_f(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":no(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=js(e),this._valueRange=js(this.max)-js(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(js(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}H(za,"id","logarithmic"),H(za,"defaults",{ticks:{callback:Ar.formatters.logarithmic,major:{enabled:!0}}});function Wa(t){const e=t.ticks;if(e.display&&t.display){const s=ut(e.backdropPadding);return pe(e.font&&e.font.size,Be.font.size)+s.height}return 0}function K2(t,e,s){return s=Fe(s)?s:[s],{w:e1(t,e.string,s),h:s.length*e.lineHeight}}function hu(t,e,s,n,i){return t===n||t===i?{start:e-s/2,end:e+s/2}:t<n||t>i?{start:e-s,end:e}:{start:e,end:e+s}}function G2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],i=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?Ne/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),h=Je(c.font),f=K2(t.ctx,h,t._pointLabels[l]);n[l]=f;const p=Et(t.getIndexAngle(l)+a),m=Math.round(Cl(p)),g=hu(m,u.x,f.w,0,180),y=hu(m,u.y,f.h,90,270);Y2(s,e,p,g,y)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=Q2(t,n,i)}function Y2(t,e,s,n,i){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/r,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function J2(t,e,s){const n=t.drawingArea,{extra:i,additionalAngle:o,padding:r,size:a}=s,l=t.getPointPosition(e,n+i+r,o),c=Math.round(Cl(Et(l.angle+We))),u=tS(l.y,a.h,c),h=Z2(c),f=eS(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function X2(t,e){if(!e)return!0;const{left:s,top:n,right:i,bottom:o}=t;return!(xs({x:s,y:n},e)||xs({x:s,y:o},e)||xs({x:i,y:n},e)||xs({x:i,y:o},e))}function Q2(t,e,s){const n=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Wa(o)/2,additionalAngle:r?Ne/i:0};let c;for(let u=0;u<i;u++){l.padding=s[u],l.size=e[u];const h=J2(t,u,l);n.push(h),a==="auto"&&(h.visible=X2(h,c),h.visible&&(c=h))}return n}function Z2(t){return t===0||t===180?"center":t<180?"left":"right"}function eS(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function tS(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function sS(t,e,s){const{left:n,top:i,right:o,bottom:r}=s,{backdropColor:a}=e;if(!ge(a)){const l=cn(e.borderRadius),c=ut(e.backdropPadding);t.fillStyle=a;const u=n-c.left,h=i-c.top,f=o-n+c.width,p=r-i+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),qi(t,{x:u,y:h,w:f,h:p,radius:l}),t.fill()):t.fillRect(u,h,f,p)}}function nS(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const o=t._pointLabelItems[i];if(!o.visible)continue;const r=n.setContext(t.getPointLabelContext(i));sS(s,r,o);const a=Je(r.font),{x:l,y:c,textAlign:u}=o;hn(s,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:r.color,textAlign:u,textBaseline:"middle"})}}function hp(t,e,s,n){const{ctx:i}=t;if(s)i.arc(t.xCenter,t.yCenter,e,0,je);else{let o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),i.lineTo(o.x,o.y)}}function iS(t,e,s,n,i){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),hp(t,s,r,n),o.closePath(),o.stroke(),o.restore())}function oS(t,e,s){return Ks(t,{label:s,index:e,type:"pointLabel"})}class pi extends ar{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ut(Wa(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=$e(e)&&!isNaN(e)?e:0,this.max=$e(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wa(this.options))}generateTickLabels(e){ar.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const i=Re(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?G2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,i){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,i))}getIndexAngle(e){const s=je/(this._pointLabels.length||1),n=this.options.startAngle||0;return Et(e*s+Ut(n))}getDistanceFromCenterForValue(e){if(ge(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ge(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return oS(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const i=this.getIndexAngle(e)-We+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:i,bottom:o}=this._pointLabelItems[e];return{left:s,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),hp(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:i,border:o}=s,r=this._pointLabels.length;let a,l,c;if(s.pointLabels.display&&nS(this,r),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=i.setContext(f),m=o.setContext(f);iS(this,p,l,r,m)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!s.reverse)return;const c=n.setContext(this.getContext(l)),u=Je(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=ut(c.backdropPadding);e.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}hn(e,a.label,0,-o,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}H(pi,"id","radialLinear"),H(pi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ar.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),H(pi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(pi,"descriptors",{angleLines:{_fallback:"grid"}});const Or={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wt=Object.keys(Or);function fu(t,e){return t-e}function pu(t,e){if(ge(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),$e(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&($n(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function mu(t,e,s,n){const i=wt.length;for(let o=wt.indexOf(t);o<i-1;++o){const r=Or[wt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-e)/(a*r.size))<=n)return wt[o]}return wt[i-1]}function rS(t,e,s,n,i){for(let o=wt.length-1;o>=wt.indexOf(s);o--){const r=wt[o];if(Or[r].common&&t._adapter.diff(i,n,r)>=e-1)return r}return wt[s?wt.indexOf(s):0]}function aS(t){for(let e=wt.indexOf(t)+1,s=wt.length;e<s;++e)if(Or[wt[e]].common)return wt[e]}function gu(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=Ml(s,e),o=s[n]>=e?s[n]:s[i];t[o]=!0}}function lS(t,e,s,n){const i=t._adapter,o=+i.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(e[l].major=!0);return e}function bu(t,e,s){const n=[],i={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:lS(t,n,i,s)}class Yi extends mn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new bw._date(e.adapters.date);i.init(s),Ci(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:pu(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=$e(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=$e(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=V_(i,o,r);return this._unit=s.unit||(n.autoSkip?mu(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):rS(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:aS(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),bu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;s=Qe(s,0,r),n=Qe(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||mu(o.minUnit,s,n,this._getLabelCapacity(s)),a=pe(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=$n(l)||l===!0,u={};let h=s,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+e.add(f,a,r),p++)gu(u,f,m);return(f===n||i.bounds==="ticks"||p===1)&&gu(u,f,m),Object.keys(u).sort(fu).map(g=>+g)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(e,r)}_tickFormatFunction(e,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return Re(r,[e,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=n[s],p=c&&h&&f&&f.major;return this._adapter.format(e,i||(p?h:u))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Ut(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,bu(this,[e],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(pu(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Sf(e.sort(fu))}}H(Yi,"id","time"),H(Yi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Mo(t,e,s){let n=0,i=t.length-1,o,r,a,l;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=ys(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=ys(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[i]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class qa extends Yi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Mo(s,this.min),this._tableRange=Mo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)u=i[r+1],l=i[r-1],c=i[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Mo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Mo(this._table,n*this._tableRange+this._minPos,!0)}}H(qa,"id","timeseries"),H(qa,"defaults",Yi.defaults);var cS=Object.freeze({__proto__:null,CategoryScale:$a,LinearScale:Ha,LogarithmicScale:za,RadialLinearScale:pi,TimeScale:Yi,TimeSeriesScale:qa});const dS=[gw,Wk,B2,cS];ss.register(...dS);async function fp(){return await(await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")).json()}async function pp(t){return t?await(await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${t}/municipios?orderBy=nome`)).json():[]}async function mp(t){const e=t.replace(/\D/g,"");if(e.length!==8)return null;try{const s=await fetch(`https://viacep.com.br/ws/${e}/json/`);if(!s.ok)return null;const n=await s.json();return n.erro?null:{street:n.logradouro,complement:n.complemento,neighborhood:n.bairro,city:n.localidade,state:n.uf}}catch{return null}}const uS={name:"Dashboard",components:{Sidebar:nt,HeaderUser:it,Modal:os,WeekView:pf,AppointmentDetails:mf},data(){return{userId:null,stats:{week:0,month:0,clients:0,newClients:0},upcomingAppointments:[],clients:[],services:[],rooms:[],topClients:[],sidebarOpen:window.innerWidth>=768,showClientModal:!1,showAppointmentModal:!1,editingId:null,showDetailsModal:!1,weekChart:null,weekCounts:[0,0,0,0,0,0,0],states:[],cities:[],clientForm:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},appointmentForm:{date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"},selectedAppointment:null}},methods:{phoneMask:Yn,cpfMask:vl,cepMask:df,async fetchStatesList(){this.states=await fp()},async fetchCitiesList(){this.cities=await pp(this.clientForm.stateId)},async fillAddressByCep(){const t=await mp(this.clientForm.cep);if(!t)return;this.clientForm.street=t.street||"",this.clientForm.complement=t.complement||"",this.clientForm.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.clientForm.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(n=>n.nome.toLowerCase()===t.city.toLowerCase());s&&(this.clientForm.cityId=s.id)}},async openClientModal(){await this.fetchStatesList(),this.clientForm.stateId&&await this.fetchCitiesList(),this.showClientModal=!0},async fetchStats(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const n=new Date(t);n.setDate(t.getDate()+(6-e)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],r=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);a.setHours(23,59,59,999);const l=r.toISOString().split("T")[0],c=a.toISOString().split("T")[0],{data:u}=await T.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o);this.stats.week=u?u.length:0;const h=[0,0,0,0,0,0,0];u&&u.forEach(m=>{const g=new Date(m.date);h[g.getDay()]++}),this.weekCounts=h;const{data:f}=await T.from("appointments").select().eq("user_id",this.userId).gte("date",l).lte("date",c);this.stats.month=f?f.length:0;const{data:p}=await T.from("clients").select().eq("user_id",this.userId);p&&(this.stats.clients=p.length,this.clients=p,this.stats.newClients=p.filter(m=>{const g=new Date(m.created_at);return g>=r&&g<=a}).length),await this.fetchTopClients(),this.$nextTick(()=>this.renderWeekChart())},async fetchUpcomingAppointments(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const n=new Date(t);n.setDate(t.getDate()+(6-e)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],{data:r}=await T.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o).order("date",{ascending:!0}).order("time",{ascending:!0});this.upcomingAppointments=r||[]},async fetchTopClients(){const{data:t}=await T.from("appointments").select("client_id").eq("user_id",this.userId),e={};t&&t.forEach(n=>{e[n.client_id]=(e[n.client_id]||0)+1});const s=Object.entries(e).sort((n,i)=>i[1]-n[1]).slice(0,5);this.topClients=s.map(([n,i])=>({id:n,count:i,name:this.getClientName(n)}))},renderWeekChart(){const t=this.$refs.weekChartCanvas.getContext("2d");this.weekChart&&this.weekChart.destroy(),this.weekChart=new ss(t,{type:"bar",data:{labels:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],datasets:[{label:"Agendamentos",data:this.weekCounts,backgroundColor:"#6366f1",borderColor:"#4f46e5",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#e5e7eb"}}}}})},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){if(!confirm(e))return;const{error:n}=await T.from("appointments").delete().eq("id",t);n?alert("Erro ao excluir agendamento: "+n.message):(this.upcomingAppointments=this.upcomingAppointments.filter(i=>i.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments())},async handleAddClient(){if(this.clientForm.email&&!Wt(this.clientForm.email)){alert("E-mail inválido");return}const{data:t,error:e}=await T.from("clients").insert({name:this.clientForm.name,email:this.clientForm.email,phone:this.clientForm.phone,birthdate:this.clientForm.birthdate,cpf:this.clientForm.cpf,cep:this.clientForm.cep,street:this.clientForm.street,number:this.clientForm.number,complement:this.clientForm.complement,neighborhood:this.clientForm.neighborhood,state_id:this.clientForm.stateId,city_id:this.clientForm.cityId,user_id:this.userId}).select().single();if(e)alert("Erro ao salvar cliente: "+e.message);else{this.clients.push(t),this.clientForm={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.stats.clients+=1;const s=new Date(t.created_at),n=new Date(s.getFullYear(),s.getMonth(),1),i=new Date(s.getFullYear(),s.getMonth()+1,0);i.setHours(23,59,59,999),s>=n&&s<=i&&(this.stats.newClients+=1),await this.fetchTopClients(),alert("Cliente cadastrado!")}},openAppointmentModal(t){t?(this.editingId=t.id,this.appointmentForm={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,duration:t.duration,description:t.description,status:t.status||"confirmed"}):(this.editingId=null,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"}),this.showAppointmentModal=!0},closeAppointmentModal(){this.showAppointmentModal=!1,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openAppointmentModal(this.selectedAppointment),this.closeDetails())},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){this.selectedAppointment&&(await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails())},markNoShow(){this.selectedAppointment&&T.from("appointments").update({status:"no_show"}).eq("id",this.selectedAppointment.id).select().single().then(({data:t,error:e})=>{if(e){alert("Erro ao marcar falta: "+e.message);return}Object.assign(this.selectedAppointment,t);const s=this.upcomingAppointments.findIndex(n=>n.id===t.id);s!==-1&&(this.upcomingAppointments[s]=t),alert("Falta registrada para este atendimento.")})},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),n=`Olá ${e.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${ze(t.date)} - Hora: ${gt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Zo(e.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},async handleAddAppointment(){if(this.editingId){const{data:t,error:e}=await T.from("appointments").update({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,status:this.appointmentForm.status}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message);else{const s=this.upcomingAppointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.upcomingAppointments[s]=t),this.closeAppointmentModal(),await this.fetchStats(),await this.fetchUpcomingAppointments()}}else{const{data:t,error:e}=await T.from("appointments").insert({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,user_id:this.userId,status:this.appointmentForm.status}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{this.upcomingAppointments.push(t),this.closeAppointmentModal(),this.stats.week+=1,this.stats.month+=1;const s=new Date(t.date);this.weekCounts[s.getDay()]++,await this.fetchTopClients(),this.renderWeekChart()}}}},watch:{"appointmentForm.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&this.appointmentForm.duration===""&&(this.appointmentForm.duration=e.duration)},"clientForm.stateId"(){this.fetchCitiesList()},"clientForm.cep"(t){t.replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchStats(),await this.fetchUpcomingAppointments();const{data:e}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);e&&(this.services=e);const{data:s}=await T.from("rooms").select().eq("user_id",this.userId).eq("active",!0);s&&(this.rooms=s),await this.fetchStatesList()}},hS={class:"min-h-screen flex bg-gray-50 relative"},fS={class:"flex-1 p-4 md:p-8 space-y-8"},pS={key:0,class:"flex items-center mb-4"},mS={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},gS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},bS={class:"text-2xl font-bold"},yS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},xS={class:"text-2xl font-bold"},vS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},_S={class:"text-2xl font-bold"},wS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},kS={class:"text-2xl font-bold"},SS={class:"bg-white p-6 rounded-lg shadow-lg h-64"},CS={ref:"weekChartCanvas",class:"w-full h-full"},MS={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},AS={class:"md:col-span-8"},PS={class:"flex items-center justify-between mb-4"},ES={class:"md:col-span-4 space-y-4"},TS={class:"bg-white p-4 rounded-lg shadow"},OS={class:"overflow-x-auto"},DS={class:"min-w-full text-left"},IS={class:"px-4 py-2"},RS={class:"px-4 py-2 text-right"},LS={key:0},FS=["value"],jS=["value"],NS={class:"flex justify-end space-x-2"},US={class:"text-lg font-semibold mb-4"},BS=["value"],VS=["value"],$S={class:"flex justify-end space-x-2"},HS={class:"mt-4"},zS={class:"flex flex-wrap justify-start gap-2"},WS={class:"mt-4"},qS={class:"flex flex-wrap justify-start gap-2"};function KS(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("WeekView"),c=V("Modal"),u=V("AppointmentDetails");return b(),v("div",hS,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=h=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",fS,[i.sidebarOpen?L("",!0):(b(),v("div",pS,[d("button",{onClick:e[1]||(e[1]=h=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[37]||(e[37]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Dashboard"}),d("section",mS,[d("div",gS,[e[38]||(e[38]=d("p",{class:"text-sm text-gray-500"},"Agendamentos na semana",-1)),d("p",bS,C(i.stats.week),1)]),d("div",yS,[e[39]||(e[39]=d("p",{class:"text-sm text-gray-500"},"Agendamentos no mês",-1)),d("p",xS,C(i.stats.month),1)]),d("div",vS,[e[40]||(e[40]=d("p",{class:"text-sm text-gray-500"},"Clientes cadastrados",-1)),d("p",_S,C(i.stats.clients),1)]),d("div",wS,[e[41]||(e[41]=d("p",{class:"text-sm text-gray-500"},"Novos clientes no mês",-1)),d("p",kS,C(i.stats.newClients),1)])]),d("section",SS,[e[42]||(e[42]=d("h3",{class:"text-lg font-medium mb-4"},"Agendamentos na semana",-1)),d("canvas",CS,null,512)]),d("section",MS,[d("div",AS,[d("div",PS,[e[43]||(e[43]=d("h3",{class:"text-lg font-medium"},"Agenda da Semana",-1)),d("button",{onClick:e[2]||(e[2]=h=>o.openAppointmentModal()),class:"btn"},"Novo Agendamento")]),O(l,{appointments:i.upcomingAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])]),d("div",ES,[d("button",{onClick:e[3]||(e[3]=(...h)=>o.openClientModal&&o.openClientModal(...h)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},"Novo Cliente"),d("div",TS,[e[46]||(e[46]=d("h4",{class:"font-medium mb-2"},"Clientes com mais agendamentos",-1)),d("div",OS,[d("table",DS,[e[45]||(e[45]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),d("th",{class:"px-4 py-2 font-medium text-gray-700 text-right"},"Agendamentos")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.topClients,h=>(b(),v("tr",{key:h.id,class:"border-b last:border-b-0"},[d("td",IS,C(h.name),1),d("td",RS,C(h.count),1)]))),128)),i.topClients.length===0?(b(),v("tr",LS,e[44]||(e[44]=[d("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):L("",!0)])])])])])]),i.showClientModal?(b(),Ze(c,{key:1,onClose:e[21]||(e[21]=h=>i.showClientModal=!1)},{default:X(()=>[e[62]||(e[62]=d("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Cliente",-1)),d("form",{onSubmit:e[20]||(e[20]=Ke((...h)=>o.handleAddClient&&o.handleAddClient(...h),["prevent"])),class:"space-y-4"},[d("div",null,[e[47]||(e[47]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=h=>i.clientForm.name=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.name]])]),d("div",null,[e[48]||(e[48]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=h=>i.clientForm.cpf=h),onInput:e[6]||(e[6]=h=>i.clientForm.cpf=o.cpfMask(i.clientForm.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.clientForm.cpf]])]),d("div",null,[e[49]||(e[49]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=h=>i.clientForm.birthdate=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.birthdate]])]),d("div",null,[e[50]||(e[50]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[8]||(e[8]=h=>i.clientForm.email=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.email]])]),d("div",null,[e[51]||(e[51]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=h=>i.clientForm.phone=h),onInput:e[10]||(e[10]=h=>i.clientForm.phone=o.phoneMask(i.clientForm.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.clientForm.phone]])]),d("div",null,[e[52]||(e[52]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=h=>i.clientForm.cep=h),onInput:e[12]||(e[12]=h=>i.clientForm.cep=o.cepMask(i.clientForm.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.clientForm.cep]])]),d("div",null,[e[53]||(e[53]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=h=>i.clientForm.street=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.street]])]),d("div",null,[e[54]||(e[54]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=h=>i.clientForm.number=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.number]])]),d("div",null,[e[55]||(e[55]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=h=>i.clientForm.complement=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.complement]])]),d("div",null,[e[56]||(e[56]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=h=>i.clientForm.neighborhood=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.clientForm.neighborhood]])]),d("div",null,[e[58]||(e[58]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(d("select",{"onUpdate:modelValue":e[17]||(e[17]=h=>i.clientForm.stateId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[57]||(e[57]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.states,h=>(b(),v("option",{key:h.id,value:h.id},C(h.nome)+" ("+C(h.sigla)+")",9,FS))),128))],512),[[Ce,i.clientForm.stateId]])]),d("div",null,[e[60]||(e[60]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(d("select",{"onUpdate:modelValue":e[18]||(e[18]=h=>i.clientForm.cityId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[59]||(e[59]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.cities,h=>(b(),v("option",{key:h.id,value:h.id},C(h.nome),9,jS))),128))],512),[[Ce,i.clientForm.cityId]])]),d("div",NS,[d("button",{type:"button",onClick:e[19]||(e[19]=h=>i.showClientModal=!1),class:"px-4 py-2 rounded border"},"Cancelar"),e[61]||(e[61]=d("button",{type:"submit",class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700"},"Salvar",-1))])],32)]),_:1,__:[62]})):L("",!0),i.showAppointmentModal?(b(),Ze(c,{key:2,onClose:o.closeAppointmentModal},{default:X(()=>[d("h3",US,C(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),d("form",{onSubmit:e[29]||(e[29]=Ke((...h)=>o.handleAddAppointment&&o.handleAddAppointment(...h),["prevent"])),class:"space-y-4"},[d("div",null,[e[63]||(e[63]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[22]||(e[22]=h=>i.appointmentForm.date=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.appointmentForm.date]])]),d("div",null,[e[64]||(e[64]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":e[23]||(e[23]=h=>i.appointmentForm.time=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.appointmentForm.time]])]),d("div",null,[e[66]||(e[66]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(d("select",{"onUpdate:modelValue":e[24]||(e[24]=h=>i.appointmentForm.clientId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[65]||(e[65]=d("option",{disabled:"",value:""},"Selecione um cliente",-1)),(b(!0),v(q,null,ne(i.clients,h=>(b(),v("option",{key:h.id,value:h.id},C(h.name),9,BS))),128))],512),[[Ce,i.appointmentForm.clientId]])]),d("div",null,[e[68]||(e[68]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(d("select",{"onUpdate:modelValue":e[25]||(e[25]=h=>i.appointmentForm.serviceId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[67]||(e[67]=d("option",{disabled:"",value:""},"Selecione um serviço",-1)),(b(!0),v(q,null,ne(i.services,h=>(b(),v("option",{key:h.id,value:h.id},C(h.name),9,VS))),128))],512),[[Ce,i.appointmentForm.serviceId]])]),d("div",null,[e[69]||(e[69]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[26]||(e[26]=h=>i.appointmentForm.duration=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.appointmentForm.duration]])]),d("div",null,[e[70]||(e[70]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(d("textarea",{"onUpdate:modelValue":e[27]||(e[27]=h=>i.appointmentForm.description=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.appointmentForm.description]])]),d("div",$S,[d("button",{type:"button",onClick:e[28]||(e[28]=(...h)=>o.closeAppointmentModal&&o.closeAppointmentModal(...h)),class:"px-4 py-2 rounded border"},"Cancelar"),e[71]||(e[71]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):L("",!0),i.showDetailsModal?(b(),Ze(c,{key:3,onClose:o.closeDetails},{default:X(()=>[O(u,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:X(()=>[d("div",HS,[e[72]||(e[72]=d("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),d("div",zS,[d("button",{onClick:e[30]||(e[30]=(...h)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...h)),class:"btn btn-success"},"Enviar confirmação"),d("button",{onClick:e[31]||(e[31]=(...h)=>o.cancelAppointment&&o.cancelAppointment(...h)),class:"btn btn-warning"},"Desmarcou"),d("button",{onClick:e[32]||(e[32]=(...h)=>o.markNoShow&&o.markNoShow(...h)),class:"btn btn-secondary"},"Faltou"),d("button",{onClick:e[33]||(e[33]=(...h)=>o.startAppointment&&o.startAppointment(...h)),class:"btn btn-primary"},"Iniciar atendimento")])]),d("div",WS,[e[73]||(e[73]=d("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),d("div",qS,[d("button",{onClick:e[34]||(e[34]=(...h)=>o.editFromDetails&&o.editFromDetails(...h)),class:"btn"},"Editar"),d("button",{onClick:e[35]||(e[35]=h=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir"),d("button",{onClick:e[36]||(e[36]=(...h)=>o.closeDetails&&o.closeDetails(...h)),class:"px-4 py-2 rounded border"},"Fechar")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):L("",!0)])])}const GS=ce(uS,[["render",KS]]),YS={name:"Configuracao",components:{Sidebar:nt,HeaderUser:it},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,slug:"",activeTab:"perfil",form:{businessName:"",description:"",areaAtuacao:"",phone:"",whatsapp:"",email:"",address:"",instagram:"",facebook:"",youtube:"",x:"",imageUrl:"",pixKey:""},agenda:{cancelLimitHours:0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:Yn,updateSlug(){this.slug=this.form.businessName.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},async handleSave(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail inválido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.slug,description:this.form.description,area_atuacao:this.form.areaAtuacao,phone:this.form.phone,whatsapp:this.form.whatsapp,email:this.form.email,address:this.form.address,instagram:this.form.instagram,facebook:this.form.facebook,youtube:this.form.youtube,x:this.form.x,image_url:this.form.imageUrl,pix_key:this.form.pixKey},{error:e}=await T.from("profiles").upsert(t,{onConflict:["id"]});alert(e?"Erro ao salvar dados: "+e.message:"Dados salvos com sucesso!")},async handleImageUpload(t){const e=t.target.files[0];if(!e)return;const s=e.name.split(".").pop(),n=`${this.userId}.${s}`,{error:i}=await T.storage.from("profile-images").upload(n,e,{upsert:!0});if(i){alert("Erro ao enviar imagem: "+i.message);return}const{data:{publicUrl:o}}=T.storage.from("profile-images").getPublicUrl(n);this.form.imageUrl=o},async handleSaveAgenda(){const t={start:null,end:null,days:[]};for(const[n,i]of Object.entries(this.agenda.dailySchedule))i.enabled&&i.start&&i.end&&(t.days.push(n),(!t.start||i.start<t.start)&&(t.start=i.start),(!t.end||i.end>t.end)&&(t.end=i.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule,cancel_limit_hours:this.agenda.cancelLimitHours},{error:s}=await T.from("profiles").upsert(e,{onConflict:["id"]});alert(s?"Erro ao salvar dados: "+s.message:"Dados salvos com sucesso!")}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e,error:s}=await T.from("profiles").select().eq("id",this.userId).single();if(e){if(this.form={businessName:e.business_name||"",description:e.description||"",areaAtuacao:e.area_atuacao||"",phone:e.phone||"",whatsapp:e.whatsapp||"",email:e.email||"",address:e.address||"",instagram:e.instagram||"",facebook:e.facebook||"",youtube:e.youtube||"",x:e.x||"",imageUrl:e.image_url||"",pixKey:e.pix_key||""},this.agenda={cancelLimitHours:e.cancel_limit_hours||0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},e.daily_schedule)Object.assign(this.agenda.dailySchedule,typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule);else{const n=e.week_days?e.week_days.split(","):[];for(const i of n)this.agenda.dailySchedule[i]={enabled:!0,start:e.start_time||"",end:e.end_time||""}}this.updateSlug()}}},JS={class:"min-h-screen flex bg-gray-100 relative"},XS={class:"flex-1 p-8"},QS={key:0,class:"flex items-center mb-4"},ZS={class:"mb-6 space-x-2"},eC={class:"text-sm text-gray-500 mt-1"},tC={class:"font-mono"},sC=["href"],nC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},iC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oC={key:0,class:"mt-2"},rC=["src"],aC={class:"mt-1 space-y-2"},lC=["onUpdate:modelValue"],cC={class:"w-20"},dC=["onUpdate:modelValue"],uC=["onUpdate:modelValue"];function hC(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("router-link");return b(),v("div",JS,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",XS,[i.sidebarOpen?L("",!0):(b(),v("div",QS,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[25]||(e[25]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Configurações"}),O(l,{to:"/onboarding",class:"text-blue-600 underline mb-4 inline-block"},{default:X(()=>e[26]||(e[26]=[te("Refazer Onboarding")])),_:1,__:[26]}),d("nav",ZS,[d("button",{onClick:e[2]||(e[2]=c=>i.activeTab="perfil"),class:Ve([i.activeTab==="perfil"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Perfil",2),d("button",{onClick:e[3]||(e[3]=c=>i.activeTab="agenda"),class:Ve([i.activeTab==="agenda"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2"])},"Agenda",2),d("button",{onClick:e[4]||(e[4]=c=>i.activeTab="financeiro"),class:Ve([i.activeTab==="financeiro"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Financeiro",2)]),i.activeTab==="perfil"?(b(),v("form",{key:1,onSubmit:e[20]||(e[20]=Ke((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[d("div",null,[e[28]||(e[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.form.businessName=c),onInput:e[6]||(e[6]=(...c)=>o.updateSlug&&o.updateSlug(...c)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.businessName]]),d("p",eC,[e[27]||(e[27]=te(" Seu link público: ")),d("span",tC,"#/"+C(i.slug),1),d("a",{href:"#/"+i.slug,target:"_blank",class:"text-blue-600 hover:underline ml-2"},"Abrir página do cliente",8,sC)])]),d("div",null,[e[29]||(e[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição do Estabelecimento",-1)),M(d("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.description]])]),d("div",null,[e[31]||(e[31]=d("label",{class:"block text-sm font-medium text-gray-700"},"Área de Atuação",-1)),M(d("select",{"onUpdate:modelValue":e[8]||(e[8]=c=>i.form.areaAtuacao=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[30]||(e[30]=[Hs('<option disabled value="">Selecione</option><option>Psicologia</option><option>Terapias Gerais</option><option>Psicopedagogia</option><option>Medicina</option><option>Coaching</option><option>Fonoaudiologia</option><option>Fisioterapia</option><option>Nutrição</option><option>Terapia Ocupacional</option>',10)]),512),[[Ce,i.form.areaAtuacao]])]),d("div",nC,[d("div",null,[e[32]||(e[32]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone de Contato",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=c=>i.form.phone=c),onInput:e[10]||(e[10]=c=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.phone]])]),d("div",null,[e[33]||(e[33]=d("label",{class:"block text-sm font-medium text-gray-700"},"WhatsApp",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=c=>i.form.whatsapp=c),onInput:e[12]||(e[12]=c=>i.form.whatsapp=o.phoneMask(i.form.whatsapp)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.whatsapp]])]),d("div",null,[e[34]||(e[34]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[13]||(e[13]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.email]])]),d("div",null,[e[35]||(e[35]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=c=>i.form.address=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.address]])])]),d("div",iC,[d("div",null,[e[36]||(e[36]=d("label",{class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=c=>i.form.instagram=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.instagram]])]),d("div",null,[e[37]||(e[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=c=>i.form.facebook=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.facebook]])]),d("div",null,[e[38]||(e[38]=d("label",{class:"block text-sm font-medium text-gray-700"},"YouTube",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=c=>i.form.youtube=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.youtube]])]),d("div",null,[e[39]||(e[39]=d("label",{class:"block text-sm font-medium text-gray-700"},"X (Twitter)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=c=>i.form.x=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.x]])])]),d("div",null,[e[40]||(e[40]=d("label",{class:"block text-sm font-medium text-gray-700"},"Imagem do Estabelecimento",-1)),d("input",{type:"file",accept:"image/*",onChange:e[19]||(e[19]=(...c)=>o.handleImageUpload&&o.handleImageUpload(...c)),class:"mt-1"},null,32),i.form.imageUrl?(b(),v("div",oC,[d("img",{src:i.form.imageUrl,alt:"Imagem do estabelecimento",class:"h-24 rounded-md"},null,8,rC)])):L("",!0)]),e[41]||(e[41]=d("div",null,[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):L("",!0),i.activeTab==="agenda"?(b(),v("form",{key:2,onSubmit:e[22]||(e[22]=Ke((...c)=>o.handleSaveAgenda&&o.handleSaveAgenda(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[d("div",null,[e[43]||(e[43]=d("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),d("div",aC,[(b(!0),v(q,null,ne(i.daysOfWeekOptions,c=>(b(),v("div",{key:c.value,class:"flex items-center space-x-2"},[M(d("input",{type:"checkbox","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].enabled=u},null,8,lC),[[hl,i.agenda.dailySchedule[c.value].enabled]]),d("span",cC,C(c.label),1),M(d("input",{type:"time",step:"60","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].start=u,class:"border rounded-md px-2 py-1"},null,8,dC),[[D,i.agenda.dailySchedule[c.value].start]]),e[42]||(e[42]=d("span",null,"-",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].end=u,class:"border rounded-md px-2 py-1"},null,8,uC),[[D,i.agenda.dailySchedule[c.value].end]])]))),128))])]),d("div",null,[e[44]||(e[44]=d("label",{class:"block text-sm font-medium text-gray-700"},"Horas para cancelamento sem custo",-1)),M(d("input",{type:"number",min:"0","onUpdate:modelValue":e[21]||(e[21]=c=>i.agenda.cancelLimitHours=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.agenda.cancelLimitHours,void 0,{number:!0}]])]),e[45]||(e[45]=d("div",null,[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):L("",!0),i.activeTab==="financeiro"?(b(),v("form",{key:3,onSubmit:e[24]||(e[24]=Ke((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[d("div",null,[e[46]||(e[46]=d("label",{class:"block text-sm font-medium text-gray-700"},"Chave Pix",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[23]||(e[23]=c=>i.form.pixKey=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.pixKey]])]),e[47]||(e[47]=d("div",null,[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):L("",!0)])])}const fC=ce(YS,[["render",hC]]);async function Ti(t,e=!0){const{error:s}=await T.functions.invoke("send-appointment-email",{body:t});s?console.error("Erro ao enviar email de agendamento:",s.message):e&&alert("E-mail enviado com sucesso!")}const pC={name:"Clientes",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{userId:null,showModal:!1,modalMode:"new",editingId:null,search:"",form:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},states:[],cities:[],clients:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10,activeTab:"cadastro",originalForm:{},clientAppointments:[],history:[],services:[],rooms:[],currentClient:null}},methods:{phoneMask:Yn,digitsOnly:Zo,cpfMask:vl,cepMask:df,formatDateBR:ze,addHoursToTime:gt,async fetchServicesList(){const{data:t}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);t&&(this.services=t)},async fetchRoomsList(){const{data:t}=await T.from("rooms").select().eq("user_id",this.userId).eq("active",!0);t&&(this.rooms=t)},async fetchStatesList(){this.states=await fp()},async fetchCitiesList(){this.cities=await pp(this.form.stateId)},async fillAddressByCep(){const t=await mp(this.form.cep);if(!t)return;this.form.street=t.street||"",this.form.complement=t.complement||"",this.form.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.form.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(n=>n.nome.toLowerCase()===t.city.toLowerCase());s&&(this.form.cityId=s.id)}},async openModal(t,e="new"){this.modalMode=e,this.activeTab="cadastro",this.currentClient=t||null,t?(this.editingId=t.id,this.form={name:t.name,email:t.email,phone:t.phone,birthdate:t.birthdate,cpf:t.cpf,cep:t.cep,street:t.street,number:t.number,complement:t.complement,neighborhood:t.neighborhood,stateId:t.state_id,cityId:t.city_id,from_site:t.from_site,pending_update:t.pending_update,active:t.active},this.originalForm={...this.form},await this.fetchClientAppointments(),await this.fetchClientHistory()):(this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},this.originalForm={...this.form},this.clientAppointments=[],this.history=[]),await this.fetchStatesList(),this.form.stateId&&await this.fetchCitiesList(),await this.fetchServicesList(),await this.fetchRoomsList(),this.showModal=!0},closeModal(){this.showModal=!1,this.modalMode="new",this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},this.activeTab="cadastro",this.clientAppointments=[],this.history=[],this.currentClient=null},handleClose(){this.modalMode==="view"?this.closeModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeModal()},whatsappLink(t){return`https://wa.me/${Zo(t)}`},async handleSaveClient(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail inválido");return}let t,e;if(this.editingId?({data:t,error:e}=await T.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,pending_update:!1,active:this.form.active}).eq("id",this.editingId).select().single(),this.originalForm={...t}):({data:t,error:e}=await T.from("clients").insert({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,user_id:this.userId,from_site:this.form.from_site,pending_update:this.form.pending_update,active:this.form.active}).select().single(),this.originalForm={...t}),e)alert("Erro ao salvar cliente: "+e.message);else{if(this.editingId){const s=this.clients.findIndex(n=>n.id===this.editingId);s!==-1&&(this.clients[s]=t)}else this.clients.push(t);this.closeModal(),this.currentClient=null}},async handleDeleteClient(t){if(!confirm("Tem certeza que deseja excluir este cliente?"))return;const{data:s}=await T.from("appointments").select("id").eq("client_id",t).limit(1);if(s&&s.length){const{error:i}=await T.from("clients").update({active:!1}).eq("id",t);if(i)alert("Erro ao inativar cliente: "+i.message);else{const o=this.clients.findIndex(r=>r.id===t);o!==-1&&(this.clients[o].active=!1),alert("Cliente inativado.")}return}const{error:n}=await T.from("clients").delete().eq("id",t);n?alert("Erro ao excluir cliente: "+n.message):this.clients=this.clients.filter(i=>i.id!==t)},enableEdit(){this.modalMode="edit"},changeTab(t){if(t!=="cadastro"&&this.modalMode!=="view"){if(!confirm("Dados não salvos serão perdidos. Deseja continuar?"))return;this.modalMode="view",this.form={...this.originalForm}}this.activeTab=t},async fetchClientAppointments(){if(!this.editingId){this.clientAppointments=[];return}const{data:t}=await T.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.editingId).order("date",{ascending:!0}).order("time",{ascending:!0});this.clientAppointments=t||[]},async fetchClientHistory(){if(!this.editingId){this.history=[];return}if(!this.clientAppointments.length){this.history=[];return}const t=this.clientAppointments.map(s=>s.id),{data:e}=await T.from("appointment_notes").select().in("appointment_id",t).order("created_at",{ascending:!1});this.history=(e||[]).map(s=>({...s,attachments:s.attachments||[],appointment:this.clientAppointments.find(n=>n.id===s.appointment_id)||{}}))},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},async sendConfirmationEmail(t){const e=this.clients.find(i=>i.id===t.client_id),s=this.services.find(i=>i.id===t.service_id),n=this.rooms.find(i=>i.id===t.room_id);await Ti({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Olá ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${ze(t.date)} às ${gt(t.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${t.description?`Observações: ${t.description}
`:""}
E-mail enviado automaticamente.`})},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{isReadOnly(){return this.modalMode==="view"},filteredClients(){const t=this.search.toLowerCase();return this.clients.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t))},paginatedClients(){const t=(this.page-1)*this.pageSize;return this.filteredClients.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredClients.length/this.pageSize))}},watch:{search(){this.page=1},"form.stateId"(){this.fetchCitiesList()},"form.cep"(t){(t||"").toString().replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e),await this.fetchStatesList(),await this.fetchServicesList(),await this.fetchRoomsList()}},mC={class:"min-h-screen flex bg-gray-100 relative"},gC={class:"flex-1 p-4 md:p-8 space-y-6"},bC={key:0,class:"flex items-center mb-4"},yC={class:"bg-white p-4 rounded-lg shadow"},xC={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},vC={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},_C={class:"overflow-x-auto"},wC={class:"min-w-full text-left"},kC={class:"px-4 py-2"},SC={key:0,class:"inline-flex items-center text-red-600 text-xs ml-2"},CC={class:"px-4 py-2"},MC={class:"px-4 py-2"},AC={class:"px-4 py-2 text-right space-x-2"},PC=["href"],EC=["onClick"],TC=["onClick"],OC={key:0},DC={class:"mt-4 flex justify-between items-center"},IC=["disabled"],RC={class:"text-sm"},LC=["disabled"],FC={class:"text-lg font-semibold mb-4"},jC={key:0,class:"flex items-center text-red-600 text-sm mb-4"},NC={key:1,class:"border-b mb-4"},UC={class:"flex space-x-4"},BC=["disabled"],VC=["disabled"],$C=["disabled"],HC=["disabled"],zC=["disabled"],WC=["disabled"],qC=["disabled"],KC=["disabled"],GC=["disabled"],YC=["disabled"],JC=["disabled"],XC=["value"],QC=["disabled"],ZC=["value"],eM=["disabled"],tM={class:"flex justify-end space-x-2 md:col-span-2"},sM=["disabled"],nM={class:"overflow-x-auto"},iM={class:"min-w-full text-left border-separate border-spacing-0"},oM={key:0,class:"block text-xs text-red-600"},rM=["onClick"],aM={key:0},lM={class:"space-y-4"},cM={class:"text-sm text-gray-600 mb-1"},dM={class:"mb-2 whitespace-pre-line"},uM={key:0,class:"space-x-2 mb-2"},hM=["href"],fM={class:"text-right"},pM={key:0,class:"text-center text-gray-500"};function mM(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("router-link"),c=V("Modal");return b(),v("div",mC,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=u=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",gC,[i.sidebarOpen?L("",!0):(b(),v("div",bC,[d("button",{onClick:e[1]||(e[1]=u=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[28]||(e[28]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Clientes"}),d("section",yC,[d("div",xC,[e[29]||(e[29]=d("h3",{class:"text-lg font-medium"},"Clientes cadastrados",-1)),d("div",vC,[M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>i.search=u),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[D,i.search]]),d("button",{onClick:e[3]||(e[3]=(...u)=>o.openModal&&o.openModal(...u)),class:"btn w-full sm:w-auto"}," Novo Cliente ")])]),d("div",_C,[d("table",wC,[e[32]||(e[32]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Telefone"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.paginatedClients,u=>(b(),v("tr",{key:u.id,class:"border-b last:border-b-0"},[d("td",kC,[d("span",null,C(u.name),1),u.from_site&&u.pending_update?(b(),v("span",SC,e[30]||(e[30]=[d("span",{class:"w-2 h-2 bg-red-600 rounded-full mr-1"},null,-1),te(" cliente cadastrado via site - pendente atualização ")]))):L("",!0)]),d("td",CC,C(u.email),1),d("td",MC,C(o.phoneMask(u.phone)),1),d("td",AC,[d("a",{href:o.whatsappLink(u.phone),target:"_blank",rel:"noopener",class:"btn btn-sm btn-success"}," WhatsApp ",8,PC),d("button",{onClick:h=>o.openModal(u,"view"),class:"btn btn-sm"}," Visualizar ",8,EC),d("button",{onClick:h=>o.handleDeleteClient(u.id),class:"btn btn-sm btn-danger"}," Excluir ",8,TC)])]))),128)),o.filteredClients.length===0?(b(),v("tr",OC,e[31]||(e[31]=[d("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"}," Nenhum cliente encontrado ",-1)]))):L("",!0)])]),d("div",DC,[d("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...u)=>o.prevPage&&o.prevPage(...u)),disabled:i.page===1}," Anterior ",8,IC),d("span",RC,"Página "+C(i.page)+" de "+C(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...u)=>o.nextPage&&o.nextPage(...u)),disabled:i.page===o.totalPages}," Próxima ",8,LC)])])]),i.showModal?(b(),Ze(c,{key:1,onClose:o.handleClose},{default:X(()=>[d("h3",FC,C(i.modalMode==="new"?"Adicionar Cliente":"Cadastro do Cliente"),1),i.currentClient&&i.currentClient.from_site&&i.currentClient.pending_update?(b(),v("div",jC,e[33]||(e[33]=[d("span",{class:"w-3 h-3 bg-red-600 rounded-full mr-2"},null,-1),te(" cliente cadastrado via site - pendente atualização ")]))):L("",!0),i.editingId?(b(),v("div",NC,[d("nav",UC,[d("button",{class:Ve(i.activeTab==="cadastro"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[6]||(e[6]=u=>o.changeTab("cadastro"))},"Cadastro",2),d("button",{class:Ve(i.activeTab==="agendamentos"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[7]||(e[7]=u=>o.changeTab("agendamentos"))},"Agendamentos",2),d("button",{class:Ve(i.activeTab==="historico"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[8]||(e[8]=u=>o.changeTab("historico"))},"Histórico de atendimento",2)])])):L("",!0),M(d("form",{onSubmit:e[27]||(e[27]=Ke((...u)=>o.handleSaveClient&&o.handleSaveClient(...u),["prevent"])),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[d("div",null,[e[34]||(e[34]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>i.form.name=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,BC),[[D,i.form.name]])]),d("div",null,[e[35]||(e[35]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=u=>i.form.cpf=u),disabled:o.isReadOnly,onInput:e[11]||(e[11]=u=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,VC),[[D,i.form.cpf]])]),d("div",null,[e[36]||(e[36]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=u=>i.form.birthdate=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,$C),[[D,i.form.birthdate]])]),d("div",null,[e[37]||(e[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[13]||(e[13]=u=>i.form.email=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,HC),[[D,i.form.email]])]),d("div",null,[e[38]||(e[38]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=u=>i.form.phone=u),disabled:o.isReadOnly,onInput:e[15]||(e[15]=u=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,zC),[[D,i.form.phone]])]),d("div",null,[e[39]||(e[39]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=u=>i.form.cep=u),disabled:o.isReadOnly,onInput:e[17]||(e[17]=u=>i.form.cep=o.cepMask(i.form.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,WC),[[D,i.form.cep]])]),d("div",null,[e[40]||(e[40]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=u=>i.form.street=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,qC),[[D,i.form.street]])]),d("div",null,[e[41]||(e[41]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=u=>i.form.number=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,KC),[[D,i.form.number]])]),d("div",null,[e[42]||(e[42]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=u=>i.form.complement=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,GC),[[D,i.form.complement]])]),d("div",null,[e[43]||(e[43]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=u=>i.form.neighborhood=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,YC),[[D,i.form.neighborhood]])]),d("div",null,[e[45]||(e[45]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(d("select",{"onUpdate:modelValue":e[22]||(e[22]=u=>i.form.stateId=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[44]||(e[44]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.states,u=>(b(),v("option",{key:u.id,value:u.id},C(u.nome)+" ("+C(u.sigla)+")",9,XC))),128))],8,JC),[[Ce,i.form.stateId]])]),d("div",null,[e[47]||(e[47]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(d("select",{"onUpdate:modelValue":e[23]||(e[23]=u=>i.form.cityId=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[46]||(e[46]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.cities,u=>(b(),v("option",{key:u.id,value:u.id},C(u.nome),9,ZC))),128))],8,QC),[[Ce,i.form.cityId]])]),d("div",null,[e[49]||(e[49]=d("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(d("select",{"onUpdate:modelValue":e[24]||(e[24]=u=>i.form.active=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[48]||(e[48]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),8,eM),[[Ce,i.form.active]])]),d("div",tM,[d("button",{type:"button",onClick:e[25]||(e[25]=(...u)=>o.handleClose&&o.handleClose(...u)),class:"px-4 py-2 rounded border"},"Fechar"),i.modalMode==="view"?(b(),v("button",{key:0,type:"button",onClick:e[26]||(e[26]=(...u)=>o.enableEdit&&o.enableEdit(...u)),class:"btn btn-success"},"Editar")):L("",!0),d("button",{type:"submit",class:"btn",disabled:o.isReadOnly},"Salvar",8,sM)])],544),[[In,i.activeTab==="cadastro"]]),M(d("div",nM,[d("table",iM,[e[52]||(e[52]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Hora"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Ações")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.clientAppointments,u=>(b(),v("tr",{key:u.id},[d("td",{class:Ve(["px-4 py-2",u.from_site&&!u.confirmed?"border-l-2 border-t-2 border-b-2 border-red-500 rounded-l-md":"border-b last:border-b-0"])},[te(C(o.formatDateBR(u.date))+" "+C(o.addHoursToTime(u.time))+" ",1),u.from_site&&!u.confirmed?(b(),v("span",oM,"pendente confirmação de pagamento")):L("",!0)],2),d("td",{class:Ve(["px-4 py-2",u.from_site&&!u.confirmed?"border-t-2 border-b-2 border-red-500":"border-b last:border-b-0"])},C(o.getServiceName(u.service_id)),3),d("td",{class:Ve(["px-4 py-2 text-right space-x-2",u.from_site&&!u.confirmed?"border-r-2 border-t-2 border-b-2 border-red-500 rounded-r-md":"border-b last:border-b-0"])},[O(l,{to:{path:"/agendamentos",query:{edit:u.id}},class:"btn btn-sm"},{default:X(()=>e[50]||(e[50]=[te("Editar")])),_:2,__:[50]},1032,["to"]),d("button",{onClick:h=>o.sendConfirmationEmail(u),class:"btn btn-sm btn-success"},"Enviar e-mail",8,rM)],2)]))),128)),i.clientAppointments.length===0?(b(),v("tr",aM,e[51]||(e[51]=[d("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):L("",!0)])])],512),[[In,i.activeTab==="agendamentos"]]),M(d("div",lM,[(b(!0),v(q,null,ne(i.history,u=>(b(),v("div",{key:u.id,class:"border p-2 rounded"},[d("p",cM,C(o.formatDateBR(u.appointment.date))+" "+C(o.addHoursToTime(u.appointment.time)),1),d("p",dM,C(u.note),1),u.attachments&&u.attachments.length?(b(),v("div",uM,[(b(!0),v(q,null,ne(u.attachments,(h,f)=>(b(),v("a",{key:f,href:h,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+C(f+1),9,hM))),128))])):L("",!0),d("div",fM,[O(l,{to:{path:`/atendimento/${u.appointment_id}`,query:{note:u.id}},class:"btn btn-sm"},{default:X(()=>e[53]||(e[53]=[te("Editar atendimento")])),_:2,__:[53]},1032,["to"])])]))),128)),i.history.length===0?(b(),v("p",pM,"Nenhum atendimento encontrado")):L("",!0)],512),[[In,i.activeTab==="historico"]])]),_:1},8,["onClose"])):L("",!0)])])}const gM=ce(pC,[["render",mM]]),bM={name:"CalendarView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const t=new Date;return{currentYear:t.getFullYear(),currentMonth:t.getMonth(),monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]}},computed:{daysInMonth(){return new Date(this.currentYear,this.currentMonth+1,0).getDate()},leadingBlanks(){return new Date(this.currentYear,this.currentMonth,1).getDay()}},methods:{addHoursToTime:gt,prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--},nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++},goToCurrentMonth(){const t=new Date;this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()},getAppointmentsForDay(t){const e=String(this.currentMonth+1).padStart(2,"0"),s=String(t).padStart(2,"0"),n=`${this.currentYear}-${e}-${s}`;return this.appointments.filter(i=>i.date===n)},isToday(t){const e=new Date;return this.currentYear===e.getFullYear()&&this.currentMonth===e.getMonth()&&t===e.getDate()},getStatusClass(t){return t.from_site&&!t.confirmed?"text-red-600":t.status==="completed"?"text-green-600":t.status==="no_show"?"text-gray-600":"text-blue-600"}}},yM={class:"bg-white rounded-lg shadow overflow-hidden"},xM={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},vM={class:"font-semibold"},_M={class:"grid grid-cols-7 gap-px text-sm bg-gray-100"},wM={class:"text-center font-medium"},kM=["onClick"];function SM(t,e,s,n,i,o){return b(),v("div",yM,[d("div",xM,[d("button",{onClick:e[0]||(e[0]=(...r)=>o.prevMonth&&o.prevMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},e[2]||(e[2]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("div",vM,C(i.monthNames[i.currentMonth])+" "+C(i.currentYear),1),d("button",{onClick:e[1]||(e[1]=(...r)=>o.nextMonth&&o.nextMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},e[3]||(e[3]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),d("div",_M,[(b(!0),v(q,null,ne(i.daysOfWeek,r=>(b(),v("div",{class:"font-semibold text-center bg-gray-50 p-1",key:r},C(r),1))),128)),(b(!0),v(q,null,ne(o.leadingBlanks,r=>(b(),v("div",{key:"b"+r,class:"bg-white h-24"}))),128)),(b(!0),v(q,null,ne(o.daysInMonth,r=>(b(),v("div",{key:r,class:Ve(["border border-gray-200 h-24 p-1 overflow-auto bg-white",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(r)}])},[d("div",wM,C(r),1),d("ul",null,[(b(!0),v(q,null,ne(o.getAppointmentsForDay(r),a=>(b(),v("li",{key:a.id,class:Ve(["text-xs truncate cursor-pointer",o.getStatusClass(a)]),onClick:l=>t.$emit("select",a)},C(o.addHoursToTime(a.time))+" - "+C(s.getClientName(a.client_id)),11,kM))),128))])],2))),128))])])}const CM=ce(bM,[["render",SM]]),MM={name:"Agendamentos",components:{Sidebar:nt,HeaderUser:it,Modal:os,CalendarView:CM,WeekView:pf,AppointmentDetails:mf},data(){return{userId:null,showModal:!1,editingId:null,viewMode:"week",form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},clients:[],services:[],rooms:[],appointments:[],selectedAppointment:null,showDetailsModal:!1,filterStartDate:"",filterEndDate:"",searchQuery:"",sortColumn:"",sortAsc:!0,showViewDropdown:!1,sidebarOpen:window.innerWidth>=768,schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},profileWhatsapp:""}},computed:{processedAppointments(){let t=this.appointments.slice();if(this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter(s=>s.date.toLowerCase().includes(e)||s.time.toLowerCase().includes(e)||this.getClientName(s.client_id).toLowerCase().includes(e)||this.getServiceName(s.service_id).toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e))}return this.filterStartDate&&(t=t.filter(e=>e.date>=this.filterStartDate)),this.filterEndDate&&(t=t.filter(e=>e.date<=this.filterEndDate)),this.sortColumn&&t.sort((e,s)=>{let n,i;switch(this.sortColumn){case"client":n=this.getClientName(e.client_id),i=this.getClientName(s.client_id);break;case"service":n=this.getServiceName(e.service_id),i=this.getServiceName(s.service_id);break;case"datetime":n=e.date+" "+e.time,i=s.date+" "+s.time;break;default:n=e[this.sortColumn],i=s[this.sortColumn]}return n<i?this.sortAsc?-1:1:n>i?this.sortAsc?1:-1:0}),t},scheduleStartHour(){const t=this.schedule.startTime,e=t?parseInt(t.split(":")[0]):6;return Math.max(0,e-1)},scheduleEndHour(){const t=this.schedule.endTime,e=t?parseInt(t.split(":")[0]):23;return Math.min(23,e+1)},activeClients(){return this.clients.filter(t=>t.active)}},methods:{formatDateBR:ze,addHoursToTime:gt,openModal(t){t?(this.editingId=t.id,this.form={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,roomId:t.room_id||"",duration:t.duration,description:t.description,paid:!!t.paid,status:t.status||"confirmed"}):(this.editingId=null,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openModal(this.selectedAppointment),this.closeDetails())},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:e>=n.start&&e<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},canCancelAppointment(t){const e=this.schedule.cancelLimitHours||0;return e===0?!0:(hf(t.date,t.time)-uf())/36e5>=e},async handleSaveAppointment(){if(!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado");return}if(this.editingId){const{data:t,error:e}=await T.from("appointments").update({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,status:this.form.status}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message);else{const s=this.appointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.appointments[s]=t),this.closeModal()}}else{const{data:t,error:e}=await T.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{this.appointments.push(t);const s=this.services.find(r=>r.id===this.form.serviceId);if(s&&s.is_package&&s.session_count&&s.session_count>1){const r=[];for(let a=1;a<s.session_count;a++)r.push({date:ff(this.form.date,7*a),time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status});if(r.length){const{data:a}=await T.from("appointments").insert(r).select();a&&this.appointments.push(...a)}}const n=this.clients.find(r=>r.id===this.form.clientId),i=this.services.find(r=>r.id===this.form.serviceId),o=this.rooms.find(r=>r.id===this.form.roomId);await Ti({to:n==null?void 0:n.email,subject:"Agendamento de Consulta realizado",text:`Olá ${n==null?void 0:n.name},

Seu agendamento para ${i==null?void 0:i.name} foi confirmado para ${ze(this.form.date)} às ${this.form.time}.
${o?`Sala: ${o.name}
`:""}${o!=null&&o.google_meet_link?`Link: ${o.google_meet_link}
`:""}${this.form.description?`Observações: ${this.form.description}
`:""}
E-mail enviado automaticamente.`},!1),this.closeModal()}}},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){const s=this.appointments.find(o=>o.id===t);if(s&&!this.canCancelAppointment(s)){alert("Agendamento fora da política de cancelamento.");return}if(!confirm(e))return;const{error:i}=await T.from("appointments").delete().eq("id",t);i?alert("Erro ao excluir agendamento: "+i.message):(this.appointments=this.appointments.filter(o=>o.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&(this.showDetailsModal=!1,this.selectedAppointment=null))},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getClientEmail(t){const e=this.clients.find(s=>s.id===t);return e?e.email:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},getRowClass(t){return t.from_site&&!t.confirmed?"text-red-600":t.status==="completed"?"text-green-600":t.status==="no_show"?"text-gray-600":""},sortBy(t){this.sortColumn===t?this.sortAsc=!this.sortAsc:(this.sortColumn=t,this.sortAsc=!0)},setViewMode(t){this.viewMode=t,this.showViewDropdown=!1,t==="calendar"&&this.$refs.calendarView&&this.$refs.calendarView.goToCurrentMonth&&this.$refs.calendarView.goToCurrentMonth()},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(this.selectedAppointment){if(!this.canCancelAppointment(this.selectedAppointment)){alert("Agendamento fora da política de cancelamento.");return}await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails()}},async markNoShow(){if(!this.selectedAppointment)return;const{data:t,error:e}=await T.from("appointments").update({status:"no_show"}).eq("id",this.selectedAppointment.id).select().single();if(e){alert("Erro ao marcar falta: "+e.message);return}Object.assign(this.selectedAppointment,t);const s=this.appointments.findIndex(n=>n.id===t.id);s!==-1&&(this.appointments[s]=t),alert("Falta registrada para este atendimento.")},async sendConfirmationEmail(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(i=>i.id===t.client_id),s=this.services.find(i=>i.id===t.service_id),n=this.rooms.find(i=>i.id===t.room_id);await Ti({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Olá ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${ze(t.date)} às ${gt(t.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${t.description?`Observações: ${t.description}
`:""}
E-mail enviado automaticamente.`})},async confirmPayment(){const t=this.selectedAppointment;if(!t)return;const{data:e,error:s}=await T.from("appointments").update({confirmed:!0,paid:!0}).eq("id",t.id).select().single();if(s){alert("Erro ao confirmar pagamento: "+s.message);return}Object.assign(t,e);const n=this.clients.find(r=>r.id===t.client_id),i=this.services.find(r=>r.id===t.service_id),o=this.rooms.find(r=>r.id===t.room_id);await Ti({to:n==null?void 0:n.email,subject:"Agendamento confirmado",text:`Olá ${n==null?void 0:n.name},

Seu agendamento para ${i==null?void 0:i.name} foi confirmado para ${ze(t.date)} às ${gt(t.time)}.
${o?`Sala: ${o.name}
`:""}${o!=null&&o.google_meet_link?`Link: ${o.google_meet_link}
`:""}${t.description?`Observações: ${t.description}
`:""}
E-mail enviado automaticamente.`},!1)},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),n=`Olá ${e.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${ze(t.date)} - Hora: ${gt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Zo(e.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},exportCSV(){const t=["Data","Hora","Cliente","Serviço","Duração","Descrição"],e=this.appointments.map(o=>[ze(o.date),gt(o.time),this.getClientName(o.client_id),this.getServiceName(o.service_id),o.duration,(o.description||"").replace(/(\r\n|\n|\r)/g," ")]),s=[t.join(","),...e.map(o=>o.map(r=>`"${String(r).replace(/"/g,'""')}"`).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.setAttribute("download","agendamentos.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},clearFilters(){this.searchQuery="",this.filterStartDate="",this.filterEndDate=""}},watch:{"form.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&(!this.editingId||this.form.duration==="")&&(this.form.duration=e.duration)}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);s&&(this.services=s);const{data:n}=await T.from("rooms").select().eq("user_id",this.userId).eq("active",!0);n&&(this.rooms=n);const{data:i}=await T.from("profiles").select("start_time, end_time, week_days, daily_schedule, whatsapp, cancel_limit_hours").eq("id",this.userId).single();i&&(this.schedule.startTime=i.start_time||"",this.schedule.endTime=i.end_time||"",this.schedule.weekDays=i.week_days?i.week_days.split(","):[],this.schedule.dailySchedule=i.daily_schedule?typeof i.daily_schedule=="string"?JSON.parse(i.daily_schedule):i.daily_schedule:null,this.schedule.cancelLimitHours=i.cancel_limit_hours||0,this.profileWhatsapp=i.whatsapp||"");const{data:o}=await T.from("appointments").select().eq("user_id",this.userId);o&&(this.appointments=o);const r=this.$route.query.edit;if(r){const a=this.appointments.find(l=>l.id===r);a&&this.openModal(a)}}},AM={class:"min-h-screen flex bg-gray-100 relative"},PM={class:"flex-1 p-4 md:p-8"},EM={key:0,class:"flex items-center mb-4"},TM={class:"flex flex-col sm:flex-row sm:items-center mb-4 gap-2"},OM={class:"mb-4 flex items-center space-x-2"},DM={class:"relative"},IM={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20"},RM={class:"text-lg font-semibold mb-4"},LM=["value"],FM=["value"],jM=["value"],NM={class:"flex justify-end space-x-2"},UM={key:0,class:"mt-4"},BM={class:"flex flex-wrap justify-start gap-2"},VM={class:"mt-4"},$M={class:"flex flex-wrap justify-start gap-2"},HM={class:"mt-4"},zM={class:"flex flex-wrap justify-start gap-2"},WM={class:"mt-8"},qM={class:"bg-white p-4 rounded-lg shadow"},KM={class:"overflow-x-auto"},GM={class:"min-w-full text-left"},YM={class:"bg-gray-50"},JM={key:0},XM={key:0},QM={key:0},ZM={key:0},eA={key:0},tA={class:"px-4 py-2"},sA={class:"px-4 py-2"},nA={class:"px-4 py-2"},iA={class:"px-4 py-2"},oA={class:"px-4 py-2"},rA={class:"px-4 py-2"},aA={class:"px-4 py-2 text-right space-x-2"},lA=["onClick"],cA={key:0},dA={class:"mt-8"},uA={class:"mt-8"};function hA(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("router-link"),c=V("Modal"),u=V("AppointmentDetails"),h=V("CalendarView"),f=V("WeekView");return b(),v("div",AM,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=p=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",PM,[i.sidebarOpen?L("",!0):(b(),v("div",EM,[d("button",{onClick:e[1]||(e[1]=p=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[33]||(e[33]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Agendamentos"}),d("section",null,[d("div",TM,[M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=p=>i.searchQuery=p),type:"text",placeholder:"Buscar...",class:"border px-3 py-2 rounded-lg flex-grow sm:max-w-xs"},null,512),[[D,i.searchQuery]]),M(d("input",{"onUpdate:modelValue":e[3]||(e[3]=p=>i.filterStartDate=p),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[D,i.filterStartDate]]),M(d("input",{"onUpdate:modelValue":e[4]||(e[4]=p=>i.filterEndDate=p),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[D,i.filterEndDate]]),d("button",{onClick:e[5]||(e[5]=(...p)=>o.clearFilters&&o.clearFilters(...p)),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Limpar"),O(l,{to:"/agendamentos/novo",class:"btn sm:ml-auto w-full sm:w-auto"},{default:X(()=>e[34]||(e[34]=[te("Novo")])),_:1,__:[34]}),d("button",{onClick:e[6]||(e[6]=(...p)=>o.exportCSV&&o.exportCSV(...p)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full sm:w-auto"},"Exportar")]),d("div",OM,[e[35]||(e[35]=d("span",{class:"text-xs text-gray-600"},"Modo de exibição:",-1)),d("div",DM,[d("button",{onClick:e[7]||(e[7]=p=>i.showViewDropdown=!i.showViewDropdown),class:"px-4 py-2 bg-gray-200 rounded-lg"},C(i.viewMode==="list"?"Lista":i.viewMode==="calendar"?"Calendário":"Semana"),1),i.showViewDropdown?(b(),v("div",IM,[d("button",{onClick:e[8]||(e[8]=p=>o.setViewMode("list")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Lista"),d("button",{onClick:e[9]||(e[9]=p=>o.setViewMode("calendar")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Calendário"),d("button",{onClick:e[10]||(e[10]=p=>o.setViewMode("week")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Semana")])):L("",!0)])]),e[63]||(e[63]=Hs('<div class="flex space-x-4 text-sm mb-4 ml-6"><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-gray-400 rounded-full inline-block"></span><span>Faltou</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-blue-500 rounded-full inline-block"></span><span>Confirmado</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-green-500 rounded-full inline-block"></span><span>Finalizado</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-red-500 rounded-full inline-block"></span><span>Pendente pagamento</span></div></div>',1)),i.showModal?(b(),Ze(c,{key:0,onClose:o.closeModal},{default:X(()=>[d("h3",RM,C(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),d("form",{onSubmit:e[20]||(e[20]=Ke((...p)=>o.handleSaveAppointment&&o.handleSaveAppointment(...p),["prevent"])),class:"space-y-4"},[d("div",null,[e[36]||(e[36]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=p=>i.form.date=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.date]])]),d("div",null,[e[37]||(e[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":e[12]||(e[12]=p=>i.form.time=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.time]])]),d("div",null,[e[39]||(e[39]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(d("select",{"onUpdate:modelValue":e[13]||(e[13]=p=>i.form.clientId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[38]||(e[38]=d("option",{disabled:"",value:""},"Selecione um cliente",-1)),(b(!0),v(q,null,ne(o.activeClients,p=>(b(),v("option",{key:p.id,value:p.id},C(p.name),9,LM))),128))],512),[[Ce,i.form.clientId]])]),d("div",null,[e[41]||(e[41]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(d("select",{"onUpdate:modelValue":e[14]||(e[14]=p=>i.form.serviceId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[40]||(e[40]=d("option",{disabled:"",value:""},"Selecione um serviço",-1)),(b(!0),v(q,null,ne(i.services,p=>(b(),v("option",{key:p.id,value:p.id},C(p.name),9,FM))),128))],512),[[Ce,i.form.serviceId]])]),d("div",null,[e[43]||(e[43]=d("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),M(d("select",{"onUpdate:modelValue":e[15]||(e[15]=p=>i.form.roomId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[42]||(e[42]=d("option",{disabled:"",value:""},"Selecione uma sala",-1)),(b(!0),v(q,null,ne(i.rooms,p=>(b(),v("option",{key:p.id,value:p.id},C(p.name),9,jM))),128))],512),[[Ce,i.form.roomId]])]),d("div",null,[e[44]||(e[44]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=p=>i.form.duration=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.duration]])]),d("div",null,[e[45]||(e[45]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(d("textarea",{"onUpdate:modelValue":e[17]||(e[17]=p=>i.form.description=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.description]])]),d("div",null,[e[47]||(e[47]=d("label",{class:"block text-sm font-medium text-gray-700"},"Pago?",-1)),M(d("select",{"onUpdate:modelValue":e[18]||(e[18]=p=>i.form.paid=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},e[46]||(e[46]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.paid]])]),d("div",NM,[d("button",{type:"button",onClick:e[19]||(e[19]=(...p)=>o.closeModal&&o.closeModal(...p)),class:"px-4 py-2 rounded border"},"Cancelar"),e[48]||(e[48]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):L("",!0),i.showDetailsModal?(b(),Ze(c,{key:1,onClose:o.closeDetails},{default:X(()=>[O(u,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:X(()=>[i.selectedAppointment&&i.selectedAppointment.from_site&&!i.selectedAppointment.paid?(b(),v("div",UM,[e[49]||(e[49]=d("h4",{class:"font-medium mb-2"},"Ações Financeiras",-1)),d("div",BM,[d("button",{onClick:e[21]||(e[21]=(...p)=>o.confirmPayment&&o.confirmPayment(...p)),class:"btn btn-primary"}," Confirmar pagamento ")])])):L("",!0),d("div",VM,[e[50]||(e[50]=d("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),d("div",$M,[d("button",{onClick:e[22]||(e[22]=(...p)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...p)),class:"btn btn-success"},"Enviar confirmação"),d("button",{onClick:e[23]||(e[23]=(...p)=>o.cancelAppointment&&o.cancelAppointment(...p)),class:"btn btn-warning"},"Desmarcou"),d("button",{onClick:e[24]||(e[24]=(...p)=>o.markNoShow&&o.markNoShow(...p)),class:"btn btn-secondary"},"Faltou"),d("button",{onClick:e[25]||(e[25]=(...p)=>o.startAppointment&&o.startAppointment(...p)),class:"btn btn-primary"},"Iniciar atendimento")])]),d("div",HM,[e[51]||(e[51]=d("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),d("div",zM,[d("button",{onClick:e[26]||(e[26]=(...p)=>o.editFromDetails&&o.editFromDetails(...p)),class:"btn"},"Editar"),d("button",{onClick:e[27]||(e[27]=p=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):L("",!0),M(d("div",WM,[e[60]||(e[60]=d("h3",{class:"text-lg font-medium mb-4"},"Agendamentos",-1)),d("div",qM,[d("div",KM,[d("table",GM,[d("thead",YM,[d("tr",null,[d("th",{onClick:e[28]||(e[28]=p=>o.sortBy("datetime")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[52]||(e[52]=te(" Data/Hora ")),i.sortColumn==="datetime"?(b(),v("span",JM,C(i.sortAsc?"▲":"▼"),1)):L("",!0)]),d("th",{onClick:e[29]||(e[29]=p=>o.sortBy("client")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[53]||(e[53]=te(" Cliente ")),i.sortColumn==="client"?(b(),v("span",XM,C(i.sortAsc?"▲":"▼"),1)):L("",!0)]),d("th",{onClick:e[30]||(e[30]=p=>o.sortBy("service")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[54]||(e[54]=te(" Serviço ")),i.sortColumn==="service"?(b(),v("span",QM,C(i.sortAsc?"▲":"▼"),1)):L("",!0)]),e[57]||(e[57]=d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Sala",-1)),d("th",{onClick:e[31]||(e[31]=p=>o.sortBy("duration")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[55]||(e[55]=te(" Duração ")),i.sortColumn==="duration"?(b(),v("span",ZM,C(i.sortAsc?"▲":"▼"),1)):L("",!0)]),d("th",{onClick:e[32]||(e[32]=p=>o.sortBy("description")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[56]||(e[56]=te(" Descrição ")),i.sortColumn==="description"?(b(),v("span",eA,C(i.sortAsc?"▲":"▼"),1)):L("",!0)]),e[58]||(e[58]=d("th",{class:"px-4 py-2"},null,-1))])]),d("tbody",null,[(b(!0),v(q,null,ne(o.processedAppointments,p=>(b(),v("tr",{key:p.id,class:Ve(["border-b last:border-b-0",o.getRowClass(p)])},[d("td",tA,C(o.formatDateBR(p.date))+" "+C(o.addHoursToTime(p.time)),1),d("td",sA,C(o.getClientName(p.client_id)),1),d("td",nA,C(o.getServiceName(p.service_id)),1),d("td",iA,C(o.getRoomName(p.room_id)),1),d("td",oA,C(p.duration)+" minutos",1),d("td",rA,C(p.description),1),d("td",aA,[d("button",{onClick:m=>o.openDetails(p),class:"btn btn-sm"},"Visualizar",8,lA)])],2))),128)),o.processedAppointments.length===0?(b(),v("tr",cA,e[59]||(e[59]=[d("td",{colspan:"7",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento encontrado",-1)]))):L("",!0)])])])])],512),[[In,i.viewMode==="list"]]),M(d("div",dA,[e[61]||(e[61]=d("h3",{class:"text-lg font-medium mb-4"},"Calendário",-1)),O(h,{ref:"calendarView",appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[In,i.viewMode==="calendar"]]),M(d("div",uA,[e[62]||(e[62]=d("h3",{class:"text-lg font-medium mb-4"},"Semana",-1)),O(f,{appointments:o.processedAppointments,getClientName:o.getClientName,startHour:o.scheduleStartHour,endHour:o.scheduleEndHour,onSelect:o.openDetails},null,8,["appointments","getClientName","startHour","endHour","onSelect"])],512),[[In,i.viewMode==="week"]])])])])}const fA=ce(MM,[["render",hA]]),pA={name:"NovoAgendamento",components:{Sidebar:nt,HeaderUser:it},data(){return{userId:null,form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},clients:[],services:[],rooms:[],schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},sidebarOpen:window.innerWidth>=768}},methods:{formatDateBR:ze,addHoursToTime:gt,cancel(){this.$router.push("/agendamentos")},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:e>=n.start&&e<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},async handleSaveAppointment(){if(!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado");return}const{data:t,error:e}=await T.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{const s=this.services.find(r=>r.id===this.form.serviceId);if(s&&s.is_package&&s.session_count&&s.session_count>1){const r=[];for(let a=1;a<s.session_count;a++)r.push({date:ff(this.form.date,7*a),time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status});r.length&&await T.from("appointments").insert(r)}const n=this.clients.find(r=>r.id===this.form.clientId),i=this.services.find(r=>r.id===this.form.serviceId),o=this.rooms.find(r=>r.id===this.form.roomId);await Ti({to:n==null?void 0:n.email,subject:"Agendamento de Consulta realizado",text:`Olá ${n==null?void 0:n.name},

Seu agendamento para ${i==null?void 0:i.name} foi confirmado para ${ze(this.form.date)} às ${this.form.time}.
${o?`Sala: ${o.name}
`:""}${o!=null&&o.google_meet_link?`Link: ${o.google_meet_link}
`:""}${this.form.description?`Observações: ${this.form.description}
`:""}
E-mail enviado automaticamente.`},!1),this.$router.push("/agendamentos")}}},computed:{activeClients(){return this.clients.filter(t=>t.active)}},watch:{"form.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&this.form.duration===""&&(this.form.duration=e.duration)}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);s&&(this.services=s);const{data:n}=await T.from("rooms").select().eq("user_id",this.userId).eq("active",!0);n&&(this.rooms=n);const{data:i}=await T.from("profiles").select("start_time, end_time, week_days, daily_schedule, cancel_limit_hours").eq("id",this.userId).single();i&&(this.schedule.startTime=i.start_time||"",this.schedule.endTime=i.end_time||"",this.schedule.weekDays=i.week_days?i.week_days.split(","):[],this.schedule.dailySchedule=i.daily_schedule?typeof i.daily_schedule=="string"?JSON.parse(i.daily_schedule):i.daily_schedule:null,this.schedule.cancelLimitHours=i.cancel_limit_hours||0)}},mA={class:"min-h-screen flex bg-gray-100 relative"},gA={class:"flex-1 p-4 md:p-8"},bA={key:0,class:"flex items-center mb-4"},yA={class:"bg-white p-4 rounded-lg shadow"},xA=["value"],vA=["value"],_A=["value"],wA={class:"flex justify-end space-x-2"};function kA(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",mA,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",gA,[i.sidebarOpen?L("",!0):(b(),v("div",bA,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Novo Agendamento"}),d("section",yA,[e[26]||(e[26]=d("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Agendamento",-1)),d("form",{onSubmit:e[11]||(e[11]=Ke((...l)=>o.handleSaveAppointment&&o.handleSaveAppointment(...l),["prevent"])),class:"space-y-4"},[d("div",null,[e[13]||(e[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=l=>i.form.date=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.date]])]),d("div",null,[e[14]||(e[14]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":e[3]||(e[3]=l=>i.form.time=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.time]])]),d("div",null,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(d("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>i.form.clientId=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[15]||(e[15]=d("option",{disabled:"",value:""},"Selecione um cliente",-1)),(b(!0),v(q,null,ne(o.activeClients,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,xA))),128))],512),[[Ce,i.form.clientId]])]),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(d("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.form.serviceId=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[17]||(e[17]=d("option",{disabled:"",value:""},"Selecione um serviço",-1)),(b(!0),v(q,null,ne(i.services,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,vA))),128))],512),[[Ce,i.form.serviceId]])]),d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),M(d("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>i.form.roomId=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[19]||(e[19]=d("option",{disabled:"",value:""},"Selecione uma sala",-1)),(b(!0),v(q,null,ne(i.rooms,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,_A))),128))],512),[[Ce,i.form.roomId]])]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>i.form.duration=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.duration]])]),d("div",null,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(d("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>i.form.description=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[D,i.form.description]])]),d("div",null,[e[24]||(e[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"Pago?",-1)),M(d("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>i.form.paid=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},e[23]||(e[23]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.paid]])]),d("div",wA,[d("button",{type:"button",onClick:e[10]||(e[10]=(...l)=>o.cancel&&o.cancel(...l)),class:"px-4 py-2 rounded border"},"Cancelar"),e[25]||(e[25]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)])])])}const SA=ce(pA,[["render",kA]]),CA={name:"Servicos",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{userId:null,showModal:!1,editingId:null,search:"",sidebarOpen:window.innerWidth>=768,form:{name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0},services:[],page:1,pageSize:10}},methods:{openModal(t){t?(this.editingId=t.id,this.form={name:t.name,description:t.description,duration:t.duration,price:t.price,allowOnlineBooking:t.allow_online_booking,isPackage:t.is_package,sessions:t.session_count,active:t.active}):(this.editingId=null,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0},this.editingId=null},async handleSaveService(){let t,e;if(this.editingId?{data:t,error:e}=await T.from("services").update({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions,active:this.form.active}).eq("id",this.editingId).select().single():{data:t,error:e}=await T.from("services").insert({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions,active:this.form.active,user_id:this.userId}).select().single(),e)alert("Erro ao salvar serviço: "+e.message);else{if(this.editingId){const s=this.services.findIndex(n=>n.id===this.editingId);s!==-1&&(this.services[s]=t)}else this.services.push(t);this.closeModal()}},async handleDeleteService(t){if(!confirm("Tem certeza que deseja excluir este serviço?"))return;const{data:s}=await T.from("appointments").select("id").eq("service_id",t).limit(1);if(s&&s.length){const{error:i}=await T.from("services").update({active:!1}).eq("id",t);if(i)alert("Erro ao inativar serviço: "+i.message);else{const o=this.services.findIndex(r=>r.id===t);o!==-1&&(this.services[o].active=!1),alert("Serviço inativado.")}return}const{error:n}=await T.from("services").delete().eq("id",t);n?alert("Erro ao excluir serviço: "+n.message):this.services=this.services.filter(i=>i.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},computed:{filteredServices(){const t=this.search.toLowerCase();return this.services.filter(e=>e.name.toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.duration||"").toLowerCase().includes(t)||e.price!==null&&e.price.toString().includes(t))},paginatedServices(){const t=(this.page-1)*this.pageSize;return this.filteredServices.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredServices.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("services").select().eq("user_id",this.userId);e&&(this.services=e)}},MA={class:"min-h-screen flex bg-gray-100 relative"},AA={class:"flex-1 p-4 md:p-8 space-y-6"},PA={key:0,class:"flex items-center mb-4"},EA={class:"bg-white p-4 rounded-lg shadow"},TA={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},OA={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},DA={class:"overflow-x-auto"},IA={class:"min-w-full text-left"},RA={class:"px-4 py-2"},LA={class:"px-4 py-2"},FA={class:"px-4 py-2"},jA={class:"px-4 py-2"},NA={class:"px-4 py-2 text-right space-x-2 whitespace-nowrap"},UA=["onClick"],BA=["onClick"],VA={key:0},$A={class:"mt-4 flex justify-between items-center"},HA=["disabled"],zA={class:"text-sm"},WA=["disabled"],qA={class:"text-lg font-semibold mb-4"},KA={key:0},GA={class:"flex justify-end space-x-2"};function YA(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",MA,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",AA,[i.sidebarOpen?L("",!0):(b(),v("div",PA,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[16]||(e[16]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Serviços"}),d("section",EA,[d("div",TA,[e[17]||(e[17]=d("h3",{class:"text-lg font-medium"},"Serviços cadastrados",-1)),d("div",OA,[M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[D,i.search]]),d("button",{onClick:e[3]||(e[3]=c=>o.openModal()),class:"btn w-full sm:w-auto"}," Novo Serviço ")])]),d("div",DA,[d("table",IA,[e[19]||(e[19]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Descrição"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Duração"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.paginatedServices,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",RA,C(c.name),1),d("td",LA,C(c.description),1),d("td",FA,C(c.duration)+" minutos",1),d("td",jA,C(o.formatPrice(c.price)),1),d("td",NA,[d("button",{onClick:u=>o.openModal(c),class:"btn btn-sm"}," Editar ",8,UA),d("button",{onClick:u=>o.handleDeleteService(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,BA)])]))),128)),o.filteredServices.length===0?(b(),v("tr",VA,e[18]||(e[18]=[d("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"}," Nenhum serviço encontrado ",-1)]))):L("",!0)])]),d("div",$A,[d("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,HA),d("span",zA,"Página "+C(i.page)+" de "+C(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,WA)])])]),i.showModal?(b(),Ze(l,{key:1,onClose:o.closeModal},{default:X(()=>[d("h3",qA,C(i.editingId?"Editar Serviço":"Adicionar Serviço"),1),d("form",{onSubmit:e[15]||(e[15]=Ke((...c)=>o.handleSaveService&&o.handleSaveService(...c),["prevent"])),class:"space-y-6"},[d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.name]])]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(d("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.description]])]),d("div",null,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"Tempo de duração",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=c=>i.form.duration=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.duration]])]),d("div",null,[e[23]||(e[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),M(d("input",{type:"number",step:"0.01","onUpdate:modelValue":e[9]||(e[9]=c=>i.form.price=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.price]])]),d("div",null,[e[25]||(e[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"Agendável pelo site?",-1)),M(d("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>i.form.allowOnlineBooking=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[24]||(e[24]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.allowOnlineBooking]])]),d("div",null,[e[27]||(e[27]=d("label",{class:"block text-sm font-medium text-gray-700"},"É pacote?",-1)),M(d("select",{"onUpdate:modelValue":e[11]||(e[11]=c=>i.form.isPackage=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[26]||(e[26]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.isPackage]])]),i.form.isPackage?(b(),v("div",KA,[e[28]||(e[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Quantidade de sessões",-1)),M(d("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=c=>i.form.sessions=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.sessions]])])):L("",!0),d("div",null,[e[30]||(e[30]=d("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(d("select",{"onUpdate:modelValue":e[13]||(e[13]=c=>i.form.active=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[29]||(e[29]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.active]])]),d("div",GA,[d("button",{type:"button",onClick:e[14]||(e[14]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[31]||(e[31]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):L("",!0)])])}const JA=ce(CA,[["render",YA]]),XA={name:"Usuarios",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{form:{email:"",password:""},sidebarOpen:window.innerWidth>=768,userId:null,successMessage:"",errorMessage:"",users:[],search:"",showUserModal:!1,userModalMode:"new",selectedUserId:null,userForm:{email:"",password:""}}},methods:{async handleAddUser(){if(this.successMessage="",this.errorMessage="",this.form.email&&!Wt(this.form.email)){this.errorMessage="E-mail inválido";return}const{data:{user:t}}=await T.auth.getUser(),{data:{session:e}}=await T.auth.getSession();let s=null;if(t){const{data:o}=await T.from("profiles").select("*").eq("id",t.id).single();s=o}const{data:n,error:i}=await T.auth.signUp({email:this.form.email,password:this.form.password});e&&await T.auth.setSession(e),i?this.errorMessage="Erro ao cadastrar usuário: "+i.message:(n!=null&&n.user&&s&&await T.from("profiles").insert({id:n.user.id,business_name:s.business_name,description:s.description,phone:s.phone,whatsapp:s.whatsapp,email:s.email,address:s.address,instagram:s.instagram,facebook:s.facebook,youtube:s.youtube,x:s.x,slug:s.slug}),this.successMessage="Usuário cadastrado! Verifique o e-mail para ativar a conta.",this.form={email:"",password:""},await this.fetchUsers())},openUserModal(t,e="new"){this.userModalMode=e,t?(this.selectedUserId=t.id,this.userForm={email:t.email,password:""}):(this.selectedUserId=null,this.userForm={email:"",password:""}),this.showUserModal=!0},handleUserClose(){this.userModalMode==="view"?this.closeUserModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeUserModal()},closeUserModal(){this.showUserModal=!1,this.userModalMode="new",this.selectedUserId=null,this.userForm={email:"",password:""}},enableUserEdit(){this.userModalMode="edit"},async handleSaveUser(){if(this.userModalMode!=="view"){if(this.userForm.email&&!Wt(this.userForm.email)){alert("E-mail inválido");return}if(this.selectedUserId){const{error:t}=await T.from("profiles").update({email:this.userForm.email}).eq("id",this.selectedUserId);if(t)alert("Erro ao salvar usuário: "+t.message);else{const e=this.users.findIndex(s=>s.id===this.selectedUserId);e!==-1&&(this.users[e].email=this.userForm.email),this.closeUserModal()}}else this.form={email:this.userForm.email,password:this.userForm.password},await this.handleAddUser(),this.closeUserModal()}},async fetchUsers(){const{data:t}=await T.from("profiles").select("slug").eq("id",this.userId).single();if(t){const{data:e}=await T.from("profiles").select("id, email").eq("slug",t.slug);this.users=e||[]}}},computed:{isUserView(){return this.userModalMode==="view"},filteredUsers(){const t=this.search.toLowerCase();return this.users.filter(e=>e.id.toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t))}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchUsers()}},QA={class:"min-h-screen flex bg-gray-100 relative"},ZA={class:"flex-1 p-8 space-y-6"},e4={key:0,class:"flex items-center mb-4"},t4={class:"bg-white p-4 rounded-lg shadow"},s4={key:0,class:"text-green-600 mt-4"},n4={key:1,class:"text-red-600 mt-4"},i4={class:"bg-white p-4 rounded-lg shadow"},o4={class:"flex justify-between items-center mb-4"},r4={class:"overflow-x-auto"},a4={class:"min-w-full text-left"},l4={class:"px-4 py-2"},c4={class:"px-4 py-2"},d4={class:"px-4 py-2 text-right"},u4=["onClick"],h4={key:0},f4={class:"text-lg font-semibold mb-4"},p4=["disabled"],m4=["disabled"],g4={class:"flex justify-end space-x-2"},b4=["disabled"];function y4(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",QA,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",ZA,[i.sidebarOpen?L("",!0):(b(),v("div",e4,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[11]||(e[11]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Usuários"}),d("section",t4,[e[15]||(e[15]=d("h3",{class:"text-lg font-medium mb-4"},"Cadastrar novo usuário",-1)),d("form",{onSubmit:e[4]||(e[4]=Ke((...c)=>o.handleAddUser&&o.handleAddUser(...c),["prevent"])),class:"space-y-4"},[d("div",null,[e[12]||(e[12]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.email]])]),d("div",null,[e[13]||(e[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),M(d("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=c=>i.form.password=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.password]])]),e[14]||(e[14]=d("div",{class:"flex justify-end"},[d("button",{type:"submit",class:"btn"},"Cadastrar")],-1))],32),i.successMessage?(b(),v("p",s4,C(i.successMessage),1)):L("",!0),i.errorMessage?(b(),v("p",n4,C(i.errorMessage),1)):L("",!0)]),d("section",i4,[d("div",o4,[e[16]||(e[16]=d("h3",{class:"text-lg font-medium"},"Usuários cadastrados",-1)),M(d("input",{"onUpdate:modelValue":e[5]||(e[5]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.search]])]),d("div",r4,[d("table",a4,[e[18]||(e[18]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"ID"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.filteredUsers,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",l4,C(c.id),1),d("td",c4,C(c.email),1),d("td",d4,[d("button",{onClick:u=>o.openUserModal(c,"view"),class:"btn btn-sm"},"Visualizar",8,u4)])]))),128)),o.filteredUsers.length===0?(b(),v("tr",h4,e[17]||(e[17]=[d("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum usuário encontrado",-1)]))):L("",!0)])])])]),i.showUserModal?(b(),Ze(l,{key:1,onClose:o.handleUserClose},{default:X(()=>[d("h3",f4,C(i.userModalMode==="new"?"Adicionar Usuário":"Cadastro de Usuário"),1),d("form",{onSubmit:e[10]||(e[10]=Ke((...c)=>o.handleSaveUser&&o.handleSaveUser(...c),["prevent"])),class:"space-y-4"},[d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[6]||(e[6]=c=>i.userForm.email=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,p4),[[D,i.userForm.email]])]),d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),M(d("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=c=>i.userForm.password=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,m4),[[D,i.userForm.password]])]),d("div",g4,[d("button",{type:"button",onClick:e[8]||(e[8]=(...c)=>o.handleUserClose&&o.handleUserClose(...c)),class:"px-4 py-2 rounded border"},"Fechar"),i.userModalMode==="view"?(b(),v("button",{key:0,type:"button",onClick:e[9]||(e[9]=(...c)=>o.enableUserEdit&&o.enableUserEdit(...c)),class:"btn btn-success"},"Editar")):L("",!0),d("button",{type:"submit",class:"btn",disabled:o.isUserView},"Salvar",8,b4)])],32)]),_:1},8,["onClose"])):L("",!0)])])}const x4=ce(XA,[["render",y4]]),v4={name:"SearchProfiles",components:{Navbar:qt,Footer:Kt},data(){return{profiles:[],search:""}},computed:{filteredProfiles(){const t=this.search.toLowerCase();return this.profiles.filter(e=>e.business_name.toLowerCase().includes(t))}},async mounted(){const{data:t}=await T.from("profiles").select("id, business_name, description, slug, area_atuacao");t&&(this.profiles=t)}},_4={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-10"},w4={class:"max-w-2xl mx-auto px-4"},k4={class:"mb-6 text-center"},S4={class:"space-y-4"},C4={class:"text-xl font-semibold text-blue-600"},M4={key:0,class:"text-sm text-gray-500"},A4={class:"text-gray-700 mb-2"},P4={key:0,class:"text-center text-gray-500 py-6"};function E4(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("div",_4,[d("div",w4,[d("div",k4,[e[1]||(e[1]=d("h1",{class:"text-3xl font-extrabold text-blue-700 mb-4"},"Buscar perfis",-1)),M(d("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.search=c),type:"text",placeholder:"Digite o nome do estabelecimento",class:"w-full px-4 py-2 border rounded-md"},null,512),[[D,i.search]])]),d("ul",S4,[(b(!0),v(q,null,ne(o.filteredProfiles,c=>(b(),v("li",{key:c.id,class:"bg-white p-4 rounded-md shadow"},[d("h2",C4,C(c.business_name),1),c.area_atuacao?(b(),v("p",M4,C(c.area_atuacao),1)):L("",!0),d("p",A4,C(c.description),1),O(a,{to:"/"+c.slug,class:"text-blue-600 hover:underline"},{default:X(()=>e[2]||(e[2]=[te(" Ver perfil ")])),_:2,__:[2]},1032,["to"])]))),128)),o.filteredProfiles.length===0?(b(),v("li",P4," Nenhum resultado encontrado ")):L("",!0)])])]),O(l)],64)}const T4=ce(v4,[["render",E4]]),gp="/icons/whatsapp.svg",O4={name:"PublicPage",components:{Modal:os},data(){return{profile:null,services:[],showModal:!1,selectedService:null,form:{name:"",email:"",phone:"",cpf:"",date:"",time:""},slotError:"",schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null}}},computed:{whatsappLink(){var s;return`https://wa.me/${(((s=this.profile)==null?void 0:s.whatsapp)||"").replace(/\D/g,"")}`}},watch:{"form.date"(){this.slotError=""},"form.time"(){this.slotError=""}},methods:{phoneMask:Yn,cpfMask:vl,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},openModal(t){this.selectedService=t,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedService=null,this.form={name:"",email:"",phone:"",cpf:"",date:"",time:""},this.slotError=""},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:e>=n.start&&e<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},async handleSchedule(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail inválido");return}if(!this.isSlotAllowed(this.form.date,this.form.time)){this.slotError="Este horário não está disponível. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}const{data:t}=await T.from("appointments").select("id").eq("user_id",this.profile.id).eq("date",this.form.date).eq("time",this.form.time).limit(1);if(t&&t.length){this.slotError="Este horário não está disponível. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}let e,s=null;if(this.form.email){const{data:o}=await T.from("clients").select("id, active").eq("user_id",this.profile.id).eq("email",this.form.email).maybeSingle();o&&(s=o)}if(!s&&this.form.cpf){const{data:o}=await T.from("clients").select("id, active").eq("user_id",this.profile.id).eq("cpf",this.form.cpf).maybeSingle();o&&(s=o)}if(!s&&this.form.phone){const{data:o}=await T.from("clients").select("id, active").eq("user_id",this.profile.id).eq("phone",this.form.phone).maybeSingle();o&&(s=o)}if(s){if(s.active===!1){alert("Seu cadastro está inativo. Entre em contato com o consultório.");return}e=s.id;const{error:o}=await T.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0}).eq("id",e);o&&console.error("Erro ao atualizar cliente:",o.message)}else{const{data:o,error:r}=await T.from("clients").insert({user_id:this.profile.id,name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0,active:!0}).select().single();if(r){alert("Erro ao cadastrar cliente: "+r.message);return}e=o.id}const{data:n,error:i}=await T.from("appointments").insert({user_id:this.profile.id,client_id:e,service_id:this.selectedService.id,date:this.form.date,time:this.form.time,duration:this.selectedService.duration,confirmed:!1,from_site:!0}).select().single();if(i){alert("Erro ao agendar: "+i.message);return}this.closeModal(),this.$router.push({name:"PagamentoAgendamento",params:{id:n.id}})}},async mounted(){const t=this.$route.params.slug,{data:e}=await T.from("profiles").select("*").eq("slug",t).single();if(e){this.profile=e;const{data:s}=await T.from("services").select().eq("user_id",e.id).eq("allow_online_booking",!0).eq("active",!0);this.services=s||[],this.schedule.startTime=e.start_time||"",this.schedule.endTime=e.end_time||"",this.schedule.weekDays=e.week_days?e.week_days.split(","):[],this.schedule.dailySchedule=e.daily_schedule?typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule:null}}},D4={class:"min-h-screen flex flex-col bg-white"},I4={key:0,class:"flex-1"},R4={class:"bg-blue-600 text-white py-12"},L4={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},F4=["src"],j4={class:"text-4xl font-bold"},N4={key:0,class:"text-sm"},U4={class:"text-lg"},B4={class:"max-w-5xl mx-auto px-4 py-12 space-y-16"},V4={key:0,class:"grid gap-6 md:grid-cols-2"},$4={class:"text-lg font-medium text-blue-700"},H4={class:"text-sm text-gray-600"},z4={class:"text-sm text-gray-500 mt-1"},W4={class:"text-sm text-gray-500"},q4=["onClick"],K4={key:1,class:"text-gray-500"},G4={class:"space-y-1 text-gray-700"},Y4=["href"],J4={key:2,class:"flex-1 flex items-center justify-center text-gray-500"},X4={class:"text-lg font-semibold mb-4"},Q4={key:0,class:"mt-1 text-sm text-red-600"},Z4={class:"flex justify-end gap-2"},eP={key:4,class:"bg-gray-100 py-6"},tP={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},sP={class:"space-x-4 text-blue-600"},nP=["href"],iP=["href"],oP=["href"],rP=["href"],aP={class:"text-sm text-gray-500"};function lP(t,e,s,n,i,o){const r=V("Modal");return b(),v("div",D4,[i.profile?(b(),v("section",I4,[d("div",R4,[d("div",L4,[d("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,F4),d("h1",j4,C(i.profile.business_name),1),i.profile.area_atuacao?(b(),v("p",N4,C(i.profile.area_atuacao),1)):L("",!0),d("p",U4,C(i.profile.description),1)])]),d("div",B4,[d("div",null,[e[10]||(e[10]=d("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Serviços",-1)),i.services.length?(b(),v("ul",V4,[(b(!0),v(q,null,ne(i.services,a=>(b(),v("li",{key:a.id,class:"p-4 bg-gray-50 border rounded-lg shadow"},[d("h3",$4,C(a.name),1),d("p",H4,C(a.description),1),d("p",z4,"Duração: "+C(a.duration)+" minutos",1),d("p",W4,"Valor: "+C(o.formatPrice(a.price)),1),d("button",{class:"btn mt-2",onClick:l=>o.openModal(a)},"Agendar",8,q4)]))),128))])):(b(),v("p",K4,"Nenhum serviço cadastrado."))]),d("div",null,[e[15]||(e[15]=d("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Contato",-1)),d("ul",G4,[d("li",null,[e[11]||(e[11]=d("strong",null,"Telefone:",-1)),te(" "+C(i.profile.phone),1)]),d("li",null,[e[12]||(e[12]=d("strong",null,"WhatsApp:",-1)),te(" "+C(i.profile.whatsapp),1)]),d("li",null,[e[13]||(e[13]=d("strong",null,"Email:",-1)),te(" "+C(i.profile.email),1)]),d("li",null,[e[14]||(e[14]=d("strong",null,"Endereço:",-1)),te(" "+C(i.profile.address),1)])])])])])):L("",!0),i.profile&&i.profile.whatsapp?(b(),v("a",{key:1,href:o.whatsappLink,target:"_blank",rel:"noopener",class:"fixed bottom-4 right-4 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg"},e[16]||(e[16]=[d("img",{src:gp,alt:"WhatsApp",class:"w-6 h-6"},null,-1)]),8,Y4)):(b(),v("div",J4,e[17]||(e[17]=[d("p",null,"Carregando perfil...",-1)]))),i.showModal?(b(),Ze(r,{key:3,onClose:o.closeModal},{default:X(()=>{var a;return[d("h3",X4,"Agendar "+C((a=i.selectedService)==null?void 0:a.name),1),d("form",{onSubmit:e[9]||(e[9]=Ke((...l)=>o.handleSchedule&&o.handleSchedule(...l),["prevent"])),class:"space-y-4"},[d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>i.form.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.name]])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(d("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>i.form.email=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.email]])]),d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>i.form.phone=l),onInput:e[3]||(e[3]=l=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.phone]])]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>i.form.cpf=l),onInput:e[5]||(e[5]=l=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.cpf]])]),d("div",null,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>i.form.date=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.date]])]),d("div",null,[e[23]||(e[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(d("input",{type:"time",step:"60","onUpdate:modelValue":e[7]||(e[7]=l=>i.form.time=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.time]]),i.slotError?(b(),v("p",Q4,C(i.slotError),1)):L("",!0)]),d("div",Z4,[d("button",{type:"button",onClick:e[8]||(e[8]=(...l)=>o.closeModal&&o.closeModal(...l)),class:"px-4 py-2 rounded border"},"Cancelar"),e[24]||(e[24]=d("button",{type:"submit",class:"btn"},"Agendar",-1))])],32)]}),_:1},8,["onClose"])):L("",!0),i.profile?(b(),v("footer",eP,[d("div",tP,[d("div",sP,[i.profile.instagram?(b(),v("a",{key:0,href:i.profile.instagram,class:"hover:underline"},"Instagram",8,nP)):L("",!0),i.profile.facebook?(b(),v("a",{key:1,href:i.profile.facebook,class:"hover:underline"},"Facebook",8,iP)):L("",!0),i.profile.youtube?(b(),v("a",{key:2,href:i.profile.youtube,class:"hover:underline"},"YouTube",8,oP)):L("",!0),i.profile.x?(b(),v("a",{key:3,href:i.profile.x,class:"hover:underline"},"X (Twitter)",8,rP)):L("",!0)]),d("p",aP,"© "+C(new Date().getFullYear())+" "+C(i.profile.business_name),1)])])):L("",!0)])}const cP=ce(O4,[["render",lP]]),dP={name:"Planos",components:{Navbar:qt,Footer:Kt}},uP={class:"max-w-5xl mx-auto px-4 py-16"},hP={class:"text-center mt-8"};function fP(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("section",uP,[e[1]||(e[1]=Hs('<h1 class="text-3xl font-bold text-center mb-8">Conheça nossos planos</h1><div class="bg-white p-4 rounded-lg shadow"><div class="overflow-x-auto"><table class="min-w-full text-left"><thead class="bg-gray-50"><tr><th class="px-4 py-2 font-medium text-gray-700">Recursos</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Básico</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Beta</th></tr></thead><tbody><tr><td class="border-t px-4 py-2 text-gray-600">Valor</td><td class="border-t px-4 py-2 text-center font-semibold">Grátis</td><td class="border-t px-4 py-2 text-center font-semibold line-through text-gray-400">R$167,97</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Cadastro de pacientes</td><td class="border-t px-4 py-2 text-center">Até 5 pacientes</td><td class="border-t px-4 py-2 text-center">Ilimitado</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Lembretes por e-mail</td><td class="border-t px-4 py-2 text-center">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Lembretes via WhatsApp</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Customização de domínio da página pública</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Página pública sem banner do Agenda Zen</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Geração de recibos de atendimentos</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Envio de recibos por e-mail automático</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr></tbody></table></div></div>',2)),d("div",hP,[O(a,{to:"/cadastro",class:"btn"},{default:X(()=>e[0]||(e[0]=[te(" Contratar plano ")])),_:1,__:[0]})])]),O(l)],64)}const pP=ce(dP,[["render",fP]]),mP={name:"Salas",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{userId:null,showModal:!1,search:"",form:{name:"",googleMeetLink:"",active:!0},rooms:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{openModal(){this.form={name:"",googleMeetLink:"",active:!0},this.showModal=!0},generateMeetLink(){const t=window.open("https://meet.google.com/new","_blank");setTimeout(()=>{try{this.form.googleMeetLink=t.location.href}catch{}},3e3)},async pasteFromClipboard(){try{const t=await navigator.clipboard.readText();this.form.googleMeetLink=t}catch{alert("Não foi possível acessar o conteúdo da área de transferência.")}},closeModal(){this.showModal=!1,this.form={name:"",googleMeetLink:"",active:!0}},async handleAddRoom(){const{data:t,error:e}=await T.from("rooms").insert({name:this.form.name,google_meet_link:this.form.googleMeetLink,user_id:this.userId,active:this.form.active}).select().single();e?alert("Erro ao salvar sala: "+e.message):(this.rooms.push(t),this.closeModal())},async handleDeleteRoom(t){if(!confirm("Tem certeza que deseja excluir esta sala?"))return;const{data:s}=await T.from("appointments").select("id").eq("room_id",t).limit(1);if(s&&s.length){const{error:i}=await T.from("rooms").update({active:!1}).eq("id",t);if(i)alert("Erro ao inativar sala: "+i.message);else{const o=this.rooms.findIndex(r=>r.id===t);o!==-1&&(this.rooms[o].active=!1),alert("Sala inativada.")}return}const{error:n}=await T.from("rooms").delete().eq("id",t);n?alert("Erro ao excluir sala: "+n.message):this.rooms=this.rooms.filter(i=>i.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{filteredRooms(){const t=this.search.toLowerCase();return this.rooms.filter(e=>e.name.toLowerCase().includes(t)||e.google_meet_link&&e.google_meet_link.toLowerCase().includes(t))},paginatedRooms(){const t=(this.page-1)*this.pageSize;return this.filteredRooms.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredRooms.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("rooms").select().eq("user_id",this.userId);e&&(this.rooms=e)}},gP={class:"min-h-screen flex bg-gray-100 relative"},bP={class:"flex-1 p-4 md:p-8 space-y-6"},yP={key:0,class:"flex items-center mb-4"},xP={class:"bg-white p-4 rounded-lg shadow"},vP={class:"flex justify-between items-center mb-4"},_P={class:"flex items-center space-x-3"},wP={class:"overflow-x-auto"},kP={class:"min-w-full text-left"},SP={class:"px-4 py-2"},CP={class:"px-4 py-2"},MP=["href"],AP={class:"px-4 py-2 text-right"},PP=["onClick"],EP={key:0},TP={class:"mt-4 flex justify-between items-center"},OP=["disabled"],DP={class:"text-sm"},IP=["disabled"],RP={class:"flex space-x-2 mt-1"},LP={class:"flex justify-end space-x-2"};function FP(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",gP,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",bP,[i.sidebarOpen?L("",!0):(b(),v("div",yP,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[13]||(e[13]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Salas"}),d("section",xP,[d("div",vP,[e[14]||(e[14]=d("h3",{class:"text-lg font-medium"},"Salas cadastradas",-1)),d("div",_P,[M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.search]]),d("button",{onClick:e[3]||(e[3]=(...c)=>o.openModal&&o.openModal(...c)),class:"btn"}," Nova Sala ")])]),d("div",wP,[d("table",kP,[e[16]||(e[16]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Google Meet"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.paginatedRooms,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",SP,C(c.name),1),d("td",CP,[c.google_meet_link?(b(),v("a",{key:0,href:c.google_meet_link,class:"text-blue-600 underline",target:"_blank"}," Link ",8,MP)):L("",!0)]),d("td",AP,[d("button",{onClick:u=>o.handleDeleteRoom(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,PP)])]))),128)),o.filteredRooms.length===0?(b(),v("tr",EP,e[15]||(e[15]=[d("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"}," Nenhuma sala encontrada ",-1)]))):L("",!0)])]),d("div",TP,[d("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,OP),d("span",DP,"Página "+C(i.page)+" de "+C(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,IP)])])]),i.showModal?(b(),Ze(l,{key:1,onClose:o.closeModal},{default:X(()=>[e[23]||(e[23]=d("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Sala",-1)),d("form",{onSubmit:e[12]||(e[12]=Ke((...c)=>o.handleAddRoom&&o.handleAddRoom(...c),["prevent"])),class:"space-y-6"},[d("div",null,[e[17]||(e[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.name]])]),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Link do Google Meet",-1)),d("div",RP,[M(d("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=c=>i.form.googleMeetLink=c),class:"flex-grow px-4 py-2 border rounded-md"},null,512),[[D,i.form.googleMeetLink]]),d("button",{type:"button",onClick:e[8]||(e[8]=(...c)=>o.generateMeetLink&&o.generateMeetLink(...c)),class:"btn"},"Gerar"),d("button",{type:"button",onClick:e[9]||(e[9]=(...c)=>o.pasteFromClipboard&&o.pasteFromClipboard(...c)),class:"btn"},"Paste")]),e[19]||(e[19]=d("p",{class:"text-xs text-gray-500 mt-2"}," Após abrir a nova aba, copie o link da reunião e cole no campo acima. ",-1))]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(d("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>i.form.active=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[20]||(e[20]=[d("option",{value:!0},"Sim",-1),d("option",{value:!1},"Não",-1)]),512),[[Ce,i.form.active]])]),d("div",LP,[d("button",{type:"button",onClick:e[11]||(e[11]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[22]||(e[22]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[23]},8,["onClose"])):L("",!0)])])}const jP=ce(mP,[["render",FP]]),NP={name:"Comprovantes",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],receipts:[],clients:[],showGenerateModal:!1,generateForm:{clientId:"",startDate:"",endDate:"",templateId:""},receiptContent:null}},methods:{formatDateBR:ze,closeGenerateModal(){this.showGenerateModal=!1,this.generateForm={clientId:"",startDate:"",endDate:"",templateId:""}},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},showReceipt(t){this.receiptContent=t},async handleGenerate(){const{data:t}=await T.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.generateForm.clientId).gte("date",this.generateForm.startDate).lte("date",this.generateForm.endDate).order("date",{ascending:!0}).order("time",{ascending:!0}),e=this.templates.find(a=>a.id===this.generateForm.templateId),s=this.clients.find(a=>a.id===this.generateForm.clientId);let n=e?e.content:"";s&&(n=n.replace("{{client_name}}",s.name));const i=(t||[]).map(a=>`- ${ze(a.date)} ${a.time}`).join(`
`);n=n.replace("{{appointments}}",i);const{data:o,error:r}=await T.from("receipts").insert({user_id:this.userId,client_id:this.generateForm.clientId,template_id:this.generateForm.templateId,start_date:this.generateForm.startDate,end_date:this.generateForm.endDate,content:n}).select().single();r?alert("Erro ao gerar comprovante: "+r.message):(this.receipts.push(o),this.closeGenerateModal())}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await T.from("receipt_templates").select().eq("user_id",this.userId);s&&(this.templates=s);const{data:n}=await T.from("receipts").select().eq("user_id",this.userId).order("created_at",{ascending:!1});n&&(this.receipts=n)}},UP={class:"min-h-screen flex bg-gray-100 relative"},BP={class:"flex-1 p-4 md:p-8 space-y-6"},VP={key:0,class:"flex items-center mb-4"},$P={class:"bg-white p-4 rounded-lg shadow space-y-4"},HP={class:"flex justify-between items-center"},zP={class:"overflow-x-auto"},WP={class:"min-w-full text-left"},qP={class:"px-4 py-2"},KP={class:"px-4 py-2"},GP={class:"px-4 py-2"},YP={class:"px-4 py-2 text-right"},JP=["onClick"],XP={key:0},QP=["value"],ZP={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},eE=["value"],tE={class:"flex justify-end space-x-2"},sE={class:"border rounded-md p-4 bg-gray-50"},nE={class:"whitespace-pre-wrap font-mono text-sm"};function iE(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",UP,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",BP,[i.sidebarOpen?L("",!0):(b(),v("div",VP,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[10]||(e[10]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Comprovantes"}),d("section",$P,[d("div",HP,[e[11]||(e[11]=d("h3",{class:"text-lg font-medium"},"Comprovantes Gerados",-1)),d("button",{onClick:e[2]||(e[2]=c=>i.showGenerateModal=!0),class:"btn"},"Novo Comprovante")]),d("div",zP,[d("table",WP,[e[13]||(e[13]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Criado em"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.receipts,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",qP,C(o.getClientName(c.client_id)),1),d("td",KP,C(o.formatDateBR(c.start_date))+" - "+C(o.formatDateBR(c.end_date)),1),d("td",GP,C(o.formatDateBR(c.created_at.split("T")[0])),1),d("td",YP,[d("button",{onClick:u=>o.showReceipt(c.content),class:"btn btn-sm"},"Ver",8,JP)])]))),128)),i.receipts.length===0?(b(),v("tr",XP,e[12]||(e[12]=[d("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum comprovante",-1)]))):L("",!0)])])])]),i.showGenerateModal?(b(),Ze(l,{key:1,onClose:o.closeGenerateModal},{default:X(()=>[e[21]||(e[21]=d("h3",{class:"text-lg font-semibold mb-4"},"Novo Comprovante",-1)),d("form",{onSubmit:e[8]||(e[8]=Ke((...c)=>o.handleGenerate&&o.handleGenerate(...c),["prevent"])),class:"space-y-4"},[d("div",null,[e[15]||(e[15]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(d("select",{"onUpdate:modelValue":e[3]||(e[3]=c=>i.generateForm.clientId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[14]||(e[14]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.clients,c=>(b(),v("option",{key:c.id,value:c.id},C(c.name),9,QP))),128))],512),[[Ce,i.generateForm.clientId]])]),d("div",ZP,[d("div",null,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"De",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=c=>i.generateForm.startDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.generateForm.startDate]])]),d("div",null,[e[17]||(e[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Até",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=c=>i.generateForm.endDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.generateForm.endDate]])])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Template",-1)),M(d("select",{"onUpdate:modelValue":e[6]||(e[6]=c=>i.generateForm.templateId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[18]||(e[18]=d("option",{disabled:"",value:""},"Selecione",-1)),(b(!0),v(q,null,ne(i.templates,c=>(b(),v("option",{key:c.id,value:c.id},C(c.name),9,eE))),128))],512),[[Ce,i.generateForm.templateId]])]),d("div",tE,[d("button",{type:"button",onClick:e[7]||(e[7]=(...c)=>o.closeGenerateModal&&o.closeGenerateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[20]||(e[20]=d("button",{type:"submit",class:"btn"},"Gerar",-1))])],32)]),_:1,__:[21]},8,["onClose"])):L("",!0),i.receiptContent?(b(),Ze(l,{key:2,onClose:e[9]||(e[9]=c=>i.receiptContent=null)},{default:X(()=>[e[22]||(e[22]=d("h3",{class:"text-lg font-semibold text-center mb-4"},"Comprovante",-1)),d("div",sE,[d("pre",nE,C(i.receiptContent),1)])]),_:1,__:[22]})):L("",!0)])])}const oE=ce(NP,[["render",iE]]),rE={name:"Atendimento",components:{Sidebar:nt,HeaderUser:it},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"current",appointment:null,clientName:"",note:"",files:[],notes:[],userId:null,isEditing:!1,editingNoteId:null,editingAttachments:[]}},computed:{appointmentDateTime(){return this.appointment?`${ze(this.appointment.date)} ${gt(this.appointment.time)}`:""},groupedNotes(){const t={};return this.notes.forEach(e=>{const s=e.created_at.split("T")[0];t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).sort((e,s)=>new Date(s)-new Date(e)).map(e=>({date:ze(e),items:t[e]}))}},methods:{formatDateTime(t){return new Date(t).toLocaleString("pt-BR")},handleFileChange(t){const e=["pdf","doc","txt","png","jpeg","jpg"],s=Array.from(t.target.files);this.files=[];for(const n of s){const i=n.name.split(".").pop().toLowerCase();e.includes(i)?this.files.push(n):alert(`Formato de arquivo não permitido: ${n.name}`)}},editExistingNote(t,e=!0){(this.note&&this.note.trim()||this.files.length)&&!confirm("Dados não salvos serão perdidos. Deseja continuar?")||(this.isEditing=!0,this.editingNoteId=t.id,this.editingAttachments=[...t.attachments||[]],this.note=t.note,this.files=[],e&&(this.activeTab="current"))},cancelEdit(){this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],this.note="",this.files=[]},async removeAttachment(t){if(!confirm("Remover este anexo?"))return;const n=this.editingAttachments[t].split("/appointment-attachments/");if(n.length===2){const i=n[1];await T.storage.from("appointment-attachments").remove([i])}this.editingAttachments.splice(t,1)},async fetchData(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("appointments").select().eq("id",this.$route.params.id).single();if(this.appointment=e,this.clientName="",e){const{data:o}=await T.from("clients").select("name").eq("id",e.client_id).single();o&&(this.clientName=o.name)}let s=[this.$route.params.id];if(e){const{data:o}=await T.from("appointments").select("id").eq("user_id",this.userId).eq("client_id",e.client_id);s=o?o.map(r=>r.id):s}const{data:n}=await T.from("appointment_notes").select().in("appointment_id",s).order("created_at",{ascending:!1});this.notes=(n||[]).map(o=>({...o,attachments:o.attachments||[]}));const i=this.$route.query.note;if(i){const o=this.notes.find(r=>r.id===Number(i)||r.id===i);o&&this.editExistingNote(o)}},async saveNote(){if(!this.note.trim()&&!this.files.length&&!this.editingAttachments.length)return;const t=this.isEditing,e=[];for(const i of this.files){const o=i.name.split(".").pop(),r=`${this.$route.params.id}-${Date.now()}-${Math.random().toString(36).slice(2)}.${o}`,{error:a}=await T.storage.from("appointment-attachments").upload(r,i);if(!a){const{data:{publicUrl:l}}=T.storage.from("appointment-attachments").getPublicUrl(r);e.push(l)}}let s,n;if(this.isEditing){const i=[...this.editingAttachments,...e];if({data:s,error:n}=await T.from("appointment_notes").update({note:this.note,attachments:i}).eq("id",this.editingNoteId).select().single(),!n){const o=this.notes.findIndex(r=>r.id===this.editingNoteId);o!==-1&&(this.notes[o]={...s,attachments:s.attachments||[]})}}else({data:s,error:n}=await T.from("appointment_notes").insert({appointment_id:this.$route.params.id,user_id:this.userId,note:this.note,attachments:e}).select().single()),n||this.notes.unshift({...s,attachments:s.attachments||[]});if(n)alert("Erro ao salvar atendimento: "+n.message);else if(this.note="",this.files=[],this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],!t){const{data:i,error:o}=await T.from("appointments").update({status:"completed"}).eq("id",this.$route.params.id).select().single();!o&&this.appointment&&(this.appointment.status=i.status),this.$router.push("/agendamentos")}}},watch:{"$route.params.id"(){this.fetchData()},"$route.query.note"(t){if(!t){this.isEditing&&this.cancelEdit();return}const e=this.notes.find(s=>s.id===Number(t)||s.id===t);e&&this.editExistingNote(e)}},async mounted(){await this.fetchData()}},aE={class:"min-h-screen flex bg-gray-100 relative"},lE={class:"flex-1 p-4 md:p-8"},cE={key:0,class:"flex items-center mb-4"},dE={class:"bg-white p-4 rounded-lg shadow mt-4"},uE={class:"border-b mb-4"},hE={class:"flex space-x-4"},fE={key:0},pE={class:"mb-2 text-sm text-gray-600"},mE={class:"mb-2 text-sm text-gray-600"},gE={key:0,class:"mb-4 space-y-1"},bE=["href"],yE=["onClick"],xE={class:"space-x-2"},vE={key:1},_E={class:"font-semibold mb-2"},wE={class:"text-sm text-gray-600 mb-1"},kE={class:"mb-2 whitespace-pre-line"},SE={key:0,class:"space-x-2 mb-2"},CE=["href"],ME={class:"text-right"},AE=["onClick"];function PE(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",aE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",lE,[i.sidebarOpen?L("",!0):(b(),v("div",cE,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[8]||(e[8]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Atendimento"}),d("section",dE,[d("div",uE,[d("nav",hE,[d("button",{class:Ve(i.activeTab==="current"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[2]||(e[2]=l=>i.activeTab="current")},"Atendimento",2),d("button",{class:Ve(i.activeTab==="history"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[3]||(e[3]=l=>i.activeTab="history")},"Histórico de atendimento",2)])]),i.activeTab==="current"?(b(),v("div",fE,[d("p",pE,"Data/hora: "+C(o.appointmentDateTime),1),d("p",mE,"Cliente: "+C(i.clientName),1),M(d("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>i.note=l),class:"w-full border rounded p-2 mb-4",rows:"6",placeholder:"Descreva o atendimento"},null,512),[[D,i.note]]),i.isEditing&&i.editingAttachments.length?(b(),v("div",gE,[(b(!0),v(q,null,ne(i.editingAttachments,(l,c)=>(b(),v("div",{key:c,class:"flex items-center space-x-2"},[d("a",{href:l,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+C(c+1),9,bE),d("button",{type:"button",onClick:u=>o.removeAttachment(c),class:"text-red-600 text-sm"},"Remover",8,yE)]))),128))])):L("",!0),d("input",{type:"file",multiple:"",onChange:e[5]||(e[5]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),class:"mb-4",accept:".pdf,.doc,.txt,.png,.jpeg,.jpg"},null,32),d("div",xE,[d("button",{onClick:e[6]||(e[6]=(...l)=>o.saveNote&&o.saveNote(...l)),class:"btn"},C(i.isEditing?"Atualizar":"Finalizar atendimento"),1),i.isEditing?(b(),v("button",{key:0,onClick:e[7]||(e[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-danger"},"Cancelar")):L("",!0)])])):(b(),v("div",vE,[(b(!0),v(q,null,ne(o.groupedNotes,l=>(b(),v("div",{key:l.date,class:"mb-4"},[d("h4",_E,C(l.date),1),(b(!0),v(q,null,ne(l.items,c=>(b(),v("div",{key:c.id,class:"border p-2 rounded mb-2"},[d("p",wE,C(o.formatDateTime(c.created_at)),1),d("p",kE,C(c.note),1),c.attachments&&c.attachments.length?(b(),v("div",SE,[(b(!0),v(q,null,ne(c.attachments,(u,h)=>(b(),v("a",{key:h,href:u,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+C(h+1),9,CE))),128))])):L("",!0),d("div",ME,[d("button",{onClick:u=>o.editExistingNote(c),class:"btn btn-sm"},"Editar atendimento",8,AE)])]))),128))]))),128))]))])])])}const EE=ce(rE,[["render",PE]]),TE={name:"Templates",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],showTemplateModal:!1,templateForm:{name:"",content:""}}},methods:{closeTemplateModal(){this.showTemplateModal=!1,this.templateForm={name:"",content:""}},async handleAddTemplate(){const{data:t,error:e}=await T.from("receipt_templates").insert({name:this.templateForm.name,content:this.templateForm.content,user_id:this.userId}).select().single();e?alert("Erro ao salvar template: "+e.message):(this.templates.push(t),this.closeTemplateModal())}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("receipt_templates").select().eq("user_id",this.userId);e&&(this.templates=e)}},OE={class:"min-h-screen flex bg-gray-100 relative"},DE={class:"flex-1 p-4 md:p-8 space-y-6"},IE={key:0,class:"flex items-center mb-4"},RE={class:"bg-white p-4 rounded-lg shadow space-y-4"},LE={class:"flex justify-between items-center"},FE={class:"overflow-x-auto"},jE={class:"min-w-full text-left"},NE={class:"px-4 py-2"},UE={key:0},BE={class:"flex justify-end space-x-2"};function VE(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",OE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",DE,[i.sidebarOpen?L("",!0):(b(),v("div",IE,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Templates"}),d("section",RE,[d("div",LE,[e[8]||(e[8]=d("h3",{class:"text-lg font-medium"},"Templates",-1)),d("button",{onClick:e[2]||(e[2]=c=>i.showTemplateModal=!0),class:"btn"},"Novo Template")]),d("div",FE,[d("table",jE,[e[10]||(e[10]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.templates,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",NE,C(c.name),1)]))),128)),i.templates.length===0?(b(),v("tr",UE,e[9]||(e[9]=[d("td",{class:"px-4 py-6 text-center text-gray-500"},"Nenhum template",-1)]))):L("",!0)])])])]),i.showTemplateModal?(b(),Ze(l,{key:1,onClose:o.closeTemplateModal},{default:X(()=>[e[15]||(e[15]=d("h3",{class:"text-lg font-semibold mb-4"},"Novo Template",-1)),d("form",{onSubmit:e[6]||(e[6]=Ke((...c)=>o.handleAddTemplate&&o.handleAddTemplate(...c),["prevent"])),class:"space-y-4"},[d("div",null,[e[11]||(e[11]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=c=>i.templateForm.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.templateForm.name]])]),d("div",null,[e[12]||(e[12]=d("label",{class:"block text-sm font-medium text-gray-700"},"Conteúdo",-1)),M(d("textarea",{"onUpdate:modelValue":e[4]||(e[4]=c=>i.templateForm.content=c),class:"w-full mt-1 px-4 py-2 border rounded-md",rows:"4"},null,512),[[D,i.templateForm.content]]),e[13]||(e[13]=d("p",{class:"text-sm text-gray-500 mt-1"},"Use {{client_name}} e {{appointments}}",-1))]),d("div",BE,[d("button",{type:"button",onClick:e[5]||(e[5]=(...c)=>o.closeTemplateModal&&o.closeTemplateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[14]||(e[14]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[15]},8,["onClose"])):L("",!0)])])}const $E=ce(TE,[["render",VE]]),HE={name:"Contato",components:{Navbar:qt,Footer:Kt},data(){return{nome:"",email:"",mensagem:"",sucesso:!1,erro:""}},methods:{async enviar(){if(this.sucesso=!1,this.erro="",this.email&&!Wt(this.email)){this.erro="E-mail inválido";return}const{error:t}=await T.from("contacts").insert({name:this.nome,email:this.email,message:this.mensagem});t?this.erro="Erro ao enviar mensagem: "+t.message:(this.sucesso=!0,this.nome="",this.email="",this.mensagem="")}}},zE={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},WE={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},qE={key:0,class:"mt-4 text-green-600 text-center"},KE={key:1,class:"mt-4 text-red-600 text-center"};function GE(t,e,s,n,i,o){const r=V("Navbar"),a=V("Footer");return b(),v(q,null,[O(r),d("section",zE,[d("div",WE,[e[8]||(e[8]=Hs('<div class="mb-8 text-center"><h2 class="text-3xl font-extrabold text-blue-700">Fale conosco</h2><p class="text-gray-500">Envie sua mensagem e entraremos em contato</p></div><div class="mb-6 text-center"><a href="https://wa.me/5518996233098" target="_blank" rel="noopener" class="btn btn-success inline-flex items-center space-x-2"><img src="'+gp+'" alt="WhatsApp" class="w-5 h-5"><span>Falar via WhatsApp</span></a></div>',2)),d("form",{onSubmit:e[3]||(e[3]=Ke((...l)=>o.enviar&&o.enviar(...l),["prevent"])),class:"space-y-5"},[d("div",null,[e[4]||(e[4]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"nome"},"Nome",-1)),M(d("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.nome=l),id:"nome",type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.nome]])]),d("div",null,[e[5]||(e[5]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(d("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i.email=l),id:"email",type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.email]])]),d("div",null,[e[6]||(e[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"mensagem"},"Mensagem",-1)),M(d("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>i.mensagem=l),id:"mensagem",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4"},null,512),[[D,i.mensagem]])]),e[7]||(e[7]=d("button",{type:"submit",class:"btn w-full"},"Enviar",-1))],32),i.sucesso?(b(),v("p",qE,"Mensagem enviada com sucesso!")):L("",!0),i.erro?(b(),v("p",KE,C(i.erro),1)):L("",!0)])]),O(a)],64)}const YE=ce(HE,[["render",GE]]),JE={name:"MinhaAssinatura",components:{Sidebar:nt,HeaderUser:it},data(){return{sidebarOpen:window.innerWidth>=768}},methods:{goBeta(){this.$router.push({path:"/assinatura-plus",query:{amount:"167.97"}})},goBasico(){this.$router.push("/dashboard")}}},XE={class:"min-h-screen flex bg-gray-100 relative"},QE={class:"flex-1 p-4 md:p-8 space-y-6"},ZE={key:0,class:"flex items-center mb-4"},eT={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tT={class:"bg-white p-6 rounded-lg shadow space-y-4"},sT={class:"bg-white p-6 rounded-lg shadow space-y-4"};function nT(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",XE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",QE,[i.sidebarOpen?L("",!0):(b(),v("div",ZE,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[4]||(e[4]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Minha Assinatura"}),d("section",eT,[d("div",tT,[e[5]||(e[5]=Hs('<h3 class="text-xl font-semibold text-center">Básico</h3><p class="text-center text-2xl font-bold text-blue-600">Grátis</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de até 5 pacientes</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),d("button",{class:"btn mt-4 w-full",onClick:e[2]||(e[2]=(...l)=>o.goBasico&&o.goBasico(...l))},"Escolher")]),d("div",sT,[e[6]||(e[6]=Hs('<h3 class="text-xl font-semibold text-center">Beta</h3><p class="text-center text-2xl font-bold line-through text-gray-400">R$167,97</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de pacientes ilimitado</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),d("button",{class:"btn mt-4 w-full",onClick:e[3]||(e[3]=(...l)=>o.goBeta&&o.goBeta(...l))},"Escolher")])])])])}const iT=ce(JE,[["render",nT]]),oT={name:"Faturamento",components:{Sidebar:nt,HeaderUser:it},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,services:[],selectedServices:[],filterStart:"",filterEnd:"",groupBy:"mes",revenueData:[],chart:null}},methods:{async fetchServices(){const{data:t}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);this.services=t||[],this.selectedServices=this.services.map(e=>e.id)},async fetchRevenue(){if(!this.filterStart||!this.filterEnd)return;const{data:t}=await T.from("appointments").select("date, service_id").eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd),e=t||[],s={};this.services.forEach(o=>{s[o.id]=Number(o.price)||0});const n=this.selectedServices.length?e.filter(o=>this.selectedServices.includes(o.service_id)):e,i={};n.forEach(o=>{const r=new Date(o.date);let a="";if(this.groupBy==="dia")a=r.toISOString().split("T")[0];else if(this.groupBy==="semana"){const c=this.getWeekNumber(r);a=`${r.getFullYear()}-W${c}`}else a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`;const l=s[o.service_id]||0;i[a]=(i[a]||0)+l}),this.revenueData=Object.keys(i).sort().map(o=>({label:o,total:i[o]})),this.renderChart()},getWeekNumber(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-n)/864e5+1)/7)},renderChart(){const t=this.$refs.chartCanvas.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new ss(t,{type:"bar",data:{labels:this.revenueData.map(e=>this.formatLabel(e.label)),datasets:[{label:"Faturamento",data:this.revenueData.map(e=>e.total),backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},formatPrice(t){return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatLabel(t){if(this.groupBy==="dia")return ze(t);if(this.groupBy==="semana"){const[e,s]=t.split("-W");return`Semana ${s}/${e}`}if(this.groupBy==="mes"){const[e,s]=t.split("-");return`${s.padStart(2,"0")}/${e}`}return t}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchServices();const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);this.filterStart=s.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0]}},rT={class:"min-h-screen flex bg-gray-100 relative"},aT={class:"flex-1 p-4 md:p-8 space-y-6"},lT={key:0,class:"flex items-center mb-4"},cT={class:"bg-white p-4 rounded-lg shadow space-y-4"},dT={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},uT={class:"mt-1 space-y-1"},hT=["value"],fT={class:"md:col-span-2"},pT={class:"grid grid-cols-2 gap-2 mt-1"},mT={class:"flex flex-col mt-3"},gT={class:"flex justify-end"},bT={class:"bg-white p-4 rounded-lg shadow space-y-4"},yT={class:"overflow-x-auto"},xT={class:"min-w-full text-left"},vT={class:"px-4 py-2"},_T={class:"px-4 py-2"},wT={key:0},kT={class:"h-64"},ST={ref:"chartCanvas",class:"w-full h-full"};function CT(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",rT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",aT,[i.sidebarOpen?L("",!0):(b(),v("div",lT,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Relatório de Faturamento"}),d("section",cT,[d("div",dT,[d("div",null,[e[8]||(e[8]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviços",-1)),d("div",uT,[(b(!0),v(q,null,ne(i.services,l=>(b(),v("label",{key:l.id,class:"flex items-center space-x-2"},[M(d("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[2]||(e[2]=c=>i.selectedServices=c)},null,8,hT),[[hl,i.selectedServices]]),d("span",null,C(l.name),1)]))),128))])]),d("div",fT,[e[13]||(e[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"Datas",-1)),d("div",pT,[d("div",null,[e[9]||(e[9]=d("label",{class:"block text-xs font-medium text-gray-700"},"De",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>i.filterStart=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.filterStart]])]),d("div",null,[e[10]||(e[10]=d("label",{class:"block text-xs font-medium text-gray-700"},"Até",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>i.filterEnd=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.filterEnd]])])]),d("div",mT,[e[12]||(e[12]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),M(d("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},e[11]||(e[11]=[d("option",{value:"mes"},"Mês",-1),d("option",{value:"semana"},"Semana",-1),d("option",{value:"dia"},"Dia",-1)]),512),[[Ce,i.groupBy]])])])]),d("div",gT,[d("button",{onClick:e[6]||(e[6]=(...l)=>o.fetchRevenue&&o.fetchRevenue(...l)),class:"btn"},"Aplicar")])]),d("section",bT,[d("div",yT,[d("table",xT,[e[15]||(e[15]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Faturamento")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.revenueData,l=>(b(),v("tr",{key:l.label,class:"border-b last:border-b-0"},[d("td",vT,C(o.formatLabel(l.label)),1),d("td",_T,C(o.formatPrice(l.total)),1)]))),128)),i.revenueData.length===0?(b(),v("tr",wT,e[14]||(e[14]=[d("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):L("",!0)])])]),d("div",kT,[d("canvas",ST,null,512)])])])])}const MT=ce(oT,[["render",CT]]),AT={name:"RelatorioAgendamentos",components:{Sidebar:nt,HeaderUser:it},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,clients:[],services:[],appointments:[],filterStart:"",filterEnd:"",clientId:""}},methods:{formatDateBR:ze,addHoursToTime:gt,setPeriodo(t){const e=new Date;let s=new Date(e),n=new Date(e);if(t==="semana"){const i=e.getDay(),o=i===0?6:i-1;s.setDate(e.getDate()-o),n=new Date(s),n.setDate(s.getDate()+6)}else t==="mes"&&(s=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0));this.filterStart=s.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0],this.fetchAppointments()},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getStatusLabel(t){return t.status==="completed"?"atendimento realizado":t.status==="no_show"?"faltou":"atendimento pendente"},async fetchAppointments(){if(!this.filterStart||!this.filterEnd)return;let t=T.from("appointments").select().eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd);this.clientId&&(t=t.eq("client_id",this.clientId));const{data:e}=await t.order("date",{ascending:!0}).order("time",{ascending:!0});this.appointments=e||[]}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);s&&(this.services=s);const i=new Date().toISOString().split("T")[0];this.filterStart=i,this.filterEnd=i,this.fetchAppointments()}},PT={class:"min-h-screen flex bg-gray-100 relative"},ET={class:"flex-1 p-4 md:p-8 space-y-6"},TT={key:0,class:"flex items-center mb-4"},OT={class:"bg-white p-4 rounded-lg shadow space-y-4"},DT={class:"flex flex-col md:flex-row md:items-end md:space-x-4 space-y-4 md:space-y-0"},IT={class:"flex flex-wrap gap-2"},RT={class:"flex space-x-2"},LT=["value"],FT={class:"bg-white p-4 rounded-lg shadow"},jT={class:"overflow-x-auto"},NT={class:"min-w-full text-left"},UT={class:"px-4 py-2"},BT={class:"px-4 py-2"},VT={class:"px-4 py-2"},$T={class:"px-4 py-2"},HT={key:0};function zT(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",PT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",ET,[i.sidebarOpen?L("",!0):(b(),v("div",TT,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[9]||(e[9]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Relatório de Agendamentos"}),d("section",OT,[d("div",DT,[d("div",IT,[d("button",{class:"btn btn-sm",onClick:e[2]||(e[2]=l=>o.setPeriodo("dia"))},"Dia"),d("button",{class:"btn btn-sm",onClick:e[3]||(e[3]=l=>o.setPeriodo("semana"))},"Semana"),d("button",{class:"btn btn-sm",onClick:e[4]||(e[4]=l=>o.setPeriodo("mes"))},"Mês")]),d("div",RT,[M(d("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=l=>i.filterStart=l),class:"border px-3 py-2 rounded"},null,512),[[D,i.filterStart]]),M(d("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>i.filterEnd=l),class:"border px-3 py-2 rounded"},null,512),[[D,i.filterEnd]])]),d("div",null,[M(d("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>i.clientId=l),class:"border px-3 py-2 rounded"},[e[10]||(e[10]=d("option",{value:""},"Todos os clientes",-1)),(b(!0),v(q,null,ne(i.clients,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,LT))),128))],512),[[Ce,i.clientId]])]),d("button",{onClick:e[8]||(e[8]=(...l)=>o.fetchAppointments&&o.fetchAppointments(...l)),class:"btn"},"Aplicar")])]),d("section",FT,[d("div",jT,[d("table",NT,[e[12]||(e[12]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Horário do Atendimento"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Paciente"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Status")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(i.appointments,l=>(b(),v("tr",{key:l.id,class:"border-b last:border-b-0"},[d("td",UT,C(o.formatDateBR(l.date))+" "+C(o.addHoursToTime(l.time)),1),d("td",BT,C(o.getClientName(l.client_id)),1),d("td",VT,C(o.getServiceName(l.service_id)),1),d("td",$T,C(o.getStatusLabel(l)),1)]))),128)),i.appointments.length===0?(b(),v("tr",HT,e[11]||(e[11]=[d("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):L("",!0)])])])])])])}const WT=ce(AT,[["render",zT]]),qT={name:"Recebimento",components:{Sidebar:nt,HeaderUser:it},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,clients:[],services:[],appointments:[],clientId:"",serviceId:"",filterStart:"",groupBy:"none",filterEnd:"",paidFilter:"all"}},computed:{displayRows(){if(this.groupBy==="none")return this.appointments;const t={};return this.appointments.forEach(e=>{const s=this.getServicePrice(e.service_id);let n="";this.groupBy==="client"?n=`c${e.client_id}`:this.groupBy==="service"?n=`s${e.service_id}`:this.groupBy==="status"&&(n=e.paid?"paid":"open"),t[n]||(t[n]={key:n,client_id:this.groupBy==="client"?e.client_id:null,service_id:this.groupBy==="service"?e.service_id:null,status:this.groupBy==="status"?e.paid:null,total:0}),t[n].total+=s}),Object.values(t)},totalAmount(){return this.groupBy==="none"?this.appointments.reduce((t,e)=>t+this.getServicePrice(e.service_id),0):this.displayRows.reduce((t,e)=>t+e.total,0)}},methods:{formatDateBR:ze,addHoursToTime:gt,formatPrice(t){return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getServicePrice(t){const e=this.services.find(s=>s.id===t);return e&&e.price||0},async fetchAppointments(){if(!this.filterStart||!this.filterEnd)return;let t=T.from("appointments").select().eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd);this.clientId&&(t=t.eq("client_id",this.clientId)),this.serviceId&&(t=t.eq("service_id",this.serviceId)),this.paidFilter==="paid"?t=t.eq("paid",!0):this.paidFilter==="open"&&(t=t.eq("paid",!1));const{data:e}=await t.order("date",{ascending:!0}).order("time",{ascending:!0});this.appointments=e||[]}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await T.from("services").select().eq("user_id",this.userId).eq("active",!0);s&&(this.services=s);const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),1);this.filterStart=i.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0],this.fetchAppointments()}},KT={class:"min-h-screen flex bg-gray-100 relative"},GT={class:"flex-1 p-4 md:p-8 space-y-6"},YT={key:0,class:"flex items-center mb-4"},JT={class:"bg-white p-4 rounded-lg shadow space-y-4"},XT={class:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end"},QT=["value"],ZT=["value"],eO={class:"flex justify-end"},tO={class:"bg-white p-4 rounded-lg shadow"},sO={class:"overflow-x-auto"},nO={class:"min-w-full text-left"},iO={class:"px-4 py-2"},oO={key:0},rO={class:"px-4 py-2"},aO={key:0},lO={class:"px-4 py-2"},cO={key:0},dO={class:"px-4 py-2"},uO={class:"px-4 py-2"},hO={key:0},fO={key:0},pO={class:"px-4 py-2 font-semibold"};function mO(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",KT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",GT,[i.sidebarOpen?L("",!0):(b(),v("div",YT,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[9]||(e[9]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Relatório de Recebimento"}),d("section",JT,[d("div",XT,[d("div",null,[e[11]||(e[11]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cliente",-1)),M(d("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>i.clientId=l),class:"w-full px-4 py-2 border rounded-md"},[e[10]||(e[10]=d("option",{value:""},"Todos",-1)),(b(!0),v(q,null,ne(i.clients,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,QT))),128))],512),[[Ce,i.clientId]])]),d("div",null,[e[13]||(e[13]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Serviço",-1)),M(d("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>i.serviceId=l),class:"w-full px-4 py-2 border rounded-md"},[e[12]||(e[12]=d("option",{value:""},"Todos",-1)),(b(!0),v(q,null,ne(i.services,l=>(b(),v("option",{key:l.id,value:l.id},C(l.name),9,ZT))),128))],512),[[Ce,i.serviceId]])]),d("div",null,[e[14]||(e[14]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"De",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>i.filterStart=l),class:"w-full px-4 py-2 border rounded-md"},null,512),[[D,i.filterStart]])]),d("div",null,[e[15]||(e[15]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Até",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=l=>i.filterEnd=l),class:"w-full px-4 py-2 border rounded-md"},null,512),[[D,i.filterEnd]])]),d("div",null,[e[17]||(e[17]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agendamentos",-1)),M(d("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>i.paidFilter=l),class:"w-full px-4 py-2 border rounded-md"},e[16]||(e[16]=[d("option",{value:"all"},"Todos",-1),d("option",{value:"paid"},"Pagos",-1),d("option",{value:"open"},"Em aberto",-1)]),512),[[Ce,i.paidFilter]])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),M(d("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>i.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},e[18]||(e[18]=[d("option",{value:"none"},"Nenhum",-1),d("option",{value:"client"},"Cliente",-1),d("option",{value:"service"},"Serviço",-1),d("option",{value:"status"},"Status",-1)]),512),[[Ce,i.groupBy]])])]),d("div",eO,[d("button",{onClick:e[8]||(e[8]=(...l)=>o.fetchAppointments&&o.fetchAppointments(...l)),class:"btn"},"Aplicar")])]),d("section",tO,[d("div",sO,[d("table",nO,[e[23]||(e[23]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Horário do Atendimento"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Status")])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.displayRows,l=>(b(),v("tr",{key:l.id||l.key,class:"border-b last:border-b-0"},[d("td",iO,[i.groupBy==="none"?(b(),v("span",oO,C(o.formatDateBR(l.date))+" "+C(o.addHoursToTime(l.time)),1)):L("",!0)]),d("td",rO,[i.groupBy==="none"||i.groupBy==="client"?(b(),v("span",aO,C(o.getClientName(l.client_id)),1)):L("",!0)]),d("td",lO,[i.groupBy==="none"||i.groupBy==="service"?(b(),v("span",cO,C(o.getServiceName(l.service_id)),1)):L("",!0)]),d("td",dO,C(o.formatPrice(i.groupBy==="none"?o.getServicePrice(l.service_id):l.total)),1),d("td",uO,[i.groupBy==="none"||i.groupBy==="status"?(b(),v("span",hO,C((i.groupBy==="status"?l.status:l.paid)?"Pago":"pagamento em aberto"),1)):L("",!0)])]))),128)),o.displayRows.length===0?(b(),v("tr",fO,e[20]||(e[20]=[d("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"},"Nenhum registro",-1)]))):L("",!0),d("tr",null,[e[21]||(e[21]=d("td",{colspan:"3",class:"px-4 py-2 text-right font-semibold"},"Total",-1)),d("td",pO,C(o.formatPrice(o.totalAmount)),1),e[22]||(e[22]=d("td",null,null,-1))])])])])])])])}const gO=ce(qT,[["render",mO]]),bO={name:"Faq",components:{Navbar:qt,Footer:Kt},data(){return{faqs:[{question:"Como me cadastro?",answer:'Clique em "Cadastre-se" no menu e preencha o formulário.'},{question:"Posso cancelar a qualquer momento?",answer:"Sim, você pode cancelar seu plano a hora que quiser sem taxas adicionais."},{question:"Como entro em contato com o suporte?",answer:"Utilize a página de contato para nos enviar sua mensagem."}]}}},yO={class:"min-h-screen flex flex-col bg-gray-100"},xO={class:"flex-1 max-w-3xl mx-auto p-8"},vO={class:"space-y-6"},_O={class:"font-semibold text-blue-600 mb-2"},wO={class:"text-gray-700"};function kO(t,e,s,n,i,o){const r=V("Navbar"),a=V("Footer");return b(),v(q,null,[O(r),d("div",yO,[d("main",xO,[e[0]||(e[0]=d("h1",{class:"text-3xl font-bold text-center mb-8"},"Perguntas Frequentes",-1)),d("div",vO,[(b(!0),v(q,null,ne(i.faqs,(l,c)=>(b(),v("div",{key:c,class:"bg-white p-6 rounded-lg shadow"},[d("h2",_O,C(l.question),1),d("p",wO,C(l.answer),1)]))),128))])]),O(a)])],64)}const SO=ce(bO,[["render",kO]]),CO={name:"PoliticaPrivacidade",components:{Navbar:qt,Footer:Kt}};function MO(t,e,s,n,i,o){const r=V("Navbar"),a=V("Footer");return b(),v(q,null,[O(r),e[0]||(e[0]=d("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[d("h1",{class:"text-3xl font-bold text-center mb-4"},"Política de Privacidade"),d("p",null,"Esta política descreve como tratamos seus dados pessoais e garante a transparência sobre o uso das suas informações."),d("p",null,"Utilizamos seus dados apenas para prover nossos serviços de agendamento e nunca os compartilhamos com terceiros sem consentimento."),d("p",null,"Ao utilizar o Agenda Zen você concorda com esta política. Em caso de dúvidas entre em contato conosco.")],-1)),O(a)],64)}const AO=ce(CO,[["render",MO]]),PO={name:"TermosDeUso",components:{Navbar:qt,Footer:Kt}};function EO(t,e,s,n,i,o){const r=V("Navbar"),a=V("Footer");return b(),v(q,null,[O(r),e[0]||(e[0]=d("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[d("h1",{class:"text-3xl font-bold text-center mb-4"},"Termos de Uso"),d("p",null,"Estes termos definem as regras para utilização da plataforma Agenda Zen. Ao criar uma conta você concorda em segui-los."),d("p",null,"O serviço deve ser utilizado apenas para atividades lícitas e em conformidade com a legislação vigente. Contas que violem estas condições poderão ser suspensas."),d("p",null,"Podemos atualizar estes termos periodicamente. Avisaremos sobre mudanças importantes diretamente no site.")],-1)),O(a)],64)}const TO=ce(PO,[["render",EO]]);function wn(t,e){const s=String(e.length).padStart(2,"0");return`${t}${s}${e}`}function OO(t){let e=65535;for(let s=0;s<t.length;s++){e^=t.charCodeAt(s)<<8;for(let n=0;n<8;n++)e&32768?e=e<<1^4129:e<<=1,e&=65535}return e.toString(16).toUpperCase().padStart(4,"0")}function bp({key:t,name:e,city:s="SAO PAULO",amount:n,txid:i="AGENDAZEN"}){const o=e.slice(0,25),r=wn("00","BR.GOV.BCB.PIX")+wn("01",t),a=wn("05",i),l="00020101021126"+String(r.length).padStart(2,"0")+r+"520400005303986"+(n?wn("54",n):"")+"5802BR"+wn("59",o)+wn("60",s)+"62"+String(a.length).padStart(2,"0")+a+"6304",c=OO(l);return l+c}const DO="/icons/visa.svg",IO="/icons/mastercard.svg",RO="/icons/amex.svg",LO="/icons/elo.svg",yp="/logo_pix.png",FO={name:"PagamentoPlus",components:{Sidebar:nt,HeaderUser:it},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"pix",card:{name:"",number:"",expiry:"",cvv:"",document:""},billing:{cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""},pixAmount:"167.97",pixCode:"",pixQrCode:""}},mounted(){const t=this.$route.query.amount;t&&(this.pixAmount=t),this.generatePix()},methods:{generatePix(){const t=bp({key:"37775989840",name:"Jeferson Carlos A de Paula",amount:this.pixAmount});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}}},jO={class:"min-h-screen flex bg-gray-100 relative"},NO={class:"flex-1 p-8 space-y-6"},UO={key:0,class:"flex items-center mb-4"},BO={class:"mb-6 space-x-2"},VO={key:1,class:"space-y-6 max-w-3xl"},$O={class:"grid grid-cols-2 gap-4"},HO={class:"space-y-4 mt-4"},zO={class:"grid grid-cols-2 gap-4"},WO={class:"grid grid-cols-2 gap-4"},qO={key:2,class:"space-y-6 max-w-3xl"},KO={class:"text-center space-y-4"},GO=["src"],YO={class:"text-lg font-semibold"};function JO(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser");return b(),v("div",jO,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",NO,[i.sidebarOpen?L("",!0):(b(),v("div",UO,[d("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[17]||(e[17]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Pagamento"}),d("nav",BO,[d("button",{onClick:e[2]||(e[2]=l=>i.activeTab="cartao"),class:Ve([i.activeTab==="cartao"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Cartão de Crédito",2),d("button",{onClick:e[3]||(e[3]=l=>i.activeTab="pix"),class:Ve([i.activeTab==="pix"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Pix",2)]),i.activeTab==="cartao"?(b(),v("section",VO,[e[31]||(e[31]=Hs('<div class="flex justify-center space-x-2 mb-4"><img src="'+DO+'" alt="Visa" class="h-8"><img src="'+IO+'" alt="Mastercard" class="h-8"><img src="'+RO+'" alt="American Express" class="h-8"><img src="'+LO+'" alt="Elo" class="h-8"></div>',1)),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome (igual no cartão)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>i.card.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.card.name]])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número do cartão",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>i.card.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.card.number]])]),d("div",$O,[d("div",null,[e[20]||(e[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Validade (MM/AA)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>i.card.expiry=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.card.expiry]])]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Código de Segurança (CVV)",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>i.card.cvv=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.card.cvv]])])]),d("div",null,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF/CNPJ",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>i.card.document=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.card.document]])]),d("div",HO,[e[30]||(e[30]=d("h3",{class:"text-md font-semibold"},"Endereço de cobrança",-1)),d("div",null,[e[23]||(e[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>i.billing.cep=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.cep]])]),d("div",null,[e[24]||(e[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"Rua",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>i.billing.street=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.street]])]),d("div",zO,[d("div",null,[e[25]||(e[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>i.billing.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.number]])]),d("div",null,[e[26]||(e[26]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>i.billing.complement=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.complement]])])]),d("div",null,[e[27]||(e[27]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>i.billing.neighborhood=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.neighborhood]])]),d("div",WO,[d("div",null,[e[28]||(e[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=l=>i.billing.city=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.city]])]),d("div",null,[e[29]||(e[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=l=>i.billing.state=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.billing.state]])])])]),e[32]||(e[32]=d("div",{class:"text-right mt-4"},[d("button",{class:"btn"},"Pagar")],-1))])):L("",!0),i.activeTab==="pix"?(b(),v("section",qO,[d("div",KO,[e[33]||(e[33]=d("img",{src:yp,alt:"Logo Pix",class:"mx-auto w-[17.6rem] h-auto"},null,-1)),i.pixQrCode?(b(),v("img",{key:0,src:i.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,GO)):L("",!0),e[34]||(e[34]=d("p",{class:"font-semibold"},"Código de pagamento",-1)),e[35]||(e[35]=d("p",null,"Copie e cole o código abaixo no app da sua instituição financeira para finalizar a compra.",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>i.pixCode=l),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[D,i.pixCode]]),e[36]||(e[36]=d("p",{class:"font-semibold"},"Valor do pagamento",-1)),d("p",YO,"R$ "+C(i.pixAmount.replace(".",",")),1)])])):L("",!0)])])}const XO=ce(FO,[["render",JO]]),QO={name:"ProfileFooter",props:{profile:{type:Object,required:!0}}},ZO={key:0,class:"bg-gray-100 py-6"},eD={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},tD={class:"space-x-4 text-blue-600"},sD=["href"],nD=["href"],iD=["href"],oD=["href"],rD={class:"text-sm text-gray-500"};function aD(t,e,s,n,i,o){return s.profile?(b(),v("footer",ZO,[d("div",eD,[d("div",tD,[s.profile.instagram?(b(),v("a",{key:0,href:s.profile.instagram,class:"hover:underline"},"Instagram",8,sD)):L("",!0),s.profile.facebook?(b(),v("a",{key:1,href:s.profile.facebook,class:"hover:underline"},"Facebook",8,nD)):L("",!0),s.profile.youtube?(b(),v("a",{key:2,href:s.profile.youtube,class:"hover:underline"},"YouTube",8,iD)):L("",!0),s.profile.x?(b(),v("a",{key:3,href:s.profile.x,class:"hover:underline"},"X (Twitter)",8,oD)):L("",!0)]),d("p",rD,"© "+C(new Date().getFullYear())+" "+C(s.profile.business_name),1)])])):L("",!0)}const lD=ce(QO,[["render",aD]]),cD={name:"PagamentoAgendamento",components:{ProfileFooter:lD},data(){return{profile:null,appointment:null,service:null,pixCode:"",pixQrCode:""}},methods:{phoneMask:Yn,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},generatePix(){if(!this.profile||!this.service)return;const t=bp({key:this.profile.pix_key,name:this.profile.business_name,amount:String(this.service.price)});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}},async mounted(){const t=this.$route.params.id,{data:e,error:s}=await T.from("appointments").select("*").eq("id",t).single();if(s){console.error("Erro ao buscar agendamento:",s.message);return}if(e){this.appointment=e;const{data:n}=await T.from("services").select("price").eq("id",e.service_id).single();this.service=n;const{data:i}=await T.from("profiles").select("pix_key,business_name,whatsapp,image_url,area_atuacao,description,instagram,facebook,youtube,x").eq("id",e.user_id).single();this.profile=i,this.generatePix()}}},dD={class:"flex flex-col min-h-screen"},uD={key:0,class:"bg-blue-600 text-white py-12"},hD={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},fD=["src"],pD={class:"text-4xl font-bold"},mD={key:0,class:"text-sm"},gD={class:"text-lg"},bD={class:"flex-1 flex items-center justify-center bg-gray-100 px-4"},yD={key:0,class:"bg-white p-8 rounded-lg shadow w-full max-w-md space-y-4 text-center mt-8"},xD=["src"],vD={class:"text-lg font-semibold"},_D={class:"text-sm text-gray-600"},wD={key:1,class:"text-gray-500"};function kD(t,e,s,n,i,o){const r=V("ProfileFooter");return b(),v("div",dD,[i.profile?(b(),v("section",uD,[d("div",hD,[d("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,fD),d("h1",pD,C(i.profile.business_name),1),i.profile.area_atuacao?(b(),v("p",mD,C(i.profile.area_atuacao),1)):L("",!0),d("p",gD,C(i.profile.description),1)])])):L("",!0),d("section",bD,[i.profile&&i.service?(b(),v("div",yD,[e[1]||(e[1]=d("img",{src:yp,alt:"Pix",class:"mx-auto w-44 h-auto"},null,-1)),i.pixQrCode?(b(),v("img",{key:0,src:i.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,xD)):L("",!0),e[2]||(e[2]=d("p",{class:"font-semibold"},"Código de pagamento",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.pixCode=a),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[D,i.pixCode]]),e[3]||(e[3]=d("p",{class:"font-semibold"},"Valor do pagamento",-1)),d("p",vD,C(o.formatPrice(i.service.price)),1),d("p",_D,"Após o pagamento envie o comprovante para "+C(o.phoneMask(i.profile.whatsapp)),1)])):(b(),v("div",wD,"Carregando..."))]),i.profile?(b(),Ze(r,{key:1,profile:i.profile},null,8,["profile"])):L("",!0)])}const SD=ce(cD,[["render",kD]]),CD={name:"Confirmacao",components:{Navbar:qt,Footer:Kt}},MD={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},AD={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},PD={class:"flex justify-center space-x-4"};function ED(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("section",MD,[d("div",AD,[e[2]||(e[2]=d("img",{src:cs,alt:"Sucesso",class:"w-16 h-16 mx-auto text-green-500"},null,-1)),e[3]||(e[3]=d("h1",{class:"text-2xl font-bold text-green-600"},"Cadastro efetuado com sucesso",-1)),d("div",PD,[O(a,{to:"/",class:"btn inline-block"},{default:X(()=>e[0]||(e[0]=[te("Início")])),_:1,__:[0]}),O(a,{to:"/login",class:"btn inline-block"},{default:X(()=>e[1]||(e[1]=[te("Login")])),_:1,__:[1]})])])]),O(l)],64)}const TD=ce(CD,[["render",ED]]),OD="/icons/error.svg",DD={name:"LinkExpirado",components:{Navbar:qt,Footer:Kt},data(){return{email:""}},methods:{async reenviarLink(){if(!Wt(this.email)){alert("E-mail inválido");return}const{error:t}=await T.auth.resend({type:"signup",email:this.email});alert(t?"Erro ao reenviar link: "+t.message:"Link reenviado! Verifique seu e-mail.")}}},ID={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},RD={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},LD={class:"flex justify-center space-x-4"};function FD(t,e,s,n,i,o){const r=V("Navbar"),a=V("router-link"),l=V("Footer");return b(),v(q,null,[O(r),d("section",ID,[d("div",RD,[e[3]||(e[3]=d("img",{src:OD,alt:"Erro",class:"w-16 h-16 mx-auto text-red-500"},null,-1)),e[4]||(e[4]=d("h1",{class:"text-2xl font-bold text-red-600"},"Link expirado ou inválido",-1)),e[5]||(e[5]=d("p",{class:"text-gray-700"},"Informe seu e-mail para receber um novo link de confirmação.",-1)),M(d("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.email=c),type:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[D,i.email]]),d("div",LD,[d("button",{onClick:e[1]||(e[1]=(...c)=>o.reenviarLink&&o.reenviarLink(...c)),class:"btn"},"Reenviar link"),O(a,{to:"/",class:"btn"},{default:X(()=>e[2]||(e[2]=[te("Início")])),_:1,__:[2]})])])]),O(l)],64)}const jD=ce(DD,[["render",FD]]),ND={name:"Despesas",components:{Sidebar:nt,HeaderUser:it,Modal:os},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,search:"",expenses:[],showModal:!1,editingId:null,form:{title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}}},computed:{filteredExpenses(){const t=this.search.toLowerCase();return this.expenses.filter(e=>e.title.toLowerCase().includes(t)||e.amount!==null&&e.amount.toString().includes(t))}},methods:{openModal(t){t?(this.editingId=t.id,this.form={title:t.title,amount:this.formatPrice(t.amount),dueDate:t.due_date,paidDate:t.paid_date||"",fixed:t.fixed,repeat:t.repeat_months||1}):(this.editingId=null,this.form={title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}),this.showModal=!0},closeModal(){this.showModal=!1,this.editingId=null,this.form={title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatDateBR:ze,currencyMask:Wx,async handleSaveExpense(){const t=qx(this.form.amount);if(this.editingId){const{data:e,error:s}=await T.from("expenses").update({title:this.form.title,amount:t,due_date:this.form.dueDate,paid_date:this.form.paidDate||null,fixed:this.form.fixed,repeat_months:this.form.fixed?this.form.repeat:null}).eq("id",this.editingId).select().single();if(s){alert("Erro ao salvar despesa: "+s.message);return}const n=this.expenses.findIndex(i=>i.id===this.editingId);n!==-1&&(this.expenses[n]=e)}else{const e={title:this.form.title,amount:t,due_date:this.form.dueDate,paid_date:this.form.paidDate||null,fixed:this.form.fixed,repeat_months:this.form.fixed?this.form.repeat:null,user_id:this.userId},s=[e];if(this.form.fixed&&this.form.repeat>=1)for(let o=1;o<=this.form.repeat;o++)s.push({...e,due_date:Yc(this.form.dueDate,o),paid_date:this.form.paidDate?Yc(this.form.paidDate,o):null,repeat_months:null});const{data:n,error:i}=await T.from("expenses").insert(s).select();if(i){alert("Erro ao salvar despesa: "+i.message);return}this.expenses.push(...n)}this.closeModal()},async handleDeleteExpense(t){if(!confirm("Tem certeza que deseja excluir esta despesa?"))return;const{error:s}=await T.from("expenses").delete().eq("id",t);s?alert("Erro ao excluir despesa: "+s.message):this.expenses=this.expenses.filter(n=>n.id!==t)}},async mounted(){const{data:{user:t}}=await T.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await T.from("expenses").select().eq("user_id",this.userId);e&&(this.expenses=e)}},UD={class:"min-h-screen flex bg-gray-100 relative"},BD={class:"flex-1 p-4 md:p-8 space-y-6"},VD={key:0,class:"flex items-center mb-4"},$D={class:"bg-white p-4 rounded-lg shadow"},HD={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},zD={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},WD={class:"overflow-x-auto"},qD={class:"min-w-full text-left"},KD={class:"px-4 py-2"},GD={class:"px-4 py-2"},YD={class:"px-4 py-2"},JD={class:"px-4 py-2"},XD={class:"px-4 py-2"},QD={class:"px-4 py-2 text-right space-x-2"},ZD=["onClick"],eI=["onClick"],tI={key:0},sI={class:"text-lg font-semibold mb-4"},nI={key:0},iI=["value"];function oI(t,e,s,n,i,o){const r=V("Sidebar"),a=V("HeaderUser"),l=V("Modal");return b(),v("div",UD,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",BD,[i.sidebarOpen?L("",!0):(b(),v("div",VD,[d("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Despesas"}),d("section",$D,[d("div",HD,[e[13]||(e[13]=d("h3",{class:"text-lg font-medium"},"Despesas cadastradas",-1)),d("div",zD,[M(d("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[D,i.search]]),d("button",{onClick:e[3]||(e[3]=c=>o.openModal()),class:"btn w-full sm:w-auto"},"Nova Despesa")])]),d("div",WD,[d("table",qD,[e[15]||(e[15]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Título"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Vencimento"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Pagamento"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Tipo"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(b(!0),v(q,null,ne(o.filteredExpenses,c=>(b(),v("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",KD,C(c.title),1),d("td",GD,C(o.formatPrice(c.amount)),1),d("td",YD,C(o.formatDateBR(c.due_date)),1),d("td",JD,C(c.paid_date?o.formatDateBR(c.paid_date):"-"),1),d("td",XD,C(c.fixed?"Fixa":"Variável"),1),d("td",QD,[d("button",{onClick:u=>o.openModal(c),class:"btn btn-sm"},"Editar",8,ZD),d("button",{onClick:u=>o.handleDeleteExpense(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,eI)])]))),128)),o.filteredExpenses.length===0?(b(),v("tr",tI,e[14]||(e[14]=[d("td",{colspan:"6",class:"px-4 py-6 text-center text-gray-500"},"Nenhuma despesa",-1)]))):L("",!0)])])])]),i.showModal?(b(),Ze(l,{key:1,onClose:o.closeModal},{default:X(()=>[d("h3",sI,C(i.editingId?"Editar Despesa":"Nova Despesa"),1),d("form",{onSubmit:e[11]||(e[11]=Ke((...c)=>o.handleSaveExpense&&o.handleSaveExpense(...c),["prevent"])),class:"space-y-4"},[d("div",null,[e[16]||(e[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"Título da despesa",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>i.form.title=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.title]])]),d("div",null,[e[17]||(e[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Valor da despesa",-1)),M(d("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.form.amount=c),onInput:e[6]||(e[6]=c=>i.form.amount=o.currencyMask(i.form.amount)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[D,i.form.amount]])]),d("div",null,[e[18]||(e[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de Vencimento",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=c=>i.form.dueDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.dueDate]])]),d("div",null,[e[19]||(e[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de Pagamento",-1)),M(d("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=c=>i.form.paidDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[D,i.form.paidDate]])]),d("div",null,[e[21]||(e[21]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fixa ou Variável?",-1)),M(d("select",{"onUpdate:modelValue":e[9]||(e[9]=c=>i.form.fixed=c),class:"w-full px-4 py-2 border rounded-md"},e[20]||(e[20]=[d("option",{value:!1},"Variável",-1),d("option",{value:!0},"Fixa",-1)]),512),[[Ce,i.form.fixed]])]),i.form.fixed?(b(),v("div",nI,[e[22]||(e[22]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Replicar por",-1)),M(d("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>i.form.repeat=c),class:"w-full px-4 py-2 border rounded-md"},[(b(),v(q,null,ne(12,c=>d("option",{key:c,value:c},C(c)+" mês"+C(c>1?"es":""),9,iI)),64))],512),[[Ce,i.form.repeat]])])):L("",!0),e[23]||(e[23]=d("div",{class:"text-right"},[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)]),_:1},8,["onClose"])):L("",!0)])])}const rI=ce(ND,[["render",oI]]),aI=[{path:"/",name:"Home",component:M0},{path:"/cadastro",name:"Signup",component:Qx},{path:"/confirmacao",name:"Confirmacao",component:TD},{path:"/link-expirado",name:"LinkExpirado",component:jD},{path:"/login",name:"Login",component:ov},{path:"/onboarding",name:"Onboarding",component:Sv},{path:"/dashboard",name:"Dashboard",component:GS},{path:"/configuracao",name:"Configuracao",component:fC},{path:"/clientes",name:"Clientes",component:gM},{path:"/servicos",name:"Servicos",component:JA},{path:"/salas",name:"Salas",component:jP},{path:"/agendamentos/novo",name:"NovoAgendamento",component:SA},{path:"/agendamentos",name:"Agendamentos",component:fA},{path:"/comprovantes",name:"Comprovantes",component:oE},{path:"/despesas",name:"Despesas",component:rI},{path:"/templates",name:"Templates",component:$E},{path:"/usuarios",name:"Usuarios",component:x4},{path:"/minha-assinatura",name:"MinhaAssinatura",component:iT},{path:"/assinatura-plus",name:"PagamentoPlus",component:XO},{path:"/relatorio-agendamentos",name:"RelatorioAgendamentos",component:WT},{path:"/recebimento",name:"Recebimento",component:gO},{path:"/faturamento",name:"Faturamento",component:MT},{path:"/buscar",name:"SearchProfiles",component:T4},{path:"/planos",name:"Planos",component:pP},{path:"/contato",name:"Contato",component:YE},{path:"/faq",name:"Faq",component:SO},{path:"/politica-de-privacidade",name:"PoliticaDePrivacidade",component:AO},{path:"/termos-de-uso",name:"TermosDeUso",component:TO},{path:"/atendimento/:id",name:"Atendimento",component:EE},{path:"/pagar-agendamento/:id",name:"PagamentoAgendamento",component:SD},{path:"/:slug",name:"PublicPage",component:cP}],Wn=Jb({history:Cb(),routes:aI});Wn.beforeEach(async(t,e,s)=>{const{data:{user:n}}=await T.auth.getUser();if(n&&t.path!=="/onboarding"){const{data:i}=await T.from("profiles").select("onboarding_complete").eq("id",n.id).single();if(i&&!i.onboarding_complete){s("/onboarding");return}}s()});Wn.afterEach(t=>{window.gtag&&window.gtag("config","G-8DZT2EVSC7",{page_path:t.fullPath})});const lI=async()=>{var s;const t=window.location.hash.replace(/^#\/?/,""),e=new URLSearchParams(t);if(e.get("error_code")==="otp_expired"||(s=e.get("error_description"))!=null&&s.includes("Email link is invalid")){Wn.replace("/link-expirado");return}if(window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")){const n=e.get("access_token"),i=e.get("refresh_token");if(n&&i)try{await T.auth.setSession({access_token:n,refresh_token:i}),Wn.replace("/confirmacao")}catch{}}};lI();T.auth.onAuthStateChange(t=>{t==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")&&Wn.replace("/confirmacao")});Ng(Kg).use(Wn).mount("#app");export{dI as g};
