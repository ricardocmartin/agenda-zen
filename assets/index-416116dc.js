var dp=Object.defineProperty;var up=(e,t,s)=>t in e?dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var B=(e,t,s)=>(up(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ha(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Pt={},Sn=[],Ue=()=>{},hp=()=>!1,sr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Wa=e=>e.startsWith("onUpdate:"),Yt=Object.assign,qa=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},fp=Object.prototype.hasOwnProperty,St=(e,t)=>fp.call(e,t),st=Array.isArray,Cn=e=>Hi(e)==="[object Map]",Vn=e=>Hi(e)==="[object Set]",Fl=e=>Hi(e)==="[object Date]",ct=e=>typeof e=="function",Ht=e=>typeof e=="string",Ve=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",pu=e=>(Rt(e)||ct(e))&&ct(e.then)&&ct(e.catch),mu=Object.prototype.toString,Hi=e=>mu.call(e),pp=e=>Hi(e).slice(8,-1),gu=e=>Hi(e)==="[object Object]",Ka=e=>Ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,di=Ha(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nr=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},mp=/-(\w)/g,Ie=nr(e=>e.replace(mp,(t,s)=>s?s.toUpperCase():"")),gp=/\B([A-Z])/g,hn=nr(e=>e.replace(gp,"-$1").toLowerCase()),ir=nr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pr=nr(e=>e?`on${ir(e)}`:""),Ns=(e,t)=>!Object.is(e,t),wo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},bu=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let jl;const or=()=>jl||(jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rr(e){if(st(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Ht(n)?_p(n):rr(n);if(i)for(const o in i)t[o]=i[o]}return t}else if(Ht(e)||Rt(e))return e}const bp=/;(?![^(]*\))/g,yp=/:([^]+)/,xp=/\/\*[^]*?\*\//g;function _p(e){const t={};return e.replace(xp,"").split(bp).forEach(s=>{if(s){const n=s.split(yp);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function be(e){let t="";if(Ht(e))t=e;else if(st(e))for(let s=0;s<e.length;s++){const n=be(e[s]);n&&(t+=n+" ")}else if(Rt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const vp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wp=Ha(vp);function yu(e){return!!e||e===""}function kp(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Wi(e[n],t[n]);return s}function Wi(e,t){if(e===t)return!0;let s=Fl(e),n=Fl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ve(e),n=Ve(t),s||n)return e===t;if(s=st(e),n=st(t),s||n)return s&&n?kp(e,t):!1;if(s=Rt(e),n=Rt(t),s||n){if(!s||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!Wi(e[r],t[r]))return!1}}return String(e)===String(t)}function Ga(e,t){return e.findIndex(s=>Wi(s,t))}const xu=e=>!!(e&&e.__v_isRef===!0),P=e=>Ht(e)?e:e==null?"":st(e)||Rt(e)&&(e.toString===mu||!ct(e.toString))?xu(e)?P(e.value):JSON.stringify(e,_u,2):String(e),_u=(e,t)=>xu(t)?_u(e,t.value):Cn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],o)=>(s[Tr(n,o)+" =>"]=i,s),{})}:Vn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Tr(s))}:Ve(t)?Tr(t):Rt(t)&&!st(t)&&!gu(t)?String(t):t,Tr=(e,t="")=>{var s;return Ve(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class Sp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=pe;try{return pe=this,t()}finally{pe=s}}}on(){++this._on===1&&(this.prevScope=pe,pe=this)}off(){this._on>0&&--this._on===0&&(pe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Cp(){return pe}let Dt;const Or=new WeakSet;class vu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Or.has(this)&&(Or.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ku(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Nl(this),Su(this);const t=Dt,s=$e;Dt=this,$e=!0;try{return this.fn()}finally{Cu(this),Dt=t,$e=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xa(t);this.deps=this.depsTail=void 0,Nl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Or.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){aa(this)&&this.run()}get dirty(){return aa(this)}}let wu=0,ui,hi;function ku(e,t=!1){if(e.flags|=8,t){e.next=hi,hi=e;return}e.next=ui,ui=e}function Ya(){wu++}function Ja(){if(--wu>0)return;if(hi){let t=hi;for(hi=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ui;){let t=ui;for(ui=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Su(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Cu(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Xa(n),Mp(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function aa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Mu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Mu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ci)||(e.globalVersion=Ci,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!aa(e))))return;e.flags|=2;const t=e.dep,s=Dt,n=$e;Dt=e,$e=!0;try{Su(e);const i=e.fn(e._value);(t.version===0||Ns(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Dt=s,$e=n,Cu(e),e.flags&=-3}}function Xa(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Xa(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Mp(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let $e=!0;const Au=[];function _s(){Au.push($e),$e=!1}function vs(){const e=Au.pop();$e=e===void 0?!0:e}function Nl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Dt;Dt=void 0;try{t()}finally{Dt=s}}}let Ci=0;class Ap{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Dt||!$e||Dt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Dt)s=this.activeLink=new Ap(Dt,this),Dt.deps?(s.prevDep=Dt.depsTail,Dt.depsTail.nextDep=s,Dt.depsTail=s):Dt.deps=Dt.depsTail=s,Pu(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Dt.depsTail,s.nextDep=void 0,Dt.depsTail.nextDep=s,Dt.depsTail=s,Dt.deps===s&&(Dt.deps=n)}return s}trigger(t){this.version++,Ci++,this.notify(t)}notify(t){Ya();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ja()}}}function Pu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Pu(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const la=new WeakMap,rn=Symbol(""),ca=Symbol(""),Mi=Symbol("");function te(e,t,s){if($e&&Dt){let n=la.get(e);n||la.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new Qa),i.map=n,i.key=s),i.track()}}function fs(e,t,s,n,i,o){const r=la.get(e);if(!r){Ci++;return}const a=l=>{l&&l.trigger()};if(Ya(),t==="clear")r.forEach(a);else{const l=st(e),c=l&&Ka(s);if(l&&s==="length"){const u=Number(n);r.forEach((h,f)=>{(f==="length"||f===Mi||!Ve(f)&&f>=u)&&a(h)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(Mi)),t){case"add":l?c&&a(r.get("length")):(a(r.get(rn)),Cn(e)&&a(r.get(ca)));break;case"delete":l||(a(r.get(rn)),Cn(e)&&a(r.get(ca)));break;case"set":Cn(e)&&a(r.get(rn));break}}Ja()}function mn(e){const t=kt(e);return t===e?t:(te(t,"iterate",Mi),De(e)?t:t.map(Jt))}function ar(e){return te(e=kt(e),"iterate",Mi),e}const Pp={__proto__:null,[Symbol.iterator](){return Er(this,Symbol.iterator,Jt)},concat(...e){return mn(this).concat(...e.map(t=>st(t)?mn(t):t))},entries(){return Er(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return is(this,"every",e,t,void 0,arguments)},filter(e,t){return is(this,"filter",e,t,s=>s.map(Jt),arguments)},find(e,t){return is(this,"find",e,t,Jt,arguments)},findIndex(e,t){return is(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return is(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return is(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return is(this,"forEach",e,t,void 0,arguments)},includes(...e){return Dr(this,"includes",e)},indexOf(...e){return Dr(this,"indexOf",e)},join(e){return mn(this).join(e)},lastIndexOf(...e){return Dr(this,"lastIndexOf",e)},map(e,t){return is(this,"map",e,t,void 0,arguments)},pop(){return qn(this,"pop")},push(...e){return qn(this,"push",e)},reduce(e,...t){return Ul(this,"reduce",e,t)},reduceRight(e,...t){return Ul(this,"reduceRight",e,t)},shift(){return qn(this,"shift")},some(e,t){return is(this,"some",e,t,void 0,arguments)},splice(...e){return qn(this,"splice",e)},toReversed(){return mn(this).toReversed()},toSorted(e){return mn(this).toSorted(e)},toSpliced(...e){return mn(this).toSpliced(...e)},unshift(...e){return qn(this,"unshift",e)},values(){return Er(this,"values",Jt)}};function Er(e,t,s){const n=ar(e),i=n[t]();return n!==e&&!De(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const Tp=Array.prototype;function is(e,t,s,n,i,o){const r=ar(e),a=r!==e&&!De(e),l=r[t];if(l!==Tp[t]){const h=l.apply(e,o);return a?Jt(h):h}let c=s;r!==e&&(a?c=function(h,f){return s.call(this,Jt(h),f,e)}:s.length>2&&(c=function(h,f){return s.call(this,h,f,e)}));const u=l.call(r,c,n);return a&&i?i(u):u}function Ul(e,t,s,n){const i=ar(e);let o=s;return i!==e&&(De(e)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,e)}):o=function(r,a,l){return s.call(this,r,Jt(a),l,e)}),i[t](o,...n)}function Dr(e,t,s){const n=kt(e);te(n,"iterate",Mi);const i=n[t](...s);return(i===-1||i===!1)&&el(s[0])?(s[0]=kt(s[0]),n[t](...s)):i}function qn(e,t,s=[]){_s(),Ya();const n=kt(e)[t].apply(e,s);return Ja(),vs(),n}const Op=Ha("__proto__,__v_isRef,__isVue"),Tu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ve));function Ep(e){Ve(e)||(e=String(e));const t=kt(this);return te(t,"has",e),t.hasOwnProperty(e)}class Ou{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?Bp:Ru:o?Iu:Du).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=st(t);if(!i){let l;if(r&&(l=Pp[s]))return l;if(s==="hasOwnProperty")return Ep}const a=Reflect.get(t,s,ne(t)?t:n);return(Ve(s)?Tu.has(s):Op(s))||(i||te(t,"get",s),o)?a:ne(a)?r&&Ka(s)?a:a.value:Rt(a)?i?Fu(a):lr(a):a}}class Eu extends Ou{constructor(t=!1){super(!1,t)}set(t,s,n,i){let o=t[s];if(!this._isShallow){const l=$s(o);if(!De(n)&&!$s(n)&&(o=kt(o),n=kt(n)),!st(t)&&ne(o)&&!ne(n))return l?!1:(o.value=n,!0)}const r=st(t)&&Ka(s)?Number(s)<t.length:St(t,s),a=Reflect.set(t,s,n,ne(t)?t:i);return t===kt(i)&&(r?Ns(n,o)&&fs(t,"set",s,n):fs(t,"add",s,n)),a}deleteProperty(t,s){const n=St(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&fs(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Ve(s)||!Tu.has(s))&&te(t,"has",s),n}ownKeys(t){return te(t,"iterate",st(t)?"length":rn),Reflect.ownKeys(t)}}class Dp extends Ou{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ip=new Eu,Rp=new Dp,Lp=new Eu(!0);const da=e=>e,Zi=e=>Reflect.getPrototypeOf(e);function Fp(e,t,s){return function(...n){const i=this.__v_raw,o=kt(i),r=Cn(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...n),u=s?da:t?No:Jt;return!t&&te(o,"iterate",l?ca:rn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function to(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function jp(e,t){const s={get(i){const o=this.__v_raw,r=kt(o),a=kt(i);e||(Ns(i,a)&&te(r,"get",i),te(r,"get",a));const{has:l}=Zi(r),c=t?da:e?No:Jt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&te(kt(i),"iterate",rn),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=kt(o),a=kt(i);return e||(Ns(i,a)&&te(r,"has",i),te(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=kt(a),c=t?da:e?No:Jt;return!e&&te(l,"iterate",rn),a.forEach((u,h)=>i.call(o,c(u),c(h),r))}};return Yt(s,e?{add:to("add"),set:to("set"),delete:to("delete"),clear:to("clear")}:{add(i){!t&&!De(i)&&!$s(i)&&(i=kt(i));const o=kt(this);return Zi(o).has.call(o,i)||(o.add(i),fs(o,"add",i,i)),this},set(i,o){!t&&!De(o)&&!$s(o)&&(o=kt(o));const r=kt(this),{has:a,get:l}=Zi(r);let c=a.call(r,i);c||(i=kt(i),c=a.call(r,i));const u=l.call(r,i);return r.set(i,o),c?Ns(o,u)&&fs(r,"set",i,o):fs(r,"add",i,o),this},delete(i){const o=kt(this),{has:r,get:a}=Zi(o);let l=r.call(o,i);l||(i=kt(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&fs(o,"delete",i,void 0),c},clear(){const i=kt(this),o=i.size!==0,r=i.clear();return o&&fs(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Fp(i,e,t)}),s}function Za(e,t){const s=jp(e,t);return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(St(s,i)&&i in n?s:n,i,o)}const Np={get:Za(!1,!1)},Up={get:Za(!1,!0)},$p={get:Za(!0,!1)};const Du=new WeakMap,Iu=new WeakMap,Ru=new WeakMap,Bp=new WeakMap;function Vp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zp(e){return e.__v_skip||!Object.isExtensible(e)?0:Vp(pp(e))}function lr(e){return $s(e)?e:tl(e,!1,Ip,Np,Du)}function Lu(e){return tl(e,!1,Lp,Up,Iu)}function Fu(e){return tl(e,!0,Rp,$p,Ru)}function tl(e,t,s,n,i){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=zp(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?n:s);return i.set(e,a),a}function Mn(e){return $s(e)?Mn(e.__v_raw):!!(e&&e.__v_isReactive)}function $s(e){return!!(e&&e.__v_isReadonly)}function De(e){return!!(e&&e.__v_isShallow)}function el(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function Hp(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&bu(e,"__v_skip",!0),e}const Jt=e=>Rt(e)?lr(e):e,No=e=>Rt(e)?Fu(e):e;function ne(e){return e?e.__v_isRef===!0:!1}function Wp(e){return ju(e,!1)}function qp(e){return ju(e,!0)}function ju(e,t){return ne(e)?e:new Kp(e,t)}class Kp{constructor(t,s){this.dep=new Qa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:kt(t),this._value=s?t:Jt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||De(t)||$s(t);t=n?t:kt(t),Ns(t,s)&&(this._rawValue=t,this._value=n?t:Jt(t),this.dep.trigger())}}function An(e){return ne(e)?e.value:e}const Gp={get:(e,t,s)=>t==="__v_raw"?e:An(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return ne(i)&&!ne(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Nu(e){return Mn(e)?e:new Proxy(e,Gp)}class Yp{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Qa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ci-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return ku(this,!0),!0}get value(){const t=this.dep.track();return Mu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Jp(e,t,s=!1){let n,i;return ct(e)?n=e:(n=e.get,i=e.set),new Yp(n,i,s)}const eo={},Uo=new WeakMap;let Zs;function Xp(e,t=!1,s=Zs){if(s){let n=Uo.get(s);n||Uo.set(s,n=[]),n.push(e)}}function Qp(e,t,s=Pt){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=S=>i?S:De(S)||i===!1||i===0?ps(S,1):ps(S);let u,h,f,p,m=!1,g=!1;if(ne(e)?(h=()=>e.value,m=De(e)):Mn(e)?(h=()=>c(e),m=!0):st(e)?(g=!0,m=e.some(S=>Mn(S)||De(S)),h=()=>e.map(S=>{if(ne(S))return S.value;if(Mn(S))return c(S);if(ct(S))return l?l(S,2):S()})):ct(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){_s();try{f()}finally{vs()}}const S=Zs;Zs=u;try{return l?l(e,3,[p]):e(p)}finally{Zs=S}}:h=Ue,t&&i){const S=h,M=i===!0?1/0:i;h=()=>ps(S(),M)}const b=Cp(),_=()=>{u.stop(),b&&b.active&&qa(b.effects,u)};if(o&&t){const S=t;t=(...M)=>{S(...M),_()}}let w=g?new Array(e.length).fill(eo):eo;const C=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(t){const M=u.run();if(i||m||(g?M.some((F,I)=>Ns(F,w[I])):Ns(M,w))){f&&f();const F=Zs;Zs=u;try{const I=[M,w===eo?void 0:g&&w[0]===eo?[]:w,p];l?l(t,3,I):t(...I),w=M}finally{Zs=F}}}else u.run()};return a&&a(C),u=new vu(h),u.scheduler=r?()=>r(C,!1):C,p=S=>Xp(S,!1,u),f=u.onStop=()=>{const S=Uo.get(u);if(S){if(l)l(S,4);else for(const M of S)M();Uo.delete(u)}},t?n?C(!0):w=u.run():r?r(C.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function ps(e,t=1/0,s){if(t<=0||!Rt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ne(e))ps(e.value,t,s);else if(st(e))for(let n=0;n<e.length;n++)ps(e[n],t,s);else if(Vn(e)||Cn(e))e.forEach(n=>{ps(n,t,s)});else if(gu(e)){for(const n in e)ps(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ps(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qi(e,t,s,n){try{return n?e(...n):e()}catch(i){cr(i,t,s)}}function ss(e,t,s,n){if(ct(e)){const i=qi(e,t,s,n);return i&&pu(i)&&i.catch(o=>{cr(o,t,s)}),i}if(st(e)){const i=[];for(let o=0;o<e.length;o++)i.push(ss(e[o],t,s,n));return i}}function cr(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Pt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,c)===!1)return}a=a.parent}if(o){_s(),qi(o,null,10,[e,l,c]),vs();return}}Zp(e,s,i,n,r)}function Zp(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const ce=[];let Xe=-1;const Pn=[];let Ps=null,vn=0;const Uu=Promise.resolve();let $o=null;function sl(e){const t=$o||Uu;return e?t.then(this?e.bind(this):e):t}function tm(e){let t=Xe+1,s=ce.length;for(;t<s;){const n=t+s>>>1,i=ce[n],o=Ai(i);o<e||o===e&&i.flags&2?t=n+1:s=n}return t}function nl(e){if(!(e.flags&1)){const t=Ai(e),s=ce[ce.length-1];!s||!(e.flags&2)&&t>=Ai(s)?ce.push(e):ce.splice(tm(t),0,e),e.flags|=1,$u()}}function $u(){$o||($o=Uu.then(Vu))}function em(e){st(e)?Pn.push(...e):Ps&&e.id===-1?Ps.splice(vn+1,0,e):e.flags&1||(Pn.push(e),e.flags|=1),$u()}function $l(e,t,s=Xe+1){for(;s<ce.length;s++){const n=ce[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ce.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Bu(e){if(Pn.length){const t=[...new Set(Pn)].sort((s,n)=>Ai(s)-Ai(n));if(Pn.length=0,Ps){Ps.push(...t);return}for(Ps=t,vn=0;vn<Ps.length;vn++){const s=Ps[vn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ps=null,vn=0}}const Ai=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Vu(e){const t=Ue;try{for(Xe=0;Xe<ce.length;Xe++){const s=ce[Xe];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),qi(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Xe<ce.length;Xe++){const s=ce[Xe];s&&(s.flags&=-2)}Xe=-1,ce.length=0,Bu(),$o=null,(ce.length||Pn.length)&&Vu()}}let Xt=null,zu=null;function Bo(e){const t=Xt;return Xt=e,zu=e&&e.type.__scopeId||null,t}function tt(e,t=Xt,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Yl(-1);const o=Bo(t);let r;try{r=e(...i)}finally{Bo(o),n._d&&Yl(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function O(e,t){if(Xt===null)return e;const s=fr(Xt),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=Pt]=t[i];o&&(ct(o)&&(o={mounted:o,updated:o}),o.deep&&ps(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function qs(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(_s(),ss(l,s,8,[e.el,a,e,t]),vs())}}const sm=Symbol("_vte"),nm=e=>e.__isTeleport;function il(e,t){e.shapeFlag&6&&e.component?(e.transition=t,il(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Hu(e,t){return ct(e)?(()=>Yt({name:e.name},t,{setup:e}))():e}function Wu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Vo(e,t,s,n,i=!1){if(st(e)){e.forEach((m,g)=>Vo(m,t&&(st(t)?t[g]:t),s,n,i));return}if(Tn(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Vo(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?fr(n.component):n.el,r=i?null:o,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Pt?a.refs={}:a.refs,h=a.setupState,f=kt(h),p=h===Pt?()=>!1:m=>St(f,m);if(c!=null&&c!==l&&(Ht(c)?(u[c]=null,p(c)&&(h[c]=null)):ne(c)&&(c.value=null)),ct(l))qi(l,a,12,[r,u]);else{const m=Ht(l),g=ne(l);if(m||g){const b=()=>{if(e.f){const _=m?p(l)?h[l]:u[l]:l.value;i?st(_)&&qa(_,o):st(_)?_.includes(o)||_.push(o):m?(u[l]=[o],p(l)&&(h[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else m?(u[l]=r,p(l)&&(h[l]=r)):g&&(l.value=r,e.k&&(u[e.k]=r))};r?(b.id=-1,ve(b,s)):b()}}}or().requestIdleCallback;or().cancelIdleCallback;const Tn=e=>!!e.type.__asyncLoader,qu=e=>e.type.__isKeepAlive;function im(e,t){Ku(e,"a",t)}function om(e,t){Ku(e,"da",t)}function Ku(e,t,s=ee){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(dr(t,n,s),s){let i=s.parent;for(;i&&i.parent;)qu(i.parent.vnode)&&rm(n,t,s,i),i=i.parent}}function rm(e,t,s,n){const i=dr(t,e,n,!0);Gu(()=>{qa(n[t],i)},s)}function dr(e,t,s=ee,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{_s();const a=Ki(s),l=ss(t,s,e,r);return a(),vs(),l});return n?i.unshift(o):i.push(o),o}}const ks=e=>(t,s=ee)=>{(!Oi||e==="sp")&&dr(e,(...n)=>t(...n),s)},am=ks("bm"),lm=ks("m"),cm=ks("bu"),dm=ks("u"),um=ks("bum"),Gu=ks("um"),hm=ks("sp"),fm=ks("rtg"),pm=ks("rtc");function mm(e,t=ee){dr("ec",e,t)}const Yu="components";function H(e,t){return bm(Yu,e,!0,t)||e}const gm=Symbol.for("v-ndc");function bm(e,t,s=!0,n=!1){const i=Xt||ee;if(i){const o=i.type;if(e===Yu){const a=ng(o,!1);if(a&&(a===t||a===Ie(t)||a===ir(Ie(t))))return o}const r=Bl(i[e]||o[e],t)||Bl(i.appContext[e],t);return!r&&n?o:r}}function Bl(e,t){return e&&(e[t]||e[Ie(t)]||e[ir(Ie(t))])}function pt(e,t,s,n){let i;const o=s&&s[n],r=st(e);if(r||Ht(e)){const a=r&&Mn(e);let l=!1,c=!1;a&&(l=!De(e),c=$s(e),e=ar(e)),i=new Array(e.length);for(let u=0,h=e.length;u<h;u++)i[u]=t(l?c?No(Jt(e[u])):Jt(e[u]):e[u],u,void 0,o&&o[u])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Rt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o&&o[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,o&&o[l])}}else i=[];return s&&(s[n]=i),i}function Ju(e,t,s={},n,i){if(Xt.ce||Xt.parent&&Tn(Xt.parent)&&Xt.parent.ce)return t!=="default"&&(s.name=t),v(),de(J,null,[E("slot",s,n&&n())],64);let o=e[t];o&&o._c&&(o._d=!1),v();const r=o&&Xu(o(s)),a=s.key||r&&r.key,l=de(J,{key:(a&&!Ve(a)?a:`_${t}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Xu(e){return e.some(t=>Ti(t)?!(t.type===ws||t.type===J&&!Xu(t.children)):!0)?e:null}const ua=e=>e?gh(e)?fr(e):ua(e.parent):null,fi=Yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ua(e.parent),$root:e=>ua(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ol(e),$forceUpdate:e=>e.f||(e.f=()=>{nl(e.update)}),$nextTick:e=>e.n||(e.n=sl.bind(e.proxy)),$watch:e=>Nm.bind(e)}),Ir=(e,t)=>e!==Pt&&!e.__isScriptSetup&&St(e,t),ym={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(Ir(n,t))return r[t]=1,n[t];if(i!==Pt&&St(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&St(c,t))return r[t]=3,o[t];if(s!==Pt&&St(s,t))return r[t]=4,s[t];ha&&(r[t]=0)}}const u=fi[t];let h,f;if(u)return t==="$attrs"&&te(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(s!==Pt&&St(s,t))return r[t]=4,s[t];if(f=l.config.globalProperties,St(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return Ir(i,t)?(i[t]=s,!0):n!==Pt&&St(n,t)?(n[t]=s,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||e!==Pt&&St(e,r)||Ir(t,r)||(a=o[0])&&St(a,r)||St(n,r)||St(fi,r)||St(i.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:St(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Vl(e){return st(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let ha=!0;function xm(e){const t=ol(e),s=e.proxy,n=e.ctx;ha=!1,t.beforeCreate&&zl(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:b,beforeDestroy:_,beforeUnmount:w,destroyed:C,unmounted:S,render:M,renderTracked:F,renderTriggered:I,errorCaptured:$,serverPrefetch:X,expose:nt,inheritAttrs:rt,components:dt,directives:At,filters:Wt}=t;if(c&&_m(c,n,null),r)for(const it in r){const ut=r[it];ct(ut)&&(n[it]=ut.bind(s))}if(i){const it=i.call(s,s);Rt(it)&&(e.data=lr(it))}if(ha=!0,o)for(const it in o){const ut=o[it],Tt=ct(ut)?ut.bind(s,s):ct(ut.get)?ut.get.bind(s,s):Ue,re=!ct(ut)&&ct(ut.set)?ut.set.bind(s):Ue,ae=je({get:Tt,set:re});Object.defineProperty(n,it,{enumerable:!0,configurable:!0,get:()=>ae.value,set:Bt=>ae.value=Bt})}if(a)for(const it in a)Qu(a[it],n,s,it);if(l){const it=ct(l)?l.call(s):l;Reflect.ownKeys(it).forEach(ut=>{ko(ut,it[ut])})}u&&zl(u,e,"c");function lt(it,ut){st(ut)?ut.forEach(Tt=>it(Tt.bind(s))):ut&&it(ut.bind(s))}if(lt(am,h),lt(lm,f),lt(cm,p),lt(dm,m),lt(im,g),lt(om,b),lt(mm,$),lt(pm,F),lt(fm,I),lt(um,w),lt(Gu,S),lt(hm,X),st(nt))if(nt.length){const it=e.exposed||(e.exposed={});nt.forEach(ut=>{Object.defineProperty(it,ut,{get:()=>s[ut],set:Tt=>s[ut]=Tt})})}else e.exposed||(e.exposed={});M&&e.render===Ue&&(e.render=M),rt!=null&&(e.inheritAttrs=rt),dt&&(e.components=dt),At&&(e.directives=At),X&&Wu(e)}function _m(e,t,s=Ue){st(e)&&(e=fa(e));for(const n in e){const i=e[n];let o;Rt(i)?"default"in i?o=ys(i.from||n,i.default,!0):o=ys(i.from||n):o=ys(i),ne(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function zl(e,t,s){ss(st(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Qu(e,t,s,n){let i=n.includes(".")?uh(s,n):()=>s[n];if(Ht(e)){const o=t[e];ct(o)&&So(i,o)}else if(ct(e))So(i,e.bind(s));else if(Rt(e))if(st(e))e.forEach(o=>Qu(o,t,s,n));else{const o=ct(e.handler)?e.handler.bind(s):t[e.handler];ct(o)&&So(i,o,e)}}function ol(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>zo(l,c,r,!0)),zo(l,t,r)),Rt(t)&&o.set(t,l),l}function zo(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&zo(e,o,s,!0),i&&i.forEach(r=>zo(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const a=vm[r]||s&&s[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const vm={data:Hl,props:Wl,emits:Wl,methods:si,computed:si,beforeCreate:le,created:le,beforeMount:le,mounted:le,beforeUpdate:le,updated:le,beforeDestroy:le,beforeUnmount:le,destroyed:le,unmounted:le,activated:le,deactivated:le,errorCaptured:le,serverPrefetch:le,components:si,directives:si,watch:km,provide:Hl,inject:wm};function Hl(e,t){return t?e?function(){return Yt(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function wm(e,t){return si(fa(e),fa(t))}function fa(e){if(st(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function le(e,t){return e?[...new Set([].concat(e,t))]:t}function si(e,t){return e?Yt(Object.create(null),e,t):t}function Wl(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:Yt(Object.create(null),Vl(e),Vl(t??{})):t}function km(e,t){if(!e)return t;if(!t)return e;const s=Yt(Object.create(null),e);for(const n in t)s[n]=le(e[n],t[n]);return s}function Zu(){return{app:null,config:{isNativeTag:hp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sm=0;function Cm(e,t){return function(n,i=null){ct(n)||(n=Yt({},n)),i!=null&&!Rt(i)&&(i=null);const o=Zu(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Sm++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:og,get config(){return o.config},set config(u){},use(u,...h){return r.has(u)||(u&&ct(u.install)?(r.add(u),u.install(c,...h)):ct(u)&&(r.add(u),u(c,...h))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,h){return h?(o.components[u]=h,c):o.components[u]},directive(u,h){return h?(o.directives[u]=h,c):o.directives[u]},mount(u,h,f){if(!l){const p=c._ceVNode||E(n,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&t?t(p,u):e(p,u,f),l=!0,c._container=u,u.__vue_app__=c,fr(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(ss(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return o.provides[u]=h,c},runWithContext(u){const h=On;On=c;try{return u()}finally{On=h}}};return c}}let On=null;function ko(e,t){if(ee){let s=ee.provides;const n=ee.parent&&ee.parent.provides;n===s&&(s=ee.provides=Object.create(n)),s[e]=t}}function ys(e,t,s=!1){const n=ee||Xt;if(n||On){const i=On?On._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ct(t)?t.call(n&&n.proxy):t}}const th={},eh=()=>Object.create(th),sh=e=>Object.getPrototypeOf(e)===th;function Mm(e,t,s,n=!1){const i={},o=eh();e.propsDefaults=Object.create(null),nh(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:Lu(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Am(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=kt(i),[l]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(ur(e.emitsOptions,f))continue;const p=t[f];if(l)if(St(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const m=Ie(f);i[m]=pa(l,a,m,p,e,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{nh(e,t,i,o)&&(c=!0);let u;for(const h in a)(!t||!St(t,h)&&((u=hn(h))===h||!St(t,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(i[h]=pa(l,a,h,void 0,e,!0)):delete i[h]);if(o!==a)for(const h in o)(!t||!St(t,h))&&(delete o[h],c=!0)}c&&fs(e.attrs,"set","")}function nh(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(di(l))continue;const c=t[l];let u;i&&St(i,u=Ie(l))?!o||!o.includes(u)?s[u]=c:(a||(a={}))[u]=c:ur(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=kt(s),c=a||Pt;for(let u=0;u<o.length;u++){const h=o[u];s[h]=pa(i,l,h,c[h],e,!St(c,h))}}return r}function pa(e,t,s,n,i,o){const r=e[s];if(r!=null){const a=St(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ct(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const u=Ki(i);n=c[s]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===hn(s))&&(n=!0))}return n}const Pm=new WeakMap;function ih(e,t,s=!1){const n=s?Pm:t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!ct(e)){const u=h=>{l=!0;const[f,p]=ih(h,t,!0);Yt(r,f),p&&a.push(...p)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return Rt(e)&&n.set(e,Sn),Sn;if(st(o))for(let u=0;u<o.length;u++){const h=Ie(o[u]);ql(h)&&(r[h]=Pt)}else if(o)for(const u in o){const h=Ie(u);if(ql(h)){const f=o[u],p=r[h]=st(f)||ct(f)?{type:f}:Yt({},f),m=p.type;let g=!1,b=!0;if(st(m))for(let _=0;_<m.length;++_){const w=m[_],C=ct(w)&&w.name;if(C==="Boolean"){g=!0;break}else C==="String"&&(b=!1)}else g=ct(m)&&m.name==="Boolean";p[0]=g,p[1]=b,(g||St(p,"default"))&&a.push(h)}}const c=[r,a];return Rt(e)&&n.set(e,c),c}function ql(e){return e[0]!=="$"&&!di(e)}const rl=e=>e[0]==="_"||e==="$stable",al=e=>st(e)?e.map(Ze):[Ze(e)],Tm=(e,t,s)=>{if(t._n)return t;const n=tt((...i)=>al(t(...i)),s);return n._c=!1,n},oh=(e,t,s)=>{const n=e._ctx;for(const i in e){if(rl(i))continue;const o=e[i];if(ct(o))t[i]=Tm(i,o,n);else if(o!=null){const r=al(o);t[i]=()=>r}}},rh=(e,t)=>{const s=al(t);e.slots.default=()=>s},ah=(e,t,s)=>{for(const n in t)(s||!rl(n))&&(e[n]=t[n])},Om=(e,t,s)=>{const n=e.slots=eh();if(e.vnode.shapeFlag&32){const i=t._;i?(ah(n,t,s),s&&bu(n,"_",i,!0)):oh(t,n)}else t&&rh(e,t)},Em=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=Pt;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:ah(i,t,s):(o=!t.$stable,oh(t,i)),r=t}else t&&(rh(e,t),r={default:1});if(o)for(const a in i)!rl(a)&&r[a]==null&&delete i[a]},ve=Wm;function Dm(e){return Im(e)}function Im(e,t){const s=or();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=Ue,insertStaticContent:m}=e,g=(y,x,A,R=null,T=null,j=null,q=void 0,z=null,V=!!x.dynamicChildren)=>{if(y===x)return;y&&!Kn(y,x)&&(R=D(y),Bt(y,T,j,!0),y=null),x.patchFlag===-2&&(V=!1,x.dynamicChildren=null);const{type:N,ref:et,shapeFlag:G}=x;switch(N){case hr:b(y,x,A,R);break;case ws:_(y,x,A,R);break;case Co:y==null&&w(x,A,R,q);break;case J:dt(y,x,A,R,T,j,q,z,V);break;default:G&1?M(y,x,A,R,T,j,q,z,V):G&6?At(y,x,A,R,T,j,q,z,V):(G&64||G&128)&&N.process(y,x,A,R,T,j,q,z,V,Q)}et!=null&&T&&Vo(et,y&&y.ref,j,x||y,!x)},b=(y,x,A,R)=>{if(y==null)n(x.el=a(x.children),A,R);else{const T=x.el=y.el;x.children!==y.children&&c(T,x.children)}},_=(y,x,A,R)=>{y==null?n(x.el=l(x.children||""),A,R):x.el=y.el},w=(y,x,A,R)=>{[y.el,y.anchor]=m(y.children,x,A,R,y.el,y.anchor)},C=({el:y,anchor:x},A,R)=>{let T;for(;y&&y!==x;)T=f(y),n(y,A,R),y=T;n(x,A,R)},S=({el:y,anchor:x})=>{let A;for(;y&&y!==x;)A=f(y),i(y),y=A;i(x)},M=(y,x,A,R,T,j,q,z,V)=>{x.type==="svg"?q="svg":x.type==="math"&&(q="mathml"),y==null?F(x,A,R,T,j,q,z,V):X(y,x,T,j,q,z,V)},F=(y,x,A,R,T,j,q,z)=>{let V,N;const{props:et,shapeFlag:G,transition:Z,dirs:at}=y;if(V=y.el=r(y.type,j,et&&et.is,et),G&8?u(V,y.children):G&16&&$(y.children,V,null,R,T,Rr(y,j),q,z),at&&qs(y,null,R,"created"),I(V,y,y.scopeId,q,R),et){for(const Ot in et)Ot!=="value"&&!di(Ot)&&o(V,Ot,null,et[Ot],j,R);"value"in et&&o(V,"value",null,et.value,j),(N=et.onVnodeBeforeMount)&&Ge(N,R,y)}at&&qs(y,null,R,"beforeMount");const _t=Rm(T,Z);_t&&Z.beforeEnter(V),n(V,x,A),((N=et&&et.onVnodeMounted)||_t||at)&&ve(()=>{N&&Ge(N,R,y),_t&&Z.enter(V),at&&qs(y,null,R,"mounted")},T)},I=(y,x,A,R,T)=>{if(A&&p(y,A),R)for(let j=0;j<R.length;j++)p(y,R[j]);if(T){let j=T.subTree;if(x===j||fh(j.type)&&(j.ssContent===x||j.ssFallback===x)){const q=T.vnode;I(y,q,q.scopeId,q.slotScopeIds,T.parent)}}},$=(y,x,A,R,T,j,q,z,V=0)=>{for(let N=V;N<y.length;N++){const et=y[N]=z?Ts(y[N]):Ze(y[N]);g(null,et,x,A,R,T,j,q,z)}},X=(y,x,A,R,T,j,q)=>{const z=x.el=y.el;let{patchFlag:V,dynamicChildren:N,dirs:et}=x;V|=y.patchFlag&16;const G=y.props||Pt,Z=x.props||Pt;let at;if(A&&Ks(A,!1),(at=Z.onVnodeBeforeUpdate)&&Ge(at,A,x,y),et&&qs(x,y,A,"beforeUpdate"),A&&Ks(A,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&u(z,""),N?nt(y.dynamicChildren,N,z,A,R,Rr(x,T),j):q||ut(y,x,z,null,A,R,Rr(x,T),j,!1),V>0){if(V&16)rt(z,G,Z,A,T);else if(V&2&&G.class!==Z.class&&o(z,"class",null,Z.class,T),V&4&&o(z,"style",G.style,Z.style,T),V&8){const _t=x.dynamicProps;for(let Ot=0;Ot<_t.length;Ot++){const Ct=_t[Ot],ye=G[Ct],Qt=Z[Ct];(Qt!==ye||Ct==="value")&&o(z,Ct,ye,Qt,T,A)}}V&1&&y.children!==x.children&&u(z,x.children)}else!q&&N==null&&rt(z,G,Z,A,T);((at=Z.onVnodeUpdated)||et)&&ve(()=>{at&&Ge(at,A,x,y),et&&qs(x,y,A,"updated")},R)},nt=(y,x,A,R,T,j,q)=>{for(let z=0;z<x.length;z++){const V=y[z],N=x[z],et=V.el&&(V.type===J||!Kn(V,N)||V.shapeFlag&70)?h(V.el):A;g(V,N,et,null,R,T,j,q,!0)}},rt=(y,x,A,R,T)=>{if(x!==A){if(x!==Pt)for(const j in x)!di(j)&&!(j in A)&&o(y,j,x[j],null,T,R);for(const j in A){if(di(j))continue;const q=A[j],z=x[j];q!==z&&j!=="value"&&o(y,j,z,q,T,R)}"value"in A&&o(y,"value",x.value,A.value,T)}},dt=(y,x,A,R,T,j,q,z,V)=>{const N=x.el=y?y.el:a(""),et=x.anchor=y?y.anchor:a("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:at}=x;at&&(z=z?z.concat(at):at),y==null?(n(N,A,R),n(et,A,R),$(x.children||[],A,et,T,j,q,z,V)):G>0&&G&64&&Z&&y.dynamicChildren?(nt(y.dynamicChildren,Z,A,T,j,q,z),(x.key!=null||T&&x===T.subTree)&&lh(y,x,!0)):ut(y,x,A,et,T,j,q,z,V)},At=(y,x,A,R,T,j,q,z,V)=>{x.slotScopeIds=z,y==null?x.shapeFlag&512?T.ctx.activate(x,A,R,q,V):Wt(x,A,R,T,j,q,V):xt(y,x,V)},Wt=(y,x,A,R,T,j,q)=>{const z=y.component=Qm(y,R,T);if(qu(y)&&(z.ctx.renderer=Q),Zm(z,!1,q),z.asyncDep){if(T&&T.registerDep(z,lt,q),!y.el){const V=z.subTree=E(ws);_(null,V,x,A)}}else lt(z,y,x,A,T,j,q)},xt=(y,x,A)=>{const R=x.component=y.component;if(zm(y,x,A))if(R.asyncDep&&!R.asyncResolved){it(R,x,A);return}else R.next=x,R.update();else x.el=y.el,R.vnode=x},lt=(y,x,A,R,T,j,q)=>{const z=()=>{if(y.isMounted){let{next:G,bu:Z,u:at,parent:_t,vnode:Ot}=y;{const xe=ch(y);if(xe){G&&(G.el=Ot.el,it(y,G,q)),xe.asyncDep.then(()=>{y.isUnmounted||z()});return}}let Ct=G,ye;Ks(y,!1),G?(G.el=Ot.el,it(y,G,q)):G=Ot,Z&&wo(Z),(ye=G.props&&G.props.onVnodeBeforeUpdate)&&Ge(ye,_t,G,Ot),Ks(y,!0);const Qt=Lr(y),Le=y.subTree;y.subTree=Qt,g(Le,Qt,h(Le.el),D(Le),y,T,j),G.el=Qt.el,Ct===null&&Hm(y,Qt.el),at&&ve(at,T),(ye=G.props&&G.props.onVnodeUpdated)&&ve(()=>Ge(ye,_t,G,Ot),T)}else{let G;const{el:Z,props:at}=x,{bm:_t,m:Ot,parent:Ct,root:ye,type:Qt}=y,Le=Tn(x);if(Ks(y,!1),_t&&wo(_t),!Le&&(G=at&&at.onVnodeBeforeMount)&&Ge(G,Ct,x),Ks(y,!0),Z&&Nt){const xe=()=>{y.subTree=Lr(y),Nt(Z,y.subTree,y,T,null)};Le&&Qt.__asyncHydrate?Qt.__asyncHydrate(Z,y,xe):xe()}else{ye.ce&&ye.ce._injectChildStyle(Qt);const xe=y.subTree=Lr(y);g(null,xe,A,R,y,T,j),x.el=xe.el}if(Ot&&ve(Ot,T),!Le&&(G=at&&at.onVnodeMounted)){const xe=x;ve(()=>Ge(G,Ct,xe),T)}(x.shapeFlag&256||Ct&&Tn(Ct.vnode)&&Ct.vnode.shapeFlag&256)&&y.a&&ve(y.a,T),y.isMounted=!0,x=A=R=null}};y.scope.on();const V=y.effect=new vu(z);y.scope.off();const N=y.update=V.run.bind(V),et=y.job=V.runIfDirty.bind(V);et.i=y,et.id=y.uid,V.scheduler=()=>nl(et),Ks(y,!0),N()},it=(y,x,A)=>{x.component=y;const R=y.vnode.props;y.vnode=x,y.next=null,Am(y,x.props,R,A),Em(y,x.children,A),_s(),$l(y),vs()},ut=(y,x,A,R,T,j,q,z,V=!1)=>{const N=y&&y.children,et=y?y.shapeFlag:0,G=x.children,{patchFlag:Z,shapeFlag:at}=x;if(Z>0){if(Z&128){re(N,G,A,R,T,j,q,z,V);return}else if(Z&256){Tt(N,G,A,R,T,j,q,z,V);return}}at&8?(et&16&&zt(N,T,j),G!==N&&u(A,G)):et&16?at&16?re(N,G,A,R,T,j,q,z,V):zt(N,T,j,!0):(et&8&&u(A,""),at&16&&$(G,A,R,T,j,q,z,V))},Tt=(y,x,A,R,T,j,q,z,V)=>{y=y||Sn,x=x||Sn;const N=y.length,et=x.length,G=Math.min(N,et);let Z;for(Z=0;Z<G;Z++){const at=x[Z]=V?Ts(x[Z]):Ze(x[Z]);g(y[Z],at,A,null,T,j,q,z,V)}N>et?zt(y,T,j,!0,!1,G):$(x,A,R,T,j,q,z,V,G)},re=(y,x,A,R,T,j,q,z,V)=>{let N=0;const et=x.length;let G=y.length-1,Z=et-1;for(;N<=G&&N<=Z;){const at=y[N],_t=x[N]=V?Ts(x[N]):Ze(x[N]);if(Kn(at,_t))g(at,_t,A,null,T,j,q,z,V);else break;N++}for(;N<=G&&N<=Z;){const at=y[G],_t=x[Z]=V?Ts(x[Z]):Ze(x[Z]);if(Kn(at,_t))g(at,_t,A,null,T,j,q,z,V);else break;G--,Z--}if(N>G){if(N<=Z){const at=Z+1,_t=at<et?x[at].el:R;for(;N<=Z;)g(null,x[N]=V?Ts(x[N]):Ze(x[N]),A,_t,T,j,q,z,V),N++}}else if(N>Z)for(;N<=G;)Bt(y[N],T,j,!0),N++;else{const at=N,_t=N,Ot=new Map;for(N=_t;N<=Z;N++){const _e=x[N]=V?Ts(x[N]):Ze(x[N]);_e.key!=null&&Ot.set(_e.key,N)}let Ct,ye=0;const Qt=Z-_t+1;let Le=!1,xe=0;const Wn=new Array(Qt);for(N=0;N<Qt;N++)Wn[N]=0;for(N=at;N<=G;N++){const _e=y[N];if(ye>=Qt){Bt(_e,T,j,!0);continue}let Ke;if(_e.key!=null)Ke=Ot.get(_e.key);else for(Ct=_t;Ct<=Z;Ct++)if(Wn[Ct-_t]===0&&Kn(_e,x[Ct])){Ke=Ct;break}Ke===void 0?Bt(_e,T,j,!0):(Wn[Ke-_t]=N+1,Ke>=xe?xe=Ke:Le=!0,g(_e,x[Ke],A,null,T,j,q,z,V),ye++)}const Rl=Le?Lm(Wn):Sn;for(Ct=Rl.length-1,N=Qt-1;N>=0;N--){const _e=_t+N,Ke=x[_e],Ll=_e+1<et?x[_e+1].el:R;Wn[N]===0?g(null,Ke,A,Ll,T,j,q,z,V):Le&&(Ct<0||N!==Rl[Ct]?ae(Ke,A,Ll,2):Ct--)}}},ae=(y,x,A,R,T=null)=>{const{el:j,type:q,transition:z,children:V,shapeFlag:N}=y;if(N&6){ae(y.component.subTree,x,A,R);return}if(N&128){y.suspense.move(x,A,R);return}if(N&64){q.move(y,x,A,Q);return}if(q===J){n(j,x,A);for(let G=0;G<V.length;G++)ae(V[G],x,A,R);n(y.anchor,x,A);return}if(q===Co){C(y,x,A);return}if(R!==2&&N&1&&z)if(R===0)z.beforeEnter(j),n(j,x,A),ve(()=>z.enter(j),T);else{const{leave:G,delayLeave:Z,afterLeave:at}=z,_t=()=>{y.ctx.isUnmounted?i(j):n(j,x,A)},Ot=()=>{G(j,()=>{_t(),at&&at()})};Z?Z(j,_t,Ot):Ot()}else n(j,x,A)},Bt=(y,x,A,R=!1,T=!1)=>{const{type:j,props:q,ref:z,children:V,dynamicChildren:N,shapeFlag:et,patchFlag:G,dirs:Z,cacheIndex:at}=y;if(G===-2&&(T=!1),z!=null&&(_s(),Vo(z,null,A,y,!0),vs()),at!=null&&(x.renderCache[at]=void 0),et&256){x.ctx.deactivate(y);return}const _t=et&1&&Z,Ot=!Tn(y);let Ct;if(Ot&&(Ct=q&&q.onVnodeBeforeUnmount)&&Ge(Ct,x,y),et&6)qe(y.component,A,R);else{if(et&128){y.suspense.unmount(A,R);return}_t&&qs(y,null,x,"beforeUnmount"),et&64?y.type.remove(y,x,A,Q,R):N&&!N.hasOnce&&(j!==J||G>0&&G&64)?zt(N,x,A,!1,!0):(j===J&&G&384||!T&&et&16)&&zt(V,x,A),R&&Oe(y)}(Ot&&(Ct=q&&q.onVnodeUnmounted)||_t)&&ve(()=>{Ct&&Ge(Ct,x,y),_t&&qs(y,null,x,"unmounted")},A)},Oe=y=>{const{type:x,el:A,anchor:R,transition:T}=y;if(x===J){ue(A,R);return}if(x===Co){S(y);return}const j=()=>{i(A),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(y.shapeFlag&1&&T&&!T.persisted){const{leave:q,delayLeave:z}=T,V=()=>q(A,j);z?z(y.el,j,V):V()}else j()},ue=(y,x)=>{let A;for(;y!==x;)A=f(y),i(y),y=A;i(x)},qe=(y,x,A)=>{const{bum:R,scope:T,job:j,subTree:q,um:z,m:V,a:N,parent:et,slots:{__:G}}=y;Kl(V),Kl(N),R&&wo(R),et&&st(G)&&G.forEach(Z=>{et.renderCache[Z]=void 0}),T.stop(),j&&(j.flags|=8,Bt(q,y,x,A)),z&&ve(z,x),ve(()=>{y.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},zt=(y,x,A,R=!1,T=!1,j=0)=>{for(let q=j;q<y.length;q++)Bt(y[q],x,A,R,T)},D=y=>{if(y.shapeFlag&6)return D(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const x=f(y.anchor||y.el),A=x&&x[sm];return A?f(A):x};let Y=!1;const K=(y,x,A)=>{y==null?x._vnode&&Bt(x._vnode,null,null,!0):g(x._vnode||null,y,x,null,null,null,A),x._vnode=y,Y||(Y=!0,$l(),Bu(),Y=!1)},Q={p:g,um:Bt,m:ae,r:Oe,mt:Wt,mc:$,pc:ut,pbc:nt,n:D,o:e};let vt,Nt;return t&&([vt,Nt]=t(Q)),{render:K,hydrate:vt,createApp:Cm(K,vt)}}function Rr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ks({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Rm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function lh(e,t,s=!1){const n=e.children,i=t.children;if(st(n)&&st(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Ts(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&lh(r,a)),a.type===hr&&(a.el=r.el),a.type===ws&&!a.el&&(a.el=r.el)}}function Lm(e){const t=e.slice(),s=[0];let n,i,o,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,e[s[a]]<c?o=a+1:r=a;c<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}function ch(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ch(t)}function Kl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Fm=Symbol.for("v-scx"),jm=()=>ys(Fm);function So(e,t,s){return dh(e,t,s)}function dh(e,t,s=Pt){const{immediate:n,deep:i,flush:o,once:r}=s,a=Yt({},s),l=t&&n||!t&&o!=="post";let c;if(Oi){if(o==="sync"){const p=jm();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ue,p.resume=Ue,p.pause=Ue,p}}const u=ee;a.call=(p,m,g)=>ss(p,u,m,g);let h=!1;o==="post"?a.scheduler=p=>{ve(p,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():nl(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Qp(e,t,a);return Oi&&(c?c.push(f):l&&f()),f}function Nm(e,t,s){const n=this.proxy,i=Ht(e)?e.includes(".")?uh(n,e):()=>n[e]:e.bind(n,n);let o;ct(t)?o=t:(o=t.handler,s=t);const r=Ki(this),a=dh(i,o.bind(n),s);return r(),a}function uh(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Um=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ie(t)}Modifiers`]||e[`${hn(t)}Modifiers`];function $m(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Pt;let i=s;const o=t.startsWith("update:"),r=o&&Um(n,t.slice(7));r&&(r.trim&&(i=s.map(u=>Ht(u)?u.trim():u)),r.number&&(i=s.map(jo)));let a,l=n[a=Pr(t)]||n[a=Pr(Ie(t))];!l&&o&&(l=n[a=Pr(hn(t))]),l&&ss(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ss(c,e,6,i)}}function hh(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!ct(e)){const l=c=>{const u=hh(c,t,!0);u&&(a=!0,Yt(r,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Rt(e)&&n.set(e,null),null):(st(o)?o.forEach(l=>r[l]=null):Yt(r,o),Rt(e)&&n.set(e,r),r)}function ur(e,t){return!e||!sr(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,hn(t))||St(e,t))}function Lr(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:p,ctx:m,inheritAttrs:g}=e,b=Bo(e);let _,w;try{if(s.shapeFlag&4){const S=i||n,M=S;_=Ze(c.call(M,S,u,h,p,f,m)),w=a}else{const S=t;_=Ze(S.length>1?S(h,{attrs:a,slots:r,emit:l}):S(h,null)),w=t.props?a:Bm(a)}}catch(S){pi.length=0,cr(S,e,1),_=E(ws)}let C=_;if(w&&g!==!1){const S=Object.keys(w),{shapeFlag:M}=C;S.length&&M&7&&(o&&S.some(Wa)&&(w=Vm(w,o)),C=In(C,w,!1,!0))}return s.dirs&&(C=In(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&il(C,s.transition),_=C,Bo(b),_}const Bm=e=>{let t;for(const s in e)(s==="class"||s==="style"||sr(s))&&((t||(t={}))[s]=e[s]);return t},Vm=(e,t)=>{const s={};for(const n in e)(!Wa(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function zm(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Gl(n,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(r[f]!==n[f]&&!ur(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Gl(n,r,c):!0:!!r;return!1}function Gl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!ur(s,o))return!0}return!1}function Hm({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const fh=e=>e.__isSuspense;function Wm(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):em(e)}const J=Symbol.for("v-fgt"),hr=Symbol.for("v-txt"),ws=Symbol.for("v-cmt"),Co=Symbol.for("v-stc"),pi=[];let Me=null;function v(e=!1){pi.push(Me=e?null:[])}function qm(){pi.pop(),Me=pi[pi.length-1]||null}let Pi=1;function Yl(e,t=!1){Pi+=e,e<0&&Me&&t&&(Me.hasOnce=!0)}function ph(e){return e.dynamicChildren=Pi>0?Me||Sn:null,qm(),Pi>0&&Me&&Me.push(e),e}function k(e,t,s,n,i,o){return ph(d(e,t,s,n,i,o,!0))}function de(e,t,s,n,i){return ph(E(e,t,s,n,i,!0))}function Ti(e){return e?e.__v_isVNode===!0:!1}function Kn(e,t){return e.type===t.type&&e.key===t.key}const mh=({key:e})=>e??null,Mo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ht(e)||ne(e)||ct(e)?{i:Xt,r:e,k:t,f:!!s}:e:null);function d(e,t=null,s=null,n=0,i=null,o=e===J?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&mh(t),ref:t&&Mo(t),scopeId:zu,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Xt};return a?(ll(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=Ht(s)?8:16),Pi>0&&!r&&Me&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Me.push(l),l}const E=Km;function Km(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===gm)&&(e=ws),Ti(e)){const a=In(e,t,!0);return s&&ll(a,s),Pi>0&&!o&&Me&&(a.shapeFlag&6?Me[Me.indexOf(e)]=a:Me.push(a)),a.patchFlag=-2,a}if(ig(e)&&(e=e.__vccOpts),t){t=Gm(t);let{class:a,style:l}=t;a&&!Ht(a)&&(t.class=be(a)),Rt(l)&&(el(l)&&!st(l)&&(l=Yt({},l)),t.style=rr(l))}const r=Ht(e)?1:fh(e)?128:nm(e)?64:Rt(e)?4:ct(e)?2:0;return d(e,t,s,n,i,r,o,!0)}function Gm(e){return e?el(e)||sh(e)?Yt({},e):e:null}function In(e,t,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,c=t?Ym(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&mh(c),ref:t&&t.ref?s&&o?st(o)?o.concat(Mo(t)):[o,Mo(t)]:Mo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==J?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&In(e.ssContent),ssFallback:e.ssFallback&&In(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&il(u,l.clone(u)),u}function ot(e=" ",t=0){return E(hr,null,e,t)}function cn(e,t){const s=E(Co,null,e);return s.staticCount=t,s}function W(e="",t=!1){return t?(v(),de(ws,null,e)):E(ws,null,e)}function Ze(e){return e==null||typeof e=="boolean"?E(ws):st(e)?E(J,null,e.slice()):Ti(e)?Ts(e):E(hr,null,String(e))}function Ts(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:In(e)}function ll(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(st(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),ll(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!sh(t)?t._ctx=Xt:i===3&&Xt&&(Xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:Xt},s=32):(t=String(t),n&64?(s=16,t=[ot(t)]):s=8);e.children=t,e.shapeFlag|=s}function Ym(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=be([t.class,n.class]));else if(i==="style")t.style=rr([t.style,n.style]);else if(sr(i)){const o=t[i],r=n[i];r&&o!==r&&!(st(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function Ge(e,t,s,n=null){ss(e,t,7,[s,n])}const Jm=Zu();let Xm=0;function Qm(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Jm,o={uid:Xm++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ih(n,i),emitsOptions:hh(n,i),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:n.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=$m.bind(null,o),e.ce&&e.ce(o),o}let ee=null,Ho,ma;{const e=or(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Ho=t("__VUE_INSTANCE_SETTERS__",s=>ee=s),ma=t("__VUE_SSR_SETTERS__",s=>Oi=s)}const Ki=e=>{const t=ee;return Ho(e),e.scope.on(),()=>{e.scope.off(),Ho(t)}},Jl=()=>{ee&&ee.scope.off(),Ho(null)};function gh(e){return e.vnode.shapeFlag&4}let Oi=!1;function Zm(e,t=!1,s=!1){t&&ma(t);const{props:n,children:i}=e.vnode,o=gh(e);Mm(e,n,o,t),Om(e,i,s||t);const r=o?tg(e,t):void 0;return t&&ma(!1),r}function tg(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ym);const{setup:n}=s;if(n){_s();const i=e.setupContext=n.length>1?sg(e):null,o=Ki(e),r=qi(n,e,0,[e.props,i]),a=pu(r);if(vs(),o(),(a||e.sp)&&!Tn(e)&&Wu(e),a){if(r.then(Jl,Jl),t)return r.then(l=>{Xl(e,l,t)}).catch(l=>{cr(l,e,0)});e.asyncDep=r}else Xl(e,r,t)}else bh(e,t)}function Xl(e,t,s){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=Nu(t)),bh(e,s)}let Ql;function bh(e,t,s){const n=e.type;if(!e.render){if(!t&&Ql&&!n.render){const i=n.template||ol(e).template;if(i){const{isCustomElement:o,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Yt(Yt({isCustomElement:o,delimiters:a},r),l);n.render=Ql(i,c)}}e.render=n.render||Ue}{const i=Ki(e);_s();try{xm(e)}finally{vs(),i()}}}const eg={get(e,t){return te(e,"get",""),e[t]}};function sg(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,eg),slots:e.slots,emit:e.emit,expose:t}}function fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Nu(Hp(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in fi)return fi[s](e)},has(t,s){return s in t||s in fi}})):e.proxy}function ng(e,t=!0){return ct(e)?e.displayName||e.name:e.name||t&&e.__name}function ig(e){return ct(e)&&"__vccOpts"in e}const je=(e,t)=>Jp(e,t,Oi);function yh(e,t,s){const n=arguments.length;return n===2?Rt(t)&&!st(t)?Ti(t)?E(e,null,[t]):E(e,t):E(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ti(s)&&(s=[s]),E(e,t,s))}const og="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ga;const Zl=typeof window<"u"&&window.trustedTypes;if(Zl)try{ga=Zl.createPolicy("vue",{createHTML:e=>e})}catch{}const xh=ga?e=>ga.createHTML(e):e=>e,rg="http://www.w3.org/2000/svg",ag="http://www.w3.org/1998/Math/MathML",ds=typeof document<"u"?document:null,tc=ds&&ds.createElement("template"),lg={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ds.createElementNS(rg,e):t==="mathml"?ds.createElementNS(ag,e):s?ds.createElement(e,{is:s}):ds.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ds.createTextNode(e),createComment:e=>ds.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ds.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{tc.innerHTML=xh(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=tc.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},cg=Symbol("_vtc");function dg(e,t,s){const n=e[cg];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Wo=Symbol("_vod"),_h=Symbol("_vsh"),Fr={beforeMount(e,{value:t},{transition:s}){e[Wo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Gn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Gn(e,!0),n.enter(e)):n.leave(e,()=>{Gn(e,!1)}):Gn(e,t))},beforeUnmount(e,{value:t}){Gn(e,t)}};function Gn(e,t){e.style.display=t?e[Wo]:"none",e[_h]=!t}const ug=Symbol(""),hg=/(^|;)\s*display\s*:/;function fg(e,t,s){const n=e.style,i=Ht(s);let o=!1;if(s&&!i){if(t)if(Ht(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Ao(n,a,"")}else for(const r in t)s[r]==null&&Ao(n,r,"");for(const r in s)r==="display"&&(o=!0),Ao(n,r,s[r])}else if(i){if(t!==s){const r=n[ug];r&&(s+=";"+r),n.cssText=s,o=hg.test(s)}}else t&&e.removeAttribute("style");Wo in e&&(e[Wo]=o?n.display:"",e[_h]&&(n.display="none"))}const ec=/\s*!important$/;function Ao(e,t,s){if(st(s))s.forEach(n=>Ao(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=pg(e,t);ec.test(s)?e.setProperty(hn(n),s.replace(ec,""),"important"):e[n]=s}}const sc=["Webkit","Moz","ms"],jr={};function pg(e,t){const s=jr[t];if(s)return s;let n=Ie(t);if(n!=="filter"&&n in e)return jr[t]=n;n=ir(n);for(let i=0;i<sc.length;i++){const o=sc[i]+n;if(o in e)return jr[t]=o}return t}const nc="http://www.w3.org/1999/xlink";function ic(e,t,s,n,i,o=wp(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(nc,t.slice(6,t.length)):e.setAttributeNS(nc,t,s):s==null||o&&!yu(s)?e.removeAttribute(t):e.setAttribute(t,o?"":Ve(s)?String(s):s)}function oc(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?xh(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=yu(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function Ds(e,t,s,n){e.addEventListener(t,s,n)}function mg(e,t,s,n){e.removeEventListener(t,s,n)}const rc=Symbol("_vei");function gg(e,t,s,n,i=null){const o=e[rc]||(e[rc]={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=bg(t);if(n){const c=o[t]=_g(n,i);Ds(e,a,c,l)}else r&&(mg(e,a,r,l),o[t]=void 0)}}const ac=/(?:Once|Passive|Capture)$/;function bg(e){let t;if(ac.test(e)){t={};let n;for(;n=e.match(ac);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hn(e.slice(2)),t]}let Nr=0;const yg=Promise.resolve(),xg=()=>Nr||(yg.then(()=>Nr=0),Nr=Date.now());function _g(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ss(vg(n,s.value),t,5,[n])};return s.value=e,s.attached=xg(),s}function vg(e,t){if(st(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const lc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,wg=(e,t,s,n,i,o)=>{const r=i==="svg";t==="class"?dg(e,n,r):t==="style"?fg(e,s,n):sr(t)?Wa(t)||gg(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):kg(e,t,n,r))?(oc(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ic(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ht(n))?oc(e,Ie(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ic(e,t,n,r))};function kg(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&lc(t)&&ct(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return lc(t)&&Ht(s)?!1:t in e}const Rn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return st(t)?s=>wo(t,s):t};function Sg(e){e.target.composing=!0}function cc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xs=Symbol("_assign"),L={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[xs]=Rn(i);const o=n||i.props&&i.props.type==="number";Ds(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=jo(a)),e[xs](a)}),s&&Ds(e,"change",()=>{e.value=e.value.trim()}),t||(Ds(e,"compositionstart",Sg),Ds(e,"compositionend",cc),Ds(e,"change",cc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(e[xs]=Rn(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?jo(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},cl={deep:!0,created(e,t,s){e[xs]=Rn(s),Ds(e,"change",()=>{const n=e._modelValue,i=Ei(e),o=e.checked,r=e[xs];if(st(n)){const a=Ga(n,i),l=a!==-1;if(o&&!l)r(n.concat(i));else if(!o&&l){const c=[...n];c.splice(a,1),r(c)}}else if(Vn(n)){const a=new Set(n);o?a.add(i):a.delete(i),r(a)}else r(vh(e,o))})},mounted:dc,beforeUpdate(e,t,s){e[xs]=Rn(s),dc(e,t,s)}};function dc(e,{value:t,oldValue:s},n){e._modelValue=t;let i;if(st(t))i=Ga(t,n.props.value)>-1;else if(Vn(t))i=t.has(n.props.value);else{if(t===s)return;i=Wi(t,vh(e,!0))}e.checked!==i&&(e.checked=i)}const Ae={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const i=Vn(t);Ds(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?jo(Ei(r)):Ei(r));e[xs](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,sl(()=>{e._assigning=!1})}),e[xs]=Rn(n)},mounted(e,{value:t}){uc(e,t)},beforeUpdate(e,t,s){e[xs]=Rn(s)},updated(e,{value:t}){e._assigning||uc(e,t)}};function uc(e,t){const s=e.multiple,n=st(t);if(!(s&&!n&&!Vn(t))){for(let i=0,o=e.options.length;i<o;i++){const r=e.options[i],a=Ei(r);if(s)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(c=>String(c)===String(a)):r.selected=Ga(t,a)>-1}else r.selected=t.has(a);else if(Wi(Ei(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ei(e){return"_value"in e?e._value:e.value}function vh(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Cg=["ctrl","shift","alt","meta"],Mg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cg.some(s=>e[`${s}Key`]&&!t.includes(s))},ie=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<t.length;r++){const a=Mg[t[r]];if(a&&a(i,t))return}return e(i,...o)})},Ag=Yt({patchProp:wg},lg);let hc;function Pg(){return hc||(hc=Dm(Ag))}const Tg=(...e)=>{const t=Pg().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=Eg(n);if(!i)return;const o=t._component;!ct(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,Og(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function Og(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Eg(e){return Ht(e)?document.querySelector(e):e}const mt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Dg={name:"CookieBanner",data(){return{consentGiven:!1}},mounted(){this.consentGiven=localStorage.getItem("cookieConsent")==="true"},methods:{acceptCookies(){this.consentGiven=!0,localStorage.setItem("cookieConsent","true")}}},Ig={key:0,class:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50"};function Rg(e,t,s,n,i,o){return i.consentGiven?W("",!0):(v(),k("div",Ig,[t[1]||(t[1]=d("p",{class:"mb-2"},[ot(" Utilizamos cookies para melhorar sua experiência. Ao continuar, você concorda com nossa "),d("a",{href:"#",class:"underline"},"política de privacidade"),ot(". ")],-1)),d("button",{onClick:t[0]||(t[0]=(...r)=>o.acceptCookies&&o.acceptCookies(...r)),class:"btn"}," Aceitar ")]))}const Lg=mt(Dg,[["render",Rg]]),Fg={name:"App",components:{CookieBanner:Lg}};function jg(e,t,s,n,i,o){const r=H("router-view"),a=H("CookieBanner");return v(),k(J,null,[E(r),E(a)],64)}const Ng=mt(Fg,[["render",jg]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const wn=typeof document<"u";function wh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ug(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&wh(e.default)}const wt=Object.assign;function Ur(e,t){const s={};for(const n in t){const i=t[n];s[n]=ze(i)?i.map(e):e(i)}return s}const mi=()=>{},ze=Array.isArray,kh=/#/g,$g=/&/g,Bg=/\//g,Vg=/=/g,zg=/\?/g,Sh=/\+/g,Hg=/%5B/g,Wg=/%5D/g,Ch=/%5E/g,qg=/%60/g,Mh=/%7B/g,Kg=/%7C/g,Ah=/%7D/g,Gg=/%20/g;function dl(e){return encodeURI(""+e).replace(Kg,"|").replace(Hg,"[").replace(Wg,"]")}function Yg(e){return dl(e).replace(Mh,"{").replace(Ah,"}").replace(Ch,"^")}function ba(e){return dl(e).replace(Sh,"%2B").replace(Gg,"+").replace(kh,"%23").replace($g,"%26").replace(qg,"`").replace(Mh,"{").replace(Ah,"}").replace(Ch,"^")}function Jg(e){return ba(e).replace(Vg,"%3D")}function Xg(e){return dl(e).replace(kh,"%23").replace(zg,"%3F")}function Qg(e){return e==null?"":Xg(e).replace(Bg,"%2F")}function Di(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Zg=/\/$/,tb=e=>e.replace(Zg,"");function $r(e,t,s="/"){let n,i={},o="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),r=t.slice(a,t.length)),n=ib(n??t,s),{fullPath:n+(o&&"?")+o+r,path:n,query:i,hash:Di(r)}}function eb(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function fc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function sb(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&Ln(t.matched[n],s.matched[i])&&Ph(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ln(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ph(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!nb(e[s],t[s]))return!1;return!0}function nb(e,t){return ze(e)?pc(e,t):ze(t)?pc(t,e):e===t}function pc(e,t){return ze(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function ib(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=s.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(r).join("/")}const Cs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ii;(function(e){e.pop="pop",e.push="push"})(Ii||(Ii={}));var gi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(gi||(gi={}));function ob(e){if(!e)if(wn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),tb(e)}const rb=/^[^#]+#/;function ab(e,t){return e.replace(rb,"#")+t}function lb(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const pr=()=>({left:window.scrollX,top:window.scrollY});function cb(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=lb(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function mc(e,t){return(history.state?history.state.position-t:-1)+e}const ya=new Map;function db(e,t){ya.set(e,t)}function ub(e){const t=ya.get(e);return ya.delete(e),t}let hb=()=>location.protocol+"//"+location.host;function Th(e,t){const{pathname:s,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),fc(l,"")}return fc(s,e)+n+i}function fb(e,t,s,n){let i=[],o=[],r=null;const a=({state:f})=>{const p=Th(e,location),m=s.value,g=t.value;let b=0;if(f){if(s.value=p,t.value=f,r&&r===m){r=null;return}b=g?f.position-g.position:0}else n(p);i.forEach(_=>{_(s.value,m,{delta:b,type:Ii.pop,direction:b?b>0?gi.forward:gi.back:gi.unknown})})};function l(){r=s.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return o.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(wt({},f.state,{scroll:pr()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function gc(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?pr():null}}function pb(e){const{history:t,location:s}=window,n={value:Th(e,s)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const h=e.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?e:e.slice(h))+l:hb()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function r(l,c){const u=wt({},t.state,gc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,u,!0),n.value=l}function a(l,c){const u=wt({},i.value,t.state,{forward:l,scroll:pr()});o(u.current,u,!0);const h=wt({},gc(n.value,l,null),{position:u.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function mb(e){e=ob(e);const t=pb(e),s=fb(e,t.state,t.location,t.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=wt({location:"",base:e,go:n,createHref:ab.bind(null,e)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function gb(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),mb(e)}function bb(e){return typeof e=="string"||e&&typeof e=="object"}function Oh(e){return typeof e=="string"||typeof e=="symbol"}const Eh=Symbol("");var bc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(bc||(bc={}));function Fn(e,t){return wt(new Error,{type:e,[Eh]:!0},t)}function os(e,t){return e instanceof Error&&Eh in e&&(t==null||!!(e.type&t))}const yc="[^/]+?",yb={sensitive:!1,strict:!1,start:!0,end:!0},xb=/[.+*?^${}()[\]/\\]/g;function _b(e,t){const s=wt({},yb,t),n=[];let i=s.start?"^":"";const o=[];for(const c of e){const u=c.length?[]:[90];s.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(xb,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:g,optional:b,regexp:_}=f;o.push({name:m,repeatable:g,optional:b});const w=_||yc;if(w!==yc){p+=10;try{new RegExp(`(${w})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${w}): `+S.message)}}let C=g?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(C=b&&c.length<2?`(?:/${C})`:"/"+C),b&&(C+="?"),i+=C,p+=20,b&&(p+=-8),g&&(p+=-20),w===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function a(c){const u=c.match(r),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=o[f-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:b}=p,_=m in c?c[m]:"";if(ze(_)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const w=ze(_)?_.join("/"):_;if(!w)if(b)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=w}}return u||"/"}return{re:r,score:n,keys:o,parse:a,stringify:l}}function vb(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Dh(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const o=vb(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(xc(n))return 1;if(xc(i))return-1}return i.length-n.length}function xc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const wb={type:0,value:""},kb=/[a-zA-Z0-9_]/;function Sb(e){if(!e)return[[]];if(e==="/")return[[wb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=0,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,c="",u="";function h(){c&&(s===0?o.push({type:0,value:c}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&h(),r()):l===":"?(h(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:kb.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),r(),i}function Cb(e,t,s){const n=_b(Sb(e.path),s),i=wt(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Mb(e,t){const s=[],n=new Map;t=kc({strict:!1,end:!0,sensitive:!1},t);function i(h){return n.get(h)}function o(h,f,p){const m=!p,g=vc(h);g.aliasOf=p&&p.record;const b=kc(t,h),_=[g];if("alias"in h){const S=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of S)_.push(vc(wt({},g,{components:p?p.record.components:g.components,path:M,aliasOf:p?p.record:g})))}let w,C;for(const S of _){const{path:M}=S;if(f&&M[0]!=="/"){const F=f.record.path,I=F[F.length-1]==="/"?"":"/";S.path=f.record.path+(M&&I+M)}if(w=Cb(S,f,b),p?p.alias.push(w):(C=C||w,C!==w&&C.alias.push(w),m&&h.name&&!wc(w)&&r(h.name)),Ih(w)&&l(w),g.children){const F=g.children;for(let I=0;I<F.length;I++)o(F[I],w,p&&p.children[I])}p=p||w}return C?()=>{r(C)}:mi}function r(h){if(Oh(h)){const f=n.get(h);f&&(n.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(r),h.alias.forEach(r))}}function a(){return s}function l(h){const f=Tb(h,s);s.splice(f,0,h),h.record.name&&!wc(h)&&n.set(h.record.name,h)}function c(h,f){let p,m={},g,b;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw Fn(1,{location:h});b=p.record.name,m=wt(_c(f.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),h.params&&_c(h.params,p.keys.map(C=>C.name))),g=p.stringify(m)}else if(h.path!=null)g=h.path,p=s.find(C=>C.re.test(g)),p&&(m=p.parse(g),b=p.record.name);else{if(p=f.name?n.get(f.name):s.find(C=>C.re.test(f.path)),!p)throw Fn(1,{location:h,currentLocation:f});b=p.record.name,m=wt({},f.params,h.params),g=p.stringify(m)}const _=[];let w=p;for(;w;)_.unshift(w.record),w=w.parent;return{name:b,path:g,params:m,matched:_,meta:Pb(_)}}e.forEach(h=>o(h));function u(){s.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function _c(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function vc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ab(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ab(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function wc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pb(e){return e.reduce((t,s)=>wt(t,s.meta),{})}function kc(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function Tb(e,t){let s=0,n=t.length;for(;s!==n;){const o=s+n>>1;Dh(e,t[o])<0?n=o:s=o+1}const i=Ob(e);return i&&(n=t.lastIndexOf(i,n-1)),n}function Ob(e){let t=e;for(;t=t.parent;)if(Ih(t)&&Dh(e,t)===0)return t}function Ih({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Eb(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Sh," "),r=o.indexOf("="),a=Di(r<0?o:o.slice(0,r)),l=r<0?null:Di(o.slice(r+1));if(a in t){let c=t[a];ze(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Sc(e){let t="";for(let s in e){const n=e[s];if(s=Jg(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(ze(n)?n.map(o=>o&&ba(o)):[n&&ba(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Db(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=ze(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const Ib=Symbol(""),Cc=Symbol(""),ul=Symbol(""),Rh=Symbol(""),xa=Symbol("");function Yn(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Os(e,t,s,n,i,o=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Fn(4,{from:s,to:t})):f instanceof Error?l(f):bb(f)?l(Fn(2,{from:t,to:f})):(r&&n.enterCallbacks[i]===r&&typeof f=="function"&&r.push(f),a())},u=o(()=>e.call(n&&n.instances[i],t,s,c));let h=Promise.resolve(u);e.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Br(e,t,s,n,i=o=>o()){const o=[];for(const r of e)for(const a in r.components){let l=r.components[a];if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(wh(l)){const u=(l.__vccOpts||l)[t];u&&o.push(Os(u,s,n,r,a,i))}else{let c=l();o.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const h=Ug(u)?u.default:u;r.mods[a]=u,r.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&Os(p,s,n,r,a,i)()}))}}return o}function Mc(e){const t=ys(ul),s=ys(Rh),n=je(()=>{const l=An(e.to);return t.resolve(l)}),i=je(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=s.matched;if(!u||!h.length)return-1;const f=h.findIndex(Ln.bind(null,u));if(f>-1)return f;const p=Ac(l[c-2]);return c>1&&Ac(u)===p&&h[h.length-1].path!==p?h.findIndex(Ln.bind(null,l[c-2])):f}),o=je(()=>i.value>-1&&Nb(s.params,n.value.params)),r=je(()=>i.value>-1&&i.value===s.matched.length-1&&Ph(s.params,n.value.params));function a(l={}){if(jb(l)){const c=t[An(e.replace)?"replace":"push"](An(e.to)).catch(mi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:je(()=>n.value.href),isActive:o,isExactActive:r,navigate:a}}function Rb(e){return e.length===1?e[0]:e}const Lb=Hu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Mc,setup(e,{slots:t}){const s=lr(Mc(e)),{options:n}=ys(ul),i=je(()=>({[Pc(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Pc(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&Rb(t.default(s));return e.custom?o:yh("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),Fb=Lb;function jb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Nb(e,t){for(const s in t){const n=t[s],i=e[s];if(typeof n=="string"){if(n!==i)return!1}else if(!ze(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function Ac(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pc=(e,t,s)=>e??t??s,Ub=Hu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=ys(xa),i=je(()=>e.route||n.value),o=ys(Cc,0),r=je(()=>{let c=An(o);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=je(()=>i.value.matched[r.value]);ko(Cc,je(()=>r.value+1)),ko(Ib,a),ko(xa,i);const l=Wp();return So(()=>[l.value,a.value,e.name],([c,u,h],[f,p,m])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ln(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Tc(s.default,{Component:f,route:c});const p=h.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,b=yh(f,wt({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Tc(s.default,{Component:b,route:c})||b}}});function Tc(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const $b=Ub;function Bb(e){const t=Mb(e.routes,e),s=e.parseQuery||Eb,n=e.stringifyQuery||Sc,i=e.history,o=Yn(),r=Yn(),a=Yn(),l=qp(Cs);let c=Cs;wn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ur.bind(null,D=>""+D),h=Ur.bind(null,Qg),f=Ur.bind(null,Di);function p(D,Y){let K,Q;return Oh(D)?(K=t.getRecordMatcher(D),Q=Y):Q=D,t.addRoute(Q,K)}function m(D){const Y=t.getRecordMatcher(D);Y&&t.removeRoute(Y)}function g(){return t.getRoutes().map(D=>D.record)}function b(D){return!!t.getRecordMatcher(D)}function _(D,Y){if(Y=wt({},Y||l.value),typeof D=="string"){const x=$r(s,D,Y.path),A=t.resolve({path:x.path},Y),R=i.createHref(x.fullPath);return wt(x,A,{params:f(A.params),hash:Di(x.hash),redirectedFrom:void 0,href:R})}let K;if(D.path!=null)K=wt({},D,{path:$r(s,D.path,Y.path).path});else{const x=wt({},D.params);for(const A in x)x[A]==null&&delete x[A];K=wt({},D,{params:h(x)}),Y.params=h(Y.params)}const Q=t.resolve(K,Y),vt=D.hash||"";Q.params=u(f(Q.params));const Nt=eb(n,wt({},D,{hash:Yg(vt),path:Q.path})),y=i.createHref(Nt);return wt({fullPath:Nt,hash:vt,query:n===Sc?Db(D.query):D.query||{}},Q,{redirectedFrom:void 0,href:y})}function w(D){return typeof D=="string"?$r(s,D,l.value.path):wt({},D)}function C(D,Y){if(c!==D)return Fn(8,{from:Y,to:D})}function S(D){return I(D)}function M(D){return S(wt(w(D),{replace:!0}))}function F(D){const Y=D.matched[D.matched.length-1];if(Y&&Y.redirect){const{redirect:K}=Y;let Q=typeof K=="function"?K(D):K;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=w(Q):{path:Q},Q.params={}),wt({query:D.query,hash:D.hash,params:Q.path!=null?{}:D.params},Q)}}function I(D,Y){const K=c=_(D),Q=l.value,vt=D.state,Nt=D.force,y=D.replace===!0,x=F(K);if(x)return I(wt(w(x),{state:typeof x=="object"?wt({},vt,x.state):vt,force:Nt,replace:y}),Y||K);const A=K;A.redirectedFrom=Y;let R;return!Nt&&sb(n,Q,K)&&(R=Fn(16,{to:A,from:Q}),ae(Q,Q,!0,!1)),(R?Promise.resolve(R):nt(A,Q)).catch(T=>os(T)?os(T,2)?T:re(T):ut(T,A,Q)).then(T=>{if(T){if(os(T,2))return I(wt({replace:y},w(T.to),{state:typeof T.to=="object"?wt({},vt,T.to.state):vt,force:Nt}),Y||A)}else T=dt(A,Q,!0,y,vt);return rt(A,Q,T),T})}function $(D,Y){const K=C(D,Y);return K?Promise.reject(K):Promise.resolve()}function X(D){const Y=ue.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(D):D()}function nt(D,Y){let K;const[Q,vt,Nt]=Vb(D,Y);K=Br(Q.reverse(),"beforeRouteLeave",D,Y);for(const x of Q)x.leaveGuards.forEach(A=>{K.push(Os(A,D,Y))});const y=$.bind(null,D,Y);return K.push(y),zt(K).then(()=>{K=[];for(const x of o.list())K.push(Os(x,D,Y));return K.push(y),zt(K)}).then(()=>{K=Br(vt,"beforeRouteUpdate",D,Y);for(const x of vt)x.updateGuards.forEach(A=>{K.push(Os(A,D,Y))});return K.push(y),zt(K)}).then(()=>{K=[];for(const x of Nt)if(x.beforeEnter)if(ze(x.beforeEnter))for(const A of x.beforeEnter)K.push(Os(A,D,Y));else K.push(Os(x.beforeEnter,D,Y));return K.push(y),zt(K)}).then(()=>(D.matched.forEach(x=>x.enterCallbacks={}),K=Br(Nt,"beforeRouteEnter",D,Y,X),K.push(y),zt(K))).then(()=>{K=[];for(const x of r.list())K.push(Os(x,D,Y));return K.push(y),zt(K)}).catch(x=>os(x,8)?x:Promise.reject(x))}function rt(D,Y,K){a.list().forEach(Q=>X(()=>Q(D,Y,K)))}function dt(D,Y,K,Q,vt){const Nt=C(D,Y);if(Nt)return Nt;const y=Y===Cs,x=wn?history.state:{};K&&(Q||y?i.replace(D.fullPath,wt({scroll:y&&x&&x.scroll},vt)):i.push(D.fullPath,vt)),l.value=D,ae(D,Y,K,y),re()}let At;function Wt(){At||(At=i.listen((D,Y,K)=>{if(!qe.listening)return;const Q=_(D),vt=F(Q);if(vt){I(wt(vt,{replace:!0,force:!0}),Q).catch(mi);return}c=Q;const Nt=l.value;wn&&db(mc(Nt.fullPath,K.delta),pr()),nt(Q,Nt).catch(y=>os(y,12)?y:os(y,2)?(I(wt(w(y.to),{force:!0}),Q).then(x=>{os(x,20)&&!K.delta&&K.type===Ii.pop&&i.go(-1,!1)}).catch(mi),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ut(y,Q,Nt))).then(y=>{y=y||dt(Q,Nt,!1),y&&(K.delta&&!os(y,8)?i.go(-K.delta,!1):K.type===Ii.pop&&os(y,20)&&i.go(-1,!1)),rt(Q,Nt,y)}).catch(mi)}))}let xt=Yn(),lt=Yn(),it;function ut(D,Y,K){re(D);const Q=lt.list();return Q.length?Q.forEach(vt=>vt(D,Y,K)):console.error(D),Promise.reject(D)}function Tt(){return it&&l.value!==Cs?Promise.resolve():new Promise((D,Y)=>{xt.add([D,Y])})}function re(D){return it||(it=!D,Wt(),xt.list().forEach(([Y,K])=>D?K(D):Y()),xt.reset()),D}function ae(D,Y,K,Q){const{scrollBehavior:vt}=e;if(!wn||!vt)return Promise.resolve();const Nt=!K&&ub(mc(D.fullPath,0))||(Q||!K)&&history.state&&history.state.scroll||null;return sl().then(()=>vt(D,Y,Nt)).then(y=>y&&cb(y)).catch(y=>ut(y,D,Y))}const Bt=D=>i.go(D);let Oe;const ue=new Set,qe={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:g,resolve:_,options:e,push:S,replace:M,go:Bt,back:()=>Bt(-1),forward:()=>Bt(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:lt.add,isReady:Tt,install(D){const Y=this;D.component("RouterLink",Fb),D.component("RouterView",$b),D.config.globalProperties.$router=Y,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>An(l)}),wn&&!Oe&&l.value===Cs&&(Oe=!0,S(i.location).catch(vt=>{}));const K={};for(const vt in Cs)Object.defineProperty(K,vt,{get:()=>l.value[vt],enumerable:!0});D.provide(ul,Y),D.provide(Rh,Lu(K)),D.provide(xa,l);const Q=D.unmount;ue.add(D),D.unmount=function(){ue.delete(D),ue.size<1&&(c=Cs,At&&At(),At=null,l.value=Cs,Oe=!1,it=!1),Q()}}};function zt(D){return D.reduce((Y,K)=>Y.then(()=>X(K)),Promise.resolve())}return qe}function Vb(e,t){const s=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(c=>Ln(c,a))?n.push(a):s.push(a));const l=e.matched[r];l&&(t.matched.find(c=>Ln(c,l))||i.push(l))}return[s,n,i]}const zb={name:"Navbar",data(){return{open:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route(){this.open=!1}},methods:{toggleMenu(){this.open=!this.open},handleScroll(){this.open&&(this.open=!1)}}},Hb={class:"flex items-center justify-between px-8 py-4 bg-white shadow relative"},Wb={class:"hidden md:flex items-center space-x-4"},qb={key:0,class:"absolute top-full left-0 w-full bg-white shadow-md md:hidden flex flex-col items-start space-y-2 py-4 px-8"};function Kb(e,t,s,n,i,o){const r=H("router-link");return v(),k("nav",Hb,[E(r,{to:"/",class:"text-xl font-bold text-blue-600"},{default:tt(()=>t[5]||(t[5]=[ot("Agenda Zen")])),_:1,__:[5]}),d("button",{onClick:t[0]||(t[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden focus:outline-none"},t[6]||(t[6]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),d("div",Wb,[E(r,{to:"/buscar",class:"text-blue-600 hover:underline"},{default:tt(()=>t[7]||(t[7]=[ot("Buscar")])),_:1,__:[7]}),E(r,{to:"/planos",class:"text-blue-600 hover:underline"},{default:tt(()=>t[8]||(t[8]=[ot("Planos")])),_:1,__:[8]}),E(r,{to:"/contato",class:"text-blue-600 hover:underline"},{default:tt(()=>t[9]||(t[9]=[ot("Contato")])),_:1,__:[9]}),E(r,{to:"/login",class:"btn"},{default:tt(()=>t[10]||(t[10]=[ot("Login")])),_:1,__:[10]})]),i.open?(v(),k("div",qb,[E(r,{onClick:t[1]||(t[1]=a=>i.open=!1),to:"/buscar",class:"text-blue-600 hover:underline"},{default:tt(()=>t[11]||(t[11]=[ot("Buscar")])),_:1,__:[11]}),E(r,{onClick:t[2]||(t[2]=a=>i.open=!1),to:"/planos",class:"text-blue-600 hover:underline"},{default:tt(()=>t[12]||(t[12]=[ot("Planos")])),_:1,__:[12]}),E(r,{onClick:t[3]||(t[3]=a=>i.open=!1),to:"/contato",class:"text-blue-600 hover:underline"},{default:tt(()=>t[13]||(t[13]=[ot("Contato")])),_:1,__:[13]}),E(r,{onClick:t[4]||(t[4]=a=>i.open=!1),to:"/login",class:"btn"},{default:tt(()=>t[14]||(t[14]=[ot("Login")])),_:1,__:[14]})])):W("",!0)])}const He=mt(zb,[["render",Kb]]),Gb="/hero-illustration.png",Yb={name:"HeroBanner",data(){return{timeLeft:300,intervalId:null}},computed:{formattedTime(){const e=Math.floor(this.timeLeft/60).toString().padStart(2,"0"),t=(this.timeLeft%60).toString().padStart(2,"0");return`${e}:${t}`}},mounted(){this.intervalId=setInterval(()=>{this.timeLeft>0?this.timeLeft--:clearInterval(this.intervalId)},1e3)},beforeUnmount(){clearInterval(this.intervalId)}},Jb={class:"text-center py-20"},Xb={class:"max-w-4xl mx-auto px-4"},Qb={class:"grid grid-cols-1 md:grid-cols-2 items-center gap-8"},Zb={class:"space-x-4"},t0={class:"mt-6 text-2xl text-blue-600 font-semibold"};function e0(e,t,s,n,i,o){const r=H("router-link");return v(),k("section",Jb,[d("div",Xb,[d("div",Qb,[d("div",null,[t[2]||(t[2]=d("h1",{class:"text-4xl font-bold text-blue-800 mb-4"},"Sua agenda digital simples e profissional",-1)),t[3]||(t[3]=d("p",{class:"text-gray-600 text-lg mb-6"},"Perfeita para psicólogos, terapeutas, dentistas, cabeleireiros e mais",-1)),d("div",Zb,[E(r,{to:"/login",class:"bg-white border border-blue-600 text-blue-600 px-6 py-2 rounded hover:bg-blue-100"},{default:tt(()=>t[0]||(t[0]=[ot("Entrar")])),_:1,__:[0]}),E(r,{to:"/cadastro",class:"btn"},{default:tt(()=>t[1]||(t[1]=[ot("Criar conta")])),_:1,__:[1]})]),d("div",t0," Tempo restante: "+P(o.formattedTime),1)]),t[4]||(t[4]=d("div",null,[d("img",{src:Gb,alt:"Ilustração profissional usando a plataforma",class:"w-full h-auto mx-auto"})],-1))])])])}const s0=mt(Yb,[["render",e0]]),as="/icons/check.svg",n0={name:"FeaturesSection"},i0={class:"py-16 px-8"};function o0(e,t,s,n,i,o){return v(),k("section",i0,t[0]||(t[0]=[cn('<h2 class="text-2xl font-bold text-center mb-8">Funcionalidades</h2><ul class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 text-lg"><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Cadastro e autenticação de usuários</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Gestão de clientes, serviços e salas</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Controle de agendamentos em lista, calendário ou semana</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Dashboard com estatísticas e gráficos</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Configuração de perfil público com link personalizado</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Geração de comprovantes de atendimento</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Lembretes automáticos para seus clientes</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Pagamentos via Pix de forma prática e segura</span></li></ul>',2)]))}const r0=mt(n0,[["render",o0]]),a0="/about-illustration.png",l0={name:"AboutSection"},c0={class:"px-8 py-16"};function d0(e,t,s,n,i,o){return v(),k("section",c0,t[0]||(t[0]=[d("div",{class:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center"},[d("div",null,[d("img",{src:a0,alt:"Ilustração sobre agendamento",class:"w-full h-auto mx-auto"})]),d("div",null,[d("h2",{class:"text-2xl font-bold mb-4"},"O que é o Agenda Zen?"),d("p",{class:"text-gray-700 text-lg"}," O Agenda Zen é uma plataforma pensada para profissionais que trabalham com agendamentos. Criamos uma solução simples, bonita e eficiente para divulgar seus serviços, aceitar agendamentos online, enviar lembretes automáticos e receber pagamentos por Pix — tudo sem complicação. ")])],-1)]))}const u0=mt(l0,[["render",d0]]),h0={name:"Footer"},f0={class:"bg-gray-100 text-center text-sm text-gray-500 py-6 space-y-2"},p0={class:"flex flex-wrap justify-center space-x-2"};function m0(e,t,s,n,i,o){const r=H("router-link");return v(),k("footer",f0,[t[9]||(t[9]=d("div",{class:"space-x-4 text-blue-600"},[d("a",{href:"https://www.instagram.com/agendazen_",target:"_blank",class:"hover:underline"},"Instagram"),d("a",{href:"https://www.facebook.com/agenda.zen",target:"_blank",class:"hover:underline"},"Facebook"),d("a",{href:"https://x.com/agenda_zen",target:"_blank",class:"hover:underline"},"X")],-1)),d("div",p0,[E(r,{to:"/termos-de-uso",class:"hover:underline"},{default:tt(()=>t[0]||(t[0]=[ot("Termos de uso")])),_:1,__:[0]}),t[5]||(t[5]=d("span",null,"|",-1)),E(r,{to:"/planos",class:"hover:underline"},{default:tt(()=>t[1]||(t[1]=[ot("Planos")])),_:1,__:[1]}),t[6]||(t[6]=d("span",null,"|",-1)),E(r,{to:"/contato",class:"hover:underline"},{default:tt(()=>t[2]||(t[2]=[ot("Contato")])),_:1,__:[2]}),t[7]||(t[7]=d("span",null,"|",-1)),E(r,{to:"/faq",class:"hover:underline"},{default:tt(()=>t[3]||(t[3]=[ot("FAQ")])),_:1,__:[3]}),t[8]||(t[8]=d("span",null,"|",-1)),E(r,{to:"/politica-de-privacidade",class:"hover:underline"},{default:tt(()=>t[4]||(t[4]=[ot("Política de privacidade")])),_:1,__:[4]})]),t[10]||(t[10]=d("p",null,"© 2025 Agenda Zen — Todos os direitos reservados",-1))])}const We=mt(h0,[["render",m0]]),g0={name:"Home",components:{Navbar:He,HeroBanner:s0,FeaturesSection:r0,AboutSection:u0,Footer:We}};function b0(e,t,s,n,i,o){const r=H("Navbar"),a=H("HeroBanner"),l=H("FeaturesSection"),c=H("AboutSection"),u=H("Footer");return v(),k(J,null,[E(r),E(a),E(l),E(c),E(u)],64)}const y0=mt(g0,[["render",b0]]),x0="modulepreload",_0=function(e){return"/"+e},Oc={},jn=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=_0(o),o in Oc)return;Oc[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===o&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":x0,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},v0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>jn(()=>Promise.resolve().then(()=>zn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class hl extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class w0 extends hl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class k0 extends hl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class S0 extends hl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _a;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_a||(_a={}));var C0=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class M0{constructor(t,{headers:s={},customFetch:n,region:i=_a.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=v0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return C0(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=r):typeof r=="string"?(a["Content-Type"]="text/plain",c=r):typeof FormData<"u"&&r instanceof FormData?c=r:(a["Content-Type"]="application/json",c=JSON.stringify(r)));const u=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new w0(m)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new k0(u);if(!u.ok)throw new S0(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var me={},fl={},mr={},Gi={},gr={},br={},P0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nn=P0();const T0=Nn.fetch,Lh=Nn.fetch.bind(Nn),Fh=Nn.Headers,O0=Nn.Request,E0=Nn.Response,zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fh,Request:O0,Response:E0,default:Lh,fetch:T0},Symbol.toStringTag,{value:"Module"})),D0=A0(zn);var yr={};Object.defineProperty(yr,"__esModule",{value:!0});let I0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};yr.default=I0;var jh=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(br,"__esModule",{value:!0});const R0=jh(D0),L0=jh(yr);let F0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=R0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var r,a,l;let c=null,u=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const _=await o.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=_:u=JSON.parse(_))}const g=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),b=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(u=[],c=null,f=200,p="OK")}catch{o.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new L0.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var r,a,l;return{error:{message:`${(r=o==null?void 0:o.name)!==null&&r!==void 0?r:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,s)}returns(){return this}overrideTypes(){return this}};br.default=F0;var j0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gr,"__esModule",{value:!0});const N0=j0(br);let U0=class extends N0.default{select(t){let s=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const r=o?`${o}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(r,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:r="text"}={}){var a;const l=[t?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};gr.default=U0;var $0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gi,"__esModule",{value:!0});const B0=$0(gr);let V0=class extends B0.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const r=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${r}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Gi.default=V0;var z0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mr,"__esModule",{value:!0});const Jn=z0(Gi);let H0=class{constructor(t,{headers:s={},schema:n,fetch:i}){this.url=t,this.headers=s,this.schema=n,this.fetch=i}select(t,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let o=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),n&&(this.headers.Prefer=`count=${n}`),new Jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const r=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(r.length>0){const a=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){const r="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new Jn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Jn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};mr.default=H0;var xr={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.version=void 0;_r.version="0.0.0-automated";Object.defineProperty(xr,"__esModule",{value:!0});xr.DEFAULT_HEADERS=void 0;const W0=_r;xr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${W0.version}`};var Nh=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fl,"__esModule",{value:!0});const q0=Nh(mr),K0=Nh(Gi),G0=xr;let Y0=class Uh{constructor(t,{headers:s={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},G0.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(t){const s=new URL(`${this.url}/${t}`);return new q0.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Uh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:i=!1,count:o}={}){let r;const a=new URL(`${this.url}/rpc/${t}`);let l;n||i?(r=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(r="POST",l=s);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new K0.default({method:r,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};fl.default=Y0;var Hn=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});me.PostgrestError=me.PostgrestBuilder=me.PostgrestTransformBuilder=me.PostgrestFilterBuilder=me.PostgrestQueryBuilder=me.PostgrestClient=void 0;const $h=Hn(fl);me.PostgrestClient=$h.default;const Bh=Hn(mr);me.PostgrestQueryBuilder=Bh.default;const Vh=Hn(Gi);me.PostgrestFilterBuilder=Vh.default;const zh=Hn(gr);me.PostgrestTransformBuilder=zh.default;const Hh=Hn(br);me.PostgrestBuilder=Hh.default;const Wh=Hn(yr);me.PostgrestError=Wh.default;var J0=me.default={PostgrestClient:$h.default,PostgrestQueryBuilder:Bh.default,PostgrestFilterBuilder:Vh.default,PostgrestTransformBuilder:zh.default,PostgrestBuilder:Hh.default,PostgrestError:Wh.default};const{PostgrestClient:X0,PostgrestQueryBuilder:LE,PostgrestFilterBuilder:FE,PostgrestTransformBuilder:jE,PostgrestBuilder:NE,PostgrestError:UE}=J0,Q0="2.11.2",Z0={"X-Client-Info":`realtime-js/${Q0}`},ty="1.0.0",qh=1e4,ey=1e3;var En;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(En||(En={}));var we;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(we||(we={}));var Fe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fe||(Fe={}));var va;(function(e){e.websocket="websocket"})(va||(va={}));var nn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nn||(nn={}));class sy{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(t.slice(r,r+i));r=r+i;const l=n.decode(t.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(t.slice(r,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Kh{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Et||(Et={}));const Ec=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,r)=>(o[r]=ny(r,e,t,i),o),{})},ny=(e,t,s,n)=>{const i=t.find(a=>a.name===e),o=i==null?void 0:i.type,r=s[e];return o&&!n.includes(o)?Gh(o,r):wa(r)},Gh=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return ay(t,s)}switch(e){case Et.bool:return iy(t);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return oy(t);case Et.json:case Et.jsonb:return ry(t);case Et.timestamp:return ly(t);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return wa(t);default:return wa(t)}},wa=e=>e,iy=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},oy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ry=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ay=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let o;const r=e.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>Gh(t,a))}return e},ly=e=>typeof e=="string"?e.replace(" ","T"):e,Yh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Vr{constructor(t,s,n={},i=qh){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dc||(Dc={}));class bi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=bi.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=bi.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const o=this.cloneDeep(t),r=this.transformState(s),a={},l={};return this.map(o,(c,u)=>{r[c]||(l[c]=u)}),this.map(r,(c,u)=>{const h=o[c];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=u.filter(b=>p.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(r,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ic;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ic||(Ic={}));var Rc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Rc||(Rc={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class pl{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Vr(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new Kh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new bi(this),this.broadcastEndpointURL=Yh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:r,private:a}}=this.params;this._onError(u=>t==null?void 0:t(us.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(us.CLOSED));const l={},c={broadcast:o,presence:r,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(us.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let g=0;g<p;g++){const b=f[g],{filter:{event:_,schema:w,table:C,filter:S}}=b,M=u&&u[g];if(M&&M.event===_&&M.schema===w&&M.table===C&&M.filter===S)m.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(us.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:r}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=we.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Vr(this,Fe.leave,{},t);i.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Vr(this,t,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,o;const r=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Fe;if(n&&[a,l,c,u].indexOf(r)>=0&&n!==this._joinRef())return;let f=this._onMessage(r,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===r}).map(p=>p.callback(f,n)):(o=this.bindings[r])===null||o===void 0||o.filter(p=>{var m,g,b,_,w,C;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in p){const S=p.id,M=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(w=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((C=s==null?void 0:s.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===r}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:b,commit_timestamp:_,type:w,errors:C}=m;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:_,eventType:w,new:{},old:{},errors:C}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&pl.isEqual(i.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fe.close,{},t)}_onError(t){this._on(Fe.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Ec(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Ec(t.columns,t.old_record)),s}}const cy=()=>{},dy=typeof WebSocket<"u",uy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hy{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Z0,this.params={},this.timeout=qh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=cy,this.conn=null,this.sendBuffer=[],this.serializer=new sy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let r;return o?r=o:typeof fetch>"u"?r=(...a)=>jn(()=>Promise.resolve().then(()=>zn),void 0).then(({default:l})=>l(...a)):r=fetch,(...a)=>r(...a)},this.endPoint=`${t}/${va.websocket}`,this.httpEndpoint=Yh(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,r)=>r(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(dy){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new fy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),jn(()=>import("./browser-fd3afa1d.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ty}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case En.connecting:return nn.Connecting;case En.open:return nn.Open;case En.closing:return nn.Closing;default:return nn.Closed}}isConnected(){return this.connectionState()===nn.Open}channel(t,s={config:{}}){const n=new pl(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:i,ref:o}=t,r=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(i=>{s&&i.updateJoinPayload({access_token:s}),i.joinedOnce&&i._isJoined()&&i._push(Fe.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(ey,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:i,payload:o,ref:r}=s;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${i} ${r&&"("+r+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,o,r)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fe.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([uy],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class fy{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=En.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class ml extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class py extends ml{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ka extends ml{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var my=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Jh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>jn(()=>Promise.resolve().then(()=>zn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},gy=()=>my(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jn(()=>Promise.resolve().then(()=>zn),void 0)).Response:Response}),Sa=e=>{if(Array.isArray(e))return e.map(s=>Sa(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Sa(n)}),t};var fn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),by=(e,t,s)=>fn(void 0,void 0,void 0,function*(){const n=yield gy();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(i=>{t(new py(zr(i),e.status||500))}).catch(i=>{t(new ka(zr(i),i))}):t(new ka(zr(e),e))}),yy=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function Yi(e,t,s,n,i,o){return fn(this,void 0,void 0,function*(){return new Promise((r,a)=>{e(s,yy(t,n,i,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>by(l,a,n))})})}function qo(e,t,s,n){return fn(this,void 0,void 0,function*(){return Yi(e,"GET",t,s,n)})}function Es(e,t,s,n,i){return fn(this,void 0,void 0,function*(){return Yi(e,"POST",t,n,i,s)})}function xy(e,t,s,n,i){return fn(this,void 0,void 0,function*(){return Yi(e,"PUT",t,n,i,s)})}function _y(e,t,s,n){return fn(this,void 0,void 0,function*(){return Yi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Xh(e,t,s,n,i){return fn(this,void 0,void 0,function*(){return Yi(e,"DELETE",t,n,i,s)})}var he=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const vy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wy{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=Jh(i)}uploadOrUpdate(t,s,n,i){return he(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Lc),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:o,headers:a},r!=null&&r.duplex?{duplex:r.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}upload(t,s,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return he(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Lc.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Kt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return he(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const o=yield Es(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new ml("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:a},error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}update(t,s,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return he(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}copy(t,s,n){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield Es(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return he(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Es(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return he(this,void 0,void 0,function*(){try{const i=yield Es(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}download(t,s){return he(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield qo(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Kt(a))return{data:null,error:a};throw a}})}info(t){return he(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield qo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Sa(n),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}exists(t){return he(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield _y(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Kt(n)&&n instanceof ka){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return he(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}list(t,s,n){return he(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},vy),s),{prefix:t||""});return{data:yield Es(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const ky="2.7.1",Sy={"X-Client-Info":`storage-js/${ky}`};var gn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Cy{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Sy),s),this.fetch=Jh(n)}listBuckets(){return gn(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}getBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return gn(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return gn(this,void 0,void 0,function*(){try{return{data:yield xy(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}}class My extends Cy{constructor(t,s={},n){super(t,s,n)}from(t){return new wy(this.url,this.headers,t,this.fetch)}}const Ay="2.49.8";let ni="";typeof Deno<"u"?ni="deno":typeof document<"u"?ni="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ni="react-native":ni="node";const Py={"X-Client-Info":`supabase-js-${ni}/${Ay}`},Ty={headers:Py},Oy={schema:"public"},Ey={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dy={};var Iy=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Ry=e=>{let t;return e?t=e:typeof fetch>"u"?t=Lh:t=fetch,(...s)=>t(...s)},Ly=()=>typeof Headers>"u"?Fh:Headers,Fy=(e,t,s)=>{const n=Ry(s),i=Ly();return(o,r)=>Iy(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var jy=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function Ny(e){return e.endsWith("/")?e:e+"/"}function Uy(e,t){var s,n;const{db:i,auth:o,realtime:r,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>jy(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Qh="2.69.1",kn=30*1e3,Ca=3,Hr=Ca*kn,$y="http://localhost:9999",By="supabase.auth.token",Vy={"X-Client-Info":`gotrue-js/${Qh}`},Ma="X-Supabase-Api-Version",Zh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hy=6e5;class gl extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ft(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Wy extends gl{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function qy(e){return ft(e)&&e.name==="AuthApiError"}class tf extends gl{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class zs extends gl{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class Ms extends zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ky(e){return ft(e)&&e.name==="AuthSessionMissingError"}class Wr extends zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class so extends zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class no extends zs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gy(e){return ft(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fc extends zs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Aa extends zs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function qr(e){return ft(e)&&e.name==="AuthRetryableFetchError"}class jc extends zs{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class yi extends zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uc=` 	
\r=`.split(""),Yy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Uc.length;t+=1)e[Uc[t].charCodeAt(0)]=-2;for(let t=0;t<Nc.length;t+=1)e[Nc[t].charCodeAt(0)]=t;return e})();function ef(e,t,s){const n=Yy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $c(e){const t=[],s=r=>{t.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{Qy(r,n,s)};for(let r=0;r<e.length;r+=1)ef(e.charCodeAt(r),i,o);return t.join("")}function Jy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Xy(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}Jy(n,t)}}function Qy(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Zy(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ef(e.charCodeAt(i),s,n);return new Uint8Array(t)}function tx(e){const t=[];return Xy(e,s=>t.push(s)),new Uint8Array(t)}function ex(e){return Math.round(Date.now()/1e3)+e}function sx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ye=()=>typeof window<"u"&&typeof document<"u",Gs={tested:!1,writable:!1},xi=()=>{if(!Ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gs.tested)return Gs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gs.tested=!0,Gs.writable=!0}catch{Gs.tested=!0,Gs.writable=!1}return Gs.writable};function nx(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const sf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>jn(()=>Promise.resolve().then(()=>zn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},ix=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",nf=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},io=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},oo=async(e,t)=>{await e.removeItem(t)};class vr{constructor(){this.promise=new vr.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}vr.promiseConstructor=Promise;function Kr(e){const t=e.split(".");if(t.length!==3)throw new yi("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!zy.test(t[n]))throw new yi("JWT not in base64url format");return{header:JSON.parse($c(t[0])),payload:JSON.parse($c(t[1])),signature:Zy(t[2]),raw:{header:t[0],payload:t[1]}}}async function ox(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rx(e,t){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await e(o);if(!t(o,null,r)){n(r);return}}catch(r){if(!t(o,r)){i(r);return}}})()})}function ax(e){return("0"+e.toString(16)).substr(-2)}function lx(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,ax).join("")}async function cx(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function dx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await cx(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bn(e,t,s=!1){const n=lx();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await nf(e,`${t}-code-verifier`,i);const o=await dx(n);return[o,n===o?"plain":"s256"]}const ux=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hx(e){const t=e.headers.get(Ma);if(!t||!t.match(ux))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function fx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function px(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var mx=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const tn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gx=[502,503,504];async function Bc(e){var t;if(!ix(e))throw new Aa(tn(e),0);if(gx.includes(e.status))throw new Aa(tn(e),e.status);let s;try{s=await e.json()}catch(o){throw new tf(tn(o),o)}let n;const i=hx(e);if(i&&i.getTime()>=Zh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new jc(tn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ms}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new jc(tn(s),e.status,s.weak_password.reasons);throw new Wy(tn(s),e.status||500,n)}const bx=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function bt(e,t,s,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Ma]||(o[Ma]=Zh["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await yx(e,t,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function yx(e,t,s,n,i,o){const r=bx(t,n,i,o);let a;try{a=await e(s,Object.assign({},r))}catch(l){throw console.error(l),new Aa(tn(l),0)}if(a.ok||await Bc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Bc(l)}}function As(e){var t;let s=null;wx(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=ex(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Vc(e){const t=As(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Is(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function xx(e){return{data:e,error:null}}function _x(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=e,r=mx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function vx(e){return e}function wx(e){return e.access_token&&e.refresh_token&&e.expires_in}var kx=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class Sx{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=sf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Is})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=kx(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:_x,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ft(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Is})}catch(s){if(ft(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:vx});if(u.error)throw u.error;const h=await u.json(),f=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ft(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Is})}catch(s){if(ft(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Is})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Is})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await bt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(ft(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ft(s))return{data:null,error:s};throw s}}}const Cx={getItem:e=>xi()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{xi()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{xi()&&globalThis.localStorage.removeItem(e)}};function zc(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Mx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yn={debug:!!(globalThis&&xi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class of extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ax extends of{}async function Px(e,t,s){yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),yn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ax(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Mx();const Tx={url:$y,storageKey:By,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hc(e,t,s){return await s()}class Ri{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ri.nextInstanceID,Ri.nextInstanceID+=1,this.instanceID>0&&Ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Tx),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Sx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=sf(i.fetch),this.lock=i.lock||Hc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ye()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Px:this.lock=Hc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:xi()?this.storage=Cx:(this.memoryStorage={},this.storage=zc(this.memoryStorage)):(this.memoryStorage={},this.storage=zc(this.memoryStorage)),Ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=nx(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ye()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Gy(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ft(s)?{error:s}:{error:new tf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:As}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ft(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,n,i;try{let o;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await bn(this.storage,this.storageKey)),o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:As})}else if("phone"in t){const{phone:u,password:h,options:f}=t;o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:As})}else throw new so("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ft(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:r,options:a}=t;s=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vc})}else if("phone"in t){const{phone:o,password:r,options:a}=t;s=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vc})}else throw new so("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Wr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(ft(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await io(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:As});if(await oo(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Wr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(ft(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=t,a=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:As}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Wr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(ft(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,o,r;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await bn(this.storage,this.storageKey));const{error:h}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new so("You must provide either an email or phone number.")}catch(a){if(ft(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,o;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:As});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ft(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await bn(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:xx})}catch(o){if(ft(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Ms;const{error:i}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ft(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:o}=t,{error:r}=await bt(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:n,type:i,options:o}=t,{data:r,error:a}=await bt(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:a}}throw new so("You must provide either an email or phone number and a type")}catch(s){if(ft(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Hr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let r=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Is}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ms}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Is})})}catch(s){if(ft(s))return Ky(s)&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ms;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await bn(this.storage,this.storageKey));const{data:c,error:u}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:Is});if(u)throw u;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ms;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Kr(t.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(ft(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:r,error:a}=s;if(a)throw a;t=(n=r.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ms;const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ft(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Ye())throw new no("No browser detected.");if(t.error||t.error_description||t.error_code)throw new no(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Fc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new no("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fc("No code detected.");const{data:w,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!r||!c)throw new no("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:g,error:b}=await this._getUser(o);if(b)throw b;const _={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:f,refresh_token:r,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(ft(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await io(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,t);if(a&&!(qy(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=sx(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await bn(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(ft(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ft(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,u;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ye()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ft(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(ft(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await rx(async i=>(i>0&&await ox(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:As})),(i,o)=>{const r=200*Math.pow(2,i);return o&&qr(o)&&Date.now()+r-n<kn})}catch(n){if(this._debug(s,"error",n),ft(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Ye()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await io(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Hr;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Hr}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),qr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Ms;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new vr;const{data:o,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!o.session)throw new Ms;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),ft(o)){const r={session:null,error:o};return qr(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await nf(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await oo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kn}ms, refresh threshold is ${Ca} ticks`),i<=Ca&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof of)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await bn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await bt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ft(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ft(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(ft(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ft(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Kr(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(r=>r.kid===t);if(n||(n=this.jwks.keys.find(r=>r.kid===t),n&&this.jwks_cached_at+Hy>Date.now()))return n;const{data:i,error:o}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!i.keys||i.keys.length===0)throw new yi("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(r=>r.kid===t),!n)throw new yi("No matching signing key found in JWKS");return n}async getClaims(t,s={keys:[]}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Kr(n);if(fx(o.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:i,signature:r},error:null}}const c=px(i.alg),u=await this.fetchJwk(i.kid,s),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,r,tx(`${a}.${l}`)))throw new yi("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}}}Ri.nextInstanceID=0;const Ox=Ri;class Ex extends Ox{constructor(t){super(t)}}var Dx=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{c(n.next(u))}catch(h){r(h)}}function l(u){try{c(n.throw(u))}catch(h){r(h)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Ix{constructor(t,s,n){var i,o,r;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Ny(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Oy,realtime:Dy,auth:Object.assign(Object.assign({},Ey),{storageKey:c}),global:Ty},h=Uy(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=h.auth)!==null&&r!==void 0?r:{},this.headers,h.global.fetch),this.fetch=Fy(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new X0(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new M0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new My(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Dx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ex({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new hy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rx=(e,t,s)=>new Ix(e,t,s),Lx="https://nivvbndswqkjnifvkauf.supabase.co",Fx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pdnZibmRzd3Fram5pZnZrYXVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NTAzMzEsImV4cCI6MjA2MzQyNjMzMX0.UocPLAEg1htKV7ZivlqRR3GZhDDCNi1jSseGikVpYv4",U=Rx(Lx,Fx);function rf(e){const t=e.replace(/\D/g,"").slice(0,11),s=t.slice(0,3),n=t.slice(3,6),i=t.slice(6,9),o=t.slice(9,11);return t.length<=3?t:t.length<=6?`${s}.${t.slice(3)}`:t.length<=9?`${s}.${n}.${t.slice(6)}`:`${s}.${n}.${i}-${o}`}function af(e){const t=e.replace(/\D/g,"").slice(0,8),s=t.slice(0,5),n=t.slice(5);return t.length<=5?t:`${s}-${n}`}function ns(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function Se(e){if(!e)return"";const t=e.split("-");if(t.length!==3)return e;const[s,n,i]=t;return`${i.padStart(2,"0")}/${n.padStart(2,"0")}/${s}`}const jx={name:"Signup",components:{Navbar:He,Footer:We},data(){return{name:"",email:"",password:""}},methods:{async handleSignup(){if(!this.name){alert("Informe o nome");return}if(this.email&&!ns(this.email)){alert("E-mail inválido");return}const{data:e,error:t}=await U.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,display_name:this.name}}});alert(t?"Erro ao cadastrar: "+t.message:"Cadastro realizado! Verifique seu e-mail para ativar a conta.")}}},Nx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},Ux={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},$x={class:"mt-6 text-center text-sm text-gray-500"};function Bx(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("section",Nx,[d("div",Ux,[t[10]||(t[10]=d("div",{class:"mb-8 text-center"},[d("h2",{class:"text-3xl font-extrabold text-blue-700"},"Crie sua conta"),d("p",{class:"text-gray-500"},"Comece agora a organizar seus atendimentos com praticidade")],-1)),d("form",{onSubmit:t[3]||(t[3]=ie((...c)=>o.handleSignup&&o.handleSignup(...c),["prevent"])),class:"space-y-5"},[d("div",null,[t[4]||(t[4]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"name"},"Nome",-1)),O(d("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.name=c),type:"text",id:"name",placeholder:"Seu nome",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.name]])]),d("div",null,[t[5]||(t[5]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),O(d("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>i.email=c),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]])]),d("div",null,[t[6]||(t[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.password=c),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.password]])]),t[7]||(t[7]=d("button",{type:"submit",class:"btn w-full"},"Cadastrar",-1))],32),d("p",$x,[t[9]||(t[9]=ot(" Já tem uma conta? ")),E(a,{to:"/login",class:"text-blue-600 hover:underline"},{default:tt(()=>t[8]||(t[8]=[ot("Entrar")])),_:1,__:[8]})])])]),E(l)],64)}const Vx=mt(jx,[["render",Bx]]),zx={name:"Login",components:{Navbar:He,Footer:We},data(){return{email:"",password:"",loginError:""}},methods:{async handleLogin(){if(this.loginError="",this.email&&!ns(this.email)){this.loginError="E-mail inválido";return}const{error:e}=await U.auth.signInWithPassword({email:this.email,password:this.password});e?e.message&&e.message.toLowerCase().includes("confirm")?alert("Você precisa confirmar o e-mail antes de acessar o sistema."):this.loginError="E-mail ou senha inválidos":this.$router.push("/dashboard")},async handleGoogleLogin(){const{error:e}=await U.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/#/dashboard"}});e&&alert("Erro ao entrar com Google: "+e.message)},clearError(){this.loginError=""}}},Hx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-blue-100 px-4"},Wx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},qx={key:0,class:"text-red-600 text-center text-sm"},Kx={class:"mt-6 text-center text-sm text-gray-500"};function Gx(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("section",Hx,[d("div",Wx,[t[11]||(t[11]=d("div",{class:"mb-8 text-center"},[d("h2",{class:"text-3xl font-extrabold text-blue-700"},"Entrar"),d("p",{class:"text-gray-500"},"Acesse sua conta do Agenda Zen")],-1)),d("form",{onSubmit:t[5]||(t[5]=ie((...c)=>o.handleLogin&&o.handleLogin(...c),["prevent"])),class:"space-y-5"},[d("div",null,[t[6]||(t[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),O(d("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),onInput:t[1]||(t[1]=(...c)=>o.clearError&&o.clearError(...c)),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[L,i.email]])]),d("div",null,[t[7]||(t[7]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.password=c),onInput:t[3]||(t[3]=(...c)=>o.clearError&&o.clearError(...c)),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[L,i.password]])]),i.loginError?(v(),k("p",qx,P(i.loginError),1)):W("",!0),t[8]||(t[8]=d("button",{type:"submit",class:"btn w-full"},"Entrar",-1)),d("button",{type:"button",onClick:t[4]||(t[4]=(...c)=>o.handleGoogleLogin&&o.handleGoogleLogin(...c)),class:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition duration-200"},"Entrar com Google")],32),d("p",Kx,[t[10]||(t[10]=ot(" Ainda não tem conta? ")),E(a,{to:"/cadastro",class:"text-blue-600 hover:underline"},{default:tt(()=>t[9]||(t[9]=[ot("Criar agora")])),_:1,__:[9]})])])]),E(l)],64)}const Yx=mt(zx,[["render",Gx]]);function wr(e){const t=e.replace(/\D/g,"").slice(0,11),s=t.slice(0,2);if(t.length<=2)return t?`(${s}`:"";if(t.length<=6){const o=t.slice(2);return`(${s}) ${o}`}if(t.length<=10){const o=t.slice(2,6),r=t.slice(6);return`(${s}) ${o}${r?`-${r}`:""}`}const n=t.slice(2,7),i=t.slice(7);return`(${s}) ${n}-${i}`}function Ko(e){return e.replace(/\D/g,"")}const Jx={name:"Onboarding",data(){return{userId:null,step:1,form:{businessName:"",phone:"",email:""},agenda:{startTime:"",endTime:"",daysOfWeek:[]},serviceForm:{name:"",duration:"",price:""},services:[],daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:wr,generateSlug(e){return e?e.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):""},async next(){this.step===1?(await this.saveProfile(),this.step++):this.step===2?(await this.saveAgenda(),this.step++):this.step===3&&(await this.saveServices(),this.step++)},prev(){this.step>1&&this.step--},async saveProfile(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}const e={id:this.userId,business_name:this.form.businessName,slug:this.generateSlug(this.form.businessName),phone:this.form.phone,email:this.form.email};await U.from("profiles").upsert(e,{onConflict:["id"]})},async saveAgenda(){const e={id:this.userId,start_time:this.agenda.startTime,end_time:this.agenda.endTime,week_days:this.agenda.daysOfWeek.join(",")};await U.from("profiles").upsert(e,{onConflict:["id"]})},async saveServices(){for(const e of this.services)await U.from("services").insert({name:e.name,duration:e.duration,price:parseFloat(e.price),user_id:this.userId})},addService(){this.serviceForm.name&&(this.services.push({name:this.serviceForm.name,duration:this.serviceForm.duration,price:this.serviceForm.price}),this.serviceForm={name:"",duration:"",price:""})},removeService(e){this.services.splice(e,1)},formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id}},Xx={class:"min-h-screen flex bg-gray-100 items-center justify-center p-4"},Qx={class:"bg-white p-6 rounded-lg shadow w-full max-w-2xl"},Zx={key:0,class:"space-y-4"},t_={key:1,class:"space-y-4"},e_={class:"mt-1 space-y-1"},s_=["value"],n_={key:2,class:"space-y-4"},i_={class:"flex justify-end"},o_={class:"mt-4 space-y-1"},r_=["onClick"],a_={key:3,class:"space-y-4 text-center"},l_={key:4,class:"flex justify-between mt-6"},c_={key:5,class:"flex justify-center mt-6"};function d_(e,t,s,n,i,o){return v(),k("div",Xx,[d("div",Qx,[i.step===1?(v(),k("div",Zx,[t[17]||(t[17]=d("h2",{class:"text-xl font-semibold mb-4"},"Bem-vindo! Vamos começar pelo seu perfil.",-1)),d("div",null,[t[14]||(t[14]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>i.form.businessName=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.businessName]])]),d("div",null,[t[15]||(t[15]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>i.form.phone=r),onInput:t[2]||(t[2]=r=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.phone]])]),d("div",null,[t[16]||(t[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=r=>i.form.email=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])])])):i.step===2?(v(),k("div",t_,[t[21]||(t[21]=d("h2",{class:"text-xl font-semibold mb-4"},"Horários de atendimento",-1)),d("div",null,[t[18]||(t[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Início",-1)),O(d("input",{type:"time","onUpdate:modelValue":t[4]||(t[4]=r=>i.agenda.startTime=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.agenda.startTime]])]),d("div",null,[t[19]||(t[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Fim",-1)),O(d("input",{type:"time","onUpdate:modelValue":t[5]||(t[5]=r=>i.agenda.endTime=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.agenda.endTime]])]),d("div",null,[t[20]||(t[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Dias da semana",-1)),d("div",e_,[(v(!0),k(J,null,pt(i.daysOfWeekOptions,r=>(v(),k("label",{key:r.value,class:"flex items-center space-x-2"},[O(d("input",{type:"checkbox",value:r.value,"onUpdate:modelValue":t[6]||(t[6]=a=>i.agenda.daysOfWeek=a)},null,8,s_),[[cl,i.agenda.daysOfWeek]]),d("span",null,P(r.label),1)]))),128))])])])):i.step===3?(v(),k("div",n_,[t[25]||(t[25]=d("h2",{class:"text-xl font-semibold mb-4"},"Cadastre seus serviços",-1)),d("div",null,[t[22]||(t[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=r=>i.serviceForm.name=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.name]])]),d("div",null,[t[23]||(t[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=r=>i.serviceForm.duration=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.duration]])]),d("div",null,[t[24]||(t[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),O(d("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=r=>i.serviceForm.price=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.price]])]),d("div",i_,[d("button",{onClick:t[10]||(t[10]=(...r)=>o.addService&&o.addService(...r)),class:"btn"},"Adicionar")]),d("ul",o_,[(v(!0),k(J,null,pt(i.services,(r,a)=>(v(),k("li",{key:a,class:"flex justify-between"},[d("span",null,P(r.name)+" - "+P(r.duration)+"min - "+P(o.formatPrice(r.price)),1),d("button",{onClick:l=>o.removeService(a),class:"text-red-600 hover:underline"},"Remover",8,r_)]))),128))])])):i.step===4?(v(),k("div",a_,t[26]||(t[26]=[d("h2",{class:"text-2xl font-semibold"},"Pronto!",-1),d("p",null,"Seu cadastro inicial está concluído.",-1),d("p",{class:"text-lg"},"Bem-vindo ao Agenda Zen!",-1)]))):W("",!0),i.step<4?(v(),k("div",l_,[i.step>1?(v(),k("button",{key:0,onClick:t[11]||(t[11]=(...r)=>o.prev&&o.prev(...r)),class:"px-4 py-2 border rounded"},"Voltar")):W("",!0),d("button",{onClick:t[12]||(t[12]=(...r)=>o.next&&o.next(...r)),class:"btn ml-auto"},P(i.step===3?"Finalizar":"Próximo"),1)])):(v(),k("div",c_,[d("button",{onClick:t[13]||(t[13]=r=>e.$router.push("/dashboard")),class:"btn"},"Ir para o Dashboard")]))])])}const u_=mt(Jx,[["render",d_]]),h_={name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}}},f_={class:"space-y-6 mt-8"},p_={class:"space-y-2"},m_={class:"space-y-2"},g_={class:"space-y-2"},b_={class:"space-y-2"},y_={class:"space-y-2"};function x_(e,t,s,n,i,o){const r=H("router-link");return v(),k("div",null,[s.isOpen?(v(),k("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:t[0]||(t[0]=a=>e.$emit("close"))})):W("",!0),d("aside",{class:be(["fixed inset-y-0 left-0 transform bg-white shadow-md transition-all duration-200 z-50 md:relative overflow-hidden flex flex-col min-h-screen",s.isOpen?"w-64 p-6 translate-x-0":"w-0 p-0 -translate-x-full"])},[d("button",{class:"absolute top-4 right-4 text-gray-600 focus:outline-none",onClick:t[1]||(t[1]=a=>e.$emit("close"))},t[2]||(t[2]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t[19]||(t[19]=d("h2",{class:"text-2xl font-bold text-blue-600 mb-6"},"Agenda Zen",-1)),d("nav",f_,[d("div",p_,[t[5]||(t[5]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Agendamentos",-1)),E(r,{to:"/dashboard",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[3]||(t[3]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3m10-11v10a1 1 0 01-1 1h-3m-6 0h6"})],-1),d("span",null,"Início",-1)])),_:1,__:[3]}),E(r,{to:"/agendamentos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[4]||(t[4]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),d("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),d("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),d("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),d("span",null,"Agendamentos",-1)])),_:1,__:[4]})]),d("div",m_,[t[9]||(t[9]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Cadastros",-1)),E(r,{to:"/clientes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[6]||(t[6]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"7",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Clientes",-1)])),_:1,__:[6]}),E(r,{to:"/servicos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[7]||(t[7]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V5a4 4 0 018 0v2"})],-1),d("span",null,"Serviços",-1)])),_:1,__:[7]}),E(r,{to:"/salas",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[8]||(t[8]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v18M15 3v18M3 9h18M3 15h18"})],-1),d("span",null,"Salas",-1)])),_:1,__:[8]})]),d("div",g_,[t[11]||(t[11]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Relatórios",-1)),E(r,{to:"/faturamento",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[10]||(t[10]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3v18h18M9 17v-4M13 17v-8M17 17V7"})],-1),d("span",null,"Faturamento",-1)])),_:1,__:[10]})]),d("div",b_,[t[14]||(t[14]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Pagamentos",-1)),E(r,{to:"/comprovantes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[12]||(t[12]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1),d("span",null,"Comprovantes",-1)])),_:1,__:[12]}),E(r,{to:"/templates",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[13]||(t[13]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h16v4H4V4zm0 6h16v10H4V10z"})],-1),d("span",null,"Templates",-1)])),_:1,__:[13]})]),d("div",y_,[t[18]||(t[18]=d("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Conta",-1)),E(r,{to:"/configuracao",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[15]||(t[15]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Perfil",-1)])),_:1,__:[15]}),E(r,{to:"/usuarios",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[16]||(t[16]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),d("span",null,"Usuários",-1)])),_:1,__:[16]}),E(r,{to:"/minha-assinatura",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[17]||(t[17]=[d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",ry:"2","stroke-width":"2"}),d("line",{x1:"3",y1:"9",x2:"21",y2:"9","stroke-width":"2"})],-1),d("span",null,"Minha Assinatura",-1)])),_:1,__:[17]})])])],2)])}const Pe=mt(h_,[["render",x_]]),__={name:"HeaderUser",props:{title:{type:String,default:"Agenda Zen"}},data(){return{userName:null,showMenu:!1}},async mounted(){var t,s;const{data:{user:e}}=await U.auth.getUser();if(!e)this.$router.push("/login");else{const n=((t=e.user_metadata)==null?void 0:t.display_name)||((s=e.user_metadata)==null?void 0:s.name);this.userName=n&&n.trim()!==""?n:e.email}},methods:{toggleMenu(){this.showMenu=!this.showMenu},async handleLogout(){this.showMenu=!1,await U.auth.signOut(),this.$router.push("/")}}},v_={class:"flex justify-between items-center mb-8"},w_={class:"text-2xl font-semibold text-gray-800"},k_={key:0,class:"relative"},S_={class:"text-gray-600"},C_={key:0,class:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md"};function M_(e,t,s,n,i,o){const r=H("router-link");return v(),k("header",v_,[d("h1",w_,P(s.title),1),i.userName?(v(),k("div",k_,[d("button",{onClick:t[0]||(t[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"flex items-center space-x-2 focus:outline-none"},[t[3]||(t[3]=d("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1)),d("span",S_,P(i.userName),1),(v(),k("svg",{class:be(["w-4 h-4 text-gray-600 transition-transform",{"rotate-180":i.showMenu}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[2]||(t[2]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),i.showMenu?(v(),k("div",C_,[E(r,{to:"/",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[4]||(t[4]=[ot("Início")])),_:1,__:[4]}),E(r,{to:"/configuracao",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[5]||(t[5]=[ot("Perfil")])),_:1,__:[5]}),E(r,{to:"/usuarios",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[6]||(t[6]=[ot("Usuários")])),_:1,__:[6]}),E(r,{to:"/minha-assinatura",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[7]||(t[7]=[ot("Assinatura")])),_:1,__:[7]}),d("button",{onClick:t[1]||(t[1]=(...a)=>o.handleLogout&&o.handleLogout(...a)),class:"w-full text-left px-4 py-2 hover:bg-gray-100"},"Sair")])):W("",!0)])):W("",!0)])}const Te=mt(__,[["render",M_]]),A_={name:"Modal"},P_={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg md:max-w-2xl max-h-[90vh] overflow-y-auto"};function T_(e,t,s,n,i,o){return v(),k("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[0]||(t[0]=ie(r=>e.$emit("close"),["self"]))},[d("div",P_,[Ju(e.$slots,"default")])])}const Hs=mt(A_,[["render",T_]]),O_={name:"WeekView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()-(e.getDay()+6)%7),{weekStart:t,daysOfWeek:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],startTime:"00:00",endTime:"23:00",dailySchedule:null,timeSlots:[],currentLineTop:0,lineInterval:null}},computed:{weekEnd(){const e=new Date(this.weekStart);return e.setDate(e.getDate()+6),e},showCurrentLine(){const e=this.timeSlots.length*64,t=new Date,s=t.getHours()*60+t.getMinutes(),[n,i]=this.startTime.split(":").map(Number),[o,r]=this.endTime.split(":").map(Number),a=n*60+i,l=o*60+r,c=s>=a&&s<=l,u=this.currentLineTop>=0&&this.currentLineTop<=e;return c&&u}},methods:{generateTimeSlots(){const e=Math.max(0,parseInt(this.startTime.split(":")[0])-1),t=Math.min(23,parseInt(this.endTime.split(":")[0])+1);this.timeSlots=[];for(let s=e;s<=t;s++)this.timeSlots.push(`${String(s).padStart(2,"0")}:00`)},formatDate(e){const t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}/${t}`},formatISO(e){const t=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${t}-${s}`},getDateOfDay(e){const t=new Date(this.weekStart);return t.setDate(t.getDate()+e),t},getAppointmentsForSlot(e,t){const s=this.formatISO(this.getDateOfDay(e)),n=parseInt(t.split(":")[0]);return this.appointments.filter(i=>i.date===s&&parseInt(i.time.substring(0,2))===n).sort((i,o)=>i.time.localeCompare(o.time))},updateCurrentLine(){if(this.timeSlots.length===0)return;const e=parseInt(this.timeSlots[0].split(":")[0]),t=new Date,n=(t.getHours()+t.getMinutes()/60-e)*64;this.currentLineTop=n},prevWeek(){const e=new Date(this.weekStart);e.setDate(e.getDate()-7),this.weekStart=e},nextWeek(){const e=new Date(this.weekStart);e.setDate(e.getDate()+7),this.weekStart=e},isToday(e){const t=new Date;return this.getDateOfDay(e).toDateString()===t.toDateString()}},watch:{startTime(){this.generateTimeSlots(),this.$nextTick(this.updateCurrentLine)},endTime(){this.generateTimeSlots(),this.$nextTick(this.updateCurrentLine)}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(e){const{data:t}=await U.from("profiles").select("start_time, end_time, daily_schedule").eq("id",e.id).single();if(t)if(t.daily_schedule){this.dailySchedule=typeof t.daily_schedule=="string"?JSON.parse(t.daily_schedule):t.daily_schedule;const s=Object.values(this.dailySchedule).filter(n=>n&&n.enabled&&n.start&&n.end);s.length&&(this.startTime=s.reduce((n,i)=>!n||i.start<n?i.start:n,null),this.endTime=s.reduce((n,i)=>!n||i.end>n?i.end:n,null))}else t.start_time&&(this.startTime=t.start_time),t.end_time&&(this.endTime=t.end_time)}this.generateTimeSlots(),this.updateCurrentLine(),this.lineInterval=setInterval(this.updateCurrentLine,6e4)},beforeUnmount(){this.lineInterval&&clearInterval(this.lineInterval)}},E_={class:"bg-white rounded-lg shadow overflow-hidden"},D_={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},I_={class:"font-semibold"},R_={class:"relative overflow-x-auto"},L_={ref:"grid",class:"grid gap-px text-sm bg-gray-100",style:{gridTemplateColumns:"64px repeat(7, 1fr)"}},F_={class:"font-semibold text-right pr-1 border bg-gray-50"},j_=["onClick"];function N_(e,t,s,n,i,o){return v(),k("div",E_,[d("div",D_,[d("button",{onClick:t[0]||(t[0]=(...r)=>o.prevWeek&&o.prevWeek(...r)),class:"p-1 rounded hover:bg-gray-200"},t[2]||(t[2]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("div",I_,P(o.formatDate(i.weekStart))+" - "+P(o.formatDate(o.weekEnd)),1),d("button",{onClick:t[1]||(t[1]=(...r)=>o.nextWeek&&o.nextWeek(...r)),class:"p-1 rounded hover:bg-gray-200"},t[3]||(t[3]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),d("div",R_,[o.showCurrentLine?(v(),k("div",{key:0,class:"absolute left-0 right-0 border-t-2 border-blue-500 pointer-events-none",style:rr({top:i.currentLineTop+"px"})},null,4)):W("",!0),d("div",L_,[t[4]||(t[4]=d("div",{class:"bg-gray-50"},null,-1)),(v(!0),k(J,null,pt(i.daysOfWeek,(r,a)=>(v(),k("div",{key:r,class:be(["font-semibold text-center border px-1 bg-gray-50",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(a)}])},P(r),3))),128)),(v(!0),k(J,null,pt(i.timeSlots,r=>(v(),k(J,{key:r},[d("div",F_,P(r),1),(v(),k(J,null,pt(7,a=>d("div",{key:r+"-"+a,class:be(["border h-16 p-1 overflow-auto bg-white",{"bg-blue-50":o.isToday(a-1)}])},[d("ul",null,[(v(!0),k(J,null,pt(o.getAppointmentsForSlot(a-1,r),l=>(v(),k("li",{key:l.id,class:"text-xs truncate cursor-pointer",onClick:c=>e.$emit("select",l)},P(l.time)+" - "+P(s.getClientName(l.client_id)),9,j_))),128))])],2)),64))],64))),128))],512)])])}const lf=mt(O_,[["render",N_]]),U_={name:"AppointmentDetails",props:{appointment:{type:Object,required:!0},getClientName:{type:Function,required:!0},getServiceName:{type:Function,required:!0},getRoomName:{type:Function,default:()=>""},getRoomLink:{type:Function,default:()=>""}}},$_={class:"relative"},B_={key:0,class:"space-y-1 border rounded-md p-4 bg-gray-50 text-gray-700"},V_={key:0},z_={key:1},H_=["href"];function W_(e,t,s,n,i,o){return v(),k("div",$_,[d("button",{onClick:t[0]||(t[0]=r=>e.$emit("close")),class:"absolute top-0 right-0 m-2 px-2 py-1 rounded border text-sm"}," Fechar "),t[8]||(t[8]=d("h3",{class:"text-lg font-semibold mb-4"},"Detalhes do Agendamento",-1)),s.appointment?(v(),k("div",B_,[d("p",null,[t[1]||(t[1]=d("strong",null,"Data:",-1)),ot(" "+P(s.appointment.date),1)]),d("p",null,[t[2]||(t[2]=d("strong",null,"Hora:",-1)),ot(" "+P(s.appointment.time),1)]),d("p",null,[t[3]||(t[3]=d("strong",null,"Cliente:",-1)),ot(" "+P(s.getClientName(s.appointment.client_id)),1)]),d("p",null,[t[4]||(t[4]=d("strong",null,"Serviço:",-1)),ot(" "+P(s.getServiceName(s.appointment.service_id)),1)]),d("p",null,[t[5]||(t[5]=d("strong",null,"Duração:",-1)),ot(" "+P(s.appointment.duration),1)]),d("p",null,[t[6]||(t[6]=d("strong",null,"Descrição:",-1)),ot(" "+P(s.appointment.description),1)]),s.appointment.room_id?(v(),k("p",V_,[t[7]||(t[7]=d("strong",null,"Sala:",-1)),ot(" "+P(s.getRoomName(s.appointment.room_id)),1)])):W("",!0),s.appointment.room_id&&s.getRoomLink(s.appointment.room_id)?(v(),k("p",z_,[d("a",{href:s.getRoomLink(s.appointment.room_id),target:"_blank",class:"text-blue-600 underline"},"Acessar Google Meet",8,H_)])):W("",!0)])):W("",!0),Ju(e.$slots,"actions")])}const cf=mt(U_,[["render",W_]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ji(e){return e+.5|0}const Rs=(e,t,s)=>Math.max(Math.min(e,s),t);function ii(e){return Rs(Ji(e*2.55),0,255)}function Us(e){return Rs(Ji(e*255),0,255)}function hs(e){return Rs(Ji(e/2.55)/100,0,1)}function Wc(e){return Rs(Ji(e*100),0,100)}const Ee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pa=[..."0123456789ABCDEF"],q_=e=>Pa[e&15],K_=e=>Pa[(e&240)>>4]+Pa[e&15],ro=e=>(e&240)>>4===(e&15),G_=e=>ro(e.r)&&ro(e.g)&&ro(e.b)&&ro(e.a);function Y_(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Ee[e[1]]*17,g:255&Ee[e[2]]*17,b:255&Ee[e[3]]*17,a:t===5?Ee[e[4]]*17:255}:(t===7||t===9)&&(s={r:Ee[e[1]]<<4|Ee[e[2]],g:Ee[e[3]]<<4|Ee[e[4]],b:Ee[e[5]]<<4|Ee[e[6]],a:t===9?Ee[e[7]]<<4|Ee[e[8]]:255})),s}const J_=(e,t)=>e<255?t(e):"";function X_(e){var t=G_(e)?q_:K_;return e?"#"+t(e.r)+t(e.g)+t(e.b)+J_(e.a,t):void 0}const Q_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function df(e,t,s){const n=t*Math.min(s,1-s),i=(o,r=(o+e/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function Z_(e,t,s){const n=(i,o=(i+e/60)%6)=>s-s*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function tv(e,t,s){const n=df(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function ev(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function bl(e){const s=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=ev(s,n,i,u,o),l=l*60+.5),[l|0,c||0,a]}function yl(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Us)}function xl(e,t,s){return yl(df,e,t,s)}function sv(e,t,s){return yl(tv,e,t,s)}function nv(e,t,s){return yl(Z_,e,t,s)}function uf(e){return(e%360+360)%360}function iv(e){const t=Q_.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?ii(+t[5]):Us(+t[5]));const i=uf(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=sv(i,o,r):t[1]==="hsv"?n=nv(i,o,r):n=xl(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function ov(e,t){var s=bl(e);s[0]=uf(s[0]+t),s=xl(s),e.r=s[0],e.g=s[1],e.b=s[2]}function rv(e){if(!e)return;const t=bl(e),s=t[0],n=Wc(t[1]),i=Wc(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${hs(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const qc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function av(){const e={},t=Object.keys(Kc),s=Object.keys(qc);let n,i,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,qc[o]);o=parseInt(Kc[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let ao;function lv(e){ao||(ao=av(),ao.transparent=[0,0,0,0]);const t=ao[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const cv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function dv(e){const t=cv.exec(e);let s=255,n,i,o;if(t){if(t[7]!==n){const r=+t[7];s=t[8]?ii(r):Rs(r*255,0,255)}return n=+t[1],i=+t[3],o=+t[5],n=255&(t[2]?ii(n):Rs(n,0,255)),i=255&(t[4]?ii(i):Rs(i,0,255)),o=255&(t[6]?ii(o):Rs(o,0,255)),{r:n,g:i,b:o,a:s}}}function uv(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Gr=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,xn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function hv(e,t,s){const n=xn(hs(e.r)),i=xn(hs(e.g)),o=xn(hs(e.b));return{r:Us(Gr(n+s*(xn(hs(t.r))-n))),g:Us(Gr(i+s*(xn(hs(t.g))-i))),b:Us(Gr(o+s*(xn(hs(t.b))-o))),a:e.a+s*(t.a-e.a)}}function lo(e,t,s){if(e){let n=bl(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=xl(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function hf(e,t){return e&&Object.assign(t||{},e)}function Gc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Us(e[3]))):(t=hf(e,{r:0,g:0,b:0,a:1}),t.a=Us(t.a)),t}function fv(e){return e.charAt(0)==="r"?dv(e):iv(e)}class Li{constructor(t){if(t instanceof Li)return t;const s=typeof t;let n;s==="object"?n=Gc(t):s==="string"&&(n=Y_(t)||lv(t)||fv(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=hf(this._rgb);return t&&(t.a=hs(t.a)),t}set rgb(t){this._rgb=Gc(t)}rgbString(){return this._valid?uv(this._rgb):void 0}hexString(){return this._valid?X_(this._rgb):void 0}hslString(){return this._valid?rv(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=hv(this._rgb,t._rgb,s)),this}clone(){return new Li(this.rgb)}alpha(t){return this._rgb.a=Us(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=Ji(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lo(this._rgb,2,t),this}darken(t){return lo(this._rgb,2,-t),this}saturate(t){return lo(this._rgb,1,t),this}desaturate(t){return lo(this._rgb,1,-t),this}rotate(t){return ov(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function rs(){}const pv=(()=>{let e=0;return()=>e++})();function gt(e){return e==null}function Lt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function yt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function $t(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ke(e,t){return $t(e)?e:t}function ht(e,t){return typeof e>"u"?t:e}const mv=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,ff=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function It(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function Mt(e,t,s,n){let i,o,r;if(Lt(e))if(o=e.length,n)for(i=o-1;i>=0;i--)t.call(s,e[i],i);else for(i=0;i<o;i++)t.call(s,e[i],i);else if(yt(e))for(r=Object.keys(e),o=r.length,i=0;i<o;i++)t.call(s,e[r[i]],r[i])}function Go(e,t){let s,n,i,o;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],o=t[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Yo(e){if(Lt(e))return e.map(Yo);if(yt(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=Yo(e[s[i]]);return t}return e}function pf(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function gv(e,t,s,n){if(!pf(e))return;const i=t[e],o=s[e];yt(i)&&yt(o)?Fi(i,o,n):t[e]=Yo(o)}function Fi(e,t,s){const n=Lt(t)?t:[t],i=n.length;if(!yt(e))return e;s=s||{};const o=s.merger||gv;let r;for(let a=0;a<i;++a){if(r=n[a],!yt(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,s)}return e}function _i(e,t){return Fi(e,t,{merger:bv})}function bv(e,t,s){if(!pf(e))return;const n=t[e],i=s[e];yt(n)&&yt(i)?_i(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Yo(i))}const Yc={"":e=>e,x:e=>e.x,y:e=>e.y};function yv(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function xv(e){const t=yv(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function Bs(e,t){return(Yc[t]||(Yc[t]=xv(t)))(e)}function _l(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ji=e=>typeof e<"u",Vs=e=>typeof e=="function",Jc=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function _v(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const jt=Math.PI,Ft=2*jt,vv=Ft+jt,Jo=Number.POSITIVE_INFINITY,wv=jt/180,Vt=jt/2,Ys=jt/4,Xc=jt*2/3,Ls=Math.log10,es=Math.sign;function vi(e,t,s){return Math.abs(e-t)<s}function Qc(e){const t=Math.round(e);e=vi(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(Ls(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function kv(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,o)=>i-o).pop(),t}function Sv(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Un(e){return!Sv(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Cv(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function mf(e,t,s){let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n][s],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ne(e){return e*(jt/180)}function vl(e){return e*(180/jt)}function Zc(e){if(!$t(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function gf(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*jt&&(o+=Ft),{angle:o,distance:i}}function Ta(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Mv(e,t){return(e-t+vv)%Ft-jt}function Ce(e){return(e%Ft+Ft)%Ft}function Ni(e,t,s,n){const i=Ce(e),o=Ce(t),r=Ce(s),a=Ce(o-i),l=Ce(r-i),c=Ce(i-o),u=Ce(i-r);return i===o||i===r||n&&o===r||a>l&&c<u}function Gt(e,t,s){return Math.max(t,Math.min(s,e))}function Av(e){return Gt(e,-32768,32767)}function ms(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function wl(e,t,s){s=s||(r=>e[r]<t);let n=e.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const gs=(e,t,s,n)=>wl(e,s,n?i=>{const o=e[i][t];return o<s||o===s&&e[i+1][t]===s}:i=>e[i][t]<s),Pv=(e,t,s)=>wl(e,s,n=>e[n][t]>=s);function Tv(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const bf=["push","pop","shift","splice","unshift"];function Ov(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),bf.forEach(s=>{const n="_onData"+_l(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function td(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(bf.forEach(o=>{delete e[o]}),delete e._chartjs)}function yf(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const xf=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function _f(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,xf.call(window,()=>{n=!1,e.apply(t,s)}))}}function Ev(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const kl=e=>e==="start"?"left":e==="end"?"right":"center",Zt=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,Dv=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function vf(e,t,s){const n=t.length;let i=0,o=n;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=r.axis,{min:h,max:f,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(i=Math.min(gs(l,u,h).lo,s?n:gs(t,u,r.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(b=>!gt(b[a.axis]));i-=Math.max(0,g)}i=Gt(i,0,n-1)}if(m){let g=Math.max(gs(l,r.axis,f,!0).hi+1,s?0:gs(t,u,r.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(g-1).findIndex(_=>!gt(_[a.axis]));g+=Math.max(0,b)}o=Gt(g,i,n)-i}else o=n-i}return{start:i,count:o}}function wf(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const co=e=>e===0||e===1,ed=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ft/s)),sd=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ft/s)+1,wi={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Vt)+1,easeOutSine:e=>Math.sin(e*Vt),easeInOutSine:e=>-.5*(Math.cos(jt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>co(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>co(e)?e:ed(e,.075,.3),easeOutElastic:e=>co(e)?e:sd(e,.075,.3),easeInOutElastic(e){return co(e)?e:e<.5?.5*ed(e*2,.1125,.45):.5+.5*sd(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-wi.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?wi.easeInBounce(e*2)*.5:wi.easeOutBounce(e*2-1)*.5+.5};function Sl(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function nd(e){return Sl(e)?e:new Li(e)}function Yr(e){return Sl(e)?e:new Li(e).saturate(.5).darken(.1).hexString()}const Iv=["x","y","borderWidth","radius","tension"],Rv=["color","borderColor","backgroundColor"];function Lv(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Rv},numbers:{type:"number",properties:Iv}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Fv(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const id=new Map;function jv(e,t){t=t||{};const s=e+JSON.stringify(t);let n=id.get(s);return n||(n=new Intl.NumberFormat(e,t),id.set(s,n)),n}function Xi(e,t,s){return jv(t,s).format(e)}const kf={values(e){return Lt(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,o=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=Nv(e,s)}const r=Ls(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Xi(e,n,l)},logarithmic(e,t,s){if(e===0)return"0";const n=s[t].significand||e/Math.pow(10,Math.floor(Ls(e)));return[1,2,3,5,10,15].includes(n)||t>.8*s.length?kf.numeric.call(this,e,t,s):""}};function Nv(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var kr={formatters:kf};function Uv(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const dn=Object.create(null),Oa=Object.create(null);function ki(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];e=e[o]||(e[o]=Object.create(null))}return e}function Jr(e,t,s){return typeof t=="string"?Fi(ki(e,t),s):Fi(ki(e,""),t)}class $v{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Yr(i.backgroundColor),this.hoverBorderColor=(n,i)=>Yr(i.borderColor),this.hoverColor=(n,i)=>Yr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return Jr(this,t,s)}get(t){return ki(this,t)}describe(t,s){return Jr(Oa,t,s)}override(t,s){return Jr(dn,t,s)}route(t,s,n,i){const o=ki(this,t),r=ki(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return yt(l)?Object.assign({},c,l):ht(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var Ut=new $v({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Lv,Fv,Uv]);function Bv(e){return!e||gt(e.size)||gt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Xo(e,t,s,n,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,s.push(i)),o>n&&(n=o),n}function Vv(e,t,s,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(i=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const a=s.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=s[l],h!=null&&!Lt(h))r=Xo(e,i,o,r,h);else if(Lt(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!Lt(f)&&(r=Xo(e,i,o,r,f));e.restore();const p=o.length/2;if(p>s.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return r}function Js(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function od(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Ea(e,t,s,n){Sf(e,t,s,n,null)}function Sf(e,t,s,n,i){let o,r,a,l,c,u,h,f;const p=t.pointStyle,m=t.rotation,g=t.radius;let b=(m||0)*wv;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(b),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:i?e.ellipse(s,n,i/2,g,0,0,Ft):e.arc(s,n,g,0,Ft),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*g),b+=Xc,e.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*g),b+=Xc,e.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(b+Ys)*l,h=Math.cos(b+Ys)*(i?i/2-c:l),a=Math.sin(b+Ys)*l,f=Math.sin(b+Ys)*(i?i/2-c:l),e.arc(s-h,n-a,c,b-jt,b-Vt),e.arc(s+f,n-r,c,b-Vt,b),e.arc(s+h,n+a,c,b,b+Vt),e.arc(s-f,n+r,c,b+Vt,b+jt),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(s-u,n-l,2*u,2*l);break}b+=Ys;case"rectRot":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+f,n-r),e.lineTo(s+h,n+a),e.lineTo(s-f,n+r),e.closePath();break;case"crossRot":b+=Ys;case"cross":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r);break;case"star":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r),b+=Ys,h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r);break;case"line":r=i?i/2:Math.cos(b)*g,a=Math.sin(b)*g,e.moveTo(s-r,n-a),e.lineTo(s+r,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(b)*(i?i/2:g),n+Math.sin(b)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bs(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Sr(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Cr(e){e.restore()}function zv(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const o=(t.x+s.x)/2;e.lineTo(o,t.y),e.lineTo(o,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function Hv(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Wv(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),gt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function qv(e,t,s,n,i){if(i.strikethrough||i.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function Kv(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function un(e,t,s,n,i,o={}){const r=Lt(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Wv(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Kv(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),gt(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,s,n,o.maxWidth)),e.fillText(c,s,n,o.maxWidth),qv(e,s,n,c,o),n+=Number(i.lineHeight);e.restore()}function Ui(e,t){const{x:s,y:n,w:i,h:o,radius:r}=t;e.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*jt,jt,!0),e.lineTo(s,n+o-r.bottomLeft),e.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,jt,Vt,!0),e.lineTo(s+i-r.bottomRight,n+o),e.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Vt,0,!0),e.lineTo(s+i,n+r.topRight),e.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-Vt,!0),e.lineTo(s+r.topLeft,n)}const Gv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Yv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Jv(e,t){const s=(""+e).match(Gv);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const Xv=e=>+e||0;function Cl(e,t){const s={},n=yt(t),i=n?Object.keys(t):t,o=yt(e)?n?r=>ht(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of i)s[r]=Xv(o(r));return s}function Cf(e){return Cl(e,{top:"y",right:"x",bottom:"y",left:"x"})}function an(e){return Cl(e,["topLeft","topRight","bottomLeft","bottomRight"])}function oe(e){const t=Cf(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qt(e,t){e=e||{},t=t||Ut.font;let s=ht(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=ht(e.style,t.style);n&&!(""+n).match(Yv)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:ht(e.family,t.family),lineHeight:Jv(ht(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:ht(e.weight,t.weight),string:""};return i.string=Bv(i),i}function oi(e,t,s,n){let i=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),s!==void 0&&Lt(a)&&(a=a[s%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function Qv(e,t,s){const{min:n,max:i}=e,o=ff(t,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function Ws(e,t){return Object.assign(Object.create(e),t)}function Ml(e,t=[""],s,n,i=()=>e[0]){const o=s||e;typeof n>"u"&&(n=Tf("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>Ml([a,...e],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Af(a,l,()=>rw(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return ad(a).includes(l)},ownKeys(a){return ad(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function $n(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Mf(e,n),setContext:o=>$n(e,o,s,n),override:o=>$n(e.override(o),t,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return Af(o,r,()=>tw(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function Mf(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Vs(s)?s:()=>s,isIndexable:Vs(n)?n:()=>n}}const Zv=(e,t)=>e?e+_l(t):t,Al=(e,t)=>yt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Af(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function tw(e,t,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=e;let a=n[t];return Vs(a)&&r.isScriptable(t)&&(a=ew(t,a,e,s)),Lt(a)&&a.length&&(a=sw(t,a,e,r.isIndexable)),Al(t,a)&&(a=$n(a,i,o&&o[t],r)),a}function ew(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||n);return a.delete(e),Al(e,l)&&(l=Pl(i._scopes,i,e,l)),l}function sw(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(e))return t[o.index%t.length];if(yt(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=Pl(c,i,e,u);t.push($n(h,o,r&&r[e],a))}}return t}function Pf(e,t,s){return Vs(e)?e(t,s):e}const nw=(e,t)=>e===!0?t:typeof e=="string"?Bs(t,e):void 0;function iw(e,t,s,n,i){for(const o of t){const r=nw(s,o);if(r){e.add(r);const a=Pf(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function Pl(e,t,s,n){const i=t._rootScopes,o=Pf(t._fallback,s,n),r=[...e,...i],a=new Set;a.add(n);let l=rd(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=rd(a,r,o,l,n),l===null)?!1:Ml(Array.from(a),[""],i,o,()=>ow(t,s,n))}function rd(e,t,s,n,i){for(;s;)s=iw(e,t,s,n,i);return s}function ow(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return Lt(i)&&yt(s)?s:i||{}}function rw(e,t,s,n){let i;for(const o of t)if(i=Tf(Zv(o,e),s),typeof i<"u")return Al(e,i)?Pl(s,n,e,i):i}function Tf(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function ad(e){let t=e._keys;return t||(t=e._keys=aw(e._scopes)),t}function aw(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}function Of(e,t,s,n){const{iScale:i}=e,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+s,u=t[c],r[a]={r:i.parse(Bs(u,o),c)};return r}const lw=Number.EPSILON||1e-14,Bn=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ef=e=>e==="x"?"y":"x";function cw(e,t,s,n){const i=e.skip?t:e,o=t,r=s.skip?t:s,a=Ta(o,i),l=Ta(r,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,f=n*u;return{previous:{x:o.x-h*(r.x-i.x),y:o.y-h*(r.y-i.y)},next:{x:o.x+f*(r.x-i.x),y:o.y+f*(r.y-i.y)}}}function dw(e,t,s){const n=e.length;let i,o,r,a,l,c=Bn(e,0);for(let u=0;u<n-1;++u)if(l=c,c=Bn(e,u+1),!(!l||!c)){if(vi(t[u],0,lw)){s[u]=s[u+1]=0;continue}i=s[u]/t[u],o=s[u+1]/t[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=i*r*t[u],s[u+1]=o*r*t[u])}}function uw(e,t,s="x"){const n=Ef(s),i=e.length;let o,r,a,l=Bn(e,0);for(let c=0;c<i;++c){if(r=a,a=l,l=Bn(e,c+1),!a)continue;const u=a[s],h=a[n];r&&(o=(u-r[s])/3,a[`cp1${s}`]=u-o,a[`cp1${n}`]=h-o*t[c]),l&&(o=(l[s]-u)/3,a[`cp2${s}`]=u+o,a[`cp2${n}`]=h+o*t[c])}}function hw(e,t="x"){const s=Ef(t),n=e.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=Bn(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=Bn(e,r+1),!!l){if(c){const u=c[t]-l[t];i[r]=u!==0?(c[s]-l[s])/u:0}o[r]=a?c?es(i[r-1])!==es(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}dw(e,i,o),uw(e,o,t)}function uo(e,t,s){return Math.max(Math.min(e,s),t)}function fw(e,t){let s,n,i,o,r,a=bs(e[0],t);for(s=0,n=e.length;s<n;++s)r=o,o=a,a=s<n-1&&bs(e[s+1],t),o&&(i=e[s],r&&(i.cp1x=uo(i.cp1x,t.left,t.right),i.cp1y=uo(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=uo(i.cp2x,t.left,t.right),i.cp2y=uo(i.cp2y,t.top,t.bottom)))}function pw(e,t,s,n,i){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")hw(e,i);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=cw(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&fw(e,s)}function Tl(){return typeof window<"u"&&typeof document<"u"}function Ol(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Qo(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const Mr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function mw(e,t){return Mr(e).getPropertyValue(t)}const gw=["top","right","bottom","left"];function ln(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=gw[i];n[o]=parseFloat(e[t+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const bw=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function yw(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(bw(i,o,e.target))a=i,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function en(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=Mr(s),o=i.boxSizing==="border-box",r=ln(i,"padding"),a=ln(i,"border","width"),{x:l,y:c,box:u}=yw(e,s),h=r.left+(u&&a.left),f=r.top+(u&&a.top);let{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-h)/p*s.width/n),y:Math.round((c-f)/m*s.height/n)}}function xw(e,t,s){let n,i;if(t===void 0||s===void 0){const o=e&&Ol(e);if(!o)t=e.clientWidth,s=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Mr(o),l=ln(a,"border","width"),c=ln(a,"padding");t=r.width-c.width-l.width,s=r.height-c.height-l.height,n=Qo(a.maxWidth,o,"clientWidth"),i=Qo(a.maxHeight,o,"clientHeight")}}return{width:t,height:s,maxWidth:n||Jo,maxHeight:i||Jo}}const ho=e=>Math.round(e*10)/10;function _w(e,t,s,n){const i=Mr(e),o=ln(i,"margin"),r=Qo(i.maxWidth,e,"clientWidth")||Jo,a=Qo(i.maxHeight,e,"clientHeight")||Jo,l=xw(e,t,s);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=ln(i,"border","width"),p=ln(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=ho(Math.min(c,r,l.maxWidth)),u=ho(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ho(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=ho(Math.floor(u*n))),{width:c,height:u}}function ld(e,t,s){const n=t||1,i=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(e.currentDevicePixelRatio=n,r.height=i,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const vw=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Tl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function cd(e,t){const s=mw(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function sn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function ww(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function kw(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=sn(e,i,s),a=sn(i,o,s),l=sn(o,t,s),c=sn(r,a,s),u=sn(a,l,s);return sn(c,u,s)}const Sw=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Cw=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Dn(e,t,s){return e?Sw(t,s):Cw()}function Df(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function If(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Rf(e){return e==="angle"?{between:Ni,compare:Mv,normalize:Ce}:{between:ms,compare:(t,s)=>t-s,normalize:t=>t}}function dd({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function Mw(e,t,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Rf(n),l=t.length;let{start:c,end:u,loop:h}=e,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&r(a(t[c%l][n]),i,o);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function Lf(e,t,s){if(!s)return[e];const{property:n,start:i,end:o}=s,r=t.length,{compare:a,between:l,normalize:c}=Rf(n),{start:u,end:h,loop:f,style:p}=Mw(e,t,s),m=[];let g=!1,b=null,_,w,C;const S=()=>l(i,C,_)&&a(i,C)!==0,M=()=>a(o,_)===0||l(o,C,_),F=()=>g||S(),I=()=>!g||M();for(let $=u,X=u;$<=h;++$)w=t[$%r],!w.skip&&(_=c(w[n]),_!==C&&(g=l(_,i,o),b===null&&F()&&(b=a(_,i)===0?$:X),b!==null&&I()&&(m.push(dd({start:b,end:$,loop:f,count:r,style:p})),b=null),X=$,C=_));return b!==null&&m.push(dd({start:b,end:h,loop:f,count:r,style:p})),m}function Ff(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const o=Lf(n[i],e.points,t);o.length&&s.push(...o)}return s}function Aw(e,t,s,n){let i=0,o=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}function Pw(e,t,s,n){const i=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%i,end:(l-1)%i,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%i,end:r%i,loop:n}),o}function Tw(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const o=!!e._loop,{start:r,end:a}=Aw(s,i,o,n);if(n===!0)return ud(e,[{start:r,end:a,loop:o}],s,t);const l=a<r?a+i:a,c=!!e._fullLoop&&r===0&&a===i-1;return ud(e,Pw(s,r,l,c),s,t)}function ud(e,t,s,n){return!n||!n.setContext||!s?t:Ow(e,t,s,n)}function Ow(e,t,s,n){const i=e._chart.getContext(),o=hd(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=s.length,c=[];let u=o,h=t[0].start,f=h;function p(m,g,b,_){const w=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=w;for(;s[g%l].skip;)g+=w;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:b,style:_}),u=_,h=g%l)}}for(const m of t){h=a?h:m.start;let g=s[h%l],b;for(f=h+1;f<=m.end;f++){const _=s[f%l];b=hd(n.setContext(Ws(i,{type:"segment",p0:g,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),Ew(b,u)&&p(h,f-1,m.loop,u),g=_,u=b}h<f-1&&p(h,f-1,m.loop,u)}return c}function hd(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Ew(e,t){if(!t)return!1;const s=[],n=function(i,o){return Sl(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function fo(e,t,s){return e.options.clip?e[s]:t[s]}function Dw(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:fo(s,t,"left"),right:fo(s,t,"right"),top:fo(n,t,"top"),bottom:fo(n,t,"bottom")}:t}function jf(e,t){const s=t._clip;if(s.disabled)return!1;const n=Dw(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Iw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:t,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=xf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=o.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ls=new Iw;const fd="transparent",Rw={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=nd(e||fd),i=n.valid&&nd(t||fd);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class Lw{constructor(t,s,n,i){const o=s[n];i=oi([t.to,i,o,t.from]);const r=oi([t.from,o,i]);this._active=!0,this._fn=t.fn||Rw[t.type||typeof r],this._easing=wi[t.easing]||wi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=oi([t.to,s,i,t.from]),this._from=oi([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class Nf{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!yt(t))return;const s=Object.keys(Ut.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!yt(o))return;const r={};for(const a of s)r[a]=o[a];(Lt(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,s){const n=s.options,i=jw(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&Fw(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,s){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const u=s[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[c]=u;continue}o[c]=h=new Lw(f,t,c,u),i.push(h)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return ls.add(this._chart,n),!0}}function Fw(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const o=e[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function jw(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function pd(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,o=s.max===void 0?t:0;return{start:n?o:i,end:n?i:o}}function Nw(e,t,s){if(s===!1)return!1;const n=pd(e,s),i=pd(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function Uw(e){let t,s,n,i;return yt(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function Uf(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function md(e,t,s,n={}){const i=e.keys,o=n.mode==="single";let r,a,l,c;if(t===null)return;let u=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(u=!0,n.all)continue;break}c=e.values[l],$t(c)&&(o||t===0||es(t)===es(c))&&(t+=c)}return!u&&!n.all?0:t}function $w(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[i]:u,[o]:e[u]};return a}function Xr(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function Bw(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function Vw(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function zw(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function gd(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const o=e[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function bd(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=Bw(o,r,n),h=t.length;let f;for(let p=0;p<h;++p){const m=t[p],{[l]:g,[c]:b}=m,_=m._stacks||(m._stacks={});f=_[c]=zw(i,u,g),f[a]=b,f._top=gd(f,r,!0,n.type),f._bottom=gd(f,r,!1,n.type);const w=f._visualValues||(f._visualValues={});w[a]=b}}function Qr(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function Hw(e,t){return Ws(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ww(e,t,s){return Ws(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function Xn(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const Zr=e=>e==="reset"||e==="none",yd=(e,t)=>t?e:Object.assign({},e),qw=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Uf(s,!0),values:null};class Be{constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Xr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,o=s.xAxisID=ht(n.xAxisID,Qr(t,"x")),r=s.yAxisID=ht(n.yAxisID,Qr(t,"y")),a=s.rAxisID=ht(n.rAxisID,Qr(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),u=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&td(this._data,this),t._stacked&&Xn(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(yt(s)){const i=this._cachedMeta;this._data=$w(s,i)}else if(n!==s){if(n){td(n,this);const i=this._cachedMeta;Xn(i),i._parsed=[]}s&&Object.isExtensible(s)&&Ov(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=Xr(s.vScale,s),s.stack!==n.stack&&(i=!0,Xn(s),s.stack=n.stack),this._resyncElements(t),(i||o!==s._stacked)&&(bd(this,s._parsed),s._stacked=Xr(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,h,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Lt(i[t])?f=this.parseArrayData(n,i,t,s):yt(i[t])?f=this.parseObjectData(n,i,t,s):f=this.parsePrimitiveData(n,i,t,s);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<s;++u)n._parsed[u+t]=h=f[u],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&bd(this,f)}parsePrimitiveData(t,s,n,i){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+n,h[f]={[a]:u||o.parse(c[m],m),[l]:r.parse(s[m],m)};return h}parseArrayData(t,s,n,i){const{xScale:o,yScale:r}=t,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+n,h=s[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(t,s,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,f,p;for(u=0,h=i;u<h;++u)f=u+n,p=s[f],c[u]={x:o.parse(Bs(p,a),f),y:r.parse(Bs(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,o=this._cachedMeta,r=s[t.axis],a={keys:Uf(i,!0),values:s._stacks[t.axis]._visualValues};return md(a,r,o.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=md(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,r=i.length,a=this._getOtherScale(t),l=qw(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Vw(a);let f,p;function m(){p=i[f];const g=p[a.axis];return!$t(p[t.axis])||u>g||h<g}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][t.axis],$t(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=Uw(ht(this.options.clip,Nw(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?r.push(h):h.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=Ww(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Hw(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=t+"-"+s,a=o[r],l=this.enableOptionSharing&&ji(n);if(a)return yd(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Ut.elements[t]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(yd(g,l))),g}_resolveAnimations(t,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(t,n,s))}const c=new Nf(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||Zr(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(t,s,n,i){Zr(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!Zr(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,s,n=!0){const i=this._cachedMeta,o=i.data,r=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(o,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&Xn(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(Be,"defaults",{}),B(Be,"datasetElementType",null),B(Be,"dataElementType",null);function Kw(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=yf(n.sort((i,o)=>i-o))}return e._cache.$bar}function Gw(e){const t=e.iScale,s=Kw(t,e.type);let n=t._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(ji(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=t.ticks.length;i<o;++i)r=t.getPixelForTick(i),l();return n}function Yw(e,t,s,n){const i=s.barThickness;let o,r;return gt(i)?(o=t.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function Jw(e,t,s,n){const i=t.pixels,o=i[e];let r=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function Xw(e,t,s,n){const i=s.parse(e[0],n),o=s.parse(e[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function $f(e,t,s,n){return Lt(e)?Xw(e,t,s,n):t[s.axis]=s.parse(e,n),t}function xd(e,t,s,n){const i=e.iScale,o=e.vScale,r=i.getLabels(),a=i===o,l=[];let c,u,h,f;for(c=s,u=s+n;c<u;++c)f=t[c],h={},h[i.axis]=a||i.parse(r[c],c),l.push($f(f,h,o,c));return l}function ta(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Qw(e,t,s){return e!==0?es(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function Zw(e){let t,s,n,i,o;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:t,top:i,bottom:o}}function t1(e,t,s,n){let i=t.borderSkipped;const o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=Zw(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=u:(o[_d(u,r,a,l)]=!0,i=c)),o[_d(i,r,a,l)]=!0,e.borderSkipped=o}function _d(e,t,s,n){return n?(e=e1(e,t,s),e=vd(e,s,t)):e=vd(e,t,s),e}function e1(e,t,s){return e===t?s:e===s?t:e}function vd(e,t,s){return e==="start"?t:e==="end"?s:e}function s1(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class Po extends Be{parsePrimitiveData(t,s,n,i){return xd(t,s,n,i)}parseArrayData(t,s,n,i){return xd(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let f,p,m,g;for(f=n,p=n+i;f<p;++f)g=s[f],m={},m[o.axis]=o.parse(Bs(g,c),f),h.push($f(Bs(g,u),m,r,f));return h}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(t),r=o._custom,a=ta(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,i);for(let p=s;p<s+n;p++){const m=this.getParsed(p),g=o||gt(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),b=this._calculateBarIndexPixels(p,u),_=(m._stacks||{})[a.axis],w={horizontal:c,base:g.base,enableBorderRadius:!_||ta(m._custom)||r===_._top||r===_._bottom,x:c?g.head:b.center,y:c?b.center:g.head,height:c?b.size:Math.abs(g.size),width:c?Math.abs(g.size):b.size};f&&(w.options=h||this.resolveDataElementOptions(p,t[p].active?"active":i));const C=w.options||t[p].options;t1(w,C,_,r),s1(w,C,u.ratio),this.updateElement(t[p],p,w,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=u=>{const h=u._parsed.find(p=>p[n.axis]===l),f=h&&h[u.vScale.axis];if(gt(f)||isNaN(f))return!0};for(const u of i)if(!(s!==void 0&&c(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,s,n){const i=this._getStacks(t,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||Gw(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=ta(c);let h=l[s.axis],f=0,p=n?this.applyStack(s,l,n):h,m,g;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&es(h)!==es(c.barEnd)&&(f=0),f+=h);const b=!gt(o)&&!u?o:f;let _=s.getPixelForValue(b);if(this.chart.getDataVisibility(t)?m=s.getPixelForValue(f+p):m=_,g=m-_,Math.abs(g)<r){g=Qw(g,s,a)*r,h===a&&(_-=g/2);const w=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),S=Math.min(w,C),M=Math.max(w,C);_=Math.max(Math.min(_,M),S),m=_+g,n&&!u&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(_))}if(_===s.getPixelForValue(a)){const w=es(g)*s.getLineWidthForValue(a)/2;_+=w,g-=w}return{size:g,base:_,head:m,center:m+g/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,o=i.skipNull,r=ht(i.maxBarThickness,1/0);let a,l;if(s.grouped){const c=o?this._getStackCount(t):s.stackCount,u=i.barThickness==="flex"?Jw(t,s,i,c):Yw(t,s,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}B(Po,"id","bar"),B(Po,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),B(Po,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class To extends Be{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,s,n,i){const o=super.parsePrimitiveData(t,s,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,s,n,i){const o=super.parseArrayData(t,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=ht(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,s,n,i){const o=super.parseObjectData(t,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=ht(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let s=0;for(let n=t.length-1;n>=0;--n)s=Math.max(s,t[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(s,i),u=r.axis,h=a.axis;for(let f=s;f<s+n;f++){const p=t[f],m=!o&&this.getParsed(f),g={},b=g[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[u]),_=g[h]=o?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(b)||isNaN(_),c&&(g.options=l||this.resolveDataElementOptions(f,p.active?"active":i),o&&(g.options.radius=0)),this.updateElement(p,f,g,i)}}resolveDataElementOptions(t,s){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return s!=="active"&&(i.radius=0),i.radius+=ht(n&&n._custom,o),i}}B(To,"id","bubble"),B(To,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),B(To,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function n1(e,t,s){let n=1,i=1,o=0,r=0;if(t<Ft){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(C,S,M)=>Ni(C,a,l,!0)?1:Math.max(S,S*s,M,M*s),m=(C,S,M)=>Ni(C,a,l,!0)?-1:Math.min(S,S*s,M,M*s),g=p(0,c,h),b=p(Vt,u,f),_=m(jt,c,h),w=m(jt+Vt,u,f);n=(g-_)/2,i=(b-w)/2,o=-(g+_)/2,r=-(b+w)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class on extends Be{constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(yt(n[t])){const{key:l="value"}=this._parsing;o=c=>+Bs(n[c],l)}let r,a;for(r=t,a=t+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Ne(this.options.rotation-90)}_getCircumference(){return Ne(this.options.circumference)}_getRotationExtents(){let t=Ft,s=-Ft;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),s=Math.max(s,o+r)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(mv(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=n1(h,u,l),b=(n.width-r)/f,_=(n.height-r)/p,w=Math.max(Math.min(b,_)/2,0),C=ff(this.options.radius,w),S=Math.max(C*l,0),M=(C-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*C,this.offsetY=g*C,i.total=this.calculateTotal(),this.outerRadius=C-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Ft)}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(s,i);let _=this._getRotation(),w;for(w=0;w<s;++w)_+=this._circumference(w,o);for(w=s;w<s+n;++w){const C=this._circumference(w,o),S=t[w],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+C,circumference:C,outerRadius:m,innerRadius:p};b&&(M.options=g||this.resolveDataElementOptions(w,S.active?"active":i)),_+=C,this.updateElement(S,w,M,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const o=t._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?Ft*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Xi(s._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,o,r,a,l;if(!t){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}}if(!t)return 0;for(i=0,o=t.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}B(on,"id","doughnut"),B(on,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),B(on,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),B(on,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class Oo extends Be{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=vf(s,i,r);this._drawStart=a,this._drawCount=l,wf(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,i),f=r.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,b=Un(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||i==="none",w=s+n,C=t.length;let S=s>0&&this.getParsed(s-1);for(let M=0;M<C;++M){const F=t[M],I=_?F:{};if(M<s||M>=w){I.skip=!0;continue}const $=this.getParsed(M),X=gt($[p]),nt=I[f]=r.getPixelForValue($[f],M),rt=I[p]=o||X?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,$,l):$[p],M);I.skip=isNaN(nt)||isNaN(rt)||X,I.stop=M>0&&Math.abs($[f]-S[f])>b,g&&(I.parsed=$,I.raw=c.data[M]),h&&(I.options=u||this.resolveDataElementOptions(M,F.active?"active":i)),_||this.updateElement(F,M,I,i),S=$}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}B(Oo,"id","line"),B(Oo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),B(Oo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Si extends Be{constructor(t,s){super(t,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Xi(s._parsed[t].r,n.options.locale);return{label:i[t]||"",value:o}}parseObjectData(t,s,n,i){return Of.bind(this)(t,s,n,i)}update(t){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,t)}getMinMax(){const t=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const t=this.chart,s=t.chartArea,n=t.options,i=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*jt;let p=f,m;const g=360/this.countVisibleElements();for(m=0;m<s;++m)p+=this._computeAngle(m,i,g);for(m=s;m<s+n;m++){const b=t[m];let _=p,w=p+this._computeAngle(m,i,g),C=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=w,o&&(l.animateScale&&(C=0),l.animateRotate&&(_=w=f));const S={x:u,y:h,innerRadius:0,outerRadius:C,startAngle:_,endAngle:w,options:this.resolveDataElementOptions(m,b.active?"active":i)};this.updateElement(b,m,S,i)}}countVisibleElements(){const t=this._cachedMeta;let s=0;return t.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(t,s,n){return this.chart.getDataVisibility(t)?Ne(this.resolveDataElementOptions(t,s).angle||n):0}}B(Si,"id","polarArea"),B(Si,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),B(Si,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Da extends on{}B(Da,"id","pie"),B(Da,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Eo extends Be{getLabelAndValue(t){const s=this._cachedMeta.vScale,n=this.getParsed(t);return{label:s.getLabels()[t],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(t,s,n,i){return Of.bind(this)(t,s,n,i)}update(t){const s=this._cachedMeta,n=s.dataset,i=s.data||[],o=s.iScale.getLabels();if(n.points=i,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(n,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,s,n,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=s;a<s+n;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,f=r?o.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}B(Eo,"id","radar"),B(Eo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),B(Eo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Do extends Be{getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=vf(s,n,i);if(this._drawStart=o,this._drawCount=r,wf(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(u),f=this.includeOptions(i,h),p=r.axis,m=a.axis,{spanGaps:g,segment:b}=this.options,_=Un(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||i==="none";let C=s>0&&this.getParsed(s-1);for(let S=s;S<s+n;++S){const M=t[S],F=this.getParsed(S),I=w?M:{},$=gt(F[m]),X=I[p]=r.getPixelForValue(F[p],S),nt=I[m]=o||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,F,l):F[m],S);I.skip=isNaN(X)||isNaN(nt)||$,I.stop=S>0&&Math.abs(F[p]-C[p])>_,b&&(I.parsed=F,I.raw=c.data[S]),f&&(I.options=h||this.resolveDataElementOptions(S,M.active?"active":i)),w||this.updateElement(M,S,I,i),C=F}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const t=this._cachedMeta,s=t.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}B(Do,"id","scatter"),B(Do,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),B(Do,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var i1=Object.freeze({__proto__:null,BarController:Po,BubbleController:To,DoughnutController:on,LineController:Oo,PieController:Da,PolarAreaController:Si,RadarController:Eo,ScatterController:Do});function Xs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class El{constructor(t){B(this,"options");this.options=t||{}}static override(t){Object.assign(El.prototype,t)}init(){}formats(){return Xs()}parse(){return Xs()}format(){return Xs()}add(){return Xs()}diff(){return Xs()}startOf(){return Xs()}endOf(){return Xs()}}var o1={_date:El};function r1(e,t,s,n){const{controller:i,data:o,_sorted:r}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?Pv:gs;if(n){if(i._sharedOptions){const u=o[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const f=c(o,t,s-h),p=c(o,t,s+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(o,t,s);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=e,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!gt(g[h.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(g=>!gt(g[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:o.length-1}}function Qi(e,t,s,n,i){const o=e.getSortedVisibleDatasetMetas(),r=s[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:h,hi:f}=r1(o[a],t,r,i);for(let p=h;p<=f;++p){const m=u[p];m.skip||n(m,c,p)}}}function a1(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const o=t?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ea(e,t,s,n,i){const o=[];return!i&&!e.isPointInArea(t)||Qi(e,s,t,function(a,l,c){!i&&!bs(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function l1(e,t,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=gf(r,{x:t.x,y:t.y});Ni(h,c,u)&&i.push({element:r,datasetIndex:a,index:l})}return Qi(e,s,t,o),i}function c1(e,t,s,n,i,o){let r=[];const a=a1(s);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(t.x,t.y,i);if(n&&!p)return;const m=u.getCenterPoint(i);if(!(!!o||e.isPointInArea(m))&&!p)return;const b=a(t,m);b<l?(r=[{element:u,datasetIndex:h,index:f}],l=b):b===l&&r.push({element:u,datasetIndex:h,index:f})}return Qi(e,s,t,c),r}function sa(e,t,s,n,i,o){return!o&&!e.isPointInArea(t)?[]:s==="r"&&!n?l1(e,t,s,i):c1(e,t,s,n,i,o)}function wd(e,t,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return Qi(e,s,t,(l,c,u)=>{l[r]&&l[r](t[s],i)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:o}var d1={evaluateInteractionItems:Qi,modes:{index(e,t,s,n){const i=en(t,e),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?ea(e,i,o,n,r):sa(e,i,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?ea(e,i,o,n,r):sa(e,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return ea(e,i,o,n,r)},nearest(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return sa(e,i,o,s.intersect,n,r)},x(e,t,s,n){const i=en(t,e);return wd(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=en(t,e);return wd(e,i,"y",s.intersect,n)}}};const Bf=["left","top","right","bottom"];function Qn(e,t){return e.filter(s=>s.pos===t)}function kd(e,t){return e.filter(s=>Bf.indexOf(s.pos)===-1&&s.box.axis===t)}function Zn(e,t){return e.sort((s,n)=>{const i=t?n:s,o=t?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function u1(e){const t=[];let s,n,i,o,r,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return t}function h1(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Bf.includes(i))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function f1(e,t){const s=h1(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return s}function p1(e){const t=u1(e),s=Zn(t.filter(c=>c.box.fullSize),!0),n=Zn(Qn(t,"left"),!0),i=Zn(Qn(t,"right")),o=Zn(Qn(t,"top"),!0),r=Zn(Qn(t,"bottom")),a=kd(t,"x"),l=kd(t,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:Qn(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function Sd(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function Vf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function m1(e,t,s,n){const{pos:i,box:o}=s,r=e.maxPadding;if(!yt(i)){s.size&&(e[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?o.height:o.width),s.size=h.size/h.count,e[i]+=s.size}o.getPadding&&Vf(r,o.getPadding());const a=Math.max(0,t.outerWidth-Sd(r,e,"left","right")),l=Math.max(0,t.outerHeight-Sd(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function g1(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function b1(e,t){const s=t.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(t[r],s[r])}),o}return n(e?["left","right"]:["top","bottom"])}function ri(e,t,s,n){const i=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,b1(a.horizontal,t));const{same:h,other:f}=m1(t,s,a,n);c|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&ri(i,t,s,n)||u}function po(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function Cd(e,t,s,n){const i=s.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,f=c.size||l.height;ji(c.start)&&(r=c.start),l.fullSize?po(l,i.left,r,s.outerWidth-i.right-i.left,f):po(l,t.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=t.h*u,f=c.size||l.width;ji(c.start)&&(o=c.start),l.fullSize?po(l,o,i.top,f,s.outerHeight-i.bottom-i.top):po(l,o,t.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=r}var se={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=oe(e.options.layout.padding),o=Math.max(t-i.width,0),r=Math.max(s-i.height,0),a=p1(e.boxes),l=a.vertical,c=a.horizontal;Mt(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},i);Vf(f,oe(n));const p=Object.assign({maxPadding:f,w:o,h:r,x:i.left,y:i.top},i),m=f1(l.concat(c),h);ri(a.fullSize,p,h,m),ri(l,p,h,m),ri(c,p,h,m)&&ri(l,p,h,m),g1(p),Cd(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Cd(a.rightAndBottom,p,h,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Mt(a.chartArea,g=>{const b=g.box;Object.assign(b,e.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class zf{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class y1 extends zf{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Io="$chartjs",x1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Md=e=>e===null||e==="";function _1(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[Io]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Md(i)){const o=cd(e,"width");o!==void 0&&(e.width=o)}if(Md(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=cd(e,"height");o!==void 0&&(e.height=o)}return e}const Hf=vw?{passive:!0}:!1;function v1(e,t,s){e&&e.addEventListener(t,s,Hf)}function w1(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Hf)}function k1(e,t){const s=x1[e.type]||e.type,{x:n,y:i}=en(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Zo(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function S1(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Zo(a.addedNodes,n),r=r&&!Zo(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function C1(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Zo(a.removedNodes,n),r=r&&!Zo(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const $i=new Map;let Ad=0;function Wf(){const e=window.devicePixelRatio;e!==Ad&&(Ad=e,$i.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function M1(e,t){$i.size||window.addEventListener("resize",Wf),$i.set(e,t)}function A1(e){$i.delete(e),$i.size||window.removeEventListener("resize",Wf)}function P1(e,t,s){const n=e.canvas,i=n&&Ol(n);if(!i)return;const o=_f((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(i),M1(e,o),r}function na(e,t,s){s&&s.disconnect(),t==="resize"&&A1(e)}function T1(e,t,s){const n=e.canvas,i=_f(o=>{e.ctx!==null&&s(k1(o,e))},e);return v1(n,t,i),i}class O1 extends zf{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(_1(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[Io])return!1;const n=s[Io].initial;["height","width"].forEach(o=>{const r=n[o];gt(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[Io],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),r={attach:S1,detach:C1,resize:P1}[s]||T1;i[s]=r(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:na,detach:na,resize:na}[s]||w1)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return _w(t,s,n,i)}isAttached(t){const s=t&&Ol(t);return!!(s&&s.isConnected)}}function E1(e){return!Tl()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?y1:O1}var vo;let Ss=(vo=class{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return Un(this.x)&&Un(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}},B(vo,"defaults",{}),B(vo,"defaultRoutes"),vo);function D1(e,t){const s=e.options.ticks,n=I1(e),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?L1(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return F1(t,c,o,r/i),c;const u=R1(o,t,i);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(mo(t,c,u,gt(p)?0:a-p,a),h=0,f=r-1;h<f;h++)mo(t,c,u,o[h],o[h+1]);return mo(t,c,u,l,gt(p)?t.length:l+p),c}return mo(t,c,u),c}function I1(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function R1(e,t,s){const n=j1(e),i=t.length/s;if(!n)return Math.max(i,1);const o=kv(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function L1(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function F1(e,t,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),i++,o=s[i*n])}function mo(e,t,s,n,i){const o=ht(n,0),r=Math.min(ht(i,e.length),e.length);let a=0,l,c,u;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*s))}function j1(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const N1=e=>e==="left"?"right":e==="right"?"left":e,Pd=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Td=(e,t)=>Math.min(t||e,e);function Od(e,t){const s=[],n=e.length/t,i=e.length;let o=0;for(;o<i;o+=n)s.push(e[Math.floor(o)]);return s}function U1(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>r+a)))return l}function $1(e,t){Mt(e,s=>{const n=s.gc,i=n.length/2;let o;if(i>t){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function ti(e){return e.drawTicks?e.tickLength:0}function Ed(e,t){if(!e.display)return 0;const s=qt(e.font,t),n=oe(e.padding);return(Lt(e.text)?e.text.length:1)*s.lineHeight+n.height}function B1(e,t){return Ws(e,{scale:t,type:"scale"})}function V1(e,t,s){return Ws(e,{tick:s,index:t,type:"tick"})}function z1(e,t,s){let n=kl(e);return(s&&t!=="right"||!s&&t==="right")&&(n=N1(n)),n}function H1(e,t,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,f,p,m;const g=r-i,b=a-o;if(e.isHorizontal()){if(p=Zt(n,o,a),yt(s)){const _=Object.keys(s)[0],w=s[_];m=u[_].getPixelForValue(w)+g-t}else s==="center"?m=(c.bottom+c.top)/2+g-t:m=Pd(e,s,t);f=a-o}else{if(yt(s)){const _=Object.keys(s)[0],w=s[_];p=u[_].getPixelForValue(w)-b+t}else s==="center"?p=(c.left+c.right)/2-b+t:p=Pd(e,s,t);m=Zt(n,r,i),h=s==="left"?-Vt:Vt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class pn extends Ss{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=ke(t,Number.POSITIVE_INFINITY),s=ke(s,Number.NEGATIVE_INFINITY),n=ke(n,Number.POSITIVE_INFINITY),i=ke(i,Number.NEGATIVE_INFINITY),{min:ke(t,n),max:ke(s,i),minDefined:$t(t),maxDefined:$t(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:ke(s,ke(n,s)),max:ke(n,ke(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){It(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qv(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Od(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=D1(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){It(this.options.afterUpdate,[this])}beforeSetDimensions(){It(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){It(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),It(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){It(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=It(s.callback,[o.value,n,t],this)}afterTickToLabelConversion(){It(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){It(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Td(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Gt(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(t.offset?.5:1)),l=this.maxHeight-ti(t.grid)-s.padding-Ed(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=vl(Math.min(Math.asin(Gt((u.highest.height+6)/a,-1,1)),Math.asin(Gt(l/c,-1,1))-Math.asin(Gt(f/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){It(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){It(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ed(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=ti(o)+l):(t.height=this.maxHeight,t.width=ti(o)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Ne(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(a){const _=n.mirror?0:b*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+_+p)}else{const _=n.mirror?0:g*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+_+p)}this._calculatePadding(c,u,b,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*t.width,p=n*s.height):(f=n*t.height,p=i*s.width):o==="start"?p=s.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,p=s.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=s.height/2,h=t.height/2;o==="start"?(u=0,h=t.height):o==="end"&&(u=s.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){It(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)gt(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Od(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Td(s,n));let c=0,u=0,h,f,p,m,g,b,_,w,C,S,M;for(h=0;h<s;h+=l){if(m=t[h].label,g=this._resolveTickFontOptions(h),i.font=b=g.string,_=o[b]=o[b]||{data:{},gc:[]},w=g.lineHeight,C=S=0,!gt(m)&&!Lt(m))C=Xo(i,_.data,_.gc,C,m),S=w;else if(Lt(m))for(f=0,p=m.length;f<p;++f)M=m[f],!gt(M)&&!Lt(M)&&(C=Xo(i,_.data,_.gc,C,M),S+=w);r.push(C),a.push(S),c=Math.max(C,c),u=Math.max(S,u)}$1(o,s);const F=r.indexOf(c),I=a.indexOf(u),$=X=>({width:r[X]||0,height:a[X]||0});return{first:$(0),last:$(s-1),widest:$(F),highest:$(I),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return Av(this._alignToPixels?Js(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=V1(this.getContext(),t,n))}return this.$context||(this.$context=B1(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ne(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=ti(o),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,_=function(lt){return Js(n,lt,g)};let w,C,S,M,F,I,$,X,nt,rt,dt,At;if(r==="top")w=_(this.bottom),I=this.bottom-f,X=w-b,rt=_(t.top)+b,At=t.bottom;else if(r==="bottom")w=_(this.top),rt=t.top,At=_(t.bottom)-b,I=w+b,X=this.top+f;else if(r==="left")w=_(this.right),F=this.right-f,$=w-b,nt=_(t.left)+b,dt=t.right;else if(r==="right")w=_(this.left),nt=t.left,dt=_(t.right)-b,F=w+b,$=this.left+f;else if(s==="x"){if(r==="center")w=_((t.top+t.bottom)/2+.5);else if(yt(r)){const lt=Object.keys(r)[0],it=r[lt];w=_(this.chart.scales[lt].getPixelForValue(it))}rt=t.top,At=t.bottom,I=w+b,X=I+f}else if(s==="y"){if(r==="center")w=_((t.left+t.right)/2);else if(yt(r)){const lt=Object.keys(r)[0],it=r[lt];w=_(this.chart.scales[lt].getPixelForValue(it))}F=w-b,$=F-f,nt=t.left,dt=t.right}const Wt=ht(i.ticks.maxTicksLimit,h),xt=Math.max(1,Math.ceil(h/Wt));for(C=0;C<h;C+=xt){const lt=this.getContext(C),it=o.setContext(lt),ut=a.setContext(lt),Tt=it.lineWidth,re=it.color,ae=ut.dash||[],Bt=ut.dashOffset,Oe=it.tickWidth,ue=it.tickColor,qe=it.tickBorderDash||[],zt=it.tickBorderDashOffset;S=U1(this,C,l),S!==void 0&&(M=Js(n,S,Tt),c?F=$=nt=dt=M:I=X=rt=At=M,p.push({tx1:F,ty1:I,tx2:$,ty2:X,x1:nt,y1:rt,x2:dt,y2:At,width:Tt,color:re,borderDash:ae,borderDashOffset:Bt,tickWidth:Oe,tickColor:ue,tickBorderDash:qe,tickBorderDashOffset:zt}))}return this._ticksLength=h,this._borderValue=w,p}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,f=ti(n.grid),p=f+u,m=h?-u:p,g=-Ne(this.labelRotation),b=[];let _,w,C,S,M,F,I,$,X,nt,rt,dt,At="middle";if(i==="top")F=this.bottom-m,I=this._getXAxisLabelAlignment();else if(i==="bottom")F=this.top+m,I=this._getXAxisLabelAlignment();else if(i==="left"){const xt=this._getYAxisLabelAlignment(f);I=xt.textAlign,M=xt.x}else if(i==="right"){const xt=this._getYAxisLabelAlignment(f);I=xt.textAlign,M=xt.x}else if(s==="x"){if(i==="center")F=(t.top+t.bottom)/2+p;else if(yt(i)){const xt=Object.keys(i)[0],lt=i[xt];F=this.chart.scales[xt].getPixelForValue(lt)+p}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")M=(t.left+t.right)/2-p;else if(yt(i)){const xt=Object.keys(i)[0],lt=i[xt];M=this.chart.scales[xt].getPixelForValue(lt)}I=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?At="top":l==="end"&&(At="bottom"));const Wt=this._getLabelSizes();for(_=0,w=a.length;_<w;++_){C=a[_],S=C.label;const xt=o.setContext(this.getContext(_));$=this.getPixelForTick(_)+o.labelOffset,X=this._resolveTickFontOptions(_),nt=X.lineHeight,rt=Lt(S)?S.length:1;const lt=rt/2,it=xt.color,ut=xt.textStrokeColor,Tt=xt.textStrokeWidth;let re=I;r?(M=$,I==="inner"&&(_===w-1?re=this.options.reverse?"left":"right":_===0?re=this.options.reverse?"right":"left":re="center"),i==="top"?c==="near"||g!==0?dt=-rt*nt+nt/2:c==="center"?dt=-Wt.highest.height/2-lt*nt+nt:dt=-Wt.highest.height+nt/2:c==="near"||g!==0?dt=nt/2:c==="center"?dt=Wt.highest.height/2-lt*nt:dt=Wt.highest.height-rt*nt,h&&(dt*=-1),g!==0&&!xt.showLabelBackdrop&&(M+=nt/2*Math.sin(g))):(F=$,dt=(1-rt)*nt/2);let ae;if(xt.showLabelBackdrop){const Bt=oe(xt.backdropPadding),Oe=Wt.heights[_],ue=Wt.widths[_];let qe=dt-Bt.top,zt=0-Bt.left;switch(At){case"middle":qe-=Oe/2;break;case"bottom":qe-=Oe;break}switch(I){case"center":zt-=ue/2;break;case"right":zt-=ue;break;case"inner":_===w-1?zt-=ue:_>0&&(zt-=ue/2);break}ae={left:zt,top:qe,width:ue+Bt.width,height:Oe+Bt.height,color:xt.backdropColor}}b.push({label:S,font:X,textOffset:dt,options:{rotation:g,color:it,strokeColor:ut,strokeWidth:Tt,textAlign:re,textBaseline:At,translation:[M,F],backdrop:ae}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ne(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return s==="left"?i?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?i?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Js(t,this.left,r)-r/2,u=Js(t,this.right,a)+a/2,h=f=l):(h=Js(t,this.top,r)-r/2,f=Js(t,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Sr(n,i);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;un(n,c,0,u,l,a)}i&&Cr(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=qt(n.font),r=oe(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||yt(s)?(l+=r.bottom,Lt(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=H1(this,l,s,a);un(t,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:z1(a,s,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=ht(t.grid&&t.grid.z,-1),i=ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==pn.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return qt(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class go{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;K1(s)&&(n=this.register(s));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,W1(t,r,n),this.override&&Ut.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in Ut[i]&&(delete Ut[i][n],this.override&&delete dn[n])}}function W1(e,t,s){const n=Fi(Object.create(null),[s?Ut.get(s):{},Ut.get(t),e.defaults]);Ut.set(t,n),e.defaultRoutes&&q1(t,e.defaultRoutes),e.descriptors&&Ut.describe(t,e.descriptors)}function q1(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),o=[e].concat(n).join("."),r=t[s].split("."),a=r.pop(),l=r.join(".");Ut.route(o,i,l,a)})}function K1(e){return"id"in e&&"defaults"in e}class G1{constructor(){this.controllers=new go(Be,"datasets",!0),this.elements=new go(Ss,"elements"),this.plugins=new go(Object,"plugins"),this.scales=new go(pn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(t,o,i):Mt(i,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,s,n){const i=_l(t);It(n["before"+i],[],n),s[t](n),It(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Qe=new G1;class Y1{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,s,n);return s==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,s,n,i){i=i||{};for(const o of t){const r=o.plugin,a=r[n],l=[s,i,o.options];if(It(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){gt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=ht(n.options&&n.options.plugins,{}),o=J1(n);return i===!1&&!s?[]:Q1(t,o,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function J1(e){const t={},s=[],n=Object.keys(Qe.plugins.items);for(let o=0;o<n.length;o++)s.push(Qe.getPlugin(n[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),t[r.id]=!0)}return{plugins:s,localIds:t}}function X1(e,t){return!t&&e===!1?null:e===!0?{}:e}function Q1(e,{plugins:t,localIds:s},n,i){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=X1(n[l],i);c!==null&&o.push({plugin:a,options:Z1(e.config,{plugin:a,local:s[l]},c,r)})}return o}function Z1(e,{plugin:t,local:s},n,i){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return s&&t.defaults&&r.push(t.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ia(e,t){const s=Ut.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function tk(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function ek(e,t){return e===t?"_index_":"_value_"}function Dd(e){if(e==="x"||e==="y"||e==="r")return e}function sk(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ra(e,...t){if(Dd(e))return e;for(const s of t){const n=s.axis||sk(s.position)||e.length>1&&Dd(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Id(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function nk(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Id(e,"x",s[0])||Id(e,"y",s[0])}return{}}function ik(e,t){const s=dn[e.type]||{scales:{}},n=t.scales||{},i=Ia(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!yt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Ra(r,a,nk(r,e),Ut.scales[a.type]),c=ek(l,i),u=s.scales||{};o[r]=_i(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||Ia(a,t),u=(dn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=tk(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),_i(o[p],[{axis:f},n[p],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];_i(a,[Ut.scales[a.type],Ut.scale])}),o}function qf(e){const t=e.options||(e.options={});t.plugins=ht(t.plugins,{}),t.scales=ik(e,t)}function Kf(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ok(e){return e=e||{},e.data=Kf(e.data),qf(e),e}const Rd=new Map,Gf=new Set;function bo(e,t){let s=Rd.get(e);return s||(s=t(),Rd.set(e,s),Gf.add(s)),s}const ei=(e,t,s)=>{const n=Bs(t,s);n!==void 0&&e.add(n)};class rk{constructor(t){this._config=ok(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Kf(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qf(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return bo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return bo(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return bo(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return bo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{t&&(l.add(t),u.forEach(h=>ei(l,t,h))),u.forEach(h=>ei(l,i,h)),u.forEach(h=>ei(l,dn[o]||{},h)),u.forEach(h=>ei(l,Ut,h)),u.forEach(h=>ei(l,Oa,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Gf.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,dn[s]||{},Ut.datasets[s]||{},{type:s},Ut,Oa]}resolveNamedOptions(t,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ld(this._resolverCache,t,i);let l=r;if(lk(r,s)){o.$shared=!1,n=Vs(n)?n():n;const c=this.createResolver(t,n,a);l=$n(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(t,s,n=[""],i){const{resolver:o}=Ld(this._resolverCache,t,n);return yt(s)?$n(o,s,void 0,i):o}}function Ld(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let o=n.get(i);return o||(o={resolver:Ml(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const ak=e=>yt(e)&&Object.getOwnPropertyNames(e).some(t=>Vs(e[t]));function lk(e,t){const{isScriptable:s,isIndexable:n}=Mf(e);for(const i of t){const o=s(i),r=n(i),a=(r||o)&&e[i];if(o&&(Vs(a)||ak(a))||r&&Lt(a))return!0}return!1}var ck="4.4.9";const dk=["top","bottom","left","right","chartArea"];function Fd(e,t){return e==="top"||e==="bottom"||dk.indexOf(e)===-1&&t==="x"}function jd(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Nd(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),It(s&&s.onComplete,[e],t)}function uk(e){const t=e.chart,s=t.options.animation;It(s&&s.onProgress,[e],t)}function Yf(e){return Tl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ro={},Ud=e=>{const t=Yf(e);return Object.values(Ro).filter(s=>s.canvas===t).pop()};function hk(e,t,s){const n=Object.keys(e);for(const i of n){const o=+i;if(o>=t){const r=e[i];delete e[i],(s>0||o>t)&&(e[o+s]=r)}}}function fk(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class ts{static register(...t){Qe.add(...t),$d()}static unregister(...t){Qe.remove(...t),$d()}constructor(t,s){const n=this.config=new rk(s),i=Yf(t),o=Ud(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||E1(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=pv(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Y1,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ev(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Ro[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ls.listen(this,"complete",Nd),ls.listen(this,"progress",uk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return gt(t)?s&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Qe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ld(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return od(this.canvas,this.ctx),this}stop(){return ls.stop(this),this}resize(t,s){ls.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ld(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),It(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Mt(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=Ra(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Mt(o,r=>{const a=r.options,l=a.id,c=Ra(l,a),u=ht(a.type,r.dtype);(a.position===void 0||Fd(a.position,c)!==Fd(r.dposition))&&(a.position=r.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const f=Qe.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,t)}),Mt(i,(r,a)=>{r||delete n[a]}),Mt(n,r=>{se.configure(this,r,r.options),se.addBox(this,r)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort(jd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Ia(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Qe.getController(a),{datasetElementType:c,dataElementType:u}=Ut.datasets[a];Object.assign(l,{dataElementType:Qe.getElement(u),datasetElementType:c&&Qe.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Mt(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Mt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Mt(this.scales,t=>{se.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Jc(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;hk(t,i,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!Jc(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;se.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Mt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Vs(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ls.has(this)?this.attached&&!ls.running(this)&&ls.start(this):(this.draw(),Nd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=jf(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Sr(s,i),t.controller.draw(),i&&Cr(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return bs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const o=d1.modes[s];return typeof o=="function"?o(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);ji(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),ls.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),od(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Ro[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),t[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Mt(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Mt(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},Mt(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Go(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(s,t),a=n?t:o(t,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(t,i,n,r),l=_v(t),c=fk(t,this._lastEvent,n,l);n&&(this._lastEvent=null,It(o.onHover,[t,a,this],this),l&&It(o.onClick,[t,a,this],this));const u=!Go(a,i);return(u||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,u}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}B(ts,"defaults",Ut),B(ts,"instances",Ro),B(ts,"overrides",dn),B(ts,"registry",Qe),B(ts,"version",ck),B(ts,"getChart",Ud);function $d(){return Mt(ts.instances,e=>e._plugins.invalidate())}function pk(e,t,s){const{startAngle:n,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,r,a,n-c,s+c),l>i?(c=i/l,e.arc(o,r,l,s+c,n-c,!0)):e.arc(o,r,i,s+Vt,n-Vt),e.closePath(),e.clip()}function mk(e){return Cl(e,["outerStart","outerEnd","innerStart","innerEnd"])}function gk(e,t,s,n){const i=mk(e.options.borderRadius),o=(s-t)/2,r=Math.min(o,n*t/2),a=l=>{const c=(s-Math.min(o,l))*n/2;return Gt(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Gt(i.innerStart,0,r),innerEnd:Gt(i.innerEnd,0,r)}}function _n(e,t,s,n){return{x:s+e*Math.cos(t),y:n+e*Math.sin(t)}}function tr(e,t,s,n,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+n+s-c,0),f=u>0?u+n+s+c:0;let p=0;const m=i-l;if(n){const xt=u>0?u-n:0,lt=h>0?h-n:0,it=(xt+lt)/2,ut=it!==0?m*it/(it+n):m;p=(m-ut)/2}const g=Math.max(.001,m*h-s/jt)/h,b=(m-g)/2,_=l+b+p,w=i-b-p,{outerStart:C,outerEnd:S,innerStart:M,innerEnd:F}=gk(t,f,h,w-_),I=h-C,$=h-S,X=_+C/I,nt=w-S/$,rt=f+M,dt=f+F,At=_+M/rt,Wt=w-F/dt;if(e.beginPath(),o){const xt=(X+nt)/2;if(e.arc(r,a,h,X,xt),e.arc(r,a,h,xt,nt),S>0){const Tt=_n($,nt,r,a);e.arc(Tt.x,Tt.y,S,nt,w+Vt)}const lt=_n(dt,w,r,a);if(e.lineTo(lt.x,lt.y),F>0){const Tt=_n(dt,Wt,r,a);e.arc(Tt.x,Tt.y,F,w+Vt,Wt+Math.PI)}const it=(w-F/f+(_+M/f))/2;if(e.arc(r,a,f,w-F/f,it,!0),e.arc(r,a,f,it,_+M/f,!0),M>0){const Tt=_n(rt,At,r,a);e.arc(Tt.x,Tt.y,M,At+Math.PI,_-Vt)}const ut=_n(I,_,r,a);if(e.lineTo(ut.x,ut.y),C>0){const Tt=_n(I,X,r,a);e.arc(Tt.x,Tt.y,C,_-Vt,X)}}else{e.moveTo(r,a);const xt=Math.cos(X)*h+r,lt=Math.sin(X)*h+a;e.lineTo(xt,lt);const it=Math.cos(nt)*h+r,ut=Math.sin(nt)*h+a;e.lineTo(it,ut)}e.closePath()}function bk(e,t,s,n,i){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){tr(e,t,s,n,l,i);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%Ft||Ft))}return tr(e,t,s,n,l,i),e.fill(),l}function yk(e,t,s,n,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(o){tr(e,t,s,n,m,i);for(let g=0;g<o;++g)e.stroke();isNaN(a)||(m=r+(a%Ft||Ft))}p&&pk(e,t,m),o||(tr(e,t,s,n,m,i),e.stroke())}class ai extends Ss{constructor(s){super();B(this,"circumference");B(this,"endAngle");B(this,"fullCircles");B(this,"innerRadius");B(this,"outerRadius");B(this,"pixelMargin");B(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.getProps(["x","y"],i),{angle:r,distance:a}=gf(o,{x:s,y:n}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=ht(f,c-l),g=Ni(r,l,c)&&l!==c,b=m>=Ft||g,_=ms(a,u+p,h+p);return b&&_}getCenterPoint(s){const{x:n,y:i,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:u}=this.options,h=(o+r)/2,f=(a+l+u+c)/2;return{x:n+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:i}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Ft?Math.floor(i/Ft):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(jt,i||0)),u=o*c;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,bk(s,this,u,r,a),yk(s,this,u,r,a),s.restore()}}B(ai,"id","arc"),B(ai,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),B(ai,"defaultRoutes",{backgroundColor:"backgroundColor"}),B(ai,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function Jf(e,t,s=t){e.lineCap=ht(s.borderCapStyle,t.borderCapStyle),e.setLineDash(ht(s.borderDash,t.borderDash)),e.lineDashOffset=ht(s.borderDashOffset,t.borderDashOffset),e.lineJoin=ht(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ht(s.borderWidth,t.borderWidth),e.strokeStyle=ht(s.borderColor,t.borderColor)}function xk(e,t,s){e.lineTo(s.x,s.y)}function _k(e){return e.stepped?zv:e.tension||e.cubicInterpolationMode==="monotone"?Hv:xk}function Xf(e,t,s={}){const n=e.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=t,l=Math.max(i,r),c=Math.min(o,a),u=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function vk(e,t,s,n){const{points:i,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Xf(i,s,n),u=_k(o);let{move:h=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%r],!m.skip&&(h?(e.moveTo(m.x,m.y),h=!1):u(e,g,m,f,o.stepped),g=m);return l&&(m=i[(a+(f?c:0))%r],u(e,g,m,f,o.stepped)),!!l}function wk(e,t,s,n){const i=t.points,{count:o,start:r,ilen:a}=Xf(i,s,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,f,p,m,g,b,_;const w=S=>(r+(c?a-S:S))%o,C=()=>{g!==b&&(e.lineTo(u,b),e.lineTo(u,g),e.lineTo(u,_))};for(l&&(p=i[w(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[w(f)],p.skip)continue;const S=p.x,M=p.y,F=S|0;F===m?(M<g?g=M:M>b&&(b=M),u=(h*u+S)/++h):(C(),e.lineTo(S,M),m=F,h=0,g=b=M),_=M}C()}function La(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?wk:vk}function kk(e){return e.stepped?ww:e.tension||e.cubicInterpolationMode==="monotone"?kw:sn}function Sk(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),Jf(e,t.options),e.stroke(i)}function Ck(e,t,s,n){const{segments:i,options:o}=t,r=La(t);for(const a of i)Jf(e,o,a.style),e.beginPath(),r(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const Mk=typeof Path2D=="function";function Ak(e,t,s,n){Mk&&!t.options.segment?Sk(e,t,s,n):Ck(e,t,s,n)}class Fs extends Ss{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;pw(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Tw(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],o=this.points,r=Ff(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=kk(n);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:f}=r[c],p=o[h],m=o[f];if(p===m){a.push(p);continue}const g=Math.abs((i-p[s])/(m[s]-p[s])),b=l(p,m,g,n.stepped);b[s]=t[s],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,s,n){return La(this)(t,this,s,n)}path(t,s,n){const i=this.segments,o=La(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(t,this,a,{start:s,end:s+n-1});return!!r}draw(t,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Ak(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}B(Fs,"id","line"),B(Fs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),B(Fs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),B(Fs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Bd(e,t,s,n){const i=e.options,{[s]:o}=e.getProps([s],n);return Math.abs(t-o)<i.radius+i.hitRadius}class Lo extends Ss{constructor(s){super();B(this,"parsed");B(this,"skip");B(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],i);return Math.pow(s-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,n){return Bd(this,s,"x",n)}inYRange(s,n){return Bd(this,s,"y",n)}getCenterPoint(s){const{x:n,y:i}=this.getProps(["x","y"],s);return{x:n,y:i}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const i=n&&s.borderWidth||0;return(n+i)*2}draw(s,n){const i=this.options;this.skip||i.radius<.1||!bs(this,n,this.size(i)/2)||(s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.fillStyle=i.backgroundColor,Ea(s,i,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}B(Lo,"id","point"),B(Lo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),B(Lo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Qf(e,t){const{x:s,y:n,base:i,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-h,u=n+h):(h=o/2,a=s-h,l=s+h,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function js(e,t,s,n){return e?0:Gt(t,s,n)}function Pk(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,o=Cf(n);return{t:js(i.top,o.top,0,s),r:js(i.right,o.right,0,t),b:js(i.bottom,o.bottom,0,s),l:js(i.left,o.left,0,t)}}function Tk(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=an(i),r=Math.min(t,s),a=e.borderSkipped,l=n||yt(i);return{topLeft:js(!l||a.top||a.left,o.topLeft,0,r),topRight:js(!l||a.top||a.right,o.topRight,0,r),bottomLeft:js(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:js(!l||a.bottom||a.right,o.bottomRight,0,r)}}function Ok(e){const t=Qf(e),s=t.right-t.left,n=t.bottom-t.top,i=Pk(e,s/2,n/2),o=Tk(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ia(e,t,s,n){const i=t===null,o=s===null,a=e&&!(i&&o)&&Qf(e,n);return a&&(i||ms(t,a.left,a.right))&&(o||ms(s,a.top,a.bottom))}function Ek(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Dk(e,t){e.rect(t.x,t.y,t.w,t.h)}function oa(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,o=(e.x+e.w!==s.x+s.w?t:0)-n,r=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+o,h:e.h+r,radius:e.radius}}class Fo extends Ss{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=Ok(this),a=Ek(r.radius)?Ui:Dk;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,oa(r,s,o)),t.clip(),a(t,oa(o,-s,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,oa(o,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return ia(this,t,s,n)}inXRange(t,s){return ia(this,t,null,s)}inYRange(t,s){return ia(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}B(Fo,"id","bar"),B(Fo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B(Fo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ik=Object.freeze({__proto__:null,ArcElement:ai,BarElement:Fo,LineElement:Fs,PointElement:Lo});const Fa=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Vd=Fa.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function Zf(e){return Fa[e%Fa.length]}function tp(e){return Vd[e%Vd.length]}function Rk(e,t){return e.borderColor=Zf(t),e.backgroundColor=tp(t),++t}function Lk(e,t){return e.backgroundColor=e.data.map(()=>Zf(t++)),t}function Fk(e,t){return e.backgroundColor=e.data.map(()=>tp(t++)),t}function jk(e){let t=0;return(s,n)=>{const i=e.getDatasetMeta(n).controller;i instanceof on?t=Lk(s,t):i instanceof Si?t=Fk(s,t):i&&(t=Rk(s,t))}}function zd(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Nk(e){return e&&(e.borderColor||e.backgroundColor)}function Uk(){return Ut.borderColor!=="rgba(0,0,0,0.1)"||Ut.backgroundColor!=="rgba(0,0,0,0.1)"}var $k={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=e.config,{elements:o}=i,r=zd(n)||Nk(i)||o&&zd(o)||Uk();if(!s.forceOverride&&r)return;const a=jk(e);n.forEach(a)}};function Bk(e,t,s,n,i){const o=i.samples||n;if(o>=s)return e.slice(t,t+s);const r=[],a=(s-2)/(o-2);let l=0;const c=t+s-1;let u=t,h,f,p,m,g;for(r[l++]=e[u],h=0;h<o-2;h++){let b=0,_=0,w;const C=Math.floor((h+1)*a)+1+t,S=Math.min(Math.floor((h+2)*a)+1,s)+t,M=S-C;for(w=C;w<S;w++)b+=e[w].x,_+=e[w].y;b/=M,_/=M;const F=Math.floor(h*a)+1+t,I=Math.min(Math.floor((h+1)*a)+1,s)+t,{x:$,y:X}=e[u];for(p=m=-1,w=F;w<I;w++)m=.5*Math.abs(($-b)*(e[w].y-X)-($-e[w].x)*(_-X)),m>p&&(p=m,f=e[w],g=w);r[l++]=f,u=g}return r[l++]=e[c],r}function Vk(e,t,s,n){let i=0,o=0,r,a,l,c,u,h,f,p,m,g;const b=[],_=t+s-1,w=e[t].x,S=e[_].x-w;for(r=t;r<t+s;++r){a=e[r],l=(a.x-w)/S*n,c=a.y;const M=l|0;if(M===u)c<m?(m=c,h=r):c>g&&(g=c,f=r),i=(o*i+a.x)/++o;else{const F=r-1;if(!gt(h)&&!gt(f)){const I=Math.min(h,f),$=Math.max(h,f);I!==p&&I!==F&&b.push({...e[I],x:i}),$!==p&&$!==F&&b.push({...e[$],x:i})}r>0&&F!==p&&b.push(e[F]),b.push(a),u=M,o=0,m=g=c,h=f=p=r}}return b}function ep(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Hd(e){e.data.datasets.forEach(t=>{ep(t)})}function zk(e,t){const s=t.length;let n=0,i;const{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Gt(gs(t,o.axis,r).lo,0,s-1)),c?i=Gt(gs(t,o.axis,a).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var Hk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,s)=>{if(!s.enabled){Hd(e);return}const n=e.width;e.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=e.getDatasetMeta(o),c=r||i.data;if(oi([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:f}=zk(l,c);const p=s.threshold||4*n;if(f<=p){ep(i);return}gt(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(s.algorithm){case"lttb":m=Bk(c,h,f,n,s);break;case"min-max":m=Vk(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=m})},destroy(e){Hd(e)}};function Wk(e,t,s){const n=e.segments,i=e.points,o=t.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Dl(l,c,i);const u=ja(s,i[l],i[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=Ff(t,u);for(const f of h){const p=ja(s,o[f.start],o[f.end],f.loop),m=Lf(a,i,p);for(const g of m)r.push({source:g,target:f,start:{[s]:Wd(u,p,"start",Math.max)},end:{[s]:Wd(u,p,"end",Math.min)}})}}return r}function ja(e,t,s,n){if(n)return;let i=t[e],o=s[e];return e==="angle"&&(i=Ce(i),o=Ce(o)),{property:e,start:i,end:o}}function qk(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=Dl(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function Dl(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Wd(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function sp(e,t){let s=[],n=!1;return Lt(e)?(n=!0,s=e):s=qk(e,t),s.length?new Fs({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function qd(e){return e&&e.fill!==!1}function Kk(e,t,s){let i=e[t].fill;const o=[t];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!$t(i))return i;if(r=e[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function Gk(e,t,s){const n=Qk(e);if(yt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return $t(i)&&Math.floor(i)===i?Yk(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Yk(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function Jk(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:yt(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function Xk(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:yt(e)?n=e.value:n=t.getBaseValue(),n}function Qk(e){const t=e.options,s=t.fill;let n=ht(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Zk(e){const{scale:t,index:s,line:n}=e,i=[],o=n.segments,r=n.points,a=t2(t,s);a.push(sp({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let u=c.start;u<=c.end;u++)e2(i,r[u],a)}return new Fs({points:i,options:{}})}function t2(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===t)break;o.hidden||s.unshift(o.dataset)}return s}function e2(e,t,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=s2(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function s2(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const u=o[c],h=r[u.start][s],f=r[u.end][s];if(ms(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:n}}class np{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Ft},t.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,o=t.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function n2(e){const{chart:t,fill:s,line:n}=e;if($t(s))return i2(t,s);if(s==="stack")return Zk(e);if(s==="shape")return!0;const i=o2(e);return i instanceof np?i:sp(i,n)}function i2(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function o2(e){return(e.scale||{}).getPointPositionForValue?a2(e):r2(e)}function r2(e){const{scale:t={},fill:s}=e,n=Jk(s,t);if($t(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function a2(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,o=n.reverse?t.max:t.min,r=Xk(s,t,o),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,o);return new np({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,r));return a}function ra(e,t,s){const n=n2(t),{chart:i,index:o,line:r,scale:a,axis:l}=t,c=r.options,u=c.fill,h=c.backgroundColor,{above:f=h,below:p=h}=u||{},m=i.getDatasetMeta(o),g=jf(i,m);n&&r.points.length&&(Sr(e,s),l2(e,{line:r,target:n,above:f,below:p,area:s,scale:a,axis:l,clip:g}),Cr(e))}function l2(e,t){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save(),c==="x"&&o!==i&&(Kd(e,n,r.top),Gd(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Kd(e,n,r.bottom)),Gd(e,{line:s,target:n,color:o,scale:a,property:c,clip:l}),e.restore()}function Kd(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],h=i[Dl(l,c,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,s),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(h.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Gd(e,t){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=t,l=Wk(s,n,i);for(const{source:c,target:u,start:h,end:f}of l){const{style:{backgroundColor:p=o}={}}=c,m=n!==!0;e.save(),e.fillStyle=p,c2(e,r,a,m&&ja(i,h,f)),e.beginPath();const g=!!s.pathSegment(e,c);let b;if(m){g?e.closePath():Yd(e,n,f,i);const _=!!n.pathSegment(e,u,{move:g,reverse:!0});b=g&&_,b||Yd(e,n,h,i)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function c2(e,t,s,n){const i=t.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,u,h;o==="x"?(l=r,c=i.top,u=a,h=i.bottom):(l=i.left,c=r,u=i.right,h=a),e.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),c=Math.max(c,s.top),h=Math.min(h,s.bottom)),e.rect(l,c,u-l,h-c),e.clip()}}function Yd(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var d2={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Fs&&(l={visible:e.isDatasetVisible(r),index:r,fill:Gk(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=Kk(i,r,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&ra(e.ctx,a,o))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;qd(o)&&ra(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!qd(n)||s.drawTime!=="beforeDatasetDraw"||ra(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Jd=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},u2=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Xd extends Ss{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=It(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=qt(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Jd(n,o);let c,u;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=t;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,g)=>{const b=n+s/2+o.measureText(m.text).width;(g===0||c[c.length-1]+b+2*a>r)&&(h+=u,c[c.length-(g>0?0:1)]=0,p+=u,f++),l[g]={left:0,top:p,row:f,width:b,height:i},c[c.length-1]+=b+a}),h}_fitCols(t,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let h=a,f=0,p=0,m=0,g=0;return this.legendItems.forEach((b,_)=>{const{itemWidth:w,itemHeight:C}=h2(n,s,o,b,i);_>0&&p+C+2*a>u&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,g++,f=p=0),l[_]={left:m,top:p,col:g,width:w,height:C},f=Math.max(f,w),p+=C+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=Dn(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Zt(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=Zt(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=Zt(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=Zt(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Sr(t,this),this._draw(),Cr(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,a=Ut.color,l=Dn(t.rtl,this.left,this.width),c=qt(r.font),{padding:u}=r,h=c.size,f=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=Jd(r,h),_=function(F,I,$){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const X=ht($.lineWidth,1);if(i.fillStyle=ht($.fillStyle,a),i.lineCap=ht($.lineCap,"butt"),i.lineDashOffset=ht($.lineDashOffset,0),i.lineJoin=ht($.lineJoin,"miter"),i.lineWidth=X,i.strokeStyle=ht($.strokeStyle,a),i.setLineDash(ht($.lineDash,[])),r.usePointStyle){const nt={radius:g*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:X},rt=l.xPlus(F,m/2),dt=I+f;Sf(i,nt,rt,dt,r.pointStyleWidth&&m)}else{const nt=I+Math.max((h-g)/2,0),rt=l.leftForLtr(F,m),dt=an($.borderRadius);i.beginPath(),Object.values(dt).some(At=>At!==0)?Ui(i,{x:rt,y:nt,w:m,h:g,radius:dt}):i.rect(rt,nt,m,g),i.fill(),X!==0&&i.stroke()}i.restore()},w=function(F,I,$){un(i,$.text,F,I+b/2,c,{strikethrough:$.hidden,textAlign:l.textAlign($.textAlign)})},C=this.isHorizontal(),S=this._computeTitleHeight();C?p={x:Zt(o,this.left+u,this.right-n[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:Zt(o,this.top+S+u,this.bottom-s[0].height),line:0},Df(this.ctx,t.textDirection);const M=b+u;this.legendItems.forEach((F,I)=>{i.strokeStyle=F.fontColor,i.fillStyle=F.fontColor;const $=i.measureText(F.text).width,X=l.textAlign(F.textAlign||(F.textAlign=r.textAlign)),nt=m+f+$;let rt=p.x,dt=p.y;l.setWidth(this.width),C?I>0&&rt+nt+u>this.right&&(dt=p.y+=M,p.line++,rt=p.x=Zt(o,this.left+u,this.right-n[p.line])):I>0&&dt+M>this.bottom&&(rt=p.x=rt+s[p.line].width+u,p.line++,dt=p.y=Zt(o,this.top+S+u,this.bottom-s[p.line].height));const At=l.x(rt);if(_(At,dt,F),rt=Dv(X,rt+m+f,C?rt+nt:this.right,t.rtl),w(l.x(rt),dt,F),C)p.x+=nt+u;else if(typeof F.text!="string"){const Wt=c.lineHeight;p.y+=ip(F,Wt)+u}else p.y+=M}),If(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=qt(s.font),i=oe(s.padding);if(!s.display)return;const o=Dn(t.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Zt(t.align,h,this.right-f);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);u=c+Zt(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=Zt(a,h,h+f);r.textAlign=o.textAlign(kl(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,un(r,s.text,p,u,n)}_computeTitleHeight(){const t=this.options.title,s=qt(t.font),n=oe(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,o;if(ms(t,this.left,this.right)&&ms(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],ms(t,i.left,i.left+i.width)&&ms(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!m2(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,o=u2(i,n);i&&!o&&It(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!o&&It(s.onHover,[t,n,this],this)}else n&&It(s.onClick,[t,n,this],this)}}function h2(e,t,s,n,i){const o=f2(n,e,t,s),r=p2(i,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function f2(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),t+s.size/2+n.measureText(i).width}function p2(e,t,s){let n=e;return typeof t.text!="string"&&(n=ip(t,s)),n}function ip(e,t){const s=e.text?e.text.length:0;return t*s}function m2(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var g2={id:"legend",_element:Xd,start(e,t,s){const n=e.legend=new Xd({ctx:e.ctx,options:s,chart:e});se.configure(e,n,s),se.addBox(e,n)},stop(e){se.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;se.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=oe(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Il extends Ss{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=s;const i=Lt(n.text)?n.text.length:1;this._padding=oe(n.padding);const o=i*qt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:s,left:n,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Zt(a,n,o),h=s+t,c=o-n):(r.position==="left"?(u=n+t,h=Zt(a,i,s),l=jt*-.5):(u=o-t,h=Zt(a,s,i),l=jt*.5),c=i-s),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,s=this.options;if(!s.display)return;const n=qt(s.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);un(t,s.text,0,0,n,{color:s.color,maxWidth:l,rotation:c,textAlign:kl(s.align),textBaseline:"middle",translation:[r,a]})}}function b2(e,t){const s=new Il({ctx:e.ctx,options:t,chart:e});se.configure(e,s,t),se.addBox(e,s),e.titleBlock=s}var y2={id:"title",_element:Il,start(e,t,s){b2(e,s)},stop(e){const t=e.titleBlock;se.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const n=e.titleBlock;se.configure(e,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const yo=new WeakMap;var x2={id:"subtitle",start(e,t,s){const n=new Il({ctx:e.ctx,options:s,chart:e});se.configure(e,n,s),se.addBox(e,n),yo.set(e,n)},stop(e){se.removeBox(e,yo.get(e)),yo.delete(e)},beforeUpdate(e,t,s){const n=yo.get(e);se.configure(e,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const li={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,o=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Ta(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Je(e,t){return t&&(Lt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function _2(e,t){const{element:s,datasetIndex:n,index:i}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:e,label:r,parsed:o.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function Qd(e,t){const s=e.chart.ctx,{body:n,footer:i,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=qt(t.bodyFont),c=qt(t.titleFont),u=qt(t.footerFont),h=o.length,f=i.length,p=n.length,m=oe(t.padding);let g=m.height,b=0,_=n.reduce((S,M)=>S+M.before.length+M.lines.length+M.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),_){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*S+(_-p)*l.lineHeight+(_-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let w=0;const C=function(S){b=Math.max(b,s.measureText(S).width+w)};return s.save(),s.font=c.string,Mt(e.title,C),s.font=l.string,Mt(e.beforeBody.concat(e.afterBody),C),w=t.displayColors?r+2+t.boxPadding:0,Mt(n,S=>{Mt(S.before,C),Mt(S.lines,C),Mt(S.after,C)}),w=0,s.font=u.string,Mt(e.footer,C),s.restore(),b+=m.width,{width:b,height:g}}function v2(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function w2(e,t,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(e==="left"&&i+o+r>t.width||e==="right"&&i-o-r<0)return!0}function k2(e,t,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),w2(c,e,t,s)&&(c="center"),c}function Zd(e,t,s){const n=s.yAlign||t.yAlign||v2(e,s);return{xAlign:s.xAlign||t.xAlign||k2(e,t,s,n),yAlign:n}}function S2(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function C2(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function tu(e,t,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=an(r);let m=S2(t,a);const g=C2(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+i:a==="right"&&(m+=Math.max(h,p)+i),{x:Gt(m,0,n.width-t.width),y:Gt(g,0,n.height-t.height)}}function xo(e,t,s){const n=oe(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function eu(e){return Je([],cs(e))}function M2(e,t,s){return Ws(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function su(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const op={beforeTitle:rs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:rs,beforeBody:rs,beforeLabel:rs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return gt(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:rs,afterBody:rs,beforeFooter:rs,footer:rs,afterFooter:rs};function fe(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?op[t].call(s,n):i}class Na extends Ss{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new Nf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=M2(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=fe(n,"beforeTitle",this,t),o=fe(n,"title",this,t),r=fe(n,"afterTitle",this,t);let a=[];return a=Je(a,cs(i)),a=Je(a,cs(o)),a=Je(a,cs(r)),a}getBeforeBody(t,s){return eu(fe(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return Mt(t,o=>{const r={before:[],lines:[],after:[]},a=su(n,o);Je(r.before,cs(fe(a,"beforeLabel",this,o))),Je(r.lines,fe(a,"label",this,o)),Je(r.after,cs(fe(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(t,s){return eu(fe(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=fe(n,"beforeFooter",this,t),o=fe(n,"footer",this,t),r=fe(n,"afterFooter",this,t);let a=[];return a=Je(a,cs(i)),a=Je(a,cs(o)),a=Je(a,cs(r)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(_2(this.chart,s[l]));return t.filter&&(a=a.filter((u,h,f)=>t.filter(u,h,f,n))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,n))),Mt(a,u=>{const h=su(t.callbacks,u);i.push(fe(h,"labelColor",this,u)),o.push(fe(h,"labelPointStyle",this,u)),r.push(fe(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=li[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=Qd(this,n),c=Object.assign({},a,l),u=Zd(this.chart,n,c),h=tu(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const o=this.getCaretPosition(t,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=an(a),{x:f,y:p}=t,{width:m,height:g}=s;let b,_,w,C,S,M;return o==="center"?(S=p+g/2,i==="left"?(b=f,_=b-r,C=S+r,M=S-r):(b=f+m,_=b+r,C=S-r,M=S+r),w=b):(i==="left"?_=f+Math.max(l,u)+r:i==="right"?_=f+m-Math.max(c,h)-r:_=this.caretX,o==="top"?(C=p,S=C-r,b=_-r,w=_+r):(C=p+g,S=C+r,b=_+r,w=_-r),M=C),{x1:b,x2:_,x3:w,y1:C,y2:S,y3:M}}drawTitle(t,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=Dn(n.rtl,this.x,this.width);for(t.x=xo(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=qt(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,u=qt(o.bodyFont),h=xo(this,"left",o),f=i.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=s.y+p;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,_=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ea(t,g,b,_),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ea(t,g,b,_)}else{t.lineWidth=yt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),_=an(r.borderRadius);Object.values(_).some(w=>w!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Ui(t,{x:g,y:m,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Ui(t,{x:b,y:m+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,m,c,l),t.strokeRect(g,m,c,l),t.fillStyle=r.backgroundColor,t.fillRect(b,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=qt(n.bodyFont);let f=h.lineHeight,p=0;const m=Dn(n.rtl,this.x,this.width),g=function($){s.fillText($,m.x(t.x+p),t.y+f/2),t.y+=f+o},b=m.textAlign(r);let _,w,C,S,M,F,I;for(s.textAlign=r,s.textBaseline="middle",s.font=h.string,t.x=xo(this,b,n),s.fillStyle=n.bodyColor,Mt(this.beforeBody,g),p=a&&b!=="right"?r==="center"?c/2+u:c+2+u:0,S=0,F=i.length;S<F;++S){for(_=i[S],w=this.labelTextColors[S],s.fillStyle=w,Mt(_.before,g),C=_.lines,a&&C.length&&(this._drawColorBox(s,t,S,m,n),f=Math.max(h.lineHeight,l)),M=0,I=C.length;M<I;++M)g(C[M]),f=h.lineHeight;Mt(_.after,g)}p=0,f=h.lineHeight,Mt(this.afterBody,g),t.y-=o}drawFooter(t,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=Dn(n.rtl,this.x,this.width);for(t.x=xo(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=qt(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=an(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+h,l),r==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-f,l),s.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+u-m),s.quadraticCurveTo(a+c,l+u,a+c-m,l+u),r==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+p,l+u),s.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=li[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Qd(this,t),l=Object.assign({},r,this._size),c=Zd(s,t,l),u=tu(t,l,c,s);(i._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=oe(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,s),Df(t,s.textDirection),o.y+=r.top,this.drawTitle(o,t,s),this.drawBody(o,t,s),this.drawFooter(o,t,s),If(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Go(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,s,n),a=this._positionChanged(r,t),l=s||!Go(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const o=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,s){const{caretX:n,caretY:i,options:o}=this,r=li[o.position].call(this,t,s);return r!==!1&&(n!==r.x||i!==r.y)}}B(Na,"positioners",li);var A2={id:"tooltip",_element:Na,positioners:li,afterInit(e,t,s){s&&(e.tooltip=new Na({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:op},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},P2=Object.freeze({__proto__:null,Colors:$k,Decimation:Hk,Filler:d2,Legend:g2,SubTitle:x2,Title:y2,Tooltip:A2});const T2=(e,t,s,n)=>(typeof t=="string"?(s=e.push(t)-1,n.unshift({index:s,label:t})):isNaN(t)&&(s=null),s);function O2(e,t,s,n){const i=e.indexOf(t);if(i===-1)return T2(e,t,s,n);const o=e.lastIndexOf(t);return i!==o?s:i}const E2=(e,t)=>e===null?null:Gt(Math.round(e),0,t);function nu(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Ua extends pn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:o}of s)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,s){if(gt(t))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===t?s:O2(n,t,ht(s,t),this._addedLabels),E2(s,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,s=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=t===0&&s===o.length-1?o:o.slice(t,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=s;r++)i.push({value:r});return i}getLabelForValue(t){return nu.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}B(Ua,"id","category"),B(Ua,"defaults",{ticks:{callback:nu}});function D2(e,t){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=e,p=o||1,m=u-1,{min:g,max:b}=t,_=!gt(r),w=!gt(a),C=!gt(c),S=(b-g)/(h+1);let M=Qc((b-g)/m/p)*p,F,I,$,X;if(M<1e-14&&!_&&!w)return[{value:g},{value:b}];X=Math.ceil(b/M)-Math.floor(g/M),X>m&&(M=Qc(X*M/m/p)*p),gt(l)||(F=Math.pow(10,l),M=Math.ceil(M*F)/F),i==="ticks"?(I=Math.floor(g/M)*M,$=Math.ceil(b/M)*M):(I=g,$=b),_&&w&&o&&Cv((a-r)/o,M/1e3)?(X=Math.round(Math.min((a-r)/M,u)),M=(a-r)/X,I=r,$=a):C?(I=_?r:I,$=w?a:$,X=c-1,M=($-I)/X):(X=($-I)/M,vi(X,Math.round(X),M/1e3)?X=Math.round(X):X=Math.ceil(X));const nt=Math.max(Zc(M),Zc(I));F=Math.pow(10,gt(l)?nt:l),I=Math.round(I*F)/F,$=Math.round($*F)/F;let rt=0;for(_&&(f&&I!==r?(s.push({value:r}),I<r&&rt++,vi(Math.round((I+rt*M)*F)/F,r,iu(r,S,e))&&rt++):I<r&&rt++);rt<X;++rt){const dt=Math.round((I+rt*M)*F)/F;if(w&&dt>a)break;s.push({value:dt})}return w&&f&&$!==a?s.length&&vi(s[s.length-1].value,a,iu(a,S,e))?s[s.length-1].value=a:s.push({value:a}):(!w||$===a)&&s.push({value:$}),s}function iu(e,t,{horizontal:s,minRotation:n}){const i=Ne(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class er extends pn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return gt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(t){const l=es(i),c=es(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(i-l)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=D2(i,o);return t.bounds==="ticks"&&mf(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return Xi(t,this.chart.options.locale,this.options.ticks.format)}}class $a extends er{determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=$t(t)?t:0,this.max=$t(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=Ne(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}B($a,"id","linear"),B($a,"defaults",{ticks:{callback:kr.formatters.numeric}});const Bi=e=>Math.floor(Ls(e)),Qs=(e,t)=>Math.pow(10,Bi(e)+t);function ou(e){return e/Math.pow(10,Bi(e))===1}function ru(e,t,s){const n=Math.pow(10,s),i=Math.floor(e/n);return Math.ceil(t/n)-i}function I2(e,t){const s=t-e;let n=Bi(s);for(;ru(e,t,n)>10;)n++;for(;ru(e,t,n)<10;)n--;return Math.min(n,Bi(e))}function R2(e,{min:t,max:s}){t=ke(e.min,t);const n=[],i=Bi(t);let o=I2(t,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((t-l)*r)/r,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,o)),f=ke(e.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<s;)n.push({value:f,major:ou(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;const p=ke(e.max,f);return n.push({value:p,major:ou(p),significand:h}),n}class Ba extends pn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,s){const n=er.prototype.parse.apply(this,[t,s]);if(n===0){this._zero=!0;return}return $t(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=$t(t)?Math.max(0,t):null,this.max=$t(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$t(this._userMin)&&(this.min=t===Qs(this.min,0)?Qs(this.min,-1):Qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const o=a=>n=t?n:a,r=a=>i=s?i:a;n===i&&(n<=0?(o(1),r(10)):(o(Qs(n,-1)),r(Qs(i,1)))),n<=0&&o(Qs(i,-1)),i<=0&&r(Qs(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,s={min:this._userMin,max:this._userMax},n=R2(s,this);return t.bounds==="ticks"&&mf(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Xi(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ls(t),this._valueRange=Ls(this.max)-Ls(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ls(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const s=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+s*this._valueRange)}}B(Ba,"id","logarithmic"),B(Ba,"defaults",{ticks:{callback:kr.formatters.logarithmic,major:{enabled:!0}}});function Va(e){const t=e.ticks;if(t.display&&e.display){const s=oe(t.backdropPadding);return ht(t.font&&t.font.size,Ut.font.size)+s.height}return 0}function L2(e,t,s){return s=Lt(s)?s:[s],{w:Vv(e,t.string,s),h:s.length*t.lineHeight}}function au(e,t,s,n,i){return e===n||e===i?{start:t-s/2,end:t+s/2}:e<n||e>i?{start:t-s,end:t}:{start:t,end:t+s}}function F2(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},s=Object.assign({},t),n=[],i=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?jt/o:0;for(let l=0;l<o;l++){const c=r.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),h=qt(c.font),f=L2(e.ctx,h,e._pointLabels[l]);n[l]=f;const p=Ce(e.getIndexAngle(l)+a),m=Math.round(vl(p)),g=au(m,u.x,f.w,0,180),b=au(m,u.y,f.h,90,270);j2(s,t,p,g,b)}e.setCenterPoint(t.l-s.l,s.r-t.r,t.t-s.t,s.b-t.b),e._pointLabelItems=$2(e,n,i)}function j2(e,t,s,n,i){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/r,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function N2(e,t,s){const n=e.drawingArea,{extra:i,additionalAngle:o,padding:r,size:a}=s,l=e.getPointPosition(t,n+i+r,o),c=Math.round(vl(Ce(l.angle+Vt))),u=z2(l.y,a.h,c),h=B2(c),f=V2(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function U2(e,t){if(!t)return!0;const{left:s,top:n,right:i,bottom:o}=e;return!(bs({x:s,y:n},t)||bs({x:s,y:o},t)||bs({x:i,y:n},t)||bs({x:i,y:o},t))}function $2(e,t,s){const n=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Va(o)/2,additionalAngle:r?jt/i:0};let c;for(let u=0;u<i;u++){l.padding=s[u],l.size=t[u];const h=N2(e,u,l);n.push(h),a==="auto"&&(h.visible=U2(h,c),h.visible&&(c=h))}return n}function B2(e){return e===0||e===180?"center":e<180?"left":"right"}function V2(e,t,s){return s==="right"?e-=t:s==="center"&&(e-=t/2),e}function z2(e,t,s){return s===90||s===270?e-=t/2:(s>270||s<90)&&(e-=t),e}function H2(e,t,s){const{left:n,top:i,right:o,bottom:r}=s,{backdropColor:a}=t;if(!gt(a)){const l=an(t.borderRadius),c=oe(t.backdropPadding);e.fillStyle=a;const u=n-c.left,h=i-c.top,f=o-n+c.width,p=r-i+c.height;Object.values(l).some(m=>m!==0)?(e.beginPath(),Ui(e,{x:u,y:h,w:f,h:p,radius:l}),e.fill()):e.fillRect(u,h,f,p)}}function W2(e,t){const{ctx:s,options:{pointLabels:n}}=e;for(let i=t-1;i>=0;i--){const o=e._pointLabelItems[i];if(!o.visible)continue;const r=n.setContext(e.getPointLabelContext(i));H2(s,r,o);const a=qt(r.font),{x:l,y:c,textAlign:u}=o;un(s,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:r.color,textAlign:u,textBaseline:"middle"})}}function rp(e,t,s,n){const{ctx:i}=e;if(s)i.arc(e.xCenter,e.yCenter,t,0,Ft);else{let o=e.getPointPosition(0,t);i.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),i.lineTo(o.x,o.y)}}function q2(e,t,s,n,i){const o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!n||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),rp(e,s,r,n),o.closePath(),o.stroke(),o.restore())}function K2(e,t,s){return Ws(e,{label:s,index:t,type:"pointLabel"})}class ci extends er{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=oe(Va(this.options)/2),s=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+s/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:t,max:s}=this.getMinMax(!1);this.min=$t(t)&&!isNaN(t)?t:0,this.max=$t(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Va(this.options))}generateTickLabels(t){er.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((s,n)=>{const i=It(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?F2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,s,n,i){this.xCenter+=Math.floor((t-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,s,n,i))}getIndexAngle(t){const s=Ft/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ce(t*s+Ne(n))}getDistanceFromCenterForValue(t){if(gt(t))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*s:(t-this.min)*s}getValueForDistanceFromCenter(t){if(gt(t))return NaN;const s=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(t){const s=this._pointLabels||[];if(t>=0&&t<s.length){const n=s[t];return K2(this.getContext(),t,n)}}getPointPosition(t,s,n=0){const i=this.getIndexAngle(t)-Vt+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(t,s){return this.getPointPosition(t,this.getDistanceFromCenterForValue(s))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:s,top:n,right:i,bottom:o}=this._pointLabelItems[t];return{left:s,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:s}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),rp(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,s=this.options,{angleLines:n,grid:i,border:o}=s,r=this._pointLabels.length;let a,l,c;if(s.pointLabels.display&&W2(this,r),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=i.setContext(f),m=o.setContext(f);q2(this,p,l,r,m)}}),n.display){for(t.save(),a=r-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!s.reverse)return;const c=n.setContext(this.getContext(l)),u=qt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=oe(c.backdropPadding);t.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}un(t,a.label,0,-o,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}B(ci,"id","radialLinear"),B(ci,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:kr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),B(ci,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),B(ci,"descriptors",{angleLines:{_fallback:"grid"}});const Ar={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ge=Object.keys(Ar);function lu(e,t){return e-t}function cu(e,t){if(gt(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),$t(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(Un(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function du(e,t,s,n){const i=ge.length;for(let o=ge.indexOf(e);o<i-1;++o){const r=Ar[ge[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-t)/(a*r.size))<=n)return ge[o]}return ge[i-1]}function G2(e,t,s,n,i){for(let o=ge.length-1;o>=ge.indexOf(s);o--){const r=ge[o];if(Ar[r].common&&e._adapter.diff(i,n,r)>=t-1)return r}return ge[s?ge.indexOf(s):0]}function Y2(e){for(let t=ge.indexOf(e)+1,s=ge.length;t<s;++t)if(Ar[ge[t]].common)return ge[t]}function uu(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=wl(s,t),o=s[n]>=t?s[n]:s[i];e[o]=!0}}function J2(e,t,s,n){const i=e._adapter,o=+i.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function hu(e,t,s){const n=[],i={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:J2(e,n,i,s)}class Vi extends pn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new o1._date(t.adapters.date);i.init(s),_i(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:cu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=$t(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=$t(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=Tv(i,o,r);return this._unit=s.unit||(n.autoSkip?du(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):G2(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Y2(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),hu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,o;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;s=Gt(s,0,r),n=Gt(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||du(o.minUnit,s,n,this._getLabelCapacity(s)),a=ht(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Un(l)||l===!0,u={};let h=s,f,p;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":r),t.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+t.add(f,a,r),p++)uu(u,f,m);return(f===n||i.bounds==="ticks"||p===1)&&uu(u,f,m),Object.keys(u).sort(lu).map(g=>+g)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return It(r,[t,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=n[s],p=c&&h&&f&&f.major;return this._adapter.format(t,i||(p?h:u))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=Ne(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(t,0,hu(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(cu(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return yf(t.sort(lu))}}B(Vi,"id","time"),B(Vi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function _o(e,t,s){let n=0,i=e.length-1,o,r,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=gs(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=gs(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[i]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class za extends Vi{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=_o(s,this.min),this._tableRange=_o(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)u=i[r+1],l=i[r-1],c=i[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(_o(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return _o(this._table,n*this._tableRange+this._minPos,!0)}}B(za,"id","timeseries"),B(za,"defaults",Vi.defaults);var X2=Object.freeze({__proto__:null,CategoryScale:Ua,LinearScale:$a,LogarithmicScale:Ba,RadialLinearScale:ci,TimeScale:Vi,TimeSeriesScale:za});const Q2=[i1,Ik,P2,X2];ts.register(...Q2);async function ap(){return await(await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")).json()}async function lp(e){return e?await(await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios?orderBy=nome`)).json():[]}const Z2={name:"Dashboard",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs,WeekView:lf,AppointmentDetails:cf},data(){return{userId:null,stats:{week:0,month:0,clients:0,newClients:0},upcomingAppointments:[],clients:[],services:[],rooms:[],topClients:[],sidebarOpen:window.innerWidth>=768,showClientModal:!1,showAppointmentModal:!1,editingId:null,showDetailsModal:!1,weekChart:null,weekCounts:[0,0,0,0,0,0,0],states:[],cities:[],clientForm:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},appointmentForm:{date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},selectedAppointment:null}},methods:{phoneMask:wr,cpfMask:rf,cepMask:af,async fetchStatesList(){this.states=await ap()},async fetchCitiesList(){this.cities=await lp(this.clientForm.stateId)},async openClientModal(){await this.fetchStatesList(),this.clientForm.stateId&&await this.fetchCitiesList(),this.showClientModal=!0},async fetchStats(){const e=new Date,t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-t),s.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()+(6-t)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],r=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);a.setHours(23,59,59,999);const l=r.toISOString().split("T")[0],c=a.toISOString().split("T")[0],{data:u}=await U.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o);this.stats.week=u?u.length:0;const h=[0,0,0,0,0,0,0];u&&u.forEach(m=>{const g=new Date(m.date);h[g.getDay()]++}),this.weekCounts=h;const{data:f}=await U.from("appointments").select().eq("user_id",this.userId).gte("date",l).lte("date",c);this.stats.month=f?f.length:0;const{data:p}=await U.from("clients").select().eq("user_id",this.userId);p&&(this.stats.clients=p.length,this.clients=p,this.stats.newClients=p.filter(m=>{const g=new Date(m.created_at);return g>=r&&g<=a}).length),await this.fetchTopClients(),this.$nextTick(()=>this.renderWeekChart())},async fetchUpcomingAppointments(){const e=new Date,t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-t),s.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()+(6-t)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],{data:r}=await U.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o).order("date",{ascending:!0}).order("time",{ascending:!0});this.upcomingAppointments=r||[]},async fetchTopClients(){const{data:e}=await U.from("appointments").select("client_id").eq("user_id",this.userId),t={};e&&e.forEach(n=>{t[n.client_id]=(t[n.client_id]||0)+1});const s=Object.entries(t).sort((n,i)=>i[1]-n[1]).slice(0,5);this.topClients=s.map(([n,i])=>({id:n,count:i,name:this.getClientName(n)}))},renderWeekChart(){const e=this.$refs.weekChartCanvas.getContext("2d");this.weekChart&&this.weekChart.destroy(),this.weekChart=new ts(e,{type:"bar",data:{labels:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],datasets:[{label:"Agendamentos",data:this.weekCounts,backgroundColor:"#6366f1",borderColor:"#4f46e5",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#e5e7eb"}}}}})},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},getServiceName(e){const t=this.services.find(s=>s.id===e);return t?t.name:""},getRoomName(e){const t=this.rooms.find(s=>s.id===e);return t?t.name:""},getRoomLink(e){const t=this.rooms.find(s=>s.id===e);return t?t.google_meet_link:""},openDetails(e){this.selectedAppointment=e,this.showDetailsModal=!0},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},async handleDeleteAppointment(e,t="Tem certeza que deseja excluir este agendamento?"){if(!confirm(t))return;const{error:n}=await U.from("appointments").delete().eq("id",e);n?alert("Erro ao excluir agendamento: "+n.message):(this.upcomingAppointments=this.upcomingAppointments.filter(i=>i.id!==e),this.selectedAppointment&&this.selectedAppointment.id===e&&this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments())},async handleAddClient(){if(this.clientForm.email&&!ns(this.clientForm.email)){alert("E-mail inválido");return}const{data:e,error:t}=await U.from("clients").insert({name:this.clientForm.name,email:this.clientForm.email,phone:this.clientForm.phone,birthdate:this.clientForm.birthdate,cpf:this.clientForm.cpf,cep:this.clientForm.cep,street:this.clientForm.street,number:this.clientForm.number,complement:this.clientForm.complement,neighborhood:this.clientForm.neighborhood,state_id:this.clientForm.stateId,city_id:this.clientForm.cityId,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar cliente: "+t.message);else{this.clients.push(e),this.clientForm={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.stats.clients+=1;const s=new Date(e.created_at),n=new Date(s.getFullYear(),s.getMonth(),1),i=new Date(s.getFullYear(),s.getMonth()+1,0);i.setHours(23,59,59,999),s>=n&&s<=i&&(this.stats.newClients+=1),await this.fetchTopClients(),alert("Cliente cadastrado!")}},openAppointmentModal(e){e?(this.editingId=e.id,this.appointmentForm={date:e.date,time:e.time,clientId:e.client_id,serviceId:e.service_id,duration:e.duration,description:e.description}):(this.editingId=null,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""}),this.showAppointmentModal=!0},closeAppointmentModal(){this.showAppointmentModal=!1,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openAppointmentModal(this.selectedAppointment),this.closeDetails())},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){this.selectedAppointment&&(await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails())},markNoShow(){alert("Falta registrada para este atendimento.")},sendConfirmationWhatsApp(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(r=>r.id===e.client_id);if(!(t!=null&&t.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===e.room_id),n=`Olá ${t.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${t.name}
Data: ${Se(e.date)} - Hora: ${e.time}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Ko(t.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},async handleAddAppointment(){if(this.editingId){const{data:e,error:t}=await U.from("appointments").update({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description}).eq("id",this.editingId).select().single();if(t)alert("Erro ao atualizar agendamento: "+t.message);else{const s=this.upcomingAppointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.upcomingAppointments[s]=e),this.closeAppointmentModal(),await this.fetchStats(),await this.fetchUpcomingAppointments()}}else{const{data:e,error:t}=await U.from("appointments").insert({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar agendamento: "+t.message);else{this.upcomingAppointments.push(e),this.closeAppointmentModal(),this.stats.week+=1,this.stats.month+=1;const s=new Date(e.date);this.weekCounts[s.getDay()]++,await this.fetchTopClients(),this.renderWeekChart()}}}},watch:{"appointmentForm.serviceId"(e){const t=this.services.find(s=>s.id===e);t&&this.appointmentForm.duration===""&&(this.appointmentForm.duration=t.duration)},"clientForm.stateId"(){this.fetchCitiesList()}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchStats(),await this.fetchUpcomingAppointments();const{data:t}=await U.from("services").select().eq("user_id",this.userId);t&&(this.services=t);const{data:s}=await U.from("rooms").select().eq("user_id",this.userId);s&&(this.rooms=s),await this.fetchStatesList()}},tS={class:"min-h-screen flex bg-gray-50 relative"},eS={class:"flex-1 p-4 md:p-8 space-y-8"},sS={key:0,class:"flex items-center mb-4"},nS={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},iS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},oS={class:"text-2xl font-bold"},rS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},aS={class:"text-2xl font-bold"},lS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},cS={class:"text-2xl font-bold"},dS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},uS={class:"text-2xl font-bold"},hS={class:"bg-white p-6 rounded-lg shadow-lg h-64"},fS={ref:"weekChartCanvas",class:"w-full h-full"},pS={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},mS={class:"md:col-span-8"},gS={class:"flex items-center justify-between mb-4"},bS={class:"md:col-span-4 space-y-4"},yS={class:"bg-white p-4 rounded-lg shadow"},xS={class:"overflow-x-auto"},_S={class:"min-w-full text-left"},vS={class:"px-4 py-2"},wS={class:"px-4 py-2 text-right"},kS={key:0},SS=["value"],CS=["value"],MS={class:"flex justify-end space-x-2"},AS={class:"text-lg font-semibold mb-4"},PS=["value"],TS=["value"],OS={class:"flex justify-end space-x-2"},ES={class:"mt-4"},DS={class:"flex flex-wrap justify-center gap-2"},IS={class:"mt-4"},RS={class:"flex flex-wrap justify-center gap-2"};function LS(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("WeekView"),c=H("Modal"),u=H("AppointmentDetails");return v(),k("div",tS,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=h=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",eS,[i.sidebarOpen?W("",!0):(v(),k("div",sS,[d("button",{onClick:t[1]||(t[1]=h=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[37]||(t[37]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Dashboard"}),d("section",nS,[d("div",iS,[t[38]||(t[38]=d("p",{class:"text-sm text-gray-500"},"Agendamentos na semana",-1)),d("p",oS,P(i.stats.week),1)]),d("div",rS,[t[39]||(t[39]=d("p",{class:"text-sm text-gray-500"},"Agendamentos no mês",-1)),d("p",aS,P(i.stats.month),1)]),d("div",lS,[t[40]||(t[40]=d("p",{class:"text-sm text-gray-500"},"Clientes cadastrados",-1)),d("p",cS,P(i.stats.clients),1)]),d("div",dS,[t[41]||(t[41]=d("p",{class:"text-sm text-gray-500"},"Novos clientes no mês",-1)),d("p",uS,P(i.stats.newClients),1)])]),d("section",hS,[t[42]||(t[42]=d("h3",{class:"text-lg font-medium mb-4"},"Agendamentos na semana",-1)),d("canvas",fS,null,512)]),d("section",pS,[d("div",mS,[d("div",gS,[t[43]||(t[43]=d("h3",{class:"text-lg font-medium"},"Agenda da Semana",-1)),d("button",{onClick:t[2]||(t[2]=h=>o.openAppointmentModal()),class:"btn"},"Novo Agendamento")]),E(l,{appointments:i.upcomingAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])]),d("div",bS,[d("button",{onClick:t[3]||(t[3]=(...h)=>o.openClientModal&&o.openClientModal(...h)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},"Novo Cliente"),d("div",yS,[t[46]||(t[46]=d("h4",{class:"font-medium mb-2"},"Clientes com mais agendamentos",-1)),d("div",xS,[d("table",_S,[t[45]||(t[45]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),d("th",{class:"px-4 py-2 font-medium text-gray-700 text-right"},"Agendamentos")])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(i.topClients,h=>(v(),k("tr",{key:h.id,class:"border-b last:border-b-0"},[d("td",vS,P(h.name),1),d("td",wS,P(h.count),1)]))),128)),i.topClients.length===0?(v(),k("tr",kS,t[44]||(t[44]=[d("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):W("",!0)])])])])])]),i.showClientModal?(v(),de(c,{key:1,onClose:t[21]||(t[21]=h=>i.showClientModal=!1)},{default:tt(()=>[t[62]||(t[62]=d("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Cliente",-1)),d("form",{onSubmit:t[20]||(t[20]=ie((...h)=>o.handleAddClient&&o.handleAddClient(...h),["prevent"])),class:"space-y-4"},[d("div",null,[t[47]||(t[47]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=h=>i.clientForm.name=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.name]])]),d("div",null,[t[48]||(t[48]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=h=>i.clientForm.cpf=h),onInput:t[6]||(t[6]=h=>i.clientForm.cpf=o.cpfMask(i.clientForm.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.cpf]])]),d("div",null,[t[49]||(t[49]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=h=>i.clientForm.birthdate=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.birthdate]])]),d("div",null,[t[50]||(t[50]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[8]||(t[8]=h=>i.clientForm.email=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.email]])]),d("div",null,[t[51]||(t[51]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=h=>i.clientForm.phone=h),onInput:t[10]||(t[10]=h=>i.clientForm.phone=o.phoneMask(i.clientForm.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.phone]])]),d("div",null,[t[52]||(t[52]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=h=>i.clientForm.cep=h),onInput:t[12]||(t[12]=h=>i.clientForm.cep=o.cepMask(i.clientForm.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.cep]])]),d("div",null,[t[53]||(t[53]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=h=>i.clientForm.street=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.street]])]),d("div",null,[t[54]||(t[54]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=h=>i.clientForm.number=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.number]])]),d("div",null,[t[55]||(t[55]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=h=>i.clientForm.complement=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.complement]])]),d("div",null,[t[56]||(t[56]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=h=>i.clientForm.neighborhood=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.neighborhood]])]),d("div",null,[t[58]||(t[58]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),O(d("select",{"onUpdate:modelValue":t[17]||(t[17]=h=>i.clientForm.stateId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[57]||(t[57]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.states,h=>(v(),k("option",{key:h.id,value:h.id},P(h.nome)+" ("+P(h.sigla)+")",9,SS))),128))],512),[[Ae,i.clientForm.stateId]])]),d("div",null,[t[60]||(t[60]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),O(d("select",{"onUpdate:modelValue":t[18]||(t[18]=h=>i.clientForm.cityId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[59]||(t[59]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.cities,h=>(v(),k("option",{key:h.id,value:h.id},P(h.nome),9,CS))),128))],512),[[Ae,i.clientForm.cityId]])]),d("div",MS,[d("button",{type:"button",onClick:t[19]||(t[19]=h=>i.showClientModal=!1),class:"px-4 py-2 rounded border"},"Cancelar"),t[61]||(t[61]=d("button",{type:"submit",class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700"},"Salvar",-1))])],32)]),_:1,__:[62]})):W("",!0),i.showAppointmentModal?(v(),de(c,{key:2,onClose:o.closeAppointmentModal},{default:tt(()=>[d("h3",AS,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),d("form",{onSubmit:t[29]||(t[29]=ie((...h)=>o.handleAddAppointment&&o.handleAddAppointment(...h),["prevent"])),class:"space-y-4"},[d("div",null,[t[63]||(t[63]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[22]||(t[22]=h=>i.appointmentForm.date=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.date]])]),d("div",null,[t[64]||(t[64]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),O(d("input",{type:"time","onUpdate:modelValue":t[23]||(t[23]=h=>i.appointmentForm.time=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.time]])]),d("div",null,[t[66]||(t[66]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),O(d("select",{"onUpdate:modelValue":t[24]||(t[24]=h=>i.appointmentForm.clientId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[65]||(t[65]=d("option",{disabled:"",value:""},"Selecione um cliente",-1)),(v(!0),k(J,null,pt(i.clients,h=>(v(),k("option",{key:h.id,value:h.id},P(h.name),9,PS))),128))],512),[[Ae,i.appointmentForm.clientId]])]),d("div",null,[t[68]||(t[68]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),O(d("select",{"onUpdate:modelValue":t[25]||(t[25]=h=>i.appointmentForm.serviceId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[67]||(t[67]=d("option",{disabled:"",value:""},"Selecione um serviço",-1)),(v(!0),k(J,null,pt(i.services,h=>(v(),k("option",{key:h.id,value:h.id},P(h.name),9,TS))),128))],512),[[Ae,i.appointmentForm.serviceId]])]),d("div",null,[t[69]||(t[69]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=h=>i.appointmentForm.duration=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.duration]])]),d("div",null,[t[70]||(t[70]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),O(d("textarea",{"onUpdate:modelValue":t[27]||(t[27]=h=>i.appointmentForm.description=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.description]])]),d("div",OS,[d("button",{type:"button",onClick:t[28]||(t[28]=(...h)=>o.closeAppointmentModal&&o.closeAppointmentModal(...h)),class:"px-4 py-2 rounded border"},"Cancelar"),t[71]||(t[71]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):W("",!0),i.showDetailsModal?(v(),de(c,{key:3,onClose:o.closeDetails},{default:tt(()=>[E(u,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:tt(()=>[d("div",ES,[t[72]||(t[72]=d("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),d("div",DS,[d("button",{onClick:t[30]||(t[30]=(...h)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...h)),class:"btn btn-success"},"Enviar confirmação"),d("button",{onClick:t[31]||(t[31]=(...h)=>o.cancelAppointment&&o.cancelAppointment(...h)),class:"btn btn-warning"},"Desmarcou"),d("button",{onClick:t[32]||(t[32]=(...h)=>o.markNoShow&&o.markNoShow(...h)),class:"btn btn-secondary"},"Faltou"),d("button",{onClick:t[33]||(t[33]=(...h)=>o.startAppointment&&o.startAppointment(...h)),class:"btn btn-primary"},"Iniciar atendimento")])]),d("div",IS,[t[73]||(t[73]=d("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),d("div",RS,[d("button",{onClick:t[34]||(t[34]=(...h)=>o.editFromDetails&&o.editFromDetails(...h)),class:"btn"},"Editar"),d("button",{onClick:t[35]||(t[35]=h=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir"),d("button",{onClick:t[36]||(t[36]=(...h)=>o.closeDetails&&o.closeDetails(...h)),class:"px-4 py-2 rounded border"},"Fechar")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):W("",!0)])])}const FS=mt(Z2,[["render",LS]]),jS={name:"Configuracao",components:{Sidebar:Pe,HeaderUser:Te},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,slug:"",activeTab:"perfil",form:{businessName:"",description:"",areaAtuacao:"",phone:"",whatsapp:"",email:"",address:"",instagram:"",facebook:"",youtube:"",x:"",imageUrl:""},agenda:{cancelLimitHours:0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:wr,updateSlug(){this.slug=this.form.businessName.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},async handleSave(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}const e={id:this.userId,business_name:this.form.businessName,slug:this.slug,description:this.form.description,area_atuacao:this.form.areaAtuacao,phone:this.form.phone,whatsapp:this.form.whatsapp,email:this.form.email,address:this.form.address,instagram:this.form.instagram,facebook:this.form.facebook,youtube:this.form.youtube,x:this.form.x,image_url:this.form.imageUrl},{error:t}=await U.from("profiles").upsert(e,{onConflict:["id"]});alert(t?"Erro ao salvar dados: "+t.message:"Dados salvos com sucesso!")},async handleImageUpload(e){const t=e.target.files[0];if(!t)return;const s=t.name.split(".").pop(),n=`${this.userId}.${s}`,{error:i}=await U.storage.from("profile-images").upload(n,t,{upsert:!0});if(i){alert("Erro ao enviar imagem: "+i.message);return}const{data:{publicUrl:o}}=U.storage.from("profile-images").getPublicUrl(n);this.form.imageUrl=o},async handleSaveAgenda(){const e={start:null,end:null,days:[]};for(const[n,i]of Object.entries(this.agenda.dailySchedule))i.enabled&&i.start&&i.end&&(e.days.push(n),(!e.start||i.start<e.start)&&(e.start=i.start),(!e.end||i.end>e.end)&&(e.end=i.end));const t={id:this.userId,start_time:e.start,end_time:e.end,week_days:e.days.join(","),daily_schedule:this.agenda.dailySchedule,cancel_limit_hours:this.agenda.cancelLimitHours},{error:s}=await U.from("profiles").upsert(t,{onConflict:["id"]});alert(s?"Erro ao salvar dados: "+s.message:"Dados salvos com sucesso!")}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t,error:s}=await U.from("profiles").select().eq("id",this.userId).single();if(t){if(this.form={businessName:t.business_name||"",description:t.description||"",areaAtuacao:t.area_atuacao||"",phone:t.phone||"",whatsapp:t.whatsapp||"",email:t.email||"",address:t.address||"",instagram:t.instagram||"",facebook:t.facebook||"",youtube:t.youtube||"",x:t.x||"",imageUrl:t.image_url||""},this.agenda={cancelLimitHours:t.cancel_limit_hours||0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},t.daily_schedule)Object.assign(this.agenda.dailySchedule,typeof t.daily_schedule=="string"?JSON.parse(t.daily_schedule):t.daily_schedule);else{const n=t.week_days?t.week_days.split(","):[];for(const i of n)this.agenda.dailySchedule[i]={enabled:!0,start:t.start_time||"",end:t.end_time||""}}this.updateSlug()}}},NS={class:"min-h-screen flex bg-gray-100 relative"},US={class:"flex-1 p-8"},$S={key:0,class:"flex items-center mb-4"},BS={class:"mb-6 space-x-2"},VS={class:"text-sm text-gray-500 mt-1"},zS={class:"font-mono"},HS=["href"],WS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},KS={key:0,class:"mt-2"},GS=["src"],YS={class:"mt-1 space-y-2"},JS=["onUpdate:modelValue"],XS={class:"w-20"},QS=["onUpdate:modelValue"],ZS=["onUpdate:modelValue"];function tC(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("router-link");return v(),k("div",NS,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",US,[i.sidebarOpen?W("",!0):(v(),k("div",$S,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[22]||(t[22]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Configurações"}),E(l,{to:"/onboarding",class:"text-blue-600 underline mb-4 inline-block"},{default:tt(()=>t[23]||(t[23]=[ot("Refazer Onboarding")])),_:1,__:[23]}),d("nav",BS,[d("button",{onClick:t[2]||(t[2]=c=>i.activeTab="perfil"),class:be([i.activeTab==="perfil"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Perfil",2),d("button",{onClick:t[3]||(t[3]=c=>i.activeTab="agenda"),class:be([i.activeTab==="agenda"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Agenda",2)]),i.activeTab==="perfil"?(v(),k("form",{key:1,onSubmit:t[19]||(t[19]=ie((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[d("div",null,[t[25]||(t[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=c=>i.form.businessName=c),onInput:t[5]||(t[5]=(...c)=>o.updateSlug&&o.updateSlug(...c)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.businessName]]),d("p",VS,[t[24]||(t[24]=ot(" Seu link público: ")),d("span",zS,"#/"+P(i.slug),1),d("a",{href:"#/"+i.slug,target:"_blank",class:"text-blue-600 hover:underline ml-2"},"Abrir página do cliente",8,HS)])]),d("div",null,[t[26]||(t[26]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição do Estabelecimento",-1)),O(d("textarea",{"onUpdate:modelValue":t[6]||(t[6]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.description]])]),d("div",null,[t[28]||(t[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Área de Atuação",-1)),O(d("select",{"onUpdate:modelValue":t[7]||(t[7]=c=>i.form.areaAtuacao=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},t[27]||(t[27]=[cn('<option disabled value="">Selecione</option><option>Psicologia</option><option>Terapias Gerais</option><option>Psicopedagogia</option><option>Medicina</option><option>Coaching</option><option>Fonoaudiologia</option><option>Fisioterapia</option><option>Nutrição</option><option>Terapia Ocupacional</option>',10)]),512),[[Ae,i.form.areaAtuacao]])]),d("div",WS,[d("div",null,[t[29]||(t[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone de Contato",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=c=>i.form.phone=c),onInput:t[9]||(t[9]=c=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.phone]])]),d("div",null,[t[30]||(t[30]=d("label",{class:"block text-sm font-medium text-gray-700"},"WhatsApp",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=c=>i.form.whatsapp=c),onInput:t[11]||(t[11]=c=>i.form.whatsapp=o.phoneMask(i.form.whatsapp)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.whatsapp]])]),d("div",null,[t[31]||(t[31]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[12]||(t[12]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])]),d("div",null,[t[32]||(t[32]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=c=>i.form.address=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.address]])])]),d("div",qS,[d("div",null,[t[33]||(t[33]=d("label",{class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=c=>i.form.instagram=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.instagram]])]),d("div",null,[t[34]||(t[34]=d("label",{class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=c=>i.form.facebook=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.facebook]])]),d("div",null,[t[35]||(t[35]=d("label",{class:"block text-sm font-medium text-gray-700"},"YouTube",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=c=>i.form.youtube=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.youtube]])]),d("div",null,[t[36]||(t[36]=d("label",{class:"block text-sm font-medium text-gray-700"},"X (Twitter)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=c=>i.form.x=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.x]])])]),d("div",null,[t[37]||(t[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"Imagem do Estabelecimento",-1)),d("input",{type:"file",accept:"image/*",onChange:t[18]||(t[18]=(...c)=>o.handleImageUpload&&o.handleImageUpload(...c)),class:"mt-1"},null,32),i.form.imageUrl?(v(),k("div",KS,[d("img",{src:i.form.imageUrl,alt:"Imagem do estabelecimento",class:"h-24 rounded-md"},null,8,GS)])):W("",!0)]),t[38]||(t[38]=d("div",null,[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):W("",!0),i.activeTab==="agenda"?(v(),k("form",{key:2,onSubmit:t[21]||(t[21]=ie((...c)=>o.handleSaveAgenda&&o.handleSaveAgenda(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[d("div",null,[t[40]||(t[40]=d("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),d("div",YS,[(v(!0),k(J,null,pt(i.daysOfWeekOptions,c=>(v(),k("div",{key:c.value,class:"flex items-center space-x-2"},[O(d("input",{type:"checkbox","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].enabled=u},null,8,JS),[[cl,i.agenda.dailySchedule[c.value].enabled]]),d("span",XS,P(c.label),1),O(d("input",{type:"time","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].start=u,class:"border rounded-md px-2 py-1"},null,8,QS),[[L,i.agenda.dailySchedule[c.value].start]]),t[39]||(t[39]=d("span",null,"-",-1)),O(d("input",{type:"time","onUpdate:modelValue":u=>i.agenda.dailySchedule[c.value].end=u,class:"border rounded-md px-2 py-1"},null,8,ZS),[[L,i.agenda.dailySchedule[c.value].end]])]))),128))])]),d("div",null,[t[41]||(t[41]=d("label",{class:"block text-sm font-medium text-gray-700"},"Horas para cancelamento sem custo",-1)),O(d("input",{type:"number",min:"0","onUpdate:modelValue":t[20]||(t[20]=c=>i.agenda.cancelLimitHours=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.agenda.cancelLimitHours,void 0,{number:!0}]])]),t[42]||(t[42]=d("div",null,[d("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):W("",!0)])])}const eC=mt(jS,[["render",tC]]),sC={name:"Clientes",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{userId:null,showModal:!1,modalMode:"new",editingId:null,search:"",form:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},states:[],cities:[],clients:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{phoneMask:wr,digitsOnly:Ko,cpfMask:rf,cepMask:af,async fetchStatesList(){this.states=await ap()},async fetchCitiesList(){this.cities=await lp(this.form.stateId)},async openModal(e,t="new"){this.modalMode=t,e?(this.editingId=e.id,this.form={name:e.name,email:e.email,phone:e.phone,birthdate:e.birthdate,cpf:e.cpf,cep:e.cep,street:e.street,number:e.number,complement:e.complement,neighborhood:e.neighborhood,stateId:e.state_id,cityId:e.city_id}):(this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""}),await this.fetchStatesList(),this.form.stateId&&await this.fetchCitiesList(),this.showModal=!0},closeModal(){this.showModal=!1,this.modalMode="new",this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""}},handleClose(){this.modalMode==="view"?this.closeModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeModal()},whatsappLink(e){return`https://wa.me/${Ko(e)}`},async handleSaveClient(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}let e,t;if(this.editingId?{data:e,error:t}=await U.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId}).eq("id",this.editingId).select().single():{data:e,error:t}=await U.from("clients").insert({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,user_id:this.userId}).select().single(),t)alert("Erro ao salvar cliente: "+t.message);else{if(this.editingId){const s=this.clients.findIndex(n=>n.id===this.editingId);s!==-1&&(this.clients[s]=e)}else this.clients.push(e);this.closeModal()}},async handleDeleteClient(e){if(!confirm("Tem certeza que deseja excluir este cliente?"))return;const{error:s}=await U.from("clients").delete().eq("id",e);s?alert("Erro ao excluir cliente: "+s.message):this.clients=this.clients.filter(n=>n.id!==e)},enableEdit(){this.modalMode="edit"},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{isReadOnly(){return this.modalMode==="view"},filteredClients(){const e=this.search.toLowerCase();return this.clients.filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e))},paginatedClients(){const e=(this.page-1)*this.pageSize;return this.filteredClients.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredClients.length/this.pageSize))}},watch:{search(){this.page=1},"form.stateId"(){this.fetchCitiesList()}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t),await this.fetchStatesList()}},nC={class:"min-h-screen flex bg-gray-100 relative"},iC={class:"flex-1 p-4 md:p-8 space-y-6"},oC={key:0,class:"flex items-center mb-4"},rC={class:"bg-white p-4 rounded-lg shadow"},aC={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},lC={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},cC={class:"overflow-x-auto"},dC={class:"min-w-full text-left"},uC={class:"px-4 py-2"},hC={class:"px-4 py-2"},fC={class:"px-4 py-2"},pC={class:"px-4 py-2 text-right space-x-2"},mC=["href"],gC=["onClick"],bC=["onClick"],yC={key:0},xC={class:"mt-4 flex justify-between items-center"},_C=["disabled"],vC={class:"text-sm"},wC=["disabled"],kC={class:"text-lg font-semibold mb-4"},SC=["disabled"],CC=["disabled"],MC=["disabled"],AC=["disabled"],PC=["disabled"],TC=["disabled"],OC=["disabled"],EC=["disabled"],DC=["disabled"],IC=["disabled"],RC=["disabled"],LC=["value"],FC=["disabled"],jC=["value"],NC={class:"flex justify-end space-x-2 md:col-span-2"},UC=["disabled"];function $C(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",nC,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",iC,[i.sidebarOpen?W("",!0):(v(),k("div",oC,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[24]||(t[24]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Clientes"}),d("section",rC,[d("div",aC,[t[25]||(t[25]=d("h3",{class:"text-lg font-medium"},"Clientes cadastrados",-1)),d("div",lC,[O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[L,i.search]]),d("button",{onClick:t[3]||(t[3]=(...c)=>o.openModal&&o.openModal(...c)),class:"btn w-full sm:w-auto"}," Novo Cliente ")])]),d("div",cC,[d("table",dC,[t[27]||(t[27]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Telefone"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(o.paginatedClients,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",uC,P(c.name),1),d("td",hC,P(c.email),1),d("td",fC,P(o.phoneMask(c.phone)),1),d("td",pC,[d("a",{href:o.whatsappLink(c.phone),target:"_blank",rel:"noopener",class:"btn btn-sm btn-success"}," WhatsApp ",8,mC),d("button",{onClick:u=>o.openModal(c,"view"),class:"btn btn-sm"}," Visualizar ",8,gC),d("button",{onClick:u=>o.handleDeleteClient(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,bC)])]))),128)),o.filteredClients.length===0?(v(),k("tr",yC,t[26]||(t[26]=[d("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"}," Nenhum cliente encontrado ",-1)]))):W("",!0)])]),d("div",xC,[d("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,_C),d("span",vC,"Página "+P(i.page)+" de "+P(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,wC)])])]),i.showModal?(v(),de(l,{key:1,onClose:o.handleClose},{default:tt(()=>[d("h3",kC,P(i.modalMode==="new"?"Adicionar Cliente":"Cadastro do Cliente"),1),d("form",{onSubmit:t[23]||(t[23]=ie((...c)=>o.handleSaveClient&&o.handleSaveClient(...c),["prevent"])),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[d("div",null,[t[28]||(t[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=c=>i.form.name=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,SC),[[L,i.form.name]])]),d("div",null,[t[29]||(t[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=c=>i.form.cpf=c),disabled:o.isReadOnly,onInput:t[8]||(t[8]=c=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,CC),[[L,i.form.cpf]])]),d("div",null,[t[30]||(t[30]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=c=>i.form.birthdate=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,MC),[[L,i.form.birthdate]])]),d("div",null,[t[31]||(t[31]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[10]||(t[10]=c=>i.form.email=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,AC),[[L,i.form.email]])]),d("div",null,[t[32]||(t[32]=d("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=c=>i.form.phone=c),disabled:o.isReadOnly,onInput:t[12]||(t[12]=c=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,PC),[[L,i.form.phone]])]),d("div",null,[t[33]||(t[33]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=c=>i.form.cep=c),disabled:o.isReadOnly,onInput:t[14]||(t[14]=c=>i.form.cep=o.cepMask(i.form.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,TC),[[L,i.form.cep]])]),d("div",null,[t[34]||(t[34]=d("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=c=>i.form.street=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,OC),[[L,i.form.street]])]),d("div",null,[t[35]||(t[35]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=c=>i.form.number=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,EC),[[L,i.form.number]])]),d("div",null,[t[36]||(t[36]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=c=>i.form.complement=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,DC),[[L,i.form.complement]])]),d("div",null,[t[37]||(t[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=c=>i.form.neighborhood=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,IC),[[L,i.form.neighborhood]])]),d("div",null,[t[39]||(t[39]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),O(d("select",{"onUpdate:modelValue":t[19]||(t[19]=c=>i.form.stateId=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[38]||(t[38]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.states,c=>(v(),k("option",{key:c.id,value:c.id},P(c.nome)+" ("+P(c.sigla)+")",9,LC))),128))],8,RC),[[Ae,i.form.stateId]])]),d("div",null,[t[41]||(t[41]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),O(d("select",{"onUpdate:modelValue":t[20]||(t[20]=c=>i.form.cityId=c),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[40]||(t[40]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.cities,c=>(v(),k("option",{key:c.id,value:c.id},P(c.nome),9,jC))),128))],8,FC),[[Ae,i.form.cityId]])]),d("div",NC,[d("button",{type:"button",onClick:t[21]||(t[21]=(...c)=>o.handleClose&&o.handleClose(...c)),class:"px-4 py-2 rounded border"},"Fechar"),i.modalMode==="view"?(v(),k("button",{key:0,type:"button",onClick:t[22]||(t[22]=(...c)=>o.enableEdit&&o.enableEdit(...c)),class:"btn btn-success"},"Editar")):W("",!0),d("button",{type:"submit",class:"btn",disabled:o.isReadOnly},"Salvar",8,UC)])],32)]),_:1},8,["onClose"])):W("",!0)])])}const BC=mt(sC,[["render",$C]]),VC={name:"CalendarView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const e=new Date;return{currentYear:e.getFullYear(),currentMonth:e.getMonth(),monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]}},computed:{daysInMonth(){return new Date(this.currentYear,this.currentMonth+1,0).getDate()},leadingBlanks(){return new Date(this.currentYear,this.currentMonth,1).getDay()}},methods:{prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--},nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++},goToCurrentMonth(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()},getAppointmentsForDay(e){const t=String(this.currentMonth+1).padStart(2,"0"),s=String(e).padStart(2,"0"),n=`${this.currentYear}-${t}-${s}`;return this.appointments.filter(i=>i.date===n)},isToday(e){const t=new Date;return this.currentYear===t.getFullYear()&&this.currentMonth===t.getMonth()&&e===t.getDate()}}},zC={class:"bg-white rounded-lg shadow overflow-hidden"},HC={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},WC={class:"font-semibold"},qC={class:"grid grid-cols-7 gap-px text-sm bg-gray-100"},KC={class:"text-center font-medium"},GC=["onClick"];function YC(e,t,s,n,i,o){return v(),k("div",zC,[d("div",HC,[d("button",{onClick:t[0]||(t[0]=(...r)=>o.prevMonth&&o.prevMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},t[2]||(t[2]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("div",WC,P(i.monthNames[i.currentMonth])+" "+P(i.currentYear),1),d("button",{onClick:t[1]||(t[1]=(...r)=>o.nextMonth&&o.nextMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},t[3]||(t[3]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),d("div",qC,[(v(!0),k(J,null,pt(i.daysOfWeek,r=>(v(),k("div",{class:"font-semibold text-center bg-gray-50 p-1",key:r},P(r),1))),128)),(v(!0),k(J,null,pt(o.leadingBlanks,r=>(v(),k("div",{key:"b"+r,class:"bg-white h-24"}))),128)),(v(!0),k(J,null,pt(o.daysInMonth,r=>(v(),k("div",{key:r,class:be(["border border-gray-200 h-24 p-1 overflow-auto bg-white",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(r)}])},[d("div",KC,P(r),1),d("ul",null,[(v(!0),k(J,null,pt(o.getAppointmentsForDay(r),a=>(v(),k("li",{key:a.id,class:"text-xs truncate cursor-pointer",onClick:l=>e.$emit("select",a)},P(a.time)+" - "+P(s.getClientName(a.client_id)),9,GC))),128))])],2))),128))])])}const JC=mt(VC,[["render",YC]]);async function fu(e){const{error:t}=await U.functions.invoke("send-appointment-email",{body:e});t&&console.error("Erro ao enviar email de agendamento:",t.message)}const XC={name:"Agendamentos",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs,CalendarView:JC,WeekView:lf,AppointmentDetails:cf},data(){return{userId:null,showModal:!1,editingId:null,viewMode:"week",form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},clients:[],services:[],rooms:[],appointments:[],selectedAppointment:null,showDetailsModal:!1,filterStartDate:"",filterEndDate:"",searchQuery:"",sortColumn:"",sortAsc:!0,showViewDropdown:!1,sidebarOpen:window.innerWidth>=768,schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},profileWhatsapp:""}},computed:{processedAppointments(){let e=this.appointments.slice();if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter(s=>s.date.toLowerCase().includes(t)||s.time.toLowerCase().includes(t)||this.getClientName(s.client_id).toLowerCase().includes(t)||this.getServiceName(s.service_id).toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t))}return this.filterStartDate&&(e=e.filter(t=>t.date>=this.filterStartDate)),this.filterEndDate&&(e=e.filter(t=>t.date<=this.filterEndDate)),this.sortColumn&&e.sort((t,s)=>{let n,i;switch(this.sortColumn){case"client":n=this.getClientName(t.client_id),i=this.getClientName(s.client_id);break;case"service":n=this.getServiceName(t.service_id),i=this.getServiceName(s.service_id);break;case"datetime":n=t.date+" "+t.time,i=s.date+" "+s.time;break;default:n=t[this.sortColumn],i=s[this.sortColumn]}return n<i?this.sortAsc?-1:1:n>i?this.sortAsc?1:-1:0}),e}},methods:{formatDateBR:Se,openModal(e){e?(this.editingId=e.id,this.form={date:e.date,time:e.time,clientId:e.client_id,serviceId:e.service_id,roomId:e.room_id||"",duration:e.duration,description:e.description}):(this.editingId=null,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openModal(this.selectedAppointment),this.closeDetails())},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},isSlotAllowed(e,t){if(!e||!t)return!1;const s=new Date(e+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:t>=n.start&&t<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&t<this.schedule.startTime||this.schedule.endTime&&t>this.schedule.endTime))},canCancelAppointment(e){const t=this.schedule.cancelLimitHours||0;return t===0?!0:(new Date(`${e.date}T${e.time}`)-new Date)/36e5>=t},async handleSaveAppointment(){if(!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado");return}if(this.editingId){const{data:e,error:t}=await U.from("appointments").update({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description}).eq("id",this.editingId).select().single();if(t)alert("Erro ao atualizar agendamento: "+t.message);else{const s=this.appointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.appointments[s]=e),this.closeModal()}}else{const{data:e,error:t}=await U.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar agendamento: "+t.message);else{this.appointments.push(e);const s=this.clients.find(o=>o.id===this.form.clientId),n=this.services.find(o=>o.id===this.form.serviceId),i=this.rooms.find(o=>o.id===this.form.roomId);await fu({to:s==null?void 0:s.email,subject:`Agendamento confirmado para ${Se(this.form.date)} às ${this.form.time}`,text:`Olá ${s==null?void 0:s.name},

Seu agendamento para ${n==null?void 0:n.name} foi confirmado para ${Se(this.form.date)} às ${this.form.time}.
${i?`Sala: ${i.name}
`:""}${i!=null&&i.google_meet_link?`Link: ${i.google_meet_link}
`:""}${this.form.description?`Observações: ${this.form.description}`:""}`}),this.closeModal()}}},async handleDeleteAppointment(e,t="Tem certeza que deseja excluir este agendamento?"){const s=this.appointments.find(o=>o.id===e);if(s&&!this.canCancelAppointment(s)){alert("Agendamento fora da política de cancelamento.");return}if(!confirm(t))return;const{error:i}=await U.from("appointments").delete().eq("id",e);i?alert("Erro ao excluir agendamento: "+i.message):(this.appointments=this.appointments.filter(o=>o.id!==e),this.selectedAppointment&&this.selectedAppointment.id===e&&(this.showDetailsModal=!1,this.selectedAppointment=null))},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},getClientEmail(e){const t=this.clients.find(s=>s.id===e);return t?t.email:""},getServiceName(e){const t=this.services.find(s=>s.id===e);return t?t.name:""},getRoomName(e){const t=this.rooms.find(s=>s.id===e);return t?t.name:""},getRoomLink(e){const t=this.rooms.find(s=>s.id===e);return t?t.google_meet_link:""},sortBy(e){this.sortColumn===e?this.sortAsc=!this.sortAsc:(this.sortColumn=e,this.sortAsc=!0)},setViewMode(e){this.viewMode=e,this.showViewDropdown=!1,e==="calendar"&&this.$refs.calendarView&&this.$refs.calendarView.goToCurrentMonth&&this.$refs.calendarView.goToCurrentMonth()},openDetails(e){this.selectedAppointment=e,this.showDetailsModal=!0},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(this.selectedAppointment){if(!this.canCancelAppointment(this.selectedAppointment)){alert("Agendamento fora da política de cancelamento.");return}await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails()}},markNoShow(){alert("Falta registrada para este atendimento.")},async sendConfirmationEmail(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(i=>i.id===e.client_id),s=this.services.find(i=>i.id===e.service_id),n=this.rooms.find(i=>i.id===e.room_id);await fu({to:t==null?void 0:t.email,subject:`Agendamento confirmado para ${Se(e.date)} às ${e.time}`,text:`Olá ${t==null?void 0:t.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${Se(e.date)} às ${e.time}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${e.description?`Observações: ${e.description}`:""}`})},sendConfirmationWhatsApp(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(r=>r.id===e.client_id);if(!(t!=null&&t.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===e.room_id),n=`Olá ${t.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${t.name}
Data: ${Se(e.date)} - Hora: ${e.time}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Ko(t.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},exportCSV(){const e=["Data","Hora","Cliente","Serviço","Duração","Descrição"],t=this.appointments.map(o=>[Se(o.date),o.time,this.getClientName(o.client_id),this.getServiceName(o.service_id),o.duration,(o.description||"").replace(/(\r\n|\n|\r)/g," ")]),s=[e.join(","),...t.map(o=>o.map(r=>`"${String(r).replace(/"/g,'""')}"`).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.setAttribute("download","agendamentos.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},clearFilters(){this.searchQuery="",this.filterStartDate="",this.filterEndDate=""}},watch:{"form.serviceId"(e){const t=this.services.find(s=>s.id===e);t&&(!this.editingId||this.form.duration==="")&&(this.form.duration=t.duration)}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t);const{data:s}=await U.from("services").select().eq("user_id",this.userId);s&&(this.services=s);const{data:n}=await U.from("rooms").select().eq("user_id",this.userId);n&&(this.rooms=n);const{data:i}=await U.from("profiles").select("start_time, end_time, week_days, daily_schedule, whatsapp, cancel_limit_hours").eq("id",this.userId).single();i&&(this.schedule.startTime=i.start_time||"",this.schedule.endTime=i.end_time||"",this.schedule.weekDays=i.week_days?i.week_days.split(","):[],this.schedule.dailySchedule=i.daily_schedule?typeof i.daily_schedule=="string"?JSON.parse(i.daily_schedule):i.daily_schedule:null,this.schedule.cancelLimitHours=i.cancel_limit_hours||0,this.profileWhatsapp=i.whatsapp||"");const{data:o}=await U.from("appointments").select().eq("user_id",this.userId);o&&(this.appointments=o)}},QC={class:"min-h-screen flex bg-gray-100 relative"},ZC={class:"flex-1 p-4 md:p-8"},tM={key:0,class:"flex items-center mb-4"},eM={class:"flex flex-col sm:flex-row sm:items-center mb-4 gap-2"},sM={class:"mb-4 flex items-center space-x-2"},nM={class:"relative"},iM={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20"},oM={class:"text-lg font-semibold mb-4"},rM=["value"],aM=["value"],lM=["value"],cM={class:"flex justify-end space-x-2"},dM={class:"mt-4"},uM={class:"flex flex-wrap justify-center gap-2"},hM={class:"mt-4"},fM={class:"flex flex-wrap justify-center gap-2"},pM={class:"mt-8"},mM={class:"bg-white p-4 rounded-lg shadow"},gM={class:"overflow-x-auto"},bM={class:"min-w-full text-left"},yM={class:"bg-gray-50"},xM={key:0},_M={key:0},vM={key:0},wM={key:0},kM={key:0},SM={class:"px-4 py-2"},CM={class:"px-4 py-2"},MM={class:"px-4 py-2"},AM={class:"px-4 py-2"},PM={class:"px-4 py-2"},TM={class:"px-4 py-2"},OM={class:"px-4 py-2 text-right space-x-2"},EM=["onClick"],DM=["onClick"],IM={key:0},RM={class:"mt-8"},LM={class:"mt-8"};function FM(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal"),c=H("AppointmentDetails"),u=H("CalendarView"),h=H("WeekView");return v(),k("div",QC,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=f=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",ZC,[i.sidebarOpen?W("",!0):(v(),k("div",tM,[d("button",{onClick:t[1]||(t[1]=f=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[32]||(t[32]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Agendamentos"}),d("section",null,[d("div",eM,[O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=f=>i.searchQuery=f),type:"text",placeholder:"Buscar...",class:"border px-3 py-2 rounded-lg flex-grow sm:max-w-xs"},null,512),[[L,i.searchQuery]]),O(d("input",{"onUpdate:modelValue":t[3]||(t[3]=f=>i.filterStartDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[L,i.filterStartDate]]),O(d("input",{"onUpdate:modelValue":t[4]||(t[4]=f=>i.filterEndDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[L,i.filterEndDate]]),d("button",{onClick:t[5]||(t[5]=(...f)=>o.clearFilters&&o.clearFilters(...f)),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Limpar"),d("button",{onClick:t[6]||(t[6]=f=>o.openModal()),class:"btn sm:ml-auto w-full sm:w-auto"},"Novo"),d("button",{onClick:t[7]||(t[7]=(...f)=>o.exportCSV&&o.exportCSV(...f)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full sm:w-auto"},"Exportar")]),d("div",sM,[t[33]||(t[33]=d("span",{class:"text-xs text-gray-600"},"Modo de exibição:",-1)),d("div",nM,[d("button",{onClick:t[8]||(t[8]=f=>i.showViewDropdown=!i.showViewDropdown),class:"px-4 py-2 bg-gray-200 rounded-lg"},P(i.viewMode==="list"?"Lista":i.viewMode==="calendar"?"Calendário":"Semana"),1),i.showViewDropdown?(v(),k("div",iM,[d("button",{onClick:t[9]||(t[9]=f=>o.setViewMode("list")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Lista"),d("button",{onClick:t[10]||(t[10]=f=>o.setViewMode("calendar")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Calendário"),d("button",{onClick:t[11]||(t[11]=f=>o.setViewMode("week")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Semana")])):W("",!0)])]),i.showModal?(v(),de(l,{key:0,onClose:o.closeModal},{default:tt(()=>[d("h3",oM,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),d("form",{onSubmit:t[20]||(t[20]=ie((...f)=>o.handleSaveAppointment&&o.handleSaveAppointment(...f),["prevent"])),class:"space-y-4"},[d("div",null,[t[34]||(t[34]=d("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=f=>i.form.date=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.date]])]),d("div",null,[t[35]||(t[35]=d("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),O(d("input",{type:"time","onUpdate:modelValue":t[13]||(t[13]=f=>i.form.time=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.time]])]),d("div",null,[t[37]||(t[37]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),O(d("select",{"onUpdate:modelValue":t[14]||(t[14]=f=>i.form.clientId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[36]||(t[36]=d("option",{disabled:"",value:""},"Selecione um cliente",-1)),(v(!0),k(J,null,pt(i.clients,f=>(v(),k("option",{key:f.id,value:f.id},P(f.name),9,rM))),128))],512),[[Ae,i.form.clientId]])]),d("div",null,[t[39]||(t[39]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),O(d("select",{"onUpdate:modelValue":t[15]||(t[15]=f=>i.form.serviceId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[38]||(t[38]=d("option",{disabled:"",value:""},"Selecione um serviço",-1)),(v(!0),k(J,null,pt(i.services,f=>(v(),k("option",{key:f.id,value:f.id},P(f.name),9,aM))),128))],512),[[Ae,i.form.serviceId]])]),d("div",null,[t[41]||(t[41]=d("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),O(d("select",{"onUpdate:modelValue":t[16]||(t[16]=f=>i.form.roomId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[40]||(t[40]=d("option",{disabled:"",value:""},"Selecione uma sala",-1)),(v(!0),k(J,null,pt(i.rooms,f=>(v(),k("option",{key:f.id,value:f.id},P(f.name),9,lM))),128))],512),[[Ae,i.form.roomId]])]),d("div",null,[t[42]||(t[42]=d("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=f=>i.form.duration=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.duration]])]),d("div",null,[t[43]||(t[43]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),O(d("textarea",{"onUpdate:modelValue":t[18]||(t[18]=f=>i.form.description=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.description]])]),d("div",cM,[d("button",{type:"button",onClick:t[19]||(t[19]=(...f)=>o.closeModal&&o.closeModal(...f)),class:"px-4 py-2 rounded border"},"Cancelar"),t[44]||(t[44]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):W("",!0),i.showDetailsModal?(v(),de(l,{key:1,onClose:o.closeDetails},{default:tt(()=>[E(c,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:tt(()=>[d("div",dM,[t[45]||(t[45]=d("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),d("div",uM,[d("button",{onClick:t[21]||(t[21]=(...f)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...f)),class:"btn btn-success"},"Enviar confirmação"),d("button",{onClick:t[22]||(t[22]=(...f)=>o.cancelAppointment&&o.cancelAppointment(...f)),class:"btn btn-warning"},"Desmarcou"),d("button",{onClick:t[23]||(t[23]=(...f)=>o.markNoShow&&o.markNoShow(...f)),class:"btn btn-secondary"},"Faltou"),d("button",{onClick:t[24]||(t[24]=(...f)=>o.startAppointment&&o.startAppointment(...f)),class:"btn btn-primary"},"Iniciar atendimento")])]),d("div",hM,[t[46]||(t[46]=d("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),d("div",fM,[d("button",{onClick:t[25]||(t[25]=(...f)=>o.editFromDetails&&o.editFromDetails(...f)),class:"btn"},"Editar"),d("button",{onClick:t[26]||(t[26]=f=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):W("",!0),O(d("div",pM,[t[55]||(t[55]=d("h3",{class:"text-lg font-medium mb-4"},"Agendamentos",-1)),d("div",mM,[d("div",gM,[d("table",bM,[d("thead",yM,[d("tr",null,[d("th",{onClick:t[27]||(t[27]=f=>o.sortBy("datetime")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[47]||(t[47]=ot(" Data/Hora ")),i.sortColumn==="datetime"?(v(),k("span",xM,P(i.sortAsc?"▲":"▼"),1)):W("",!0)]),d("th",{onClick:t[28]||(t[28]=f=>o.sortBy("client")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[48]||(t[48]=ot(" Cliente ")),i.sortColumn==="client"?(v(),k("span",_M,P(i.sortAsc?"▲":"▼"),1)):W("",!0)]),d("th",{onClick:t[29]||(t[29]=f=>o.sortBy("service")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[49]||(t[49]=ot(" Serviço ")),i.sortColumn==="service"?(v(),k("span",vM,P(i.sortAsc?"▲":"▼"),1)):W("",!0)]),t[52]||(t[52]=d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Sala",-1)),d("th",{onClick:t[30]||(t[30]=f=>o.sortBy("duration")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[50]||(t[50]=ot(" Duração ")),i.sortColumn==="duration"?(v(),k("span",wM,P(i.sortAsc?"▲":"▼"),1)):W("",!0)]),d("th",{onClick:t[31]||(t[31]=f=>o.sortBy("description")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[51]||(t[51]=ot(" Descrição ")),i.sortColumn==="description"?(v(),k("span",kM,P(i.sortAsc?"▲":"▼"),1)):W("",!0)]),t[53]||(t[53]=d("th",{class:"px-4 py-2"},null,-1))])]),d("tbody",null,[(v(!0),k(J,null,pt(o.processedAppointments,f=>(v(),k("tr",{key:f.id,class:"border-b last:border-b-0"},[d("td",SM,P(o.formatDateBR(f.date))+" "+P(f.time),1),d("td",CM,P(o.getClientName(f.client_id)),1),d("td",MM,P(o.getServiceName(f.service_id)),1),d("td",AM,P(o.getRoomName(f.room_id)),1),d("td",PM,P(f.duration),1),d("td",TM,P(f.description),1),d("td",OM,[d("button",{onClick:p=>o.openModal(f),class:"btn btn-sm"},"Editar",8,EM),d("button",{onClick:p=>o.handleDeleteAppointment(f.id),class:"btn btn-sm btn-danger"},"Excluir",8,DM)])]))),128)),o.processedAppointments.length===0?(v(),k("tr",IM,t[54]||(t[54]=[d("td",{colspan:"7",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento encontrado",-1)]))):W("",!0)])])])])],512),[[Fr,i.viewMode==="list"]]),O(d("div",RM,[t[56]||(t[56]=d("h3",{class:"text-lg font-medium mb-4"},"Calendário",-1)),E(u,{ref:"calendarView",appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[Fr,i.viewMode==="calendar"]]),O(d("div",LM,[t[57]||(t[57]=d("h3",{class:"text-lg font-medium mb-4"},"Semana",-1)),E(h,{appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[Fr,i.viewMode==="week"]])])])])}const jM=mt(XC,[["render",FM]]),NM={name:"Servicos",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{userId:null,showModal:!1,editingId:null,search:"",sidebarOpen:window.innerWidth>=768,form:{name:"",description:"",duration:"",price:""},services:[],page:1,pageSize:10}},methods:{openModal(e){e?(this.editingId=e.id,this.form={name:e.name,description:e.description,duration:e.duration,price:e.price}):(this.editingId=null,this.form={name:"",description:"",duration:"",price:""}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={name:"",description:"",duration:"",price:""},this.editingId=null},async handleSaveService(){let e,t;if(this.editingId?{data:e,error:t}=await U.from("services").update({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price)}).eq("id",this.editingId).select().single():{data:e,error:t}=await U.from("services").insert({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),user_id:this.userId}).select().single(),t)alert("Erro ao salvar serviço: "+t.message);else{if(this.editingId){const s=this.services.findIndex(n=>n.id===this.editingId);s!==-1&&(this.services[s]=e)}else this.services.push(e);this.closeModal()}},async handleDeleteService(e){if(!confirm("Tem certeza que deseja excluir este serviço?"))return;const{error:s}=await U.from("services").delete().eq("id",e);s?alert("Erro ao excluir serviço: "+s.message):this.services=this.services.filter(n=>n.id!==e)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--},formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},computed:{filteredServices(){const e=this.search.toLowerCase();return this.services.filter(t=>t.name.toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e)||(t.duration||"").toLowerCase().includes(e)||t.price!==null&&t.price.toString().includes(e))},paginatedServices(){const e=(this.page-1)*this.pageSize;return this.filteredServices.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredServices.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("services").select().eq("user_id",this.userId);t&&(this.services=t)}},UM={class:"min-h-screen flex bg-gray-100 relative"},$M={class:"flex-1 p-4 md:p-8 space-y-6"},BM={key:0,class:"flex items-center mb-4"},VM={class:"bg-white p-4 rounded-lg shadow"},zM={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},HM={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},WM={class:"overflow-x-auto"},qM={class:"min-w-full text-left"},KM={class:"px-4 py-2"},GM={class:"px-4 py-2"},YM={class:"px-4 py-2"},JM={class:"px-4 py-2"},XM={class:"px-4 py-2 text-right space-x-2"},QM=["onClick"],ZM=["onClick"],tA={key:0},eA={class:"mt-4 flex justify-between items-center"},sA=["disabled"],nA={class:"text-sm"},iA=["disabled"],oA={class:"text-lg font-semibold mb-4"},rA={class:"flex justify-end space-x-2"};function aA(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",UM,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",$M,[i.sidebarOpen?W("",!0):(v(),k("div",BM,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[12]||(t[12]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Serviços"}),d("section",VM,[d("div",zM,[t[13]||(t[13]=d("h3",{class:"text-lg font-medium"},"Serviços cadastrados",-1)),d("div",HM,[O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[L,i.search]]),d("button",{onClick:t[3]||(t[3]=c=>o.openModal()),class:"btn w-full sm:w-auto"}," Novo Serviço ")])]),d("div",WM,[d("table",qM,[t[15]||(t[15]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Descrição"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Duração"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(o.paginatedServices,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",KM,P(c.name),1),d("td",GM,P(c.description),1),d("td",YM,P(c.duration),1),d("td",JM,P(o.formatPrice(c.price)),1),d("td",XM,[d("button",{onClick:u=>o.openModal(c),class:"btn btn-sm"}," Editar ",8,QM),d("button",{onClick:u=>o.handleDeleteService(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,ZM)])]))),128)),o.filteredServices.length===0?(v(),k("tr",tA,t[14]||(t[14]=[d("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"}," Nenhum serviço encontrado ",-1)]))):W("",!0)])]),d("div",eA,[d("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,sA),d("span",nA,"Página "+P(i.page)+" de "+P(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,iA)])])]),i.showModal?(v(),de(l,{key:1,onClose:o.closeModal},{default:tt(()=>[d("h3",oA,P(i.editingId?"Editar Serviço":"Adicionar Serviço"),1),d("form",{onSubmit:t[11]||(t[11]=ie((...c)=>o.handleSaveService&&o.handleSaveService(...c),["prevent"])),class:"space-y-6"},[d("div",null,[t[16]||(t[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.name]])]),d("div",null,[t[17]||(t[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),O(d("textarea",{"onUpdate:modelValue":t[7]||(t[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.description]])]),d("div",null,[t[18]||(t[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Tempo de duração",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=c=>i.form.duration=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.duration]])]),d("div",null,[t[19]||(t[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),O(d("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=c=>i.form.price=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.price]])]),d("div",rA,[d("button",{type:"button",onClick:t[10]||(t[10]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[20]||(t[20]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):W("",!0)])])}const lA=mt(NM,[["render",aA]]),cA={name:"Usuarios",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{form:{email:"",password:""},sidebarOpen:window.innerWidth>=768,userId:null,successMessage:"",errorMessage:"",users:[],search:"",showUserModal:!1,userModalMode:"new",selectedUserId:null,userForm:{email:"",password:""}}},methods:{async handleAddUser(){if(this.successMessage="",this.errorMessage="",this.form.email&&!ns(this.form.email)){this.errorMessage="E-mail inválido";return}const{data:{user:e}}=await U.auth.getUser(),{data:{session:t}}=await U.auth.getSession();let s=null;if(e){const{data:o}=await U.from("profiles").select("*").eq("id",e.id).single();s=o}const{data:n,error:i}=await U.auth.signUp({email:this.form.email,password:this.form.password});t&&await U.auth.setSession(t),i?this.errorMessage="Erro ao cadastrar usuário: "+i.message:(n!=null&&n.user&&s&&await U.from("profiles").insert({id:n.user.id,business_name:s.business_name,description:s.description,phone:s.phone,whatsapp:s.whatsapp,email:s.email,address:s.address,instagram:s.instagram,facebook:s.facebook,youtube:s.youtube,x:s.x,slug:s.slug}),this.successMessage="Usuário cadastrado! Verifique o e-mail para ativar a conta.",this.form={email:"",password:""},await this.fetchUsers())},openUserModal(e,t="new"){this.userModalMode=t,e?(this.selectedUserId=e.id,this.userForm={email:e.email,password:""}):(this.selectedUserId=null,this.userForm={email:"",password:""}),this.showUserModal=!0},handleUserClose(){this.userModalMode==="view"?this.closeUserModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeUserModal()},closeUserModal(){this.showUserModal=!1,this.userModalMode="new",this.selectedUserId=null,this.userForm={email:"",password:""}},enableUserEdit(){this.userModalMode="edit"},async handleSaveUser(){if(this.userModalMode!=="view"){if(this.userForm.email&&!ns(this.userForm.email)){alert("E-mail inválido");return}if(this.selectedUserId){const{error:e}=await U.from("profiles").update({email:this.userForm.email}).eq("id",this.selectedUserId);if(e)alert("Erro ao salvar usuário: "+e.message);else{const t=this.users.findIndex(s=>s.id===this.selectedUserId);t!==-1&&(this.users[t].email=this.userForm.email),this.closeUserModal()}}else this.form={email:this.userForm.email,password:this.userForm.password},await this.handleAddUser(),this.closeUserModal()}},async fetchUsers(){const{data:e}=await U.from("profiles").select("slug").eq("id",this.userId).single();if(e){const{data:t}=await U.from("profiles").select("id, email").eq("slug",e.slug);this.users=t||[]}}},computed:{isUserView(){return this.userModalMode==="view"},filteredUsers(){const e=this.search.toLowerCase();return this.users.filter(t=>t.id.toLowerCase().includes(e)||(t.email||"").toLowerCase().includes(e))}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchUsers()}},dA={class:"min-h-screen flex bg-gray-100 relative"},uA={class:"flex-1 p-8 space-y-6"},hA={key:0,class:"flex items-center mb-4"},fA={class:"bg-white p-4 rounded-lg shadow"},pA={key:0,class:"text-green-600 mt-4"},mA={key:1,class:"text-red-600 mt-4"},gA={class:"bg-white p-4 rounded-lg shadow"},bA={class:"flex justify-between items-center mb-4"},yA={class:"overflow-x-auto"},xA={class:"min-w-full text-left"},_A={class:"px-4 py-2"},vA={class:"px-4 py-2"},wA={class:"px-4 py-2 text-right"},kA=["onClick"],SA={key:0},CA={class:"text-lg font-semibold mb-4"},MA=["disabled"],AA=["disabled"],PA={class:"flex justify-end space-x-2"},TA=["disabled"];function OA(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",dA,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",uA,[i.sidebarOpen?W("",!0):(v(),k("div",hA,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[11]||(t[11]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Usuários"}),d("section",fA,[t[15]||(t[15]=d("h3",{class:"text-lg font-medium mb-4"},"Cadastrar novo usuário",-1)),d("form",{onSubmit:t[4]||(t[4]=ie((...c)=>o.handleAddUser&&o.handleAddUser(...c),["prevent"])),class:"space-y-4"},[d("div",null,[t[12]||(t[12]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])]),d("div",null,[t[13]||(t[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),O(d("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=c=>i.form.password=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.password]])]),t[14]||(t[14]=d("div",{class:"flex justify-end"},[d("button",{type:"submit",class:"btn"},"Cadastrar")],-1))],32),i.successMessage?(v(),k("p",pA,P(i.successMessage),1)):W("",!0),i.errorMessage?(v(),k("p",mA,P(i.errorMessage),1)):W("",!0)]),d("section",gA,[d("div",bA,[t[16]||(t[16]=d("h3",{class:"text-lg font-medium"},"Usuários cadastrados",-1)),O(d("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.search]])]),d("div",yA,[d("table",xA,[t[18]||(t[18]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"ID"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(o.filteredUsers,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",_A,P(c.id),1),d("td",vA,P(c.email),1),d("td",wA,[d("button",{onClick:u=>o.openUserModal(c,"view"),class:"btn btn-sm"},"Visualizar",8,kA)])]))),128)),o.filteredUsers.length===0?(v(),k("tr",SA,t[17]||(t[17]=[d("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum usuário encontrado",-1)]))):W("",!0)])])])]),i.showUserModal?(v(),de(l,{key:1,onClose:o.handleUserClose},{default:tt(()=>[d("h3",CA,P(i.userModalMode==="new"?"Adicionar Usuário":"Cadastro de Usuário"),1),d("form",{onSubmit:t[10]||(t[10]=ie((...c)=>o.handleSaveUser&&o.handleSaveUser(...c),["prevent"])),class:"space-y-4"},[d("div",null,[t[19]||(t[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),O(d("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=c=>i.userForm.email=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,MA),[[L,i.userForm.email]])]),d("div",null,[t[20]||(t[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),O(d("input",{type:"password","onUpdate:modelValue":t[7]||(t[7]=c=>i.userForm.password=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,AA),[[L,i.userForm.password]])]),d("div",PA,[d("button",{type:"button",onClick:t[8]||(t[8]=(...c)=>o.handleUserClose&&o.handleUserClose(...c)),class:"px-4 py-2 rounded border"},"Fechar"),i.userModalMode==="view"?(v(),k("button",{key:0,type:"button",onClick:t[9]||(t[9]=(...c)=>o.enableUserEdit&&o.enableUserEdit(...c)),class:"btn btn-success"},"Editar")):W("",!0),d("button",{type:"submit",class:"btn",disabled:o.isUserView},"Salvar",8,TA)])],32)]),_:1},8,["onClose"])):W("",!0)])])}const EA=mt(cA,[["render",OA]]),DA={name:"SearchProfiles",components:{Navbar:He,Footer:We},data(){return{profiles:[],search:""}},computed:{filteredProfiles(){const e=this.search.toLowerCase();return this.profiles.filter(t=>t.business_name.toLowerCase().includes(e))}},async mounted(){const{data:e}=await U.from("profiles").select("id, business_name, description, slug, area_atuacao");e&&(this.profiles=e)}},IA={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-10"},RA={class:"max-w-2xl mx-auto px-4"},LA={class:"mb-6 text-center"},FA={class:"space-y-4"},jA={class:"text-xl font-semibold text-blue-600"},NA={key:0,class:"text-sm text-gray-500"},UA={class:"text-gray-700 mb-2"},$A={key:0,class:"text-center text-gray-500 py-6"};function BA(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("div",IA,[d("div",RA,[d("div",LA,[t[1]||(t[1]=d("h1",{class:"text-3xl font-extrabold text-blue-700 mb-4"},"Buscar perfis",-1)),O(d("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.search=c),type:"text",placeholder:"Digite o nome do estabelecimento",class:"w-full px-4 py-2 border rounded-md"},null,512),[[L,i.search]])]),d("ul",FA,[(v(!0),k(J,null,pt(o.filteredProfiles,c=>(v(),k("li",{key:c.id,class:"bg-white p-4 rounded-md shadow"},[d("h2",jA,P(c.business_name),1),c.area_atuacao?(v(),k("p",NA,P(c.area_atuacao),1)):W("",!0),d("p",UA,P(c.description),1),E(a,{to:"/"+c.slug,class:"text-blue-600 hover:underline"},{default:tt(()=>t[2]||(t[2]=[ot(" Ver perfil ")])),_:2,__:[2]},1032,["to"])]))),128)),o.filteredProfiles.length===0?(v(),k("li",$A," Nenhum resultado encontrado ")):W("",!0)])])]),E(l)],64)}const VA=mt(DA,[["render",BA]]),cp="/icons/whatsapp.svg",zA={name:"PublicPage",data(){return{profile:null,services:[]}},computed:{whatsappLink(){var s;return`https://wa.me/${(((s=this.profile)==null?void 0:s.whatsapp)||"").replace(/\D/g,"")}`}},methods:{formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const e=this.$route.params.slug,{data:t}=await U.from("profiles").select("*").eq("slug",e).single();if(t){this.profile=t;const{data:s}=await U.from("services").select().eq("user_id",t.id);this.services=s||[]}}},HA={class:"min-h-screen flex flex-col bg-white"},WA={key:0,class:"flex-1"},qA={class:"bg-blue-600 text-white py-12"},KA={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},GA=["src"],YA={class:"text-4xl font-bold"},JA={key:0,class:"text-sm"},XA={class:"text-lg"},QA={class:"max-w-5xl mx-auto px-4 py-12 space-y-16"},ZA={key:0,class:"grid gap-6 md:grid-cols-2"},tP={class:"text-lg font-medium text-blue-700"},eP={class:"text-sm text-gray-600"},sP={class:"text-sm text-gray-500 mt-1"},nP={class:"text-sm text-gray-500"},iP={key:1,class:"text-gray-500"},oP={class:"space-y-1 text-gray-700"},rP=["href"],aP={key:2,class:"flex-1 flex items-center justify-center text-gray-500"},lP={key:3,class:"bg-gray-100 py-6"},cP={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},dP={class:"space-x-4 text-blue-600"},uP=["href"],hP=["href"],fP=["href"],pP=["href"],mP={class:"text-sm text-gray-500"};function gP(e,t,s,n,i,o){return v(),k("div",HA,[i.profile?(v(),k("section",WA,[d("div",qA,[d("div",KA,[d("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,GA),d("h1",YA,P(i.profile.business_name),1),i.profile.area_atuacao?(v(),k("p",JA,P(i.profile.area_atuacao),1)):W("",!0),d("p",XA,P(i.profile.description),1)])]),d("div",QA,[d("div",null,[t[0]||(t[0]=d("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Serviços",-1)),i.services.length?(v(),k("ul",ZA,[(v(!0),k(J,null,pt(i.services,r=>(v(),k("li",{key:r.id,class:"p-4 bg-gray-50 border rounded-lg shadow"},[d("h3",tP,P(r.name),1),d("p",eP,P(r.description),1),d("p",sP,"Duração: "+P(r.duration),1),d("p",nP,"Valor: "+P(o.formatPrice(r.price)),1)]))),128))])):(v(),k("p",iP,"Nenhum serviço cadastrado."))]),d("div",null,[t[5]||(t[5]=d("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Contato",-1)),d("ul",oP,[d("li",null,[t[1]||(t[1]=d("strong",null,"Telefone:",-1)),ot(" "+P(i.profile.phone),1)]),d("li",null,[t[2]||(t[2]=d("strong",null,"WhatsApp:",-1)),ot(" "+P(i.profile.whatsapp),1)]),d("li",null,[t[3]||(t[3]=d("strong",null,"Email:",-1)),ot(" "+P(i.profile.email),1)]),d("li",null,[t[4]||(t[4]=d("strong",null,"Endereço:",-1)),ot(" "+P(i.profile.address),1)])])])])])):W("",!0),i.profile&&i.profile.whatsapp?(v(),k("a",{key:1,href:o.whatsappLink,target:"_blank",rel:"noopener",class:"fixed bottom-4 right-4 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg"},t[6]||(t[6]=[d("img",{src:cp,alt:"WhatsApp",class:"w-6 h-6"},null,-1)]),8,rP)):(v(),k("div",aP,t[7]||(t[7]=[d("p",null,"Carregando perfil...",-1)]))),i.profile?(v(),k("footer",lP,[d("div",cP,[d("div",dP,[i.profile.instagram?(v(),k("a",{key:0,href:i.profile.instagram,class:"hover:underline"},"Instagram",8,uP)):W("",!0),i.profile.facebook?(v(),k("a",{key:1,href:i.profile.facebook,class:"hover:underline"},"Facebook",8,hP)):W("",!0),i.profile.youtube?(v(),k("a",{key:2,href:i.profile.youtube,class:"hover:underline"},"YouTube",8,fP)):W("",!0),i.profile.x?(v(),k("a",{key:3,href:i.profile.x,class:"hover:underline"},"X (Twitter)",8,pP)):W("",!0)]),d("p",mP,"© "+P(new Date().getFullYear())+" "+P(i.profile.business_name),1)])])):W("",!0)])}const bP=mt(zA,[["render",gP]]),yP={name:"Planos",components:{Navbar:He,Footer:We}},xP={class:"max-w-5xl mx-auto px-4 py-16"},_P={class:"text-center mt-8"};function vP(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("section",xP,[t[1]||(t[1]=cn('<h1 class="text-3xl font-bold text-center mb-8">Conheça nossos planos</h1><div class="bg-white p-4 rounded-lg shadow"><div class="overflow-x-auto"><table class="min-w-full text-left"><thead class="bg-gray-50"><tr><th class="px-4 py-2 font-medium text-gray-700">Recursos</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Básico</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Beta</th></tr></thead><tbody><tr><td class="border-t px-4 py-2 text-gray-600">Valor</td><td class="border-t px-4 py-2 text-center font-semibold">Grátis</td><td class="border-t px-4 py-2 text-center font-semibold line-through text-gray-400">R$167,90</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Cadastro de pacientes</td><td class="border-t px-4 py-2 text-center">Até 5 pacientes</td><td class="border-t px-4 py-2 text-center">Ilimitado</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Lembretes por e-mail</td><td class="border-t px-4 py-2 text-center">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Lembretes via WhatsApp</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Customização de domínio da página pública</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Página pública sem banner do Agenda Zen</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Geração de recibos de atendimentos</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Envio de recibos por e-mail automático</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr></tbody></table></div></div>',2)),d("div",_P,[E(a,{to:"/cadastro",class:"btn"},{default:tt(()=>t[0]||(t[0]=[ot(" Contratar plano ")])),_:1,__:[0]})])]),E(l)],64)}const wP=mt(yP,[["render",vP]]),kP={name:"Salas",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{userId:null,showModal:!1,search:"",form:{name:"",googleMeetLink:""},rooms:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{openModal(){this.showModal=!0},generateMeetLink(){const e=window.open("https://meet.google.com/new","_blank");setTimeout(()=>{try{this.form.googleMeetLink=e.location.href}catch{}},3e3)},async pasteFromClipboard(){try{const e=await navigator.clipboard.readText();this.form.googleMeetLink=e}catch{alert("Não foi possível acessar o conteúdo da área de transferência.")}},closeModal(){this.showModal=!1,this.form={name:"",googleMeetLink:""}},async handleAddRoom(){const{data:e,error:t}=await U.from("rooms").insert({name:this.form.name,google_meet_link:this.form.googleMeetLink,user_id:this.userId}).select().single();t?alert("Erro ao salvar sala: "+t.message):(this.rooms.push(e),this.closeModal())},async handleDeleteRoom(e){if(!confirm("Tem certeza que deseja excluir esta sala?"))return;const{error:s}=await U.from("rooms").delete().eq("id",e);s?alert("Erro ao excluir sala: "+s.message):this.rooms=this.rooms.filter(n=>n.id!==e)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{filteredRooms(){const e=this.search.toLowerCase();return this.rooms.filter(t=>t.name.toLowerCase().includes(e)||t.google_meet_link&&t.google_meet_link.toLowerCase().includes(e))},paginatedRooms(){const e=(this.page-1)*this.pageSize;return this.filteredRooms.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredRooms.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("rooms").select().eq("user_id",this.userId);t&&(this.rooms=t)}},SP={class:"min-h-screen flex bg-gray-100 relative"},CP={class:"flex-1 p-4 md:p-8 space-y-6"},MP={key:0,class:"flex items-center mb-4"},AP={class:"bg-white p-4 rounded-lg shadow"},PP={class:"flex justify-between items-center mb-4"},TP={class:"flex items-center space-x-3"},OP={class:"overflow-x-auto"},EP={class:"min-w-full text-left"},DP={class:"px-4 py-2"},IP={class:"px-4 py-2"},RP=["href"],LP={class:"px-4 py-2 text-right"},FP=["onClick"],jP={key:0},NP={class:"mt-4 flex justify-between items-center"},UP=["disabled"],$P={class:"text-sm"},BP=["disabled"],VP={class:"flex space-x-2 mt-1"},zP={class:"flex justify-end space-x-2"};function HP(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",SP,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",CP,[i.sidebarOpen?W("",!0):(v(),k("div",MP,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[12]||(t[12]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Salas"}),d("section",AP,[d("div",PP,[t[13]||(t[13]=d("h3",{class:"text-lg font-medium"},"Salas cadastradas",-1)),d("div",TP,[O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.search]]),d("button",{onClick:t[3]||(t[3]=(...c)=>o.openModal&&o.openModal(...c)),class:"btn"}," Nova Sala ")])]),d("div",OP,[d("table",EP,[t[15]||(t[15]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Google Meet"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(o.paginatedRooms,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",DP,P(c.name),1),d("td",IP,[c.google_meet_link?(v(),k("a",{key:0,href:c.google_meet_link,class:"text-blue-600 underline",target:"_blank"}," Link ",8,RP)):W("",!0)]),d("td",LP,[d("button",{onClick:u=>o.handleDeleteRoom(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,FP)])]))),128)),o.filteredRooms.length===0?(v(),k("tr",jP,t[14]||(t[14]=[d("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"}," Nenhuma sala encontrada ",-1)]))):W("",!0)])]),d("div",NP,[d("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,UP),d("span",$P,"Página "+P(i.page)+" de "+P(o.totalPages),1),d("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,BP)])])]),i.showModal?(v(),de(l,{key:1,onClose:o.closeModal},{default:tt(()=>[t[20]||(t[20]=d("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Sala",-1)),d("form",{onSubmit:t[11]||(t[11]=ie((...c)=>o.handleAddRoom&&o.handleAddRoom(...c),["prevent"])),class:"space-y-6"},[d("div",null,[t[16]||(t[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.name]])]),d("div",null,[t[17]||(t[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Link do Google Meet",-1)),d("div",VP,[O(d("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=c=>i.form.googleMeetLink=c),class:"flex-grow px-4 py-2 border rounded-md"},null,512),[[L,i.form.googleMeetLink]]),d("button",{type:"button",onClick:t[8]||(t[8]=(...c)=>o.generateMeetLink&&o.generateMeetLink(...c)),class:"btn"},"Gerar"),d("button",{type:"button",onClick:t[9]||(t[9]=(...c)=>o.pasteFromClipboard&&o.pasteFromClipboard(...c)),class:"btn"},"Paste")]),t[18]||(t[18]=d("p",{class:"text-xs text-gray-500 mt-2"}," Após abrir a nova aba, copie o link da reunião e cole no campo acima. ",-1))]),d("div",zP,[d("button",{type:"button",onClick:t[10]||(t[10]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[19]||(t[19]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[20]},8,["onClose"])):W("",!0)])])}const WP=mt(kP,[["render",HP]]),qP={name:"Comprovantes",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],receipts:[],clients:[],showGenerateModal:!1,generateForm:{clientId:"",startDate:"",endDate:"",templateId:""},receiptContent:null}},methods:{formatDateBR:Se,closeGenerateModal(){this.showGenerateModal=!1,this.generateForm={clientId:"",startDate:"",endDate:"",templateId:""}},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},showReceipt(e){this.receiptContent=e},async handleGenerate(){const{data:e}=await U.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.generateForm.clientId).gte("date",this.generateForm.startDate).lte("date",this.generateForm.endDate).order("date",{ascending:!0}).order("time",{ascending:!0}),t=this.templates.find(a=>a.id===this.generateForm.templateId),s=this.clients.find(a=>a.id===this.generateForm.clientId);let n=t?t.content:"";s&&(n=n.replace("{{client_name}}",s.name));const i=(e||[]).map(a=>`- ${Se(a.date)} ${a.time}`).join(`
`);n=n.replace("{{appointments}}",i);const{data:o,error:r}=await U.from("receipts").insert({user_id:this.userId,client_id:this.generateForm.clientId,template_id:this.generateForm.templateId,start_date:this.generateForm.startDate,end_date:this.generateForm.endDate,content:n}).select().single();r?alert("Erro ao gerar comprovante: "+r.message):(this.receipts.push(o),this.closeGenerateModal())}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t);const{data:s}=await U.from("receipt_templates").select().eq("user_id",this.userId);s&&(this.templates=s);const{data:n}=await U.from("receipts").select().eq("user_id",this.userId).order("created_at",{ascending:!1});n&&(this.receipts=n)}},KP={class:"min-h-screen flex bg-gray-100 relative"},GP={class:"flex-1 p-4 md:p-8 space-y-6"},YP={key:0,class:"flex items-center mb-4"},JP={class:"bg-white p-4 rounded-lg shadow space-y-4"},XP={class:"flex justify-between items-center"},QP={class:"overflow-x-auto"},ZP={class:"min-w-full text-left"},tT={class:"px-4 py-2"},eT={class:"px-4 py-2"},sT={class:"px-4 py-2"},nT={class:"px-4 py-2 text-right"},iT=["onClick"],oT={key:0},rT=["value"],aT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lT=["value"],cT={class:"flex justify-end space-x-2"},dT={class:"border rounded-md p-4 bg-gray-50"},uT={class:"whitespace-pre-wrap font-mono text-sm"};function hT(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",KP,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",GP,[i.sidebarOpen?W("",!0):(v(),k("div",YP,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[10]||(t[10]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Comprovantes"}),d("section",JP,[d("div",XP,[t[11]||(t[11]=d("h3",{class:"text-lg font-medium"},"Comprovantes Gerados",-1)),d("button",{onClick:t[2]||(t[2]=c=>i.showGenerateModal=!0),class:"btn"},"Novo Comprovante")]),d("div",QP,[d("table",ZP,[t[13]||(t[13]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Criado em"),d("th",{class:"px-4 py-2"})])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(i.receipts,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",tT,P(o.getClientName(c.client_id)),1),d("td",eT,P(o.formatDateBR(c.start_date))+" - "+P(o.formatDateBR(c.end_date)),1),d("td",sT,P(o.formatDateBR(c.created_at.split("T")[0])),1),d("td",nT,[d("button",{onClick:u=>o.showReceipt(c.content),class:"btn btn-sm"},"Ver",8,iT)])]))),128)),i.receipts.length===0?(v(),k("tr",oT,t[12]||(t[12]=[d("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum comprovante",-1)]))):W("",!0)])])])]),i.showGenerateModal?(v(),de(l,{key:1,onClose:o.closeGenerateModal},{default:tt(()=>[t[21]||(t[21]=d("h3",{class:"text-lg font-semibold mb-4"},"Novo Comprovante",-1)),d("form",{onSubmit:t[8]||(t[8]=ie((...c)=>o.handleGenerate&&o.handleGenerate(...c),["prevent"])),class:"space-y-4"},[d("div",null,[t[15]||(t[15]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),O(d("select",{"onUpdate:modelValue":t[3]||(t[3]=c=>i.generateForm.clientId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[14]||(t[14]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.clients,c=>(v(),k("option",{key:c.id,value:c.id},P(c.name),9,rT))),128))],512),[[Ae,i.generateForm.clientId]])]),d("div",aT,[d("div",null,[t[16]||(t[16]=d("label",{class:"block text-sm font-medium text-gray-700"},"De",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=c=>i.generateForm.startDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.generateForm.startDate]])]),d("div",null,[t[17]||(t[17]=d("label",{class:"block text-sm font-medium text-gray-700"},"Até",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=c=>i.generateForm.endDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.generateForm.endDate]])])]),d("div",null,[t[19]||(t[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Template",-1)),O(d("select",{"onUpdate:modelValue":t[6]||(t[6]=c=>i.generateForm.templateId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[18]||(t[18]=d("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),k(J,null,pt(i.templates,c=>(v(),k("option",{key:c.id,value:c.id},P(c.name),9,lT))),128))],512),[[Ae,i.generateForm.templateId]])]),d("div",cT,[d("button",{type:"button",onClick:t[7]||(t[7]=(...c)=>o.closeGenerateModal&&o.closeGenerateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[20]||(t[20]=d("button",{type:"submit",class:"btn"},"Gerar",-1))])],32)]),_:1,__:[21]},8,["onClose"])):W("",!0),i.receiptContent?(v(),de(l,{key:2,onClose:t[9]||(t[9]=c=>i.receiptContent=null)},{default:tt(()=>[t[22]||(t[22]=d("h3",{class:"text-lg font-semibold text-center mb-4"},"Comprovante",-1)),d("div",dT,[d("pre",uT,P(i.receiptContent),1)])]),_:1,__:[22]})):W("",!0)])])}const fT=mt(qP,[["render",hT]]),pT={name:"Atendimento",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"current",appointment:null,note:"",files:[],notes:[],userId:null,isEditing:!1,editingNoteId:null,editingAttachments:[]}},computed:{appointmentDateTime(){return this.appointment?`${Se(this.appointment.date)} ${this.appointment.time}`:""},groupedNotes(){const e={};return this.notes.forEach(t=>{const s=t.created_at.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).sort((t,s)=>new Date(s)-new Date(t)).map(t=>({date:Se(t),items:e[t]}))}},methods:{formatDateTime(e){return new Date(e).toLocaleString("pt-BR")},handleFileChange(e){const t=["pdf","doc","txt","png","jpeg","jpg"],s=Array.from(e.target.files);this.files=[];for(const n of s){const i=n.name.split(".").pop().toLowerCase();t.includes(i)?this.files.push(n):alert(`Formato de arquivo não permitido: ${n.name}`)}},editExistingNote(e){(this.note&&this.note.trim()||this.files.length)&&!confirm("Dados não salvos serão perdidos. Deseja continuar?")||(this.isEditing=!0,this.editingNoteId=e.id,this.editingAttachments=[...e.attachments||[]],this.note=e.note,this.files=[],this.activeTab="current")},cancelEdit(){this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],this.note="",this.files=[]},async removeAttachment(e){if(!confirm("Remover este anexo?"))return;const n=this.editingAttachments[e].split("/appointment-attachments/");if(n.length===2){const i=n[1];await U.storage.from("appointment-attachments").remove([i])}this.editingAttachments.splice(e,1)},async fetchData(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("appointments").select().eq("id",this.$route.params.id).single();this.appointment=t;const{data:s}=await U.from("appointment_notes").select().eq("appointment_id",this.$route.params.id).order("created_at",{ascending:!1});this.notes=(s||[]).map(n=>({...n,attachments:n.attachments||[]}))},async saveNote(){if(!this.note.trim()&&!this.files.length&&!this.editingAttachments.length)return;const e=[];for(const n of this.files){const i=n.name.split(".").pop(),o=`${this.$route.params.id}-${Date.now()}-${Math.random().toString(36).slice(2)}.${i}`,{error:r}=await U.storage.from("appointment-attachments").upload(o,n);if(!r){const{data:{publicUrl:a}}=U.storage.from("appointment-attachments").getPublicUrl(o);e.push(a)}}let t,s;if(this.isEditing){const n=[...this.editingAttachments,...e];if({data:t,error:s}=await U.from("appointment_notes").update({note:this.note,attachments:n}).eq("id",this.editingNoteId).select().single(),!s){const i=this.notes.findIndex(o=>o.id===this.editingNoteId);i!==-1&&(this.notes[i]={...t,attachments:t.attachments||[]})}}else({data:t,error:s}=await U.from("appointment_notes").insert({appointment_id:this.$route.params.id,user_id:this.userId,note:this.note,attachments:e}).select().single()),s||this.notes.unshift({...t,attachments:t.attachments||[]});s?alert("Erro ao salvar atendimento: "+s.message):(this.note="",this.files=[],this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[])}},async mounted(){await this.fetchData()}},mT={class:"min-h-screen flex bg-gray-100 relative"},gT={class:"flex-1 p-4 md:p-8"},bT={key:0,class:"flex items-center mb-4"},yT={class:"bg-white p-4 rounded-lg shadow mt-4"},xT={class:"border-b mb-4"},_T={class:"flex space-x-4"},vT={key:0},wT={class:"mb-2 text-sm text-gray-600"},kT={key:0,class:"mb-4 space-y-1"},ST=["href"],CT=["onClick"],MT={class:"space-x-2"},AT={key:1},PT={class:"font-semibold mb-2"},TT={class:"text-sm text-gray-600 mb-1"},OT={class:"mb-2 whitespace-pre-line"},ET={key:0,class:"space-x-2 mb-2"},DT=["href"],IT={class:"text-right"},RT=["onClick"];function LT(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser");return v(),k("div",mT,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",gT,[i.sidebarOpen?W("",!0):(v(),k("div",bT,[d("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[8]||(t[8]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Atendimento"}),d("section",yT,[d("div",xT,[d("nav",_T,[d("button",{class:be(i.activeTab==="current"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[2]||(t[2]=l=>i.activeTab="current")},"Atendimento",2),d("button",{class:be(i.activeTab==="history"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[3]||(t[3]=l=>i.activeTab="history")},"Histórico de atendimento",2)])]),i.activeTab==="current"?(v(),k("div",vT,[d("p",wT,"Data/hora: "+P(o.appointmentDateTime),1),O(d("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.note=l),class:"w-full border rounded p-2 mb-4",rows:"6",placeholder:"Descreva o atendimento"},null,512),[[L,i.note]]),i.isEditing&&i.editingAttachments.length?(v(),k("div",kT,[(v(!0),k(J,null,pt(i.editingAttachments,(l,c)=>(v(),k("div",{key:c,class:"flex items-center space-x-2"},[d("a",{href:l,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(c+1),9,ST),d("button",{type:"button",onClick:u=>o.removeAttachment(c),class:"text-red-600 text-sm"},"Remover",8,CT)]))),128))])):W("",!0),d("input",{type:"file",multiple:"",onChange:t[5]||(t[5]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),class:"mb-4",accept:".pdf,.doc,.txt,.png,.jpeg,.jpg"},null,32),d("div",MT,[d("button",{onClick:t[6]||(t[6]=(...l)=>o.saveNote&&o.saveNote(...l)),class:"btn"},P(i.isEditing?"Atualizar":"Salvar"),1),i.isEditing?(v(),k("button",{key:0,onClick:t[7]||(t[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-danger"},"Cancelar")):W("",!0)])])):(v(),k("div",AT,[(v(!0),k(J,null,pt(o.groupedNotes,l=>(v(),k("div",{key:l.date,class:"mb-4"},[d("h4",PT,P(l.date),1),(v(!0),k(J,null,pt(l.items,c=>(v(),k("div",{key:c.id,class:"border p-2 rounded mb-2"},[d("p",TT,P(o.formatDateTime(c.created_at)),1),d("p",OT,P(c.note),1),c.attachments&&c.attachments.length?(v(),k("div",ET,[(v(!0),k(J,null,pt(c.attachments,(u,h)=>(v(),k("a",{key:h,href:u,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(h+1),9,DT))),128))])):W("",!0),d("div",IT,[d("button",{onClick:u=>o.editExistingNote(c),class:"btn btn-sm"},"Editar atendimento",8,RT)])]))),128))]))),128))]))])])])}const FT=mt(pT,[["render",LT]]),jT={name:"Templates",components:{Sidebar:Pe,HeaderUser:Te,Modal:Hs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],showTemplateModal:!1,templateForm:{name:"",content:""}}},methods:{closeTemplateModal(){this.showTemplateModal=!1,this.templateForm={name:"",content:""}},async handleAddTemplate(){const{data:e,error:t}=await U.from("receipt_templates").insert({name:this.templateForm.name,content:this.templateForm.content,user_id:this.userId}).select().single();t?alert("Erro ao salvar template: "+t.message):(this.templates.push(e),this.closeTemplateModal())}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await U.from("receipt_templates").select().eq("user_id",this.userId);t&&(this.templates=t)}},NT={class:"min-h-screen flex bg-gray-100 relative"},UT={class:"flex-1 p-4 md:p-8 space-y-6"},$T={key:0,class:"flex items-center mb-4"},BT={class:"bg-white p-4 rounded-lg shadow space-y-4"},VT={class:"flex justify-between items-center"},zT={class:"overflow-x-auto"},HT={class:"min-w-full text-left"},WT={class:"px-4 py-2"},qT={key:0},KT={class:"flex justify-end space-x-2"};function GT(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser"),l=H("Modal");return v(),k("div",NT,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",UT,[i.sidebarOpen?W("",!0):(v(),k("div",$T,[d("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[7]||(t[7]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Templates"}),d("section",BT,[d("div",VT,[t[8]||(t[8]=d("h3",{class:"text-lg font-medium"},"Templates",-1)),d("button",{onClick:t[2]||(t[2]=c=>i.showTemplateModal=!0),class:"btn"},"Novo Template")]),d("div",zT,[d("table",HT,[t[10]||(t[10]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome")])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(i.templates,c=>(v(),k("tr",{key:c.id,class:"border-b last:border-b-0"},[d("td",WT,P(c.name),1)]))),128)),i.templates.length===0?(v(),k("tr",qT,t[9]||(t[9]=[d("td",{class:"px-4 py-6 text-center text-gray-500"},"Nenhum template",-1)]))):W("",!0)])])])]),i.showTemplateModal?(v(),de(l,{key:1,onClose:o.closeTemplateModal},{default:tt(()=>[t[15]||(t[15]=d("h3",{class:"text-lg font-semibold mb-4"},"Novo Template",-1)),d("form",{onSubmit:t[6]||(t[6]=ie((...c)=>o.handleAddTemplate&&o.handleAddTemplate(...c),["prevent"])),class:"space-y-4"},[d("div",null,[t[11]||(t[11]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=c=>i.templateForm.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.templateForm.name]])]),d("div",null,[t[12]||(t[12]=d("label",{class:"block text-sm font-medium text-gray-700"},"Conteúdo",-1)),O(d("textarea",{"onUpdate:modelValue":t[4]||(t[4]=c=>i.templateForm.content=c),class:"w-full mt-1 px-4 py-2 border rounded-md",rows:"4"},null,512),[[L,i.templateForm.content]]),t[13]||(t[13]=d("p",{class:"text-sm text-gray-500 mt-1"},"Use {{client_name}} e {{appointments}}",-1))]),d("div",KT,[d("button",{type:"button",onClick:t[5]||(t[5]=(...c)=>o.closeTemplateModal&&o.closeTemplateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[14]||(t[14]=d("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[15]},8,["onClose"])):W("",!0)])])}const YT=mt(jT,[["render",GT]]),JT={name:"Contato",components:{Navbar:He,Footer:We},data(){return{nome:"",email:"",mensagem:"",sucesso:!1,erro:""}},methods:{async enviar(){if(this.sucesso=!1,this.erro="",this.email&&!ns(this.email)){this.erro="E-mail inválido";return}const{error:e}=await U.from("contacts").insert({name:this.nome,email:this.email,message:this.mensagem});e?this.erro="Erro ao enviar mensagem: "+e.message:(this.sucesso=!0,this.nome="",this.email="",this.mensagem="")}}},XT={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},QT={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},ZT={key:0,class:"mt-4 text-green-600 text-center"},tO={key:1,class:"mt-4 text-red-600 text-center"};function eO(e,t,s,n,i,o){const r=H("Navbar"),a=H("Footer");return v(),k(J,null,[E(r),d("section",XT,[d("div",QT,[t[8]||(t[8]=cn('<div class="mb-8 text-center"><h2 class="text-3xl font-extrabold text-blue-700">Fale conosco</h2><p class="text-gray-500">Envie sua mensagem e entraremos em contato</p></div><div class="mb-6 text-center"><a href="https://wa.me/5518996233098" target="_blank" rel="noopener" class="btn btn-success inline-flex items-center space-x-2"><img src="'+cp+'" alt="WhatsApp" class="w-5 h-5"><span>Falar via WhatsApp</span></a></div>',2)),d("form",{onSubmit:t[3]||(t[3]=ie((...l)=>o.enviar&&o.enviar(...l),["prevent"])),class:"space-y-5"},[d("div",null,[t[4]||(t[4]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"nome"},"Nome",-1)),O(d("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.nome=l),id:"nome",type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.nome]])]),d("div",null,[t[5]||(t[5]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),O(d("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.email=l),id:"email",type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]])]),d("div",null,[t[6]||(t[6]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"mensagem"},"Mensagem",-1)),O(d("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.mensagem=l),id:"mensagem",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4"},null,512),[[L,i.mensagem]])]),t[7]||(t[7]=d("button",{type:"submit",class:"btn w-full"},"Enviar",-1))],32),i.sucesso?(v(),k("p",ZT,"Mensagem enviada com sucesso!")):W("",!0),i.erro?(v(),k("p",tO,P(i.erro),1)):W("",!0)])]),E(a)],64)}const sO=mt(JT,[["render",eO]]),nO={name:"MinhaAssinatura",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768}},methods:{goBeta(){this.$router.push("/assinatura-plus")},goBasico(){this.$router.push("/dashboard")}}},iO={class:"min-h-screen flex bg-gray-100 relative"},oO={class:"flex-1 p-4 md:p-8 space-y-6"},rO={key:0,class:"flex items-center mb-4"},aO={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lO={class:"bg-white p-6 rounded-lg shadow space-y-4"},cO={class:"bg-white p-6 rounded-lg shadow space-y-4"};function dO(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser");return v(),k("div",iO,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",oO,[i.sidebarOpen?W("",!0):(v(),k("div",rO,[d("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[4]||(t[4]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Minha Assinatura"}),d("section",aO,[d("div",lO,[t[5]||(t[5]=cn('<h3 class="text-xl font-semibold text-center">Básico</h3><p class="text-center text-2xl font-bold text-blue-600">Grátis</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de até 5 pacientes</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),d("button",{class:"btn mt-4 w-full",onClick:t[2]||(t[2]=(...l)=>o.goBasico&&o.goBasico(...l))},"Escolher")]),d("div",cO,[t[6]||(t[6]=cn('<h3 class="text-xl font-semibold text-center">Beta</h3><p class="text-center text-2xl font-bold line-through text-gray-400">R$167,90</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de pacientes ilimitado</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),d("button",{class:"btn mt-4 w-full",onClick:t[3]||(t[3]=(...l)=>o.goBeta&&o.goBeta(...l))},"Escolher")])])])])}const uO=mt(nO,[["render",dO]]),hO={name:"Faturamento",components:{Sidebar:Pe,HeaderUser:Te},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,services:[],selectedServices:[],filterStart:"",filterEnd:"",groupBy:"mes",revenueData:[],chart:null}},methods:{async fetchServices(){const{data:e}=await U.from("services").select().eq("user_id",this.userId);this.services=e||[],this.selectedServices=this.services.map(t=>t.id)},async fetchRevenue(){if(!this.filterStart||!this.filterEnd)return;const{data:e}=await U.from("appointments").select("date, service_id").eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd),t=e||[],s={};this.services.forEach(o=>{s[o.id]=Number(o.price)||0});const n=this.selectedServices.length?t.filter(o=>this.selectedServices.includes(o.service_id)):t,i={};n.forEach(o=>{const r=new Date(o.date);let a="";if(this.groupBy==="dia")a=r.toISOString().split("T")[0];else if(this.groupBy==="semana"){const c=this.getWeekNumber(r);a=`${r.getFullYear()}-W${c}`}else a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`;const l=s[o.service_id]||0;i[a]=(i[a]||0)+l}),this.revenueData=Object.keys(i).sort().map(o=>({label:o,total:i[o]})),this.renderChart()},getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);const n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-n)/864e5+1)/7)},renderChart(){const e=this.$refs.chartCanvas.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new ts(e,{type:"bar",data:{labels:this.revenueData.map(t=>this.formatLabel(t.label)),datasets:[{label:"Faturamento",data:this.revenueData.map(t=>t.total),backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},formatPrice(e){return Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatLabel(e){if(this.groupBy==="dia")return Se(e);if(this.groupBy==="semana"){const[t,s]=e.split("-W");return`Semana ${s}/${t}`}if(this.groupBy==="mes"){const[t,s]=e.split("-");return`${s.padStart(2,"0")}/${t}`}return e}},async mounted(){const{data:{user:e}}=await U.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchServices();const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);this.filterStart=s.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0]}},fO={class:"min-h-screen flex bg-gray-100 relative"},pO={class:"flex-1 p-4 md:p-8 space-y-6"},mO={key:0,class:"flex items-center mb-4"},gO={class:"bg-white p-4 rounded-lg shadow space-y-4"},bO={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},yO={class:"mt-1 space-y-1"},xO=["value"],_O={class:"md:col-span-2"},vO={class:"grid grid-cols-2 gap-2 mt-1"},wO={class:"flex flex-col mt-3"},kO={class:"flex justify-end"},SO={class:"bg-white p-4 rounded-lg shadow space-y-4"},CO={class:"overflow-x-auto"},MO={class:"min-w-full text-left"},AO={class:"px-4 py-2"},PO={class:"px-4 py-2"},TO={key:0},OO={class:"h-64"},EO={ref:"chartCanvas",class:"w-full h-full"};function DO(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser");return v(),k("div",fO,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",pO,[i.sidebarOpen?W("",!0):(v(),k("div",mO,[d("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[7]||(t[7]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Relatório de Faturamento"}),d("section",gO,[d("div",bO,[d("div",null,[t[8]||(t[8]=d("label",{class:"block text-sm font-medium text-gray-700"},"Serviços",-1)),d("div",yO,[(v(!0),k(J,null,pt(i.services,l=>(v(),k("label",{key:l.id,class:"flex items-center space-x-2"},[O(d("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":t[2]||(t[2]=c=>i.selectedServices=c)},null,8,xO),[[cl,i.selectedServices]]),d("span",null,P(l.name),1)]))),128))])]),d("div",_O,[t[13]||(t[13]=d("label",{class:"block text-sm font-medium text-gray-700"},"Datas",-1)),d("div",vO,[d("div",null,[t[9]||(t[9]=d("label",{class:"block text-xs font-medium text-gray-700"},"De",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=l=>i.filterStart=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.filterStart]])]),d("div",null,[t[10]||(t[10]=d("label",{class:"block text-xs font-medium text-gray-700"},"Até",-1)),O(d("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=l=>i.filterEnd=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.filterEnd]])])]),d("div",wO,[t[12]||(t[12]=d("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),O(d("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>i.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},t[11]||(t[11]=[d("option",{value:"mes"},"Mês",-1),d("option",{value:"semana"},"Semana",-1),d("option",{value:"dia"},"Dia",-1)]),512),[[Ae,i.groupBy]])])])]),d("div",kO,[d("button",{onClick:t[6]||(t[6]=(...l)=>o.fetchRevenue&&o.fetchRevenue(...l)),class:"btn"},"Aplicar")])]),d("section",SO,[d("div",CO,[d("table",MO,[t[15]||(t[15]=d("thead",{class:"bg-gray-50"},[d("tr",null,[d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),d("th",{class:"px-4 py-2 font-medium text-gray-700"},"Faturamento")])],-1)),d("tbody",null,[(v(!0),k(J,null,pt(i.revenueData,l=>(v(),k("tr",{key:l.label,class:"border-b last:border-b-0"},[d("td",AO,P(o.formatLabel(l.label)),1),d("td",PO,P(o.formatPrice(l.total)),1)]))),128)),i.revenueData.length===0?(v(),k("tr",TO,t[14]||(t[14]=[d("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):W("",!0)])])]),d("div",OO,[d("canvas",EO,null,512)])])])])}const IO=mt(hO,[["render",DO]]),RO={name:"Faq",components:{Navbar:He,Footer:We},data(){return{faqs:[{question:"Como me cadastro?",answer:'Clique em "Cadastre-se" no menu e preencha o formulário.'},{question:"Posso cancelar a qualquer momento?",answer:"Sim, você pode cancelar seu plano a hora que quiser sem taxas adicionais."},{question:"Como entro em contato com o suporte?",answer:"Utilize a página de contato para nos enviar sua mensagem."}]}}},LO={class:"min-h-screen flex flex-col bg-gray-100"},FO={class:"flex-1 max-w-3xl mx-auto p-8"},jO={class:"space-y-6"},NO={class:"font-semibold text-blue-600 mb-2"},UO={class:"text-gray-700"};function $O(e,t,s,n,i,o){const r=H("Navbar"),a=H("Footer");return v(),k(J,null,[E(r),d("div",LO,[d("main",FO,[t[0]||(t[0]=d("h1",{class:"text-3xl font-bold text-center mb-8"},"Perguntas Frequentes",-1)),d("div",jO,[(v(!0),k(J,null,pt(i.faqs,(l,c)=>(v(),k("div",{key:c,class:"bg-white p-6 rounded-lg shadow"},[d("h2",NO,P(l.question),1),d("p",UO,P(l.answer),1)]))),128))])]),E(a)])],64)}const BO=mt(RO,[["render",$O]]),VO={name:"PoliticaPrivacidade",components:{Navbar:He,Footer:We}};function zO(e,t,s,n,i,o){const r=H("Navbar"),a=H("Footer");return v(),k(J,null,[E(r),t[0]||(t[0]=d("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[d("h1",{class:"text-3xl font-bold text-center mb-4"},"Política de Privacidade"),d("p",null,"Esta política descreve como tratamos seus dados pessoais e garante a transparência sobre o uso das suas informações."),d("p",null,"Utilizamos seus dados apenas para prover nossos serviços de agendamento e nunca os compartilhamos com terceiros sem consentimento."),d("p",null,"Ao utilizar o Agenda Zen você concorda com esta política. Em caso de dúvidas entre em contato conosco.")],-1)),E(a)],64)}const HO=mt(VO,[["render",zO]]),WO={name:"TermosDeUso",components:{Navbar:He,Footer:We}};function qO(e,t,s,n,i,o){const r=H("Navbar"),a=H("Footer");return v(),k(J,null,[E(r),t[0]||(t[0]=d("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[d("h1",{class:"text-3xl font-bold text-center mb-4"},"Termos de Uso"),d("p",null,"Estes termos definem as regras para utilização da plataforma Agenda Zen. Ao criar uma conta você concorda em segui-los."),d("p",null,"O serviço deve ser utilizado apenas para atividades lícitas e em conformidade com a legislação vigente. Contas que violem estas condições poderão ser suspensas."),d("p",null,"Podemos atualizar estes termos periodicamente. Avisaremos sobre mudanças importantes diretamente no site.")],-1)),E(a)],64)}const KO=mt(WO,[["render",qO]]),GO="/icons/visa.svg",YO="/icons/mastercard.svg",JO="/icons/amex.svg",XO="/icons/elo.svg",QO="/logo_pix.png",ZO={name:"PagamentoPlus",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"cartao",card:{name:"",number:"",expiry:"",cvv:"",document:""},billing:{cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""},pixCode:"000201010212..."}}},tE={class:"min-h-screen flex bg-gray-100 relative"},eE={class:"flex-1 p-8 space-y-6"},sE={key:0,class:"flex items-center mb-4"},nE={class:"mb-6 space-x-2"},iE={key:1,class:"space-y-6 max-w-3xl"},oE={class:"grid grid-cols-2 gap-4"},rE={class:"space-y-4 mt-4"},aE={class:"grid grid-cols-2 gap-4"},lE={class:"grid grid-cols-2 gap-4"},cE={key:2,class:"space-y-6 max-w-3xl"},dE={class:"text-center space-y-4"};function uE(e,t,s,n,i,o){const r=H("Sidebar"),a=H("HeaderUser");return v(),k("div",tE,[E(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),d("main",eE,[i.sidebarOpen?W("",!0):(v(),k("div",sE,[d("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[17]||(t[17]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),E(a,{title:"Pagamento"}),d("nav",nE,[d("button",{onClick:t[2]||(t[2]=l=>i.activeTab="cartao"),class:be([i.activeTab==="cartao"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Cartão de Crédito",2),d("button",{onClick:t[3]||(t[3]=l=>i.activeTab="pix"),class:be([i.activeTab==="pix"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Pix",2)]),i.activeTab==="cartao"?(v(),k("section",iE,[t[31]||(t[31]=cn('<div class="flex justify-center space-x-2 mb-4"><img src="'+GO+'" alt="Visa" class="h-8"><img src="'+YO+'" alt="Mastercard" class="h-8"><img src="'+JO+'" alt="American Express" class="h-8"><img src="'+XO+'" alt="Elo" class="h-8"></div>',1)),d("div",null,[t[18]||(t[18]=d("label",{class:"block text-sm font-medium text-gray-700"},"Nome (igual no cartão)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>i.card.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.name]])]),d("div",null,[t[19]||(t[19]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número do cartão",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>i.card.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.number]])]),d("div",oE,[d("div",null,[t[20]||(t[20]=d("label",{class:"block text-sm font-medium text-gray-700"},"Validade (MM/AA)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>i.card.expiry=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.expiry]])]),d("div",null,[t[21]||(t[21]=d("label",{class:"block text-sm font-medium text-gray-700"},"Código de Segurança (CVV)",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>i.card.cvv=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.cvv]])])]),d("div",null,[t[22]||(t[22]=d("label",{class:"block text-sm font-medium text-gray-700"},"CPF/CNPJ",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=l=>i.card.document=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.document]])]),d("div",rE,[t[30]||(t[30]=d("h3",{class:"text-md font-semibold"},"Endereço de cobrança",-1)),d("div",null,[t[23]||(t[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=l=>i.billing.cep=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.cep]])]),d("div",null,[t[24]||(t[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"Rua",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>i.billing.street=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.street]])]),d("div",aE,[d("div",null,[t[25]||(t[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=l=>i.billing.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.number]])]),d("div",null,[t[26]||(t[26]=d("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>i.billing.complement=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.complement]])])]),d("div",null,[t[27]||(t[27]=d("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=l=>i.billing.neighborhood=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.neighborhood]])]),d("div",lE,[d("div",null,[t[28]||(t[28]=d("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=l=>i.billing.city=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.city]])]),d("div",null,[t[29]||(t[29]=d("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=l=>i.billing.state=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.state]])])])]),t[32]||(t[32]=d("div",{class:"text-right mt-4"},[d("button",{class:"btn"},"Pagar")],-1))])):W("",!0),i.activeTab==="pix"?(v(),k("section",cE,[d("div",dE,[t[33]||(t[33]=d("img",{src:QO,alt:"Logo Pix",class:"mx-auto w-[17.6rem] h-auto"},null,-1)),t[34]||(t[34]=d("p",{class:"font-semibold"},"Código de pagamento",-1)),t[35]||(t[35]=d("p",null,"Copie e cole o código abaixo no app da sua instituição financeira para finalizar a compra.",-1)),t[36]||(t[36]=d("p",{class:"font-semibold"},"Valor do pagamento",-1)),t[37]||(t[37]=d("p",{class:"text-lg font-semibold"},"R$ 67,00",-1)),O(d("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=l=>i.pixCode=l),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[L,i.pixCode]])])])):W("",!0)])])}const hE=mt(ZO,[["render",uE]]),fE={name:"Confirmacao",components:{Navbar:He,Footer:We}},pE={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},mE={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},gE={class:"flex justify-center space-x-4"};function bE(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("section",pE,[d("div",mE,[t[2]||(t[2]=d("img",{src:as,alt:"Sucesso",class:"w-16 h-16 mx-auto text-green-500"},null,-1)),t[3]||(t[3]=d("h1",{class:"text-2xl font-bold text-green-600"},"Cadastro efetuado com sucesso",-1)),d("div",gE,[E(a,{to:"/",class:"btn inline-block"},{default:tt(()=>t[0]||(t[0]=[ot("Início")])),_:1,__:[0]}),E(a,{to:"/login",class:"btn inline-block"},{default:tt(()=>t[1]||(t[1]=[ot("Login")])),_:1,__:[1]})])])]),E(l)],64)}const yE=mt(fE,[["render",bE]]),xE="/icons/error.svg",_E={name:"LinkExpirado",components:{Navbar:He,Footer:We},data(){return{email:""}},methods:{async reenviarLink(){if(!ns(this.email)){alert("E-mail inválido");return}const{error:e}=await U.auth.resend({type:"signup",email:this.email});alert(e?"Erro ao reenviar link: "+e.message:"Link reenviado! Verifique seu e-mail.")}}},vE={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},wE={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},kE={class:"flex justify-center space-x-4"};function SE(e,t,s,n,i,o){const r=H("Navbar"),a=H("router-link"),l=H("Footer");return v(),k(J,null,[E(r),d("section",vE,[d("div",wE,[t[3]||(t[3]=d("img",{src:xE,alt:"Erro",class:"w-16 h-16 mx-auto text-red-500"},null,-1)),t[4]||(t[4]=d("h1",{class:"text-2xl font-bold text-red-600"},"Link expirado ou inválido",-1)),t[5]||(t[5]=d("p",{class:"text-gray-700"},"Informe seu e-mail para receber um novo link de confirmação.",-1)),O(d("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),type:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]]),d("div",kE,[d("button",{onClick:t[1]||(t[1]=(...c)=>o.reenviarLink&&o.reenviarLink(...c)),class:"btn"},"Reenviar link"),E(a,{to:"/",class:"btn"},{default:tt(()=>t[2]||(t[2]=[ot("Início")])),_:1,__:[2]})])])]),E(l)],64)}const CE=mt(_E,[["render",SE]]),ME=[{path:"/",name:"Home",component:y0},{path:"/cadastro",name:"Signup",component:Vx},{path:"/confirmacao",name:"Confirmacao",component:yE},{path:"/link-expirado",name:"LinkExpirado",component:CE},{path:"/login",name:"Login",component:Yx},{path:"/onboarding",name:"Onboarding",component:u_},{path:"/dashboard",name:"Dashboard",component:FS},{path:"/configuracao",name:"Configuracao",component:eC},{path:"/clientes",name:"Clientes",component:BC},{path:"/servicos",name:"Servicos",component:lA},{path:"/salas",name:"Salas",component:WP},{path:"/agendamentos",name:"Agendamentos",component:jM},{path:"/comprovantes",name:"Comprovantes",component:fT},{path:"/templates",name:"Templates",component:YT},{path:"/usuarios",name:"Usuarios",component:EA},{path:"/minha-assinatura",name:"MinhaAssinatura",component:uO},{path:"/assinatura-plus",name:"PagamentoPlus",component:hE},{path:"/faturamento",name:"Faturamento",component:IO},{path:"/buscar",name:"SearchProfiles",component:VA},{path:"/planos",name:"Planos",component:wP},{path:"/contato",name:"Contato",component:sO},{path:"/faq",name:"Faq",component:BO},{path:"/politica-de-privacidade",name:"PoliticaDePrivacidade",component:HO},{path:"/termos-de-uso",name:"TermosDeUso",component:KO},{path:"/atendimento/:id",name:"Atendimento",component:FT},{path:"/:slug",name:"PublicPage",component:bP}],zi=Bb({history:gb(),routes:ME});zi.afterEach(e=>{window.gtag&&window.gtag("config","G-XXXXXXXXXX",{page_path:e.fullPath})});const AE=async()=>{var s;const e=window.location.hash.replace(/^#\/?/,""),t=new URLSearchParams(e);if(t.get("error_code")==="otp_expired"||(s=t.get("error_description"))!=null&&s.includes("Email link is invalid")){zi.replace("/link-expirado");return}if(window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")){const n=t.get("access_token"),i=t.get("refresh_token");if(n&&i)try{await U.auth.setSession({access_token:n,refresh_token:i}),zi.replace("/confirmacao")}catch{}}};AE();U.auth.onAuthStateChange(e=>{e==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")&&zi.replace("/confirmacao")});Tg(Ng).use(zi).mount("#app");export{TE as g};
