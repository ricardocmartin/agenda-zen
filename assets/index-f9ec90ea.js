var pp=Object.defineProperty;var mp=(e,t,s)=>t in e?pp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var B=(e,t,s)=>(mp(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ka(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Pt={},Mn=[],Ue=()=>{},gp=()=>!1,rr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ga=e=>e.startsWith("onUpdate:"),Yt=Object.assign,Ya=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},bp=Object.prototype.hasOwnProperty,St=(e,t)=>bp.call(e,t),nt=Array.isArray,An=e=>Gi(e)==="[object Map]",qn=e=>Gi(e)==="[object Set]",Ul=e=>Gi(e)==="[object Date]",ct=e=>typeof e=="function",zt=e=>typeof e=="string",Ve=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",gu=e=>(Rt(e)||ct(e))&&ct(e.then)&&ct(e.catch),bu=Object.prototype.toString,Gi=e=>bu.call(e),yp=e=>Gi(e).slice(8,-1),yu=e=>Gi(e)==="[object Object]",Ja=e=>zt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,pi=Ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ar=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},xp=/-(\w)/g,Ie=ar(e=>e.replace(xp,(t,s)=>s?s.toUpperCase():"")),_p=/\B([A-Z])/g,fn=ar(e=>e.replace(_p,"-$1").toLowerCase()),lr=ar(e=>e.charAt(0).toUpperCase()+e.slice(1)),Or=ar(e=>e?`on${lr(e)}`:""),Ns=(e,t)=>!Object.is(e,t),Mo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},xu=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Bo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $l;const cr=()=>$l||($l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ti(e){if(nt(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=zt(n)?Sp(n):Ti(n);if(i)for(const o in i)t[o]=i[o]}return t}else if(zt(e)||Rt(e))return e}const vp=/;(?![^(]*\))/g,wp=/:([^]+)/,kp=/\/\*[^]*?\*\//g;function Sp(e){const t={};return e.replace(kp,"").split(vp).forEach(s=>{if(s){const n=s.split(wp);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(zt(e))t=e;else if(nt(e))for(let s=0;s<e.length;s++){const n=ie(e[s]);n&&(t+=n+" ")}else if(Rt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Cp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mp=Ka(Cp);function _u(e){return!!e||e===""}function Ap(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Yi(e[n],t[n]);return s}function Yi(e,t){if(e===t)return!0;let s=Ul(e),n=Ul(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ve(e),n=Ve(t),s||n)return e===t;if(s=nt(e),n=nt(t),s||n)return s&&n?Ap(e,t):!1;if(s=Rt(e),n=Rt(t),s||n){if(!s||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!Yi(e[r],t[r]))return!1}}return String(e)===String(t)}function Xa(e,t){return e.findIndex(s=>Yi(s,t))}const vu=e=>!!(e&&e.__v_isRef===!0),P=e=>zt(e)?e:e==null?"":nt(e)||Rt(e)&&(e.toString===bu||!ct(e.toString))?vu(e)?P(e.value):JSON.stringify(e,wu,2):String(e),wu=(e,t)=>vu(t)?wu(e,t.value):An(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],o)=>(s[Dr(n,o)+" =>"]=i,s),{})}:qn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Dr(s))}:Ve(t)?Dr(t):Rt(t)&&!nt(t)&&!yu(t)?String(t):t,Dr=(e,t="")=>{var s;return Ve(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let me;class Pp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=me,!t&&me&&(this.index=(me.scopes||(me.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=me;try{return me=this,t()}finally{me=s}}}on(){++this._on===1&&(this.prevScope=me,me=this)}off(){this._on>0&&--this._on===0&&(me=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Tp(){return me}let Dt;const Ir=new WeakSet;class ku{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,me&&me.active&&me.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ir.has(this)&&(Ir.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bl(this),Mu(this);const t=Dt,s=$e;Dt=this,$e=!0;try{return this.fn()}finally{Au(this),Dt=t,$e=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)tl(t);this.deps=this.depsTail=void 0,Bl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ir.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ca(this)&&this.run()}get dirty(){return ca(this)}}let Su=0,mi,gi;function Cu(e,t=!1){if(e.flags|=8,t){e.next=gi,gi=e;return}e.next=mi,mi=e}function Qa(){Su++}function Za(){if(--Su>0)return;if(gi){let t=gi;for(gi=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;mi;){let t=mi;for(mi=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Mu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Au(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),tl(n),Ep(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function ca(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ei)||(e.globalVersion=Ei,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ca(e))))return;e.flags|=2;const t=e.dep,s=Dt,n=$e;Dt=e,$e=!0;try{Mu(e);const i=e.fn(e._value);(t.version===0||Ns(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Dt=s,$e=n,Au(e),e.flags&=-3}}function tl(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)tl(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ep(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let $e=!0;const Tu=[];function _s(){Tu.push($e),$e=!1}function vs(){const e=Tu.pop();$e=e===void 0?!0:e}function Bl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Dt;Dt=void 0;try{t()}finally{Dt=s}}}let Ei=0;class Op{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class el{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Dt||!$e||Dt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Dt)s=this.activeLink=new Op(Dt,this),Dt.deps?(s.prevDep=Dt.depsTail,Dt.depsTail.nextDep=s,Dt.depsTail=s):Dt.deps=Dt.depsTail=s,Eu(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Dt.depsTail,s.nextDep=void 0,Dt.depsTail.nextDep=s,Dt.depsTail=s,Dt.deps===s&&(Dt.deps=n)}return s}trigger(t){this.version++,Ei++,this.notify(t)}notify(t){Qa();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Za()}}}function Eu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Eu(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const da=new WeakMap,rn=Symbol(""),ua=Symbol(""),Oi=Symbol("");function ee(e,t,s){if($e&&Dt){let n=da.get(e);n||da.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new el),i.map=n,i.key=s),i.track()}}function fs(e,t,s,n,i,o){const r=da.get(e);if(!r){Ei++;return}const a=l=>{l&&l.trigger()};if(Qa(),t==="clear")r.forEach(a);else{const l=nt(e),c=l&&Ja(s);if(l&&s==="length"){const d=Number(n);r.forEach((h,f)=>{(f==="length"||f===Oi||!Ve(f)&&f>=d)&&a(h)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(Oi)),t){case"add":l?c&&a(r.get("length")):(a(r.get(rn)),An(e)&&a(r.get(ua)));break;case"delete":l||(a(r.get(rn)),An(e)&&a(r.get(ua)));break;case"set":An(e)&&a(r.get(rn));break}}Za()}function gn(e){const t=kt(e);return t===e?t:(ee(t,"iterate",Oi),De(e)?t:t.map(Jt))}function dr(e){return ee(e=kt(e),"iterate",Oi),e}const Dp={__proto__:null,[Symbol.iterator](){return Rr(this,Symbol.iterator,Jt)},concat(...e){return gn(this).concat(...e.map(t=>nt(t)?gn(t):t))},entries(){return Rr(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return is(this,"every",e,t,void 0,arguments)},filter(e,t){return is(this,"filter",e,t,s=>s.map(Jt),arguments)},find(e,t){return is(this,"find",e,t,Jt,arguments)},findIndex(e,t){return is(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return is(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return is(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return is(this,"forEach",e,t,void 0,arguments)},includes(...e){return Lr(this,"includes",e)},indexOf(...e){return Lr(this,"indexOf",e)},join(e){return gn(this).join(e)},lastIndexOf(...e){return Lr(this,"lastIndexOf",e)},map(e,t){return is(this,"map",e,t,void 0,arguments)},pop(){return Jn(this,"pop")},push(...e){return Jn(this,"push",e)},reduce(e,...t){return Vl(this,"reduce",e,t)},reduceRight(e,...t){return Vl(this,"reduceRight",e,t)},shift(){return Jn(this,"shift")},some(e,t){return is(this,"some",e,t,void 0,arguments)},splice(...e){return Jn(this,"splice",e)},toReversed(){return gn(this).toReversed()},toSorted(e){return gn(this).toSorted(e)},toSpliced(...e){return gn(this).toSpliced(...e)},unshift(...e){return Jn(this,"unshift",e)},values(){return Rr(this,"values",Jt)}};function Rr(e,t,s){const n=dr(e),i=n[t]();return n!==e&&!De(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const Ip=Array.prototype;function is(e,t,s,n,i,o){const r=dr(e),a=r!==e&&!De(e),l=r[t];if(l!==Ip[t]){const h=l.apply(e,o);return a?Jt(h):h}let c=s;r!==e&&(a?c=function(h,f){return s.call(this,Jt(h),f,e)}:s.length>2&&(c=function(h,f){return s.call(this,h,f,e)}));const d=l.call(r,c,n);return a&&i?i(d):d}function Vl(e,t,s,n){const i=dr(e);let o=s;return i!==e&&(De(e)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,e)}):o=function(r,a,l){return s.call(this,r,Jt(a),l,e)}),i[t](o,...n)}function Lr(e,t,s){const n=kt(e);ee(n,"iterate",Oi);const i=n[t](...s);return(i===-1||i===!1)&&il(s[0])?(s[0]=kt(s[0]),n[t](...s)):i}function Jn(e,t,s=[]){_s(),Qa();const n=kt(e)[t].apply(e,s);return Za(),vs(),n}const Rp=Ka("__proto__,__v_isRef,__isVue"),Ou=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ve));function Lp(e){Ve(e)||(e=String(e));const t=kt(this);return ee(t,"has",e),t.hasOwnProperty(e)}class Du{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?Wp:Fu:o?Lu:Ru).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=nt(t);if(!i){let l;if(r&&(l=Dp[s]))return l;if(s==="hasOwnProperty")return Lp}const a=Reflect.get(t,s,oe(t)?t:n);return(Ve(s)?Ou.has(s):Rp(s))||(i||ee(t,"get",s),o)?a:oe(a)?r&&Ja(s)?a:a.value:Rt(a)?i?Nu(a):ur(a):a}}class Iu extends Du{constructor(t=!1){super(!1,t)}set(t,s,n,i){let o=t[s];if(!this._isShallow){const l=$s(o);if(!De(n)&&!$s(n)&&(o=kt(o),n=kt(n)),!nt(t)&&oe(o)&&!oe(n))return l?!1:(o.value=n,!0)}const r=nt(t)&&Ja(s)?Number(s)<t.length:St(t,s),a=Reflect.set(t,s,n,oe(t)?t:i);return t===kt(i)&&(r?Ns(n,o)&&fs(t,"set",s,n):fs(t,"add",s,n)),a}deleteProperty(t,s){const n=St(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&fs(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!Ve(s)||!Ou.has(s))&&ee(t,"has",s),n}ownKeys(t){return ee(t,"iterate",nt(t)?"length":rn),Reflect.ownKeys(t)}}class Fp extends Du{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const jp=new Iu,Np=new Fp,Up=new Iu(!0);const ha=e=>e,no=e=>Reflect.getPrototypeOf(e);function $p(e,t,s){return function(...n){const i=this.__v_raw,o=kt(i),r=An(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...n),d=s?ha:t?Vo:Jt;return!t&&ee(o,"iterate",l?ua:rn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function io(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Bp(e,t){const s={get(i){const o=this.__v_raw,r=kt(o),a=kt(i);e||(Ns(i,a)&&ee(r,"get",i),ee(r,"get",a));const{has:l}=no(r),c=t?ha:e?Vo:Jt;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&ee(kt(i),"iterate",rn),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=kt(o),a=kt(i);return e||(Ns(i,a)&&ee(r,"has",i),ee(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=kt(a),c=t?ha:e?Vo:Jt;return!e&&ee(l,"iterate",rn),a.forEach((d,h)=>i.call(o,c(d),c(h),r))}};return Yt(s,e?{add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear")}:{add(i){!t&&!De(i)&&!$s(i)&&(i=kt(i));const o=kt(this);return no(o).has.call(o,i)||(o.add(i),fs(o,"add",i,i)),this},set(i,o){!t&&!De(o)&&!$s(o)&&(o=kt(o));const r=kt(this),{has:a,get:l}=no(r);let c=a.call(r,i);c||(i=kt(i),c=a.call(r,i));const d=l.call(r,i);return r.set(i,o),c?Ns(o,d)&&fs(r,"set",i,o):fs(r,"add",i,o),this},delete(i){const o=kt(this),{has:r,get:a}=no(o);let l=r.call(o,i);l||(i=kt(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&fs(o,"delete",i,void 0),c},clear(){const i=kt(this),o=i.size!==0,r=i.clear();return o&&fs(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=$p(i,e,t)}),s}function sl(e,t){const s=Bp(e,t);return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(St(s,i)&&i in n?s:n,i,o)}const Vp={get:sl(!1,!1)},Hp={get:sl(!1,!0)},zp={get:sl(!0,!1)};const Ru=new WeakMap,Lu=new WeakMap,Fu=new WeakMap,Wp=new WeakMap;function qp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kp(e){return e.__v_skip||!Object.isExtensible(e)?0:qp(yp(e))}function ur(e){return $s(e)?e:nl(e,!1,jp,Vp,Ru)}function ju(e){return nl(e,!1,Up,Hp,Lu)}function Nu(e){return nl(e,!0,Np,zp,Fu)}function nl(e,t,s,n,i){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Kp(e);if(o===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,o===2?n:s);return i.set(e,a),a}function Pn(e){return $s(e)?Pn(e.__v_raw):!!(e&&e.__v_isReactive)}function $s(e){return!!(e&&e.__v_isReadonly)}function De(e){return!!(e&&e.__v_isShallow)}function il(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function Gp(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&xu(e,"__v_skip",!0),e}const Jt=e=>Rt(e)?ur(e):e,Vo=e=>Rt(e)?Nu(e):e;function oe(e){return e?e.__v_isRef===!0:!1}function Yp(e){return Uu(e,!1)}function Jp(e){return Uu(e,!0)}function Uu(e,t){return oe(e)?e:new Xp(e,t)}class Xp{constructor(t,s){this.dep=new el,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:kt(t),this._value=s?t:Jt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||De(t)||$s(t);t=n?t:kt(t),Ns(t,s)&&(this._rawValue=t,this._value=n?t:Jt(t),this.dep.trigger())}}function Tn(e){return oe(e)?e.value:e}const Qp={get:(e,t,s)=>t==="__v_raw"?e:Tn(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return oe(i)&&!oe(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function $u(e){return Pn(e)?e:new Proxy(e,Qp)}class Zp{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new el(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ei-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return Cu(this,!0),!0}get value(){const t=this.dep.track();return Pu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tm(e,t,s=!1){let n,i;return ct(e)?n=e:(n=e.get,i=e.set),new Zp(n,i,s)}const oo={},Ho=new WeakMap;let Zs;function em(e,t=!1,s=Zs){if(s){let n=Ho.get(s);n||Ho.set(s,n=[]),n.push(e)}}function sm(e,t,s=Pt){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=S=>i?S:De(S)||i===!1||i===0?ps(S,1):ps(S);let d,h,f,p,m=!1,g=!1;if(oe(e)?(h=()=>e.value,m=De(e)):Pn(e)?(h=()=>c(e),m=!0):nt(e)?(g=!0,m=e.some(S=>Pn(S)||De(S)),h=()=>e.map(S=>{if(oe(S))return S.value;if(Pn(S))return c(S);if(ct(S))return l?l(S,2):S()})):ct(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){_s();try{f()}finally{vs()}}const S=Zs;Zs=d;try{return l?l(e,3,[p]):e(p)}finally{Zs=S}}:h=Ue,t&&i){const S=h,M=i===!0?1/0:i;h=()=>ps(S(),M)}const b=Tp(),_=()=>{d.stop(),b&&b.active&&Ya(b.effects,d)};if(o&&t){const S=t;t=(...M)=>{S(...M),_()}}let k=g?new Array(e.length).fill(oo):oo;const C=S=>{if(!(!(d.flags&1)||!d.dirty&&!S))if(t){const M=d.run();if(i||m||(g?M.some((j,I)=>Ns(j,k[I])):Ns(M,k))){f&&f();const j=Zs;Zs=d;try{const I=[M,k===oo?void 0:g&&k[0]===oo?[]:k,p];l?l(t,3,I):t(...I),k=M}finally{Zs=j}}}else d.run()};return a&&a(C),d=new ku(h),d.scheduler=r?()=>r(C,!1):C,p=S=>em(S,!1,d),f=d.onStop=()=>{const S=Ho.get(d);if(S){if(l)l(S,4);else for(const M of S)M();Ho.delete(d)}},t?n?C(!0):k=d.run():r?r(C.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function ps(e,t=1/0,s){if(t<=0||!Rt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,oe(e))ps(e.value,t,s);else if(nt(e))for(let n=0;n<e.length;n++)ps(e[n],t,s);else if(qn(e)||An(e))e.forEach(n=>{ps(n,t,s)});else if(yu(e)){for(const n in e)ps(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ps(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ji(e,t,s,n){try{return n?e(...n):e()}catch(i){hr(i,t,s)}}function ss(e,t,s,n){if(ct(e)){const i=Ji(e,t,s,n);return i&&gu(i)&&i.catch(o=>{hr(o,t,s)}),i}if(nt(e)){const i=[];for(let o=0;o<e.length;o++)i.push(ss(e[o],t,s,n));return i}}function hr(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Pt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](e,l,c)===!1)return}a=a.parent}if(o){_s(),Ji(o,null,10,[e,l,c]),vs();return}}nm(e,s,i,n,r)}function nm(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const de=[];let Xe=-1;const En=[];let Ps=null,kn=0;const Bu=Promise.resolve();let zo=null;function ol(e){const t=zo||Bu;return e?t.then(this?e.bind(this):e):t}function im(e){let t=Xe+1,s=de.length;for(;t<s;){const n=t+s>>>1,i=de[n],o=Di(i);o<e||o===e&&i.flags&2?t=n+1:s=n}return t}function rl(e){if(!(e.flags&1)){const t=Di(e),s=de[de.length-1];!s||!(e.flags&2)&&t>=Di(s)?de.push(e):de.splice(im(t),0,e),e.flags|=1,Vu()}}function Vu(){zo||(zo=Bu.then(zu))}function om(e){nt(e)?En.push(...e):Ps&&e.id===-1?Ps.splice(kn+1,0,e):e.flags&1||(En.push(e),e.flags|=1),Vu()}function Hl(e,t,s=Xe+1){for(;s<de.length;s++){const n=de[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;de.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Hu(e){if(En.length){const t=[...new Set(En)].sort((s,n)=>Di(s)-Di(n));if(En.length=0,Ps){Ps.push(...t);return}for(Ps=t,kn=0;kn<Ps.length;kn++){const s=Ps[kn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ps=null,kn=0}}const Di=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zu(e){const t=Ue;try{for(Xe=0;Xe<de.length;Xe++){const s=de[Xe];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Ji(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Xe<de.length;Xe++){const s=de[Xe];s&&(s.flags&=-2)}Xe=-1,de.length=0,Hu(),zo=null,(de.length||En.length)&&zu()}}let Xt=null,Wu=null;function Wo(e){const t=Xt;return Xt=e,Wu=e&&e.type.__scopeId||null,t}function tt(e,t=Xt,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Ql(-1);const o=Wo(t);let r;try{r=e(...i)}finally{Wo(o),n._d&&Ql(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function T(e,t){if(Xt===null)return e;const s=gr(Xt),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,a,l=Pt]=t[i];o&&(ct(o)&&(o={mounted:o,updated:o}),o.deep&&ps(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function qs(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(_s(),ss(l,s,8,[e.el,a,e,t]),vs())}}const rm=Symbol("_vte"),am=e=>e.__isTeleport;function al(e,t){e.shapeFlag&6&&e.component?(e.transition=t,al(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function qu(e,t){return ct(e)?(()=>Yt({name:e.name},t,{setup:e}))():e}function Ku(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function qo(e,t,s,n,i=!1){if(nt(e)){e.forEach((m,g)=>qo(m,t&&(nt(t)?t[g]:t),s,n,i));return}if(On(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&qo(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?gr(n.component):n.el,r=i?null:o,{i:a,r:l}=e,c=t&&t.r,d=a.refs===Pt?a.refs={}:a.refs,h=a.setupState,f=kt(h),p=h===Pt?()=>!1:m=>St(f,m);if(c!=null&&c!==l&&(zt(c)?(d[c]=null,p(c)&&(h[c]=null)):oe(c)&&(c.value=null)),ct(l))Ji(l,a,12,[r,d]);else{const m=zt(l),g=oe(l);if(m||g){const b=()=>{if(e.f){const _=m?p(l)?h[l]:d[l]:l.value;i?nt(_)&&Ya(_,o):nt(_)?_.includes(o)||_.push(o):m?(d[l]=[o],p(l)&&(h[l]=d[l])):(l.value=[o],e.k&&(d[e.k]=l.value))}else m?(d[l]=r,p(l)&&(h[l]=r)):g&&(l.value=r,e.k&&(d[e.k]=r))};r?(b.id=-1,we(b,s)):b()}}}cr().requestIdleCallback;cr().cancelIdleCallback;const On=e=>!!e.type.__asyncLoader,Gu=e=>e.type.__isKeepAlive;function lm(e,t){Yu(e,"a",t)}function cm(e,t){Yu(e,"da",t)}function Yu(e,t,s=se){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(fr(t,n,s),s){let i=s.parent;for(;i&&i.parent;)Gu(i.parent.vnode)&&dm(n,t,s,i),i=i.parent}}function dm(e,t,s,n){const i=fr(t,e,n,!0);Ju(()=>{Ya(n[t],i)},s)}function fr(e,t,s=se,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{_s();const a=Xi(s),l=ss(t,s,e,r);return a(),vs(),l});return n?i.unshift(o):i.push(o),o}}const ks=e=>(t,s=se)=>{(!Li||e==="sp")&&fr(e,(...n)=>t(...n),s)},um=ks("bm"),hm=ks("m"),fm=ks("bu"),pm=ks("u"),mm=ks("bum"),Ju=ks("um"),gm=ks("sp"),bm=ks("rtg"),ym=ks("rtc");function xm(e,t=se){fr("ec",e,t)}const Xu="components";function z(e,t){return vm(Xu,e,!0,t)||e}const _m=Symbol.for("v-ndc");function vm(e,t,s=!0,n=!1){const i=Xt||se;if(i){const o=i.type;if(e===Xu){const a=ag(o,!1);if(a&&(a===t||a===Ie(t)||a===lr(Ie(t))))return o}const r=zl(i[e]||o[e],t)||zl(i.appContext[e],t);return!r&&n?o:r}}function zl(e,t){return e&&(e[t]||e[Ie(t)]||e[lr(Ie(t))])}function ft(e,t,s,n){let i;const o=s&&s[n],r=nt(e);if(r||zt(e)){const a=r&&Pn(e);let l=!1,c=!1;a&&(l=!De(e),c=$s(e),e=dr(e)),i=new Array(e.length);for(let d=0,h=e.length;d<h;d++)i[d]=t(l?c?Vo(Jt(e[d])):Jt(e[d]):e[d],d,void 0,o&&o[d])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Rt(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o&&o[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=t(e[d],d,l,o&&o[l])}}else i=[];return s&&(s[n]=i),i}function Qu(e,t,s={},n,i){if(Xt.ce||Xt.parent&&On(Xt.parent)&&Xt.parent.ce)return t!=="default"&&(s.name=t),v(),ue(Y,null,[O("slot",s,n&&n())],64);let o=e[t];o&&o._c&&(o._d=!1),v();const r=o&&Zu(o(s)),a=s.key||r&&r.key,l=ue(Y,{key:(a&&!Ve(a)?a:`_${t}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Zu(e){return e.some(t=>Ri(t)?!(t.type===ws||t.type===Y&&!Zu(t.children)):!0)?e:null}const fa=e=>e?yh(e)?gr(e):fa(e.parent):null,bi=Yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fa(e.parent),$root:e=>fa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ll(e),$forceUpdate:e=>e.f||(e.f=()=>{rl(e.update)}),$nextTick:e=>e.n||(e.n=ol.bind(e.proxy)),$watch:e=>Vm.bind(e)}),Fr=(e,t)=>e!==Pt&&!e.__isScriptSetup&&St(e,t),wm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(Fr(n,t))return r[t]=1,n[t];if(i!==Pt&&St(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&St(c,t))return r[t]=3,o[t];if(s!==Pt&&St(s,t))return r[t]=4,s[t];pa&&(r[t]=0)}}const d=bi[t];let h,f;if(d)return t==="$attrs"&&ee(e.attrs,"get",""),d(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(s!==Pt&&St(s,t))return r[t]=4,s[t];if(f=l.config.globalProperties,St(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return Fr(i,t)?(i[t]=s,!0):n!==Pt&&St(n,t)?(n[t]=s,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||e!==Pt&&St(e,r)||Fr(t,r)||(a=o[0])&&St(a,r)||St(n,r)||St(bi,r)||St(i.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:St(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Wl(e){return nt(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let pa=!0;function km(e){const t=ll(e),s=e.proxy,n=e.ctx;pa=!1,t.beforeCreate&&ql(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:b,beforeDestroy:_,beforeUnmount:k,destroyed:C,unmounted:S,render:M,renderTracked:j,renderTriggered:I,errorCaptured:$,serverPrefetch:X,expose:it,inheritAttrs:rt,components:dt,directives:At,filters:Wt}=t;if(c&&Sm(c,n,null),r)for(const ot in r){const ut=r[ot];ct(ut)&&(n[ot]=ut.bind(s))}if(i){const ot=i.call(s,s);Rt(ot)&&(e.data=ur(ot))}if(pa=!0,o)for(const ot in o){const ut=o[ot],Tt=ct(ut)?ut.bind(s,s):ct(ut.get)?ut.get.bind(s,s):Ue,ae=!ct(ut)&&ct(ut.set)?ut.set.bind(s):Ue,le=je({get:Tt,set:ae});Object.defineProperty(n,ot,{enumerable:!0,configurable:!0,get:()=>le.value,set:Bt=>le.value=Bt})}if(a)for(const ot in a)th(a[ot],n,s,ot);if(l){const ot=ct(l)?l.call(s):l;Reflect.ownKeys(ot).forEach(ut=>{Ao(ut,ot[ut])})}d&&ql(d,e,"c");function lt(ot,ut){nt(ut)?ut.forEach(Tt=>ot(Tt.bind(s))):ut&&ot(ut.bind(s))}if(lt(um,h),lt(hm,f),lt(fm,p),lt(pm,m),lt(lm,g),lt(cm,b),lt(xm,$),lt(ym,j),lt(bm,I),lt(mm,k),lt(Ju,S),lt(gm,X),nt(it))if(it.length){const ot=e.exposed||(e.exposed={});it.forEach(ut=>{Object.defineProperty(ot,ut,{get:()=>s[ut],set:Tt=>s[ut]=Tt})})}else e.exposed||(e.exposed={});M&&e.render===Ue&&(e.render=M),rt!=null&&(e.inheritAttrs=rt),dt&&(e.components=dt),At&&(e.directives=At),X&&Ku(e)}function Sm(e,t,s=Ue){nt(e)&&(e=ma(e));for(const n in e){const i=e[n];let o;Rt(i)?"default"in i?o=ys(i.from||n,i.default,!0):o=ys(i.from||n):o=ys(i),oe(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function ql(e,t,s){ss(nt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function th(e,t,s,n){let i=n.includes(".")?fh(s,n):()=>s[n];if(zt(e)){const o=t[e];ct(o)&&Po(i,o)}else if(ct(e))Po(i,e.bind(s));else if(Rt(e))if(nt(e))e.forEach(o=>th(o,t,s,n));else{const o=ct(e.handler)?e.handler.bind(s):t[e.handler];ct(o)&&Po(i,o,e)}}function ll(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!s&&!n?l=t:(l={},i.length&&i.forEach(c=>Ko(l,c,r,!0)),Ko(l,t,r)),Rt(t)&&o.set(t,l),l}function Ko(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&Ko(e,o,s,!0),i&&i.forEach(r=>Ko(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const a=Cm[r]||s&&s[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const Cm={data:Kl,props:Gl,emits:Gl,methods:ri,computed:ri,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:ri,directives:ri,watch:Am,provide:Kl,inject:Mm};function Kl(e,t){return t?e?function(){return Yt(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function Mm(e,t){return ri(ma(e),ma(t))}function ma(e){if(nt(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function ri(e,t){return e?Yt(Object.create(null),e,t):t}function Gl(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:Yt(Object.create(null),Wl(e),Wl(t??{})):t}function Am(e,t){if(!e)return t;if(!t)return e;const s=Yt(Object.create(null),e);for(const n in t)s[n]=ce(e[n],t[n]);return s}function eh(){return{app:null,config:{isNativeTag:gp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pm=0;function Tm(e,t){return function(n,i=null){ct(n)||(n=Yt({},n)),i!=null&&!Rt(i)&&(i=null);const o=eh(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Pm++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:cg,get config(){return o.config},set config(d){},use(d,...h){return r.has(d)||(d&&ct(d.install)?(r.add(d),d.install(c,...h)):ct(d)&&(r.add(d),d(c,...h))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,h){return h?(o.components[d]=h,c):o.components[d]},directive(d,h){return h?(o.directives[d]=h,c):o.directives[d]},mount(d,h,f){if(!l){const p=c._ceVNode||O(n,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&t?t(p,d):e(p,d,f),l=!0,c._container=d,d.__vue_app__=c,gr(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(ss(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,h){return o.provides[d]=h,c},runWithContext(d){const h=Dn;Dn=c;try{return d()}finally{Dn=h}}};return c}}let Dn=null;function Ao(e,t){if(se){let s=se.provides;const n=se.parent&&se.parent.provides;n===s&&(s=se.provides=Object.create(n)),s[e]=t}}function ys(e,t,s=!1){const n=se||Xt;if(n||Dn){const i=Dn?Dn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ct(t)?t.call(n&&n.proxy):t}}const sh={},nh=()=>Object.create(sh),ih=e=>Object.getPrototypeOf(e)===sh;function Em(e,t,s,n=!1){const i={},o=nh();e.propsDefaults=Object.create(null),oh(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:ju(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Om(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,a=kt(i),[l]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(pr(e.emitsOptions,f))continue;const p=t[f];if(l)if(St(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const m=Ie(f);i[m]=ga(l,a,m,p,e,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{oh(e,t,i,o)&&(c=!0);let d;for(const h in a)(!t||!St(t,h)&&((d=fn(h))===h||!St(t,d)))&&(l?s&&(s[h]!==void 0||s[d]!==void 0)&&(i[h]=ga(l,a,h,void 0,e,!0)):delete i[h]);if(o!==a)for(const h in o)(!t||!St(t,h))&&(delete o[h],c=!0)}c&&fs(e.attrs,"set","")}function oh(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(pi(l))continue;const c=t[l];let d;i&&St(i,d=Ie(l))?!o||!o.includes(d)?s[d]=c:(a||(a={}))[d]=c:pr(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=kt(s),c=a||Pt;for(let d=0;d<o.length;d++){const h=o[d];s[h]=ga(i,l,h,c[h],e,!St(c,h))}}return r}function ga(e,t,s,n,i,o){const r=e[s];if(r!=null){const a=St(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ct(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const d=Xi(i);n=c[s]=l.call(null,t),d()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===fn(s))&&(n=!0))}return n}const Dm=new WeakMap;function rh(e,t,s=!1){const n=s?Dm:t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},a=[];let l=!1;if(!ct(e)){const d=h=>{l=!0;const[f,p]=rh(h,t,!0);Yt(r,f),p&&a.push(...p)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!l)return Rt(e)&&n.set(e,Mn),Mn;if(nt(o))for(let d=0;d<o.length;d++){const h=Ie(o[d]);Yl(h)&&(r[h]=Pt)}else if(o)for(const d in o){const h=Ie(d);if(Yl(h)){const f=o[d],p=r[h]=nt(f)||ct(f)?{type:f}:Yt({},f),m=p.type;let g=!1,b=!0;if(nt(m))for(let _=0;_<m.length;++_){const k=m[_],C=ct(k)&&k.name;if(C==="Boolean"){g=!0;break}else C==="String"&&(b=!1)}else g=ct(m)&&m.name==="Boolean";p[0]=g,p[1]=b,(g||St(p,"default"))&&a.push(h)}}const c=[r,a];return Rt(e)&&n.set(e,c),c}function Yl(e){return e[0]!=="$"&&!pi(e)}const cl=e=>e[0]==="_"||e==="$stable",dl=e=>nt(e)?e.map(Ze):[Ze(e)],Im=(e,t,s)=>{if(t._n)return t;const n=tt((...i)=>dl(t(...i)),s);return n._c=!1,n},ah=(e,t,s)=>{const n=e._ctx;for(const i in e){if(cl(i))continue;const o=e[i];if(ct(o))t[i]=Im(i,o,n);else if(o!=null){const r=dl(o);t[i]=()=>r}}},lh=(e,t)=>{const s=dl(t);e.slots.default=()=>s},ch=(e,t,s)=>{for(const n in t)(s||!cl(n))&&(e[n]=t[n])},Rm=(e,t,s)=>{const n=e.slots=nh();if(e.vnode.shapeFlag&32){const i=t._;i?(ch(n,t,s),s&&xu(n,"_",i,!0)):ah(t,n)}else t&&lh(e,t)},Lm=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=Pt;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:ch(i,t,s):(o=!t.$stable,ah(t,i)),r=t}else t&&(lh(e,t),r={default:1});if(o)for(const a in i)!cl(a)&&r[a]==null&&delete i[a]},we=Ym;function Fm(e){return jm(e)}function jm(e,t){const s=cr();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=Ue,insertStaticContent:m}=e,g=(y,x,A,R=null,E=null,N=null,q=void 0,W=null,H=!!x.dynamicChildren)=>{if(y===x)return;y&&!Xn(y,x)&&(R=D(y),Bt(y,E,N,!0),y=null),x.patchFlag===-2&&(H=!1,x.dynamicChildren=null);const{type:U,ref:et,shapeFlag:G}=x;switch(U){case mr:b(y,x,A,R);break;case ws:_(y,x,A,R);break;case To:y==null&&k(x,A,R,q);break;case Y:dt(y,x,A,R,E,N,q,W,H);break;default:G&1?M(y,x,A,R,E,N,q,W,H):G&6?At(y,x,A,R,E,N,q,W,H):(G&64||G&128)&&U.process(y,x,A,R,E,N,q,W,H,Q)}et!=null&&E&&qo(et,y&&y.ref,N,x||y,!x)},b=(y,x,A,R)=>{if(y==null)n(x.el=a(x.children),A,R);else{const E=x.el=y.el;x.children!==y.children&&c(E,x.children)}},_=(y,x,A,R)=>{y==null?n(x.el=l(x.children||""),A,R):x.el=y.el},k=(y,x,A,R)=>{[y.el,y.anchor]=m(y.children,x,A,R,y.el,y.anchor)},C=({el:y,anchor:x},A,R)=>{let E;for(;y&&y!==x;)E=f(y),n(y,A,R),y=E;n(x,A,R)},S=({el:y,anchor:x})=>{let A;for(;y&&y!==x;)A=f(y),i(y),y=A;i(x)},M=(y,x,A,R,E,N,q,W,H)=>{x.type==="svg"?q="svg":x.type==="math"&&(q="mathml"),y==null?j(x,A,R,E,N,q,W,H):X(y,x,E,N,q,W,H)},j=(y,x,A,R,E,N,q,W)=>{let H,U;const{props:et,shapeFlag:G,transition:Z,dirs:at}=y;if(H=y.el=r(y.type,N,et&&et.is,et),G&8?d(H,y.children):G&16&&$(y.children,H,null,R,E,jr(y,N),q,W),at&&qs(y,null,R,"created"),I(H,y,y.scopeId,q,R),et){for(const Et in et)Et!=="value"&&!pi(Et)&&o(H,Et,null,et[Et],N,R);"value"in et&&o(H,"value",null,et.value,N),(U=et.onVnodeBeforeMount)&&Ge(U,R,y)}at&&qs(y,null,R,"beforeMount");const _t=Nm(E,Z);_t&&Z.beforeEnter(H),n(H,x,A),((U=et&&et.onVnodeMounted)||_t||at)&&we(()=>{U&&Ge(U,R,y),_t&&Z.enter(H),at&&qs(y,null,R,"mounted")},E)},I=(y,x,A,R,E)=>{if(A&&p(y,A),R)for(let N=0;N<R.length;N++)p(y,R[N]);if(E){let N=E.subTree;if(x===N||mh(N.type)&&(N.ssContent===x||N.ssFallback===x)){const q=E.vnode;I(y,q,q.scopeId,q.slotScopeIds,E.parent)}}},$=(y,x,A,R,E,N,q,W,H=0)=>{for(let U=H;U<y.length;U++){const et=y[U]=W?Ts(y[U]):Ze(y[U]);g(null,et,x,A,R,E,N,q,W)}},X=(y,x,A,R,E,N,q)=>{const W=x.el=y.el;let{patchFlag:H,dynamicChildren:U,dirs:et}=x;H|=y.patchFlag&16;const G=y.props||Pt,Z=x.props||Pt;let at;if(A&&Ks(A,!1),(at=Z.onVnodeBeforeUpdate)&&Ge(at,A,x,y),et&&qs(x,y,A,"beforeUpdate"),A&&Ks(A,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&d(W,""),U?it(y.dynamicChildren,U,W,A,R,jr(x,E),N):q||ut(y,x,W,null,A,R,jr(x,E),N,!1),H>0){if(H&16)rt(W,G,Z,A,E);else if(H&2&&G.class!==Z.class&&o(W,"class",null,Z.class,E),H&4&&o(W,"style",G.style,Z.style,E),H&8){const _t=x.dynamicProps;for(let Et=0;Et<_t.length;Et++){const Ct=_t[Et],xe=G[Ct],Zt=Z[Ct];(Zt!==xe||Ct==="value")&&o(W,Ct,xe,Zt,E,A)}}H&1&&y.children!==x.children&&d(W,x.children)}else!q&&U==null&&rt(W,G,Z,A,E);((at=Z.onVnodeUpdated)||et)&&we(()=>{at&&Ge(at,A,x,y),et&&qs(x,y,A,"updated")},R)},it=(y,x,A,R,E,N,q)=>{for(let W=0;W<x.length;W++){const H=y[W],U=x[W],et=H.el&&(H.type===Y||!Xn(H,U)||H.shapeFlag&70)?h(H.el):A;g(H,U,et,null,R,E,N,q,!0)}},rt=(y,x,A,R,E)=>{if(x!==A){if(x!==Pt)for(const N in x)!pi(N)&&!(N in A)&&o(y,N,x[N],null,E,R);for(const N in A){if(pi(N))continue;const q=A[N],W=x[N];q!==W&&N!=="value"&&o(y,N,W,q,E,R)}"value"in A&&o(y,"value",x.value,A.value,E)}},dt=(y,x,A,R,E,N,q,W,H)=>{const U=x.el=y?y.el:a(""),et=x.anchor=y?y.anchor:a("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:at}=x;at&&(W=W?W.concat(at):at),y==null?(n(U,A,R),n(et,A,R),$(x.children||[],A,et,E,N,q,W,H)):G>0&&G&64&&Z&&y.dynamicChildren?(it(y.dynamicChildren,Z,A,E,N,q,W),(x.key!=null||E&&x===E.subTree)&&dh(y,x,!0)):ut(y,x,A,et,E,N,q,W,H)},At=(y,x,A,R,E,N,q,W,H)=>{x.slotScopeIds=W,y==null?x.shapeFlag&512?E.ctx.activate(x,A,R,q,H):Wt(x,A,R,E,N,q,H):xt(y,x,H)},Wt=(y,x,A,R,E,N,q)=>{const W=y.component=sg(y,R,E);if(Gu(y)&&(W.ctx.renderer=Q),ng(W,!1,q),W.asyncDep){if(E&&E.registerDep(W,lt,q),!y.el){const H=W.subTree=O(ws);_(null,H,x,A)}}else lt(W,y,x,A,E,N,q)},xt=(y,x,A)=>{const R=x.component=y.component;if(Km(y,x,A))if(R.asyncDep&&!R.asyncResolved){ot(R,x,A);return}else R.next=x,R.update();else x.el=y.el,R.vnode=x},lt=(y,x,A,R,E,N,q)=>{const W=()=>{if(y.isMounted){let{next:G,bu:Z,u:at,parent:_t,vnode:Et}=y;{const _e=uh(y);if(_e){G&&(G.el=Et.el,ot(y,G,q)),_e.asyncDep.then(()=>{y.isUnmounted||W()});return}}let Ct=G,xe;Ks(y,!1),G?(G.el=Et.el,ot(y,G,q)):G=Et,Z&&Mo(Z),(xe=G.props&&G.props.onVnodeBeforeUpdate)&&Ge(xe,_t,G,Et),Ks(y,!0);const Zt=Nr(y),Le=y.subTree;y.subTree=Zt,g(Le,Zt,h(Le.el),D(Le),y,E,N),G.el=Zt.el,Ct===null&&Gm(y,Zt.el),at&&we(at,E),(xe=G.props&&G.props.onVnodeUpdated)&&we(()=>Ge(xe,_t,G,Et),E)}else{let G;const{el:Z,props:at}=x,{bm:_t,m:Et,parent:Ct,root:xe,type:Zt}=y,Le=On(x);if(Ks(y,!1),_t&&Mo(_t),!Le&&(G=at&&at.onVnodeBeforeMount)&&Ge(G,Ct,x),Ks(y,!0),Z&&Nt){const _e=()=>{y.subTree=Nr(y),Nt(Z,y.subTree,y,E,null)};Le&&Zt.__asyncHydrate?Zt.__asyncHydrate(Z,y,_e):_e()}else{xe.ce&&xe.ce._injectChildStyle(Zt);const _e=y.subTree=Nr(y);g(null,_e,A,R,y,E,N),x.el=_e.el}if(Et&&we(Et,E),!Le&&(G=at&&at.onVnodeMounted)){const _e=x;we(()=>Ge(G,Ct,_e),E)}(x.shapeFlag&256||Ct&&On(Ct.vnode)&&Ct.vnode.shapeFlag&256)&&y.a&&we(y.a,E),y.isMounted=!0,x=A=R=null}};y.scope.on();const H=y.effect=new ku(W);y.scope.off();const U=y.update=H.run.bind(H),et=y.job=H.runIfDirty.bind(H);et.i=y,et.id=y.uid,H.scheduler=()=>rl(et),Ks(y,!0),U()},ot=(y,x,A)=>{x.component=y;const R=y.vnode.props;y.vnode=x,y.next=null,Om(y,x.props,R,A),Lm(y,x.children,A),_s(),Hl(y),vs()},ut=(y,x,A,R,E,N,q,W,H=!1)=>{const U=y&&y.children,et=y?y.shapeFlag:0,G=x.children,{patchFlag:Z,shapeFlag:at}=x;if(Z>0){if(Z&128){ae(U,G,A,R,E,N,q,W,H);return}else if(Z&256){Tt(U,G,A,R,E,N,q,W,H);return}}at&8?(et&16&&Ht(U,E,N),G!==U&&d(A,G)):et&16?at&16?ae(U,G,A,R,E,N,q,W,H):Ht(U,E,N,!0):(et&8&&d(A,""),at&16&&$(G,A,R,E,N,q,W,H))},Tt=(y,x,A,R,E,N,q,W,H)=>{y=y||Mn,x=x||Mn;const U=y.length,et=x.length,G=Math.min(U,et);let Z;for(Z=0;Z<G;Z++){const at=x[Z]=H?Ts(x[Z]):Ze(x[Z]);g(y[Z],at,A,null,E,N,q,W,H)}U>et?Ht(y,E,N,!0,!1,G):$(x,A,R,E,N,q,W,H,G)},ae=(y,x,A,R,E,N,q,W,H)=>{let U=0;const et=x.length;let G=y.length-1,Z=et-1;for(;U<=G&&U<=Z;){const at=y[U],_t=x[U]=H?Ts(x[U]):Ze(x[U]);if(Xn(at,_t))g(at,_t,A,null,E,N,q,W,H);else break;U++}for(;U<=G&&U<=Z;){const at=y[G],_t=x[Z]=H?Ts(x[Z]):Ze(x[Z]);if(Xn(at,_t))g(at,_t,A,null,E,N,q,W,H);else break;G--,Z--}if(U>G){if(U<=Z){const at=Z+1,_t=at<et?x[at].el:R;for(;U<=Z;)g(null,x[U]=H?Ts(x[U]):Ze(x[U]),A,_t,E,N,q,W,H),U++}}else if(U>Z)for(;U<=G;)Bt(y[U],E,N,!0),U++;else{const at=U,_t=U,Et=new Map;for(U=_t;U<=Z;U++){const ve=x[U]=H?Ts(x[U]):Ze(x[U]);ve.key!=null&&Et.set(ve.key,U)}let Ct,xe=0;const Zt=Z-_t+1;let Le=!1,_e=0;const Yn=new Array(Zt);for(U=0;U<Zt;U++)Yn[U]=0;for(U=at;U<=G;U++){const ve=y[U];if(xe>=Zt){Bt(ve,E,N,!0);continue}let Ke;if(ve.key!=null)Ke=Et.get(ve.key);else for(Ct=_t;Ct<=Z;Ct++)if(Yn[Ct-_t]===0&&Xn(ve,x[Ct])){Ke=Ct;break}Ke===void 0?Bt(ve,E,N,!0):(Yn[Ke-_t]=U+1,Ke>=_e?_e=Ke:Le=!0,g(ve,x[Ke],A,null,E,N,q,W,H),xe++)}const jl=Le?Um(Yn):Mn;for(Ct=jl.length-1,U=Zt-1;U>=0;U--){const ve=_t+U,Ke=x[ve],Nl=ve+1<et?x[ve+1].el:R;Yn[U]===0?g(null,Ke,A,Nl,E,N,q,W,H):Le&&(Ct<0||U!==jl[Ct]?le(Ke,A,Nl,2):Ct--)}}},le=(y,x,A,R,E=null)=>{const{el:N,type:q,transition:W,children:H,shapeFlag:U}=y;if(U&6){le(y.component.subTree,x,A,R);return}if(U&128){y.suspense.move(x,A,R);return}if(U&64){q.move(y,x,A,Q);return}if(q===Y){n(N,x,A);for(let G=0;G<H.length;G++)le(H[G],x,A,R);n(y.anchor,x,A);return}if(q===To){C(y,x,A);return}if(R!==2&&U&1&&W)if(R===0)W.beforeEnter(N),n(N,x,A),we(()=>W.enter(N),E);else{const{leave:G,delayLeave:Z,afterLeave:at}=W,_t=()=>{y.ctx.isUnmounted?i(N):n(N,x,A)},Et=()=>{G(N,()=>{_t(),at&&at()})};Z?Z(N,_t,Et):Et()}else n(N,x,A)},Bt=(y,x,A,R=!1,E=!1)=>{const{type:N,props:q,ref:W,children:H,dynamicChildren:U,shapeFlag:et,patchFlag:G,dirs:Z,cacheIndex:at}=y;if(G===-2&&(E=!1),W!=null&&(_s(),qo(W,null,A,y,!0),vs()),at!=null&&(x.renderCache[at]=void 0),et&256){x.ctx.deactivate(y);return}const _t=et&1&&Z,Et=!On(y);let Ct;if(Et&&(Ct=q&&q.onVnodeBeforeUnmount)&&Ge(Ct,x,y),et&6)qe(y.component,A,R);else{if(et&128){y.suspense.unmount(A,R);return}_t&&qs(y,null,x,"beforeUnmount"),et&64?y.type.remove(y,x,A,Q,R):U&&!U.hasOnce&&(N!==Y||G>0&&G&64)?Ht(U,x,A,!1,!0):(N===Y&&G&384||!E&&et&16)&&Ht(H,x,A),R&&Ee(y)}(Et&&(Ct=q&&q.onVnodeUnmounted)||_t)&&we(()=>{Ct&&Ge(Ct,x,y),_t&&qs(y,null,x,"unmounted")},A)},Ee=y=>{const{type:x,el:A,anchor:R,transition:E}=y;if(x===Y){he(A,R);return}if(x===To){S(y);return}const N=()=>{i(A),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(y.shapeFlag&1&&E&&!E.persisted){const{leave:q,delayLeave:W}=E,H=()=>q(A,N);W?W(y.el,N,H):H()}else N()},he=(y,x)=>{let A;for(;y!==x;)A=f(y),i(y),y=A;i(x)},qe=(y,x,A)=>{const{bum:R,scope:E,job:N,subTree:q,um:W,m:H,a:U,parent:et,slots:{__:G}}=y;Jl(H),Jl(U),R&&Mo(R),et&&nt(G)&&G.forEach(Z=>{et.renderCache[Z]=void 0}),E.stop(),N&&(N.flags|=8,Bt(q,y,x,A)),W&&we(W,x),we(()=>{y.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Ht=(y,x,A,R=!1,E=!1,N=0)=>{for(let q=N;q<y.length;q++)Bt(y[q],x,A,R,E)},D=y=>{if(y.shapeFlag&6)return D(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const x=f(y.anchor||y.el),A=x&&x[rm];return A?f(A):x};let J=!1;const K=(y,x,A)=>{y==null?x._vnode&&Bt(x._vnode,null,null,!0):g(x._vnode||null,y,x,null,null,null,A),x._vnode=y,J||(J=!0,Hl(),Hu(),J=!1)},Q={p:g,um:Bt,m:le,r:Ee,mt:Wt,mc:$,pc:ut,pbc:it,n:D,o:e};let vt,Nt;return t&&([vt,Nt]=t(Q)),{render:K,hydrate:vt,createApp:Tm(K,vt)}}function jr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ks({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Nm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function dh(e,t,s=!1){const n=e.children,i=t.children;if(nt(n)&&nt(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Ts(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&dh(r,a)),a.type===mr&&(a.el=r.el),a.type===ws&&!a.el&&(a.el=r.el)}}function Um(e){const t=e.slice(),s=[0];let n,i,o,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=s[s.length-1],e[i]<c){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,e[s[a]]<c?o=a+1:r=a;c<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}function uh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:uh(t)}function Jl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $m=Symbol.for("v-scx"),Bm=()=>ys($m);function Po(e,t,s){return hh(e,t,s)}function hh(e,t,s=Pt){const{immediate:n,deep:i,flush:o,once:r}=s,a=Yt({},s),l=t&&n||!t&&o!=="post";let c;if(Li){if(o==="sync"){const p=Bm();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ue,p.resume=Ue,p.pause=Ue,p}}const d=se;a.call=(p,m,g)=>ss(p,d,m,g);let h=!1;o==="post"?a.scheduler=p=>{we(p,d&&d.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():rl(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=sm(e,t,a);return Li&&(c?c.push(f):l&&f()),f}function Vm(e,t,s){const n=this.proxy,i=zt(e)?e.includes(".")?fh(n,e):()=>n[e]:e.bind(n,n);let o;ct(t)?o=t:(o=t.handler,s=t);const r=Xi(this),a=hh(i,o.bind(n),s);return r(),a}function fh(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Hm=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ie(t)}Modifiers`]||e[`${fn(t)}Modifiers`];function zm(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Pt;let i=s;const o=t.startsWith("update:"),r=o&&Hm(n,t.slice(7));r&&(r.trim&&(i=s.map(d=>zt(d)?d.trim():d)),r.number&&(i=s.map(Bo)));let a,l=n[a=Or(t)]||n[a=Or(Ie(t))];!l&&o&&(l=n[a=Or(fn(t))]),l&&ss(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ss(c,e,6,i)}}function ph(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},a=!1;if(!ct(e)){const l=c=>{const d=ph(c,t,!0);d&&(a=!0,Yt(r,d))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Rt(e)&&n.set(e,null),null):(nt(o)?o.forEach(l=>r[l]=null):Yt(r,o),Rt(e)&&n.set(e,r),r)}function pr(e,t){return!e||!rr(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,fn(t))||St(e,t))}function Nr(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:d,props:h,data:f,setupState:p,ctx:m,inheritAttrs:g}=e,b=Wo(e);let _,k;try{if(s.shapeFlag&4){const S=i||n,M=S;_=Ze(c.call(M,S,d,h,p,f,m)),k=a}else{const S=t;_=Ze(S.length>1?S(h,{attrs:a,slots:r,emit:l}):S(h,null)),k=t.props?a:Wm(a)}}catch(S){yi.length=0,hr(S,e,1),_=O(ws)}let C=_;if(k&&g!==!1){const S=Object.keys(k),{shapeFlag:M}=C;S.length&&M&7&&(o&&S.some(Ga)&&(k=qm(k,o)),C=Fn(C,k,!1,!0))}return s.dirs&&(C=Fn(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&al(C,s.transition),_=C,Wo(b),_}const Wm=e=>{let t;for(const s in e)(s==="class"||s==="style"||rr(s))&&((t||(t={}))[s]=e[s]);return t},qm=(e,t)=>{const s={};for(const n in e)(!Ga(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Km(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Xl(n,r,c):!!r;if(l&8){const d=t.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(r[f]!==n[f]&&!pr(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Xl(n,r,c):!0:!!r;return!1}function Xl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!pr(s,o))return!0}return!1}function Gm({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const mh=e=>e.__isSuspense;function Ym(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):om(e)}const Y=Symbol.for("v-fgt"),mr=Symbol.for("v-txt"),ws=Symbol.for("v-cmt"),To=Symbol.for("v-stc"),yi=[];let Me=null;function v(e=!1){yi.push(Me=e?null:[])}function Jm(){yi.pop(),Me=yi[yi.length-1]||null}let Ii=1;function Ql(e,t=!1){Ii+=e,e<0&&Me&&t&&(Me.hasOnce=!0)}function gh(e){return e.dynamicChildren=Ii>0?Me||Mn:null,Jm(),Ii>0&&Me&&Me.push(e),e}function w(e,t,s,n,i,o){return gh(u(e,t,s,n,i,o,!0))}function ue(e,t,s,n,i){return gh(O(e,t,s,n,i,!0))}function Ri(e){return e?e.__v_isVNode===!0:!1}function Xn(e,t){return e.type===t.type&&e.key===t.key}const bh=({key:e})=>e??null,Eo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?zt(e)||oe(e)||ct(e)?{i:Xt,r:e,k:t,f:!!s}:e:null);function u(e,t=null,s=null,n=0,i=null,o=e===Y?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&bh(t),ref:t&&Eo(t),scopeId:Wu,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Xt};return a?(ul(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=zt(s)?8:16),Ii>0&&!r&&Me&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Me.push(l),l}const O=Xm;function Xm(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===_m)&&(e=ws),Ri(e)){const a=Fn(e,t,!0);return s&&ul(a,s),Ii>0&&!o&&Me&&(a.shapeFlag&6?Me[Me.indexOf(e)]=a:Me.push(a)),a.patchFlag=-2,a}if(lg(e)&&(e=e.__vccOpts),t){t=Qm(t);let{class:a,style:l}=t;a&&!zt(a)&&(t.class=ie(a)),Rt(l)&&(il(l)&&!nt(l)&&(l=Yt({},l)),t.style=Ti(l))}const r=zt(e)?1:mh(e)?128:am(e)?64:Rt(e)?4:ct(e)?2:0;return u(e,t,s,n,i,r,o,!0)}function Qm(e){return e?il(e)||ih(e)?Yt({},e):e:null}function Fn(e,t,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=e,c=t?Zm(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&bh(c),ref:t&&t.ref?s&&o?nt(o)?o.concat(Eo(t)):[o,Eo(t)]:Eo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Y?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fn(e.ssContent),ssFallback:e.ssFallback&&Fn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&al(d,l.clone(d)),d}function st(e=" ",t=0){return O(mr,null,e,t)}function dn(e,t){const s=O(To,null,e);return s.staticCount=t,s}function V(e="",t=!1){return t?(v(),ue(ws,null,e)):O(ws,null,e)}function Ze(e){return e==null||typeof e=="boolean"?O(ws):nt(e)?O(Y,null,e.slice()):Ri(e)?Ts(e):O(mr,null,String(e))}function Ts(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Fn(e)}function ul(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(nt(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),ul(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!ih(t)?t._ctx=Xt:i===3&&Xt&&(Xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:Xt},s=32):(t=String(t),n&64?(s=16,t=[st(t)]):s=8);e.children=t,e.shapeFlag|=s}function Zm(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(i==="style")t.style=Ti([t.style,n.style]);else if(rr(i)){const o=t[i],r=n[i];r&&o!==r&&!(nt(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function Ge(e,t,s,n=null){ss(e,t,7,[s,n])}const tg=eh();let eg=0;function sg(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||tg,o={uid:eg++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rh(n,i),emitsOptions:ph(n,i),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:n.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=zm.bind(null,o),e.ce&&e.ce(o),o}let se=null,Go,ba;{const e=cr(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Go=t("__VUE_INSTANCE_SETTERS__",s=>se=s),ba=t("__VUE_SSR_SETTERS__",s=>Li=s)}const Xi=e=>{const t=se;return Go(e),e.scope.on(),()=>{e.scope.off(),Go(t)}},Zl=()=>{se&&se.scope.off(),Go(null)};function yh(e){return e.vnode.shapeFlag&4}let Li=!1;function ng(e,t=!1,s=!1){t&&ba(t);const{props:n,children:i}=e.vnode,o=yh(e);Em(e,n,o,t),Rm(e,i,s||t);const r=o?ig(e,t):void 0;return t&&ba(!1),r}function ig(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wm);const{setup:n}=s;if(n){_s();const i=e.setupContext=n.length>1?rg(e):null,o=Xi(e),r=Ji(n,e,0,[e.props,i]),a=gu(r);if(vs(),o(),(a||e.sp)&&!On(e)&&Ku(e),a){if(r.then(Zl,Zl),t)return r.then(l=>{tc(e,l,t)}).catch(l=>{hr(l,e,0)});e.asyncDep=r}else tc(e,r,t)}else xh(e,t)}function tc(e,t,s){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=$u(t)),xh(e,s)}let ec;function xh(e,t,s){const n=e.type;if(!e.render){if(!t&&ec&&!n.render){const i=n.template||ll(e).template;if(i){const{isCustomElement:o,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Yt(Yt({isCustomElement:o,delimiters:a},r),l);n.render=ec(i,c)}}e.render=n.render||Ue}{const i=Xi(e);_s();try{km(e)}finally{vs(),i()}}}const og={get(e,t){return ee(e,"get",""),e[t]}};function rg(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,og),slots:e.slots,emit:e.emit,expose:t}}function gr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($u(Gp(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in bi)return bi[s](e)},has(t,s){return s in t||s in bi}})):e.proxy}function ag(e,t=!0){return ct(e)?e.displayName||e.name:e.name||t&&e.__name}function lg(e){return ct(e)&&"__vccOpts"in e}const je=(e,t)=>tm(e,t,Li);function _h(e,t,s){const n=arguments.length;return n===2?Rt(t)&&!nt(t)?Ri(t)?O(e,null,[t]):O(e,t):O(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ri(s)&&(s=[s]),O(e,t,s))}const cg="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ya;const sc=typeof window<"u"&&window.trustedTypes;if(sc)try{ya=sc.createPolicy("vue",{createHTML:e=>e})}catch{}const vh=ya?e=>ya.createHTML(e):e=>e,dg="http://www.w3.org/2000/svg",ug="http://www.w3.org/1998/Math/MathML",ds=typeof document<"u"?document:null,nc=ds&&ds.createElement("template"),hg={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?ds.createElementNS(dg,e):t==="mathml"?ds.createElementNS(ug,e):s?ds.createElement(e,{is:s}):ds.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ds.createTextNode(e),createComment:e=>ds.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ds.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{nc.innerHTML=vh(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=nc.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},fg=Symbol("_vtc");function pg(e,t,s){const n=e[fg];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Yo=Symbol("_vod"),wh=Symbol("_vsh"),In={beforeMount(e,{value:t},{transition:s}){e[Yo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Qn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Qn(e,!0),n.enter(e)):n.leave(e,()=>{Qn(e,!1)}):Qn(e,t))},beforeUnmount(e,{value:t}){Qn(e,t)}};function Qn(e,t){e.style.display=t?e[Yo]:"none",e[wh]=!t}const mg=Symbol(""),gg=/(^|;)\s*display\s*:/;function bg(e,t,s){const n=e.style,i=zt(s);let o=!1;if(s&&!i){if(t)if(zt(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Oo(n,a,"")}else for(const r in t)s[r]==null&&Oo(n,r,"");for(const r in s)r==="display"&&(o=!0),Oo(n,r,s[r])}else if(i){if(t!==s){const r=n[mg];r&&(s+=";"+r),n.cssText=s,o=gg.test(s)}}else t&&e.removeAttribute("style");Yo in e&&(e[Yo]=o?n.display:"",e[wh]&&(n.display="none"))}const ic=/\s*!important$/;function Oo(e,t,s){if(nt(s))s.forEach(n=>Oo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=yg(e,t);ic.test(s)?e.setProperty(fn(n),s.replace(ic,""),"important"):e[n]=s}}const oc=["Webkit","Moz","ms"],Ur={};function yg(e,t){const s=Ur[t];if(s)return s;let n=Ie(t);if(n!=="filter"&&n in e)return Ur[t]=n;n=lr(n);for(let i=0;i<oc.length;i++){const o=oc[i]+n;if(o in e)return Ur[t]=o}return t}const rc="http://www.w3.org/1999/xlink";function ac(e,t,s,n,i,o=Mp(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(rc,t.slice(6,t.length)):e.setAttributeNS(rc,t,s):s==null||o&&!_u(s)?e.removeAttribute(t):e.setAttribute(t,o?"":Ve(s)?String(s):s)}function lc(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?vh(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=_u(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function Ds(e,t,s,n){e.addEventListener(t,s,n)}function xg(e,t,s,n){e.removeEventListener(t,s,n)}const cc=Symbol("_vei");function _g(e,t,s,n,i=null){const o=e[cc]||(e[cc]={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=vg(t);if(n){const c=o[t]=Sg(n,i);Ds(e,a,c,l)}else r&&(xg(e,a,r,l),o[t]=void 0)}}const dc=/(?:Once|Passive|Capture)$/;function vg(e){let t;if(dc.test(e)){t={};let n;for(;n=e.match(dc);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fn(e.slice(2)),t]}let $r=0;const wg=Promise.resolve(),kg=()=>$r||(wg.then(()=>$r=0),$r=Date.now());function Sg(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ss(Cg(n,s.value),t,5,[n])};return s.value=e,s.attached=kg(),s}function Cg(e,t){if(nt(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const uc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Mg=(e,t,s,n,i,o)=>{const r=i==="svg";t==="class"?pg(e,n,r):t==="style"?bg(e,s,n):rr(t)?Ga(t)||_g(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ag(e,t,n,r))?(lc(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ac(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!zt(n))?lc(e,Ie(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ac(e,t,n,r))};function Ag(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&uc(t)&&ct(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return uc(t)&&zt(s)?!1:t in e}const jn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?s=>Mo(t,s):t};function Pg(e){e.target.composing=!0}function hc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xs=Symbol("_assign"),L={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[xs]=jn(i);const o=n||i.props&&i.props.type==="number";Ds(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=Bo(a)),e[xs](a)}),s&&Ds(e,"change",()=>{e.value=e.value.trim()}),t||(Ds(e,"compositionstart",Pg),Ds(e,"compositionend",hc),Ds(e,"change",hc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(e[xs]=jn(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?Bo(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===l)||(e.value=l))}},hl={deep:!0,created(e,t,s){e[xs]=jn(s),Ds(e,"change",()=>{const n=e._modelValue,i=Fi(e),o=e.checked,r=e[xs];if(nt(n)){const a=Xa(n,i),l=a!==-1;if(o&&!l)r(n.concat(i));else if(!o&&l){const c=[...n];c.splice(a,1),r(c)}}else if(qn(n)){const a=new Set(n);o?a.add(i):a.delete(i),r(a)}else r(kh(e,o))})},mounted:fc,beforeUpdate(e,t,s){e[xs]=jn(s),fc(e,t,s)}};function fc(e,{value:t,oldValue:s},n){e._modelValue=t;let i;if(nt(t))i=Xa(t,n.props.value)>-1;else if(qn(t))i=t.has(n.props.value);else{if(t===s)return;i=Yi(t,kh(e,!0))}e.checked!==i&&(e.checked=i)}const Ae={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const i=qn(t);Ds(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Bo(Fi(r)):Fi(r));e[xs](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,ol(()=>{e._assigning=!1})}),e[xs]=jn(n)},mounted(e,{value:t}){pc(e,t)},beforeUpdate(e,t,s){e[xs]=jn(s)},updated(e,{value:t}){e._assigning||pc(e,t)}};function pc(e,t){const s=e.multiple,n=nt(t);if(!(s&&!n&&!qn(t))){for(let i=0,o=e.options.length;i<o;i++){const r=e.options[i],a=Fi(r);if(s)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(c=>String(c)===String(a)):r.selected=Xa(t,a)>-1}else r.selected=t.has(a);else if(Yi(Fi(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Fi(e){return"_value"in e?e._value:e.value}function kh(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Tg=["ctrl","shift","alt","meta"],Eg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Tg.some(s=>e[`${s}Key`]&&!t.includes(s))},Qt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<t.length;r++){const a=Eg[t[r]];if(a&&a(i,t))return}return e(i,...o)})},Og=Yt({patchProp:Mg},hg);let mc;function Dg(){return mc||(mc=Fm(Og))}const Ig=(...e)=>{const t=Dg().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=Lg(n);if(!i)return;const o=t._component;!ct(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,Rg(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function Rg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Lg(e){return zt(e)?document.querySelector(e):e}const mt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Fg={name:"CookieBanner",data(){return{consentGiven:!1}},mounted(){this.consentGiven=localStorage.getItem("cookieConsent")==="true"},methods:{acceptCookies(){this.consentGiven=!0,localStorage.setItem("cookieConsent","true")}}},jg={key:0,class:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50"};function Ng(e,t,s,n,i,o){return i.consentGiven?V("",!0):(v(),w("div",jg,[t[1]||(t[1]=u("p",{class:"mb-2"},[st(" Utilizamos cookies para melhorar sua experiência. Ao continuar, você concorda com nossa "),u("a",{href:"#",class:"underline"},"política de privacidade"),st(". ")],-1)),u("button",{onClick:t[0]||(t[0]=(...r)=>o.acceptCookies&&o.acceptCookies(...r)),class:"btn"}," Aceitar ")]))}const Ug=mt(Fg,[["render",Ng]]),$g={name:"App",components:{CookieBanner:Ug}};function Bg(e,t,s,n,i,o){const r=z("router-view"),a=z("CookieBanner");return v(),w(Y,null,[O(r),O(a)],64)}const Vg=mt($g,[["render",Bg]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Sn=typeof document<"u";function Sh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Hg(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Sh(e.default)}const wt=Object.assign;function Br(e,t){const s={};for(const n in t){const i=t[n];s[n]=He(i)?i.map(e):e(i)}return s}const xi=()=>{},He=Array.isArray,Ch=/#/g,zg=/&/g,Wg=/\//g,qg=/=/g,Kg=/\?/g,Mh=/\+/g,Gg=/%5B/g,Yg=/%5D/g,Ah=/%5E/g,Jg=/%60/g,Ph=/%7B/g,Xg=/%7C/g,Th=/%7D/g,Qg=/%20/g;function fl(e){return encodeURI(""+e).replace(Xg,"|").replace(Gg,"[").replace(Yg,"]")}function Zg(e){return fl(e).replace(Ph,"{").replace(Th,"}").replace(Ah,"^")}function xa(e){return fl(e).replace(Mh,"%2B").replace(Qg,"+").replace(Ch,"%23").replace(zg,"%26").replace(Jg,"`").replace(Ph,"{").replace(Th,"}").replace(Ah,"^")}function tb(e){return xa(e).replace(qg,"%3D")}function eb(e){return fl(e).replace(Ch,"%23").replace(Kg,"%3F")}function sb(e){return e==null?"":eb(e).replace(Wg,"%2F")}function ji(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const nb=/\/$/,ib=e=>e.replace(nb,"");function Vr(e,t,s="/"){let n,i={},o="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),r=t.slice(a,t.length)),n=lb(n??t,s),{fullPath:n+(o&&"?")+o+r,path:n,query:i,hash:ji(r)}}function ob(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function gc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function rb(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&Nn(t.matched[n],s.matched[i])&&Eh(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Nn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Eh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!ab(e[s],t[s]))return!1;return!0}function ab(e,t){return He(e)?bc(e,t):He(t)?bc(t,e):e===t}function bc(e,t){return He(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function lb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=s.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(r).join("/")}const Cs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ni;(function(e){e.pop="pop",e.push="push"})(Ni||(Ni={}));var _i;(function(e){e.back="back",e.forward="forward",e.unknown=""})(_i||(_i={}));function cb(e){if(!e)if(Sn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ib(e)}const db=/^[^#]+#/;function ub(e,t){return e.replace(db,"#")+t}function hb(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const br=()=>({left:window.scrollX,top:window.scrollY});function fb(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=hb(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function yc(e,t){return(history.state?history.state.position-t:-1)+e}const _a=new Map;function pb(e,t){_a.set(e,t)}function mb(e){const t=_a.get(e);return _a.delete(e),t}let gb=()=>location.protocol+"//"+location.host;function Oh(e,t){const{pathname:s,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),gc(l,"")}return gc(s,e)+n+i}function bb(e,t,s,n){let i=[],o=[],r=null;const a=({state:f})=>{const p=Oh(e,location),m=s.value,g=t.value;let b=0;if(f){if(s.value=p,t.value=f,r&&r===m){r=null;return}b=g?f.position-g.position:0}else n(p);i.forEach(_=>{_(s.value,m,{delta:b,type:Ni.pop,direction:b?b>0?_i.forward:_i.back:_i.unknown})})};function l(){r=s.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return o.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(wt({},f.state,{scroll:br()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function xc(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?br():null}}function yb(e){const{history:t,location:s}=window,n={value:Oh(e,s)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const h=e.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?e:e.slice(h))+l:gb()+e+l;try{t[d?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),s[d?"replace":"assign"](f)}}function r(l,c){const d=wt({},t.state,xc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,d,!0),n.value=l}function a(l,c){const d=wt({},i.value,t.state,{forward:l,scroll:br()});o(d.current,d,!0);const h=wt({},xc(n.value,l,null),{position:d.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function xb(e){e=cb(e);const t=yb(e),s=bb(e,t.state,t.location,t.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=wt({location:"",base:e,go:n,createHref:ub.bind(null,e)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function _b(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),xb(e)}function vb(e){return typeof e=="string"||e&&typeof e=="object"}function Dh(e){return typeof e=="string"||typeof e=="symbol"}const Ih=Symbol("");var _c;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_c||(_c={}));function Un(e,t){return wt(new Error,{type:e,[Ih]:!0},t)}function os(e,t){return e instanceof Error&&Ih in e&&(t==null||!!(e.type&t))}const vc="[^/]+?",wb={sensitive:!1,strict:!1,start:!0,end:!0},kb=/[.+*?^${}()[\]/\\]/g;function Sb(e,t){const s=wt({},wb,t),n=[];let i=s.start?"^":"";const o=[];for(const c of e){const d=c.length?[]:[90];s.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(kb,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:g,optional:b,regexp:_}=f;o.push({name:m,repeatable:g,optional:b});const k=_||vc;if(k!==vc){p+=10;try{new RegExp(`(${k})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${k}): `+S.message)}}let C=g?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(C=b&&c.length<2?`(?:/${C})`:"/"+C),b&&(C+="?"),i+=C,p+=20,b&&(p+=-8),g&&(p+=-20),k===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function a(c){const d=c.match(r),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",m=o[f-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of e){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:b}=p,_=m in c?c[m]:"";if(He(_)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const k=He(_)?_.join("/"):_;if(!k)if(b)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);d+=k}}return d||"/"}return{re:r,score:n,keys:o,parse:a,stringify:l}}function Cb(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Rh(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const o=Cb(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(wc(n))return 1;if(wc(i))return-1}return i.length-n.length}function wc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Mb={type:0,value:""},Ab=/[a-zA-Z0-9_]/;function Pb(e){if(!e)return[[]];if(e==="/")return[[Mb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=0,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,c="",d="";function h(){c&&(s===0?o.push({type:0,value:c}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&h(),r()):l===":"?(h(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:Ab.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=3:d+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),r(),i}function Tb(e,t,s){const n=Sb(Pb(e.path),s),i=wt(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Eb(e,t){const s=[],n=new Map;t=Mc({strict:!1,end:!0,sensitive:!1},t);function i(h){return n.get(h)}function o(h,f,p){const m=!p,g=Sc(h);g.aliasOf=p&&p.record;const b=Mc(t,h),_=[g];if("alias"in h){const S=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of S)_.push(Sc(wt({},g,{components:p?p.record.components:g.components,path:M,aliasOf:p?p.record:g})))}let k,C;for(const S of _){const{path:M}=S;if(f&&M[0]!=="/"){const j=f.record.path,I=j[j.length-1]==="/"?"":"/";S.path=f.record.path+(M&&I+M)}if(k=Tb(S,f,b),p?p.alias.push(k):(C=C||k,C!==k&&C.alias.push(k),m&&h.name&&!Cc(k)&&r(h.name)),Lh(k)&&l(k),g.children){const j=g.children;for(let I=0;I<j.length;I++)o(j[I],k,p&&p.children[I])}p=p||k}return C?()=>{r(C)}:xi}function r(h){if(Dh(h)){const f=n.get(h);f&&(n.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(r),h.alias.forEach(r))}}function a(){return s}function l(h){const f=Ib(h,s);s.splice(f,0,h),h.record.name&&!Cc(h)&&n.set(h.record.name,h)}function c(h,f){let p,m={},g,b;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw Un(1,{location:h});b=p.record.name,m=wt(kc(f.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),h.params&&kc(h.params,p.keys.map(C=>C.name))),g=p.stringify(m)}else if(h.path!=null)g=h.path,p=s.find(C=>C.re.test(g)),p&&(m=p.parse(g),b=p.record.name);else{if(p=f.name?n.get(f.name):s.find(C=>C.re.test(f.path)),!p)throw Un(1,{location:h,currentLocation:f});b=p.record.name,m=wt({},f.params,h.params),g=p.stringify(m)}const _=[];let k=p;for(;k;)_.unshift(k.record),k=k.parent;return{name:b,path:g,params:m,matched:_,meta:Db(_)}}e.forEach(h=>o(h));function d(){s.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function kc(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Sc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ob(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ob(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Cc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Db(e){return e.reduce((t,s)=>wt(t,s.meta),{})}function Mc(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function Ib(e,t){let s=0,n=t.length;for(;s!==n;){const o=s+n>>1;Rh(e,t[o])<0?n=o:s=o+1}const i=Rb(e);return i&&(n=t.lastIndexOf(i,n-1)),n}function Rb(e){let t=e;for(;t=t.parent;)if(Lh(t)&&Rh(e,t)===0)return t}function Lh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Lb(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Mh," "),r=o.indexOf("="),a=ji(r<0?o:o.slice(0,r)),l=r<0?null:ji(o.slice(r+1));if(a in t){let c=t[a];He(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Ac(e){let t="";for(let s in e){const n=e[s];if(s=tb(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(He(n)?n.map(o=>o&&xa(o)):[n&&xa(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Fb(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=He(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const jb=Symbol(""),Pc=Symbol(""),pl=Symbol(""),Fh=Symbol(""),va=Symbol("");function Zn(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Es(e,t,s,n,i,o=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Un(4,{from:s,to:t})):f instanceof Error?l(f):vb(f)?l(Un(2,{from:t,to:f})):(r&&n.enterCallbacks[i]===r&&typeof f=="function"&&r.push(f),a())},d=o(()=>e.call(n&&n.instances[i],t,s,c));let h=Promise.resolve(d);e.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Hr(e,t,s,n,i=o=>o()){const o=[];for(const r of e)for(const a in r.components){let l=r.components[a];if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(Sh(l)){const d=(l.__vccOpts||l)[t];d&&o.push(Es(d,s,n,r,a,i))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const h=Hg(d)?d.default:d;r.mods[a]=d,r.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&Es(p,s,n,r,a,i)()}))}}return o}function Tc(e){const t=ys(pl),s=ys(Fh),n=je(()=>{const l=Tn(e.to);return t.resolve(l)}),i=je(()=>{const{matched:l}=n.value,{length:c}=l,d=l[c-1],h=s.matched;if(!d||!h.length)return-1;const f=h.findIndex(Nn.bind(null,d));if(f>-1)return f;const p=Ec(l[c-2]);return c>1&&Ec(d)===p&&h[h.length-1].path!==p?h.findIndex(Nn.bind(null,l[c-2])):f}),o=je(()=>i.value>-1&&Vb(s.params,n.value.params)),r=je(()=>i.value>-1&&i.value===s.matched.length-1&&Eh(s.params,n.value.params));function a(l={}){if(Bb(l)){const c=t[Tn(e.replace)?"replace":"push"](Tn(e.to)).catch(xi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:je(()=>n.value.href),isActive:o,isExactActive:r,navigate:a}}function Nb(e){return e.length===1?e[0]:e}const Ub=qu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tc,setup(e,{slots:t}){const s=ur(Tc(e)),{options:n}=ys(pl),i=je(()=>({[Oc(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Oc(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&Nb(t.default(s));return e.custom?o:_h("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),$b=Ub;function Bb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Vb(e,t){for(const s in t){const n=t[s],i=e[s];if(typeof n=="string"){if(n!==i)return!1}else if(!He(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function Ec(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Oc=(e,t,s)=>e??t??s,Hb=qu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=ys(va),i=je(()=>e.route||n.value),o=ys(Pc,0),r=je(()=>{let c=Tn(o);const{matched:d}=i.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=je(()=>i.value.matched[r.value]);Ao(Pc,je(()=>r.value+1)),Ao(jb,a),Ao(va,i);const l=Yp();return Po(()=>[l.value,a.value,e.name],([c,d,h],[f,p,m])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Nn(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,d=e.name,h=a.value,f=h&&h.components[d];if(!f)return Dc(s.default,{Component:f,route:c});const p=h.props[d],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,b=_h(f,wt({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return Dc(s.default,{Component:b,route:c})||b}}});function Dc(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const zb=Hb;function Wb(e){const t=Eb(e.routes,e),s=e.parseQuery||Lb,n=e.stringifyQuery||Ac,i=e.history,o=Zn(),r=Zn(),a=Zn(),l=Jp(Cs);let c=Cs;Sn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Br.bind(null,D=>""+D),h=Br.bind(null,sb),f=Br.bind(null,ji);function p(D,J){let K,Q;return Dh(D)?(K=t.getRecordMatcher(D),Q=J):Q=D,t.addRoute(Q,K)}function m(D){const J=t.getRecordMatcher(D);J&&t.removeRoute(J)}function g(){return t.getRoutes().map(D=>D.record)}function b(D){return!!t.getRecordMatcher(D)}function _(D,J){if(J=wt({},J||l.value),typeof D=="string"){const x=Vr(s,D,J.path),A=t.resolve({path:x.path},J),R=i.createHref(x.fullPath);return wt(x,A,{params:f(A.params),hash:ji(x.hash),redirectedFrom:void 0,href:R})}let K;if(D.path!=null)K=wt({},D,{path:Vr(s,D.path,J.path).path});else{const x=wt({},D.params);for(const A in x)x[A]==null&&delete x[A];K=wt({},D,{params:h(x)}),J.params=h(J.params)}const Q=t.resolve(K,J),vt=D.hash||"";Q.params=d(f(Q.params));const Nt=ob(n,wt({},D,{hash:Zg(vt),path:Q.path})),y=i.createHref(Nt);return wt({fullPath:Nt,hash:vt,query:n===Ac?Fb(D.query):D.query||{}},Q,{redirectedFrom:void 0,href:y})}function k(D){return typeof D=="string"?Vr(s,D,l.value.path):wt({},D)}function C(D,J){if(c!==D)return Un(8,{from:J,to:D})}function S(D){return I(D)}function M(D){return S(wt(k(D),{replace:!0}))}function j(D){const J=D.matched[D.matched.length-1];if(J&&J.redirect){const{redirect:K}=J;let Q=typeof K=="function"?K(D):K;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=k(Q):{path:Q},Q.params={}),wt({query:D.query,hash:D.hash,params:Q.path!=null?{}:D.params},Q)}}function I(D,J){const K=c=_(D),Q=l.value,vt=D.state,Nt=D.force,y=D.replace===!0,x=j(K);if(x)return I(wt(k(x),{state:typeof x=="object"?wt({},vt,x.state):vt,force:Nt,replace:y}),J||K);const A=K;A.redirectedFrom=J;let R;return!Nt&&rb(n,Q,K)&&(R=Un(16,{to:A,from:Q}),le(Q,Q,!0,!1)),(R?Promise.resolve(R):it(A,Q)).catch(E=>os(E)?os(E,2)?E:ae(E):ut(E,A,Q)).then(E=>{if(E){if(os(E,2))return I(wt({replace:y},k(E.to),{state:typeof E.to=="object"?wt({},vt,E.to.state):vt,force:Nt}),J||A)}else E=dt(A,Q,!0,y,vt);return rt(A,Q,E),E})}function $(D,J){const K=C(D,J);return K?Promise.reject(K):Promise.resolve()}function X(D){const J=he.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(D):D()}function it(D,J){let K;const[Q,vt,Nt]=qb(D,J);K=Hr(Q.reverse(),"beforeRouteLeave",D,J);for(const x of Q)x.leaveGuards.forEach(A=>{K.push(Es(A,D,J))});const y=$.bind(null,D,J);return K.push(y),Ht(K).then(()=>{K=[];for(const x of o.list())K.push(Es(x,D,J));return K.push(y),Ht(K)}).then(()=>{K=Hr(vt,"beforeRouteUpdate",D,J);for(const x of vt)x.updateGuards.forEach(A=>{K.push(Es(A,D,J))});return K.push(y),Ht(K)}).then(()=>{K=[];for(const x of Nt)if(x.beforeEnter)if(He(x.beforeEnter))for(const A of x.beforeEnter)K.push(Es(A,D,J));else K.push(Es(x.beforeEnter,D,J));return K.push(y),Ht(K)}).then(()=>(D.matched.forEach(x=>x.enterCallbacks={}),K=Hr(Nt,"beforeRouteEnter",D,J,X),K.push(y),Ht(K))).then(()=>{K=[];for(const x of r.list())K.push(Es(x,D,J));return K.push(y),Ht(K)}).catch(x=>os(x,8)?x:Promise.reject(x))}function rt(D,J,K){a.list().forEach(Q=>X(()=>Q(D,J,K)))}function dt(D,J,K,Q,vt){const Nt=C(D,J);if(Nt)return Nt;const y=J===Cs,x=Sn?history.state:{};K&&(Q||y?i.replace(D.fullPath,wt({scroll:y&&x&&x.scroll},vt)):i.push(D.fullPath,vt)),l.value=D,le(D,J,K,y),ae()}let At;function Wt(){At||(At=i.listen((D,J,K)=>{if(!qe.listening)return;const Q=_(D),vt=j(Q);if(vt){I(wt(vt,{replace:!0,force:!0}),Q).catch(xi);return}c=Q;const Nt=l.value;Sn&&pb(yc(Nt.fullPath,K.delta),br()),it(Q,Nt).catch(y=>os(y,12)?y:os(y,2)?(I(wt(k(y.to),{force:!0}),Q).then(x=>{os(x,20)&&!K.delta&&K.type===Ni.pop&&i.go(-1,!1)}).catch(xi),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ut(y,Q,Nt))).then(y=>{y=y||dt(Q,Nt,!1),y&&(K.delta&&!os(y,8)?i.go(-K.delta,!1):K.type===Ni.pop&&os(y,20)&&i.go(-1,!1)),rt(Q,Nt,y)}).catch(xi)}))}let xt=Zn(),lt=Zn(),ot;function ut(D,J,K){ae(D);const Q=lt.list();return Q.length?Q.forEach(vt=>vt(D,J,K)):console.error(D),Promise.reject(D)}function Tt(){return ot&&l.value!==Cs?Promise.resolve():new Promise((D,J)=>{xt.add([D,J])})}function ae(D){return ot||(ot=!D,Wt(),xt.list().forEach(([J,K])=>D?K(D):J()),xt.reset()),D}function le(D,J,K,Q){const{scrollBehavior:vt}=e;if(!Sn||!vt)return Promise.resolve();const Nt=!K&&mb(yc(D.fullPath,0))||(Q||!K)&&history.state&&history.state.scroll||null;return ol().then(()=>vt(D,J,Nt)).then(y=>y&&fb(y)).catch(y=>ut(y,D,J))}const Bt=D=>i.go(D);let Ee;const he=new Set,qe={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:g,resolve:_,options:e,push:S,replace:M,go:Bt,back:()=>Bt(-1),forward:()=>Bt(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:lt.add,isReady:Tt,install(D){const J=this;D.component("RouterLink",$b),D.component("RouterView",zb),D.config.globalProperties.$router=J,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Tn(l)}),Sn&&!Ee&&l.value===Cs&&(Ee=!0,S(i.location).catch(vt=>{}));const K={};for(const vt in Cs)Object.defineProperty(K,vt,{get:()=>l.value[vt],enumerable:!0});D.provide(pl,J),D.provide(Fh,ju(K)),D.provide(va,l);const Q=D.unmount;he.add(D),D.unmount=function(){he.delete(D),he.size<1&&(c=Cs,At&&At(),At=null,l.value=Cs,Ee=!1,ot=!1),Q()}}};function Ht(D){return D.reduce((J,K)=>J.then(()=>X(K)),Promise.resolve())}return qe}function qb(e,t){const s=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(c=>Nn(c,a))?n.push(a):s.push(a));const l=e.matched[r];l&&(t.matched.find(c=>Nn(c,l))||i.push(l))}return[s,n,i]}const Kb={name:"Navbar",data(){return{open:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route(){this.open=!1}},methods:{toggleMenu(){this.open=!this.open},handleScroll(){this.open&&(this.open=!1)}}},Gb={class:"flex items-center justify-between px-8 py-4 bg-white shadow relative"},Yb={class:"hidden md:flex items-center space-x-4"},Jb={key:0,class:"absolute top-full left-0 w-full bg-white shadow-md md:hidden flex flex-col items-start space-y-4 py-4 px-8"};function Xb(e,t,s,n,i,o){const r=z("router-link");return v(),w("nav",Gb,[O(r,{to:"/",class:"text-xl font-bold text-blue-600"},{default:tt(()=>t[5]||(t[5]=[st("Agenda Zen")])),_:1,__:[5]}),u("button",{onClick:t[0]||(t[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden focus:outline-none"},t[6]||(t[6]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),u("div",Yb,[O(r,{to:"/buscar",class:"text-blue-600 hover:underline"},{default:tt(()=>t[7]||(t[7]=[st("Buscar")])),_:1,__:[7]}),O(r,{to:"/planos",class:"text-blue-600 hover:underline"},{default:tt(()=>t[8]||(t[8]=[st("Planos")])),_:1,__:[8]}),O(r,{to:"/contato",class:"text-blue-600 hover:underline"},{default:tt(()=>t[9]||(t[9]=[st("Contato")])),_:1,__:[9]}),O(r,{to:"/login",class:"btn"},{default:tt(()=>t[10]||(t[10]=[st("Login")])),_:1,__:[10]})]),i.open?(v(),w("div",Jb,[O(r,{onClick:t[1]||(t[1]=a=>i.open=!1),to:"/buscar",class:"text-blue-600 hover:underline"},{default:tt(()=>t[11]||(t[11]=[st("Buscar")])),_:1,__:[11]}),O(r,{onClick:t[2]||(t[2]=a=>i.open=!1),to:"/planos",class:"text-blue-600 hover:underline"},{default:tt(()=>t[12]||(t[12]=[st("Planos")])),_:1,__:[12]}),O(r,{onClick:t[3]||(t[3]=a=>i.open=!1),to:"/contato",class:"text-blue-600 hover:underline"},{default:tt(()=>t[13]||(t[13]=[st("Contato")])),_:1,__:[13]}),O(r,{onClick:t[4]||(t[4]=a=>i.open=!1),to:"/login",class:"btn"},{default:tt(()=>t[14]||(t[14]=[st("Login")])),_:1,__:[14]})])):V("",!0)])}const ze=mt(Kb,[["render",Xb]]),Qb="/hero-illustration.png",Zb={name:"HeroBanner"},t0={class:"text-center py-20"},e0={class:"max-w-4xl mx-auto px-4"},s0={class:"grid grid-cols-1 md:grid-cols-2 items-center gap-8"},n0={class:"space-x-4"};function i0(e,t,s,n,i,o){const r=z("router-link");return v(),w("section",t0,[u("div",e0,[u("div",s0,[u("div",null,[t[2]||(t[2]=u("h1",{class:"text-4xl font-bold text-blue-800 mb-4"},"Sua agenda digital simples e profissional",-1)),t[3]||(t[3]=u("p",{class:"text-gray-600 text-lg mb-6"},"Perfeita para psicólogos, terapeutas, dentistas, cabeleireiros e mais",-1)),u("div",n0,[O(r,{to:"/login",class:"bg-white border border-blue-600 text-blue-600 px-6 py-2 rounded hover:bg-blue-100"},{default:tt(()=>t[0]||(t[0]=[st("Entrar")])),_:1,__:[0]}),O(r,{to:"/cadastro",class:"btn"},{default:tt(()=>t[1]||(t[1]=[st("Criar conta")])),_:1,__:[1]})])]),t[4]||(t[4]=u("div",null,[u("img",{src:Qb,alt:"Ilustração profissional usando a plataforma",class:"w-full h-auto mx-auto"})],-1))])])])}const o0=mt(Zb,[["render",i0]]),as="/icons/check.svg",r0={name:"FeaturesSection"},a0={class:"py-16 px-8"};function l0(e,t,s,n,i,o){return v(),w("section",a0,t[0]||(t[0]=[dn('<h2 class="text-2xl font-bold text-center mb-8">Funcionalidades</h2><ul class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 text-lg"><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Cadastro e autenticação de usuários</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Gestão de clientes, serviços e salas</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Controle de agendamentos em lista, calendário ou semana</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Dashboard com estatísticas e gráficos</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Configuração de perfil público com link personalizado</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Geração de comprovantes de atendimento</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Lembretes automáticos para seus clientes</span></li><li class="flex items-start"><img src="'+as+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Pagamentos via Pix de forma prática e segura</span></li></ul>',2)]))}const c0=mt(r0,[["render",l0]]),d0="/about-illustration.png",u0={name:"AboutSection"},h0={class:"px-8 py-16"};function f0(e,t,s,n,i,o){return v(),w("section",h0,t[0]||(t[0]=[u("div",{class:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center"},[u("div",null,[u("img",{src:d0,alt:"Ilustração sobre agendamento",class:"w-full h-auto mx-auto"})]),u("div",null,[u("h2",{class:"text-2xl font-bold mb-4"},"O que é o Agenda Zen?"),u("p",{class:"text-gray-700 text-lg"}," O Agenda Zen é uma plataforma pensada para profissionais que trabalham com agendamentos. Criamos uma solução simples, bonita e eficiente para divulgar seus serviços, aceitar agendamentos online, enviar lembretes automáticos e receber pagamentos por Pix — tudo sem complicação. ")])],-1)]))}const p0=mt(u0,[["render",f0]]),m0={name:"Footer"},g0={class:"bg-gray-100 text-center text-sm text-gray-500 py-6 space-y-4"},b0={class:"flex flex-wrap justify-center space-x-2"};function y0(e,t,s,n,i,o){const r=z("router-link");return v(),w("footer",g0,[t[9]||(t[9]=u("div",{class:"space-x-4 text-blue-600"},[u("a",{href:"https://www.instagram.com/agendazen_",target:"_blank",class:"hover:underline"},"Instagram"),u("a",{href:"https://www.facebook.com/agenda.zen",target:"_blank",class:"hover:underline"},"Facebook"),u("a",{href:"https://x.com/agenda_zen",target:"_blank",class:"hover:underline"},"X")],-1)),u("div",b0,[O(r,{to:"/termos-de-uso",class:"hover:underline"},{default:tt(()=>t[0]||(t[0]=[st("Termos de uso")])),_:1,__:[0]}),t[5]||(t[5]=u("span",null,"|",-1)),O(r,{to:"/planos",class:"hover:underline"},{default:tt(()=>t[1]||(t[1]=[st("Planos")])),_:1,__:[1]}),t[6]||(t[6]=u("span",null,"|",-1)),O(r,{to:"/contato",class:"hover:underline"},{default:tt(()=>t[2]||(t[2]=[st("Contato")])),_:1,__:[2]}),t[7]||(t[7]=u("span",null,"|",-1)),O(r,{to:"/faq",class:"hover:underline"},{default:tt(()=>t[3]||(t[3]=[st("FAQ")])),_:1,__:[3]}),t[8]||(t[8]=u("span",null,"|",-1)),O(r,{to:"/politica-de-privacidade",class:"hover:underline"},{default:tt(()=>t[4]||(t[4]=[st("Política de privacidade")])),_:1,__:[4]})]),t[10]||(t[10]=u("p",null,"© 2025 Agenda Zen — Todos os direitos reservados",-1))])}const We=mt(m0,[["render",y0]]),x0={name:"Home",components:{Navbar:ze,HeroBanner:o0,FeaturesSection:c0,AboutSection:p0,Footer:We}};function _0(e,t,s,n,i,o){const r=z("Navbar"),a=z("HeroBanner"),l=z("FeaturesSection"),c=z("AboutSection"),d=z("Footer");return v(),w(Y,null,[O(r),O(a),O(l),O(c),O(d)],64)}const v0=mt(x0,[["render",_0]]),w0="modulepreload",k0=function(e){return"/"+e},Ic={},$n=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=k0(o),o in Ic)return;Ic[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===o&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":w0,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},S0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class ml extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class C0 extends ml{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class M0 extends ml{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class A0 extends ml{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wa;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wa||(wa={}));var P0=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class T0{constructor(t,{headers:s={},customFetch:n,region:i=wa.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=S0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return P0(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=r):typeof r=="string"?(a["Content-Type"]="text/plain",c=r):typeof FormData<"u"&&r instanceof FormData?c=r:(a["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new C0(m)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new M0(d);if(!d.ok)throw new A0(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QO(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function E0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var ge={},gl={},yr={},Qi={},xr={},_r={},O0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bn=O0();const D0=Bn.fetch,jh=Bn.fetch.bind(Bn),Nh=Bn.Headers,I0=Bn.Request,R0=Bn.Response,Kn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nh,Request:I0,Response:R0,default:jh,fetch:D0},Symbol.toStringTag,{value:"Module"})),L0=E0(Kn);var vr={};Object.defineProperty(vr,"__esModule",{value:!0});let F0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};vr.default=F0;var Uh=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});const j0=Uh(L0),N0=Uh(vr);let U0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=j0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var r,a,l;let c=null,d=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const _=await o.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=_:d=JSON.parse(_))}const g=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),b=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(d=[],c=null,f=200,p="OK")}catch{o.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new N0.default(c)}return{error:c,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var r,a,l;return{error:{message:`${(r=o==null?void 0:o.name)!==null&&r!==void 0?r:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,s)}returns(){return this}overrideTypes(){return this}};_r.default=U0;var $0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xr,"__esModule",{value:!0});const B0=$0(_r);let V0=class extends B0.default{select(t){let s=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const r=o?`${o}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(r,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:r="text"}={}){var a;const l=[t?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xr.default=V0;var H0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qi,"__esModule",{value:!0});const z0=H0(xr);let W0=class extends z0.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const r=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${r}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Qi.default=W0;var q0=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yr,"__esModule",{value:!0});const ti=q0(Qi);let K0=class{constructor(t,{headers:s={},schema:n,fetch:i}){this.url=t,this.headers=s,this.schema=n,this.fetch=i}select(t,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let o=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),n&&(this.headers.Prefer=`count=${n}`),new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const r=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(r.length>0){const a=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){const r="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new ti.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new ti.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ti.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};yr.default=K0;var wr={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.version=void 0;kr.version="0.0.0-automated";Object.defineProperty(wr,"__esModule",{value:!0});wr.DEFAULT_HEADERS=void 0;const G0=kr;wr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${G0.version}`};var $h=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gl,"__esModule",{value:!0});const Y0=$h(yr),J0=$h(Qi),X0=wr;let Q0=class Bh{constructor(t,{headers:s={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},X0.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(t){const s=new URL(`${this.url}/${t}`);return new Y0.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Bh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:i=!1,count:o}={}){let r;const a=new URL(`${this.url}/rpc/${t}`);let l;n||i?(r=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(r="POST",l=s);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new J0.default({method:r,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};gl.default=Q0;var Gn=Re&&Re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});ge.PostgrestError=ge.PostgrestBuilder=ge.PostgrestTransformBuilder=ge.PostgrestFilterBuilder=ge.PostgrestQueryBuilder=ge.PostgrestClient=void 0;const Vh=Gn(gl);ge.PostgrestClient=Vh.default;const Hh=Gn(yr);ge.PostgrestQueryBuilder=Hh.default;const zh=Gn(Qi);ge.PostgrestFilterBuilder=zh.default;const Wh=Gn(xr);ge.PostgrestTransformBuilder=Wh.default;const qh=Gn(_r);ge.PostgrestBuilder=qh.default;const Kh=Gn(vr);ge.PostgrestError=Kh.default;var Z0=ge.default={PostgrestClient:Vh.default,PostgrestQueryBuilder:Hh.default,PostgrestFilterBuilder:zh.default,PostgrestTransformBuilder:Wh.default,PostgrestBuilder:qh.default,PostgrestError:Kh.default};const{PostgrestClient:ty,PostgrestQueryBuilder:i4,PostgrestFilterBuilder:o4,PostgrestTransformBuilder:r4,PostgrestBuilder:a4,PostgrestError:l4}=Z0,ey="2.11.2",sy={"X-Client-Info":`realtime-js/${ey}`},ny="1.0.0",Gh=1e4,iy=1e3;var Rn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rn||(Rn={}));var ke;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ke||(ke={}));var Fe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fe||(Fe={}));var ka;(function(e){e.websocket="websocket"})(ka||(ka={}));var nn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nn||(nn={}));class oy{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(t.slice(r,r+i));r=r+i;const l=n.decode(t.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(t.slice(r,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Yh{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ot||(Ot={}));const Rc=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,r)=>(o[r]=ry(r,e,t,i),o),{})},ry=(e,t,s,n)=>{const i=t.find(a=>a.name===e),o=i==null?void 0:i.type,r=s[e];return o&&!n.includes(o)?Jh(o,r):Sa(r)},Jh=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return dy(t,s)}switch(e){case Ot.bool:return ay(t);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return ly(t);case Ot.json:case Ot.jsonb:return cy(t);case Ot.timestamp:return uy(t);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return Sa(t);default:return Sa(t)}},Sa=e=>e,ay=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ly=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dy=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let o;const r=e.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>Jh(t,a))}return e},uy=e=>typeof e=="string"?e.replace(" ","T"):e,Xh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class zr{constructor(t,s,n={},i=Gh){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lc||(Lc={}));class vi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vi.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=vi.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=vi.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const o=this.cloneDeep(t),r=this.transformState(s),a={},l={};return this.map(o,(c,d)=>{r[c]||(l[c]=d)}),this.map(r,(c,d)=>{const h=o[c];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(t,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const h=t[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,d,l)}),this.map(r,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fc||(Fc={}));var jc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(jc||(jc={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class bl{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zr(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new Yh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new vi(this),this.broadcastEndpointURL=Xh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:r,private:a}}=this.params;this._onError(d=>t==null?void 0:t(us.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(us.CLOSED));const l={},c={broadcast:o,presence:r,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(us.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let g=0;g<p;g++){const b=f[g],{filter:{event:_,schema:k,table:C,filter:S}}=b,M=d&&d[g];if(M&&M.event===_&&M.schema===k&&M.table===C&&M.filter===S)m.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(us.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:r}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ke.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new zr(this,Fe.leave,{},t);i.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new zr(this,t,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,o;const r=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Fe;if(n&&[a,l,c,d].indexOf(r)>=0&&n!==this._joinRef())return;let f=this._onMessage(r,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===r}).map(p=>p.callback(f,n)):(o=this.bindings[r])===null||o===void 0||o.filter(p=>{var m,g,b,_,k,C;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in p){const S=p.id,M=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(k=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return S==="*"||S===((C=s==null?void 0:s.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===r}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:b,commit_timestamp:_,type:k,errors:C}=m;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:_,eventType:k,new:{},old:{},errors:C}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&bl.isEqual(i.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fe.close,{},t)}_onError(t){this._on(Fe.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Rc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Rc(t.columns,t.old_record)),s}}const hy=()=>{},fy=typeof WebSocket<"u",py=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class my{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=sy,this.params={},this.timeout=Gh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=hy,this.conn=null,this.sendBuffer=[],this.serializer=new oy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let r;return o?r=o:typeof fetch>"u"?r=(...a)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:l})=>l(...a)):r=fetch,(...a)=>r(...a)},this.endPoint=`${t}/${ka.websocket}`,this.httpEndpoint=Xh(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,r)=>r(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Yh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(fy){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new gy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$n(()=>import("./browser-abecf667.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ny}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rn.connecting:return nn.Connecting;case Rn.open:return nn.Open;case Rn.closing:return nn.Closing;default:return nn.Closed}}isConnected(){return this.connectionState()===nn.Open}channel(t,s={config:{}}){const n=new bl(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:i,ref:o}=t,r=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(i=>{s&&i.updateJoinPayload({access_token:s}),i.joinedOnce&&i._isJoined()&&i._push(Fe.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(iy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:i,payload:o,ref:r}=s;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${i} ${r&&"("+r+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,o,r)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fe.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([py],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class gy{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Rn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class yl extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class by extends yl{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ca extends yl{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var yy=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Qh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},xy=()=>yy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $n(()=>Promise.resolve().then(()=>Kn),void 0)).Response:Response}),Ma=e=>{if(Array.isArray(e))return e.map(s=>Ma(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Ma(n)}),t};var pn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Wr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_y=(e,t,s)=>pn(void 0,void 0,void 0,function*(){const n=yield xy();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(i=>{t(new by(Wr(i),e.status||500))}).catch(i=>{t(new Ca(Wr(i),i))}):t(new Ca(Wr(e),e))}),vy=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function Zi(e,t,s,n,i,o){return pn(this,void 0,void 0,function*(){return new Promise((r,a)=>{e(s,vy(t,n,i,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>_y(l,a,n))})})}function Jo(e,t,s,n){return pn(this,void 0,void 0,function*(){return Zi(e,"GET",t,s,n)})}function Os(e,t,s,n,i){return pn(this,void 0,void 0,function*(){return Zi(e,"POST",t,n,i,s)})}function wy(e,t,s,n,i){return pn(this,void 0,void 0,function*(){return Zi(e,"PUT",t,n,i,s)})}function ky(e,t,s,n){return pn(this,void 0,void 0,function*(){return Zi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Zh(e,t,s,n,i){return pn(this,void 0,void 0,function*(){return Zi(e,"DELETE",t,n,i,s)})}var fe=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Sy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cy{constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=Qh(i)}uploadOrUpdate(t,s,n,i){return fe(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Nc),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:o,headers:a},r!=null&&r.duplex?{duplex:r.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}upload(t,s,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return fe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Nc.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Kt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const o=yield Os(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new yl("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:a},error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}update(t,s,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return fe(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}copy(t,s,n){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Os(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return fe(this,void 0,void 0,function*(){try{const i=yield Os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}download(t,s){return fe(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Jo(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Kt(a))return{data:null,error:a};throw a}})}info(t){return fe(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield Jo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ma(n),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}exists(t){return fe(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield ky(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Kt(n)&&n instanceof Ca){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return fe(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}list(t,s,n){return fe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Sy),s),{prefix:t||""});return{data:yield Os(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const My="2.7.1",Ay={"X-Client-Info":`storage-js/${My}`};var bn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Py{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Ay),s),this.fetch=Qh(n)}listBuckets(){return bn(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}getBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return bn(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return bn(this,void 0,void 0,function*(){try{return{data:yield wy(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}}class Ty extends Py{constructor(t,s={},n){super(t,s,n)}from(t){return new Cy(this.url,this.headers,t,this.fetch)}}const Ey="2.49.8";let ai="";typeof Deno<"u"?ai="deno":typeof document<"u"?ai="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ai="react-native":ai="node";const Oy={"X-Client-Info":`supabase-js-${ai}/${Ey}`},Dy={headers:Oy},Iy={schema:"public"},Ry={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ly={};var Fy=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const jy=e=>{let t;return e?t=e:typeof fetch>"u"?t=jh:t=fetch,(...s)=>t(...s)},Ny=()=>typeof Headers>"u"?Nh:Headers,Uy=(e,t,s)=>{const n=jy(s),i=Ny();return(o,r)=>Fy(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var $y=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function By(e){return e.endsWith("/")?e:e+"/"}function Vy(e,t){var s,n;const{db:i,auth:o,realtime:r,global:a}=e,{db:l,auth:c,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),r),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$y(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const tf="2.69.1",Cn=30*1e3,Aa=3,qr=Aa*Cn,Hy="http://localhost:9999",zy="supabase.auth.token",Wy={"X-Client-Info":`gotrue-js/${tf}`},Pa="X-Supabase-Api-Version",ef={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ky=6e5;class xl extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function pt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Gy extends xl{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Yy(e){return pt(e)&&e.name==="AuthApiError"}class sf extends xl{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Hs extends xl{constructor(t,s,n,i){super(t,n,i),this.name=s,this.status=n}}class Ms extends Hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jy(e){return pt(e)&&e.name==="AuthSessionMissingError"}class Kr extends Hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ro extends Hs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ao extends Hs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xy(e){return pt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Uc extends Hs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ta extends Hs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Gr(e){return pt(e)&&e.name==="AuthRetryableFetchError"}class $c extends Hs{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class wi extends Hs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vc=` 	
\r=`.split(""),Qy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vc.length;t+=1)e[Vc[t].charCodeAt(0)]=-2;for(let t=0;t<Bc.length;t+=1)e[Bc[t].charCodeAt(0)]=t;return e})();function nf(e,t,s){const n=Qy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hc(e){const t=[],s=r=>{t.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{ex(r,n,s)};for(let r=0;r<e.length;r+=1)nf(e.charCodeAt(r),i,o);return t.join("")}function Zy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tx(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}Zy(n,t)}}function ex(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function sx(e){const t=[],s={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)nf(e.charCodeAt(i),s,n);return new Uint8Array(t)}function nx(e){const t=[];return tx(e,s=>t.push(s)),new Uint8Array(t)}function ix(e){return Math.round(Date.now()/1e3)+e}function ox(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ye=()=>typeof window<"u"&&typeof document<"u",Gs={tested:!1,writable:!1},ki=()=>{if(!Ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gs.tested)return Gs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gs.tested=!0,Gs.writable=!0}catch{Gs.tested=!0,Gs.writable=!1}return Gs.writable};function rx(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{t[i]=n}),t}const of=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},ax=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rf=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},lo=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},co=async(e,t)=>{await e.removeItem(t)};class Sr{constructor(){this.promise=new Sr.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Sr.promiseConstructor=Promise;function Yr(e){const t=e.split(".");if(t.length!==3)throw new wi("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!qy.test(t[n]))throw new wi("JWT not in base64url format");return{header:JSON.parse(Hc(t[0])),payload:JSON.parse(Hc(t[1])),signature:sx(t[2]),raw:{header:t[0],payload:t[1]}}}async function lx(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cx(e,t){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await e(o);if(!t(o,null,r)){n(r);return}}catch(r){if(!t(o,r)){i(r);return}}})()})}function dx(e){return("0"+e.toString(16)).substr(-2)}function ux(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,dx).join("")}async function hx(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function fx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await hx(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(e,t,s=!1){const n=ux();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await rf(e,`${t}-code-verifier`,i);const o=await fx(n);return[o,n===o?"plain":"s256"]}const px=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mx(e){const t=e.headers.get(Pa);if(!t||!t.match(px))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var yx=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const tn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xx=[502,503,504];async function zc(e){var t;if(!ax(e))throw new Ta(tn(e),0);if(xx.includes(e.status))throw new Ta(tn(e),e.status);let s;try{s=await e.json()}catch(o){throw new sf(tn(o),o)}let n;const i=mx(e);if(i&&i.getTime()>=ef["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new $c(tn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ms}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new $c(tn(s),e.status,s.weak_password.reasons);throw new Gy(tn(s),e.status||500,n)}const _x=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function bt(e,t,s,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Pa]||(o[Pa]=ef["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await vx(e,t,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function vx(e,t,s,n,i,o){const r=_x(t,n,i,o);let a;try{a=await e(s,Object.assign({},r))}catch(l){throw console.error(l),new Ta(tn(l),0)}if(a.ok||await zc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await zc(l)}}function As(e){var t;let s=null;Cx(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=ix(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Wc(e){const t=As(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Is(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function wx(e){return{data:e,error:null}}function kx(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=e,r=yx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function Sx(e){return e}function Cx(e){return e.access_token&&e.refresh_token&&e.expires_in}var Mx=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class Ax{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=of(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Is})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Mx(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kx,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(pt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Is})}catch(s){if(pt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Sx});if(d.error)throw d.error;const h=await d.json(),f=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(pt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Is})}catch(s){if(pt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Is})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Is})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await bt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(pt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}}}const Px={getItem:e=>ki()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ki()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ki()&&globalThis.localStorage.removeItem(e)}};function qc(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Tx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&ki()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class af extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ex extends af{}async function Ox(e,t,s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await s()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ex(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Tx();const Dx={url:Hy,storageKey:zy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kc(e,t,s){return await s()}class Ui{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ui.nextInstanceID,Ui.nextInstanceID+=1,this.instanceID>0&&Ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Dx),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ax({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=of(i.fetch),this.lock=i.lock||Kc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ye()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Ox:this.lock=Kc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ki()?this.storage=Px:(this.memoryStorage={},this.storage=qc(this.memoryStorage)):(this.memoryStorage={},this.storage=qc(this.memoryStorage)),Ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=rx(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ye()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Xy(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return pt(s)?{error:s}:{error:new sf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,i;try{const o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:As}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(pt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,n,i;try{let o;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await yn(this.storage,this.storageKey)),o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:As})}else if("phone"in t){const{phone:d,password:h,options:f}=t;o=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:As})}else throw new ro("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(pt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:r,options:a}=t;s=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Wc})}else if("phone"in t){const{phone:o,password:r,options:a}=t;s=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Wc})}else throw new ro("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Kr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await lo(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:As});if(await co(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Kr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(pt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=t,a=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:As}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Kr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,o,r;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await yn(this.storage,this.storageKey));const{error:h}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ro("You must provide either an email or phone number.")}catch(a){if(pt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let i,o;"options"in t&&(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:As});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(pt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await yn(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:wx})}catch(o){if(pt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Ms;const{error:i}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:o}=t,{error:r}=await bt(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:n,type:i,options:o}=t,{data:r,error:a}=await bt(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:a}}throw new ro("You must provide either an email or phone number and a type")}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await lo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<qr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let r=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,d)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:t},error:null}}const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Is}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ms}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Is})})}catch(s){if(pt(s))return Jy(s)&&(await this._removeSession(),await co(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ms;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await yn(this.storage,this.storageKey));const{data:c,error:d}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:Is});if(d)throw d;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ms;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Yr(t.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(pt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:r,error:a}=s;if(a)throw a;t=(n=r.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ms;const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Ye())throw new ao("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ao(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Uc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ao("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Uc("No code detected.");const{data:k,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!r||!c)throw new ao("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:b}=await this._getUser(o);if(b)throw b;const _={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:f,refresh_token:r,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(pt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await lo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,t);if(a&&!(Yy(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await co(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=ox(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await yn(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(pt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ye()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(pt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(pt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await cx(async i=>(i>0&&await lx(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:As})),(i,o)=>{const r=200*Math.pow(2,i);return o&&Gr(o)&&Date.now()+r-n<Cn})}catch(n){if(this._debug(s,"error",n),pt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Ye()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await lo(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<qr;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${qr}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Gr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Ms;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Sr;const{data:o,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!o.session)throw new Ms;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),pt(o)){const r={session:null,error:o};return Gr(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rf(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await co(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Cn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Cn}ms, refresh threshold is ${Aa} ticks`),i<=Aa&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof af)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await yn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await bt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(pt(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(pt(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(pt(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await bt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(pt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Yr(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(r=>r.kid===t);if(n||(n=this.jwks.keys.find(r=>r.kid===t),n&&this.jwks_cached_at+Ky>Date.now()))return n;const{data:i,error:o}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!i.keys||i.keys.length===0)throw new wi("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(r=>r.kid===t),!n)throw new wi("No matching signing key found in JWKS");return n}async getClaims(t,s={keys:[]}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Yr(n);if(gx(o.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:i,signature:r},error:null}}const c=bx(i.alg),d=await this.fetchJwk(i.kid,s),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,r,nx(`${a}.${l}`)))throw new wi("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}}Ui.nextInstanceID=0;const Ix=Ui;class Rx extends Ix{constructor(t){super(t)}}var Lx=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Fx{constructor(t,s,n){var i,o,r;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=By(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Iy,realtime:Ly,auth:Object.assign(Object.assign({},Ry),{storageKey:c}),global:Dy},h=Vy(n??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=h.auth)!==null&&r!==void 0?r:{},this.headers,h.global.fetch),this.fetch=Uy(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ty(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new T0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ty(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Lx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rx({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new my(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jx=(e,t,s)=>new Fx(e,t,s),Nx="https://nivvbndswqkjnifvkauf.supabase.co",Ux="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pdnZibmRzd3Fram5pZnZrYXVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NTAzMzEsImV4cCI6MjA2MzQyNjMzMX0.UocPLAEg1htKV7ZivlqRR3GZhDDCNi1jSseGikVpYv4",F=jx(Nx,Ux);function lf(e){const t=e.replace(/\D/g,"").slice(0,11),s=t.slice(0,3),n=t.slice(3,6),i=t.slice(6,9),o=t.slice(9,11);return t.length<=3?t:t.length<=6?`${s}.${t.slice(3)}`:t.length<=9?`${s}.${n}.${t.slice(6)}`:`${s}.${n}.${i}-${o}`}function cf(e){const t=e.replace(/\D/g,"").slice(0,8),s=t.slice(0,5),n=t.slice(5);return t.length<=5?t:`${s}-${n}`}function ns(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function be(e){if(!e)return"";const t=e.split("-");if(t.length!==3)return e;const[s,n,i]=t;return`${i.padStart(2,"0")}/${n.padStart(2,"0")}/${s}`}const $x={name:"Signup",components:{Navbar:ze,Footer:We},data(){return{name:"",email:"",password:""}},methods:{async handleSignup(){if(!this.name){alert("Informe o nome");return}if(this.email&&!ns(this.email)){alert("E-mail inválido");return}const{data:e,error:t}=await F.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,display_name:this.name}}});alert(t?"Erro ao cadastrar: "+t.message:"Cadastro realizado! Verifique seu e-mail para ativar a conta.")}}},Bx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},Vx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Hx={class:"mt-6 text-center text-sm text-gray-500"};function zx(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("section",Bx,[u("div",Vx,[t[10]||(t[10]=u("div",{class:"mb-8 text-center"},[u("h2",{class:"text-3xl font-extrabold text-blue-700"},"Crie sua conta"),u("p",{class:"text-gray-500"},"Comece agora a organizar seus atendimentos com praticidade")],-1)),u("form",{onSubmit:t[3]||(t[3]=Qt((...c)=>o.handleSignup&&o.handleSignup(...c),["prevent"])),class:"space-y-5"},[u("div",null,[t[4]||(t[4]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"name"},"Nome",-1)),T(u("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.name=c),type:"text",id:"name",placeholder:"Seu nome",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.name]])]),u("div",null,[t[5]||(t[5]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),T(u("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>i.email=c),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]])]),u("div",null,[t[6]||(t[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.password=c),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.password]])]),t[7]||(t[7]=u("button",{type:"submit",class:"btn w-full"},"Cadastrar",-1))],32),u("p",Hx,[t[9]||(t[9]=st(" Já tem uma conta? ")),O(a,{to:"/login",class:"text-blue-600 hover:underline"},{default:tt(()=>t[8]||(t[8]=[st("Entrar")])),_:1,__:[8]})])])]),O(l)],64)}const Wx=mt($x,[["render",zx]]),qx={name:"Login",components:{Navbar:ze,Footer:We},data(){return{email:"",password:"",loginError:""}},methods:{async handleLogin(){if(this.loginError="",this.email&&!ns(this.email)){this.loginError="E-mail inválido";return}const{error:e}=await F.auth.signInWithPassword({email:this.email,password:this.password});e?e.message&&e.message.toLowerCase().includes("confirm")?alert("Você precisa confirmar o e-mail antes de acessar o sistema."):this.loginError="E-mail ou senha inválidos":this.$router.push("/dashboard")},async handleGoogleLogin(){const{error:e}=await F.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/#/dashboard"}});e&&alert("Erro ao entrar com Google: "+e.message)},clearError(){this.loginError=""}}},Kx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-blue-100 px-4"},Gx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Yx={key:0,class:"text-red-600 text-center text-sm"},Jx={class:"mt-6 text-center text-sm text-gray-500"};function Xx(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("section",Kx,[u("div",Gx,[t[11]||(t[11]=u("div",{class:"mb-8 text-center"},[u("h2",{class:"text-3xl font-extrabold text-blue-700"},"Entrar"),u("p",{class:"text-gray-500"},"Acesse sua conta do Agenda Zen")],-1)),u("form",{onSubmit:t[5]||(t[5]=Qt((...c)=>o.handleLogin&&o.handleLogin(...c),["prevent"])),class:"space-y-5"},[u("div",null,[t[6]||(t[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),T(u("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),onInput:t[1]||(t[1]=(...c)=>o.clearError&&o.clearError(...c)),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[L,i.email]])]),u("div",null,[t[7]||(t[7]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.password=c),onInput:t[3]||(t[3]=(...c)=>o.clearError&&o.clearError(...c)),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[L,i.password]])]),i.loginError?(v(),w("p",Yx,P(i.loginError),1)):V("",!0),t[8]||(t[8]=u("button",{type:"submit",class:"btn w-full"},"Entrar",-1)),u("button",{type:"button",onClick:t[4]||(t[4]=(...c)=>o.handleGoogleLogin&&o.handleGoogleLogin(...c)),class:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition duration-200"},"Entrar com Google")],32),u("p",Jx,[t[10]||(t[10]=st(" Ainda não tem conta? ")),O(a,{to:"/cadastro",class:"text-blue-600 hover:underline"},{default:tt(()=>t[9]||(t[9]=[st("Criar agora")])),_:1,__:[9]})])])]),O(l)],64)}const Qx=mt(qx,[["render",Xx]]);function Cr(e){const t=e.replace(/\D/g,"").slice(0,11),s=t.slice(0,2);if(t.length<=2)return t?`(${s}`:"";if(t.length<=6){const o=t.slice(2);return`(${s}) ${o}`}if(t.length<=10){const o=t.slice(2,6),r=t.slice(6);return`(${s}) ${o}${r?`-${r}`:""}`}const n=t.slice(2,7),i=t.slice(7);return`(${s}) ${n}-${i}`}function Xo(e){return e.replace(/\D/g,"")}const Zx={name:"Onboarding",data(){return{userId:null,step:1,form:{businessName:"",phone:"",email:""},agenda:{dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},serviceForm:{name:"",duration:"",price:""},services:[],daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:Cr,generateSlug(e){return e?e.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):""},async next(){this.step===1?(await this.saveProfile(),this.step++):this.step===2?(await this.saveAgenda(),this.step++):this.step===3&&(await this.saveServices(),await this.markOnboardingComplete(),this.step++)},prev(){this.step>1&&this.step--},async saveProfile(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}const e={id:this.userId,business_name:this.form.businessName,slug:this.generateSlug(this.form.businessName),phone:this.form.phone,email:this.form.email};await F.from("profiles").upsert(e,{onConflict:["id"]})},async saveAgenda(){const e={start:null,end:null,days:[]};for(const[s,n]of Object.entries(this.agenda.dailySchedule))n.enabled&&n.start&&n.end&&(e.days.push(s),(!e.start||n.start<e.start)&&(e.start=n.start),(!e.end||n.end>e.end)&&(e.end=n.end));const t={id:this.userId,start_time:e.start,end_time:e.end,week_days:e.days.join(","),daily_schedule:this.agenda.dailySchedule};await F.from("profiles").upsert(t,{onConflict:["id"]})},async saveServices(){for(const e of this.services)await F.from("services").insert({name:e.name,duration:e.duration,price:parseFloat(e.price),user_id:this.userId})},addService(){this.serviceForm.name&&(this.services.push({name:this.serviceForm.name,duration:this.serviceForm.duration,price:this.serviceForm.price}),this.serviceForm={name:"",duration:"",price:""})},removeService(e){this.services.splice(e,1)},async markOnboardingComplete(){await F.from("profiles").upsert({id:this.userId,onboarding_complete:!0},{onConflict:["id"]})},formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id}},t_={class:"min-h-screen flex bg-gray-100 items-center justify-center p-4"},e_={class:"bg-white p-6 rounded-lg shadow w-full max-w-2xl"},s_={key:0,class:"space-y-4"},n_={key:1,class:"space-y-4"},i_={class:"mt-1 space-y-2"},o_=["onUpdate:modelValue"],r_={class:"w-20"},a_=["onUpdate:modelValue"],l_=["onUpdate:modelValue"],c_={key:2,class:"space-y-4"},d_={class:"flex justify-end"},u_={class:"mt-4 space-y-1"},h_=["onClick"],f_={key:3,class:"space-y-4 text-center"},p_={key:4,class:"flex justify-between mt-6"},m_={key:5,class:"flex justify-center mt-6"};function g_(e,t,s,n,i,o){return v(),w("div",t_,[u("div",e_,[i.step===1?(v(),w("div",s_,[t[14]||(t[14]=u("h2",{class:"text-xl font-semibold mb-4"},"Bem-vindo! Vamos começar pelo seu perfil.",-1)),u("div",null,[t[11]||(t[11]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>i.form.businessName=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.businessName]])]),u("div",null,[t[12]||(t[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>i.form.phone=r),onInput:t[2]||(t[2]=r=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.phone]])]),u("div",null,[t[13]||(t[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=r=>i.form.email=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])])])):i.step===2?(v(),w("div",n_,[t[17]||(t[17]=u("h2",{class:"text-xl font-semibold mb-4"},"Horários de atendimento",-1)),u("div",null,[t[16]||(t[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),u("div",i_,[(v(!0),w(Y,null,ft(i.daysOfWeekOptions,r=>(v(),w("div",{key:r.value,class:"flex items-center space-x-2"},[T(u("input",{type:"checkbox","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].enabled=a},null,8,o_),[[hl,i.agenda.dailySchedule[r.value].enabled]]),u("span",r_,P(r.label),1),T(u("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].start=a,class:"border rounded-md px-2 py-1"},null,8,a_),[[L,i.agenda.dailySchedule[r.value].start]]),t[15]||(t[15]=u("span",null,"-",-1)),T(u("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].end=a,class:"border rounded-md px-2 py-1"},null,8,l_),[[L,i.agenda.dailySchedule[r.value].end]])]))),128))])])])):i.step===3?(v(),w("div",c_,[t[21]||(t[21]=u("h2",{class:"text-xl font-semibold mb-4"},"Cadastre seus serviços",-1)),u("div",null,[t[18]||(t[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>i.serviceForm.name=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.name]])]),u("div",null,[t[19]||(t[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Duração",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>i.serviceForm.duration=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.duration]])]),u("div",null,[t[20]||(t[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),T(u("input",{type:"number",step:"0.01","onUpdate:modelValue":t[6]||(t[6]=r=>i.serviceForm.price=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.serviceForm.price]])]),u("div",d_,[u("button",{onClick:t[7]||(t[7]=(...r)=>o.addService&&o.addService(...r)),class:"btn"},"Adicionar")]),u("ul",u_,[(v(!0),w(Y,null,ft(i.services,(r,a)=>(v(),w("li",{key:a,class:"flex justify-between"},[u("span",null,P(r.name)+" - "+P(r.duration)+" minutos - "+P(o.formatPrice(r.price)),1),u("button",{onClick:l=>o.removeService(a),class:"text-red-600 hover:underline"},"Remover",8,h_)]))),128))])])):i.step===4?(v(),w("div",f_,t[22]||(t[22]=[u("h2",{class:"text-2xl font-semibold"},"Pronto!",-1),u("p",null,"Seu cadastro inicial está concluído.",-1),u("p",{class:"text-lg"},"Bem-vindo ao Agenda Zen!",-1)]))):V("",!0),i.step<4?(v(),w("div",p_,[i.step>1?(v(),w("button",{key:0,onClick:t[8]||(t[8]=(...r)=>o.prev&&o.prev(...r)),class:"px-4 py-2 border rounded"},"Voltar")):V("",!0),u("button",{onClick:t[9]||(t[9]=(...r)=>o.next&&o.next(...r)),class:"btn ml-auto"},P(i.step===3?"Finalizar":"Próximo"),1)])):(v(),w("div",m_,[u("button",{onClick:t[10]||(t[10]=r=>e.$router.push("/dashboard")),class:"btn"},"Ir para o Dashboard")]))])])}const b_=mt(Zx,[["render",g_]]),y_={name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}}},x_={class:"space-y-6 mt-8"},__={class:"space-y-2"},v_={class:"space-y-2"},w_={class:"space-y-2"},k_={class:"space-y-2"},S_={class:"space-y-2"};function C_(e,t,s,n,i,o){const r=z("router-link");return v(),w("div",null,[s.isOpen?(v(),w("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:t[0]||(t[0]=a=>e.$emit("close"))})):V("",!0),u("aside",{class:ie(["fixed inset-y-0 left-0 transform bg-white shadow-md transition-all duration-200 z-50 md:relative overflow-hidden flex flex-col min-h-screen",s.isOpen?"w-64 p-6 translate-x-0":"w-0 p-0 -translate-x-full"])},[u("button",{class:"absolute top-4 right-4 text-gray-600 focus:outline-none",onClick:t[1]||(t[1]=a=>e.$emit("close"))},t[2]||(t[2]=[u("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t[19]||(t[19]=u("h2",{class:"text-2xl font-bold text-blue-600 mb-6"},"Agenda Zen",-1)),u("nav",x_,[u("div",__,[t[5]||(t[5]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Agendamentos",-1)),O(r,{to:"/dashboard",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[3]||(t[3]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3m10-11v10a1 1 0 01-1 1h-3m-6 0h6"})],-1),u("span",null,"Início",-1)])),_:1,__:[3]}),O(r,{to:"/agendamentos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[4]||(t[4]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),u("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),u("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),u("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),u("span",null,"Agendamentos",-1)])),_:1,__:[4]})]),u("div",v_,[t[9]||(t[9]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Cadastros",-1)),O(r,{to:"/clientes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[6]||(t[6]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"7",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Clientes",-1)])),_:1,__:[6]}),O(r,{to:"/servicos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[7]||(t[7]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V5a4 4 0 018 0v2"})],-1),u("span",null,"Serviços",-1)])),_:1,__:[7]}),O(r,{to:"/salas",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[8]||(t[8]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v18M15 3v18M3 9h18M3 15h18"})],-1),u("span",null,"Salas",-1)])),_:1,__:[8]})]),u("div",w_,[t[11]||(t[11]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Relatórios",-1)),O(r,{to:"/faturamento",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[10]||(t[10]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3v18h18M9 17v-4M13 17v-8M17 17V7"})],-1),u("span",null,"Faturamento",-1)])),_:1,__:[10]})]),u("div",k_,[t[14]||(t[14]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Pagamentos",-1)),O(r,{to:"/comprovantes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[12]||(t[12]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1),u("span",null,"Comprovantes",-1)])),_:1,__:[12]}),O(r,{to:"/templates",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[13]||(t[13]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h16v4H4V4zm0 6h16v10H4V10z"})],-1),u("span",null,"Templates",-1)])),_:1,__:[13]})]),u("div",S_,[t[18]||(t[18]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Conta",-1)),O(r,{to:"/configuracao",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[15]||(t[15]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Perfil",-1)])),_:1,__:[15]}),O(r,{to:"/usuarios",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[16]||(t[16]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Usuários",-1)])),_:1,__:[16]}),O(r,{to:"/minha-assinatura",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:tt(()=>t[17]||(t[17]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",ry:"2","stroke-width":"2"}),u("line",{x1:"3",y1:"9",x2:"21",y2:"9","stroke-width":"2"})],-1),u("span",null,"Minha Assinatura",-1)])),_:1,__:[17]})])])],2)])}const Pe=mt(y_,[["render",C_]]),M_={name:"HeaderUser",props:{title:{type:String,default:"Agenda Zen"}},data(){return{userName:null,showMenu:!1}},async mounted(){var t,s;const{data:{user:e}}=await F.auth.getUser();if(!e)this.$router.push("/login");else{const n=((t=e.user_metadata)==null?void 0:t.display_name)||((s=e.user_metadata)==null?void 0:s.name);this.userName=n&&n.trim()!==""?n:e.email}},methods:{toggleMenu(){this.showMenu=!this.showMenu},async handleLogout(){this.showMenu=!1,await F.auth.signOut(),this.$router.push("/")}}},A_={class:"flex justify-between items-center mb-8"},P_={class:"text-2xl font-semibold text-gray-800"},T_={key:0,class:"relative"},E_={class:"text-gray-600"},O_={key:0,class:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md"};function D_(e,t,s,n,i,o){const r=z("router-link");return v(),w("header",A_,[u("h1",P_,P(s.title),1),i.userName?(v(),w("div",T_,[u("button",{onClick:t[0]||(t[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"flex items-center space-x-2 focus:outline-none"},[t[3]||(t[3]=u("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1)),u("span",E_,P(i.userName),1),(v(),w("svg",{class:ie(["w-4 h-4 text-gray-600 transition-transform",{"rotate-180":i.showMenu}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[2]||(t[2]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),i.showMenu?(v(),w("div",O_,[O(r,{to:"/",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[4]||(t[4]=[st("Início")])),_:1,__:[4]}),O(r,{to:"/configuracao",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[5]||(t[5]=[st("Perfil")])),_:1,__:[5]}),O(r,{to:"/usuarios",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[6]||(t[6]=[st("Usuários")])),_:1,__:[6]}),O(r,{to:"/minha-assinatura",class:"block px-4 py-2 hover:bg-gray-100"},{default:tt(()=>t[7]||(t[7]=[st("Assinatura")])),_:1,__:[7]}),u("button",{onClick:t[1]||(t[1]=(...a)=>o.handleLogout&&o.handleLogout(...a)),class:"w-full text-left px-4 py-2 hover:bg-gray-100"},"Sair")])):V("",!0)])):V("",!0)])}const Te=mt(M_,[["render",D_]]),I_={name:"Modal"},R_={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg md:max-w-2xl max-h-[90vh] overflow-y-auto"};function L_(e,t,s,n,i,o){return v(),w("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[0]||(t[0]=Qt(r=>e.$emit("close"),["self"]))},[u("div",R_,[Qu(e.$slots,"default")])])}const zs=mt(I_,[["render",L_]]);function df(){return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function uf(e,t){if(!e||!t)return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}));const s=`${e}T${t}`;return new Date(new Date(s).toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function an(e,t=1){if(!e)return"";const[s,n]=e.split(":").map(Number),i=new Date;i.setHours(s),i.setMinutes(n),i.setSeconds(0),i.setMinutes(i.getMinutes()+t*60);const o=String(i.getHours()).padStart(2,"0"),r=String(i.getMinutes()).padStart(2,"0");return`${o}:${r}`}const F_={name:"WeekView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0},startHour:{type:Number,default:6},endHour:{type:Number,default:23}},data(){const e=df(),t=e.getDay()===0?7:e.getDay(),s=new Date(e);s.setDate(e.getDate()-t+1);const n=new Date(s);return n.setDate(s.getDate()+6),{weekStart:s,weekEnd:n,dayLabels:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],minuteHeight:1}},computed:{computedStartHour(){return this.startHour},computedEndHour(){return this.endHour},totalHours(){return Math.max(0,this.computedEndHour-this.computedStartHour+1)},events(){const e=this.weekStart.toISOString().split("T")[0],t=this.weekEnd.toISOString().split("T")[0],s=this.appointments.filter(o=>o.date>=e&&o.date<=t).map(o=>{const r=an(o.time),[a,l]=r.split(":"),c=uf(o.date,r),d=new Date(c.getTime()+Number(o.duration||0)*6e4),h=c.getDay()===0?7:c.getDay();return{id:o.id,title:this.getClientName(o.client_id),startTime:`${a}:${l}`,endTime:`${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`,day:h,appointment:o,lane:0,totalLanes:1}}),n={},i=o=>{const[r,a]=o.split(":").map(Number);return r*60+a};return s.forEach(o=>{n[o.day]||(n[o.day]=[]),n[o.day].push(o)}),Object.values(n).forEach(o=>{o.sort((a,l)=>i(a.startTime)-i(l.startTime));let r=[];o.forEach(a=>{r=r.filter(d=>i(d.endTime)>i(a.startTime));let l=0;for(;r.some(d=>d.lane===l);)l++;a.lane=l,r.push(a);const c=Math.max(...r.map(d=>d.lane))+1;r.forEach(d=>{d.totalLanes=Math.max(d.totalLanes,c)})})}),s}},methods:{updateMinuteHeight(){if(this.$refs.grid){const t=window.getComputedStyle(this.$refs.grid).gridTemplateRows.split(" ")[0],s=parseFloat(t);!isNaN(s)&&s>0&&(this.minuteHeight=s/60)}},getEventStyle(e){const t=parseInt(e.startTime.split(":")[0]),s=parseInt(e.startTime.split(":")[1]),n=parseInt(e.endTime.split(":")[0]),i=parseInt(e.endTime.split(":")[1]),o=t*60+s,r=n*60+i,a=this.computedStartHour*60,l=this.minuteHeight,c=(o-a)*l,d=(r-o)*l,h="(100% - 64px) / 7",f=`calc((${h}) / ${e.totalLanes})`;return{top:`${c}px`,height:`${d}px`,left:`calc(64px + (${h}) * ${e.day-1} + ${f} * ${e.lane})`,width:`calc(${f} - 4px)`}},formatDate(e){return e instanceof Date?be(e.toISOString().split("T")[0]):e}},watch:{computedStartHour(){this.$nextTick(this.updateMinuteHeight)},computedEndHour(){this.$nextTick(this.updateMinuteHeight)}},mounted(){this.updateMinuteHeight()}},j_={class:"bg-white rounded-lg shadow overflow-hidden"},N_={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},U_={class:"font-semibold"},$_={class:"relative overflow-x-auto"},B_={class:"flex justify-center items-start border bg-gray-50"},V_=["onClick"];function H_(e,t,s,n,i,o){return v(),w("div",j_,[u("div",N_,[u("div",U_,P(o.formatDate(i.weekStart))+" - "+P(o.formatDate(i.weekEnd)),1)]),u("div",$_,[u("div",{ref:"grid",class:"grid gap-px text-sm bg-gray-100 relative",style:Ti({gridTemplateColumns:"64px repeat(7, 1fr)",gridTemplateRows:`repeat(${o.totalHours}, 60px)`})},[t[0]||(t[0]=u("div",{class:"bg-gray-50"},null,-1)),(v(!0),w(Y,null,ft(i.dayLabels,(r,a)=>(v(),w("div",{key:"day-"+a,class:"font-semibold text-center border px-1 bg-gray-50"},P(r),1))),128)),(v(!0),w(Y,null,ft(o.totalHours,r=>(v(),w(Y,{key:"line-"+r},[u("div",B_,P((o.computedStartHour+r-1).toString().padStart(2,"0"))+":00 ",1),(v(),w(Y,null,ft(7,a=>u("div",{key:"cell-"+a+"-"+r,class:"relative bg-white border"})),64))],64))),128)),(v(!0),w(Y,null,ft(o.events,r=>(v(),w("div",{key:r.id,class:"absolute bg-blue-500 text-white rounded px-2 py-1 event cursor-pointer",style:Ti(o.getEventStyle(r)),onClick:a=>e.$emit("select",r.appointment)},P(r.title)+" - "+P(r.startTime),13,V_))),128))],4)])])}const hf=mt(F_,[["render",H_],["__scopeId","data-v-642ce0c2"]]),z_={name:"AppointmentDetails",props:{appointment:{type:Object,required:!0},getClientName:{type:Function,required:!0},getServiceName:{type:Function,required:!0},getRoomName:{type:Function,default:()=>""},getRoomLink:{type:Function,default:()=>""}}},W_={class:"relative"},q_={key:0,class:"space-y-1 border rounded-md p-4 bg-gray-50 text-gray-700"},K_={key:0},G_={key:1},Y_=["href"];function J_(e,t,s,n,i,o){return v(),w("div",W_,[u("button",{onClick:t[0]||(t[0]=r=>e.$emit("close")),class:"absolute top-0 right-0 m-2 px-2 py-1 rounded border text-sm"}," Fechar "),t[8]||(t[8]=u("h3",{class:"text-lg font-semibold mb-4"},"Detalhes do Agendamento",-1)),s.appointment?(v(),w("div",q_,[u("p",null,[t[1]||(t[1]=u("strong",null,"Data:",-1)),st(" "+P(s.appointment.date),1)]),u("p",null,[t[2]||(t[2]=u("strong",null,"Hora:",-1)),st(" "+P(e.addHoursToTime(s.appointment.time)),1)]),u("p",null,[t[3]||(t[3]=u("strong",null,"Cliente:",-1)),st(" "+P(s.getClientName(s.appointment.client_id)),1)]),u("p",null,[t[4]||(t[4]=u("strong",null,"Serviço:",-1)),st(" "+P(s.getServiceName(s.appointment.service_id)),1)]),u("p",null,[t[5]||(t[5]=u("strong",null,"Duração:",-1)),st(" "+P(s.appointment.duration)+" minutos",1)]),u("p",null,[t[6]||(t[6]=u("strong",null,"Descrição:",-1)),st(" "+P(s.appointment.description),1)]),s.appointment.room_id?(v(),w("p",K_,[t[7]||(t[7]=u("strong",null,"Sala:",-1)),st(" "+P(s.getRoomName(s.appointment.room_id)),1)])):V("",!0),s.appointment.room_id&&s.getRoomLink(s.appointment.room_id)?(v(),w("p",G_,[u("a",{href:s.getRoomLink(s.appointment.room_id),target:"_blank",class:"text-blue-600 underline"},"Acessar Google Meet",8,Y_)])):V("",!0)])):V("",!0),Qu(e.$slots,"actions")])}const ff=mt(z_,[["render",J_]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function to(e){return e+.5|0}const Rs=(e,t,s)=>Math.max(Math.min(e,s),t);function li(e){return Rs(to(e*2.55),0,255)}function Us(e){return Rs(to(e*255),0,255)}function hs(e){return Rs(to(e/2.55)/100,0,1)}function Gc(e){return Rs(to(e*100),0,100)}const Oe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ea=[..."0123456789ABCDEF"],X_=e=>Ea[e&15],Q_=e=>Ea[(e&240)>>4]+Ea[e&15],uo=e=>(e&240)>>4===(e&15),Z_=e=>uo(e.r)&&uo(e.g)&&uo(e.b)&&uo(e.a);function tv(e){var t=e.length,s;return e[0]==="#"&&(t===4||t===5?s={r:255&Oe[e[1]]*17,g:255&Oe[e[2]]*17,b:255&Oe[e[3]]*17,a:t===5?Oe[e[4]]*17:255}:(t===7||t===9)&&(s={r:Oe[e[1]]<<4|Oe[e[2]],g:Oe[e[3]]<<4|Oe[e[4]],b:Oe[e[5]]<<4|Oe[e[6]],a:t===9?Oe[e[7]]<<4|Oe[e[8]]:255})),s}const ev=(e,t)=>e<255?t(e):"";function sv(e){var t=Z_(e)?X_:Q_;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ev(e.a,t):void 0}const nv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pf(e,t,s){const n=t*Math.min(s,1-s),i=(o,r=(o+e/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function iv(e,t,s){const n=(i,o=(i+e/60)%6)=>s-s*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function ov(e,t,s){const n=pf(e,1,.5);let i;for(t+s>1&&(i=1/(t+s),t*=i,s*=i),i=0;i<3;i++)n[i]*=1-t-s,n[i]+=t;return n}function rv(e,t,s,n,i){return e===i?(t-s)/n+(t<s?6:0):t===i?(s-e)/n+2:(e-t)/n+4}function _l(e){const s=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,d;return o!==r&&(d=o-r,c=a>.5?d/(2-o-r):d/(o+r),l=rv(s,n,i,d,o),l=l*60+.5),[l|0,c||0,a]}function vl(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Us)}function wl(e,t,s){return vl(pf,e,t,s)}function av(e,t,s){return vl(ov,e,t,s)}function lv(e,t,s){return vl(iv,e,t,s)}function mf(e){return(e%360+360)%360}function cv(e){const t=nv.exec(e);let s=255,n;if(!t)return;t[5]!==n&&(s=t[6]?li(+t[5]):Us(+t[5]));const i=mf(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=av(i,o,r):t[1]==="hsv"?n=lv(i,o,r):n=wl(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function dv(e,t){var s=_l(e);s[0]=mf(s[0]+t),s=wl(s),e.r=s[0],e.g=s[1],e.b=s[2]}function uv(e){if(!e)return;const t=_l(e),s=t[0],n=Gc(t[1]),i=Gc(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${i}%, ${hs(e.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Yc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hv(){const e={},t=Object.keys(Jc),s=Object.keys(Yc);let n,i,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,Yc[o]);o=parseInt(Jc[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let ho;function fv(e){ho||(ho=hv(),ho.transparent=[0,0,0,0]);const t=ho[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const pv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mv(e){const t=pv.exec(e);let s=255,n,i,o;if(t){if(t[7]!==n){const r=+t[7];s=t[8]?li(r):Rs(r*255,0,255)}return n=+t[1],i=+t[3],o=+t[5],n=255&(t[2]?li(n):Rs(n,0,255)),i=255&(t[4]?li(i):Rs(i,0,255)),o=255&(t[6]?li(o):Rs(o,0,255)),{r:n,g:i,b:o,a:s}}}function gv(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Jr=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,_n=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function bv(e,t,s){const n=_n(hs(e.r)),i=_n(hs(e.g)),o=_n(hs(e.b));return{r:Us(Jr(n+s*(_n(hs(t.r))-n))),g:Us(Jr(i+s*(_n(hs(t.g))-i))),b:Us(Jr(o+s*(_n(hs(t.b))-o))),a:e.a+s*(t.a-e.a)}}function fo(e,t,s){if(e){let n=_l(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,t===0?360:1)),n=wl(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function gf(e,t){return e&&Object.assign(t||{},e)}function Xc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Us(e[3]))):(t=gf(e,{r:0,g:0,b:0,a:1}),t.a=Us(t.a)),t}function yv(e){return e.charAt(0)==="r"?mv(e):cv(e)}class $i{constructor(t){if(t instanceof $i)return t;const s=typeof t;let n;s==="object"?n=Xc(t):s==="string"&&(n=tv(t)||fv(t)||yv(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=gf(this._rgb);return t&&(t.a=hs(t.a)),t}set rgb(t){this._rgb=Xc(t)}rgbString(){return this._valid?gv(this._rgb):void 0}hexString(){return this._valid?sv(this._rgb):void 0}hslString(){return this._valid?uv(this._rgb):void 0}mix(t,s){if(t){const n=this.rgb,i=t.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,s){return t&&(this._rgb=bv(this._rgb,t._rgb,s)),this}clone(){return new $i(this.rgb)}alpha(t){return this._rgb.a=Us(t),this}clearer(t){const s=this._rgb;return s.a*=1-t,this}greyscale(){const t=this._rgb,s=to(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=s,this}opaquer(t){const s=this._rgb;return s.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return fo(this._rgb,2,t),this}darken(t){return fo(this._rgb,2,-t),this}saturate(t){return fo(this._rgb,1,t),this}desaturate(t){return fo(this._rgb,1,-t),this}rotate(t){return dv(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function rs(){}const xv=(()=>{let e=0;return()=>e++})();function gt(e){return e==null}function Lt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function yt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function $t(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Se(e,t){return $t(e)?e:t}function ht(e,t){return typeof e>"u"?t:e}const _v=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,bf=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function It(e,t,s){if(e&&typeof e.call=="function")return e.apply(s,t)}function Mt(e,t,s,n){let i,o,r;if(Lt(e))if(o=e.length,n)for(i=o-1;i>=0;i--)t.call(s,e[i],i);else for(i=0;i<o;i++)t.call(s,e[i],i);else if(yt(e))for(r=Object.keys(e),o=r.length,i=0;i<o;i++)t.call(s,e[r[i]],r[i])}function Qo(e,t){let s,n,i,o;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(i=e[s],o=t[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Zo(e){if(Lt(e))return e.map(Zo);if(yt(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let i=0;for(;i<n;++i)t[s[i]]=Zo(e[s[i]]);return t}return e}function yf(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function vv(e,t,s,n){if(!yf(e))return;const i=t[e],o=s[e];yt(i)&&yt(o)?Bi(i,o,n):t[e]=Zo(o)}function Bi(e,t,s){const n=Lt(t)?t:[t],i=n.length;if(!yt(e))return e;s=s||{};const o=s.merger||vv;let r;for(let a=0;a<i;++a){if(r=n[a],!yt(r))continue;const l=Object.keys(r);for(let c=0,d=l.length;c<d;++c)o(l[c],e,r,s)}return e}function Si(e,t){return Bi(e,t,{merger:wv})}function wv(e,t,s){if(!yf(e))return;const n=t[e],i=s[e];yt(n)&&yt(i)?Si(n,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Zo(i))}const Qc={"":e=>e,x:e=>e.x,y:e=>e.y};function kv(e){const t=e.split("."),s=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function Sv(e){const t=kv(e);return s=>{for(const n of t){if(n==="")break;s=s&&s[n]}return s}}function Bs(e,t){return(Qc[t]||(Qc[t]=Sv(t)))(e)}function kl(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vi=e=>typeof e<"u",Vs=e=>typeof e=="function",Zc=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};function Cv(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const jt=Math.PI,Ft=2*jt,Mv=Ft+jt,tr=Number.POSITIVE_INFINITY,Av=jt/180,Vt=jt/2,Ys=jt/4,td=jt*2/3,Ls=Math.log10,es=Math.sign;function Ci(e,t,s){return Math.abs(e-t)<s}function ed(e){const t=Math.round(e);e=Ci(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(Ls(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function Pv(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(s|0)&&t.push(s),t.sort((i,o)=>i-o).pop(),t}function Tv(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Vn(e){return!Tv(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ev(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}function xf(e,t,s){let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n][s],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ne(e){return e*(jt/180)}function Sl(e){return e*(180/jt)}function sd(e){if(!$t(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function _f(e,t){const s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*jt&&(o+=Ft),{angle:o,distance:i}}function Oa(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ov(e,t){return(e-t+Mv)%Ft-jt}function Ce(e){return(e%Ft+Ft)%Ft}function Hi(e,t,s,n){const i=Ce(e),o=Ce(t),r=Ce(s),a=Ce(o-i),l=Ce(r-i),c=Ce(i-o),d=Ce(i-r);return i===o||i===r||n&&o===r||a>l&&c<d}function Gt(e,t,s){return Math.max(t,Math.min(s,e))}function Dv(e){return Gt(e,-32768,32767)}function ms(e,t,s,n=1e-6){return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function Cl(e,t,s){s=s||(r=>e[r]<t);let n=e.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const gs=(e,t,s,n)=>Cl(e,s,n?i=>{const o=e[i][t];return o<s||o===s&&e[i+1][t]===s}:i=>e[i][t]<s),Iv=(e,t,s)=>Cl(e,s,n=>e[n][t]>=s);function Rv(e,t,s){let n=0,i=e.length;for(;n<i&&e[n]<t;)n++;for(;i>n&&e[i-1]>s;)i--;return n>0||i<e.length?e.slice(n,i):e}const vf=["push","pop","shift","splice","unshift"];function Lv(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),vf.forEach(s=>{const n="_onData"+kl(s),i=e[s];Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function nd(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(vf.forEach(o=>{delete e[o]}),delete e._chartjs)}function wf(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const kf=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Sf(e,t){let s=[],n=!1;return function(...i){s=i,n||(n=!0,kf.call(window,()=>{n=!1,e.apply(t,s)}))}}function Fv(e,t){let s;return function(...n){return t?(clearTimeout(s),s=setTimeout(e,t,n)):e.apply(this,n),t}}const Ml=e=>e==="start"?"left":e==="end"?"right":"center",te=(e,t,s)=>e==="start"?t:e==="end"?s:(t+s)/2,jv=(e,t,s,n)=>e===(n?"left":"right")?s:e==="center"?(t+s)/2:t;function Cf(e,t,s){const n=t.length;let i=0,o=n;if(e._sorted){const{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=r.axis,{min:h,max:f,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(i=Math.min(gs(l,d,h).lo,s?n:gs(t,d,r.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(b=>!gt(b[a.axis]));i-=Math.max(0,g)}i=Gt(i,0,n-1)}if(m){let g=Math.max(gs(l,r.axis,f,!0).hi+1,s?0:gs(t,d,r.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(g-1).findIndex(_=>!gt(_[a.axis]));g+=Math.max(0,b)}o=Gt(g,i,n)-i}else o=n-i}return{start:i,count:o}}function Mf(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,i={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=i,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const po=e=>e===0||e===1,id=(e,t,s)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ft/s)),od=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ft/s)+1,Mi={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Vt)+1,easeOutSine:e=>Math.sin(e*Vt),easeInOutSine:e=>-.5*(Math.cos(jt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>po(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>po(e)?e:id(e,.075,.3),easeOutElastic:e=>po(e)?e:od(e,.075,.3),easeInOutElastic(e){return po(e)?e:e<.5?.5*id(e*2,.1125,.45):.5+.5*od(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Mi.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Mi.easeInBounce(e*2)*.5:Mi.easeOutBounce(e*2-1)*.5+.5};function Al(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function rd(e){return Al(e)?e:new $i(e)}function Xr(e){return Al(e)?e:new $i(e).saturate(.5).darken(.1).hexString()}const Nv=["x","y","borderWidth","radius","tension"],Uv=["color","borderColor","backgroundColor"];function $v(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Uv},numbers:{type:"number",properties:Nv}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Bv(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ad=new Map;function Vv(e,t){t=t||{};const s=e+JSON.stringify(t);let n=ad.get(s);return n||(n=new Intl.NumberFormat(e,t),ad.set(s,n)),n}function eo(e,t,s){return Vv(t,s).format(e)}const Af={values(e){return Lt(e)?e:""+e},numeric(e,t,s){if(e===0)return"0";const n=this.chart.options.locale;let i,o=e;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=Hv(e,s)}const r=Ls(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eo(e,n,l)},logarithmic(e,t,s){if(e===0)return"0";const n=s[t].significand||e/Math.pow(10,Math.floor(Ls(e)));return[1,2,3,5,10,15].includes(n)||t>.8*s.length?Af.numeric.call(this,e,t,s):""}};function Hv(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e)),s}var Mr={formatters:Af};function zv(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,s)=>s.lineWidth,tickColor:(t,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const un=Object.create(null),Da=Object.create(null);function Ai(e,t){if(!t)return e;const s=t.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];e=e[o]||(e[o]=Object.create(null))}return e}function Qr(e,t,s){return typeof t=="string"?Bi(Ai(e,t),s):Bi(Ai(e,""),t)}class Wv{constructor(t,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Xr(i.backgroundColor),this.hoverBorderColor=(n,i)=>Xr(i.borderColor),this.hoverColor=(n,i)=>Xr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(s)}set(t,s){return Qr(this,t,s)}get(t){return Ai(this,t)}describe(t,s){return Qr(Da,t,s)}override(t,s){return Qr(un,t,s)}route(t,s,n,i){const o=Ai(this,t),r=Ai(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return yt(l)?Object.assign({},c,l):ht(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(s=>s(this))}}var Ut=new Wv({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$v,Bv,zv]);function qv(e){return!e||gt(e.size)||gt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function er(e,t,s,n,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,s.push(i)),o>n&&(n=o),n}function Kv(e,t,s,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(i=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const a=s.length;let l,c,d,h,f;for(l=0;l<a;l++)if(h=s[l],h!=null&&!Lt(h))r=er(e,i,o,r,h);else if(Lt(h))for(c=0,d=h.length;c<d;c++)f=h[c],f!=null&&!Lt(f)&&(r=er(e,i,o,r,f));e.restore();const p=o.length/2;if(p>s.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return r}function Js(e,t,s){const n=e.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((t-i)*n)/n+i}function ld(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Ia(e,t,s,n){Pf(e,t,s,n,null)}function Pf(e,t,s,n,i){let o,r,a,l,c,d,h,f;const p=t.pointStyle,m=t.rotation,g=t.radius;let b=(m||0)*Av;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(s,n),e.rotate(b),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:i?e.ellipse(s,n,i/2,g,0,0,Ft):e.arc(s,n,g,0,Ft),e.closePath();break;case"triangle":d=i?i/2:g,e.moveTo(s+Math.sin(b)*d,n-Math.cos(b)*g),b+=td,e.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*g),b+=td,e.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(b+Ys)*l,h=Math.cos(b+Ys)*(i?i/2-c:l),a=Math.sin(b+Ys)*l,f=Math.sin(b+Ys)*(i?i/2-c:l),e.arc(s-h,n-a,c,b-jt,b-Vt),e.arc(s+f,n-r,c,b-Vt,b),e.arc(s+h,n+a,c,b,b+Vt),e.arc(s-f,n+r,c,b+Vt,b+jt),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,d=i?i/2:l,e.rect(s-d,n-l,2*d,2*l);break}b+=Ys;case"rectRot":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+f,n-r),e.lineTo(s+h,n+a),e.lineTo(s-f,n+r),e.closePath();break;case"crossRot":b+=Ys;case"cross":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r);break;case"star":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r),b+=Ys,h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),e.moveTo(s-h,n-a),e.lineTo(s+h,n+a),e.moveTo(s+f,n-r),e.lineTo(s-f,n+r);break;case"line":r=i?i/2:Math.cos(b)*g,a=Math.sin(b)*g,e.moveTo(s-r,n-a),e.lineTo(s+r,n+a);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(b)*(i?i/2:g),n+Math.sin(b)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bs(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Ar(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Pr(e){e.restore()}function Gv(e,t,s,n,i){if(!t)return e.lineTo(s.x,s.y);if(i==="middle"){const o=(t.x+s.x)/2;e.lineTo(o,t.y),e.lineTo(o,s.y)}else i==="after"!=!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function Yv(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Jv(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),gt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Xv(e,t,s,n,i){if(i.strikethrough||i.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(r,d),e.lineTo(a,d),e.stroke()}}function Qv(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function hn(e,t,s,n,i,o={}){const r=Lt(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Jv(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Qv(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),gt(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,s,n,o.maxWidth)),e.fillText(c,s,n,o.maxWidth),Xv(e,s,n,c,o),n+=Number(i.lineHeight);e.restore()}function zi(e,t){const{x:s,y:n,w:i,h:o,radius:r}=t;e.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*jt,jt,!0),e.lineTo(s,n+o-r.bottomLeft),e.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,jt,Vt,!0),e.lineTo(s+i-r.bottomRight,n+o),e.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Vt,0,!0),e.lineTo(s+i,n+r.topRight),e.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-Vt,!0),e.lineTo(s+r.topLeft,n)}const Zv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ew(e,t){const s=(""+e).match(Zv);if(!s||s[1]==="normal")return t*1.2;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100;break}return t*e}const sw=e=>+e||0;function Pl(e,t){const s={},n=yt(t),i=n?Object.keys(t):t,o=yt(e)?n?r=>ht(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of i)s[r]=sw(o(r));return s}function Tf(e){return Pl(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ln(e){return Pl(e,["topLeft","topRight","bottomLeft","bottomRight"])}function re(e){const t=Tf(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function qt(e,t){e=e||{},t=t||Ut.font;let s=ht(e.size,t.size);typeof s=="string"&&(s=parseInt(s,10));let n=ht(e.style,t.style);n&&!(""+n).match(tw)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:ht(e.family,t.family),lineHeight:ew(ht(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:ht(e.weight,t.weight),string:""};return i.string=qv(i),i}function ci(e,t,s,n){let i=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),s!==void 0&&Lt(a)&&(a=a[s%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function nw(e,t,s){const{min:n,max:i}=e,o=bf(t,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function Ws(e,t){return Object.assign(Object.create(e),t)}function Tl(e,t=[""],s,n,i=()=>e[0]){const o=s||e;typeof n>"u"&&(n=If("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>Tl([a,...e],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Of(a,l,()=>uw(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return dd(a).includes(l)},ownKeys(a){return dd(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Hn(e,t,s,n){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Ef(e,n),setContext:o=>Hn(e,o,s,n),override:o=>Hn(e.override(o),t,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return Of(o,r,()=>ow(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function Ef(e,t={scriptable:!0,indexable:!0}){const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Vs(s)?s:()=>s,isIndexable:Vs(n)?n:()=>n}}const iw=(e,t)=>e?e+kl(t):t,El=(e,t)=>yt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Of(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=s();return e[t]=n,n}function ow(e,t,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=e;let a=n[t];return Vs(a)&&r.isScriptable(t)&&(a=rw(t,a,e,s)),Lt(a)&&a.length&&(a=aw(t,a,e,r.isIndexable)),El(t,a)&&(a=Hn(a,i,o&&o[t],r)),a}function rw(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||n);return a.delete(e),El(e,l)&&(l=Ol(i._scopes,i,e,l)),l}function aw(e,t,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(e))return t[o.index%t.length];if(yt(t[0])){const l=t,c=i._scopes.filter(d=>d!==l);t=[];for(const d of l){const h=Ol(c,i,e,d);t.push(Hn(h,o,r&&r[e],a))}}return t}function Df(e,t,s){return Vs(e)?e(t,s):e}const lw=(e,t)=>e===!0?t:typeof e=="string"?Bs(t,e):void 0;function cw(e,t,s,n,i){for(const o of t){const r=lw(s,o);if(r){e.add(r);const a=Df(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function Ol(e,t,s,n){const i=t._rootScopes,o=Df(t._fallback,s,n),r=[...e,...i],a=new Set;a.add(n);let l=cd(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=cd(a,r,o,l,n),l===null)?!1:Tl(Array.from(a),[""],i,o,()=>dw(t,s,n))}function cd(e,t,s,n,i){for(;s;)s=cw(e,t,s,n,i);return s}function dw(e,t,s){const n=e._getTarget();t in n||(n[t]={});const i=n[t];return Lt(i)&&yt(s)?s:i||{}}function uw(e,t,s,n){let i;for(const o of t)if(i=If(iw(o,e),s),typeof i<"u")return El(e,i)?Ol(s,n,e,i):i}function If(e,t){for(const s of t){if(!s)continue;const n=s[e];if(typeof n<"u")return n}}function dd(e){let t=e._keys;return t||(t=e._keys=hw(e._scopes)),t}function hw(e){const t=new Set;for(const s of e)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}function Rf(e,t,s,n){const{iScale:i}=e,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+s,d=t[c],r[a]={r:i.parse(Bs(d,o),c)};return r}const fw=Number.EPSILON||1e-14,zn=(e,t)=>t<e.length&&!e[t].skip&&e[t],Lf=e=>e==="x"?"y":"x";function pw(e,t,s,n){const i=e.skip?t:e,o=t,r=s.skip?t:s,a=Oa(o,i),l=Oa(r,o);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=n*c,f=n*d;return{previous:{x:o.x-h*(r.x-i.x),y:o.y-h*(r.y-i.y)},next:{x:o.x+f*(r.x-i.x),y:o.y+f*(r.y-i.y)}}}function mw(e,t,s){const n=e.length;let i,o,r,a,l,c=zn(e,0);for(let d=0;d<n-1;++d)if(l=c,c=zn(e,d+1),!(!l||!c)){if(Ci(t[d],0,fw)){s[d]=s[d+1]=0;continue}i=s[d]/t[d],o=s[d+1]/t[d],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[d]=i*r*t[d],s[d+1]=o*r*t[d])}}function gw(e,t,s="x"){const n=Lf(s),i=e.length;let o,r,a,l=zn(e,0);for(let c=0;c<i;++c){if(r=a,a=l,l=zn(e,c+1),!a)continue;const d=a[s],h=a[n];r&&(o=(d-r[s])/3,a[`cp1${s}`]=d-o,a[`cp1${n}`]=h-o*t[c]),l&&(o=(l[s]-d)/3,a[`cp2${s}`]=d+o,a[`cp2${n}`]=h+o*t[c])}}function bw(e,t="x"){const s=Lf(t),n=e.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=zn(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=zn(e,r+1),!!l){if(c){const d=c[t]-l[t];i[r]=d!==0?(c[s]-l[s])/d:0}o[r]=a?c?es(i[r-1])!==es(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}mw(e,i,o),gw(e,o,t)}function mo(e,t,s){return Math.max(Math.min(e,s),t)}function yw(e,t){let s,n,i,o,r,a=bs(e[0],t);for(s=0,n=e.length;s<n;++s)r=o,o=a,a=s<n-1&&bs(e[s+1],t),o&&(i=e[s],r&&(i.cp1x=mo(i.cp1x,t.left,t.right),i.cp1y=mo(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=mo(i.cp2x,t.left,t.right),i.cp2y=mo(i.cp2y,t.top,t.bottom)))}function xw(e,t,s,n,i){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")bw(e,i);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=pw(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&yw(e,s)}function Dl(){return typeof window<"u"&&typeof document<"u"}function Il(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function sr(e,t,s){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[s])):n=e,n}const Tr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function _w(e,t){return Tr(e).getPropertyValue(t)}const vw=["top","right","bottom","left"];function cn(e,t,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=vw[i];n[o]=parseFloat(e[t+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const ww=(e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot);function kw(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(ww(i,o,e.target))a=i,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function en(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,i=Tr(s),o=i.boxSizing==="border-box",r=cn(i,"padding"),a=cn(i,"border","width"),{x:l,y:c,box:d}=kw(e,s),h=r.left+(d&&a.left),f=r.top+(d&&a.top);let{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-h)/p*s.width/n),y:Math.round((c-f)/m*s.height/n)}}function Sw(e,t,s){let n,i;if(t===void 0||s===void 0){const o=e&&Il(e);if(!o)t=e.clientWidth,s=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Tr(o),l=cn(a,"border","width"),c=cn(a,"padding");t=r.width-c.width-l.width,s=r.height-c.height-l.height,n=sr(a.maxWidth,o,"clientWidth"),i=sr(a.maxHeight,o,"clientHeight")}}return{width:t,height:s,maxWidth:n||tr,maxHeight:i||tr}}const go=e=>Math.round(e*10)/10;function Cw(e,t,s,n){const i=Tr(e),o=cn(i,"margin"),r=sr(i.maxWidth,e,"clientWidth")||tr,a=sr(i.maxHeight,e,"clientHeight")||tr,l=Sw(e,t,s);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const f=cn(i,"border","width"),p=cn(i,"padding");c-=p.width+f.width,d-=p.height+f.height}return c=Math.max(0,c-o.width),d=Math.max(0,n?c/n:d-o.height),c=go(Math.min(c,r,l.maxWidth)),d=go(Math.min(d,a,l.maxHeight)),c&&!d&&(d=go(c/2)),(t!==void 0||s!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,c=go(Math.floor(d*n))),{width:c,height:d}}function ud(e,t,s){const n=t||1,i=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(e.currentDevicePixelRatio=n,r.height=i,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Mw=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Dl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function hd(e,t){const s=_w(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function sn(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function Aw(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:n==="middle"?s<.5?e.y:t.y:n==="after"?s<1?e.y:t.y:s>0?t.y:e.y}}function Pw(e,t,s,n){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=sn(e,i,s),a=sn(i,o,s),l=sn(o,t,s),c=sn(r,a,s),d=sn(a,l,s);return sn(c,d,s)}const Tw=function(e,t){return{x(s){return e+e+t-s},setWidth(s){t=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Ew=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Ln(e,t,s){return e?Tw(t,s):Ew()}function Ff(e,t){let s,n;(t==="ltr"||t==="rtl")&&(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function jf(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Nf(e){return e==="angle"?{between:Hi,compare:Ov,normalize:Ce}:{between:ms,compare:(t,s)=>t-s,normalize:t=>t}}function fd({start:e,end:t,count:s,loop:n,style:i}){return{start:e%s,end:t%s,loop:n&&(t-e+1)%s===0,style:i}}function Ow(e,t,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Nf(n),l=t.length;let{start:c,end:d,loop:h}=e,f,p;if(h){for(c+=l,d+=l,f=0,p=l;f<p&&r(a(t[c%l][n]),i,o);++f)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:e.style}}function Uf(e,t,s){if(!s)return[e];const{property:n,start:i,end:o}=s,r=t.length,{compare:a,between:l,normalize:c}=Nf(n),{start:d,end:h,loop:f,style:p}=Ow(e,t,s),m=[];let g=!1,b=null,_,k,C;const S=()=>l(i,C,_)&&a(i,C)!==0,M=()=>a(o,_)===0||l(o,C,_),j=()=>g||S(),I=()=>!g||M();for(let $=d,X=d;$<=h;++$)k=t[$%r],!k.skip&&(_=c(k[n]),_!==C&&(g=l(_,i,o),b===null&&j()&&(b=a(_,i)===0?$:X),b!==null&&I()&&(m.push(fd({start:b,end:$,loop:f,count:r,style:p})),b=null),X=$,C=_));return b!==null&&m.push(fd({start:b,end:h,loop:f,count:r,style:p})),m}function $f(e,t){const s=[],n=e.segments;for(let i=0;i<n.length;i++){const o=Uf(n[i],e.points,t);o.length&&s.push(...o)}return s}function Dw(e,t,s,n){let i=0,o=t-1;if(s&&!n)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,s&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}function Iw(e,t,s,n){const i=e.length,o=[];let r=t,a=e[t],l;for(l=t+1;l<=s;++l){const c=e[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%i,end:(l-1)%i,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%i,end:r%i,loop:n}),o}function Rw(e,t){const s=e.points,n=e.options.spanGaps,i=s.length;if(!i)return[];const o=!!e._loop,{start:r,end:a}=Dw(s,i,o,n);if(n===!0)return pd(e,[{start:r,end:a,loop:o}],s,t);const l=a<r?a+i:a,c=!!e._fullLoop&&r===0&&a===i-1;return pd(e,Iw(s,r,l,c),s,t)}function pd(e,t,s,n){return!n||!n.setContext||!s?t:Lw(e,t,s,n)}function Lw(e,t,s,n){const i=e._chart.getContext(),o=md(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=s.length,c=[];let d=o,h=t[0].start,f=h;function p(m,g,b,_){const k=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=k;for(;s[g%l].skip;)g+=k;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:b,style:_}),d=_,h=g%l)}}for(const m of t){h=a?h:m.start;let g=s[h%l],b;for(f=h+1;f<=m.end;f++){const _=s[f%l];b=md(n.setContext(Ws(i,{type:"segment",p0:g,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),Fw(b,d)&&p(h,f-1,m.loop,d),g=_,d=b}h<f-1&&p(h,f-1,m.loop,d)}return c}function md(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Fw(e,t){if(!t)return!1;const s=[],n=function(i,o){return Al(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function bo(e,t,s){return e.options.clip?e[s]:t[s]}function jw(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:bo(s,t,"left"),right:bo(s,t,"right"),top:bo(n,t,"top"),bottom:bo(n,t,"bottom")}:t}function Bf(e,t){const s=t._clip;if(s.disabled)return!1;const n=jw(t,e.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?e.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?e.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Nw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:t,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=kf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),o.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),s+=o.length}),this._lastDate=t,s===0&&(this._running=!1)}_getAnims(t){const s=this._charts;let n=s.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(t,n)),n}listen(t,s,n){this._getAnims(t).listeners[s].push(n)}add(t,s){!s||!s.length||this._getAnims(t).items.push(...s)}has(t){return this._getAnims(t).items.length>0}start(t){const s=this._charts.get(t);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const s=this._charts.get(t);return!(!s||!s.running||!s.items.length)}stop(t){const s=this._charts.get(t);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(t,s,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ls=new Nw;const gd="transparent",Uw={boolean(e,t,s){return s>.5?t:e},color(e,t,s){const n=rd(e||gd),i=n.valid&&rd(t||gd);return i&&i.valid?i.mix(n,s).hexString():t},number(e,t,s){return e+(t-e)*s}};class $w{constructor(t,s,n,i){const o=s[n];i=ci([t.to,i,o,t.from]);const r=ci([t.from,o,i]);this._active=!0,this._fn=t.fn||Uw[t.type||typeof r],this._easing=Mi[t.easing]||Mi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=ci([t.to,s,i,t.from]),this._from=ci([t.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const s=t-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((s,n)=>{t.push({res:s,rej:n})})}_notify(t){const s=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class Vf{constructor(t,s){this._chart=t,this._properties=new Map,this.configure(s)}configure(t){if(!yt(t))return;const s=Object.keys(Ut.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const o=t[i];if(!yt(o))return;const r={};for(const a of s)r[a]=o[a];(Lt(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,s){const n=s.options,i=Vw(t,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&Bw(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,s){const n=this._properties,i=[],o=t.$animations||(t.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,s));continue}const d=s[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,d,a);continue}else h.cancel();if(!f||!f.duration){t[c]=d;continue}o[c]=h=new $w(f,t,c,d),i.push(h)}return i}update(t,s){if(this._properties.size===0){Object.assign(t,s);return}const n=this._createAnimations(t,s);if(n.length)return ls.add(this._chart,n),!0}}function Bw(e,t){const s=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const o=e[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function Vw(e,t){if(!t)return;let s=e.options;if(!s){e.options=t;return}return s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function bd(e,t){const s=e&&e.options||{},n=s.reverse,i=s.min===void 0?t:0,o=s.max===void 0?t:0;return{start:n?o:i,end:n?i:o}}function Hw(e,t,s){if(s===!1)return!1;const n=bd(e,s),i=bd(t,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function zw(e){let t,s,n,i;return yt(e)?(t=e.top,s=e.right,n=e.bottom,i=e.left):t=s=n=i=e,{top:t,right:s,bottom:n,left:i,disabled:e===!1}}function Hf(e,t){const s=[],n=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function yd(e,t,s,n={}){const i=e.keys,o=n.mode==="single";let r,a,l,c;if(t===null)return;let d=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(d=!0,n.all)continue;break}c=e.values[l],$t(c)&&(o||t===0||es(t)===es(c))&&(t+=c)}return!d&&!n.all?0:t}function Ww(e,t){const{iScale:s,vScale:n}=t,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,d;for(l=0,c=r.length;l<c;++l)d=r[l],a[l]={[i]:d,[o]:e[d]};return a}function Zr(e,t){const s=e&&e.options.stacked;return s||s===void 0&&t.stack!==void 0}function qw(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}function Kw(e){const{min:t,max:s,minDefined:n,maxDefined:i}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function Gw(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function xd(e,t,s,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const o=e[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function _d(e,t){const{chart:s,_cachedMeta:n}=e,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,d=qw(o,r,n),h=t.length;let f;for(let p=0;p<h;++p){const m=t[p],{[l]:g,[c]:b}=m,_=m._stacks||(m._stacks={});f=_[c]=Gw(i,d,g),f[a]=b,f._top=xd(f,r,!0,n.type),f._bottom=xd(f,r,!1,n.type);const k=f._visualValues||(f._visualValues={});k[a]=b}}function ta(e,t){const s=e.scales;return Object.keys(s).filter(n=>s[n].axis===t).shift()}function Yw(e,t){return Ws(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Jw(e,t,s){return Ws(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}function ei(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const i of t){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const ea=e=>e==="reset"||e==="none",vd=(e,t)=>t?e:Object.assign({},e),Xw=(e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Hf(s,!0),values:null};class Be{constructor(t,s){this.chart=t,this._ctx=t.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Zr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ei(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,o=s.xAxisID=ht(n.xAxisID,ta(t,"x")),r=s.yAxisID=ht(n.yAxisID,ta(t,"y")),a=s.rAxisID=ht(n.rAxisID,ta(t,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),d=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const s=this._cachedMeta;return t===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nd(this._data,this),t._stacked&&ei(t)}_dataCheck(){const t=this.getDataset(),s=t.data||(t.data=[]),n=this._data;if(yt(s)){const i=this._cachedMeta;this._data=Ww(s,i)}else if(n!==s){if(n){nd(n,this);const i=this._cachedMeta;ei(i),i._parsed=[]}s&&Object.isExtensible(s)&&Lv(s,this),this._syncList=[],this._data=s}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=Zr(s.vScale,s),s.stack!==n.stack&&(i=!0,ei(s),s.stack=n.stack),this._resyncElements(t),(i||o!==s._stacked)&&(_d(this,s._parsed),s._stacked=Zr(s.vScale,s))}configure(){const t=this.chart.config,s=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),s,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&s===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],d,h,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Lt(i[t])?f=this.parseArrayData(n,i,t,s):yt(i[t])?f=this.parseObjectData(n,i,t,s):f=this.parsePrimitiveData(n,i,t,s);const p=()=>h[a]===null||c&&h[a]<c[a];for(d=0;d<s;++d)n._parsed[d+t]=h=f[d],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&_d(this,f)}parsePrimitiveData(t,s,n,i){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),d=o===r,h=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+n,h[f]={[a]:d||o.parse(c[m],m),[l]:r.parse(s[m],m)};return h}parseArrayData(t,s,n,i){const{xScale:o,yScale:r}=t,a=new Array(i);let l,c,d,h;for(l=0,c=i;l<c;++l)d=l+n,h=s[d],a[l]={x:o.parse(h[0],d),y:r.parse(h[1],d)};return a}parseObjectData(t,s,n,i){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,h,f,p;for(d=0,h=i;d<h;++d)f=d+n,p=s[f],c[d]={x:o.parse(Bs(p,a),f),y:r.parse(Bs(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,s,n){const i=this.chart,o=this._cachedMeta,r=s[t.axis],a={keys:Hf(i,!0),values:s._stacks[t.axis]._visualValues};return yd(a,r,o.index,{mode:n})}updateRangeFromParsed(t,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=yd(i,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&t===n.iScale,r=i.length,a=this._getOtherScale(t),l=Xw(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Kw(a);let f,p;function m(){p=i[f];const g=p[a.axis];return!$t(p[t.axis])||d>g||h<g}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][t.axis],$t(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(t){const s=this._cachedMeta;this.update(t||"default"),s._clip=zw(ht(this.options.clip,Hw(s.xScale,s.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(t,o,a,l),d=a;d<a+l;++d){const h=i[d];h.hidden||(h.active&&c?r.push(h):h.draw(t,o))}for(d=0;d<r.length;++d)r[d].draw(t,o)}getStyle(t,s){const n=s?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,s,n){const i=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=Jw(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=i.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Yw(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,s){return this._resolveElementOptions(this.dataElementType.id,s,t)}_resolveElementOptions(t,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=t+"-"+s,a=o[r],l=this.enableOptionSharing&&Vi(n);if(a)return vd(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),d),p=Object.keys(Ut.elements[t]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(vd(g,l))),g}_resolveAnimations(t,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,s),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(t,n,s))}const c=new Vf(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,s){return!s||ea(t)||this.chart._animationsDisabled}_getSharedOptions(t,s){const n=this.resolveDataElementOptions(t,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(t,s,n,i){ea(i)?Object.assign(t,n):this._resolveAnimations(s,i).update(t,n)}updateSharedOptions(t,s,n){t&&!ea(s)&&this._resolveAnimations(void 0,s).update(t,n)}_setStyle(t,s,n,i){t.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(t,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(t,s,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,s,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,t):o<i&&this._removeElements(o,i-o)}_insertElements(t,s,n=!0){const i=this._cachedMeta,o=i.data,r=t+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,s),n&&this.updateElements(o,t,s,"reset")}updateElements(t,s,n,i){}_removeElements(t,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,s);n._stacked&&ei(n,i)}n.data.splice(t,s)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[s,n,i]=t;this[s](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,s){s&&this._sync(["_removeElements",t,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}B(Be,"defaults",{}),B(Be,"datasetElementType",null),B(Be,"dataElementType",null);function Qw(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(e));e._cache.$bar=wf(n.sort((i,o)=>i-o))}return e._cache.$bar}function Zw(e){const t=e.iScale,s=Qw(t,e.type);let n=t._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(Vi(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=t.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=t.ticks.length;i<o;++i)r=t.getPixelForTick(i),l();return n}function t1(e,t,s,n){const i=s.barThickness;let o,r;return gt(i)?(o=t.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function e1(e,t,s,n){const i=t.pixels,o=i[e];let r=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function s1(e,t,s,n){const i=s.parse(e[0],n),o=s.parse(e[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function zf(e,t,s,n){return Lt(e)?s1(e,t,s,n):t[s.axis]=s.parse(e,n),t}function wd(e,t,s,n){const i=e.iScale,o=e.vScale,r=i.getLabels(),a=i===o,l=[];let c,d,h,f;for(c=s,d=s+n;c<d;++c)f=t[c],h={},h[i.axis]=a||i.parse(r[c],c),l.push(zf(f,h,o,c));return l}function sa(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function n1(e,t,s){return e!==0?es(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}function i1(e){let t,s,n,i,o;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:t,top:i,bottom:o}}function o1(e,t,s,n){let i=t.borderSkipped;const o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:d}=i1(e);i==="middle"&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=d:(o[kd(d,r,a,l)]=!0,i=c)),o[kd(i,r,a,l)]=!0,e.borderSkipped=o}function kd(e,t,s,n){return n?(e=r1(e,t,s),e=Sd(e,s,t)):e=Sd(e,t,s),e}function r1(e,t,s){return e===t?s:e===s?t:e}function Sd(e,t,s){return e==="start"?t:e==="end"?s:e}function a1(e,{inflateAmount:t},s){e.inflateAmount=t==="auto"?s===1?.33:0:t}class Do extends Be{parsePrimitiveData(t,s,n,i){return wd(t,s,n,i)}parseArrayData(t,s,n,i){return wd(t,s,n,i)}parseObjectData(t,s,n,i){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,d=r.axis==="x"?a:l,h=[];let f,p,m,g;for(f=n,p=n+i;f<p;++f)g=s[f],m={},m[o.axis]=o.parse(Bs(g,c),f),h.push(zf(Bs(g,d),m,r,f));return h}updateRangeFromParsed(t,s,n,i){super.updateRangeFromParsed(t,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(t),r=o._custom,a=sa(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,t)}updateElements(t,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,i);for(let p=s;p<s+n;p++){const m=this.getParsed(p),g=o||gt(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),b=this._calculateBarIndexPixels(p,d),_=(m._stacks||{})[a.axis],k={horizontal:c,base:g.base,enableBorderRadius:!_||sa(m._custom)||r===_._top||r===_._bottom,x:c?g.head:b.center,y:c?b.center:g.head,height:c?b.size:Math.abs(g.size),width:c?Math.abs(g.size):b.size};f&&(k.options=h||this.resolveDataElementOptions(p,t[p].active?"active":i));const C=k.options||t[p].options;o1(k,C,_,r),a1(k,C,d.ratio),this.updateElement(t[p],p,k,i)}}_getStacks(t,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=d=>{const h=d._parsed.find(p=>p[n.axis]===l),f=h&&h[d.vScale.axis];if(gt(f)||isNaN(f))return!0};for(const d of i)if(!(s!==void 0&&c(d))&&((o===!1||r.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&r.push(d.stack),d.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,s,n){const i=this._getStacks(t,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const t=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=t.barThickness;return{min:a||Zw(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,d=sa(c);let h=l[s.axis],f=0,p=n?this.applyStack(s,l,n):h,m,g;p!==h&&(f=p-h,p=h),d&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&es(h)!==es(c.barEnd)&&(f=0),f+=h);const b=!gt(o)&&!d?o:f;let _=s.getPixelForValue(b);if(this.chart.getDataVisibility(t)?m=s.getPixelForValue(f+p):m=_,g=m-_,Math.abs(g)<r){g=n1(g,s,a)*r,h===a&&(_-=g/2);const k=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),S=Math.min(k,C),M=Math.max(k,C);_=Math.max(Math.min(_,M),S),m=_+g,n&&!d&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(_))}if(_===s.getPixelForValue(a)){const k=es(g)*s.getLineWidthForValue(a)/2;_+=k,g-=k}return{size:g,base:_,head:m,center:m+g/2}}_calculateBarIndexPixels(t,s){const n=s.scale,i=this.options,o=i.skipNull,r=ht(i.maxBarThickness,1/0);let a,l;if(s.grouped){const c=o?this._getStackCount(t):s.stackCount,d=i.barThickness==="flex"?e1(t,s,i,c):t1(t,s,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=d.start+d.chunk*h+d.chunk/2,l=Math.min(r,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,s=t.vScale,n=t.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}B(Do,"id","bar"),B(Do,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),B(Do,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Io extends Be{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,s,n,i){const o=super.parsePrimitiveData(t,s,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,s,n,i){const o=super.parseArrayData(t,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=ht(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,s,n,i){const o=super.parseObjectData(t,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=ht(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let s=0;for(let n=t.length-1;n>=0;--n)s=Math.max(s,t[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(s,i),d=r.axis,h=a.axis;for(let f=s;f<s+n;f++){const p=t[f],m=!o&&this.getParsed(f),g={},b=g[d]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[d]),_=g[h]=o?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(b)||isNaN(_),c&&(g.options=l||this.resolveDataElementOptions(f,p.active?"active":i),o&&(g.options.radius=0)),this.updateElement(p,f,g,i)}}resolveDataElementOptions(t,s){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return s!=="active"&&(i.radius=0),i.radius+=ht(n&&n._custom,o),i}}B(Io,"id","bubble"),B(Io,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),B(Io,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function l1(e,t,s){let n=1,i=1,o=0,r=0;if(t<Ft){const a=e,l=a+t,c=Math.cos(a),d=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(C,S,M)=>Hi(C,a,l,!0)?1:Math.max(S,S*s,M,M*s),m=(C,S,M)=>Hi(C,a,l,!0)?-1:Math.min(S,S*s,M,M*s),g=p(0,c,h),b=p(Vt,d,f),_=m(jt,c,h),k=m(jt+Vt,d,f);n=(g-_)/2,i=(b-k)/2,o=-(g+_)/2,r=-(b+k)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class on extends Be{constructor(t,s){super(t,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(yt(n[t])){const{key:l="value"}=this._parsing;o=c=>+Bs(n[c],l)}let r,a;for(r=t,a=t+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Ne(this.options.rotation-90)}_getCircumference(){return Ne(this.options.circumference)}_getRotationExtents(){let t=Ft,s=-Ft;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();t=Math.min(t,o),s=Math.max(s,o+r)}return{rotation:t,circumference:s-t}}update(t){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(_v(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=l1(h,d,l),b=(n.width-r)/f,_=(n.height-r)/p,k=Math.max(Math.min(b,_)/2,0),C=bf(this.options.radius,k),S=Math.max(C*l,0),M=(C-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*C,this.offsetY=g*C,i.total=this.calculateTotal(),this.outerRadius=C-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*o/Ft)}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,d=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(s,i);let _=this._getRotation(),k;for(k=0;k<s;++k)_+=this._circumference(k,o);for(k=s;k<s+n;++k){const C=this._circumference(k,o),S=t[k],M={x:d+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+C,circumference:C,outerRadius:m,innerRadius:p};b&&(M.options=g||this.resolveDataElementOptions(k,S.active?"active":i)),_+=C,this.updateElement(S,k,M,i)}}calculateTotal(){const t=this._cachedMeta,s=t.data;let n=0,i;for(i=0;i<s.length;i++){const o=t._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const s=this._cachedMeta.total;return s>0&&!isNaN(t)?Ft*(Math.abs(t)/s):0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=eo(s._parsed[t],n.options.locale);return{label:i[t]||"",value:o}}getMaxBorderWidth(t){let s=0;const n=this.chart;let i,o,r,a,l;if(!t){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,a=r.controller;break}}if(!t)return 0;for(i=0,o=t.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(t){let s=0;for(let n=0,i=t.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(t){let s=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}B(on,"id","doughnut"),B(on,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),B(on,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),B(on,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class Ro extends Be{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Cf(s,i,r);this._drawStart=a,this._drawCount=l,Mf(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i),f=r.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,b=Vn(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||o||i==="none",k=s+n,C=t.length;let S=s>0&&this.getParsed(s-1);for(let M=0;M<C;++M){const j=t[M],I=_?j:{};if(M<s||M>=k){I.skip=!0;continue}const $=this.getParsed(M),X=gt($[p]),it=I[f]=r.getPixelForValue($[f],M),rt=I[p]=o||X?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,$,l):$[p],M);I.skip=isNaN(it)||isNaN(rt)||X,I.stop=M>0&&Math.abs($[f]-S[f])>b,g&&(I.parsed=$,I.raw=c.data[M]),h&&(I.options=d||this.resolveDataElementOptions(M,j.active?"active":i)),_||this.updateElement(j,M,I,i),S=$}}getMaxOverflow(){const t=this._cachedMeta,s=t.dataset,n=s.options&&s.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}B(Ro,"id","line"),B(Ro,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),B(Ro,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Pi extends Be{constructor(t,s){super(t,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=eo(s._parsed[t].r,n.options.locale);return{label:i[t]||"",value:o}}parseObjectData(t,s,n,i){return Rf.bind(this)(t,s,n,i)}update(t){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,t)}getMinMax(){const t=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const t=this.chart,s=t.chartArea,n=t.options,i=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,s,n,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*jt;let p=f,m;const g=360/this.countVisibleElements();for(m=0;m<s;++m)p+=this._computeAngle(m,i,g);for(m=s;m<s+n;m++){const b=t[m];let _=p,k=p+this._computeAngle(m,i,g),C=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=k,o&&(l.animateScale&&(C=0),l.animateRotate&&(_=k=f));const S={x:d,y:h,innerRadius:0,outerRadius:C,startAngle:_,endAngle:k,options:this.resolveDataElementOptions(m,b.active?"active":i)};this.updateElement(b,m,S,i)}}countVisibleElements(){const t=this._cachedMeta;let s=0;return t.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(t,s,n){return this.chart.getDataVisibility(t)?Ne(this.resolveDataElementOptions(t,s).angle||n):0}}B(Pi,"id","polarArea"),B(Pi,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),B(Pi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const s=t.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return s.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ra extends on{}B(Ra,"id","pie"),B(Ra,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Lo extends Be{getLabelAndValue(t){const s=this._cachedMeta.vScale,n=this.getParsed(t);return{label:s.getLabels()[t],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(t,s,n,i){return Rf.bind(this)(t,s,n,i)}update(t){const s=this._cachedMeta,n=s.dataset,i=s.data||[],o=s.iScale.getLabels();if(n.points=i,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(n,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,s,n,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=s;a<s+n;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:d.x,f=r?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}B(Lo,"id","radar"),B(Lo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),B(Lo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Fo extends Be{getLabelAndValue(t){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(t),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=Cf(s,n,i);if(this._drawStart=o,this._drawCount=r,Mf(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(d),f=this.includeOptions(i,h),p=r.axis,m=a.axis,{spanGaps:g,segment:b}=this.options,_=Vn(g)?g:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||i==="none";let C=s>0&&this.getParsed(s-1);for(let S=s;S<s+n;++S){const M=t[S],j=this.getParsed(S),I=k?M:{},$=gt(j[m]),X=I[p]=r.getPixelForValue(j[p],S),it=I[m]=o||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,j,l):j[m],S);I.skip=isNaN(X)||isNaN(it)||$,I.stop=S>0&&Math.abs(j[p]-C[p])>_,b&&(I.parsed=j,I.raw=c.data[S]),f&&(I.options=h||this.resolveDataElementOptions(S,M.active?"active":i)),k||this.updateElement(M,S,I,i),C=j}this.updateSharedOptions(h,i,d)}getMaxOverflow(){const t=this._cachedMeta,s=t.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}B(Fo,"id","scatter"),B(Fo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),B(Fo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var c1=Object.freeze({__proto__:null,BarController:Do,BubbleController:Io,DoughnutController:on,LineController:Ro,PieController:Ra,PolarAreaController:Pi,RadarController:Lo,ScatterController:Fo});function Xs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rl{constructor(t){B(this,"options");this.options=t||{}}static override(t){Object.assign(Rl.prototype,t)}init(){}formats(){return Xs()}parse(){return Xs()}format(){return Xs()}add(){return Xs()}diff(){return Xs()}startOf(){return Xs()}endOf(){return Xs()}}var d1={_date:Rl};function u1(e,t,s,n){const{controller:i,data:o,_sorted:r}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?Iv:gs;if(n){if(i._sharedOptions){const d=o[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=c(o,t,s-h),p=c(o,t,s+h);return{lo:f.lo,hi:p.hi}}}}else{const d=c(o,t,s);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=e,p=f.slice(0,d.lo+1).reverse().findIndex(g=>!gt(g[h.axis]));d.lo-=Math.max(0,p);const m=f.slice(d.hi).findIndex(g=>!gt(g[h.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:o.length-1}}function so(e,t,s,n,i){const o=e.getSortedVisibleDatasetMetas(),r=s[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:d}=o[a],{lo:h,hi:f}=u1(o[a],t,r,i);for(let p=h;p<=f;++p){const m=d[p];m.skip||n(m,c,p)}}}function h1(e){const t=e.indexOf("x")!==-1,s=e.indexOf("y")!==-1;return function(n,i){const o=t?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function na(e,t,s,n,i){const o=[];return!i&&!e.isPointInArea(t)||so(e,s,t,function(a,l,c){!i&&!bs(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function f1(e,t,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:d}=r.getProps(["startAngle","endAngle"],n),{angle:h}=_f(r,{x:t.x,y:t.y});Hi(h,c,d)&&i.push({element:r,datasetIndex:a,index:l})}return so(e,s,t,o),i}function p1(e,t,s,n,i,o){let r=[];const a=h1(s);let l=Number.POSITIVE_INFINITY;function c(d,h,f){const p=d.inRange(t.x,t.y,i);if(n&&!p)return;const m=d.getCenterPoint(i);if(!(!!o||e.isPointInArea(m))&&!p)return;const b=a(t,m);b<l?(r=[{element:d,datasetIndex:h,index:f}],l=b):b===l&&r.push({element:d,datasetIndex:h,index:f})}return so(e,s,t,c),r}function ia(e,t,s,n,i,o){return!o&&!e.isPointInArea(t)?[]:s==="r"&&!n?f1(e,t,s,i):p1(e,t,s,n,i,o)}function Cd(e,t,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return so(e,s,t,(l,c,d)=>{l[r]&&l[r](t[s],i)&&(o.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:o}var m1={evaluateInteractionItems:so,modes:{index(e,t,s,n){const i=en(t,e),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?na(e,i,o,n,r):ia(e,i,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?na(e,i,o,n,r):ia(e,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return na(e,i,o,n,r)},nearest(e,t,s,n){const i=en(t,e),o=s.axis||"xy",r=s.includeInvisible||!1;return ia(e,i,o,s.intersect,n,r)},x(e,t,s,n){const i=en(t,e);return Cd(e,i,"x",s.intersect,n)},y(e,t,s,n){const i=en(t,e);return Cd(e,i,"y",s.intersect,n)}}};const Wf=["left","top","right","bottom"];function si(e,t){return e.filter(s=>s.pos===t)}function Md(e,t){return e.filter(s=>Wf.indexOf(s.pos)===-1&&s.box.axis===t)}function ni(e,t){return e.sort((s,n)=>{const i=t?n:s,o=t?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function g1(e){const t=[];let s,n,i,o,r,a;for(s=0,n=(e||[]).length;s<n;++s)i=e[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,t.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return t}function b1(e){const t={};for(const s of e){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Wf.includes(i))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function y1(e,t){const s=b1(e),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=s[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=d?d*i:l&&t.availableHeight)}return s}function x1(e){const t=g1(e),s=ni(t.filter(c=>c.box.fullSize),!0),n=ni(si(t,"left"),!0),i=ni(si(t,"right")),o=ni(si(t,"top"),!0),r=ni(si(t,"bottom")),a=Md(t,"x"),l=Md(t,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:si(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function Ad(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function qf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function _1(e,t,s,n){const{pos:i,box:o}=s,r=e.maxPadding;if(!yt(i)){s.size&&(e[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?o.height:o.width),s.size=h.size/h.count,e[i]+=s.size}o.getPadding&&qf(r,o.getPadding());const a=Math.max(0,t.outerWidth-Ad(r,e,"left","right")),l=Math.max(0,t.outerHeight-Ad(r,e,"top","bottom")),c=a!==e.w,d=l!==e.h;return e.w=a,e.h=l,s.horizontal?{same:c,other:d}:{same:d,other:c}}function v1(e){const t=e.maxPadding;function s(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}function w1(e,t){const s=t.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(t[r],s[r])}),o}return n(e?["left","right"]:["top","bottom"])}function di(e,t,s,n){const i=[];let o,r,a,l,c,d;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,w1(a.horizontal,t));const{same:h,other:f}=_1(t,s,a,n);c|=h&&i.length,d=d||f,l.fullSize||i.push(a)}return c&&di(i,t,s,n)||d}function yo(e,t,s,n,i){e.top=s,e.left=t,e.right=t+n,e.bottom=s+i,e.width=n,e.height=i}function Pd(e,t,s,n){const i=s.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*d,f=c.size||l.height;Vi(c.start)&&(r=c.start),l.fullSize?yo(l,i.left,r,s.outerWidth-i.right-i.left,f):yo(l,t.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=t.h*d,f=c.size||l.width;Vi(c.start)&&(o=c.start),l.fullSize?yo(l,o,i.top,f,s.outerHeight-i.bottom-i.top):yo(l,o,t.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=r}var ne={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(s){t.draw(s)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;s!==-1&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const i=re(e.options.layout.padding),o=Math.max(t-i.width,0),r=Math.max(s-i.height,0),a=x1(e.boxes),l=a.vertical,c=a.horizontal;Mt(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/d,hBoxMaxHeight:r/2}),f=Object.assign({},i);qf(f,re(n));const p=Object.assign({maxPadding:f,w:o,h:r,x:i.left,y:i.top},i),m=y1(l.concat(c),h);di(a.fullSize,p,h,m),di(l,p,h,m),di(c,p,h,m)&&di(l,p,h,m),v1(p),Pd(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Pd(a.rightAndBottom,p,h,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Mt(a.chartArea,g=>{const b=g.box;Object.assign(b,e.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Kf{acquireContext(t,s){}releaseContext(t){return!1}addEventListener(t,s,n){}removeEventListener(t,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,s,n,i){return s=Math.max(0,s||t.width),n=n||t.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(t){return!0}updateConfig(t){}}class k1 extends Kf{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jo="$chartjs",S1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Td=e=>e===null||e==="";function C1(e,t){const s=e.style,n=e.getAttribute("height"),i=e.getAttribute("width");if(e[jo]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Td(i)){const o=hd(e,"width");o!==void 0&&(e.width=o)}if(Td(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=hd(e,"height");o!==void 0&&(e.height=o)}return e}const Gf=Mw?{passive:!0}:!1;function M1(e,t,s){e&&e.addEventListener(t,s,Gf)}function A1(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Gf)}function P1(e,t){const s=S1[e.type]||e.type,{x:n,y:i}=en(e,t);return{type:s,chart:t,native:e,x:n!==void 0?n:null,y:i!==void 0?i:null}}function nr(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function T1(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||nr(a.addedNodes,n),r=r&&!nr(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function E1(e,t,s){const n=e.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||nr(a.removedNodes,n),r=r&&!nr(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const Wi=new Map;let Ed=0;function Yf(){const e=window.devicePixelRatio;e!==Ed&&(Ed=e,Wi.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function O1(e,t){Wi.size||window.addEventListener("resize",Yf),Wi.set(e,t)}function D1(e){Wi.delete(e),Wi.size||window.removeEventListener("resize",Yf)}function I1(e,t,s){const n=e.canvas,i=n&&Il(n);if(!i)return;const o=Sf((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return r.observe(i),O1(e,o),r}function oa(e,t,s){s&&s.disconnect(),t==="resize"&&D1(e)}function R1(e,t,s){const n=e.canvas,i=Sf(o=>{e.ctx!==null&&s(P1(o,e))},e);return M1(n,t,i),i}class L1 extends Kf{acquireContext(t,s){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(C1(t,s),n):null}releaseContext(t){const s=t.canvas;if(!s[jo])return!1;const n=s[jo].initial;["height","width"].forEach(o=>{const r=n[o];gt(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[jo],!0}addEventListener(t,s,n){this.removeEventListener(t,s);const i=t.$proxies||(t.$proxies={}),r={attach:T1,detach:E1,resize:I1}[s]||R1;i[s]=r(t,s,n)}removeEventListener(t,s){const n=t.$proxies||(t.$proxies={}),i=n[s];if(!i)return;({attach:oa,detach:oa,resize:oa}[s]||A1)(t,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,s,n,i){return Cw(t,s,n,i)}isAttached(t){const s=t&&Il(t);return!!(s&&s.isConnected)}}function F1(e){return!Dl()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?k1:L1}var Co;let Ss=(Co=class{constructor(){B(this,"x");B(this,"y");B(this,"active",!1);B(this,"options");B(this,"$animations")}tooltipPosition(t){const{x:s,y:n}=this.getProps(["x","y"],t);return{x:s,y:n}}hasValue(){return Vn(this.x)&&Vn(this.y)}getProps(t,s){const n=this.$animations;if(!s||!n)return this;const i={};return t.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}},B(Co,"defaults",{}),B(Co,"defaultRoutes"),Co);function j1(e,t){const s=e.options.ticks,n=N1(e),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?$1(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return B1(t,c,o,r/i),c;const d=U1(o,t,i);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(xo(t,c,d,gt(p)?0:a-p,a),h=0,f=r-1;h<f;h++)xo(t,c,d,o[h],o[h+1]);return xo(t,c,d,l,gt(p)?t.length:l+p),c}return xo(t,c,d),c}function N1(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),i=e._maxLength/s;return Math.floor(Math.min(n,i))}function U1(e,t,s){const n=V1(e),i=t.length/s;if(!n)return Math.max(i,1);const o=Pv(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function $1(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}function B1(e,t,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),i++,o=s[i*n])}function xo(e,t,s,n,i){const o=ht(n,0),r=Math.min(ht(i,e.length),e.length);let a=0,l,c,d;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),d=o;d<0;)a++,d=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===d&&(t.push(e[c]),a++,d=Math.round(o+a*s))}function V1(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}const H1=e=>e==="left"?"right":e==="right"?"left":e,Od=(e,t,s)=>t==="top"||t==="left"?e[t]+s:e[t]-s,Dd=(e,t)=>Math.min(t||e,e);function Id(e,t){const s=[],n=e.length/t,i=e.length;let o=0;for(;o<i;o+=n)s.push(e[Math.floor(o)]);return s}function z1(e,t,s){const n=e.ticks.length,i=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<o-a||l>r+a)))return l}function W1(e,t){Mt(e,s=>{const n=s.gc,i=n.length/2;let o;if(i>t){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function ii(e){return e.drawTicks?e.tickLength:0}function Rd(e,t){if(!e.display)return 0;const s=qt(e.font,t),n=re(e.padding);return(Lt(e.text)?e.text.length:1)*s.lineHeight+n.height}function q1(e,t){return Ws(e,{scale:t,type:"scale"})}function K1(e,t,s){return Ws(e,{tick:s,index:t,type:"tick"})}function G1(e,t,s){let n=Ml(e);return(s&&t!=="right"||!s&&t==="right")&&(n=H1(n)),n}function Y1(e,t,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:d}=l;let h=0,f,p,m;const g=r-i,b=a-o;if(e.isHorizontal()){if(p=te(n,o,a),yt(s)){const _=Object.keys(s)[0],k=s[_];m=d[_].getPixelForValue(k)+g-t}else s==="center"?m=(c.bottom+c.top)/2+g-t:m=Od(e,s,t);f=a-o}else{if(yt(s)){const _=Object.keys(s)[0],k=s[_];p=d[_].getPixelForValue(k)-b+t}else s==="center"?p=(c.left+c.right)/2-b+t:p=Od(e,s,t);m=te(n,r,i),h=s==="left"?-Vt:Vt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class mn extends Ss{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,s){return t}getUserBounds(){let{_userMin:t,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return t=Se(t,Number.POSITIVE_INFINITY),s=Se(s,Number.NEGATIVE_INFINITY),n=Se(n,Number.POSITIVE_INFINITY),i=Se(i,Number.NEGATIVE_INFINITY),{min:Se(t,n),max:Se(s,i),minDefined:$t(t),maxDefined:$t(s)}}getMinMax(t){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:Se(s,Se(n,s)),max:Se(n,Se(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){It(this.options.beforeUpdate,[this])}update(t,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=nw(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Id(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=j1(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,t=!t),this._startPixel=s,this._endPixel=n,this._reversePixels=t,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){It(this.options.afterUpdate,[this])}beforeSetDimensions(){It(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){It(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),It(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){It(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const s=this.options.ticks;let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n],o.label=It(s.callback,[o.value,n,t],this)}afterTickToLabelConversion(){It(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){It(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,s=t.ticks,n=Dd(this.ticks.length,t.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=Gt(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(t.offset?.5:1)),l=this.maxHeight-ii(t.grid)-s.padding-Rd(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=Sl(Math.min(Math.asin(Gt((d.highest.height+6)/a,-1,1)),Math.asin(Gt(l/c,-1,1))-Math.asin(Gt(f/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){It(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){It(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Rd(i,s.options.font);if(a?(t.width=this.maxWidth,t.height=ii(o)+l):(t.height=this.maxHeight,t.width=ii(o)+l),n.display&&this.ticks.length){const{first:c,last:d,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Ne(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(a){const _=n.mirror?0:b*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+_+p)}else{const _=n.mirror?0:g*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+_+p)}this._calculatePadding(c,d,b,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*t.width,p=n*s.height):(f=n*t.height,p=i*s.width):o==="start"?p=s.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,p=s.width/2),this.paddingLeft=Math.max((f-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let d=s.height/2,h=t.height/2;o==="start"?(d=0,h=t.height):o==="end"&&(d=s.height,h=0),this.paddingTop=d+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){It(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:s}=this.options;return s==="top"||s==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let s,n;for(s=0,n=t.length;s<n;s++)gt(t[s].label)&&(t.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Id(n,s)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Dd(s,n));let c=0,d=0,h,f,p,m,g,b,_,k,C,S,M;for(h=0;h<s;h+=l){if(m=t[h].label,g=this._resolveTickFontOptions(h),i.font=b=g.string,_=o[b]=o[b]||{data:{},gc:[]},k=g.lineHeight,C=S=0,!gt(m)&&!Lt(m))C=er(i,_.data,_.gc,C,m),S=k;else if(Lt(m))for(f=0,p=m.length;f<p;++f)M=m[f],!gt(M)&&!Lt(M)&&(C=er(i,_.data,_.gc,C,M),S+=k);r.push(C),a.push(S),c=Math.max(C,c),d=Math.max(S,d)}W1(o,s);const j=r.indexOf(c),I=a.indexOf(d),$=X=>({width:r[X]||0,height:a[X]||0});return{first:$(0),last:$(s-1),widest:$(j),highest:$(I),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,s){return NaN}getValueForPixel(t){}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const s=this._startPixel+t*this._length;return Dv(this._alignToPixels?Js(this.chart,s,0):s)}getDecimalForPixel(t){const s=(t-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:s}=this;return t<0&&s<0?s:t>0&&s>0?t:0}getContext(t){const s=this.ticks||[];if(t>=0&&t<s.length){const n=s[t];return n.$context||(n.$context=K1(this.getContext(),t,n))}return this.$context||(this.$context=q1(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,s=Ne(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=ii(o),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,_=function(lt){return Js(n,lt,g)};let k,C,S,M,j,I,$,X,it,rt,dt,At;if(r==="top")k=_(this.bottom),I=this.bottom-f,X=k-b,rt=_(t.top)+b,At=t.bottom;else if(r==="bottom")k=_(this.top),rt=t.top,At=_(t.bottom)-b,I=k+b,X=this.top+f;else if(r==="left")k=_(this.right),j=this.right-f,$=k-b,it=_(t.left)+b,dt=t.right;else if(r==="right")k=_(this.left),it=t.left,dt=_(t.right)-b,j=k+b,$=this.left+f;else if(s==="x"){if(r==="center")k=_((t.top+t.bottom)/2+.5);else if(yt(r)){const lt=Object.keys(r)[0],ot=r[lt];k=_(this.chart.scales[lt].getPixelForValue(ot))}rt=t.top,At=t.bottom,I=k+b,X=I+f}else if(s==="y"){if(r==="center")k=_((t.left+t.right)/2);else if(yt(r)){const lt=Object.keys(r)[0],ot=r[lt];k=_(this.chart.scales[lt].getPixelForValue(ot))}j=k-b,$=j-f,it=t.left,dt=t.right}const Wt=ht(i.ticks.maxTicksLimit,h),xt=Math.max(1,Math.ceil(h/Wt));for(C=0;C<h;C+=xt){const lt=this.getContext(C),ot=o.setContext(lt),ut=a.setContext(lt),Tt=ot.lineWidth,ae=ot.color,le=ut.dash||[],Bt=ut.dashOffset,Ee=ot.tickWidth,he=ot.tickColor,qe=ot.tickBorderDash||[],Ht=ot.tickBorderDashOffset;S=z1(this,C,l),S!==void 0&&(M=Js(n,S,Tt),c?j=$=it=dt=M:I=X=rt=At=M,p.push({tx1:j,ty1:I,tx2:$,ty2:X,x1:it,y1:rt,x2:dt,y2:At,width:Tt,color:ae,borderDash:le,borderDashOffset:Bt,tickWidth:Ee,tickColor:he,tickBorderDash:qe,tickBorderDashOffset:Ht}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(t){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,f=ii(n.grid),p=f+d,m=h?-d:p,g=-Ne(this.labelRotation),b=[];let _,k,C,S,M,j,I,$,X,it,rt,dt,At="middle";if(i==="top")j=this.bottom-m,I=this._getXAxisLabelAlignment();else if(i==="bottom")j=this.top+m,I=this._getXAxisLabelAlignment();else if(i==="left"){const xt=this._getYAxisLabelAlignment(f);I=xt.textAlign,M=xt.x}else if(i==="right"){const xt=this._getYAxisLabelAlignment(f);I=xt.textAlign,M=xt.x}else if(s==="x"){if(i==="center")j=(t.top+t.bottom)/2+p;else if(yt(i)){const xt=Object.keys(i)[0],lt=i[xt];j=this.chart.scales[xt].getPixelForValue(lt)+p}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")M=(t.left+t.right)/2-p;else if(yt(i)){const xt=Object.keys(i)[0],lt=i[xt];M=this.chart.scales[xt].getPixelForValue(lt)}I=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?At="top":l==="end"&&(At="bottom"));const Wt=this._getLabelSizes();for(_=0,k=a.length;_<k;++_){C=a[_],S=C.label;const xt=o.setContext(this.getContext(_));$=this.getPixelForTick(_)+o.labelOffset,X=this._resolveTickFontOptions(_),it=X.lineHeight,rt=Lt(S)?S.length:1;const lt=rt/2,ot=xt.color,ut=xt.textStrokeColor,Tt=xt.textStrokeWidth;let ae=I;r?(M=$,I==="inner"&&(_===k-1?ae=this.options.reverse?"left":"right":_===0?ae=this.options.reverse?"right":"left":ae="center"),i==="top"?c==="near"||g!==0?dt=-rt*it+it/2:c==="center"?dt=-Wt.highest.height/2-lt*it+it:dt=-Wt.highest.height+it/2:c==="near"||g!==0?dt=it/2:c==="center"?dt=Wt.highest.height/2-lt*it:dt=Wt.highest.height-rt*it,h&&(dt*=-1),g!==0&&!xt.showLabelBackdrop&&(M+=it/2*Math.sin(g))):(j=$,dt=(1-rt)*it/2);let le;if(xt.showLabelBackdrop){const Bt=re(xt.backdropPadding),Ee=Wt.heights[_],he=Wt.widths[_];let qe=dt-Bt.top,Ht=0-Bt.left;switch(At){case"middle":qe-=Ee/2;break;case"bottom":qe-=Ee;break}switch(I){case"center":Ht-=he/2;break;case"right":Ht-=he;break;case"inner":_===k-1?Ht-=he:_>0&&(Ht-=he/2);break}le={left:Ht,top:qe,width:he+Bt.width,height:Ee+Bt.height,color:xt.backdropColor}}b.push({label:S,font:X,textOffset:dt,options:{rotation:g,color:ot,strokeColor:ut,strokeWidth:Tt,textAlign:ae,textBaseline:At,translation:[M,j],backdrop:le}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:s}=this.options;if(-Ne(this.labelRotation))return t==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,d;return s==="left"?i?(d=this.right+o,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d=this.left)):s==="right"?i?(d=this.left+o,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(t.save(),t.fillStyle=s,t.fillRect(n,i,o,r),t.restore())}getLineWidthForValue(t){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===t);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,h,f;this.isHorizontal()?(c=Js(t,this.left,r)-r/2,d=Js(t,this.right,a)+a/2,h=f=l):(h=Js(t,this.top,r)-r/2,f=Js(t,this.bottom,a)+a/2,c=d=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,h),s.lineTo(d,f),s.stroke(),s.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Ar(n,i);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,d=r.textOffset;hn(n,c,0,d,l,a)}i&&Pr(n)}drawTitle(){const{ctx:t,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=qt(n.font),r=re(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||yt(s)?(l+=r.bottom,Lt(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:d,maxWidth:h,rotation:f}=Y1(this,l,s,a);hn(t,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:G1(a,s,i),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,s=t.ticks&&t.ticks.z||0,n=ht(t.grid&&t.grid.z,-1),i=ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mn.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const s=this.options.ticks.setContext(this.getContext(t));return qt(s.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _o{constructor(t,s,n){this.type=t,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const s=Object.getPrototypeOf(t);let n;Q1(s)&&(n=this.register(s));const i=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in i||(i[o]=t,J1(t,r,n),this.override&&Ut.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const s=this.items,n=t.id,i=this.scope;n in s&&delete s[n],i&&n in Ut[i]&&(delete Ut[i][n],this.override&&delete un[n])}}function J1(e,t,s){const n=Bi(Object.create(null),[s?Ut.get(s):{},Ut.get(t),e.defaults]);Ut.set(t,n),e.defaultRoutes&&X1(t,e.defaultRoutes),e.descriptors&&Ut.describe(t,e.descriptors)}function X1(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),i=n.pop(),o=[e].concat(n).join("."),r=t[s].split("."),a=r.pop(),l=r.join(".");Ut.route(o,i,l,a)})}function Q1(e){return"id"in e&&"defaults"in e}class Z1{constructor(){this.controllers=new _o(Be,"datasets",!0),this.elements=new _o(Ss,"elements"),this.plugins=new _o(Object,"plugins"),this.scales=new _o(mn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(t,o,i):Mt(i,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,s,n){const i=kl(t);It(n["before"+i],[],n),s[t](n),It(n["after"+i],[],n)}_getRegistryForType(t){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(t))return n}return this.plugins}_get(t,s,n){const i=s.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Qe=new Z1;class tk{constructor(){this._init=[]}notify(t,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(o,t,s,n);return s==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,s,n,i){i=i||{};for(const o of t){const r=o.plugin,a=r[n],l=[s,i,o.options];if(It(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){gt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),s}_createDescriptors(t,s){const n=t&&t.config,i=ht(n.options&&n.options.plugins,{}),o=ek(n);return i===!1&&!s?[]:nk(t,o,i,s)}_notifyStateChanges(t){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),t,"stop"),this._notify(i(n,s),t,"start")}}function ek(e){const t={},s=[],n=Object.keys(Qe.plugins.items);for(let o=0;o<n.length;o++)s.push(Qe.getPlugin(n[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),t[r.id]=!0)}return{plugins:s,localIds:t}}function sk(e,t){return!t&&e===!1?null:e===!0?{}:e}function nk(e,{plugins:t,localIds:s},n,i){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=sk(n[l],i);c!==null&&o.push({plugin:a,options:ik(e.config,{plugin:a,local:s[l]},c,r)})}return o}function ik(e,{plugin:t,local:s},n,i){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return s&&t.defaults&&r.push(t.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function La(e,t){const s=Ut.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function ok(e,t){let s=e;return e==="_index_"?s=t:e==="_value_"&&(s=t==="x"?"y":"x"),s}function rk(e,t){return e===t?"_index_":"_value_"}function Ld(e){if(e==="x"||e==="y"||e==="r")return e}function ak(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Fa(e,...t){if(Ld(e))return e;for(const s of t){const n=s.axis||ak(s.position)||e.length>1&&Ld(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Fd(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function lk(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(s.length)return Fd(e,"x",s[0])||Fd(e,"y",s[0])}return{}}function ck(e,t){const s=un[e.type]||{scales:{}},n=t.scales||{},i=La(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!yt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Fa(r,a,lk(r,e),Ut.scales[a.type]),c=rk(l,i),d=s.scales||{};o[r]=Si(Object.create(null),[{axis:l},a,d[l],d[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||La(a,t),d=(un[a]||{}).scales||{};Object.keys(d).forEach(h=>{const f=ok(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Si(o[p],[{axis:f},n[p],d[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Si(a,[Ut.scales[a.type],Ut.scale])}),o}function Jf(e){const t=e.options||(e.options={});t.plugins=ht(t.plugins,{}),t.scales=ck(e,t)}function Xf(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function dk(e){return e=e||{},e.data=Xf(e.data),Jf(e),e}const jd=new Map,Qf=new Set;function vo(e,t){let s=jd.get(e);return s||(s=t(),jd.set(e,s),Qf.add(s)),s}const oi=(e,t,s)=>{const n=Bs(t,s);n!==void 0&&e.add(n)};class uk{constructor(t){this._config=dk(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Xf(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Jf(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,s){return vo(`${t}.transition.${s}`,()=>[[`datasets.${t}.transitions.${s}`,`transitions.${s}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,s){return vo(`${t}-${s}`,()=>[[`datasets.${t}.elements.${s}`,`datasets.${t}`,`elements.${s}`,""]])}pluginScopeKeys(t){const s=t.id,n=this.type;return vo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,s){const n=this._scopeCache;let i=n.get(t);return(!i||s)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,s,n){const{options:i,type:o}=this,r=this._cachedScopes(t,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(d=>{t&&(l.add(t),d.forEach(h=>oi(l,t,h))),d.forEach(h=>oi(l,i,h)),d.forEach(h=>oi(l,un[o]||{},h)),d.forEach(h=>oi(l,Ut,h)),d.forEach(h=>oi(l,Da,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Qf.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:t,type:s}=this;return[t,un[s]||{},Ut.datasets[s]||{},{type:s},Ut,Da]}resolveNamedOptions(t,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Nd(this._resolverCache,t,i);let l=r;if(fk(r,s)){o.$shared=!1,n=Vs(n)?n():n;const c=this.createResolver(t,n,a);l=Hn(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(t,s,n=[""],i){const{resolver:o}=Nd(this._resolverCache,t,n);return yt(s)?Hn(o,s,void 0,i):o}}function Nd(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const i=s.join();let o=n.get(i);return o||(o={resolver:Tl(t,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const hk=e=>yt(e)&&Object.getOwnPropertyNames(e).some(t=>Vs(e[t]));function fk(e,t){const{isScriptable:s,isIndexable:n}=Ef(e);for(const i of t){const o=s(i),r=n(i),a=(r||o)&&e[i];if(o&&(Vs(a)||hk(a))||r&&Lt(a))return!0}return!1}var pk="4.4.9";const mk=["top","bottom","left","right","chartArea"];function Ud(e,t){return e==="top"||e==="bottom"||mk.indexOf(e)===-1&&t==="x"}function $d(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function Bd(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),It(s&&s.onComplete,[e],t)}function gk(e){const t=e.chart,s=t.options.animation;It(s&&s.onProgress,[e],t)}function Zf(e){return Dl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const No={},Vd=e=>{const t=Zf(e);return Object.values(No).filter(s=>s.canvas===t).pop()};function bk(e,t,s){const n=Object.keys(e);for(const i of n){const o=+i;if(o>=t){const r=e[i];delete e[i],(s>0||o>t)&&(e[o+s]=r)}}}function yk(e,t,s,n){return!s||e.type==="mouseout"?null:n?t:e}class ts{static register(...t){Qe.add(...t),Hd()}static unregister(...t){Qe.remove(...t),Hd()}constructor(t,s){const n=this.config=new uk(s),i=Zf(t),o=Vd(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||F1(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=xv(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Fv(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],No[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ls.listen(this,"complete",Bd),ls.listen(this,"progress",gk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return gt(t)?s&&o?o:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Qe}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ud(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ld(this.canvas,this.ctx),this}stop(){return ls.stop(this),this}resize(t,s){ls.running(this)?this._resizeBeforeDraw={width:t,height:s}:this._resize(t,s)}_resize(t,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ud(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),It(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Mt(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,s=t.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=Fa(r,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Mt(o,r=>{const a=r.options,l=a.id,c=Fa(l,a),d=ht(a.type,r.dtype);(a.position===void 0||Ud(a.position,c)!==Ud(r.dposition))&&(a.position=r.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===d)h=n[l];else{const f=Qe.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,t)}),Mt(i,(r,a)=>{r||delete n[a]}),Mt(n,r=>{ne.configure(this,r,r.options),ne.addBox(this,r)})}_updateMetasets(){const t=this._metasets,s=this.data.datasets.length,n=t.length;if(t.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);t.splice(s,n-s)}this._sortedMetasets=t.slice(0).sort($d("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:s}}=this;t.length>s.length&&delete this._stacks,t.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||La(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Qe.getController(a),{datasetElementType:c,dataElementType:d}=Ut.datasets[a];Object.assign(l,{dataElementType:Qe.getElement(d),datasetElementType:c&&Qe.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Mt(this.data.datasets,(t,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Mt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($d("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Mt(this.scales,t=>{ne.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Zc(s,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;bk(t,i,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!Zc(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ne.update(this,this.width,this.height,t);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Mt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Vs(t)?t({datasetIndex:s}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,s){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ls.has(this)?this.attached&&!ls.running(this)&&ls.start(this):(this.draw(),Bd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(t=0;t<s.length&&s[t].z<=0;++t)s[t].draw(this.chartArea);for(this._drawDatasets();t<s.length;++t)s[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let s=t.length-1;s>=0;--s)this._drawDataset(t[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const s=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Bf(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Ar(s,i),t.controller.draw(),i&&Pr(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return bs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,s,n,i){const o=m1.modes[s];return typeof o=="function"?o(this,t,n,i):[]}getDatasetMeta(t){const s=this.data.datasets[t],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:t,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const s=this.data.datasets[t];if(!s)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(t,s){const n=this.getDatasetMeta(t);n.hidden=!s}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,i);Vi(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,s){this._updateVisibility(t,s,!1)}show(t,s){this._updateVisibility(t,s,!0)}_destroyDatasetMeta(t){const s=this._metasets[t];s&&s.controller&&s.controller._destroy(),delete this._metasets[t]}_stop(){let t,s;for(this.stop(),ls.remove(this),t=0,s=this.data.datasets.length;t<s;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:s}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ld(t,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete No[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),t[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Mt(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(s.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Mt(this._listeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._listeners={},Mt(this._responsiveListeners,(t,s)=>{this.platform.removeEventListener(this,s,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const s=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Qo(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(t,s,n){return this._plugins.notify(this,t,s,n)}isPluginEnabled(t){return this._plugins._cache.filter(s=>s.plugin.id===t).length===1}_updateHoverStyles(t,s,n){const i=this.options.hover,o=(l,c)=>l.filter(d=>!c.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),r=o(s,t),a=n?t:o(t,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,s){const n={event:t,replay:s,cancelable:!0,inChartArea:this.isPointInArea(t)},i=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(t,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(t,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(t,i,n,r),l=Cv(t),c=yk(t,this._lastEvent,n,l);n&&(this._lastEvent=null,It(o.onHover,[t,a,this],this),l&&It(o.onClick,[t,a,this],this));const d=!Qo(a,i);return(d||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,d}_getActiveElements(t,s,n,i){if(t.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,i)}}B(ts,"defaults",Ut),B(ts,"instances",No),B(ts,"overrides",un),B(ts,"registry",Qe),B(ts,"version",pk),B(ts,"getChart",Vd);function Hd(){return Mt(ts.instances,e=>e._plugins.invalidate())}function xk(e,t,s){const{startAngle:n,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,r,a,n-c,s+c),l>i?(c=i/l,e.arc(o,r,l,s+c,n-c,!0)):e.arc(o,r,i,s+Vt,n-Vt),e.closePath(),e.clip()}function _k(e){return Pl(e,["outerStart","outerEnd","innerStart","innerEnd"])}function vk(e,t,s,n){const i=_k(e.options.borderRadius),o=(s-t)/2,r=Math.min(o,n*t/2),a=l=>{const c=(s-Math.min(o,l))*n/2;return Gt(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Gt(i.innerStart,0,r),innerEnd:Gt(i.innerEnd,0,r)}}function vn(e,t,s,n){return{x:s+e*Math.cos(t),y:n+e*Math.sin(t)}}function ir(e,t,s,n,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=t,h=Math.max(t.outerRadius+n+s-c,0),f=d>0?d+n+s+c:0;let p=0;const m=i-l;if(n){const xt=d>0?d-n:0,lt=h>0?h-n:0,ot=(xt+lt)/2,ut=ot!==0?m*ot/(ot+n):m;p=(m-ut)/2}const g=Math.max(.001,m*h-s/jt)/h,b=(m-g)/2,_=l+b+p,k=i-b-p,{outerStart:C,outerEnd:S,innerStart:M,innerEnd:j}=vk(t,f,h,k-_),I=h-C,$=h-S,X=_+C/I,it=k-S/$,rt=f+M,dt=f+j,At=_+M/rt,Wt=k-j/dt;if(e.beginPath(),o){const xt=(X+it)/2;if(e.arc(r,a,h,X,xt),e.arc(r,a,h,xt,it),S>0){const Tt=vn($,it,r,a);e.arc(Tt.x,Tt.y,S,it,k+Vt)}const lt=vn(dt,k,r,a);if(e.lineTo(lt.x,lt.y),j>0){const Tt=vn(dt,Wt,r,a);e.arc(Tt.x,Tt.y,j,k+Vt,Wt+Math.PI)}const ot=(k-j/f+(_+M/f))/2;if(e.arc(r,a,f,k-j/f,ot,!0),e.arc(r,a,f,ot,_+M/f,!0),M>0){const Tt=vn(rt,At,r,a);e.arc(Tt.x,Tt.y,M,At+Math.PI,_-Vt)}const ut=vn(I,_,r,a);if(e.lineTo(ut.x,ut.y),C>0){const Tt=vn(I,X,r,a);e.arc(Tt.x,Tt.y,C,_-Vt,X)}}else{e.moveTo(r,a);const xt=Math.cos(X)*h+r,lt=Math.sin(X)*h+a;e.lineTo(xt,lt);const ot=Math.cos(it)*h+r,ut=Math.sin(it)*h+a;e.lineTo(ot,ut)}e.closePath()}function wk(e,t,s,n,i){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){ir(e,t,s,n,l,i);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%Ft||Ft))}return ir(e,t,s,n,l,i),e.fill(),l}function kk(e,t,s,n,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=c*2,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let m=t.endAngle;if(o){ir(e,t,s,n,m,i);for(let g=0;g<o;++g)e.stroke();isNaN(a)||(m=r+(a%Ft||Ft))}p&&xk(e,t,m),o||(ir(e,t,s,n,m,i),e.stroke())}class ui extends Ss{constructor(s){super();B(this,"circumference");B(this,"endAngle");B(this,"fullCircles");B(this,"innerRadius");B(this,"outerRadius");B(this,"pixelMargin");B(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.getProps(["x","y"],i),{angle:r,distance:a}=_f(o,{x:s,y:n}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=ht(f,c-l),g=Hi(r,l,c)&&l!==c,b=m>=Ft||g,_=ms(a,d+p,h+p);return b&&_}getCenterPoint(s){const{x:n,y:i,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:d}=this.options,h=(o+r)/2,f=(a+l+d+c)/2;return{x:n+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:i}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Ft?Math.floor(i/Ft):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(jt,i||0)),d=o*c;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,wk(s,this,d,r,a),kk(s,this,d,r,a),s.restore()}}B(ui,"id","arc"),B(ui,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),B(ui,"defaultRoutes",{backgroundColor:"backgroundColor"}),B(ui,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function tp(e,t,s=t){e.lineCap=ht(s.borderCapStyle,t.borderCapStyle),e.setLineDash(ht(s.borderDash,t.borderDash)),e.lineDashOffset=ht(s.borderDashOffset,t.borderDashOffset),e.lineJoin=ht(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ht(s.borderWidth,t.borderWidth),e.strokeStyle=ht(s.borderColor,t.borderColor)}function Sk(e,t,s){e.lineTo(s.x,s.y)}function Ck(e){return e.stepped?Gv:e.tension||e.cubicInterpolationMode==="monotone"?Yv:Sk}function ep(e,t,s={}){const n=e.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=t,l=Math.max(i,r),c=Math.min(o,a),d=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function Mk(e,t,s,n){const{points:i,options:o}=t,{count:r,start:a,loop:l,ilen:c}=ep(i,s,n),d=Ck(o);let{move:h=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%r],!m.skip&&(h?(e.moveTo(m.x,m.y),h=!1):d(e,g,m,f,o.stepped),g=m);return l&&(m=i[(a+(f?c:0))%r],d(e,g,m,f,o.stepped)),!!l}function Ak(e,t,s,n){const i=t.points,{count:o,start:r,ilen:a}=ep(i,s,n),{move:l=!0,reverse:c}=n||{};let d=0,h=0,f,p,m,g,b,_;const k=S=>(r+(c?a-S:S))%o,C=()=>{g!==b&&(e.lineTo(d,b),e.lineTo(d,g),e.lineTo(d,_))};for(l&&(p=i[k(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[k(f)],p.skip)continue;const S=p.x,M=p.y,j=S|0;j===m?(M<g?g=M:M>b&&(b=M),d=(h*d+S)/++h):(C(),e.lineTo(S,M),m=j,h=0,g=b=M),_=M}C()}function ja(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!s?Ak:Mk}function Pk(e){return e.stepped?Aw:e.tension||e.cubicInterpolationMode==="monotone"?Pw:sn}function Tk(e,t,s,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,s,n)&&i.closePath()),tp(e,t.options),e.stroke(i)}function Ek(e,t,s,n){const{segments:i,options:o}=t,r=ja(t);for(const a of i)tp(e,o,a.style),e.beginPath(),r(e,t,a,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}const Ok=typeof Path2D=="function";function Dk(e,t,s,n){Ok&&!t.options.segment?Tk(e,t,s,n):Ek(e,t,s,n)}class Fs extends Ss{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;xw(this._points,n,t,i,s),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Rw(this,this.options.segment))}first(){const t=this.segments,s=this.points;return t.length&&s[t[0].start]}last(){const t=this.segments,s=this.points,n=t.length;return n&&s[t[n-1].end]}interpolate(t,s){const n=this.options,i=t[s],o=this.points,r=$f(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=Pk(n);let c,d;for(c=0,d=r.length;c<d;++c){const{start:h,end:f}=r[c],p=o[h],m=o[f];if(p===m){a.push(p);continue}const g=Math.abs((i-p[s])/(m[s]-p[s])),b=l(p,m,g,n.stepped);b[s]=t[s],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,s,n){return ja(this)(t,this,s,n)}path(t,s,n){const i=this.segments,o=ja(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(t,this,a,{start:s,end:s+n-1});return!!r}draw(t,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Dk(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}B(Fs,"id","line"),B(Fs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),B(Fs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),B(Fs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function zd(e,t,s,n){const i=e.options,{[s]:o}=e.getProps([s],n);return Math.abs(t-o)<i.radius+i.hitRadius}class Uo extends Ss{constructor(s){super();B(this,"parsed");B(this,"skip");B(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],i);return Math.pow(s-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,n){return zd(this,s,"x",n)}inYRange(s,n){return zd(this,s,"y",n)}getCenterPoint(s){const{x:n,y:i}=this.getProps(["x","y"],s);return{x:n,y:i}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const i=n&&s.borderWidth||0;return(n+i)*2}draw(s,n){const i=this.options;this.skip||i.radius<.1||!bs(this,n,this.size(i)/2)||(s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.fillStyle=i.backgroundColor,Ia(s,i,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}B(Uo,"id","point"),B(Uo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),B(Uo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function sp(e,t){const{x:s,y:n,base:i,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,d,h;return e.horizontal?(h=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-h,d=n+h):(h=o/2,a=s-h,l=s+h,c=Math.min(n,i),d=Math.max(n,i)),{left:a,top:c,right:l,bottom:d}}function js(e,t,s,n){return e?0:Gt(t,s,n)}function Ik(e,t,s){const n=e.options.borderWidth,i=e.borderSkipped,o=Tf(n);return{t:js(i.top,o.top,0,s),r:js(i.right,o.right,0,t),b:js(i.bottom,o.bottom,0,s),l:js(i.left,o.left,0,t)}}function Rk(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=ln(i),r=Math.min(t,s),a=e.borderSkipped,l=n||yt(i);return{topLeft:js(!l||a.top||a.left,o.topLeft,0,r),topRight:js(!l||a.top||a.right,o.topRight,0,r),bottomLeft:js(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:js(!l||a.bottom||a.right,o.bottomRight,0,r)}}function Lk(e){const t=sp(e),s=t.right-t.left,n=t.bottom-t.top,i=Ik(e,s/2,n/2),o=Rk(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ra(e,t,s,n){const i=t===null,o=s===null,a=e&&!(i&&o)&&sp(e,n);return a&&(i||ms(t,a.left,a.right))&&(o||ms(s,a.top,a.bottom))}function Fk(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function jk(e,t){e.rect(t.x,t.y,t.w,t.h)}function aa(e,t,s={}){const n=e.x!==s.x?-t:0,i=e.y!==s.y?-t:0,o=(e.x+e.w!==s.x+s.w?t:0)-n,r=(e.y+e.h!==s.y+s.h?t:0)-i;return{x:e.x+n,y:e.y+i,w:e.w+o,h:e.h+r,radius:e.radius}}class $o extends Ss{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=Lk(this),a=Fk(r.radius)?zi:jk;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,aa(r,s,o)),t.clip(),a(t,aa(o,-s,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,aa(o,s)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,s,n){return ra(this,t,s,n)}inXRange(t,s){return ra(this,t,null,s)}inYRange(t,s){return ra(this,null,t,s)}getCenterPoint(t){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}B($o,"id","bar"),B($o,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),B($o,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Nk=Object.freeze({__proto__:null,ArcElement:ui,BarElement:$o,LineElement:Fs,PointElement:Uo});const Na=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Wd=Na.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function np(e){return Na[e%Na.length]}function ip(e){return Wd[e%Wd.length]}function Uk(e,t){return e.borderColor=np(t),e.backgroundColor=ip(t),++t}function $k(e,t){return e.backgroundColor=e.data.map(()=>np(t++)),t}function Bk(e,t){return e.backgroundColor=e.data.map(()=>ip(t++)),t}function Vk(e){let t=0;return(s,n)=>{const i=e.getDatasetMeta(n).controller;i instanceof on?t=$k(s,t):i instanceof Pi?t=Bk(s,t):i&&(t=Uk(s,t))}}function qd(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Hk(e){return e&&(e.borderColor||e.backgroundColor)}function zk(){return Ut.borderColor!=="rgba(0,0,0,0.1)"||Ut.backgroundColor!=="rgba(0,0,0,0.1)"}var Wk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=e.config,{elements:o}=i,r=qd(n)||Hk(i)||o&&qd(o)||zk();if(!s.forceOverride&&r)return;const a=Vk(e);n.forEach(a)}};function qk(e,t,s,n,i){const o=i.samples||n;if(o>=s)return e.slice(t,t+s);const r=[],a=(s-2)/(o-2);let l=0;const c=t+s-1;let d=t,h,f,p,m,g;for(r[l++]=e[d],h=0;h<o-2;h++){let b=0,_=0,k;const C=Math.floor((h+1)*a)+1+t,S=Math.min(Math.floor((h+2)*a)+1,s)+t,M=S-C;for(k=C;k<S;k++)b+=e[k].x,_+=e[k].y;b/=M,_/=M;const j=Math.floor(h*a)+1+t,I=Math.min(Math.floor((h+1)*a)+1,s)+t,{x:$,y:X}=e[d];for(p=m=-1,k=j;k<I;k++)m=.5*Math.abs(($-b)*(e[k].y-X)-($-e[k].x)*(_-X)),m>p&&(p=m,f=e[k],g=k);r[l++]=f,d=g}return r[l++]=e[c],r}function Kk(e,t,s,n){let i=0,o=0,r,a,l,c,d,h,f,p,m,g;const b=[],_=t+s-1,k=e[t].x,S=e[_].x-k;for(r=t;r<t+s;++r){a=e[r],l=(a.x-k)/S*n,c=a.y;const M=l|0;if(M===d)c<m?(m=c,h=r):c>g&&(g=c,f=r),i=(o*i+a.x)/++o;else{const j=r-1;if(!gt(h)&&!gt(f)){const I=Math.min(h,f),$=Math.max(h,f);I!==p&&I!==j&&b.push({...e[I],x:i}),$!==p&&$!==j&&b.push({...e[$],x:i})}r>0&&j!==p&&b.push(e[j]),b.push(a),d=M,o=0,m=g=c,h=f=p=r}}return b}function op(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Kd(e){e.data.datasets.forEach(t=>{op(t)})}function Gk(e,t){const s=t.length;let n=0,i;const{iScale:o}=e,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Gt(gs(t,o.axis,r).lo,0,s-1)),c?i=Gt(gs(t,o.axis,a).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var Yk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,s)=>{if(!s.enabled){Kd(e);return}const n=e.width;e.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=e.getDatasetMeta(o),c=r||i.data;if(ci([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=e.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||e.options.parsing)return;let{start:h,count:f}=Gk(l,c);const p=s.threshold||4*n;if(f<=p){op(i);return}gt(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(s.algorithm){case"lttb":m=qk(c,h,f,n,s);break;case"min-max":m=Kk(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=m})},destroy(e){Kd(e)}};function Jk(e,t,s){const n=e.segments,i=e.points,o=t.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Ll(l,c,i);const d=Ua(s,i[l],i[c],a.loop);if(!t.segments){r.push({source:a,target:d,start:i[l],end:i[c]});continue}const h=$f(t,d);for(const f of h){const p=Ua(s,o[f.start],o[f.end],f.loop),m=Uf(a,i,p);for(const g of m)r.push({source:g,target:f,start:{[s]:Gd(d,p,"start",Math.max)},end:{[s]:Gd(d,p,"end",Math.min)}})}}return r}function Ua(e,t,s,n){if(n)return;let i=t[e],o=s[e];return e==="angle"&&(i=Ce(i),o=Ce(o)),{property:e,start:i,end:o}}function Xk(e,t){const{x:s=null,y:n=null}=e||{},i=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=Ll(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function Ll(e,t,s){for(;t>e;t--){const n=s[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Gd(e,t,s,n){return e&&t?n(e[s],t[s]):e?e[s]:t?t[s]:0}function rp(e,t){let s=[],n=!1;return Lt(e)?(n=!0,s=e):s=Xk(e,t),s.length?new Fs({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Yd(e){return e&&e.fill!==!1}function Qk(e,t,s){let i=e[t].fill;const o=[t];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!$t(i))return i;if(r=e[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function Zk(e,t,s){const n=n2(e);if(yt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return $t(i)&&Math.floor(i)===i?t2(n[0],t,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function t2(e,t,s,n){return(e==="-"||e==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s}function e2(e,t){let s=null;return e==="start"?s=t.bottom:e==="end"?s=t.top:yt(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}function s2(e,t,s){let n;return e==="start"?n=s:e==="end"?n=t.options.reverse?t.min:t.max:yt(e)?n=e.value:n=t.getBaseValue(),n}function n2(e){const t=e.options,s=t.fill;let n=ht(s&&s.target,s);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function i2(e){const{scale:t,index:s,line:n}=e,i=[],o=n.segments,r=n.points,a=o2(t,s);a.push(rp({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let d=c.start;d<=c.end;d++)r2(i,r[d],a)}return new Fs({points:i,options:{}})}function o2(e,t){const s=[],n=e.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===t)break;o.hidden||s.unshift(o.dataset)}return s}function r2(e,t,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=a2(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function a2(e,t,s){const n=e.interpolate(t,s);if(!n)return{};const i=n[s],o=e.segments,r=e.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const d=o[c],h=r[d.start][s],f=r[d.end][s];if(ms(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:n}}class ap{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Ft},t.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(t){const{x:s,y:n,radius:i}=this,o=t.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function l2(e){const{chart:t,fill:s,line:n}=e;if($t(s))return c2(t,s);if(s==="stack")return i2(e);if(s==="shape")return!0;const i=d2(e);return i instanceof ap?i:rp(i,n)}function c2(e,t){const s=e.getDatasetMeta(t);return s&&e.isDatasetVisible(t)?s.dataset:null}function d2(e){return(e.scale||{}).getPointPositionForValue?h2(e):u2(e)}function u2(e){const{scale:t={},fill:s}=e,n=e2(s,t);if($t(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function h2(e){const{scale:t,fill:s}=e,n=t.options,i=t.getLabels().length,o=n.reverse?t.max:t.min,r=s2(s,t,o),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,o);return new ap({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,r));return a}function la(e,t,s){const n=l2(t),{chart:i,index:o,line:r,scale:a,axis:l}=t,c=r.options,d=c.fill,h=c.backgroundColor,{above:f=h,below:p=h}=d||{},m=i.getDatasetMeta(o),g=Bf(i,m);n&&r.points.length&&(Ar(e,s),f2(e,{line:r,target:n,above:f,below:p,area:s,scale:a,axis:l,clip:g}),Pr(e))}function f2(e,t){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=t,c=s._loop?"angle":t.axis;e.save(),c==="x"&&o!==i&&(Jd(e,n,r.top),Xd(e,{line:s,target:n,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),Jd(e,n,r.bottom)),Xd(e,{line:s,target:n,color:o,scale:a,property:c,clip:l}),e.restore()}function Jd(e,t,s){const{segments:n,points:i}=t;let o=!0,r=!1;e.beginPath();for(const a of n){const{start:l,end:c}=a,d=i[l],h=i[Ll(l,c,i)];o?(e.moveTo(d.x,d.y),o=!1):(e.lineTo(d.x,s),e.lineTo(d.x,d.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(h.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Xd(e,t){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=t,l=Jk(s,n,i);for(const{source:c,target:d,start:h,end:f}of l){const{style:{backgroundColor:p=o}={}}=c,m=n!==!0;e.save(),e.fillStyle=p,p2(e,r,a,m&&Ua(i,h,f)),e.beginPath();const g=!!s.pathSegment(e,c);let b;if(m){g?e.closePath():Qd(e,n,f,i);const _=!!n.pathSegment(e,d,{move:g,reverse:!0});b=g&&_,b||Qd(e,n,h,i)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function p2(e,t,s,n){const i=t.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=r,c=i.top,d=a,h=i.bottom):(l=i.left,c=r,d=i.right,h=a),e.beginPath(),s&&(l=Math.max(l,s.left),d=Math.min(d,s.right),c=Math.max(c,s.top),h=Math.min(h,s.bottom)),e.rect(l,c,d-l,h-c),e.clip()}}function Qd(e,t,s,n){const i=t.interpolate(s,n);i&&e.lineTo(i.x,i.y)}var m2={id:"filler",afterDatasetsUpdate(e,t,s){const n=(e.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Fs&&(l={visible:e.isDatasetVisible(r),index:r,fill:Zk(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=Qk(i,r,s.propagate))},beforeDraw(e,t,s){const n=s.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&la(e.ctx,a,o))}},beforeDatasetsDraw(e,t,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Yd(o)&&la(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,s){const n=t.meta.$filler;!Yd(n)||s.drawTime!=="beforeDatasetDraw"||la(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Zd=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}},g2=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class tu extends Ss{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s,n){this.maxWidth=t,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let s=It(t.generateLabels,[this.chart],this)||[];t.filter&&(s=s.filter(n=>t.filter(n,this.chart.data))),t.sort&&(s=s.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:t,ctx:s}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=qt(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Zd(n,o);let c,d;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(r,o,a,l)+10):(d=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let h=t;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((m,g)=>{const b=n+s/2+o.measureText(m.text).width;(g===0||c[c.length-1]+b+2*a>r)&&(h+=d,c[c.length-(g>0?0:1)]=0,p+=d,f++),l[g]={left:0,top:p,row:f,width:b,height:i},c[c.length-1]+=b+a}),h}_fitCols(t,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=r-t;let h=a,f=0,p=0,m=0,g=0;return this.legendItems.forEach((b,_)=>{const{itemWidth:k,itemHeight:C}=b2(n,s,o,b,i);_>0&&p+C+2*a>d&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,g++,f=p=0),l[_]={left:m,top:p,col:g,width:k,height:C},f=Math.max(f,k),p+=C+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=Ln(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=te(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=te(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=te(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=te(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ar(t,this),this._draw(),Pr(t)}}_draw(){const{options:t,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=t,a=Ut.color,l=Ln(t.rtl,this.left,this.width),c=qt(r.font),{padding:d}=r,h=c.size,f=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=Zd(r,h),_=function(j,I,$){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const X=ht($.lineWidth,1);if(i.fillStyle=ht($.fillStyle,a),i.lineCap=ht($.lineCap,"butt"),i.lineDashOffset=ht($.lineDashOffset,0),i.lineJoin=ht($.lineJoin,"miter"),i.lineWidth=X,i.strokeStyle=ht($.strokeStyle,a),i.setLineDash(ht($.lineDash,[])),r.usePointStyle){const it={radius:g*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:X},rt=l.xPlus(j,m/2),dt=I+f;Pf(i,it,rt,dt,r.pointStyleWidth&&m)}else{const it=I+Math.max((h-g)/2,0),rt=l.leftForLtr(j,m),dt=ln($.borderRadius);i.beginPath(),Object.values(dt).some(At=>At!==0)?zi(i,{x:rt,y:it,w:m,h:g,radius:dt}):i.rect(rt,it,m,g),i.fill(),X!==0&&i.stroke()}i.restore()},k=function(j,I,$){hn(i,$.text,j,I+b/2,c,{strikethrough:$.hidden,textAlign:l.textAlign($.textAlign)})},C=this.isHorizontal(),S=this._computeTitleHeight();C?p={x:te(o,this.left+d,this.right-n[0]),y:this.top+d+S,line:0}:p={x:this.left+d,y:te(o,this.top+S+d,this.bottom-s[0].height),line:0},Ff(this.ctx,t.textDirection);const M=b+d;this.legendItems.forEach((j,I)=>{i.strokeStyle=j.fontColor,i.fillStyle=j.fontColor;const $=i.measureText(j.text).width,X=l.textAlign(j.textAlign||(j.textAlign=r.textAlign)),it=m+f+$;let rt=p.x,dt=p.y;l.setWidth(this.width),C?I>0&&rt+it+d>this.right&&(dt=p.y+=M,p.line++,rt=p.x=te(o,this.left+d,this.right-n[p.line])):I>0&&dt+M>this.bottom&&(rt=p.x=rt+s[p.line].width+d,p.line++,dt=p.y=te(o,this.top+S+d,this.bottom-s[p.line].height));const At=l.x(rt);if(_(At,dt,j),rt=jv(X,rt+m+f,C?rt+it:this.right,t.rtl),k(l.x(rt),dt,j),C)p.x+=it+d;else if(typeof j.text!="string"){const Wt=c.lineHeight;p.y+=lp(j,Wt)+d}else p.y+=M}),jf(this.ctx,t.textDirection)}drawTitle(){const t=this.options,s=t.title,n=qt(s.font),i=re(s.padding);if(!s.display)return;const o=Ln(t.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,h=te(t.align,h,this.right-f);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);d=c+te(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=te(a,h,h+f);r.textAlign=o.textAlign(Ml(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,hn(r,s.text,p,d,n)}_computeTitleHeight(){const t=this.options.title,s=qt(t.font),n=re(t.padding);return t.display?s.lineHeight+n.height:0}_getLegendItemAt(t,s){let n,i,o;if(ms(t,this.left,this.right)&&ms(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],ms(t,i.left,i.left+i.width)&&ms(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const s=this.options;if(!_2(t.type,s))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,o=g2(i,n);i&&!o&&It(s.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!o&&It(s.onHover,[t,n,this],this)}else n&&It(s.onClick,[t,n,this],this)}}function b2(e,t,s,n,i){const o=y2(n,e,t,s),r=x2(i,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function y2(e,t,s,n){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),t+s.size/2+n.measureText(i).width}function x2(e,t,s){let n=e;return typeof t.text!="string"&&(n=lp(t,s)),n}function lp(e,t){const s=e.text?e.text.length:0;return t*s}function _2(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var v2={id:"legend",_element:tu,start(e,t,s){const n=e.legend=new tu({ctx:e.ctx,options:s,chart:e});ne.configure(e,n,s),ne.addBox(e,n)},stop(e){ne.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;ne.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),d=re(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Fl extends Ss{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=s;const i=Lt(n.text)?n.text.length:1;this._padding=re(n.padding);const o=i*qt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:s,left:n,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,d,h;return this.isHorizontal()?(d=te(a,n,o),h=s+t,c=o-n):(r.position==="left"?(d=n+t,h=te(a,i,s),l=jt*-.5):(d=o-t,h=te(a,s,i),l=jt*.5),c=i-s),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,s=this.options;if(!s.display)return;const n=qt(s.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);hn(t,s.text,0,0,n,{color:s.color,maxWidth:l,rotation:c,textAlign:Ml(s.align),textBaseline:"middle",translation:[r,a]})}}function w2(e,t){const s=new Fl({ctx:e.ctx,options:t,chart:e});ne.configure(e,s,t),ne.addBox(e,s),e.titleBlock=s}var k2={id:"title",_element:Fl,start(e,t,s){w2(e,s)},stop(e){const t=e.titleBlock;ne.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const n=e.titleBlock;ne.configure(e,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wo=new WeakMap;var S2={id:"subtitle",start(e,t,s){const n=new Fl({ctx:e.ctx,options:s,chart:e});ne.configure(e,n,s),ne.addBox(e,n),wo.set(e,n)},stop(e){ne.removeBox(e,wo.get(e)),wo.delete(e)},beforeUpdate(e,t,s){const n=wo.get(e);ne.configure(e,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hi={average(e){if(!e.length)return!1;let t,s,n=new Set,i=0,o=0;for(t=0,s=e.length;t<s;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(e,t){if(!e.length)return!1;let s=t.x,n=t.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Oa(t,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Je(e,t){return t&&(Lt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function C2(e,t){const{element:s,datasetIndex:n,index:i}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:e,label:r,parsed:o.getParsed(i),raw:e.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function eu(e,t){const s=e.chart.ctx,{body:n,footer:i,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=qt(t.bodyFont),c=qt(t.titleFont),d=qt(t.footerFont),h=o.length,f=i.length,p=n.length,m=re(t.padding);let g=m.height,b=0,_=n.reduce((S,M)=>S+M.before.length+M.lines.length+M.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),_){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*S+(_-p)*l.lineHeight+(_-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let k=0;const C=function(S){b=Math.max(b,s.measureText(S).width+k)};return s.save(),s.font=c.string,Mt(e.title,C),s.font=l.string,Mt(e.beforeBody.concat(e.afterBody),C),k=t.displayColors?r+2+t.boxPadding:0,Mt(n,S=>{Mt(S.before,C),Mt(S.lines,C),Mt(S.after,C)}),k=0,s.font=d.string,Mt(e.footer,C),s.restore(),b+=m.width,{width:b,height:g}}function M2(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}function A2(e,t,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(e==="left"&&i+o+r>t.width||e==="right"&&i-o-r<0)return!0}function P2(e,t,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),A2(c,e,t,s)&&(c="center"),c}function su(e,t,s){const n=s.yAlign||t.yAlign||M2(e,s);return{xAlign:s.xAlign||t.xAlign||P2(e,t,s,n),yAlign:n}}function T2(e,t){let{x:s,width:n}=e;return t==="right"?s-=n:t==="center"&&(s-=n/2),s}function E2(e,t,s){let{y:n,height:i}=e;return t==="top"?n+=s:t==="bottom"?n-=i+s:n-=i/2,n}function nu(e,t,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=ln(r);let m=T2(t,a);const g=E2(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(d,f)+i:a==="right"&&(m+=Math.max(h,p)+i),{x:Gt(m,0,n.width-t.width),y:Gt(g,0,n.height-t.height)}}function ko(e,t,s){const n=re(s.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function iu(e){return Je([],cs(e))}function O2(e,t,s){return Ws(e,{tooltip:t,tooltipItems:s,type:"tooltip"})}function ou(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const cp={beforeTitle:rs,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:rs,beforeBody:rs,beforeLabel:rs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return gt(s)||(t+=s),t},labelColor(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const s=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:rs,afterBody:rs,beforeFooter:rs,footer:rs,afterFooter:rs};function pe(e,t,s,n){const i=e[t].call(s,n);return typeof i>"u"?cp[t].call(s,n):i}class $a extends Ss{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new Vf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=O2(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,s){const{callbacks:n}=s,i=pe(n,"beforeTitle",this,t),o=pe(n,"title",this,t),r=pe(n,"afterTitle",this,t);let a=[];return a=Je(a,cs(i)),a=Je(a,cs(o)),a=Je(a,cs(r)),a}getBeforeBody(t,s){return iu(pe(s.callbacks,"beforeBody",this,t))}getBody(t,s){const{callbacks:n}=s,i=[];return Mt(t,o=>{const r={before:[],lines:[],after:[]},a=ou(n,o);Je(r.before,cs(pe(a,"beforeLabel",this,o))),Je(r.lines,pe(a,"label",this,o)),Je(r.after,cs(pe(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(t,s){return iu(pe(s.callbacks,"afterBody",this,t))}getFooter(t,s){const{callbacks:n}=s,i=pe(n,"beforeFooter",this,t),o=pe(n,"footer",this,t),r=pe(n,"afterFooter",this,t);let a=[];return a=Je(a,cs(i)),a=Je(a,cs(o)),a=Je(a,cs(r)),a}_createItems(t){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(C2(this.chart,s[l]));return t.filter&&(a=a.filter((d,h,f)=>t.filter(d,h,f,n))),t.itemSort&&(a=a.sort((d,h)=>t.itemSort(d,h,n))),Mt(a,d=>{const h=ou(t.callbacks,d);i.push(pe(h,"labelColor",this,d)),o.push(pe(h,"labelPointStyle",this,d)),r.push(pe(h,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=hi[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=eu(this,n),c=Object.assign({},a,l),d=su(this.chart,n,c),h=nu(n,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(t,s,n,i){const o=this.getCaretPosition(t,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(t,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:h}=ln(a),{x:f,y:p}=t,{width:m,height:g}=s;let b,_,k,C,S,M;return o==="center"?(S=p+g/2,i==="left"?(b=f,_=b-r,C=S+r,M=S-r):(b=f+m,_=b+r,C=S-r,M=S+r),k=b):(i==="left"?_=f+Math.max(l,d)+r:i==="right"?_=f+m-Math.max(c,h)-r:_=this.caretX,o==="top"?(C=p,S=C-r,b=_-r,k=_+r):(C=p+g,S=C+r,b=_+r,k=_-r),M=C),{x1:b,x2:_,x3:k,y1:C,y2:S,y3:M}}drawTitle(t,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=Ln(n.rtl,this.x,this.width);for(t.x=ko(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=qt(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,d=qt(o.bodyFont),h=ko(this,"left",o),f=i.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,m=s.y+p;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,_=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ia(t,g,b,_),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ia(t,g,b,_)}else{t.lineWidth=yt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),_=ln(r.borderRadius);Object.values(_).some(k=>k!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,zi(t,{x:g,y:m,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),zi(t,{x:b,y:m+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,m,c,l),t.strokeRect(g,m,c,l),t.fillStyle=r.backgroundColor,t.fillRect(b,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=n,h=qt(n.bodyFont);let f=h.lineHeight,p=0;const m=Ln(n.rtl,this.x,this.width),g=function($){s.fillText($,m.x(t.x+p),t.y+f/2),t.y+=f+o},b=m.textAlign(r);let _,k,C,S,M,j,I;for(s.textAlign=r,s.textBaseline="middle",s.font=h.string,t.x=ko(this,b,n),s.fillStyle=n.bodyColor,Mt(this.beforeBody,g),p=a&&b!=="right"?r==="center"?c/2+d:c+2+d:0,S=0,j=i.length;S<j;++S){for(_=i[S],k=this.labelTextColors[S],s.fillStyle=k,Mt(_.before,g),C=_.lines,a&&C.length&&(this._drawColorBox(s,t,S,m,n),f=Math.max(h.lineHeight,l)),M=0,I=C.length;M<I;++M)g(C[M]),f=h.lineHeight;Mt(_.after,g)}p=0,f=h.lineHeight,Mt(this.afterBody,g),t.y-=o}drawFooter(t,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=Ln(n.rtl,this.x,this.width);for(t.x=ko(this,n.footerAlign,n),t.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=qt(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:d}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=ln(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+h,l),r==="top"&&this.drawCaret(t,s,n,i),s.lineTo(a+c-f,l),s.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,s,n,i),s.lineTo(a+c,l+d-m),s.quadraticCurveTo(a+c,l+d,a+c-m,l+d),r==="bottom"&&this.drawCaret(t,s,n,i),s.lineTo(a+p,l+d),s.quadraticCurveTo(a,l+d,a,l+d-p),r==="center"&&o==="left"&&this.drawCaret(t,s,n,i),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(t){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=hi[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=eu(this,t),l=Object.assign({},r,this._size),c=su(s,t,l),d=nu(t,l,c,s);(i._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=re(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,i,s),Ff(t,s.textDirection),o.y+=r.top,this.drawTitle(o,t,s),this.drawBody(o,t,s),this.drawFooter(o,t,s),jf(t,s.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,s){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Qo(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(t,o,s,n),a=this._positionChanged(r,t),l=s||!Qo(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,s))),l}_getActiveElements(t,s,n,i){const o=this.options;if(t.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,s){const{caretX:n,caretY:i,options:o}=this,r=hi[o.position].call(this,t,s);return r!==!1&&(n!==r.x||i!==r.y)}}B($a,"positioners",hi);var D2={id:"tooltip",_element:$a,positioners:hi,afterInit(e,t,s){s&&(e.tooltip=new $a({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},I2=Object.freeze({__proto__:null,Colors:Wk,Decimation:Yk,Filler:m2,Legend:v2,SubTitle:S2,Title:k2,Tooltip:D2});const R2=(e,t,s,n)=>(typeof t=="string"?(s=e.push(t)-1,n.unshift({index:s,label:t})):isNaN(t)&&(s=null),s);function L2(e,t,s,n){const i=e.indexOf(t);if(i===-1)return R2(e,t,s,n);const o=e.lastIndexOf(t);return i!==o?s:i}const F2=(e,t)=>e===null?null:Gt(Math.round(e),0,t);function ru(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Ba extends mn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:o}of s)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,s){if(gt(t))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===t?s:L2(n,t,ht(s,t),this._addedLabels),F2(s,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,s=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=t===0&&s===o.length-1?o:o.slice(t,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=s;r++)i.push({value:r});return i}getLabelForValue(t){return ru.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const s=this.ticks;return t<0||t>s.length-1?null:this.getPixelForValue(s[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}B(Ba,"id","category"),B(Ba,"defaults",{ticks:{callback:ru}});function j2(e,t){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:f}=e,p=o||1,m=d-1,{min:g,max:b}=t,_=!gt(r),k=!gt(a),C=!gt(c),S=(b-g)/(h+1);let M=ed((b-g)/m/p)*p,j,I,$,X;if(M<1e-14&&!_&&!k)return[{value:g},{value:b}];X=Math.ceil(b/M)-Math.floor(g/M),X>m&&(M=ed(X*M/m/p)*p),gt(l)||(j=Math.pow(10,l),M=Math.ceil(M*j)/j),i==="ticks"?(I=Math.floor(g/M)*M,$=Math.ceil(b/M)*M):(I=g,$=b),_&&k&&o&&Ev((a-r)/o,M/1e3)?(X=Math.round(Math.min((a-r)/M,d)),M=(a-r)/X,I=r,$=a):C?(I=_?r:I,$=k?a:$,X=c-1,M=($-I)/X):(X=($-I)/M,Ci(X,Math.round(X),M/1e3)?X=Math.round(X):X=Math.ceil(X));const it=Math.max(sd(M),sd(I));j=Math.pow(10,gt(l)?it:l),I=Math.round(I*j)/j,$=Math.round($*j)/j;let rt=0;for(_&&(f&&I!==r?(s.push({value:r}),I<r&&rt++,Ci(Math.round((I+rt*M)*j)/j,r,au(r,S,e))&&rt++):I<r&&rt++);rt<X;++rt){const dt=Math.round((I+rt*M)*j)/j;if(k&&dt>a)break;s.push({value:dt})}return k&&f&&$!==a?s.length&&Ci(s[s.length-1].value,a,au(a,S,e))?s[s.length-1].value=a:s.push({value:a}):(!k||$===a)&&s.push({value:$}),s}function au(e,t,{horizontal:s,minRotation:n}){const i=Ne(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class or extends mn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,s){return gt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(t){const l=es(i),c=es(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(i-l)}this.min=i,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,s=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=j2(i,o);return t.bounds==="ticks"&&xf(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-s)/Math.max(t.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(t){return eo(t,this.chart.options.locale,this.options.ticks.format)}}class Va extends or{determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=$t(t)?t:0,this.max=$t(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),s=t?this.width:this.height,n=Ne(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}B(Va,"id","linear"),B(Va,"defaults",{ticks:{callback:Mr.formatters.numeric}});const qi=e=>Math.floor(Ls(e)),Qs=(e,t)=>Math.pow(10,qi(e)+t);function lu(e){return e/Math.pow(10,qi(e))===1}function cu(e,t,s){const n=Math.pow(10,s),i=Math.floor(e/n);return Math.ceil(t/n)-i}function N2(e,t){const s=t-e;let n=qi(s);for(;cu(e,t,n)>10;)n++;for(;cu(e,t,n)<10;)n--;return Math.min(n,qi(e))}function U2(e,{min:t,max:s}){t=Se(e.min,t);const n=[],i=qi(t);let o=N2(t,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((t-l)*r)/r,d=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-d)/Math.pow(10,o)),f=Se(e.min,Math.round((l+d+h*Math.pow(10,o))*r)/r);for(;f<s;)n.push({value:f,major:lu(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+d+h*Math.pow(10,o))*r)/r;const p=Se(e.max,f);return n.push({value:p,major:lu(p),significand:h}),n}class Ha extends mn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,s){const n=or.prototype.parse.apply(this,[t,s]);if(n===0){this._zero=!0;return}return $t(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:s}=this.getMinMax(!0);this.min=$t(t)?Math.max(0,t):null,this.max=$t(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$t(this._userMin)&&(this.min=t===Qs(this.min,0)?Qs(this.min,-1):Qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const o=a=>n=t?n:a,r=a=>i=s?i:a;n===i&&(n<=0?(o(1),r(10)):(o(Qs(n,-1)),r(Qs(i,1)))),n<=0&&o(Qs(i,-1)),i<=0&&r(Qs(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,s={min:this._userMin,max:this._userMax},n=U2(s,this);return t.bounds==="ticks"&&xf(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":eo(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ls(t),this._valueRange=Ls(this.max)-Ls(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ls(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const s=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+s*this._valueRange)}}B(Ha,"id","logarithmic"),B(Ha,"defaults",{ticks:{callback:Mr.formatters.logarithmic,major:{enabled:!0}}});function za(e){const t=e.ticks;if(t.display&&e.display){const s=re(t.backdropPadding);return ht(t.font&&t.font.size,Ut.font.size)+s.height}return 0}function $2(e,t,s){return s=Lt(s)?s:[s],{w:Kv(e,t.string,s),h:s.length*t.lineHeight}}function du(e,t,s,n,i){return e===n||e===i?{start:t-s/2,end:t+s/2}:e<n||e>i?{start:t-s,end:t}:{start:t,end:t+s}}function B2(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},s=Object.assign({},t),n=[],i=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?jt/o:0;for(let l=0;l<o;l++){const c=r.setContext(e.getPointLabelContext(l));i[l]=c.padding;const d=e.getPointPosition(l,e.drawingArea+i[l],a),h=qt(c.font),f=$2(e.ctx,h,e._pointLabels[l]);n[l]=f;const p=Ce(e.getIndexAngle(l)+a),m=Math.round(Sl(p)),g=du(m,d.x,f.w,0,180),b=du(m,d.y,f.h,90,270);V2(s,t,p,g,b)}e.setCenterPoint(t.l-s.l,s.r-t.r,t.t-s.t,s.b-t.b),e._pointLabelItems=W2(e,n,i)}function V2(e,t,s,n,i){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/r,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function H2(e,t,s){const n=e.drawingArea,{extra:i,additionalAngle:o,padding:r,size:a}=s,l=e.getPointPosition(t,n+i+r,o),c=Math.round(Sl(Ce(l.angle+Vt))),d=G2(l.y,a.h,c),h=q2(c),f=K2(l.x,a.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:f,top:d,right:f+a.w,bottom:d+a.h}}function z2(e,t){if(!t)return!0;const{left:s,top:n,right:i,bottom:o}=e;return!(bs({x:s,y:n},t)||bs({x:s,y:o},t)||bs({x:i,y:n},t)||bs({x:i,y:o},t))}function W2(e,t,s){const n=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:za(o)/2,additionalAngle:r?jt/i:0};let c;for(let d=0;d<i;d++){l.padding=s[d],l.size=t[d];const h=H2(e,d,l);n.push(h),a==="auto"&&(h.visible=z2(h,c),h.visible&&(c=h))}return n}function q2(e){return e===0||e===180?"center":e<180?"left":"right"}function K2(e,t,s){return s==="right"?e-=t:s==="center"&&(e-=t/2),e}function G2(e,t,s){return s===90||s===270?e-=t/2:(s>270||s<90)&&(e-=t),e}function Y2(e,t,s){const{left:n,top:i,right:o,bottom:r}=s,{backdropColor:a}=t;if(!gt(a)){const l=ln(t.borderRadius),c=re(t.backdropPadding);e.fillStyle=a;const d=n-c.left,h=i-c.top,f=o-n+c.width,p=r-i+c.height;Object.values(l).some(m=>m!==0)?(e.beginPath(),zi(e,{x:d,y:h,w:f,h:p,radius:l}),e.fill()):e.fillRect(d,h,f,p)}}function J2(e,t){const{ctx:s,options:{pointLabels:n}}=e;for(let i=t-1;i>=0;i--){const o=e._pointLabelItems[i];if(!o.visible)continue;const r=n.setContext(e.getPointLabelContext(i));Y2(s,r,o);const a=qt(r.font),{x:l,y:c,textAlign:d}=o;hn(s,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:r.color,textAlign:d,textBaseline:"middle"})}}function dp(e,t,s,n){const{ctx:i}=e;if(s)i.arc(e.xCenter,e.yCenter,t,0,Ft);else{let o=e.getPointPosition(0,t);i.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),i.lineTo(o.x,o.y)}}function X2(e,t,s,n,i){const o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!n||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),dp(e,s,r,n),o.closePath(),o.stroke(),o.restore())}function Q2(e,t,s){return Ws(e,{label:s,index:t,type:"pointLabel"})}class fi extends or{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=re(za(this.options)/2),s=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+s/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:t,max:s}=this.getMinMax(!1);this.min=$t(t)&&!isNaN(t)?t:0,this.max=$t(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/za(this.options))}generateTickLabels(t){or.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((s,n)=>{const i=It(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?B2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,s,n,i){this.xCenter+=Math.floor((t-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,s,n,i))}getIndexAngle(t){const s=Ft/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ce(t*s+Ne(n))}getDistanceFromCenterForValue(t){if(gt(t))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*s:(t-this.min)*s}getValueForDistanceFromCenter(t){if(gt(t))return NaN;const s=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(t){const s=this._pointLabels||[];if(t>=0&&t<s.length){const n=s[t];return Q2(this.getContext(),t,n)}}getPointPosition(t,s,n=0){const i=this.getIndexAngle(t)-Vt+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(t,s){return this.getPointPosition(t,this.getDistanceFromCenterForValue(s))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:s,top:n,right:i,bottom:o}=this._pointLabelItems[t];return{left:s,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:s}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),dp(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,s=this.options,{angleLines:n,grid:i,border:o}=s,r=this._pointLabels.length;let a,l,c;if(s.pointLabels.display&&J2(this,r),i.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const f=this.getContext(h),p=i.setContext(f),m=o.setContext(f);X2(this,p,l,r,m)}}),n.display){for(t.save(),a=r-1;a>=0;a--){const d=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=d;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!s.reverse)return;const c=n.setContext(this.getContext(l)),d=qt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=re(c.backdropPadding);t.fillRect(-r/2-h.left,-o-d.size/2-h.top,r+h.width,d.size+h.height)}hn(t,a.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}B(fi,"id","radialLinear"),B(fi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Mr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),B(fi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),B(fi,"descriptors",{angleLines:{_fallback:"grid"}});const Er={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ye=Object.keys(Er);function uu(e,t){return e-t}function hu(e,t){if(gt(t))return null;const s=e._adapter,{parser:n,round:i,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),$t(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(Vn(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function fu(e,t,s,n){const i=ye.length;for(let o=ye.indexOf(e);o<i-1;++o){const r=Er[ye[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-t)/(a*r.size))<=n)return ye[o]}return ye[i-1]}function Z2(e,t,s,n,i){for(let o=ye.length-1;o>=ye.indexOf(s);o--){const r=ye[o];if(Er[r].common&&e._adapter.diff(i,n,r)>=t-1)return r}return ye[s?ye.indexOf(s):0]}function tS(e){for(let t=ye.indexOf(e)+1,s=ye.length;t<s;++t)if(Er[ye[t]].common)return ye[t]}function pu(e,t,s){if(!s)e[t]=!0;else if(s.length){const{lo:n,hi:i}=Cl(s,t),o=s[n]>=t?s[n]:s[i];e[o]=!0}}function eS(e,t,s,n){const i=e._adapter,o=+i.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(t[l].major=!0);return t}function mu(e,t,s){const n=[],i={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:eS(e,n,i,s)}class Ki extends mn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,s={}){const n=t.time||(t.time={}),i=this._adapter=new d1._date(t.adapters.date);i.init(s),Si(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=s.normalized}parse(t,s){return t===void 0?null:hu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,s=this._adapter,n=t.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=$t(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=$t(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(s=t[0],n=t[t.length-1]),{min:s,max:n}}buildTicks(){const t=this.options,s=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=Rv(i,o,r);return this._unit=s.unit||(n.autoSkip?fu(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):Z2(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:tS(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),mu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s=0,n=0,i,o;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?s=1-i:s=(this.getDecimalForValue(t[1])-i)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;s=Gt(s,0,r),n=Gt(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||fu(o.minUnit,s,n,this._getLabelCapacity(s)),a=ht(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Vn(l)||l===!0,d={};let h=s,f,p;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":r),t.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+t.add(f,a,r),p++)pu(d,f,m);return(f===n||i.bounds==="ticks"||p===1)&&pu(d,f,m),Object.keys(d).sort(uu).map(g=>+g)}getLabelForValue(t){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(t,n.tooltipFormat):s.format(t,n.displayFormats.datetime)}format(t,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(t,r)}_tickFormatFunction(t,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return It(r,[t,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],h=c&&a[c],f=n[s],p=c&&h&&f&&f.major;return this._adapter.format(t,i||(p?h:d))}generateTickLabels(t){let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s],i.label=this._tickFormatFunction(i.value,s,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const s=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const s=this.options.ticks,n=this.ctx.measureText(t).width,i=Ne(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(t,0,mu(this,[t],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],s,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)t=t.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let s,n;if(t.length)return t;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)t.push(hu(this,i[s]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return wf(t.sort(uu))}}B(Ki,"id","time"),B(Ki,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function So(e,t,s){let n=0,i=e.length-1,o,r,a,l;s?(t>=e[n].pos&&t<=e[i].pos&&({lo:n,hi:i}=gs(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[i]):(t>=e[n].time&&t<=e[i].time&&({lo:n,hi:i}=gs(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[i]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class Wa extends Ki{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(t);this._minPos=So(s,this.min),this._tableRange=So(s,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,d;for(r=0,a=t.length;r<a;++r)c=t[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)d=i[r+1],l=i[r-1],c=i[r],Math.round((d+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?t=this.normalize(s.concat(n)):t=s.length?s:n,t=this._cache.all=t,t}getDecimalForValue(t){return(So(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const s=this._offsets,n=this.getDecimalForPixel(t)/s.factor-s.end;return So(this._table,n*this._tableRange+this._minPos,!0)}}B(Wa,"id","timeseries"),B(Wa,"defaults",Ki.defaults);var sS=Object.freeze({__proto__:null,CategoryScale:Ba,LinearScale:Va,LogarithmicScale:Ha,RadialLinearScale:fi,TimeScale:Ki,TimeSeriesScale:Wa});const nS=[c1,Nk,I2,sS];ts.register(...nS);async function up(){return await(await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")).json()}async function hp(e){return e?await(await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${e}/municipios?orderBy=nome`)).json():[]}const iS={name:"Dashboard",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs,WeekView:hf,AppointmentDetails:ff},data(){return{userId:null,stats:{week:0,month:0,clients:0,newClients:0},upcomingAppointments:[],clients:[],services:[],rooms:[],topClients:[],sidebarOpen:window.innerWidth>=768,showClientModal:!1,showAppointmentModal:!1,editingId:null,showDetailsModal:!1,weekChart:null,weekCounts:[0,0,0,0,0,0,0],states:[],cities:[],clientForm:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},appointmentForm:{date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},selectedAppointment:null}},methods:{phoneMask:Cr,cpfMask:lf,cepMask:cf,async fetchStatesList(){this.states=await up()},async fetchCitiesList(){this.cities=await hp(this.clientForm.stateId)},async openClientModal(){await this.fetchStatesList(),this.clientForm.stateId&&await this.fetchCitiesList(),this.showClientModal=!0},async fetchStats(){const e=new Date,t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-t),s.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()+(6-t)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],r=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);a.setHours(23,59,59,999);const l=r.toISOString().split("T")[0],c=a.toISOString().split("T")[0],{data:d}=await F.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o);this.stats.week=d?d.length:0;const h=[0,0,0,0,0,0,0];d&&d.forEach(m=>{const g=new Date(m.date);h[g.getDay()]++}),this.weekCounts=h;const{data:f}=await F.from("appointments").select().eq("user_id",this.userId).gte("date",l).lte("date",c);this.stats.month=f?f.length:0;const{data:p}=await F.from("clients").select().eq("user_id",this.userId);p&&(this.stats.clients=p.length,this.clients=p,this.stats.newClients=p.filter(m=>{const g=new Date(m.created_at);return g>=r&&g<=a}).length),await this.fetchTopClients(),this.$nextTick(()=>this.renderWeekChart())},async fetchUpcomingAppointments(){const e=new Date,t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-t),s.setHours(0,0,0,0);const n=new Date(e);n.setDate(e.getDate()+(6-t)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],{data:r}=await F.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o).order("date",{ascending:!0}).order("time",{ascending:!0});this.upcomingAppointments=r||[]},async fetchTopClients(){const{data:e}=await F.from("appointments").select("client_id").eq("user_id",this.userId),t={};e&&e.forEach(n=>{t[n.client_id]=(t[n.client_id]||0)+1});const s=Object.entries(t).sort((n,i)=>i[1]-n[1]).slice(0,5);this.topClients=s.map(([n,i])=>({id:n,count:i,name:this.getClientName(n)}))},renderWeekChart(){const e=this.$refs.weekChartCanvas.getContext("2d");this.weekChart&&this.weekChart.destroy(),this.weekChart=new ts(e,{type:"bar",data:{labels:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],datasets:[{label:"Agendamentos",data:this.weekCounts,backgroundColor:"#6366f1",borderColor:"#4f46e5",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#e5e7eb"}}}}})},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},getServiceName(e){const t=this.services.find(s=>s.id===e);return t?t.name:""},getRoomName(e){const t=this.rooms.find(s=>s.id===e);return t?t.name:""},getRoomLink(e){const t=this.rooms.find(s=>s.id===e);return t?t.google_meet_link:""},openDetails(e){this.selectedAppointment=e,this.showDetailsModal=!0},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},async handleDeleteAppointment(e,t="Tem certeza que deseja excluir este agendamento?"){if(!confirm(t))return;const{error:n}=await F.from("appointments").delete().eq("id",e);n?alert("Erro ao excluir agendamento: "+n.message):(this.upcomingAppointments=this.upcomingAppointments.filter(i=>i.id!==e),this.selectedAppointment&&this.selectedAppointment.id===e&&this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments())},async handleAddClient(){if(this.clientForm.email&&!ns(this.clientForm.email)){alert("E-mail inválido");return}const{data:e,error:t}=await F.from("clients").insert({name:this.clientForm.name,email:this.clientForm.email,phone:this.clientForm.phone,birthdate:this.clientForm.birthdate,cpf:this.clientForm.cpf,cep:this.clientForm.cep,street:this.clientForm.street,number:this.clientForm.number,complement:this.clientForm.complement,neighborhood:this.clientForm.neighborhood,state_id:this.clientForm.stateId,city_id:this.clientForm.cityId,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar cliente: "+t.message);else{this.clients.push(e),this.clientForm={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.stats.clients+=1;const s=new Date(e.created_at),n=new Date(s.getFullYear(),s.getMonth(),1),i=new Date(s.getFullYear(),s.getMonth()+1,0);i.setHours(23,59,59,999),s>=n&&s<=i&&(this.stats.newClients+=1),await this.fetchTopClients(),alert("Cliente cadastrado!")}},openAppointmentModal(e){e?(this.editingId=e.id,this.appointmentForm={date:e.date,time:e.time,clientId:e.client_id,serviceId:e.service_id,duration:e.duration,description:e.description}):(this.editingId=null,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""}),this.showAppointmentModal=!0},closeAppointmentModal(){this.showAppointmentModal=!1,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openAppointmentModal(this.selectedAppointment),this.closeDetails())},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){this.selectedAppointment&&(await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails())},markNoShow(){alert("Falta registrada para este atendimento.")},sendConfirmationWhatsApp(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(r=>r.id===e.client_id);if(!(t!=null&&t.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===e.room_id),n=`Olá ${t.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${t.name}
Data: ${be(e.date)} - Hora: ${an(e.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Xo(t.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},async handleAddAppointment(){if(this.editingId){const{data:e,error:t}=await F.from("appointments").update({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description}).eq("id",this.editingId).select().single();if(t)alert("Erro ao atualizar agendamento: "+t.message);else{const s=this.upcomingAppointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.upcomingAppointments[s]=e),this.closeAppointmentModal(),await this.fetchStats(),await this.fetchUpcomingAppointments()}}else{const{data:e,error:t}=await F.from("appointments").insert({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar agendamento: "+t.message);else{this.upcomingAppointments.push(e),this.closeAppointmentModal(),this.stats.week+=1,this.stats.month+=1;const s=new Date(e.date);this.weekCounts[s.getDay()]++,await this.fetchTopClients(),this.renderWeekChart()}}}},watch:{"appointmentForm.serviceId"(e){const t=this.services.find(s=>s.id===e);t&&this.appointmentForm.duration===""&&(this.appointmentForm.duration=t.duration)},"clientForm.stateId"(){this.fetchCitiesList()}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchStats(),await this.fetchUpcomingAppointments();const{data:t}=await F.from("services").select().eq("user_id",this.userId);t&&(this.services=t);const{data:s}=await F.from("rooms").select().eq("user_id",this.userId);s&&(this.rooms=s),await this.fetchStatesList()}},oS={class:"min-h-screen flex bg-gray-50 relative"},rS={class:"flex-1 p-4 md:p-8 space-y-8"},aS={key:0,class:"flex items-center mb-4"},lS={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},cS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},dS={class:"text-2xl font-bold"},uS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},hS={class:"text-2xl font-bold"},fS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},pS={class:"text-2xl font-bold"},mS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},gS={class:"text-2xl font-bold"},bS={class:"bg-white p-6 rounded-lg shadow-lg h-64"},yS={ref:"weekChartCanvas",class:"w-full h-full"},xS={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},_S={class:"md:col-span-8"},vS={class:"flex items-center justify-between mb-4"},wS={class:"md:col-span-4 space-y-4"},kS={class:"bg-white p-4 rounded-lg shadow"},SS={class:"overflow-x-auto"},CS={class:"min-w-full text-left"},MS={class:"px-4 py-2"},AS={class:"px-4 py-2 text-right"},PS={key:0},TS=["value"],ES=["value"],OS={class:"flex justify-end space-x-2"},DS={class:"text-lg font-semibold mb-4"},IS=["value"],RS=["value"],LS={class:"flex justify-end space-x-2"},FS={class:"mt-4"},jS={class:"flex flex-wrap justify-center gap-2"},NS={class:"mt-4"},US={class:"flex flex-wrap justify-center gap-2"};function $S(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("WeekView"),c=z("Modal"),d=z("AppointmentDetails");return v(),w("div",oS,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=h=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",rS,[i.sidebarOpen?V("",!0):(v(),w("div",aS,[u("button",{onClick:t[1]||(t[1]=h=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[37]||(t[37]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Dashboard"}),u("section",lS,[u("div",cS,[t[38]||(t[38]=u("p",{class:"text-sm text-gray-500"},"Agendamentos na semana",-1)),u("p",dS,P(i.stats.week),1)]),u("div",uS,[t[39]||(t[39]=u("p",{class:"text-sm text-gray-500"},"Agendamentos no mês",-1)),u("p",hS,P(i.stats.month),1)]),u("div",fS,[t[40]||(t[40]=u("p",{class:"text-sm text-gray-500"},"Clientes cadastrados",-1)),u("p",pS,P(i.stats.clients),1)]),u("div",mS,[t[41]||(t[41]=u("p",{class:"text-sm text-gray-500"},"Novos clientes no mês",-1)),u("p",gS,P(i.stats.newClients),1)])]),u("section",bS,[t[42]||(t[42]=u("h3",{class:"text-lg font-medium mb-4"},"Agendamentos na semana",-1)),u("canvas",yS,null,512)]),u("section",xS,[u("div",_S,[u("div",vS,[t[43]||(t[43]=u("h3",{class:"text-lg font-medium"},"Agenda da Semana",-1)),u("button",{onClick:t[2]||(t[2]=h=>o.openAppointmentModal()),class:"btn"},"Novo Agendamento")]),O(l,{appointments:i.upcomingAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])]),u("div",wS,[u("button",{onClick:t[3]||(t[3]=(...h)=>o.openClientModal&&o.openClientModal(...h)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},"Novo Cliente"),u("div",kS,[t[46]||(t[46]=u("h4",{class:"font-medium mb-2"},"Clientes com mais agendamentos",-1)),u("div",SS,[u("table",CS,[t[45]||(t[45]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),u("th",{class:"px-4 py-2 font-medium text-gray-700 text-right"},"Agendamentos")])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(i.topClients,h=>(v(),w("tr",{key:h.id,class:"border-b last:border-b-0"},[u("td",MS,P(h.name),1),u("td",AS,P(h.count),1)]))),128)),i.topClients.length===0?(v(),w("tr",PS,t[44]||(t[44]=[u("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):V("",!0)])])])])])]),i.showClientModal?(v(),ue(c,{key:1,onClose:t[21]||(t[21]=h=>i.showClientModal=!1)},{default:tt(()=>[t[62]||(t[62]=u("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Cliente",-1)),u("form",{onSubmit:t[20]||(t[20]=Qt((...h)=>o.handleAddClient&&o.handleAddClient(...h),["prevent"])),class:"space-y-4"},[u("div",null,[t[47]||(t[47]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=h=>i.clientForm.name=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.name]])]),u("div",null,[t[48]||(t[48]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=h=>i.clientForm.cpf=h),onInput:t[6]||(t[6]=h=>i.clientForm.cpf=o.cpfMask(i.clientForm.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.cpf]])]),u("div",null,[t[49]||(t[49]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=h=>i.clientForm.birthdate=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.birthdate]])]),u("div",null,[t[50]||(t[50]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[8]||(t[8]=h=>i.clientForm.email=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.email]])]),u("div",null,[t[51]||(t[51]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=h=>i.clientForm.phone=h),onInput:t[10]||(t[10]=h=>i.clientForm.phone=o.phoneMask(i.clientForm.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.phone]])]),u("div",null,[t[52]||(t[52]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=h=>i.clientForm.cep=h),onInput:t[12]||(t[12]=h=>i.clientForm.cep=o.cepMask(i.clientForm.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.clientForm.cep]])]),u("div",null,[t[53]||(t[53]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=h=>i.clientForm.street=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.street]])]),u("div",null,[t[54]||(t[54]=u("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=h=>i.clientForm.number=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.number]])]),u("div",null,[t[55]||(t[55]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=h=>i.clientForm.complement=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.complement]])]),u("div",null,[t[56]||(t[56]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=h=>i.clientForm.neighborhood=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.clientForm.neighborhood]])]),u("div",null,[t[58]||(t[58]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),T(u("select",{"onUpdate:modelValue":t[17]||(t[17]=h=>i.clientForm.stateId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[57]||(t[57]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.states,h=>(v(),w("option",{key:h.id,value:h.id},P(h.nome)+" ("+P(h.sigla)+")",9,TS))),128))],512),[[Ae,i.clientForm.stateId]])]),u("div",null,[t[60]||(t[60]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),T(u("select",{"onUpdate:modelValue":t[18]||(t[18]=h=>i.clientForm.cityId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[59]||(t[59]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.cities,h=>(v(),w("option",{key:h.id,value:h.id},P(h.nome),9,ES))),128))],512),[[Ae,i.clientForm.cityId]])]),u("div",OS,[u("button",{type:"button",onClick:t[19]||(t[19]=h=>i.showClientModal=!1),class:"px-4 py-2 rounded border"},"Cancelar"),t[61]||(t[61]=u("button",{type:"submit",class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700"},"Salvar",-1))])],32)]),_:1,__:[62]})):V("",!0),i.showAppointmentModal?(v(),ue(c,{key:2,onClose:o.closeAppointmentModal},{default:tt(()=>[u("h3",DS,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),u("form",{onSubmit:t[29]||(t[29]=Qt((...h)=>o.handleAddAppointment&&o.handleAddAppointment(...h),["prevent"])),class:"space-y-4"},[u("div",null,[t[63]||(t[63]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[22]||(t[22]=h=>i.appointmentForm.date=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.date]])]),u("div",null,[t[64]||(t[64]=u("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),T(u("input",{type:"time",step:"60","onUpdate:modelValue":t[23]||(t[23]=h=>i.appointmentForm.time=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.time]])]),u("div",null,[t[66]||(t[66]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),T(u("select",{"onUpdate:modelValue":t[24]||(t[24]=h=>i.appointmentForm.clientId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[65]||(t[65]=u("option",{disabled:"",value:""},"Selecione um cliente",-1)),(v(!0),w(Y,null,ft(i.clients,h=>(v(),w("option",{key:h.id,value:h.id},P(h.name),9,IS))),128))],512),[[Ae,i.appointmentForm.clientId]])]),u("div",null,[t[68]||(t[68]=u("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),T(u("select",{"onUpdate:modelValue":t[25]||(t[25]=h=>i.appointmentForm.serviceId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[67]||(t[67]=u("option",{disabled:"",value:""},"Selecione um serviço",-1)),(v(!0),w(Y,null,ft(i.services,h=>(v(),w("option",{key:h.id,value:h.id},P(h.name),9,RS))),128))],512),[[Ae,i.appointmentForm.serviceId]])]),u("div",null,[t[69]||(t[69]=u("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=h=>i.appointmentForm.duration=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.duration]])]),u("div",null,[t[70]||(t[70]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),T(u("textarea",{"onUpdate:modelValue":t[27]||(t[27]=h=>i.appointmentForm.description=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.appointmentForm.description]])]),u("div",LS,[u("button",{type:"button",onClick:t[28]||(t[28]=(...h)=>o.closeAppointmentModal&&o.closeAppointmentModal(...h)),class:"px-4 py-2 rounded border"},"Cancelar"),t[71]||(t[71]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):V("",!0),i.showDetailsModal?(v(),ue(c,{key:3,onClose:o.closeDetails},{default:tt(()=>[O(d,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:tt(()=>[u("div",FS,[t[72]||(t[72]=u("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),u("div",jS,[u("button",{onClick:t[30]||(t[30]=(...h)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...h)),class:"btn btn-success"},"Enviar confirmação"),u("button",{onClick:t[31]||(t[31]=(...h)=>o.cancelAppointment&&o.cancelAppointment(...h)),class:"btn btn-warning"},"Desmarcou"),u("button",{onClick:t[32]||(t[32]=(...h)=>o.markNoShow&&o.markNoShow(...h)),class:"btn btn-secondary"},"Faltou"),u("button",{onClick:t[33]||(t[33]=(...h)=>o.startAppointment&&o.startAppointment(...h)),class:"btn btn-primary"},"Iniciar atendimento")])]),u("div",NS,[t[73]||(t[73]=u("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),u("div",US,[u("button",{onClick:t[34]||(t[34]=(...h)=>o.editFromDetails&&o.editFromDetails(...h)),class:"btn"},"Editar"),u("button",{onClick:t[35]||(t[35]=h=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir"),u("button",{onClick:t[36]||(t[36]=(...h)=>o.closeDetails&&o.closeDetails(...h)),class:"px-4 py-2 rounded border"},"Fechar")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):V("",!0)])])}const BS=mt(iS,[["render",$S]]),VS={name:"Configuracao",components:{Sidebar:Pe,HeaderUser:Te},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,slug:"",activeTab:"perfil",form:{businessName:"",description:"",areaAtuacao:"",phone:"",whatsapp:"",email:"",address:"",instagram:"",facebook:"",youtube:"",x:"",imageUrl:"",pixKey:""},agenda:{cancelLimitHours:0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:Cr,updateSlug(){this.slug=this.form.businessName.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},async handleSave(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}const e={id:this.userId,business_name:this.form.businessName,slug:this.slug,description:this.form.description,area_atuacao:this.form.areaAtuacao,phone:this.form.phone,whatsapp:this.form.whatsapp,email:this.form.email,address:this.form.address,instagram:this.form.instagram,facebook:this.form.facebook,youtube:this.form.youtube,x:this.form.x,image_url:this.form.imageUrl,pix_key:this.form.pixKey},{error:t}=await F.from("profiles").upsert(e,{onConflict:["id"]});alert(t?"Erro ao salvar dados: "+t.message:"Dados salvos com sucesso!")},async handleImageUpload(e){const t=e.target.files[0];if(!t)return;const s=t.name.split(".").pop(),n=`${this.userId}.${s}`,{error:i}=await F.storage.from("profile-images").upload(n,t,{upsert:!0});if(i){alert("Erro ao enviar imagem: "+i.message);return}const{data:{publicUrl:o}}=F.storage.from("profile-images").getPublicUrl(n);this.form.imageUrl=o},async handleSaveAgenda(){const e={start:null,end:null,days:[]};for(const[n,i]of Object.entries(this.agenda.dailySchedule))i.enabled&&i.start&&i.end&&(e.days.push(n),(!e.start||i.start<e.start)&&(e.start=i.start),(!e.end||i.end>e.end)&&(e.end=i.end));const t={id:this.userId,start_time:e.start,end_time:e.end,week_days:e.days.join(","),daily_schedule:this.agenda.dailySchedule,cancel_limit_hours:this.agenda.cancelLimitHours},{error:s}=await F.from("profiles").upsert(t,{onConflict:["id"]});alert(s?"Erro ao salvar dados: "+s.message:"Dados salvos com sucesso!")}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t,error:s}=await F.from("profiles").select().eq("id",this.userId).single();if(t){if(this.form={businessName:t.business_name||"",description:t.description||"",areaAtuacao:t.area_atuacao||"",phone:t.phone||"",whatsapp:t.whatsapp||"",email:t.email||"",address:t.address||"",instagram:t.instagram||"",facebook:t.facebook||"",youtube:t.youtube||"",x:t.x||"",imageUrl:t.image_url||"",pixKey:t.pix_key||""},this.agenda={cancelLimitHours:t.cancel_limit_hours||0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},t.daily_schedule)Object.assign(this.agenda.dailySchedule,typeof t.daily_schedule=="string"?JSON.parse(t.daily_schedule):t.daily_schedule);else{const n=t.week_days?t.week_days.split(","):[];for(const i of n)this.agenda.dailySchedule[i]={enabled:!0,start:t.start_time||"",end:t.end_time||""}}this.updateSlug()}}},HS={class:"min-h-screen flex bg-gray-100 relative"},zS={class:"flex-1 p-8"},WS={key:0,class:"flex items-center mb-4"},qS={class:"mb-6 space-x-2"},KS={class:"text-sm text-gray-500 mt-1"},GS={class:"font-mono"},YS=["href"],JS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},XS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},QS={key:0,class:"mt-2"},ZS=["src"],tC={class:"mt-1 space-y-2"},eC=["onUpdate:modelValue"],sC={class:"w-20"},nC=["onUpdate:modelValue"],iC=["onUpdate:modelValue"];function oC(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("router-link");return v(),w("div",HS,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",zS,[i.sidebarOpen?V("",!0):(v(),w("div",WS,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[25]||(t[25]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Configurações"}),O(l,{to:"/onboarding",class:"text-blue-600 underline mb-4 inline-block"},{default:tt(()=>t[26]||(t[26]=[st("Refazer Onboarding")])),_:1,__:[26]}),u("nav",qS,[u("button",{onClick:t[2]||(t[2]=c=>i.activeTab="perfil"),class:ie([i.activeTab==="perfil"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Perfil",2),u("button",{onClick:t[3]||(t[3]=c=>i.activeTab="agenda"),class:ie([i.activeTab==="agenda"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2"])},"Agenda",2),u("button",{onClick:t[4]||(t[4]=c=>i.activeTab="financeiro"),class:ie([i.activeTab==="financeiro"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Financeiro",2)]),i.activeTab==="perfil"?(v(),w("form",{key:1,onSubmit:t[20]||(t[20]=Qt((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[t[28]||(t[28]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=c=>i.form.businessName=c),onInput:t[6]||(t[6]=(...c)=>o.updateSlug&&o.updateSlug(...c)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.businessName]]),u("p",KS,[t[27]||(t[27]=st(" Seu link público: ")),u("span",GS,"#/"+P(i.slug),1),u("a",{href:"#/"+i.slug,target:"_blank",class:"text-blue-600 hover:underline ml-2"},"Abrir página do cliente",8,YS)])]),u("div",null,[t[29]||(t[29]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrição do Estabelecimento",-1)),T(u("textarea",{"onUpdate:modelValue":t[7]||(t[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.description]])]),u("div",null,[t[31]||(t[31]=u("label",{class:"block text-sm font-medium text-gray-700"},"Área de Atuação",-1)),T(u("select",{"onUpdate:modelValue":t[8]||(t[8]=c=>i.form.areaAtuacao=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},t[30]||(t[30]=[dn('<option disabled value="">Selecione</option><option>Psicologia</option><option>Terapias Gerais</option><option>Psicopedagogia</option><option>Medicina</option><option>Coaching</option><option>Fonoaudiologia</option><option>Fisioterapia</option><option>Nutrição</option><option>Terapia Ocupacional</option>',10)]),512),[[Ae,i.form.areaAtuacao]])]),u("div",JS,[u("div",null,[t[32]||(t[32]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone de Contato",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=c=>i.form.phone=c),onInput:t[10]||(t[10]=c=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.phone]])]),u("div",null,[t[33]||(t[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"WhatsApp",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=c=>i.form.whatsapp=c),onInput:t[12]||(t[12]=c=>i.form.whatsapp=o.phoneMask(i.form.whatsapp)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[L,i.form.whatsapp]])]),u("div",null,[t[34]||(t[34]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[13]||(t[13]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])]),u("div",null,[t[35]||(t[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=c=>i.form.address=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.address]])])]),u("div",XS,[u("div",null,[t[36]||(t[36]=u("label",{class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=c=>i.form.instagram=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.instagram]])]),u("div",null,[t[37]||(t[37]=u("label",{class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=c=>i.form.facebook=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.facebook]])]),u("div",null,[t[38]||(t[38]=u("label",{class:"block text-sm font-medium text-gray-700"},"YouTube",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=c=>i.form.youtube=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.youtube]])]),u("div",null,[t[39]||(t[39]=u("label",{class:"block text-sm font-medium text-gray-700"},"X (Twitter)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=c=>i.form.x=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.x]])])]),u("div",null,[t[40]||(t[40]=u("label",{class:"block text-sm font-medium text-gray-700"},"Imagem do Estabelecimento",-1)),u("input",{type:"file",accept:"image/*",onChange:t[19]||(t[19]=(...c)=>o.handleImageUpload&&o.handleImageUpload(...c)),class:"mt-1"},null,32),i.form.imageUrl?(v(),w("div",QS,[u("img",{src:i.form.imageUrl,alt:"Imagem do estabelecimento",class:"h-24 rounded-md"},null,8,ZS)])):V("",!0)]),t[41]||(t[41]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):V("",!0),i.activeTab==="agenda"?(v(),w("form",{key:2,onSubmit:t[22]||(t[22]=Qt((...c)=>o.handleSaveAgenda&&o.handleSaveAgenda(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[t[43]||(t[43]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),u("div",tC,[(v(!0),w(Y,null,ft(i.daysOfWeekOptions,c=>(v(),w("div",{key:c.value,class:"flex items-center space-x-2"},[T(u("input",{type:"checkbox","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].enabled=d},null,8,eC),[[hl,i.agenda.dailySchedule[c.value].enabled]]),u("span",sC,P(c.label),1),T(u("input",{type:"time",step:"60","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].start=d,class:"border rounded-md px-2 py-1"},null,8,nC),[[L,i.agenda.dailySchedule[c.value].start]]),t[42]||(t[42]=u("span",null,"-",-1)),T(u("input",{type:"time",step:"60","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].end=d,class:"border rounded-md px-2 py-1"},null,8,iC),[[L,i.agenda.dailySchedule[c.value].end]])]))),128))])]),u("div",null,[t[44]||(t[44]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horas para cancelamento sem custo",-1)),T(u("input",{type:"number",min:"0","onUpdate:modelValue":t[21]||(t[21]=c=>i.agenda.cancelLimitHours=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.agenda.cancelLimitHours,void 0,{number:!0}]])]),t[45]||(t[45]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):V("",!0),i.activeTab==="financeiro"?(v(),w("form",{key:3,onSubmit:t[24]||(t[24]=Qt((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[t[46]||(t[46]=u("label",{class:"block text-sm font-medium text-gray-700"},"Chave Pix",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=c=>i.form.pixKey=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.pixKey]])]),t[47]||(t[47]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):V("",!0)])])}const rC=mt(VS,[["render",oC]]);async function qa(e,t=!0){const{error:s}=await F.functions.invoke("send-appointment-email",{body:e});s?console.error("Erro ao enviar email de agendamento:",s.message):t&&alert("E-mail enviado com sucesso!")}const aC={name:"Clientes",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{userId:null,showModal:!1,modalMode:"new",editingId:null,search:"",form:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},states:[],cities:[],clients:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10,activeTab:"cadastro",originalForm:{},clientAppointments:[],history:[],services:[],rooms:[]}},methods:{phoneMask:Cr,digitsOnly:Xo,cpfMask:lf,cepMask:cf,formatDateBR:be,async fetchServicesList(){const{data:e}=await F.from("services").select().eq("user_id",this.userId);e&&(this.services=e)},async fetchRoomsList(){const{data:e}=await F.from("rooms").select().eq("user_id",this.userId);e&&(this.rooms=e)},async fetchStatesList(){this.states=await up()},async fetchCitiesList(){this.cities=await hp(this.form.stateId)},async openModal(e,t="new"){this.modalMode=t,this.activeTab="cadastro",e?(this.editingId=e.id,this.form={name:e.name,email:e.email,phone:e.phone,birthdate:e.birthdate,cpf:e.cpf,cep:e.cep,street:e.street,number:e.number,complement:e.complement,neighborhood:e.neighborhood,stateId:e.state_id,cityId:e.city_id},this.originalForm={...this.form},await this.fetchClientAppointments(),await this.fetchClientHistory()):(this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.originalForm={...this.form},this.clientAppointments=[],this.history=[]),await this.fetchStatesList(),this.form.stateId&&await this.fetchCitiesList(),await this.fetchServicesList(),await this.fetchRoomsList(),this.showModal=!0},closeModal(){this.showModal=!1,this.modalMode="new",this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.activeTab="cadastro",this.clientAppointments=[],this.history=[]},handleClose(){this.modalMode==="view"?this.closeModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeModal()},whatsappLink(e){return`https://wa.me/${Xo(e)}`},async handleSaveClient(){if(this.form.email&&!ns(this.form.email)){alert("E-mail inválido");return}let e,t;if(this.editingId?({data:e,error:t}=await F.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId}).eq("id",this.editingId).select().single(),this.originalForm={...e}):({data:e,error:t}=await F.from("clients").insert({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,user_id:this.userId}).select().single(),this.originalForm={...e}),t)alert("Erro ao salvar cliente: "+t.message);else{if(this.editingId){const s=this.clients.findIndex(n=>n.id===this.editingId);s!==-1&&(this.clients[s]=e)}else this.clients.push(e);this.closeModal()}},async handleDeleteClient(e){if(!confirm("Tem certeza que deseja excluir este cliente?"))return;const{error:s}=await F.from("clients").delete().eq("id",e);s?alert("Erro ao excluir cliente: "+s.message):this.clients=this.clients.filter(n=>n.id!==e)},enableEdit(){this.modalMode="edit"},changeTab(e){if(e!=="cadastro"&&this.modalMode!=="view"){if(!confirm("Dados não salvos serão perdidos. Deseja continuar?"))return;this.modalMode="view",this.form={...this.originalForm}}this.activeTab=e},async fetchClientAppointments(){if(!this.editingId){this.clientAppointments=[];return}const{data:e}=await F.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.editingId).order("date",{ascending:!0}).order("time",{ascending:!0});this.clientAppointments=e||[]},async fetchClientHistory(){if(!this.editingId){this.history=[];return}if(!this.clientAppointments.length){this.history=[];return}const e=this.clientAppointments.map(s=>s.id),{data:t}=await F.from("appointment_notes").select().in("appointment_id",e).order("created_at",{ascending:!1});this.history=(t||[]).map(s=>({...s,attachments:s.attachments||[],appointment:this.clientAppointments.find(n=>n.id===s.appointment_id)||{}}))},getServiceName(e){const t=this.services.find(s=>s.id===e);return t?t.name:""},async sendConfirmationEmail(e){const t=this.clients.find(i=>i.id===e.client_id),s=this.services.find(i=>i.id===e.service_id),n=this.rooms.find(i=>i.id===e.room_id);await qa({to:t==null?void 0:t.email,subject:"Agendamento de Consulta realizado",text:`Olá ${t==null?void 0:t.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${be(e.date)} às ${an(e.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${e.description?`Observações: ${e.description}
`:""}
E-mail enviado automaticamente.`})},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{isReadOnly(){return this.modalMode==="view"},filteredClients(){const e=this.search.toLowerCase();return this.clients.filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e))},paginatedClients(){const e=(this.page-1)*this.pageSize;return this.filteredClients.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredClients.length/this.pageSize))}},watch:{search(){this.page=1},"form.stateId"(){this.fetchCitiesList()}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t),await this.fetchStatesList(),await this.fetchServicesList(),await this.fetchRoomsList()}},lC={class:"min-h-screen flex bg-gray-100 relative"},cC={class:"flex-1 p-4 md:p-8 space-y-6"},dC={key:0,class:"flex items-center mb-4"},uC={class:"bg-white p-4 rounded-lg shadow"},hC={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},fC={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},pC={class:"overflow-x-auto"},mC={class:"min-w-full text-left"},gC={class:"px-4 py-2"},bC={class:"px-4 py-2"},yC={class:"px-4 py-2"},xC={class:"px-4 py-2 text-right space-x-2"},_C=["href"],vC=["onClick"],wC=["onClick"],kC={key:0},SC={class:"mt-4 flex justify-between items-center"},CC=["disabled"],MC={class:"text-sm"},AC=["disabled"],PC={class:"text-lg font-semibold mb-4"},TC={key:0,class:"border-b mb-4"},EC={class:"flex space-x-4"},OC=["disabled"],DC=["disabled"],IC=["disabled"],RC=["disabled"],LC=["disabled"],FC=["disabled"],jC=["disabled"],NC=["disabled"],UC=["disabled"],$C=["disabled"],BC=["disabled"],VC=["value"],HC=["disabled"],zC=["value"],WC={class:"flex justify-end space-x-2 md:col-span-2"},qC=["disabled"],KC={class:"min-w-full text-left"},GC={class:"px-4 py-2"},YC={class:"px-4 py-2"},JC={class:"px-4 py-2 text-right space-x-2"},XC=["onClick"],QC={key:0},ZC={class:"space-y-4"},tM={class:"text-sm text-gray-600 mb-1"},eM={class:"mb-2 whitespace-pre-line"},sM={key:0,class:"space-x-2 mb-2"},nM=["href"],iM={class:"text-right"},oM={key:0,class:"text-center text-gray-500"};function rM(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("router-link"),c=z("Modal");return v(),w("div",lC,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=d=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",cC,[i.sidebarOpen?V("",!0):(v(),w("div",dC,[u("button",{onClick:t[1]||(t[1]=d=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[27]||(t[27]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Clientes"}),u("section",uC,[u("div",hC,[t[28]||(t[28]=u("h3",{class:"text-lg font-medium"},"Clientes cadastrados",-1)),u("div",fC,[T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>i.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[L,i.search]]),u("button",{onClick:t[3]||(t[3]=(...d)=>o.openModal&&o.openModal(...d)),class:"btn w-full sm:w-auto"}," Novo Cliente ")])]),u("div",pC,[u("table",mC,[t[30]||(t[30]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Telefone"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(o.paginatedClients,d=>(v(),w("tr",{key:d.id,class:"border-b last:border-b-0"},[u("td",gC,P(d.name),1),u("td",bC,P(d.email),1),u("td",yC,P(o.phoneMask(d.phone)),1),u("td",xC,[u("a",{href:o.whatsappLink(d.phone),target:"_blank",rel:"noopener",class:"btn btn-sm btn-success"}," WhatsApp ",8,_C),u("button",{onClick:h=>o.openModal(d,"view"),class:"btn btn-sm"}," Visualizar ",8,vC),u("button",{onClick:h=>o.handleDeleteClient(d.id),class:"btn btn-sm btn-danger"}," Excluir ",8,wC)])]))),128)),o.filteredClients.length===0?(v(),w("tr",kC,t[29]||(t[29]=[u("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"}," Nenhum cliente encontrado ",-1)]))):V("",!0)])]),u("div",SC,[u("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...d)=>o.prevPage&&o.prevPage(...d)),disabled:i.page===1}," Anterior ",8,CC),u("span",MC,"Página "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...d)=>o.nextPage&&o.nextPage(...d)),disabled:i.page===o.totalPages}," Próxima ",8,AC)])])]),i.showModal?(v(),ue(c,{key:1,onClose:o.handleClose},{default:tt(()=>[u("h3",PC,P(i.modalMode==="new"?"Adicionar Cliente":"Cadastro do Cliente"),1),i.editingId?(v(),w("div",TC,[u("nav",EC,[u("button",{class:ie(i.activeTab==="cadastro"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[6]||(t[6]=d=>o.changeTab("cadastro"))},"Cadastro",2),u("button",{class:ie(i.activeTab==="agendamentos"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[7]||(t[7]=d=>o.changeTab("agendamentos"))},"Agendamentos",2),u("button",{class:ie(i.activeTab==="historico"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[8]||(t[8]=d=>o.changeTab("historico"))},"Histórico de atendimento",2)])])):V("",!0),T(u("form",{onSubmit:t[26]||(t[26]=Qt((...d)=>o.handleSaveClient&&o.handleSaveClient(...d),["prevent"])),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[u("div",null,[t[31]||(t[31]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=d=>i.form.name=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,OC),[[L,i.form.name]])]),u("div",null,[t[32]||(t[32]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=d=>i.form.cpf=d),disabled:o.isReadOnly,onInput:t[11]||(t[11]=d=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,DC),[[L,i.form.cpf]])]),u("div",null,[t[33]||(t[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=d=>i.form.birthdate=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,IC),[[L,i.form.birthdate]])]),u("div",null,[t[34]||(t[34]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[13]||(t[13]=d=>i.form.email=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,RC),[[L,i.form.email]])]),u("div",null,[t[35]||(t[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=d=>i.form.phone=d),disabled:o.isReadOnly,onInput:t[15]||(t[15]=d=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,LC),[[L,i.form.phone]])]),u("div",null,[t[36]||(t[36]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=d=>i.form.cep=d),disabled:o.isReadOnly,onInput:t[17]||(t[17]=d=>i.form.cep=o.cepMask(i.form.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,FC),[[L,i.form.cep]])]),u("div",null,[t[37]||(t[37]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=d=>i.form.street=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,jC),[[L,i.form.street]])]),u("div",null,[t[38]||(t[38]=u("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=d=>i.form.number=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,NC),[[L,i.form.number]])]),u("div",null,[t[39]||(t[39]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=d=>i.form.complement=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,UC),[[L,i.form.complement]])]),u("div",null,[t[40]||(t[40]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[21]||(t[21]=d=>i.form.neighborhood=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,$C),[[L,i.form.neighborhood]])]),u("div",null,[t[42]||(t[42]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),T(u("select",{"onUpdate:modelValue":t[22]||(t[22]=d=>i.form.stateId=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[41]||(t[41]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.states,d=>(v(),w("option",{key:d.id,value:d.id},P(d.nome)+" ("+P(d.sigla)+")",9,VC))),128))],8,BC),[[Ae,i.form.stateId]])]),u("div",null,[t[44]||(t[44]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),T(u("select",{"onUpdate:modelValue":t[23]||(t[23]=d=>i.form.cityId=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[43]||(t[43]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.cities,d=>(v(),w("option",{key:d.id,value:d.id},P(d.nome),9,zC))),128))],8,HC),[[Ae,i.form.cityId]])]),u("div",WC,[u("button",{type:"button",onClick:t[24]||(t[24]=(...d)=>o.handleClose&&o.handleClose(...d)),class:"px-4 py-2 rounded border"},"Fechar"),i.modalMode==="view"?(v(),w("button",{key:0,type:"button",onClick:t[25]||(t[25]=(...d)=>o.enableEdit&&o.enableEdit(...d)),class:"btn btn-success"},"Editar")):V("",!0),u("button",{type:"submit",class:"btn",disabled:o.isReadOnly},"Salvar",8,qC)])],544),[[In,i.activeTab==="cadastro"]]),T(u("div",null,[u("table",KC,[t[47]||(t[47]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Hora"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Ações")])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(i.clientAppointments,d=>(v(),w("tr",{key:d.id,class:"border-b last:border-b-0"},[u("td",GC,P(o.formatDateBR(d.date))+" "+P(e.addHoursToTime(d.time)),1),u("td",YC,P(o.getServiceName(d.service_id)),1),u("td",JC,[O(l,{to:{path:"/agendamentos",query:{edit:d.id}},class:"btn btn-sm"},{default:tt(()=>t[45]||(t[45]=[st("Editar")])),_:2,__:[45]},1032,["to"]),u("button",{onClick:h=>o.sendConfirmationEmail(d),class:"btn btn-sm btn-success"},"Enviar e-mail",8,XC)])]))),128)),i.clientAppointments.length===0?(v(),w("tr",QC,t[46]||(t[46]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):V("",!0)])])],512),[[In,i.activeTab==="agendamentos"]]),T(u("div",ZC,[(v(!0),w(Y,null,ft(i.history,d=>(v(),w("div",{key:d.id,class:"border p-2 rounded"},[u("p",tM,P(o.formatDateBR(d.appointment.date))+" "+P(e.addHoursToTime(d.appointment.time)),1),u("p",eM,P(d.note),1),d.attachments&&d.attachments.length?(v(),w("div",sM,[(v(!0),w(Y,null,ft(d.attachments,(h,f)=>(v(),w("a",{key:f,href:h,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(f+1),9,nM))),128))])):V("",!0),u("div",iM,[O(l,{to:{path:`/atendimento/${d.appointment_id}`,query:{note:d.id}},class:"btn btn-sm"},{default:tt(()=>t[48]||(t[48]=[st("Editar atendimento")])),_:2,__:[48]},1032,["to"])])]))),128)),i.history.length===0?(v(),w("p",oM,"Nenhum atendimento encontrado")):V("",!0)],512),[[In,i.activeTab==="historico"]])]),_:1},8,["onClose"])):V("",!0)])])}const aM=mt(aC,[["render",rM]]),lM={name:"CalendarView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const e=new Date;return{currentYear:e.getFullYear(),currentMonth:e.getMonth(),monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]}},computed:{daysInMonth(){return new Date(this.currentYear,this.currentMonth+1,0).getDate()},leadingBlanks(){return new Date(this.currentYear,this.currentMonth,1).getDay()}},methods:{prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--},nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++},goToCurrentMonth(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()},getAppointmentsForDay(e){const t=String(this.currentMonth+1).padStart(2,"0"),s=String(e).padStart(2,"0"),n=`${this.currentYear}-${t}-${s}`;return this.appointments.filter(i=>i.date===n)},isToday(e){const t=new Date;return this.currentYear===t.getFullYear()&&this.currentMonth===t.getMonth()&&e===t.getDate()}}},cM={class:"bg-white rounded-lg shadow overflow-hidden"},dM={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},uM={class:"font-semibold"},hM={class:"grid grid-cols-7 gap-px text-sm bg-gray-100"},fM={class:"text-center font-medium"},pM=["onClick"];function mM(e,t,s,n,i,o){return v(),w("div",cM,[u("div",dM,[u("button",{onClick:t[0]||(t[0]=(...r)=>o.prevMonth&&o.prevMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},t[2]||(t[2]=[u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),u("div",uM,P(i.monthNames[i.currentMonth])+" "+P(i.currentYear),1),u("button",{onClick:t[1]||(t[1]=(...r)=>o.nextMonth&&o.nextMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},t[3]||(t[3]=[u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),u("div",hM,[(v(!0),w(Y,null,ft(i.daysOfWeek,r=>(v(),w("div",{class:"font-semibold text-center bg-gray-50 p-1",key:r},P(r),1))),128)),(v(!0),w(Y,null,ft(o.leadingBlanks,r=>(v(),w("div",{key:"b"+r,class:"bg-white h-24"}))),128)),(v(!0),w(Y,null,ft(o.daysInMonth,r=>(v(),w("div",{key:r,class:ie(["border border-gray-200 h-24 p-1 overflow-auto bg-white",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(r)}])},[u("div",fM,P(r),1),u("ul",null,[(v(!0),w(Y,null,ft(o.getAppointmentsForDay(r),a=>(v(),w("li",{key:a.id,class:"text-xs truncate cursor-pointer",onClick:l=>e.$emit("select",a)},P(e.addHoursToTime(a.time))+" - "+P(s.getClientName(a.client_id)),9,pM))),128))])],2))),128))])])}const gM=mt(lM,[["render",mM]]),bM={name:"Agendamentos",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs,CalendarView:gM,WeekView:hf,AppointmentDetails:ff},data(){return{userId:null,showModal:!1,editingId:null,viewMode:"week",form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},clients:[],services:[],rooms:[],appointments:[],selectedAppointment:null,showDetailsModal:!1,filterStartDate:"",filterEndDate:"",searchQuery:"",sortColumn:"",sortAsc:!0,showViewDropdown:!1,sidebarOpen:window.innerWidth>=768,schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},profileWhatsapp:""}},computed:{processedAppointments(){let e=this.appointments.slice();if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter(s=>s.date.toLowerCase().includes(t)||s.time.toLowerCase().includes(t)||this.getClientName(s.client_id).toLowerCase().includes(t)||this.getServiceName(s.service_id).toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t))}return this.filterStartDate&&(e=e.filter(t=>t.date>=this.filterStartDate)),this.filterEndDate&&(e=e.filter(t=>t.date<=this.filterEndDate)),this.sortColumn&&e.sort((t,s)=>{let n,i;switch(this.sortColumn){case"client":n=this.getClientName(t.client_id),i=this.getClientName(s.client_id);break;case"service":n=this.getServiceName(t.service_id),i=this.getServiceName(s.service_id);break;case"datetime":n=t.date+" "+t.time,i=s.date+" "+s.time;break;default:n=t[this.sortColumn],i=s[this.sortColumn]}return n<i?this.sortAsc?-1:1:n>i?this.sortAsc?1:-1:0}),e},scheduleStartHour(){const e=this.schedule.startTime,t=e?parseInt(e.split(":")[0]):6;return Math.max(0,t-1)},scheduleEndHour(){const e=this.schedule.endTime,t=e?parseInt(e.split(":")[0]):23;return Math.min(23,t+1)}},methods:{formatDateBR:be,openModal(e){e?(this.editingId=e.id,this.form={date:e.date,time:e.time,clientId:e.client_id,serviceId:e.service_id,roomId:e.room_id||"",duration:e.duration,description:e.description}):(this.editingId=null,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openModal(this.selectedAppointment),this.closeDetails())},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},isSlotAllowed(e,t){if(!e||!t)return!1;const s=new Date(e+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:t>=n.start&&t<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&t<this.schedule.startTime||this.schedule.endTime&&t>this.schedule.endTime))},canCancelAppointment(e){const t=this.schedule.cancelLimitHours||0;return t===0?!0:(uf(e.date,e.time)-df())/36e5>=t},async handleSaveAppointment(){if(!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado");return}if(this.editingId){const{data:e,error:t}=await F.from("appointments").update({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description}).eq("id",this.editingId).select().single();if(t)alert("Erro ao atualizar agendamento: "+t.message);else{const s=this.appointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.appointments[s]=e),this.closeModal()}}else{const{data:e,error:t}=await F.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,user_id:this.userId}).select().single();if(t)alert("Erro ao salvar agendamento: "+t.message);else{this.appointments.push(e);const s=this.clients.find(o=>o.id===this.form.clientId),n=this.services.find(o=>o.id===this.form.serviceId),i=this.rooms.find(o=>o.id===this.form.roomId);await qa({to:s==null?void 0:s.email,subject:"Agendamento de Consulta realizado",text:`Olá ${s==null?void 0:s.name},

Seu agendamento para ${n==null?void 0:n.name} foi confirmado para ${be(this.form.date)} às ${this.form.time}.
${i?`Sala: ${i.name}
`:""}${i!=null&&i.google_meet_link?`Link: ${i.google_meet_link}
`:""}${this.form.description?`Observações: ${this.form.description}
`:""}
E-mail enviado automaticamente.`},!1),this.closeModal()}}},async handleDeleteAppointment(e,t="Tem certeza que deseja excluir este agendamento?"){const s=this.appointments.find(o=>o.id===e);if(s&&!this.canCancelAppointment(s)){alert("Agendamento fora da política de cancelamento.");return}if(!confirm(t))return;const{error:i}=await F.from("appointments").delete().eq("id",e);i?alert("Erro ao excluir agendamento: "+i.message):(this.appointments=this.appointments.filter(o=>o.id!==e),this.selectedAppointment&&this.selectedAppointment.id===e&&(this.showDetailsModal=!1,this.selectedAppointment=null))},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},getClientEmail(e){const t=this.clients.find(s=>s.id===e);return t?t.email:""},getServiceName(e){const t=this.services.find(s=>s.id===e);return t?t.name:""},getRoomName(e){const t=this.rooms.find(s=>s.id===e);return t?t.name:""},getRoomLink(e){const t=this.rooms.find(s=>s.id===e);return t?t.google_meet_link:""},sortBy(e){this.sortColumn===e?this.sortAsc=!this.sortAsc:(this.sortColumn=e,this.sortAsc=!0)},setViewMode(e){this.viewMode=e,this.showViewDropdown=!1,e==="calendar"&&this.$refs.calendarView&&this.$refs.calendarView.goToCurrentMonth&&this.$refs.calendarView.goToCurrentMonth()},openDetails(e){this.selectedAppointment=e,this.showDetailsModal=!0},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(this.selectedAppointment){if(!this.canCancelAppointment(this.selectedAppointment)){alert("Agendamento fora da política de cancelamento.");return}await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails()}},markNoShow(){alert("Falta registrada para este atendimento.")},async sendConfirmationEmail(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(i=>i.id===e.client_id),s=this.services.find(i=>i.id===e.service_id),n=this.rooms.find(i=>i.id===e.room_id);await qa({to:t==null?void 0:t.email,subject:"Agendamento de Consulta realizado",text:`Olá ${t==null?void 0:t.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${be(e.date)} às ${an(e.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${e.description?`Observações: ${e.description}
`:""}
E-mail enviado automaticamente.`})},sendConfirmationWhatsApp(){const e=this.selectedAppointment;if(!e)return;const t=this.clients.find(r=>r.id===e.client_id);if(!(t!=null&&t.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===e.room_id),n=`Olá ${t.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${t.name}
Data: ${be(e.date)} - Hora: ${an(e.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${Xo(t.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},exportCSV(){const e=["Data","Hora","Cliente","Serviço","Duração","Descrição"],t=this.appointments.map(o=>[be(o.date),an(o.time),this.getClientName(o.client_id),this.getServiceName(o.service_id),o.duration,(o.description||"").replace(/(\r\n|\n|\r)/g," ")]),s=[e.join(","),...t.map(o=>o.map(r=>`"${String(r).replace(/"/g,'""')}"`).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.setAttribute("download","agendamentos.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},clearFilters(){this.searchQuery="",this.filterStartDate="",this.filterEndDate=""}},watch:{"form.serviceId"(e){const t=this.services.find(s=>s.id===e);t&&(!this.editingId||this.form.duration==="")&&(this.form.duration=t.duration)}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t);const{data:s}=await F.from("services").select().eq("user_id",this.userId);s&&(this.services=s);const{data:n}=await F.from("rooms").select().eq("user_id",this.userId);n&&(this.rooms=n);const{data:i}=await F.from("profiles").select("start_time, end_time, week_days, daily_schedule, whatsapp, cancel_limit_hours").eq("id",this.userId).single();i&&(this.schedule.startTime=i.start_time||"",this.schedule.endTime=i.end_time||"",this.schedule.weekDays=i.week_days?i.week_days.split(","):[],this.schedule.dailySchedule=i.daily_schedule?typeof i.daily_schedule=="string"?JSON.parse(i.daily_schedule):i.daily_schedule:null,this.schedule.cancelLimitHours=i.cancel_limit_hours||0,this.profileWhatsapp=i.whatsapp||"");const{data:o}=await F.from("appointments").select().eq("user_id",this.userId);o&&(this.appointments=o);const r=this.$route.query.edit;if(r){const a=this.appointments.find(l=>l.id===r);a&&this.openModal(a)}}},yM={class:"min-h-screen flex bg-gray-100 relative"},xM={class:"flex-1 p-4 md:p-8"},_M={key:0,class:"flex items-center mb-4"},vM={class:"flex flex-col sm:flex-row sm:items-center mb-4 gap-2"},wM={class:"mb-4 flex items-center space-x-2"},kM={class:"relative"},SM={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20"},CM={class:"text-lg font-semibold mb-4"},MM=["value"],AM=["value"],PM=["value"],TM={class:"flex justify-end space-x-2"},EM={class:"mt-4"},OM={class:"flex flex-wrap justify-center gap-2"},DM={class:"mt-4"},IM={class:"flex flex-wrap justify-center gap-2"},RM={class:"mt-8"},LM={class:"bg-white p-4 rounded-lg shadow"},FM={class:"overflow-x-auto"},jM={class:"min-w-full text-left"},NM={class:"bg-gray-50"},UM={key:0},$M={key:0},BM={key:0},VM={key:0},HM={key:0},zM={class:"px-4 py-2"},WM={class:"px-4 py-2"},qM={class:"px-4 py-2"},KM={class:"px-4 py-2"},GM={class:"px-4 py-2"},YM={class:"px-4 py-2"},JM={class:"px-4 py-2 text-right space-x-2"},XM=["onClick"],QM={key:0},ZM={class:"mt-8"},tA={class:"mt-8"};function eA(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal"),c=z("AppointmentDetails"),d=z("CalendarView"),h=z("WeekView");return v(),w("div",yM,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=f=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",xM,[i.sidebarOpen?V("",!0):(v(),w("div",_M,[u("button",{onClick:t[1]||(t[1]=f=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[32]||(t[32]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Agendamentos"}),u("section",null,[u("div",vM,[T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=f=>i.searchQuery=f),type:"text",placeholder:"Buscar...",class:"border px-3 py-2 rounded-lg flex-grow sm:max-w-xs"},null,512),[[L,i.searchQuery]]),T(u("input",{"onUpdate:modelValue":t[3]||(t[3]=f=>i.filterStartDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[L,i.filterStartDate]]),T(u("input",{"onUpdate:modelValue":t[4]||(t[4]=f=>i.filterEndDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[L,i.filterEndDate]]),u("button",{onClick:t[5]||(t[5]=(...f)=>o.clearFilters&&o.clearFilters(...f)),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Limpar"),u("button",{onClick:t[6]||(t[6]=f=>o.openModal()),class:"btn sm:ml-auto w-full sm:w-auto"},"Novo"),u("button",{onClick:t[7]||(t[7]=(...f)=>o.exportCSV&&o.exportCSV(...f)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full sm:w-auto"},"Exportar")]),u("div",wM,[t[33]||(t[33]=u("span",{class:"text-xs text-gray-600"},"Modo de exibição:",-1)),u("div",kM,[u("button",{onClick:t[8]||(t[8]=f=>i.showViewDropdown=!i.showViewDropdown),class:"px-4 py-2 bg-gray-200 rounded-lg"},P(i.viewMode==="list"?"Lista":i.viewMode==="calendar"?"Calendário":"Semana"),1),i.showViewDropdown?(v(),w("div",SM,[u("button",{onClick:t[9]||(t[9]=f=>o.setViewMode("list")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Lista"),u("button",{onClick:t[10]||(t[10]=f=>o.setViewMode("calendar")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Calendário"),u("button",{onClick:t[11]||(t[11]=f=>o.setViewMode("week")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Semana")])):V("",!0)])]),i.showModal?(v(),ue(l,{key:0,onClose:o.closeModal},{default:tt(()=>[u("h3",CM,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),u("form",{onSubmit:t[20]||(t[20]=Qt((...f)=>o.handleSaveAppointment&&o.handleSaveAppointment(...f),["prevent"])),class:"space-y-4"},[u("div",null,[t[34]||(t[34]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=f=>i.form.date=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.date]])]),u("div",null,[t[35]||(t[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),T(u("input",{type:"time",step:"60","onUpdate:modelValue":t[13]||(t[13]=f=>i.form.time=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.time]])]),u("div",null,[t[37]||(t[37]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),T(u("select",{"onUpdate:modelValue":t[14]||(t[14]=f=>i.form.clientId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[36]||(t[36]=u("option",{disabled:"",value:""},"Selecione um cliente",-1)),(v(!0),w(Y,null,ft(i.clients,f=>(v(),w("option",{key:f.id,value:f.id},P(f.name),9,MM))),128))],512),[[Ae,i.form.clientId]])]),u("div",null,[t[39]||(t[39]=u("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),T(u("select",{"onUpdate:modelValue":t[15]||(t[15]=f=>i.form.serviceId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[38]||(t[38]=u("option",{disabled:"",value:""},"Selecione um serviço",-1)),(v(!0),w(Y,null,ft(i.services,f=>(v(),w("option",{key:f.id,value:f.id},P(f.name),9,AM))),128))],512),[[Ae,i.form.serviceId]])]),u("div",null,[t[41]||(t[41]=u("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),T(u("select",{"onUpdate:modelValue":t[16]||(t[16]=f=>i.form.roomId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[t[40]||(t[40]=u("option",{disabled:"",value:""},"Selecione uma sala",-1)),(v(!0),w(Y,null,ft(i.rooms,f=>(v(),w("option",{key:f.id,value:f.id},P(f.name),9,PM))),128))],512),[[Ae,i.form.roomId]])]),u("div",null,[t[42]||(t[42]=u("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=f=>i.form.duration=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.duration]])]),u("div",null,[t[43]||(t[43]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),T(u("textarea",{"onUpdate:modelValue":t[18]||(t[18]=f=>i.form.description=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[L,i.form.description]])]),u("div",TM,[u("button",{type:"button",onClick:t[19]||(t[19]=(...f)=>o.closeModal&&o.closeModal(...f)),class:"px-4 py-2 rounded border"},"Cancelar"),t[44]||(t[44]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):V("",!0),i.showDetailsModal?(v(),ue(l,{key:1,onClose:o.closeDetails},{default:tt(()=>[O(c,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:tt(()=>[u("div",EM,[t[45]||(t[45]=u("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),u("div",OM,[u("button",{onClick:t[21]||(t[21]=(...f)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...f)),class:"btn btn-success"},"Enviar confirmação"),u("button",{onClick:t[22]||(t[22]=(...f)=>o.cancelAppointment&&o.cancelAppointment(...f)),class:"btn btn-warning"},"Desmarcou"),u("button",{onClick:t[23]||(t[23]=(...f)=>o.markNoShow&&o.markNoShow(...f)),class:"btn btn-secondary"},"Faltou"),u("button",{onClick:t[24]||(t[24]=(...f)=>o.startAppointment&&o.startAppointment(...f)),class:"btn btn-primary"},"Iniciar atendimento")])]),u("div",DM,[t[46]||(t[46]=u("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),u("div",IM,[u("button",{onClick:t[25]||(t[25]=(...f)=>o.editFromDetails&&o.editFromDetails(...f)),class:"btn"},"Editar"),u("button",{onClick:t[26]||(t[26]=f=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):V("",!0),T(u("div",RM,[t[55]||(t[55]=u("h3",{class:"text-lg font-medium mb-4"},"Agendamentos",-1)),u("div",LM,[u("div",FM,[u("table",jM,[u("thead",NM,[u("tr",null,[u("th",{onClick:t[27]||(t[27]=f=>o.sortBy("datetime")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[47]||(t[47]=st(" Data/Hora ")),i.sortColumn==="datetime"?(v(),w("span",UM,P(i.sortAsc?"▲":"▼"),1)):V("",!0)]),u("th",{onClick:t[28]||(t[28]=f=>o.sortBy("client")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[48]||(t[48]=st(" Cliente ")),i.sortColumn==="client"?(v(),w("span",$M,P(i.sortAsc?"▲":"▼"),1)):V("",!0)]),u("th",{onClick:t[29]||(t[29]=f=>o.sortBy("service")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[49]||(t[49]=st(" Serviço ")),i.sortColumn==="service"?(v(),w("span",BM,P(i.sortAsc?"▲":"▼"),1)):V("",!0)]),t[52]||(t[52]=u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Sala",-1)),u("th",{onClick:t[30]||(t[30]=f=>o.sortBy("duration")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[50]||(t[50]=st(" Duração ")),i.sortColumn==="duration"?(v(),w("span",VM,P(i.sortAsc?"▲":"▼"),1)):V("",!0)]),u("th",{onClick:t[31]||(t[31]=f=>o.sortBy("description")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[t[51]||(t[51]=st(" Descrição ")),i.sortColumn==="description"?(v(),w("span",HM,P(i.sortAsc?"▲":"▼"),1)):V("",!0)]),t[53]||(t[53]=u("th",{class:"px-4 py-2"},null,-1))])]),u("tbody",null,[(v(!0),w(Y,null,ft(o.processedAppointments,f=>(v(),w("tr",{key:f.id,class:"border-b last:border-b-0"},[u("td",zM,P(o.formatDateBR(f.date))+" "+P(e.addHoursToTime(f.time)),1),u("td",WM,P(o.getClientName(f.client_id)),1),u("td",qM,P(o.getServiceName(f.service_id)),1),u("td",KM,P(o.getRoomName(f.room_id)),1),u("td",GM,P(f.duration)+" minutos",1),u("td",YM,P(f.description),1),u("td",JM,[u("button",{onClick:p=>o.openDetails(f),class:"btn btn-sm"},"Visualizar",8,XM)])]))),128)),o.processedAppointments.length===0?(v(),w("tr",QM,t[54]||(t[54]=[u("td",{colspan:"7",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento encontrado",-1)]))):V("",!0)])])])])],512),[[In,i.viewMode==="list"]]),T(u("div",ZM,[t[56]||(t[56]=u("h3",{class:"text-lg font-medium mb-4"},"Calendário",-1)),O(d,{ref:"calendarView",appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[In,i.viewMode==="calendar"]]),T(u("div",tA,[t[57]||(t[57]=u("h3",{class:"text-lg font-medium mb-4"},"Semana",-1)),O(h,{appointments:o.processedAppointments,getClientName:o.getClientName,startHour:o.scheduleStartHour,endHour:o.scheduleEndHour,onSelect:o.openDetails},null,8,["appointments","getClientName","startHour","endHour","onSelect"])],512),[[In,i.viewMode==="week"]])])])])}const sA=mt(bM,[["render",eA]]),nA={name:"Servicos",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{userId:null,showModal:!1,editingId:null,search:"",sidebarOpen:window.innerWidth>=768,form:{name:"",description:"",duration:"",price:""},services:[],page:1,pageSize:10}},methods:{openModal(e){e?(this.editingId=e.id,this.form={name:e.name,description:e.description,duration:e.duration,price:e.price}):(this.editingId=null,this.form={name:"",description:"",duration:"",price:""}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={name:"",description:"",duration:"",price:""},this.editingId=null},async handleSaveService(){let e,t;if(this.editingId?{data:e,error:t}=await F.from("services").update({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price)}).eq("id",this.editingId).select().single():{data:e,error:t}=await F.from("services").insert({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),user_id:this.userId}).select().single(),t)alert("Erro ao salvar serviço: "+t.message);else{if(this.editingId){const s=this.services.findIndex(n=>n.id===this.editingId);s!==-1&&(this.services[s]=e)}else this.services.push(e);this.closeModal()}},async handleDeleteService(e){if(!confirm("Tem certeza que deseja excluir este serviço?"))return;const{error:s}=await F.from("services").delete().eq("id",e);s?alert("Erro ao excluir serviço: "+s.message):this.services=this.services.filter(n=>n.id!==e)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--},formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},computed:{filteredServices(){const e=this.search.toLowerCase();return this.services.filter(t=>t.name.toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e)||(t.duration||"").toLowerCase().includes(e)||t.price!==null&&t.price.toString().includes(e))},paginatedServices(){const e=(this.page-1)*this.pageSize;return this.filteredServices.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredServices.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("services").select().eq("user_id",this.userId);t&&(this.services=t)}},iA={class:"min-h-screen flex bg-gray-100 relative"},oA={class:"flex-1 p-4 md:p-8 space-y-6"},rA={key:0,class:"flex items-center mb-4"},aA={class:"bg-white p-4 rounded-lg shadow"},lA={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},cA={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},dA={class:"overflow-x-auto"},uA={class:"min-w-full text-left"},hA={class:"px-4 py-2"},fA={class:"px-4 py-2"},pA={class:"px-4 py-2"},mA={class:"px-4 py-2"},gA={class:"px-4 py-2 text-right space-x-2"},bA=["onClick"],yA=["onClick"],xA={key:0},_A={class:"mt-4 flex justify-between items-center"},vA=["disabled"],wA={class:"text-sm"},kA=["disabled"],SA={class:"text-lg font-semibold mb-4"},CA={class:"flex justify-end space-x-2"};function MA(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return v(),w("div",iA,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",oA,[i.sidebarOpen?V("",!0):(v(),w("div",rA,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[12]||(t[12]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Serviços"}),u("section",aA,[u("div",lA,[t[13]||(t[13]=u("h3",{class:"text-lg font-medium"},"Serviços cadastrados",-1)),u("div",cA,[T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[L,i.search]]),u("button",{onClick:t[3]||(t[3]=c=>o.openModal()),class:"btn w-full sm:w-auto"}," Novo Serviço ")])]),u("div",dA,[u("table",uA,[t[15]||(t[15]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Descrição"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Duração"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(o.paginatedServices,c=>(v(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",hA,P(c.name),1),u("td",fA,P(c.description),1),u("td",pA,P(c.duration)+" minutos",1),u("td",mA,P(o.formatPrice(c.price)),1),u("td",gA,[u("button",{onClick:d=>o.openModal(c),class:"btn btn-sm"}," Editar ",8,bA),u("button",{onClick:d=>o.handleDeleteService(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,yA)])]))),128)),o.filteredServices.length===0?(v(),w("tr",xA,t[14]||(t[14]=[u("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"}," Nenhum serviço encontrado ",-1)]))):V("",!0)])]),u("div",_A,[u("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,vA),u("span",wA,"Página "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,kA)])])]),i.showModal?(v(),ue(l,{key:1,onClose:o.closeModal},{default:tt(()=>[u("h3",SA,P(i.editingId?"Editar Serviço":"Adicionar Serviço"),1),u("form",{onSubmit:t[11]||(t[11]=Qt((...c)=>o.handleSaveService&&o.handleSaveService(...c),["prevent"])),class:"space-y-6"},[u("div",null,[t[16]||(t[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.name]])]),u("div",null,[t[17]||(t[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),T(u("textarea",{"onUpdate:modelValue":t[7]||(t[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.description]])]),u("div",null,[t[18]||(t[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Tempo de duração",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=c=>i.form.duration=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.duration]])]),u("div",null,[t[19]||(t[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),T(u("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=c=>i.form.price=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.price]])]),u("div",CA,[u("button",{type:"button",onClick:t[10]||(t[10]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[20]||(t[20]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):V("",!0)])])}const AA=mt(nA,[["render",MA]]),PA={name:"Usuarios",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{form:{email:"",password:""},sidebarOpen:window.innerWidth>=768,userId:null,successMessage:"",errorMessage:"",users:[],search:"",showUserModal:!1,userModalMode:"new",selectedUserId:null,userForm:{email:"",password:""}}},methods:{async handleAddUser(){if(this.successMessage="",this.errorMessage="",this.form.email&&!ns(this.form.email)){this.errorMessage="E-mail inválido";return}const{data:{user:e}}=await F.auth.getUser(),{data:{session:t}}=await F.auth.getSession();let s=null;if(e){const{data:o}=await F.from("profiles").select("*").eq("id",e.id).single();s=o}const{data:n,error:i}=await F.auth.signUp({email:this.form.email,password:this.form.password});t&&await F.auth.setSession(t),i?this.errorMessage="Erro ao cadastrar usuário: "+i.message:(n!=null&&n.user&&s&&await F.from("profiles").insert({id:n.user.id,business_name:s.business_name,description:s.description,phone:s.phone,whatsapp:s.whatsapp,email:s.email,address:s.address,instagram:s.instagram,facebook:s.facebook,youtube:s.youtube,x:s.x,slug:s.slug}),this.successMessage="Usuário cadastrado! Verifique o e-mail para ativar a conta.",this.form={email:"",password:""},await this.fetchUsers())},openUserModal(e,t="new"){this.userModalMode=t,e?(this.selectedUserId=e.id,this.userForm={email:e.email,password:""}):(this.selectedUserId=null,this.userForm={email:"",password:""}),this.showUserModal=!0},handleUserClose(){this.userModalMode==="view"?this.closeUserModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeUserModal()},closeUserModal(){this.showUserModal=!1,this.userModalMode="new",this.selectedUserId=null,this.userForm={email:"",password:""}},enableUserEdit(){this.userModalMode="edit"},async handleSaveUser(){if(this.userModalMode!=="view"){if(this.userForm.email&&!ns(this.userForm.email)){alert("E-mail inválido");return}if(this.selectedUserId){const{error:e}=await F.from("profiles").update({email:this.userForm.email}).eq("id",this.selectedUserId);if(e)alert("Erro ao salvar usuário: "+e.message);else{const t=this.users.findIndex(s=>s.id===this.selectedUserId);t!==-1&&(this.users[t].email=this.userForm.email),this.closeUserModal()}}else this.form={email:this.userForm.email,password:this.userForm.password},await this.handleAddUser(),this.closeUserModal()}},async fetchUsers(){const{data:e}=await F.from("profiles").select("slug").eq("id",this.userId).single();if(e){const{data:t}=await F.from("profiles").select("id, email").eq("slug",e.slug);this.users=t||[]}}},computed:{isUserView(){return this.userModalMode==="view"},filteredUsers(){const e=this.search.toLowerCase();return this.users.filter(t=>t.id.toLowerCase().includes(e)||(t.email||"").toLowerCase().includes(e))}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchUsers()}},TA={class:"min-h-screen flex bg-gray-100 relative"},EA={class:"flex-1 p-8 space-y-6"},OA={key:0,class:"flex items-center mb-4"},DA={class:"bg-white p-4 rounded-lg shadow"},IA={key:0,class:"text-green-600 mt-4"},RA={key:1,class:"text-red-600 mt-4"},LA={class:"bg-white p-4 rounded-lg shadow"},FA={class:"flex justify-between items-center mb-4"},jA={class:"overflow-x-auto"},NA={class:"min-w-full text-left"},UA={class:"px-4 py-2"},$A={class:"px-4 py-2"},BA={class:"px-4 py-2 text-right"},VA=["onClick"],HA={key:0},zA={class:"text-lg font-semibold mb-4"},WA=["disabled"],qA=["disabled"],KA={class:"flex justify-end space-x-2"},GA=["disabled"];function YA(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return v(),w("div",TA,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",EA,[i.sidebarOpen?V("",!0):(v(),w("div",OA,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[11]||(t[11]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Usuários"}),u("section",DA,[t[15]||(t[15]=u("h3",{class:"text-lg font-medium mb-4"},"Cadastrar novo usuário",-1)),u("form",{onSubmit:t[4]||(t[4]=Qt((...c)=>o.handleAddUser&&o.handleAddUser(...c),["prevent"])),class:"space-y-4"},[u("div",null,[t[12]||(t[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.email]])]),u("div",null,[t[13]||(t[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),T(u("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=c=>i.form.password=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.password]])]),t[14]||(t[14]=u("div",{class:"flex justify-end"},[u("button",{type:"submit",class:"btn"},"Cadastrar")],-1))],32),i.successMessage?(v(),w("p",IA,P(i.successMessage),1)):V("",!0),i.errorMessage?(v(),w("p",RA,P(i.errorMessage),1)):V("",!0)]),u("section",LA,[u("div",FA,[t[16]||(t[16]=u("h3",{class:"text-lg font-medium"},"Usuários cadastrados",-1)),T(u("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.search]])]),u("div",jA,[u("table",NA,[t[18]||(t[18]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"ID"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(o.filteredUsers,c=>(v(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",UA,P(c.id),1),u("td",$A,P(c.email),1),u("td",BA,[u("button",{onClick:d=>o.openUserModal(c,"view"),class:"btn btn-sm"},"Visualizar",8,VA)])]))),128)),o.filteredUsers.length===0?(v(),w("tr",HA,t[17]||(t[17]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum usuário encontrado",-1)]))):V("",!0)])])])]),i.showUserModal?(v(),ue(l,{key:1,onClose:o.handleUserClose},{default:tt(()=>[u("h3",zA,P(i.userModalMode==="new"?"Adicionar Usuário":"Cadastro de Usuário"),1),u("form",{onSubmit:t[10]||(t[10]=Qt((...c)=>o.handleSaveUser&&o.handleSaveUser(...c),["prevent"])),class:"space-y-4"},[u("div",null,[t[19]||(t[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),T(u("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=c=>i.userForm.email=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,WA),[[L,i.userForm.email]])]),u("div",null,[t[20]||(t[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),T(u("input",{type:"password","onUpdate:modelValue":t[7]||(t[7]=c=>i.userForm.password=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,qA),[[L,i.userForm.password]])]),u("div",KA,[u("button",{type:"button",onClick:t[8]||(t[8]=(...c)=>o.handleUserClose&&o.handleUserClose(...c)),class:"px-4 py-2 rounded border"},"Fechar"),i.userModalMode==="view"?(v(),w("button",{key:0,type:"button",onClick:t[9]||(t[9]=(...c)=>o.enableUserEdit&&o.enableUserEdit(...c)),class:"btn btn-success"},"Editar")):V("",!0),u("button",{type:"submit",class:"btn",disabled:o.isUserView},"Salvar",8,GA)])],32)]),_:1},8,["onClose"])):V("",!0)])])}const JA=mt(PA,[["render",YA]]),XA={name:"SearchProfiles",components:{Navbar:ze,Footer:We},data(){return{profiles:[],search:""}},computed:{filteredProfiles(){const e=this.search.toLowerCase();return this.profiles.filter(t=>t.business_name.toLowerCase().includes(e))}},async mounted(){const{data:e}=await F.from("profiles").select("id, business_name, description, slug, area_atuacao");e&&(this.profiles=e)}},QA={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-10"},ZA={class:"max-w-2xl mx-auto px-4"},tP={class:"mb-6 text-center"},eP={class:"space-y-4"},sP={class:"text-xl font-semibold text-blue-600"},nP={key:0,class:"text-sm text-gray-500"},iP={class:"text-gray-700 mb-2"},oP={key:0,class:"text-center text-gray-500 py-6"};function rP(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("div",QA,[u("div",ZA,[u("div",tP,[t[1]||(t[1]=u("h1",{class:"text-3xl font-extrabold text-blue-700 mb-4"},"Buscar perfis",-1)),T(u("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.search=c),type:"text",placeholder:"Digite o nome do estabelecimento",class:"w-full px-4 py-2 border rounded-md"},null,512),[[L,i.search]])]),u("ul",eP,[(v(!0),w(Y,null,ft(o.filteredProfiles,c=>(v(),w("li",{key:c.id,class:"bg-white p-4 rounded-md shadow"},[u("h2",sP,P(c.business_name),1),c.area_atuacao?(v(),w("p",nP,P(c.area_atuacao),1)):V("",!0),u("p",iP,P(c.description),1),O(a,{to:"/"+c.slug,class:"text-blue-600 hover:underline"},{default:tt(()=>t[2]||(t[2]=[st(" Ver perfil ")])),_:2,__:[2]},1032,["to"])]))),128)),o.filteredProfiles.length===0?(v(),w("li",oP," Nenhum resultado encontrado ")):V("",!0)])])]),O(l)],64)}const aP=mt(XA,[["render",rP]]),fp="/icons/whatsapp.svg",lP={name:"PublicPage",data(){return{profile:null,services:[]}},computed:{whatsappLink(){var s;return`https://wa.me/${(((s=this.profile)==null?void 0:s.whatsapp)||"").replace(/\D/g,"")}`}},methods:{formatPrice(e){return e==null||e===""?"":Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const e=this.$route.params.slug,{data:t}=await F.from("profiles").select("*").eq("slug",e).single();if(t){this.profile=t;const{data:s}=await F.from("services").select().eq("user_id",t.id);this.services=s||[]}}},cP={class:"min-h-screen flex flex-col bg-white"},dP={key:0,class:"flex-1"},uP={class:"bg-blue-600 text-white py-12"},hP={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},fP=["src"],pP={class:"text-4xl font-bold"},mP={key:0,class:"text-sm"},gP={class:"text-lg"},bP={class:"max-w-5xl mx-auto px-4 py-12 space-y-16"},yP={key:0,class:"grid gap-6 md:grid-cols-2"},xP={class:"text-lg font-medium text-blue-700"},_P={class:"text-sm text-gray-600"},vP={class:"text-sm text-gray-500 mt-1"},wP={class:"text-sm text-gray-500"},kP={key:1,class:"text-gray-500"},SP={class:"space-y-1 text-gray-700"},CP=["href"],MP={key:2,class:"flex-1 flex items-center justify-center text-gray-500"},AP={key:3,class:"bg-gray-100 py-6"},PP={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},TP={class:"space-x-4 text-blue-600"},EP=["href"],OP=["href"],DP=["href"],IP=["href"],RP={class:"text-sm text-gray-500"};function LP(e,t,s,n,i,o){return v(),w("div",cP,[i.profile?(v(),w("section",dP,[u("div",uP,[u("div",hP,[u("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,fP),u("h1",pP,P(i.profile.business_name),1),i.profile.area_atuacao?(v(),w("p",mP,P(i.profile.area_atuacao),1)):V("",!0),u("p",gP,P(i.profile.description),1)])]),u("div",bP,[u("div",null,[t[0]||(t[0]=u("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Serviços",-1)),i.services.length?(v(),w("ul",yP,[(v(!0),w(Y,null,ft(i.services,r=>(v(),w("li",{key:r.id,class:"p-4 bg-gray-50 border rounded-lg shadow"},[u("h3",xP,P(r.name),1),u("p",_P,P(r.description),1),u("p",vP,"Duração: "+P(r.duration)+" minutos",1),u("p",wP,"Valor: "+P(o.formatPrice(r.price)),1)]))),128))])):(v(),w("p",kP,"Nenhum serviço cadastrado."))]),u("div",null,[t[5]||(t[5]=u("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Contato",-1)),u("ul",SP,[u("li",null,[t[1]||(t[1]=u("strong",null,"Telefone:",-1)),st(" "+P(i.profile.phone),1)]),u("li",null,[t[2]||(t[2]=u("strong",null,"WhatsApp:",-1)),st(" "+P(i.profile.whatsapp),1)]),u("li",null,[t[3]||(t[3]=u("strong",null,"Email:",-1)),st(" "+P(i.profile.email),1)]),u("li",null,[t[4]||(t[4]=u("strong",null,"Endereço:",-1)),st(" "+P(i.profile.address),1)])])])])])):V("",!0),i.profile&&i.profile.whatsapp?(v(),w("a",{key:1,href:o.whatsappLink,target:"_blank",rel:"noopener",class:"fixed bottom-4 right-4 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg"},t[6]||(t[6]=[u("img",{src:fp,alt:"WhatsApp",class:"w-6 h-6"},null,-1)]),8,CP)):(v(),w("div",MP,t[7]||(t[7]=[u("p",null,"Carregando perfil...",-1)]))),i.profile?(v(),w("footer",AP,[u("div",PP,[u("div",TP,[i.profile.instagram?(v(),w("a",{key:0,href:i.profile.instagram,class:"hover:underline"},"Instagram",8,EP)):V("",!0),i.profile.facebook?(v(),w("a",{key:1,href:i.profile.facebook,class:"hover:underline"},"Facebook",8,OP)):V("",!0),i.profile.youtube?(v(),w("a",{key:2,href:i.profile.youtube,class:"hover:underline"},"YouTube",8,DP)):V("",!0),i.profile.x?(v(),w("a",{key:3,href:i.profile.x,class:"hover:underline"},"X (Twitter)",8,IP)):V("",!0)]),u("p",RP,"© "+P(new Date().getFullYear())+" "+P(i.profile.business_name),1)])])):V("",!0)])}const FP=mt(lP,[["render",LP]]),jP={name:"Planos",components:{Navbar:ze,Footer:We}},NP={class:"max-w-5xl mx-auto px-4 py-16"},UP={class:"text-center mt-8"};function $P(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("section",NP,[t[1]||(t[1]=dn('<h1 class="text-3xl font-bold text-center mb-8">Conheça nossos planos</h1><div class="bg-white p-4 rounded-lg shadow"><div class="overflow-x-auto"><table class="min-w-full text-left"><thead class="bg-gray-50"><tr><th class="px-4 py-2 font-medium text-gray-700">Recursos</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Básico</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Beta</th></tr></thead><tbody><tr><td class="border-t px-4 py-2 text-gray-600">Valor</td><td class="border-t px-4 py-2 text-center font-semibold">Grátis</td><td class="border-t px-4 py-2 text-center font-semibold line-through text-gray-400">R$167,97</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Cadastro de pacientes</td><td class="border-t px-4 py-2 text-center">Até 5 pacientes</td><td class="border-t px-4 py-2 text-center">Ilimitado</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Lembretes por e-mail</td><td class="border-t px-4 py-2 text-center">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Lembretes via WhatsApp</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Customização de domínio da página pública</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Página pública sem banner do Agenda Zen</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Geração de recibos de atendimentos</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Envio de recibos por e-mail automático</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr></tbody></table></div></div>',2)),u("div",UP,[O(a,{to:"/cadastro",class:"btn"},{default:tt(()=>t[0]||(t[0]=[st(" Contratar plano ")])),_:1,__:[0]})])]),O(l)],64)}const BP=mt(jP,[["render",$P]]),VP={name:"Salas",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{userId:null,showModal:!1,search:"",form:{name:"",googleMeetLink:""},rooms:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{openModal(){this.showModal=!0},generateMeetLink(){const e=window.open("https://meet.google.com/new","_blank");setTimeout(()=>{try{this.form.googleMeetLink=e.location.href}catch{}},3e3)},async pasteFromClipboard(){try{const e=await navigator.clipboard.readText();this.form.googleMeetLink=e}catch{alert("Não foi possível acessar o conteúdo da área de transferência.")}},closeModal(){this.showModal=!1,this.form={name:"",googleMeetLink:""}},async handleAddRoom(){const{data:e,error:t}=await F.from("rooms").insert({name:this.form.name,google_meet_link:this.form.googleMeetLink,user_id:this.userId}).select().single();t?alert("Erro ao salvar sala: "+t.message):(this.rooms.push(e),this.closeModal())},async handleDeleteRoom(e){if(!confirm("Tem certeza que deseja excluir esta sala?"))return;const{error:s}=await F.from("rooms").delete().eq("id",e);s?alert("Erro ao excluir sala: "+s.message):this.rooms=this.rooms.filter(n=>n.id!==e)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{filteredRooms(){const e=this.search.toLowerCase();return this.rooms.filter(t=>t.name.toLowerCase().includes(e)||t.google_meet_link&&t.google_meet_link.toLowerCase().includes(e))},paginatedRooms(){const e=(this.page-1)*this.pageSize;return this.filteredRooms.slice(e,e+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredRooms.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("rooms").select().eq("user_id",this.userId);t&&(this.rooms=t)}},HP={class:"min-h-screen flex bg-gray-100 relative"},zP={class:"flex-1 p-4 md:p-8 space-y-6"},WP={key:0,class:"flex items-center mb-4"},qP={class:"bg-white p-4 rounded-lg shadow"},KP={class:"flex justify-between items-center mb-4"},GP={class:"flex items-center space-x-3"},YP={class:"overflow-x-auto"},JP={class:"min-w-full text-left"},XP={class:"px-4 py-2"},QP={class:"px-4 py-2"},ZP=["href"],tT={class:"px-4 py-2 text-right"},eT=["onClick"],sT={key:0},nT={class:"mt-4 flex justify-between items-center"},iT=["disabled"],oT={class:"text-sm"},rT=["disabled"],aT={class:"flex space-x-2 mt-1"},lT={class:"flex justify-end space-x-2"};function cT(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return v(),w("div",HP,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",zP,[i.sidebarOpen?V("",!0):(v(),w("div",WP,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[12]||(t[12]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Salas"}),u("section",qP,[u("div",KP,[t[13]||(t[13]=u("h3",{class:"text-lg font-medium"},"Salas cadastradas",-1)),u("div",GP,[T(u("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.search]]),u("button",{onClick:t[3]||(t[3]=(...c)=>o.openModal&&o.openModal(...c)),class:"btn"}," Nova Sala ")])]),u("div",YP,[u("table",JP,[t[15]||(t[15]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Google Meet"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(o.paginatedRooms,c=>(v(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",XP,P(c.name),1),u("td",QP,[c.google_meet_link?(v(),w("a",{key:0,href:c.google_meet_link,class:"text-blue-600 underline",target:"_blank"}," Link ",8,ZP)):V("",!0)]),u("td",tT,[u("button",{onClick:d=>o.handleDeleteRoom(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,eT)])]))),128)),o.filteredRooms.length===0?(v(),w("tr",sT,t[14]||(t[14]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"}," Nenhuma sala encontrada ",-1)]))):V("",!0)])]),u("div",nT,[u("button",{class:"px-3 py-1 border rounded",onClick:t[4]||(t[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,iT),u("span",oT,"Página "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:t[5]||(t[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Próxima ",8,rT)])])]),i.showModal?(v(),ue(l,{key:1,onClose:o.closeModal},{default:tt(()=>[t[20]||(t[20]=u("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Sala",-1)),u("form",{onSubmit:t[11]||(t[11]=Qt((...c)=>o.handleAddRoom&&o.handleAddRoom(...c),["prevent"])),class:"space-y-6"},[u("div",null,[t[16]||(t[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.form.name]])]),u("div",null,[t[17]||(t[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Link do Google Meet",-1)),u("div",aT,[T(u("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=c=>i.form.googleMeetLink=c),class:"flex-grow px-4 py-2 border rounded-md"},null,512),[[L,i.form.googleMeetLink]]),u("button",{type:"button",onClick:t[8]||(t[8]=(...c)=>o.generateMeetLink&&o.generateMeetLink(...c)),class:"btn"},"Gerar"),u("button",{type:"button",onClick:t[9]||(t[9]=(...c)=>o.pasteFromClipboard&&o.pasteFromClipboard(...c)),class:"btn"},"Paste")]),t[18]||(t[18]=u("p",{class:"text-xs text-gray-500 mt-2"}," Após abrir a nova aba, copie o link da reunião e cole no campo acima. ",-1))]),u("div",lT,[u("button",{type:"button",onClick:t[10]||(t[10]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[19]||(t[19]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[20]},8,["onClose"])):V("",!0)])])}const dT=mt(VP,[["render",cT]]),uT={name:"Comprovantes",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],receipts:[],clients:[],showGenerateModal:!1,generateForm:{clientId:"",startDate:"",endDate:"",templateId:""},receiptContent:null}},methods:{formatDateBR:be,closeGenerateModal(){this.showGenerateModal=!1,this.generateForm={clientId:"",startDate:"",endDate:"",templateId:""}},getClientName(e){const t=this.clients.find(s=>s.id===e);return t?t.name:""},showReceipt(e){this.receiptContent=e},async handleGenerate(){const{data:e}=await F.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.generateForm.clientId).gte("date",this.generateForm.startDate).lte("date",this.generateForm.endDate).order("date",{ascending:!0}).order("time",{ascending:!0}),t=this.templates.find(a=>a.id===this.generateForm.templateId),s=this.clients.find(a=>a.id===this.generateForm.clientId);let n=t?t.content:"";s&&(n=n.replace("{{client_name}}",s.name));const i=(e||[]).map(a=>`- ${be(a.date)} ${a.time}`).join(`
`);n=n.replace("{{appointments}}",i);const{data:o,error:r}=await F.from("receipts").insert({user_id:this.userId,client_id:this.generateForm.clientId,template_id:this.generateForm.templateId,start_date:this.generateForm.startDate,end_date:this.generateForm.endDate,content:n}).select().single();r?alert("Erro ao gerar comprovante: "+r.message):(this.receipts.push(o),this.closeGenerateModal())}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("clients").select().eq("user_id",this.userId);t&&(this.clients=t);const{data:s}=await F.from("receipt_templates").select().eq("user_id",this.userId);s&&(this.templates=s);const{data:n}=await F.from("receipts").select().eq("user_id",this.userId).order("created_at",{ascending:!1});n&&(this.receipts=n)}},hT={class:"min-h-screen flex bg-gray-100 relative"},fT={class:"flex-1 p-4 md:p-8 space-y-6"},pT={key:0,class:"flex items-center mb-4"},mT={class:"bg-white p-4 rounded-lg shadow space-y-4"},gT={class:"flex justify-between items-center"},bT={class:"overflow-x-auto"},yT={class:"min-w-full text-left"},xT={class:"px-4 py-2"},_T={class:"px-4 py-2"},vT={class:"px-4 py-2"},wT={class:"px-4 py-2 text-right"},kT=["onClick"],ST={key:0},CT=["value"],MT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},AT=["value"],PT={class:"flex justify-end space-x-2"},TT={class:"border rounded-md p-4 bg-gray-50"},ET={class:"whitespace-pre-wrap font-mono text-sm"};function OT(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return v(),w("div",hT,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",fT,[i.sidebarOpen?V("",!0):(v(),w("div",pT,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[10]||(t[10]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Comprovantes"}),u("section",mT,[u("div",gT,[t[11]||(t[11]=u("h3",{class:"text-lg font-medium"},"Comprovantes Gerados",-1)),u("button",{onClick:t[2]||(t[2]=c=>i.showGenerateModal=!0),class:"btn"},"Novo Comprovante")]),u("div",bT,[u("table",yT,[t[13]||(t[13]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Criado em"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(i.receipts,c=>(v(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",xT,P(o.getClientName(c.client_id)),1),u("td",_T,P(o.formatDateBR(c.start_date))+" - "+P(o.formatDateBR(c.end_date)),1),u("td",vT,P(o.formatDateBR(c.created_at.split("T")[0])),1),u("td",wT,[u("button",{onClick:d=>o.showReceipt(c.content),class:"btn btn-sm"},"Ver",8,kT)])]))),128)),i.receipts.length===0?(v(),w("tr",ST,t[12]||(t[12]=[u("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum comprovante",-1)]))):V("",!0)])])])]),i.showGenerateModal?(v(),ue(l,{key:1,onClose:o.closeGenerateModal},{default:tt(()=>[t[21]||(t[21]=u("h3",{class:"text-lg font-semibold mb-4"},"Novo Comprovante",-1)),u("form",{onSubmit:t[8]||(t[8]=Qt((...c)=>o.handleGenerate&&o.handleGenerate(...c),["prevent"])),class:"space-y-4"},[u("div",null,[t[15]||(t[15]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),T(u("select",{"onUpdate:modelValue":t[3]||(t[3]=c=>i.generateForm.clientId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[14]||(t[14]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.clients,c=>(v(),w("option",{key:c.id,value:c.id},P(c.name),9,CT))),128))],512),[[Ae,i.generateForm.clientId]])]),u("div",MT,[u("div",null,[t[16]||(t[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"De",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=c=>i.generateForm.startDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.generateForm.startDate]])]),u("div",null,[t[17]||(t[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Até",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=c=>i.generateForm.endDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.generateForm.endDate]])])]),u("div",null,[t[19]||(t[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Template",-1)),T(u("select",{"onUpdate:modelValue":t[6]||(t[6]=c=>i.generateForm.templateId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[t[18]||(t[18]=u("option",{disabled:"",value:""},"Selecione",-1)),(v(!0),w(Y,null,ft(i.templates,c=>(v(),w("option",{key:c.id,value:c.id},P(c.name),9,AT))),128))],512),[[Ae,i.generateForm.templateId]])]),u("div",PT,[u("button",{type:"button",onClick:t[7]||(t[7]=(...c)=>o.closeGenerateModal&&o.closeGenerateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[20]||(t[20]=u("button",{type:"submit",class:"btn"},"Gerar",-1))])],32)]),_:1,__:[21]},8,["onClose"])):V("",!0),i.receiptContent?(v(),ue(l,{key:2,onClose:t[9]||(t[9]=c=>i.receiptContent=null)},{default:tt(()=>[t[22]||(t[22]=u("h3",{class:"text-lg font-semibold text-center mb-4"},"Comprovante",-1)),u("div",TT,[u("pre",ET,P(i.receiptContent),1)])]),_:1,__:[22]})):V("",!0)])])}const DT=mt(uT,[["render",OT]]),IT={name:"Atendimento",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"current",appointment:null,note:"",files:[],notes:[],userId:null,isEditing:!1,editingNoteId:null,editingAttachments:[]}},computed:{appointmentDateTime(){return this.appointment?`${be(this.appointment.date)} ${an(this.appointment.time)}`:""},groupedNotes(){const e={};return this.notes.forEach(t=>{const s=t.created_at.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).sort((t,s)=>new Date(s)-new Date(t)).map(t=>({date:be(t),items:e[t]}))}},methods:{formatDateTime(e){return new Date(e).toLocaleString("pt-BR")},handleFileChange(e){const t=["pdf","doc","txt","png","jpeg","jpg"],s=Array.from(e.target.files);this.files=[];for(const n of s){const i=n.name.split(".").pop().toLowerCase();t.includes(i)?this.files.push(n):alert(`Formato de arquivo não permitido: ${n.name}`)}},editExistingNote(e,t=!0){(this.note&&this.note.trim()||this.files.length)&&!confirm("Dados não salvos serão perdidos. Deseja continuar?")||(this.isEditing=!0,this.editingNoteId=e.id,this.editingAttachments=[...e.attachments||[]],this.note=e.note,this.files=[],t&&(this.activeTab="current"))},cancelEdit(){this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],this.note="",this.files=[]},async removeAttachment(e){if(!confirm("Remover este anexo?"))return;const n=this.editingAttachments[e].split("/appointment-attachments/");if(n.length===2){const i=n[1];await F.storage.from("appointment-attachments").remove([i])}this.editingAttachments.splice(e,1)},async fetchData(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("appointments").select().eq("id",this.$route.params.id).single();this.appointment=t;let s=[this.$route.params.id];if(t){const{data:o}=await F.from("appointments").select("id").eq("user_id",this.userId).eq("client_id",t.client_id);s=o?o.map(r=>r.id):s}const{data:n}=await F.from("appointment_notes").select().in("appointment_id",s).order("created_at",{ascending:!1});this.notes=(n||[]).map(o=>({...o,attachments:o.attachments||[]}));const i=this.$route.query.note;if(i){const o=this.notes.find(r=>r.id===Number(i)||r.id===i);o&&this.editExistingNote(o)}},async saveNote(){if(!this.note.trim()&&!this.files.length&&!this.editingAttachments.length)return;const e=[];for(const n of this.files){const i=n.name.split(".").pop(),o=`${this.$route.params.id}-${Date.now()}-${Math.random().toString(36).slice(2)}.${i}`,{error:r}=await F.storage.from("appointment-attachments").upload(o,n);if(!r){const{data:{publicUrl:a}}=F.storage.from("appointment-attachments").getPublicUrl(o);e.push(a)}}let t,s;if(this.isEditing){const n=[...this.editingAttachments,...e];if({data:t,error:s}=await F.from("appointment_notes").update({note:this.note,attachments:n}).eq("id",this.editingNoteId).select().single(),!s){const i=this.notes.findIndex(o=>o.id===this.editingNoteId);i!==-1&&(this.notes[i]={...t,attachments:t.attachments||[]})}}else({data:t,error:s}=await F.from("appointment_notes").insert({appointment_id:this.$route.params.id,user_id:this.userId,note:this.note,attachments:e}).select().single()),s||this.notes.unshift({...t,attachments:t.attachments||[]});s?alert("Erro ao salvar atendimento: "+s.message):(this.note="",this.files=[],this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[])}},watch:{"$route.params.id"(){this.fetchData()},"$route.query.note"(e){if(!e){this.isEditing&&this.cancelEdit();return}const t=this.notes.find(s=>s.id===Number(e)||s.id===e);t&&this.editExistingNote(t)}},async mounted(){await this.fetchData()}},RT={class:"min-h-screen flex bg-gray-100 relative"},LT={class:"flex-1 p-4 md:p-8"},FT={key:0,class:"flex items-center mb-4"},jT={class:"bg-white p-4 rounded-lg shadow mt-4"},NT={class:"border-b mb-4"},UT={class:"flex space-x-4"},$T={key:0},BT={class:"mb-2 text-sm text-gray-600"},VT={key:0,class:"mb-4 space-y-1"},HT=["href"],zT=["onClick"],WT={class:"space-x-2"},qT={key:1},KT={class:"font-semibold mb-2"},GT={class:"text-sm text-gray-600 mb-1"},YT={class:"mb-2 whitespace-pre-line"},JT={key:0,class:"space-x-2 mb-2"},XT=["href"],QT={class:"text-right"},ZT=["onClick"];function tE(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return v(),w("div",RT,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",LT,[i.sidebarOpen?V("",!0):(v(),w("div",FT,[u("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[8]||(t[8]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Atendimento"}),u("section",jT,[u("div",NT,[u("nav",UT,[u("button",{class:ie(i.activeTab==="current"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[2]||(t[2]=l=>i.activeTab="current")},"Atendimento",2),u("button",{class:ie(i.activeTab==="history"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:t[3]||(t[3]=l=>i.activeTab="history")},"Histórico de atendimento",2)])]),i.activeTab==="current"?(v(),w("div",$T,[u("p",BT,"Data/hora: "+P(o.appointmentDateTime),1),T(u("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.note=l),class:"w-full border rounded p-2 mb-4",rows:"6",placeholder:"Descreva o atendimento"},null,512),[[L,i.note]]),i.isEditing&&i.editingAttachments.length?(v(),w("div",VT,[(v(!0),w(Y,null,ft(i.editingAttachments,(l,c)=>(v(),w("div",{key:c,class:"flex items-center space-x-2"},[u("a",{href:l,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(c+1),9,HT),u("button",{type:"button",onClick:d=>o.removeAttachment(c),class:"text-red-600 text-sm"},"Remover",8,zT)]))),128))])):V("",!0),u("input",{type:"file",multiple:"",onChange:t[5]||(t[5]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),class:"mb-4",accept:".pdf,.doc,.txt,.png,.jpeg,.jpg"},null,32),u("div",WT,[u("button",{onClick:t[6]||(t[6]=(...l)=>o.saveNote&&o.saveNote(...l)),class:"btn"},P(i.isEditing?"Atualizar":"Salvar"),1),i.isEditing?(v(),w("button",{key:0,onClick:t[7]||(t[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-danger"},"Cancelar")):V("",!0)])])):(v(),w("div",qT,[(v(!0),w(Y,null,ft(o.groupedNotes,l=>(v(),w("div",{key:l.date,class:"mb-4"},[u("h4",KT,P(l.date),1),(v(!0),w(Y,null,ft(l.items,c=>(v(),w("div",{key:c.id,class:"border p-2 rounded mb-2"},[u("p",GT,P(o.formatDateTime(c.created_at)),1),u("p",YT,P(c.note),1),c.attachments&&c.attachments.length?(v(),w("div",JT,[(v(!0),w(Y,null,ft(c.attachments,(d,h)=>(v(),w("a",{key:h,href:d,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(h+1),9,XT))),128))])):V("",!0),u("div",QT,[u("button",{onClick:d=>o.editExistingNote(c),class:"btn btn-sm"},"Editar atendimento",8,ZT)])]))),128))]))),128))]))])])])}const eE=mt(IT,[["render",tE]]),sE={name:"Templates",components:{Sidebar:Pe,HeaderUser:Te,Modal:zs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],showTemplateModal:!1,templateForm:{name:"",content:""}}},methods:{closeTemplateModal(){this.showTemplateModal=!1,this.templateForm={name:"",content:""}},async handleAddTemplate(){const{data:e,error:t}=await F.from("receipt_templates").insert({name:this.templateForm.name,content:this.templateForm.content,user_id:this.userId}).select().single();t?alert("Erro ao salvar template: "+t.message):(this.templates.push(e),this.closeTemplateModal())}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id;const{data:t}=await F.from("receipt_templates").select().eq("user_id",this.userId);t&&(this.templates=t)}},nE={class:"min-h-screen flex bg-gray-100 relative"},iE={class:"flex-1 p-4 md:p-8 space-y-6"},oE={key:0,class:"flex items-center mb-4"},rE={class:"bg-white p-4 rounded-lg shadow space-y-4"},aE={class:"flex justify-between items-center"},lE={class:"overflow-x-auto"},cE={class:"min-w-full text-left"},dE={class:"px-4 py-2"},uE={key:0},hE={class:"flex justify-end space-x-2"};function fE(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return v(),w("div",nE,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",iE,[i.sidebarOpen?V("",!0):(v(),w("div",oE,[u("button",{onClick:t[1]||(t[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[7]||(t[7]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Templates"}),u("section",rE,[u("div",aE,[t[8]||(t[8]=u("h3",{class:"text-lg font-medium"},"Templates",-1)),u("button",{onClick:t[2]||(t[2]=c=>i.showTemplateModal=!0),class:"btn"},"Novo Template")]),u("div",lE,[u("table",cE,[t[10]||(t[10]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome")])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(i.templates,c=>(v(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",dE,P(c.name),1)]))),128)),i.templates.length===0?(v(),w("tr",uE,t[9]||(t[9]=[u("td",{class:"px-4 py-6 text-center text-gray-500"},"Nenhum template",-1)]))):V("",!0)])])])]),i.showTemplateModal?(v(),ue(l,{key:1,onClose:o.closeTemplateModal},{default:tt(()=>[t[15]||(t[15]=u("h3",{class:"text-lg font-semibold mb-4"},"Novo Template",-1)),u("form",{onSubmit:t[6]||(t[6]=Qt((...c)=>o.handleAddTemplate&&o.handleAddTemplate(...c),["prevent"])),class:"space-y-4"},[u("div",null,[t[11]||(t[11]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=c=>i.templateForm.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.templateForm.name]])]),u("div",null,[t[12]||(t[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Conteúdo",-1)),T(u("textarea",{"onUpdate:modelValue":t[4]||(t[4]=c=>i.templateForm.content=c),class:"w-full mt-1 px-4 py-2 border rounded-md",rows:"4"},null,512),[[L,i.templateForm.content]]),t[13]||(t[13]=u("p",{class:"text-sm text-gray-500 mt-1"},"Use {{client_name}} e {{appointments}}",-1))]),u("div",hE,[u("button",{type:"button",onClick:t[5]||(t[5]=(...c)=>o.closeTemplateModal&&o.closeTemplateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),t[14]||(t[14]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[15]},8,["onClose"])):V("",!0)])])}const pE=mt(sE,[["render",fE]]),mE={name:"Contato",components:{Navbar:ze,Footer:We},data(){return{nome:"",email:"",mensagem:"",sucesso:!1,erro:""}},methods:{async enviar(){if(this.sucesso=!1,this.erro="",this.email&&!ns(this.email)){this.erro="E-mail inválido";return}const{error:e}=await F.from("contacts").insert({name:this.nome,email:this.email,message:this.mensagem});e?this.erro="Erro ao enviar mensagem: "+e.message:(this.sucesso=!0,this.nome="",this.email="",this.mensagem="")}}},gE={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},bE={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},yE={key:0,class:"mt-4 text-green-600 text-center"},xE={key:1,class:"mt-4 text-red-600 text-center"};function _E(e,t,s,n,i,o){const r=z("Navbar"),a=z("Footer");return v(),w(Y,null,[O(r),u("section",gE,[u("div",bE,[t[8]||(t[8]=dn('<div class="mb-8 text-center"><h2 class="text-3xl font-extrabold text-blue-700">Fale conosco</h2><p class="text-gray-500">Envie sua mensagem e entraremos em contato</p></div><div class="mb-6 text-center"><a href="https://wa.me/5518996233098" target="_blank" rel="noopener" class="btn btn-success inline-flex items-center space-x-2"><img src="'+fp+'" alt="WhatsApp" class="w-5 h-5"><span>Falar via WhatsApp</span></a></div>',2)),u("form",{onSubmit:t[3]||(t[3]=Qt((...l)=>o.enviar&&o.enviar(...l),["prevent"])),class:"space-y-5"},[u("div",null,[t[4]||(t[4]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"nome"},"Nome",-1)),T(u("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.nome=l),id:"nome",type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.nome]])]),u("div",null,[t[5]||(t[5]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),T(u("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.email=l),id:"email",type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]])]),u("div",null,[t[6]||(t[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"mensagem"},"Mensagem",-1)),T(u("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.mensagem=l),id:"mensagem",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4"},null,512),[[L,i.mensagem]])]),t[7]||(t[7]=u("button",{type:"submit",class:"btn w-full"},"Enviar",-1))],32),i.sucesso?(v(),w("p",yE,"Mensagem enviada com sucesso!")):V("",!0),i.erro?(v(),w("p",xE,P(i.erro),1)):V("",!0)])]),O(a)],64)}const vE=mt(mE,[["render",_E]]),wE={name:"MinhaAssinatura",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768}},methods:{goBeta(){this.$router.push({path:"/assinatura-plus",query:{amount:"167.97"}})},goBasico(){this.$router.push("/dashboard")}}},kE={class:"min-h-screen flex bg-gray-100 relative"},SE={class:"flex-1 p-4 md:p-8 space-y-6"},CE={key:0,class:"flex items-center mb-4"},ME={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},AE={class:"bg-white p-6 rounded-lg shadow space-y-4"},PE={class:"bg-white p-6 rounded-lg shadow space-y-4"};function TE(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return v(),w("div",kE,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",SE,[i.sidebarOpen?V("",!0):(v(),w("div",CE,[u("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[4]||(t[4]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Minha Assinatura"}),u("section",ME,[u("div",AE,[t[5]||(t[5]=dn('<h3 class="text-xl font-semibold text-center">Básico</h3><p class="text-center text-2xl font-bold text-blue-600">Grátis</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de até 5 pacientes</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),u("button",{class:"btn mt-4 w-full",onClick:t[2]||(t[2]=(...l)=>o.goBasico&&o.goBasico(...l))},"Escolher")]),u("div",PE,[t[6]||(t[6]=dn('<h3 class="text-xl font-semibold text-center">Beta</h3><p class="text-center text-2xl font-bold line-through text-gray-400">R$167,97</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de pacientes ilimitado</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),u("button",{class:"btn mt-4 w-full",onClick:t[3]||(t[3]=(...l)=>o.goBeta&&o.goBeta(...l))},"Escolher")])])])])}const EE=mt(wE,[["render",TE]]),OE={name:"Faturamento",components:{Sidebar:Pe,HeaderUser:Te},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,services:[],selectedServices:[],filterStart:"",filterEnd:"",groupBy:"mes",revenueData:[],chart:null}},methods:{async fetchServices(){const{data:e}=await F.from("services").select().eq("user_id",this.userId);this.services=e||[],this.selectedServices=this.services.map(t=>t.id)},async fetchRevenue(){if(!this.filterStart||!this.filterEnd)return;const{data:e}=await F.from("appointments").select("date, service_id").eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd),t=e||[],s={};this.services.forEach(o=>{s[o.id]=Number(o.price)||0});const n=this.selectedServices.length?t.filter(o=>this.selectedServices.includes(o.service_id)):t,i={};n.forEach(o=>{const r=new Date(o.date);let a="";if(this.groupBy==="dia")a=r.toISOString().split("T")[0];else if(this.groupBy==="semana"){const c=this.getWeekNumber(r);a=`${r.getFullYear()}-W${c}`}else a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`;const l=s[o.service_id]||0;i[a]=(i[a]||0)+l}),this.revenueData=Object.keys(i).sort().map(o=>({label:o,total:i[o]})),this.renderChart()},getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);const n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-n)/864e5+1)/7)},renderChart(){const e=this.$refs.chartCanvas.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new ts(e,{type:"bar",data:{labels:this.revenueData.map(t=>this.formatLabel(t.label)),datasets:[{label:"Faturamento",data:this.revenueData.map(t=>t.total),backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},formatPrice(e){return Number(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatLabel(e){if(this.groupBy==="dia")return be(e);if(this.groupBy==="semana"){const[t,s]=e.split("-W");return`Semana ${s}/${t}`}if(this.groupBy==="mes"){const[t,s]=e.split("-");return`${s.padStart(2,"0")}/${t}`}return e}},async mounted(){const{data:{user:e}}=await F.auth.getUser();if(!e){this.$router.push("/login");return}this.userId=e.id,await this.fetchServices();const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);this.filterStart=s.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0]}},DE={class:"min-h-screen flex bg-gray-100 relative"},IE={class:"flex-1 p-4 md:p-8 space-y-6"},RE={key:0,class:"flex items-center mb-4"},LE={class:"bg-white p-4 rounded-lg shadow space-y-4"},FE={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},jE={class:"mt-1 space-y-1"},NE=["value"],UE={class:"md:col-span-2"},$E={class:"grid grid-cols-2 gap-2 mt-1"},BE={class:"flex flex-col mt-3"},VE={class:"flex justify-end"},HE={class:"bg-white p-4 rounded-lg shadow space-y-4"},zE={class:"overflow-x-auto"},WE={class:"min-w-full text-left"},qE={class:"px-4 py-2"},KE={class:"px-4 py-2"},GE={key:0},YE={class:"h-64"},JE={ref:"chartCanvas",class:"w-full h-full"};function XE(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return v(),w("div",DE,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",IE,[i.sidebarOpen?V("",!0):(v(),w("div",RE,[u("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[7]||(t[7]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Relatório de Faturamento"}),u("section",LE,[u("div",FE,[u("div",null,[t[8]||(t[8]=u("label",{class:"block text-sm font-medium text-gray-700"},"Serviços",-1)),u("div",jE,[(v(!0),w(Y,null,ft(i.services,l=>(v(),w("label",{key:l.id,class:"flex items-center space-x-2"},[T(u("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":t[2]||(t[2]=c=>i.selectedServices=c)},null,8,NE),[[hl,i.selectedServices]]),u("span",null,P(l.name),1)]))),128))])]),u("div",UE,[t[13]||(t[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Datas",-1)),u("div",$E,[u("div",null,[t[9]||(t[9]=u("label",{class:"block text-xs font-medium text-gray-700"},"De",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=l=>i.filterStart=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.filterStart]])]),u("div",null,[t[10]||(t[10]=u("label",{class:"block text-xs font-medium text-gray-700"},"Até",-1)),T(u("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=l=>i.filterEnd=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.filterEnd]])])]),u("div",BE,[t[12]||(t[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),T(u("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>i.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},t[11]||(t[11]=[u("option",{value:"mes"},"Mês",-1),u("option",{value:"semana"},"Semana",-1),u("option",{value:"dia"},"Dia",-1)]),512),[[Ae,i.groupBy]])])])]),u("div",VE,[u("button",{onClick:t[6]||(t[6]=(...l)=>o.fetchRevenue&&o.fetchRevenue(...l)),class:"btn"},"Aplicar")])]),u("section",HE,[u("div",zE,[u("table",WE,[t[15]||(t[15]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Faturamento")])],-1)),u("tbody",null,[(v(!0),w(Y,null,ft(i.revenueData,l=>(v(),w("tr",{key:l.label,class:"border-b last:border-b-0"},[u("td",qE,P(o.formatLabel(l.label)),1),u("td",KE,P(o.formatPrice(l.total)),1)]))),128)),i.revenueData.length===0?(v(),w("tr",GE,t[14]||(t[14]=[u("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):V("",!0)])])]),u("div",YE,[u("canvas",JE,null,512)])])])])}const QE=mt(OE,[["render",XE]]),ZE={name:"Faq",components:{Navbar:ze,Footer:We},data(){return{faqs:[{question:"Como me cadastro?",answer:'Clique em "Cadastre-se" no menu e preencha o formulário.'},{question:"Posso cancelar a qualquer momento?",answer:"Sim, você pode cancelar seu plano a hora que quiser sem taxas adicionais."},{question:"Como entro em contato com o suporte?",answer:"Utilize a página de contato para nos enviar sua mensagem."}]}}},tO={class:"min-h-screen flex flex-col bg-gray-100"},eO={class:"flex-1 max-w-3xl mx-auto p-8"},sO={class:"space-y-6"},nO={class:"font-semibold text-blue-600 mb-2"},iO={class:"text-gray-700"};function oO(e,t,s,n,i,o){const r=z("Navbar"),a=z("Footer");return v(),w(Y,null,[O(r),u("div",tO,[u("main",eO,[t[0]||(t[0]=u("h1",{class:"text-3xl font-bold text-center mb-8"},"Perguntas Frequentes",-1)),u("div",sO,[(v(!0),w(Y,null,ft(i.faqs,(l,c)=>(v(),w("div",{key:c,class:"bg-white p-6 rounded-lg shadow"},[u("h2",nO,P(l.question),1),u("p",iO,P(l.answer),1)]))),128))])]),O(a)])],64)}const rO=mt(ZE,[["render",oO]]),aO={name:"PoliticaPrivacidade",components:{Navbar:ze,Footer:We}};function lO(e,t,s,n,i,o){const r=z("Navbar"),a=z("Footer");return v(),w(Y,null,[O(r),t[0]||(t[0]=u("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[u("h1",{class:"text-3xl font-bold text-center mb-4"},"Política de Privacidade"),u("p",null,"Esta política descreve como tratamos seus dados pessoais e garante a transparência sobre o uso das suas informações."),u("p",null,"Utilizamos seus dados apenas para prover nossos serviços de agendamento e nunca os compartilhamos com terceiros sem consentimento."),u("p",null,"Ao utilizar o Agenda Zen você concorda com esta política. Em caso de dúvidas entre em contato conosco.")],-1)),O(a)],64)}const cO=mt(aO,[["render",lO]]),dO={name:"TermosDeUso",components:{Navbar:ze,Footer:We}};function uO(e,t,s,n,i,o){const r=z("Navbar"),a=z("Footer");return v(),w(Y,null,[O(r),t[0]||(t[0]=u("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[u("h1",{class:"text-3xl font-bold text-center mb-4"},"Termos de Uso"),u("p",null,"Estes termos definem as regras para utilização da plataforma Agenda Zen. Ao criar uma conta você concorda em segui-los."),u("p",null,"O serviço deve ser utilizado apenas para atividades lícitas e em conformidade com a legislação vigente. Contas que violem estas condições poderão ser suspensas."),u("p",null,"Podemos atualizar estes termos periodicamente. Avisaremos sobre mudanças importantes diretamente no site.")],-1)),O(a)],64)}const hO=mt(dO,[["render",uO]]);function wn(e,t){const s=String(t.length).padStart(2,"0");return`${e}${s}${t}`}function fO(e){let t=65535;for(let s=0;s<e.length;s++){t^=e.charCodeAt(s)<<8;for(let n=0;n<8;n++)t&32768?t=t<<1^4129:t<<=1,t&=65535}return t.toString(16).toUpperCase().padStart(4,"0")}function pO({key:e,name:t,city:s="SAO PAULO",amount:n,txid:i="AGENDAZEN"}){const o=t.slice(0,25),r=wn("00","BR.GOV.BCB.PIX")+wn("01",e),a=wn("05",i),l="00020101021126"+String(r.length).padStart(2,"0")+r+"520400005303986"+(n?wn("54",n):"")+"5802BR"+wn("59",o)+wn("60",s)+"62"+String(a.length).padStart(2,"0")+a+"6304",c=fO(l);return l+c}const mO="/icons/visa.svg",gO="/icons/mastercard.svg",bO="/icons/amex.svg",yO="/icons/elo.svg",xO="/logo_pix.png",_O={name:"PagamentoPlus",components:{Sidebar:Pe,HeaderUser:Te},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"pix",card:{name:"",number:"",expiry:"",cvv:"",document:""},billing:{cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""},pixAmount:"167.97",pixCode:"",pixQrCode:""}},mounted(){const e=this.$route.query.amount;e&&(this.pixAmount=e),this.generatePix()},methods:{generatePix(){const e=pO({key:"37775989840",name:"Jeferson Carlos A de Paula",amount:this.pixAmount});this.pixCode=e,this.pixQrCode="https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl="+encodeURIComponent(e)}}},vO={class:"min-h-screen flex bg-gray-100 relative"},wO={class:"flex-1 p-8 space-y-6"},kO={key:0,class:"flex items-center mb-4"},SO={class:"mb-6 space-x-2"},CO={key:1,class:"space-y-6 max-w-3xl"},MO={class:"grid grid-cols-2 gap-4"},AO={class:"space-y-4 mt-4"},PO={class:"grid grid-cols-2 gap-4"},TO={class:"grid grid-cols-2 gap-4"},EO={key:2,class:"space-y-6 max-w-3xl"},OO={class:"text-center space-y-4"},DO=["src"],IO={class:"text-lg font-semibold"};function RO(e,t,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return v(),w("div",vO,[O(r,{"is-open":i.sidebarOpen,onClose:t[0]||(t[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",wO,[i.sidebarOpen?V("",!0):(v(),w("div",kO,[u("button",{onClick:t[1]||(t[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},t[17]||(t[17]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Pagamento"}),u("nav",SO,[u("button",{onClick:t[2]||(t[2]=l=>i.activeTab="cartao"),class:ie([i.activeTab==="cartao"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Cartão de Crédito",2),u("button",{onClick:t[3]||(t[3]=l=>i.activeTab="pix"),class:ie([i.activeTab==="pix"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Pix",2)]),i.activeTab==="cartao"?(v(),w("section",CO,[t[31]||(t[31]=dn('<div class="flex justify-center space-x-2 mb-4"><img src="'+mO+'" alt="Visa" class="h-8"><img src="'+gO+'" alt="Mastercard" class="h-8"><img src="'+bO+'" alt="American Express" class="h-8"><img src="'+yO+'" alt="Elo" class="h-8"></div>',1)),u("div",null,[t[18]||(t[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome (igual no cartão)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>i.card.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.name]])]),u("div",null,[t[19]||(t[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Número do cartão",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>i.card.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.number]])]),u("div",MO,[u("div",null,[t[20]||(t[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Validade (MM/AA)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>i.card.expiry=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.expiry]])]),u("div",null,[t[21]||(t[21]=u("label",{class:"block text-sm font-medium text-gray-700"},"Código de Segurança (CVV)",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>i.card.cvv=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.cvv]])])]),u("div",null,[t[22]||(t[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF/CNPJ",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=l=>i.card.document=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.card.document]])]),u("div",AO,[t[30]||(t[30]=u("h3",{class:"text-md font-semibold"},"Endereço de cobrança",-1)),u("div",null,[t[23]||(t[23]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=l=>i.billing.cep=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.cep]])]),u("div",null,[t[24]||(t[24]=u("label",{class:"block text-sm font-medium text-gray-700"},"Rua",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>i.billing.street=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.street]])]),u("div",PO,[u("div",null,[t[25]||(t[25]=u("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=l=>i.billing.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.number]])]),u("div",null,[t[26]||(t[26]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>i.billing.complement=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.complement]])])]),u("div",null,[t[27]||(t[27]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=l=>i.billing.neighborhood=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.neighborhood]])]),u("div",TO,[u("div",null,[t[28]||(t[28]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=l=>i.billing.city=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.city]])]),u("div",null,[t[29]||(t[29]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=l=>i.billing.state=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[L,i.billing.state]])])])]),t[32]||(t[32]=u("div",{class:"text-right mt-4"},[u("button",{class:"btn"},"Pagar")],-1))])):V("",!0),i.activeTab==="pix"?(v(),w("section",EO,[u("div",OO,[t[33]||(t[33]=u("img",{src:xO,alt:"Logo Pix",class:"mx-auto w-[17.6rem] h-auto"},null,-1)),i.pixQrCode?(v(),w("img",{key:0,src:i.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,DO)):V("",!0),t[34]||(t[34]=u("p",{class:"font-semibold"},"Código de pagamento",-1)),t[35]||(t[35]=u("p",null,"Copie e cole o código abaixo no app da sua instituição financeira para finalizar a compra.",-1)),T(u("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=l=>i.pixCode=l),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[L,i.pixCode]]),t[36]||(t[36]=u("p",{class:"font-semibold"},"Valor do pagamento",-1)),u("p",IO,"R$ "+P(i.pixAmount.replace(".",",")),1)])])):V("",!0)])])}const LO=mt(_O,[["render",RO]]),FO={name:"Confirmacao",components:{Navbar:ze,Footer:We}},jO={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},NO={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},UO={class:"flex justify-center space-x-4"};function $O(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("section",jO,[u("div",NO,[t[2]||(t[2]=u("img",{src:as,alt:"Sucesso",class:"w-16 h-16 mx-auto text-green-500"},null,-1)),t[3]||(t[3]=u("h1",{class:"text-2xl font-bold text-green-600"},"Cadastro efetuado com sucesso",-1)),u("div",UO,[O(a,{to:"/",class:"btn inline-block"},{default:tt(()=>t[0]||(t[0]=[st("Início")])),_:1,__:[0]}),O(a,{to:"/login",class:"btn inline-block"},{default:tt(()=>t[1]||(t[1]=[st("Login")])),_:1,__:[1]})])])]),O(l)],64)}const BO=mt(FO,[["render",$O]]),VO="/icons/error.svg",HO={name:"LinkExpirado",components:{Navbar:ze,Footer:We},data(){return{email:""}},methods:{async reenviarLink(){if(!ns(this.email)){alert("E-mail inválido");return}const{error:e}=await F.auth.resend({type:"signup",email:this.email});alert(e?"Erro ao reenviar link: "+e.message:"Link reenviado! Verifique seu e-mail.")}}},zO={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},WO={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},qO={class:"flex justify-center space-x-4"};function KO(e,t,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return v(),w(Y,null,[O(r),u("section",zO,[u("div",WO,[t[3]||(t[3]=u("img",{src:VO,alt:"Erro",class:"w-16 h-16 mx-auto text-red-500"},null,-1)),t[4]||(t[4]=u("h1",{class:"text-2xl font-bold text-red-600"},"Link expirado ou inválido",-1)),t[5]||(t[5]=u("p",{class:"text-gray-700"},"Informe seu e-mail para receber um novo link de confirmação.",-1)),T(u("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),type:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.email]]),u("div",qO,[u("button",{onClick:t[1]||(t[1]=(...c)=>o.reenviarLink&&o.reenviarLink(...c)),class:"btn"},"Reenviar link"),O(a,{to:"/",class:"btn"},{default:tt(()=>t[2]||(t[2]=[st("Início")])),_:1,__:[2]})])])]),O(l)],64)}const GO=mt(HO,[["render",KO]]),YO=[{path:"/",name:"Home",component:v0},{path:"/cadastro",name:"Signup",component:Wx},{path:"/confirmacao",name:"Confirmacao",component:BO},{path:"/link-expirado",name:"LinkExpirado",component:GO},{path:"/login",name:"Login",component:Qx},{path:"/onboarding",name:"Onboarding",component:b_},{path:"/dashboard",name:"Dashboard",component:BS},{path:"/configuracao",name:"Configuracao",component:rC},{path:"/clientes",name:"Clientes",component:aM},{path:"/servicos",name:"Servicos",component:AA},{path:"/salas",name:"Salas",component:dT},{path:"/agendamentos",name:"Agendamentos",component:sA},{path:"/comprovantes",name:"Comprovantes",component:DT},{path:"/templates",name:"Templates",component:pE},{path:"/usuarios",name:"Usuarios",component:JA},{path:"/minha-assinatura",name:"MinhaAssinatura",component:EE},{path:"/assinatura-plus",name:"PagamentoPlus",component:LO},{path:"/faturamento",name:"Faturamento",component:QE},{path:"/buscar",name:"SearchProfiles",component:aP},{path:"/planos",name:"Planos",component:BP},{path:"/contato",name:"Contato",component:vE},{path:"/faq",name:"Faq",component:rO},{path:"/politica-de-privacidade",name:"PoliticaDePrivacidade",component:cO},{path:"/termos-de-uso",name:"TermosDeUso",component:hO},{path:"/atendimento/:id",name:"Atendimento",component:eE},{path:"/:slug",name:"PublicPage",component:FP}],Wn=Wb({history:_b(),routes:YO});Wn.beforeEach(async(e,t,s)=>{const{data:{user:n}}=await F.auth.getUser();if(n&&e.path!=="/onboarding"){const{data:i}=await F.from("profiles").select("onboarding_complete").eq("id",n.id).single();if(i&&!i.onboarding_complete){s("/onboarding");return}}s()});Wn.afterEach(e=>{window.gtag&&window.gtag("config","G-8DZT2EVSC7",{page_path:e.fullPath})});const JO=async()=>{var s;const e=window.location.hash.replace(/^#\/?/,""),t=new URLSearchParams(e);if(t.get("error_code")==="otp_expired"||(s=t.get("error_description"))!=null&&s.includes("Email link is invalid")){Wn.replace("/link-expirado");return}if(window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")){const n=t.get("access_token"),i=t.get("refresh_token");if(n&&i)try{await F.auth.setSession({access_token:n,refresh_token:i}),Wn.replace("/confirmacao")}catch{}}};JO();F.auth.onAuthStateChange(e=>{e==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")&&Wn.replace("/confirmacao")});Ig(Vg).use(Wn).mount("#app");export{QO as g};
