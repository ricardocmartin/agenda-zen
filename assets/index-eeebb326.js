var Cp=Object.defineProperty;var Mp=(t,e,s)=>e in t?Cp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var z=(t,e,s)=>(Mp(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function el(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Te={},Pn=[],Vt=()=>{},Ap=()=>!1,fr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),tl=t=>t.startsWith("onUpdate:"),st=Object.assign,sl=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Ep=Object.prototype.hasOwnProperty,Me=(t,e)=>Ep.call(t,e),ie=Array.isArray,Tn=t=>eo(t)==="[object Map]",Jn=t=>eo(t)==="[object Set]",Gl=t=>eo(t)==="[object Date]",ue=t=>typeof t=="function",Ye=t=>typeof t=="string",zt=t=>typeof t=="symbol",Fe=t=>t!==null&&typeof t=="object",Mu=t=>(Fe(t)||ue(t))&&ue(t.then)&&ue(t.catch),Au=Object.prototype.toString,eo=t=>Au.call(t),Pp=t=>eo(t).slice(8,-1),Eu=t=>eo(t)==="[object Object]",nl=t=>Ye(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xi=el(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Tp=/-(\w)/g,Rt=pr(t=>t.replace(Tp,(e,s)=>s?s.toUpperCase():"")),Ip=/\B([A-Z])/g,mn=pr(t=>t.replace(Ip,"-$1").toLowerCase()),mr=pr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Nr=pr(t=>t?`on${mr(t)}`:""),$s=(t,e)=>!Object.is(t,e),Do=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Pu=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Go=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yl;const gr=()=>Yl||(Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Li(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=Ye(i)?Lp(i):Li(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(Ye(t)||Fe(t))return t}const Op=/;(?![^(]*\))/g,Dp=/:([^]+)/,Rp=/\/\*[^]*?\*\//g;function Lp(t){const e={};return t.replace(Rp,"").split(Op).forEach(s=>{if(s){const i=s.split(Dp);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function $e(t){let e="";if(Ye(t))e=t;else if(ie(t))for(let s=0;s<t.length;s++){const i=$e(t[s]);i&&(e+=i+" ")}else if(Fe(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Fp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jp=el(Fp);function Tu(t){return!!t||t===""}function Up(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=to(t[i],e[i]);return s}function to(t,e){if(t===e)return!0;let s=Gl(t),i=Gl(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=zt(t),i=zt(e),s||i)return t===e;if(s=ie(t),i=ie(e),s||i)return s&&i?Up(t,e):!1;if(s=Fe(t),i=Fe(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,o=Object.keys(e).length;if(n!==o)return!1;for(const r in t){const a=t.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!to(t[r],e[r]))return!1}}return String(t)===String(e)}function il(t,e){return t.findIndex(s=>to(s,e))}const Iu=t=>!!(t&&t.__v_isRef===!0),S=t=>Ye(t)?t:t==null?"":ie(t)||Fe(t)&&(t.toString===Au||!ue(t.toString))?Iu(t)?S(t.value):JSON.stringify(t,Ou,2):String(t),Ou=(t,e)=>Iu(e)?Ou(t,e.value):Tn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],o)=>(s[Br(i,o)+" =>"]=n,s),{})}:Jn(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Br(s))}:zt(e)?Br(e):Fe(e)&&!ie(e)&&!Eu(e)?String(e):e,Br=(t,e="")=>{var s;return zt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vt;class Np{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vt,!e&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=vt;try{return vt=this,e()}finally{vt=s}}}on(){++this._on===1&&(this.prevScope=vt,vt=this)}off(){this._on>0&&--this._on===0&&(vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Bp(){return vt}let Re;const Vr=new WeakSet;class Du{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vt&&vt.active&&vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vr.has(this)&&(Vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Lu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jl(this),Fu(this);const e=Re,s=$t;Re=this,$t=!0;try{return this.fn()}finally{ju(this),Re=e,$t=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)al(e);this.deps=this.depsTail=void 0,Jl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ba(this)&&this.run()}get dirty(){return ba(this)}}let Ru=0,vi,_i;function Lu(t,e=!1){if(t.flags|=8,e){t.next=_i,_i=t;return}t.next=vi,vi=t}function ol(){Ru++}function rl(){if(--Ru>0)return;if(_i){let e=_i;for(_i=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;vi;){let e=vi;for(vi=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function Fu(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ju(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),al(i),Vp(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function ba(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Uu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Uu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Fi)||(t.globalVersion=Fi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ba(t))))return;t.flags|=2;const e=t.dep,s=Re,i=$t;Re=t,$t=!0;try{Fu(t);const n=t.fn(t._value);(e.version===0||$s(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{Re=s,$t=i,ju(t),t.flags&=-3}}function al(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)al(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Vp(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let $t=!0;const Nu=[];function ws(){Nu.push($t),$t=!1}function ks(){const t=Nu.pop();$t=t===void 0?!0:t}function Jl(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Re;Re=void 0;try{e()}finally{Re=s}}}let Fi=0;class $p{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ll{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Re||!$t||Re===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Re)s=this.activeLink=new $p(Re,this),Re.deps?(s.prevDep=Re.depsTail,Re.depsTail.nextDep=s,Re.depsTail=s):Re.deps=Re.depsTail=s,Bu(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=Re.depsTail,s.nextDep=void 0,Re.depsTail.nextDep=s,Re.depsTail=s,Re.deps===s&&(Re.deps=i)}return s}trigger(e){this.version++,Fi++,this.notify(e)}notify(e){ol();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{rl()}}}function Bu(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Bu(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const ya=new WeakMap,dn=Symbol(""),xa=Symbol(""),ji=Symbol("");function at(t,e,s){if($t&&Re){let i=ya.get(t);i||ya.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new ll),n.map=i,n.key=s),n.track()}}function ms(t,e,s,i,n,o){const r=ya.get(t);if(!r){Fi++;return}const a=l=>{l&&l.trigger()};if(ol(),e==="clear")r.forEach(a);else{const l=ie(t),d=l&&nl(s);if(l&&s==="length"){const u=Number(i);r.forEach((h,f)=>{(f==="length"||f===ji||!zt(f)&&f>=u)&&a(h)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),d&&a(r.get(ji)),e){case"add":l?d&&a(r.get("length")):(a(r.get(dn)),Tn(t)&&a(r.get(xa)));break;case"delete":l||(a(r.get(dn)),Tn(t)&&a(r.get(xa)));break;case"set":Tn(t)&&a(r.get(dn));break}}rl()}function xn(t){const e=Ce(t);return e===t?e:(at(e,"iterate",ji),Dt(t)?e:e.map(nt))}function br(t){return at(t=Ce(t),"iterate",ji),t}const Hp={__proto__:null,[Symbol.iterator](){return $r(this,Symbol.iterator,nt)},concat(...t){return xn(this).concat(...t.map(e=>ie(e)?xn(e):e))},entries(){return $r(this,"entries",t=>(t[1]=nt(t[1]),t))},every(t,e){return as(this,"every",t,e,void 0,arguments)},filter(t,e){return as(this,"filter",t,e,s=>s.map(nt),arguments)},find(t,e){return as(this,"find",t,e,nt,arguments)},findIndex(t,e){return as(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return as(this,"findLast",t,e,nt,arguments)},findLastIndex(t,e){return as(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return as(this,"forEach",t,e,void 0,arguments)},includes(...t){return Hr(this,"includes",t)},indexOf(...t){return Hr(this,"indexOf",t)},join(t){return xn(this).join(t)},lastIndexOf(...t){return Hr(this,"lastIndexOf",t)},map(t,e){return as(this,"map",t,e,void 0,arguments)},pop(){return ei(this,"pop")},push(...t){return ei(this,"push",t)},reduce(t,...e){return Xl(this,"reduce",t,e)},reduceRight(t,...e){return Xl(this,"reduceRight",t,e)},shift(){return ei(this,"shift")},some(t,e){return as(this,"some",t,e,void 0,arguments)},splice(...t){return ei(this,"splice",t)},toReversed(){return xn(this).toReversed()},toSorted(t){return xn(this).toSorted(t)},toSpliced(...t){return xn(this).toSpliced(...t)},unshift(...t){return ei(this,"unshift",t)},values(){return $r(this,"values",nt)}};function $r(t,e,s){const i=br(t),n=i[e]();return i!==t&&!Dt(t)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.value&&(o.value=s(o.value)),o}),n}const zp=Array.prototype;function as(t,e,s,i,n,o){const r=br(t),a=r!==t&&!Dt(t),l=r[e];if(l!==zp[e]){const h=l.apply(t,o);return a?nt(h):h}let d=s;r!==t&&(a?d=function(h,f){return s.call(this,nt(h),f,t)}:s.length>2&&(d=function(h,f){return s.call(this,h,f,t)}));const u=l.call(r,d,i);return a&&n?n(u):u}function Xl(t,e,s,i){const n=br(t);let o=s;return n!==t&&(Dt(t)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,t)}):o=function(r,a,l){return s.call(this,r,nt(a),l,t)}),n[e](o,...i)}function Hr(t,e,s){const i=Ce(t);at(i,"iterate",ji);const n=i[e](...s);return(n===-1||n===!1)&&ul(s[0])?(s[0]=Ce(s[0]),i[e](...s)):n}function ei(t,e,s=[]){ws(),ol();const i=Ce(t)[e].apply(t,s);return rl(),ks(),i}const Wp=el("__proto__,__v_isRef,__isVue"),Vu=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(zt));function qp(t){zt(t)||(t=String(t));const e=Ce(this);return at(e,"has",t),e.hasOwnProperty(t)}class $u{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return i===(n?o?sm:qu:o?Wu:zu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=ie(e);if(!n){let l;if(r&&(l=Hp[s]))return l;if(s==="hasOwnProperty")return qp}const a=Reflect.get(e,s,dt(e)?e:i);return(zt(s)?Vu.has(s):Wp(s))||(n||at(e,"get",s),o)?a:dt(a)?r&&nl(s)?a:a.value:Fe(a)?n?Gu(a):yr(a):a}}class Hu extends $u{constructor(e=!1){super(!1,e)}set(e,s,i,n){let o=e[s];if(!this._isShallow){const l=zs(o);if(!Dt(i)&&!zs(i)&&(o=Ce(o),i=Ce(i)),!ie(e)&&dt(o)&&!dt(i))return l?!1:(o.value=i,!0)}const r=ie(e)&&nl(s)?Number(s)<e.length:Me(e,s),a=Reflect.set(e,s,i,dt(e)?e:n);return e===Ce(n)&&(r?$s(i,o)&&ms(e,"set",s,i):ms(e,"add",s,i)),a}deleteProperty(e,s){const i=Me(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&ms(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!zt(s)||!Vu.has(s))&&at(e,"has",s),i}ownKeys(e){return at(e,"iterate",ie(e)?"length":dn),Reflect.ownKeys(e)}}class Kp extends $u{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Gp=new Hu,Yp=new Kp,Jp=new Hu(!0);const va=t=>t,co=t=>Reflect.getPrototypeOf(t);function Xp(t,e,s){return function(...i){const n=this.__v_raw,o=Ce(n),r=Tn(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,d=n[t](...i),u=s?va:e?Yo:nt;return!e&&at(o,"iterate",l?xa:dn),{next(){const{value:h,done:f}=d.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function uo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Qp(t,e){const s={get(n){const o=this.__v_raw,r=Ce(o),a=Ce(n);t||($s(n,a)&&at(r,"get",n),at(r,"get",a));const{has:l}=co(r),d=e?va:t?Yo:nt;if(l.call(r,n))return d(o.get(n));if(l.call(r,a))return d(o.get(a));o!==r&&o.get(n)},get size(){const n=this.__v_raw;return!t&&at(Ce(n),"iterate",dn),Reflect.get(n,"size",n)},has(n){const o=this.__v_raw,r=Ce(o),a=Ce(n);return t||($s(n,a)&&at(r,"has",n),at(r,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const r=this,a=r.__v_raw,l=Ce(a),d=e?va:t?Yo:nt;return!t&&at(l,"iterate",dn),a.forEach((u,h)=>n.call(o,d(u),d(h),r))}};return st(s,t?{add:uo("add"),set:uo("set"),delete:uo("delete"),clear:uo("clear")}:{add(n){!e&&!Dt(n)&&!zs(n)&&(n=Ce(n));const o=Ce(this);return co(o).has.call(o,n)||(o.add(n),ms(o,"add",n,n)),this},set(n,o){!e&&!Dt(o)&&!zs(o)&&(o=Ce(o));const r=Ce(this),{has:a,get:l}=co(r);let d=a.call(r,n);d||(n=Ce(n),d=a.call(r,n));const u=l.call(r,n);return r.set(n,o),d?$s(o,u)&&ms(r,"set",n,o):ms(r,"add",n,o),this},delete(n){const o=Ce(this),{has:r,get:a}=co(o);let l=r.call(o,n);l||(n=Ce(n),l=r.call(o,n)),a&&a.call(o,n);const d=o.delete(n);return l&&ms(o,"delete",n,void 0),d},clear(){const n=Ce(this),o=n.size!==0,r=n.clear();return o&&ms(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Xp(n,t,e)}),s}function cl(t,e){const s=Qp(t,e);return(i,n,o)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(Me(s,n)&&n in i?s:i,n,o)}const Zp={get:cl(!1,!1)},em={get:cl(!1,!0)},tm={get:cl(!0,!1)};const zu=new WeakMap,Wu=new WeakMap,qu=new WeakMap,sm=new WeakMap;function nm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function im(t){return t.__v_skip||!Object.isExtensible(t)?0:nm(Pp(t))}function yr(t){return zs(t)?t:dl(t,!1,Gp,Zp,zu)}function Ku(t){return dl(t,!1,Jp,em,Wu)}function Gu(t){return dl(t,!0,Yp,tm,qu)}function dl(t,e,s,i,n){if(!Fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=im(t);if(o===0)return t;const r=n.get(t);if(r)return r;const a=new Proxy(t,o===2?i:s);return n.set(t,a),a}function In(t){return zs(t)?In(t.__v_raw):!!(t&&t.__v_isReactive)}function zs(t){return!!(t&&t.__v_isReadonly)}function Dt(t){return!!(t&&t.__v_isShallow)}function ul(t){return t?!!t.__v_raw:!1}function Ce(t){const e=t&&t.__v_raw;return e?Ce(e):t}function om(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&Pu(t,"__v_skip",!0),t}const nt=t=>Fe(t)?yr(t):t,Yo=t=>Fe(t)?Gu(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function rm(t){return Yu(t,!1)}function am(t){return Yu(t,!0)}function Yu(t,e){return dt(t)?t:new lm(t,e)}class lm{constructor(e,s){this.dep=new ll,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Ce(e),this._value=s?e:nt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||Dt(e)||zs(e);e=i?e:Ce(e),$s(e,s)&&(this._rawValue=e,this._value=i?e:nt(e),this.dep.trigger())}}function On(t){return dt(t)?t.value:t}const cm={get:(t,e,s)=>e==="__v_raw"?t:On(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return dt(n)&&!dt(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Ju(t){return In(t)?t:new Proxy(t,cm)}class dm{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new ll(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return Lu(this,!0),!0}get value(){const e=this.dep.track();return Uu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function um(t,e,s=!1){let i,n;return ue(t)?i=t:(i=t.get,n=t.set),new dm(i,n,s)}const ho={},Jo=new WeakMap;let nn;function hm(t,e=!1,s=nn){if(s){let i=Jo.get(s);i||Jo.set(s,i=[]),i.push(t)}}function fm(t,e,s=Te){const{immediate:i,deep:n,once:o,scheduler:r,augmentJob:a,call:l}=s,d=A=>n?A:Dt(A)||n===!1||n===0?gs(A,1):gs(A);let u,h,f,p,g=!1,b=!1;if(dt(t)?(h=()=>t.value,g=Dt(t)):In(t)?(h=()=>d(t),g=!0):ie(t)?(b=!0,g=t.some(A=>In(A)||Dt(A)),h=()=>t.map(A=>{if(dt(A))return A.value;if(In(A))return d(A);if(ue(A))return l?l(A,2):A()})):ue(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){ws();try{f()}finally{ks()}}const A=nn;nn=u;try{return l?l(t,3,[p]):t(p)}finally{nn=A}}:h=Vt,e&&n){const A=h,P=n===!0?1/0:n;h=()=>gs(A(),P)}const x=Bp(),w=()=>{u.stop(),x&&x.active&&sl(x.effects,u)};if(o&&e){const A=e;e=(...P)=>{A(...P),w()}}let k=b?new Array(t.length).fill(ho):ho;const E=A=>{if(!(!(u.flags&1)||!u.dirty&&!A))if(e){const P=u.run();if(n||g||(b?P.some((N,F)=>$s(N,k[F])):$s(P,k))){f&&f();const N=nn;nn=u;try{const F=[P,k===ho?void 0:b&&k[0]===ho?[]:k,p];l?l(e,3,F):e(...F),k=P}finally{nn=N}}}else u.run()};return a&&a(E),u=new Du(h),u.scheduler=r?()=>r(E,!1):E,p=A=>hm(A,!1,u),f=u.onStop=()=>{const A=Jo.get(u);if(A){if(l)l(A,4);else for(const P of A)P();Jo.delete(u)}},e?i?E(!0):k=u.run():r?r(E.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function gs(t,e=1/0,s){if(e<=0||!Fe(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,dt(t))gs(t.value,e,s);else if(ie(t))for(let i=0;i<t.length;i++)gs(t[i],e,s);else if(Jn(t)||Tn(t))t.forEach(i=>{gs(i,e,s)});else if(Eu(t)){for(const i in t)gs(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&gs(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function so(t,e,s,i){try{return i?t(...i):t()}catch(n){xr(n,e,s)}}function os(t,e,s,i){if(ue(t)){const n=so(t,e,s,i);return n&&Mu(n)&&n.catch(o=>{xr(o,e,s)}),n}if(ie(t)){const n=[];for(let o=0;o<t.length;o++)n.push(os(t[o],e,s,i));return n}}function xr(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||Te;if(e){let a=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,d)===!1)return}a=a.parent}if(o){ws(),so(o,null,10,[t,l,d]),ks();return}}pm(t,s,n,i,r)}function pm(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const mt=[];let Zt=-1;const Dn=[];let Os=null,Mn=0;const Xu=Promise.resolve();let Xo=null;function hl(t){const e=Xo||Xu;return t?e.then(this?t.bind(this):t):e}function mm(t){let e=Zt+1,s=mt.length;for(;e<s;){const i=e+s>>>1,n=mt[i],o=Ui(n);o<t||o===t&&n.flags&2?e=i+1:s=i}return e}function fl(t){if(!(t.flags&1)){const e=Ui(t),s=mt[mt.length-1];!s||!(t.flags&2)&&e>=Ui(s)?mt.push(t):mt.splice(mm(e),0,t),t.flags|=1,Qu()}}function Qu(){Xo||(Xo=Xu.then(eh))}function gm(t){ie(t)?Dn.push(...t):Os&&t.id===-1?Os.splice(Mn+1,0,t):t.flags&1||(Dn.push(t),t.flags|=1),Qu()}function Ql(t,e,s=Zt+1){for(;s<mt.length;s++){const i=mt[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;mt.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Zu(t){if(Dn.length){const e=[...new Set(Dn)].sort((s,i)=>Ui(s)-Ui(i));if(Dn.length=0,Os){Os.push(...e);return}for(Os=e,Mn=0;Mn<Os.length;Mn++){const s=Os[Mn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Os=null,Mn=0}}const Ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function eh(t){const e=Vt;try{for(Zt=0;Zt<mt.length;Zt++){const s=mt[Zt];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),so(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Zt<mt.length;Zt++){const s=mt[Zt];s&&(s.flags&=-2)}Zt=-1,mt.length=0,Zu(),Xo=null,(mt.length||Dn.length)&&eh()}}let it=null,th=null;function Qo(t){const e=it;return it=t,th=t&&t.type.__scopeId||null,e}function X(t,e=it,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&ac(-1);const o=Qo(e);let r;try{r=t(...n)}finally{Qo(o),i._d&&ac(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function M(t,e){if(it===null)return t;const s=kr(it),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[o,r,a,l=Te]=e[n];o&&(ue(o)&&(o={mounted:o,updated:o}),o.deep&&gs(r),i.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return t}function Js(t,e,s,i){const n=t.dirs,o=e&&e.dirs;for(let r=0;r<n.length;r++){const a=n[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(ws(),os(l,s,8,[t.el,a,t,e]),ks())}}const bm=Symbol("_vte"),ym=t=>t.__isTeleport;function pl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,pl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function sh(t,e){return ue(t)?(()=>st({name:t.name},e,{setup:t}))():t}function nh(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zo(t,e,s,i,n=!1){if(ie(t)){t.forEach((g,b)=>Zo(g,e&&(ie(e)?e[b]:e),s,i,n));return}if(Rn(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Zo(t,e,s,i.component.subTree);return}const o=i.shapeFlag&4?kr(i.component):i.el,r=n?null:o,{i:a,r:l}=t,d=e&&e.r,u=a.refs===Te?a.refs={}:a.refs,h=a.setupState,f=Ce(h),p=h===Te?()=>!1:g=>Me(f,g);if(d!=null&&d!==l&&(Ye(d)?(u[d]=null,p(d)&&(h[d]=null)):dt(d)&&(d.value=null)),ue(l))so(l,a,12,[r,u]);else{const g=Ye(l),b=dt(l);if(g||b){const x=()=>{if(t.f){const w=g?p(l)?h[l]:u[l]:l.value;n?ie(w)&&sl(w,o):ie(w)?w.includes(o)||w.push(o):g?(u[l]=[o],p(l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else g?(u[l]=r,p(l)&&(h[l]=r)):b&&(l.value=r,t.k&&(u[t.k]=r))};r?(x.id=-1,Mt(x,s)):x()}}}gr().requestIdleCallback;gr().cancelIdleCallback;const Rn=t=>!!t.type.__asyncLoader,ih=t=>t.type.__isKeepAlive;function xm(t,e){oh(t,"a",e)}function vm(t,e){oh(t,"da",e)}function oh(t,e,s=lt){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(vr(e,i,s),s){let n=s.parent;for(;n&&n.parent;)ih(n.parent.vnode)&&_m(i,e,s,n),n=n.parent}}function _m(t,e,s,i){const n=vr(e,t,i,!0);rh(()=>{sl(i[e],n)},s)}function vr(t,e,s=lt,i=!1){if(s){const n=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...r)=>{ws();const a=no(s),l=os(e,s,t,r);return a(),ks(),l});return i?n.unshift(o):n.push(o),o}}const Cs=t=>(e,s=lt)=>{(!Vi||t==="sp")&&vr(t,(...i)=>e(...i),s)},wm=Cs("bm"),km=Cs("m"),Sm=Cs("bu"),Cm=Cs("u"),Mm=Cs("bum"),rh=Cs("um"),Am=Cs("sp"),Em=Cs("rtg"),Pm=Cs("rtc");function Tm(t,e=lt){vr("ec",t,e)}const ah="components";function j(t,e){return Om(ah,t,!0,e)||t}const Im=Symbol.for("v-ndc");function Om(t,e,s=!0,i=!1){const n=it||lt;if(n){const o=n.type;if(t===ah){const a=yg(o,!1);if(a&&(a===e||a===Rt(e)||a===mr(Rt(e))))return o}const r=Zl(n[t]||o[t],e)||Zl(n.appContext[t],e);return!r&&i?o:r}}function Zl(t,e){return t&&(t[e]||t[Rt(e)]||t[mr(Rt(e))])}function Q(t,e,s,i){let n;const o=s&&s[i],r=ie(t);if(r||Ye(t)){const a=r&&In(t);let l=!1,d=!1;a&&(l=!Dt(t),d=zs(t),t=br(t)),n=new Array(t.length);for(let u=0,h=t.length;u<h;u++)n[u]=e(l?d?Yo(nt(t[u])):nt(t[u]):t[u],u,void 0,o&&o[u])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,o&&o[a])}else if(Fe(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];n[l]=e(t[u],u,l,o&&o[l])}}else n=[];return s&&(s[i]=n),n}function lh(t,e,s={},i,n){if(it.ce||it.parent&&Rn(it.parent)&&it.parent.ce)return e!=="default"&&(s.name=e),m(),ge($,null,[D("slot",s,i&&i())],64);let o=t[e];o&&o._c&&(o._d=!1),m();const r=o&&ch(o(s)),a=s.key||r&&r.key,l=ge($,{key:(a&&!zt(a)?a:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&t._===1?64:-2);return!n&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function ch(t){return t.some(e=>Bi(e)?!(e.type===Ss||e.type===$&&!ch(e.children)):!0)?t:null}const _a=t=>t?Eh(t)?kr(t):_a(t.parent):null,wi=st(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_a(t.parent),$root:t=>_a(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ml(t),$forceUpdate:t=>t.f||(t.f=()=>{fl(t.update)}),$nextTick:t=>t.n||(t.n=hl.bind(t.proxy)),$watch:t=>Zm.bind(t)}),zr=(t,e)=>t!==Te&&!t.__isScriptSetup&&Me(t,e),Dm={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:o,accessCache:r,type:a,appContext:l}=t;let d;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return o[e]}else{if(zr(i,e))return r[e]=1,i[e];if(n!==Te&&Me(n,e))return r[e]=2,n[e];if((d=t.propsOptions[0])&&Me(d,e))return r[e]=3,o[e];if(s!==Te&&Me(s,e))return r[e]=4,s[e];wa&&(r[e]=0)}}const u=wi[e];let h,f;if(u)return e==="$attrs"&&at(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==Te&&Me(s,e))return r[e]=4,s[e];if(f=l.config.globalProperties,Me(f,e))return f[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:o}=t;return zr(n,e)?(n[e]=s,!0):i!==Te&&Me(i,e)?(i[e]=s,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:o}},r){let a;return!!s[r]||t!==Te&&Me(t,r)||zr(e,r)||(a=o[0])&&Me(a,r)||Me(i,r)||Me(wi,r)||Me(n.config.globalProperties,r)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Me(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ec(t){return ie(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let wa=!0;function Rm(t){const e=ml(t),s=t.proxy,i=t.ctx;wa=!1,e.beforeCreate&&tc(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:r,watch:a,provide:l,inject:d,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:g,activated:b,deactivated:x,beforeDestroy:w,beforeUnmount:k,destroyed:E,unmounted:A,render:P,renderTracked:N,renderTriggered:F,errorCaptured:H,serverPrefetch:Z,expose:oe,inheritAttrs:le,components:he,directives:Pe,filters:Qe}=e;if(d&&Lm(d,i,null),r)for(const re in r){const fe=r[re];ue(fe)&&(i[re]=fe.bind(s))}if(n){const re=n.call(s,s);Fe(re)&&(t.data=yr(re))}if(wa=!0,o)for(const re in o){const fe=o[re],Ie=ue(fe)?fe.bind(s,s):ue(fe.get)?fe.get.bind(s,s):Vt,ht=!ue(fe)&&ue(fe.set)?fe.set.bind(s):Vt,ft=Nt({get:Ie,set:ht});Object.defineProperty(i,re,{enumerable:!0,configurable:!0,get:()=>ft.value,set:We=>ft.value=We})}if(a)for(const re in a)dh(a[re],i,s,re);if(l){const re=ue(l)?l.call(s):l;Reflect.ownKeys(re).forEach(fe=>{Ro(fe,re[fe])})}u&&tc(u,t,"c");function de(re,fe){ie(fe)?fe.forEach(Ie=>re(Ie.bind(s))):fe&&re(fe.bind(s))}if(de(wm,h),de(km,f),de(Sm,p),de(Cm,g),de(xm,b),de(vm,x),de(Tm,H),de(Pm,N),de(Em,F),de(Mm,k),de(rh,A),de(Am,Z),ie(oe))if(oe.length){const re=t.exposed||(t.exposed={});oe.forEach(fe=>{Object.defineProperty(re,fe,{get:()=>s[fe],set:Ie=>s[fe]=Ie})})}else t.exposed||(t.exposed={});P&&t.render===Vt&&(t.render=P),le!=null&&(t.inheritAttrs=le),he&&(t.components=he),Pe&&(t.directives=Pe),Z&&nh(t)}function Lm(t,e,s=Vt){ie(t)&&(t=ka(t));for(const i in t){const n=t[i];let o;Fe(n)?"default"in n?o=vs(n.from||i,n.default,!0):o=vs(n.from||i):o=vs(n),dt(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function tc(t,e,s){os(ie(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function dh(t,e,s,i){let n=i.includes(".")?kh(s,i):()=>s[i];if(Ye(t)){const o=e[t];ue(o)&&Lo(n,o)}else if(ue(t))Lo(n,t.bind(s));else if(Fe(t))if(ie(t))t.forEach(o=>dh(o,e,s,i));else{const o=ue(t.handler)?t.handler.bind(s):e[t.handler];ue(o)&&Lo(n,o,t)}}function ml(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!n.length&&!s&&!i?l=e:(l={},n.length&&n.forEach(d=>er(l,d,r,!0)),er(l,e,r)),Fe(e)&&o.set(e,l),l}function er(t,e,s,i=!1){const{mixins:n,extends:o}=e;o&&er(t,o,s,!0),n&&n.forEach(r=>er(t,r,s,!0));for(const r in e)if(!(i&&r==="expose")){const a=Fm[r]||s&&s[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const Fm={data:sc,props:nc,emits:nc,methods:ui,computed:ui,beforeCreate:pt,created:pt,beforeMount:pt,mounted:pt,beforeUpdate:pt,updated:pt,beforeDestroy:pt,beforeUnmount:pt,destroyed:pt,unmounted:pt,activated:pt,deactivated:pt,errorCaptured:pt,serverPrefetch:pt,components:ui,directives:ui,watch:Um,provide:sc,inject:jm};function sc(t,e){return e?t?function(){return st(ue(t)?t.call(this,this):t,ue(e)?e.call(this,this):e)}:e:t}function jm(t,e){return ui(ka(t),ka(e))}function ka(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function pt(t,e){return t?[...new Set([].concat(t,e))]:e}function ui(t,e){return t?st(Object.create(null),t,e):e}function nc(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:st(Object.create(null),ec(t),ec(e??{})):e}function Um(t,e){if(!t)return e;if(!e)return t;const s=st(Object.create(null),t);for(const i in e)s[i]=pt(t[i],e[i]);return s}function uh(){return{app:null,config:{isNativeTag:Ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Nm=0;function Bm(t,e){return function(i,n=null){ue(i)||(i=st({},i)),n!=null&&!Fe(n)&&(n=null);const o=uh(),r=new WeakSet,a=[];let l=!1;const d=o.app={_uid:Nm++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:vg,get config(){return o.config},set config(u){},use(u,...h){return r.has(u)||(u&&ue(u.install)?(r.add(u),u.install(d,...h)):ue(u)&&(r.add(u),u(d,...h))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,h){return h?(o.components[u]=h,d):o.components[u]},directive(u,h){return h?(o.directives[u]=h,d):o.directives[u]},mount(u,h,f){if(!l){const p=d._ceVNode||D(i,n);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&e?e(p,u):t(p,u,f),l=!0,d._container=u,u.__vue_app__=d,kr(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(os(a,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,h){return o.provides[u]=h,d},runWithContext(u){const h=Ln;Ln=d;try{return u()}finally{Ln=h}}};return d}}let Ln=null;function Ro(t,e){if(lt){let s=lt.provides;const i=lt.parent&&lt.parent.provides;i===s&&(s=lt.provides=Object.create(i)),s[t]=e}}function vs(t,e,s=!1){const i=lt||it;if(i||Ln){const n=Ln?Ln._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&ue(e)?e.call(i&&i.proxy):e}}const hh={},fh=()=>Object.create(hh),ph=t=>Object.getPrototypeOf(t)===hh;function Vm(t,e,s,i=!1){const n={},o=fh();t.propsDefaults=Object.create(null),mh(t,e,n,o);for(const r in t.propsOptions[0])r in n||(n[r]=void 0);s?t.props=i?n:Ku(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function $m(t,e,s,i){const{props:n,attrs:o,vnode:{patchFlag:r}}=t,a=Ce(n),[l]=t.propsOptions;let d=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(_r(t.emitsOptions,f))continue;const p=e[f];if(l)if(Me(o,f))p!==o[f]&&(o[f]=p,d=!0);else{const g=Rt(f);n[g]=Sa(l,a,g,p,t,!1)}else p!==o[f]&&(o[f]=p,d=!0)}}}else{mh(t,e,n,o)&&(d=!0);let u;for(const h in a)(!e||!Me(e,h)&&((u=mn(h))===h||!Me(e,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=Sa(l,a,h,void 0,t,!0)):delete n[h]);if(o!==a)for(const h in o)(!e||!Me(e,h))&&(delete o[h],d=!0)}d&&ms(t.attrs,"set","")}function mh(t,e,s,i){const[n,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(xi(l))continue;const d=e[l];let u;n&&Me(n,u=Rt(l))?!o||!o.includes(u)?s[u]=d:(a||(a={}))[u]=d:_r(t.emitsOptions,l)||(!(l in i)||d!==i[l])&&(i[l]=d,r=!0)}if(o){const l=Ce(s),d=a||Te;for(let u=0;u<o.length;u++){const h=o[u];s[h]=Sa(n,l,h,d[h],t,!Me(d,h))}}return r}function Sa(t,e,s,i,n,o){const r=t[s];if(r!=null){const a=Me(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ue(l)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=no(n);i=d[s]=l.call(null,e),u()}}else i=l;n.ce&&n.ce._setProp(s,i)}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===mn(s))&&(i=!0))}return i}const Hm=new WeakMap;function gh(t,e,s=!1){const i=s?Hm:e.propsCache,n=i.get(t);if(n)return n;const o=t.props,r={},a=[];let l=!1;if(!ue(t)){const u=h=>{l=!0;const[f,p]=gh(h,e,!0);st(r,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return Fe(t)&&i.set(t,Pn),Pn;if(ie(o))for(let u=0;u<o.length;u++){const h=Rt(o[u]);ic(h)&&(r[h]=Te)}else if(o)for(const u in o){const h=Rt(u);if(ic(h)){const f=o[u],p=r[h]=ie(f)||ue(f)?{type:f}:st({},f),g=p.type;let b=!1,x=!0;if(ie(g))for(let w=0;w<g.length;++w){const k=g[w],E=ue(k)&&k.name;if(E==="Boolean"){b=!0;break}else E==="String"&&(x=!1)}else b=ue(g)&&g.name==="Boolean";p[0]=b,p[1]=x,(b||Me(p,"default"))&&a.push(h)}}const d=[r,a];return Fe(t)&&i.set(t,d),d}function ic(t){return t[0]!=="$"&&!xi(t)}const gl=t=>t[0]==="_"||t==="$stable",bl=t=>ie(t)?t.map(ts):[ts(t)],zm=(t,e,s)=>{if(e._n)return e;const i=X((...n)=>bl(e(...n)),s);return i._c=!1,i},bh=(t,e,s)=>{const i=t._ctx;for(const n in t){if(gl(n))continue;const o=t[n];if(ue(o))e[n]=zm(n,o,i);else if(o!=null){const r=bl(o);e[n]=()=>r}}},yh=(t,e)=>{const s=bl(e);t.slots.default=()=>s},xh=(t,e,s)=>{for(const i in e)(s||!gl(i))&&(t[i]=e[i])},Wm=(t,e,s)=>{const i=t.slots=fh();if(t.vnode.shapeFlag&32){const n=e._;n?(xh(i,e,s),s&&Pu(i,"_",n,!0)):bh(e,i)}else e&&yh(t,e)},qm=(t,e,s)=>{const{vnode:i,slots:n}=t;let o=!0,r=Te;if(i.shapeFlag&32){const a=e._;a?s&&a===1?o=!1:xh(n,e,s):(o=!e.$stable,bh(e,n)),r=e}else e&&(yh(t,e),r={default:1});if(o)for(const a in n)!gl(a)&&r[a]==null&&delete n[a]},Mt=rg;function Km(t){return Gm(t)}function Gm(t,e){const s=gr();s.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:r,createText:a,createComment:l,setText:d,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=Vt,insertStaticContent:g}=t,b=(v,_,T,U=null,R=null,B=null,K=void 0,q=null,W=!!_.dynamicChildren)=>{if(v===_)return;v&&!ti(v,_)&&(U=L(v),We(v,R,B,!0),v=null),_.patchFlag===-2&&(W=!1,_.dynamicChildren=null);const{type:V,ref:ne,shapeFlag:Y}=_;switch(V){case wr:x(v,_,T,U);break;case Ss:w(v,_,T,U);break;case Fo:v==null&&k(_,T,U,K);break;case $:he(v,_,T,U,R,B,K,q,W);break;default:Y&1?P(v,_,T,U,R,B,K,q,W):Y&6?Pe(v,_,T,U,R,B,K,q,W):(Y&64||Y&128)&&V.process(v,_,T,U,R,B,K,q,W,ee)}ne!=null&&R&&Zo(ne,v&&v.ref,B,_||v,!_)},x=(v,_,T,U)=>{if(v==null)i(_.el=a(_.children),T,U);else{const R=_.el=v.el;_.children!==v.children&&d(R,_.children)}},w=(v,_,T,U)=>{v==null?i(_.el=l(_.children||""),T,U):_.el=v.el},k=(v,_,T,U)=>{[v.el,v.anchor]=g(v.children,_,T,U,v.el,v.anchor)},E=({el:v,anchor:_},T,U)=>{let R;for(;v&&v!==_;)R=f(v),i(v,T,U),v=R;i(_,T,U)},A=({el:v,anchor:_})=>{let T;for(;v&&v!==_;)T=f(v),n(v),v=T;n(_)},P=(v,_,T,U,R,B,K,q,W)=>{_.type==="svg"?K="svg":_.type==="math"&&(K="mathml"),v==null?N(_,T,U,R,B,K,q,W):Z(v,_,R,B,K,q,W)},N=(v,_,T,U,R,B,K,q)=>{let W,V;const{props:ne,shapeFlag:Y,transition:te,dirs:ce}=v;if(W=v.el=r(v.type,B,ne&&ne.is,ne),Y&8?u(W,v.children):Y&16&&H(v.children,W,null,U,R,Wr(v,B),K,q),ce&&Js(v,null,U,"created"),F(W,v,v.scopeId,K,U),ne){for(const Oe in ne)Oe!=="value"&&!xi(Oe)&&o(W,Oe,null,ne[Oe],B,U);"value"in ne&&o(W,"value",null,ne.value,B),(V=ne.onVnodeBeforeMount)&&Jt(V,U,v)}ce&&Js(v,null,U,"beforeMount");const we=Ym(R,te);we&&te.beforeEnter(W),i(W,_,T),((V=ne&&ne.onVnodeMounted)||we||ce)&&Mt(()=>{V&&Jt(V,U,v),we&&te.enter(W),ce&&Js(v,null,U,"mounted")},R)},F=(v,_,T,U,R)=>{if(T&&p(v,T),U)for(let B=0;B<U.length;B++)p(v,U[B]);if(R){let B=R.subTree;if(_===B||Ch(B.type)&&(B.ssContent===_||B.ssFallback===_)){const K=R.vnode;F(v,K,K.scopeId,K.slotScopeIds,R.parent)}}},H=(v,_,T,U,R,B,K,q,W=0)=>{for(let V=W;V<v.length;V++){const ne=v[V]=q?Ds(v[V]):ts(v[V]);b(null,ne,_,T,U,R,B,K,q)}},Z=(v,_,T,U,R,B,K)=>{const q=_.el=v.el;let{patchFlag:W,dynamicChildren:V,dirs:ne}=_;W|=v.patchFlag&16;const Y=v.props||Te,te=_.props||Te;let ce;if(T&&Xs(T,!1),(ce=te.onVnodeBeforeUpdate)&&Jt(ce,T,_,v),ne&&Js(_,v,T,"beforeUpdate"),T&&Xs(T,!0),(Y.innerHTML&&te.innerHTML==null||Y.textContent&&te.textContent==null)&&u(q,""),V?oe(v.dynamicChildren,V,q,T,U,Wr(_,R),B):K||fe(v,_,q,null,T,U,Wr(_,R),B,!1),W>0){if(W&16)le(q,Y,te,T,R);else if(W&2&&Y.class!==te.class&&o(q,"class",null,te.class,R),W&4&&o(q,"style",Y.style,te.style,R),W&8){const we=_.dynamicProps;for(let Oe=0;Oe<we.length;Oe++){const Ae=we[Oe],kt=Y[Ae],ot=te[Ae];(ot!==kt||Ae==="value")&&o(q,Ae,kt,ot,R,T)}}W&1&&v.children!==_.children&&u(q,_.children)}else!K&&V==null&&le(q,Y,te,T,R);((ce=te.onVnodeUpdated)||ne)&&Mt(()=>{ce&&Jt(ce,T,_,v),ne&&Js(_,v,T,"updated")},U)},oe=(v,_,T,U,R,B,K)=>{for(let q=0;q<_.length;q++){const W=v[q],V=_[q],ne=W.el&&(W.type===$||!ti(W,V)||W.shapeFlag&70)?h(W.el):T;b(W,V,ne,null,U,R,B,K,!0)}},le=(v,_,T,U,R)=>{if(_!==T){if(_!==Te)for(const B in _)!xi(B)&&!(B in T)&&o(v,B,_[B],null,R,U);for(const B in T){if(xi(B))continue;const K=T[B],q=_[B];K!==q&&B!=="value"&&o(v,B,q,K,R,U)}"value"in T&&o(v,"value",_.value,T.value,R)}},he=(v,_,T,U,R,B,K,q,W)=>{const V=_.el=v?v.el:a(""),ne=_.anchor=v?v.anchor:a("");let{patchFlag:Y,dynamicChildren:te,slotScopeIds:ce}=_;ce&&(q=q?q.concat(ce):ce),v==null?(i(V,T,U),i(ne,T,U),H(_.children||[],T,ne,R,B,K,q,W)):Y>0&&Y&64&&te&&v.dynamicChildren?(oe(v.dynamicChildren,te,T,R,B,K,q),(_.key!=null||R&&_===R.subTree)&&vh(v,_,!0)):fe(v,_,T,ne,R,B,K,q,W)},Pe=(v,_,T,U,R,B,K,q,W)=>{_.slotScopeIds=q,v==null?_.shapeFlag&512?R.ctx.activate(_,T,U,K,W):Qe(_,T,U,R,B,K,W):_e(v,_,W)},Qe=(v,_,T,U,R,B,K)=>{const q=v.component=fg(v,U,R);if(ih(v)&&(q.ctx.renderer=ee),pg(q,!1,K),q.asyncDep){if(R&&R.registerDep(q,de,K),!v.el){const W=q.subTree=D(Ss);w(null,W,_,T)}}else de(q,v,_,T,R,B,K)},_e=(v,_,T)=>{const U=_.component=v.component;if(ig(v,_,T))if(U.asyncDep&&!U.asyncResolved){re(U,_,T);return}else U.next=_,U.update();else _.el=v.el,U.vnode=_},de=(v,_,T,U,R,B,K)=>{const q=()=>{if(v.isMounted){let{next:Y,bu:te,u:ce,parent:we,vnode:Oe}=v;{const St=_h(v);if(St){Y&&(Y.el=Oe.el,re(v,Y,K)),St.asyncDep.then(()=>{v.isUnmounted||q()});return}}let Ae=Y,kt;Xs(v,!1),Y?(Y.el=Oe.el,re(v,Y,K)):Y=Oe,te&&Do(te),(kt=Y.props&&Y.props.onVnodeBeforeUpdate)&&Jt(kt,we,Y,Oe),Xs(v,!0);const ot=qr(v),jt=v.subTree;v.subTree=ot,b(jt,ot,h(jt.el),L(jt),v,R,B),Y.el=ot.el,Ae===null&&og(v,ot.el),ce&&Mt(ce,R),(kt=Y.props&&Y.props.onVnodeUpdated)&&Mt(()=>Jt(kt,we,Y,Oe),R)}else{let Y;const{el:te,props:ce}=_,{bm:we,m:Oe,parent:Ae,root:kt,type:ot}=v,jt=Rn(_);if(Xs(v,!1),we&&Do(we),!jt&&(Y=ce&&ce.onVnodeBeforeMount)&&Jt(Y,Ae,_),Xs(v,!0),te&&Be){const St=()=>{v.subTree=qr(v),Be(te,v.subTree,v,R,null)};jt&&ot.__asyncHydrate?ot.__asyncHydrate(te,v,St):St()}else{kt.ce&&kt.ce._injectChildStyle(ot);const St=v.subTree=qr(v);b(null,St,T,U,v,R,B),_.el=St.el}if(Oe&&Mt(Oe,R),!jt&&(Y=ce&&ce.onVnodeMounted)){const St=_;Mt(()=>Jt(Y,Ae,St),R)}(_.shapeFlag&256||Ae&&Rn(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&v.a&&Mt(v.a,R),v.isMounted=!0,_=T=U=null}};v.scope.on();const W=v.effect=new Du(q);v.scope.off();const V=v.update=W.run.bind(W),ne=v.job=W.runIfDirty.bind(W);ne.i=v,ne.id=v.uid,W.scheduler=()=>fl(ne),Xs(v,!0),V()},re=(v,_,T)=>{_.component=v;const U=v.vnode.props;v.vnode=_,v.next=null,$m(v,_.props,U,T),qm(v,_.children,T),ws(),Ql(v),ks()},fe=(v,_,T,U,R,B,K,q,W=!1)=>{const V=v&&v.children,ne=v?v.shapeFlag:0,Y=_.children,{patchFlag:te,shapeFlag:ce}=_;if(te>0){if(te&128){ht(V,Y,T,U,R,B,K,q,W);return}else if(te&256){Ie(V,Y,T,U,R,B,K,q,W);return}}ce&8?(ne&16&&Ge(V,R,B),Y!==V&&u(T,Y)):ne&16?ce&16?ht(V,Y,T,U,R,B,K,q,W):Ge(V,R,B,!0):(ne&8&&u(T,""),ce&16&&H(Y,T,U,R,B,K,q,W))},Ie=(v,_,T,U,R,B,K,q,W)=>{v=v||Pn,_=_||Pn;const V=v.length,ne=_.length,Y=Math.min(V,ne);let te;for(te=0;te<Y;te++){const ce=_[te]=W?Ds(_[te]):ts(_[te]);b(v[te],ce,T,null,R,B,K,q,W)}V>ne?Ge(v,R,B,!0,!1,Y):H(_,T,U,R,B,K,q,W,Y)},ht=(v,_,T,U,R,B,K,q,W)=>{let V=0;const ne=_.length;let Y=v.length-1,te=ne-1;for(;V<=Y&&V<=te;){const ce=v[V],we=_[V]=W?Ds(_[V]):ts(_[V]);if(ti(ce,we))b(ce,we,T,null,R,B,K,q,W);else break;V++}for(;V<=Y&&V<=te;){const ce=v[Y],we=_[te]=W?Ds(_[te]):ts(_[te]);if(ti(ce,we))b(ce,we,T,null,R,B,K,q,W);else break;Y--,te--}if(V>Y){if(V<=te){const ce=te+1,we=ce<ne?_[ce].el:U;for(;V<=te;)b(null,_[V]=W?Ds(_[V]):ts(_[V]),T,we,R,B,K,q,W),V++}}else if(V>te)for(;V<=Y;)We(v[V],R,B,!0),V++;else{const ce=V,we=V,Oe=new Map;for(V=we;V<=te;V++){const Ct=_[V]=W?Ds(_[V]):ts(_[V]);Ct.key!=null&&Oe.set(Ct.key,V)}let Ae,kt=0;const ot=te-we+1;let jt=!1,St=0;const Zn=new Array(ot);for(V=0;V<ot;V++)Zn[V]=0;for(V=ce;V<=Y;V++){const Ct=v[V];if(kt>=ot){We(Ct,R,B,!0);continue}let Yt;if(Ct.key!=null)Yt=Oe.get(Ct.key);else for(Ae=we;Ae<=te;Ae++)if(Zn[Ae-we]===0&&ti(Ct,_[Ae])){Yt=Ae;break}Yt===void 0?We(Ct,R,B,!0):(Zn[Yt-we]=V+1,Yt>=St?St=Yt:jt=!0,b(Ct,_[Yt],T,null,R,B,K,q,W),kt++)}const ql=jt?Jm(Zn):Pn;for(Ae=ql.length-1,V=ot-1;V>=0;V--){const Ct=we+V,Yt=_[Ct],Kl=Ct+1<ne?_[Ct+1].el:U;Zn[V]===0?b(null,Yt,T,Kl,R,B,K,q,W):jt&&(Ae<0||V!==ql[Ae]?ft(Yt,T,Kl,2):Ae--)}}},ft=(v,_,T,U,R=null)=>{const{el:B,type:K,transition:q,children:W,shapeFlag:V}=v;if(V&6){ft(v.component.subTree,_,T,U);return}if(V&128){v.suspense.move(_,T,U);return}if(V&64){K.move(v,_,T,ee);return}if(K===$){i(B,_,T);for(let Y=0;Y<W.length;Y++)ft(W[Y],_,T,U);i(v.anchor,_,T);return}if(K===Fo){E(v,_,T);return}if(U!==2&&V&1&&q)if(U===0)q.beforeEnter(B),i(B,_,T),Mt(()=>q.enter(B),R);else{const{leave:Y,delayLeave:te,afterLeave:ce}=q,we=()=>{v.ctx.isUnmounted?n(B):i(B,_,T)},Oe=()=>{Y(B,()=>{we(),ce&&ce()})};te?te(B,we,Oe):Oe()}else i(B,_,T)},We=(v,_,T,U=!1,R=!1)=>{const{type:B,props:K,ref:q,children:W,dynamicChildren:V,shapeFlag:ne,patchFlag:Y,dirs:te,cacheIndex:ce}=v;if(Y===-2&&(R=!1),q!=null&&(ws(),Zo(q,null,T,v,!0),ks()),ce!=null&&(_.renderCache[ce]=void 0),ne&256){_.ctx.deactivate(v);return}const we=ne&1&&te,Oe=!Rn(v);let Ae;if(Oe&&(Ae=K&&K.onVnodeBeforeUnmount)&&Jt(Ae,_,v),ne&6)Gt(v.component,T,U);else{if(ne&128){v.suspense.unmount(T,U);return}we&&Js(v,null,_,"beforeUnmount"),ne&64?v.type.remove(v,_,T,ee,U):V&&!V.hasOnce&&(B!==$||Y>0&&Y&64)?Ge(V,_,T,!1,!0):(B===$&&Y&384||!R&&ne&16)&&Ge(W,_,T),U&&It(v)}(Oe&&(Ae=K&&K.onVnodeUnmounted)||we)&&Mt(()=>{Ae&&Jt(Ae,_,v),we&&Js(v,null,_,"unmounted")},T)},It=v=>{const{type:_,el:T,anchor:U,transition:R}=v;if(_===$){bt(T,U);return}if(_===Fo){A(v);return}const B=()=>{n(T),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(v.shapeFlag&1&&R&&!R.persisted){const{leave:K,delayLeave:q}=R,W=()=>K(T,B);q?q(v.el,B,W):W()}else B()},bt=(v,_)=>{let T;for(;v!==_;)T=f(v),n(v),v=T;n(_)},Gt=(v,_,T)=>{const{bum:U,scope:R,job:B,subTree:K,um:q,m:W,a:V,parent:ne,slots:{__:Y}}=v;oc(W),oc(V),U&&Do(U),ne&&ie(Y)&&Y.forEach(te=>{ne.renderCache[te]=void 0}),R.stop(),B&&(B.flags|=8,We(K,v,_,T)),q&&Mt(q,_),Mt(()=>{v.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},Ge=(v,_,T,U=!1,R=!1,B=0)=>{for(let K=B;K<v.length;K++)We(v[K],_,T,U,R)},L=v=>{if(v.shapeFlag&6)return L(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const _=f(v.anchor||v.el),T=_&&_[bm];return T?f(T):_};let J=!1;const G=(v,_,T)=>{v==null?_._vnode&&We(_._vnode,null,null,!0):b(_._vnode||null,v,_,null,null,null,T),_._vnode=v,J||(J=!0,Ql(),Zu(),J=!1)},ee={p:b,um:We,m:ft,r:It,mt:Qe,mc:H,pc:fe,pbc:oe,n:L,o:t};let ke,Be;return e&&([ke,Be]=e(ee)),{render:G,hydrate:ke,createApp:Bm(G,ke)}}function Wr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Xs({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Ym(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vh(t,e,s=!1){const i=t.children,n=e.children;if(ie(i)&&ie(n))for(let o=0;o<i.length;o++){const r=i[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=Ds(n[o]),a.el=r.el),!s&&a.patchFlag!==-2&&vh(r,a)),a.type===wr&&(a.el=r.el),a.type===Ss&&!a.el&&(a.el=r.el)}}function Jm(t){const e=t.slice(),s=[0];let i,n,o,r,a;const l=t.length;for(i=0;i<l;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,t[s[a]]<d?o=a+1:r=a;d<t[s[o]]&&(o>0&&(e[i]=s[o-1]),s[o]=i)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=e[r];return s}function _h(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_h(e)}function oc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Xm=Symbol.for("v-scx"),Qm=()=>vs(Xm);function Lo(t,e,s){return wh(t,e,s)}function wh(t,e,s=Te){const{immediate:i,deep:n,flush:o,once:r}=s,a=st({},s),l=e&&i||!e&&o!=="post";let d;if(Vi){if(o==="sync"){const p=Qm();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Vt,p.resume=Vt,p.pause=Vt,p}}const u=lt;a.call=(p,g,b)=>os(p,u,g,b);let h=!1;o==="post"?a.scheduler=p=>{Mt(p,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,g)=>{g?p():fl(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=fm(t,e,a);return Vi&&(d?d.push(f):l&&f()),f}function Zm(t,e,s){const i=this.proxy,n=Ye(t)?t.includes(".")?kh(i,t):()=>i[t]:t.bind(i,i);let o;ue(e)?o=e:(o=e.handler,s=e);const r=no(this),a=wh(n,o.bind(i),s);return r(),a}function kh(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const eg=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rt(e)}Modifiers`]||t[`${mn(e)}Modifiers`];function tg(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||Te;let n=s;const o=e.startsWith("update:"),r=o&&eg(i,e.slice(7));r&&(r.trim&&(n=s.map(u=>Ye(u)?u.trim():u)),r.number&&(n=s.map(Go)));let a,l=i[a=Nr(e)]||i[a=Nr(Rt(e))];!l&&o&&(l=i[a=Nr(mn(e))]),l&&os(l,t,6,n);const d=i[a+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,os(d,t,6,n)}}function Sh(t,e,s=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const o=t.emits;let r={},a=!1;if(!ue(t)){const l=d=>{const u=Sh(d,e,!0);u&&(a=!0,st(r,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Fe(t)&&i.set(t,null),null):(ie(o)?o.forEach(l=>r[l]=null):st(r,o),Fe(t)&&i.set(t,r),r)}function _r(t,e){return!t||!fr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,mn(e))||Me(t,e))}function qr(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[o],slots:r,attrs:a,emit:l,render:d,renderCache:u,props:h,data:f,setupState:p,ctx:g,inheritAttrs:b}=t,x=Qo(t);let w,k;try{if(s.shapeFlag&4){const A=n||i,P=A;w=ts(d.call(P,A,u,h,p,f,g)),k=a}else{const A=e;w=ts(A.length>1?A(h,{attrs:a,slots:r,emit:l}):A(h,null)),k=e.props?a:sg(a)}}catch(A){ki.length=0,xr(A,t,1),w=D(Ss)}let E=w;if(k&&b!==!1){const A=Object.keys(k),{shapeFlag:P}=E;A.length&&P&7&&(o&&A.some(tl)&&(k=ng(k,o)),E=Nn(E,k,!1,!0))}return s.dirs&&(E=Nn(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(s.dirs):s.dirs),s.transition&&pl(E,s.transition),w=E,Qo(x),w}const sg=t=>{let e;for(const s in t)(s==="class"||s==="style"||fr(s))&&((e||(e={}))[s]=t[s]);return e},ng=(t,e)=>{const s={};for(const i in t)(!tl(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function ig(t,e,s){const{props:i,children:n,component:o}=t,{props:r,children:a,patchFlag:l}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return i?rc(i,r,d):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(r[f]!==i[f]&&!_r(d,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?rc(i,r,d):!0:!!r;return!1}function rc(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==t[o]&&!_r(s,o))return!0}return!1}function og({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ch=t=>t.__isSuspense;function rg(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):gm(t)}const $=Symbol.for("v-fgt"),wr=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),Fo=Symbol.for("v-stc"),ki=[];let Tt=null;function m(t=!1){ki.push(Tt=t?null:[])}function ag(){ki.pop(),Tt=ki[ki.length-1]||null}let Ni=1;function ac(t,e=!1){Ni+=t,t<0&&Tt&&e&&(Tt.hasOnce=!0)}function Mh(t){return t.dynamicChildren=Ni>0?Tt||Pn:null,ag(),Ni>0&&Tt&&Tt.push(t),t}function y(t,e,s,i,n,o){return Mh(c(t,e,s,i,n,o,!0))}function ge(t,e,s,i,n){return Mh(D(t,e,s,i,n,!0))}function Bi(t){return t?t.__v_isVNode===!0:!1}function ti(t,e){return t.type===e.type&&t.key===e.key}const Ah=({key:t})=>t??null,jo=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Ye(t)||dt(t)||ue(t)?{i:it,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,o=t===$?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ah(e),ref:e&&jo(e),scopeId:th,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:it};return a?(yl(l,s),o&128&&t.normalize(l)):s&&(l.shapeFlag|=Ye(s)?8:16),Ni>0&&!r&&Tt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Tt.push(l),l}const D=lg;function lg(t,e=null,s=null,i=0,n=null,o=!1){if((!t||t===Im)&&(t=Ss),Bi(t)){const a=Nn(t,e,!0);return s&&yl(a,s),Ni>0&&!o&&Tt&&(a.shapeFlag&6?Tt[Tt.indexOf(t)]=a:Tt.push(a)),a.patchFlag=-2,a}if(xg(t)&&(t=t.__vccOpts),e){e=cg(e);let{class:a,style:l}=e;a&&!Ye(a)&&(e.class=$e(a)),Fe(l)&&(ul(l)&&!ie(l)&&(l=st({},l)),e.style=Li(l))}const r=Ye(t)?1:Ch(t)?128:ym(t)?64:Fe(t)?4:ue(t)?2:0;return c(t,e,s,i,n,r,o,!0)}function cg(t){return t?ul(t)||ph(t)?st({},t):t:null}function Nn(t,e,s=!1,i=!1){const{props:n,ref:o,patchFlag:r,children:a,transition:l}=t,d=e?dg(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Ah(d),ref:e&&e.ref?s&&o?ie(o)?o.concat(jo(e)):[o,jo(e)]:jo(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nn(t.ssContent),ssFallback:t.ssFallback&&Nn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&pl(u,l.clone(u)),u}function se(t=" ",e=0){return D(wr,null,t,e)}function Ws(t,e){const s=D(Fo,null,t);return s.staticCount=e,s}function I(t="",e=!1){return e?(m(),ge(Ss,null,t)):D(Ss,null,t)}function ts(t){return t==null||typeof t=="boolean"?D(Ss):ie(t)?D($,null,t.slice()):Bi(t)?Ds(t):D(wr,null,String(t))}function Ds(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nn(t)}function yl(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ie(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),yl(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!ph(e)?e._ctx=it:n===3&&it&&(it.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:it},s=32):(e=String(e),i&64?(s=16,e=[se(e)]):s=8);t.children=e,t.shapeFlag|=s}function dg(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=$e([e.class,i.class]));else if(n==="style")e.style=Li([e.style,i.style]);else if(fr(n)){const o=e[n],r=i[n];r&&o!==r&&!(ie(o)&&o.includes(r))&&(e[n]=o?[].concat(o,r):r)}else n!==""&&(e[n]=i[n])}return e}function Jt(t,e,s,i=null){os(t,e,7,[s,i])}const ug=uh();let hg=0;function fg(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||ug,o={uid:hg++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Np(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gh(i,n),emitsOptions:Sh(i,n),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:i.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=tg.bind(null,o),t.ce&&t.ce(o),o}let lt=null,tr,Ca;{const t=gr(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),o=>{n.length>1?n.forEach(r=>r(o)):n[0](o)}};tr=e("__VUE_INSTANCE_SETTERS__",s=>lt=s),Ca=e("__VUE_SSR_SETTERS__",s=>Vi=s)}const no=t=>{const e=lt;return tr(t),t.scope.on(),()=>{t.scope.off(),tr(e)}},lc=()=>{lt&&lt.scope.off(),tr(null)};function Eh(t){return t.vnode.shapeFlag&4}let Vi=!1;function pg(t,e=!1,s=!1){e&&Ca(e);const{props:i,children:n}=t.vnode,o=Eh(t);Vm(t,i,o,e),Wm(t,n,s||e);const r=o?mg(t,e):void 0;return e&&Ca(!1),r}function mg(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Dm);const{setup:i}=s;if(i){ws();const n=t.setupContext=i.length>1?bg(t):null,o=no(t),r=so(i,t,0,[t.props,n]),a=Mu(r);if(ks(),o(),(a||t.sp)&&!Rn(t)&&nh(t),a){if(r.then(lc,lc),e)return r.then(l=>{cc(t,l,e)}).catch(l=>{xr(l,t,0)});t.asyncDep=r}else cc(t,r,e)}else Ph(t,e)}function cc(t,e,s){ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fe(e)&&(t.setupState=Ju(e)),Ph(t,s)}let dc;function Ph(t,e,s){const i=t.type;if(!t.render){if(!e&&dc&&!i.render){const n=i.template||ml(t).template;if(n){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,d=st(st({isCustomElement:o,delimiters:a},r),l);i.render=dc(n,d)}}t.render=i.render||Vt}{const n=no(t);ws();try{Rm(t)}finally{ks(),n()}}}const gg={get(t,e){return at(t,"get",""),t[e]}};function bg(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,gg),slots:t.slots,emit:t.emit,expose:e}}function kr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ju(om(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in wi)return wi[s](t)},has(e,s){return s in e||s in wi}})):t.proxy}function yg(t,e=!0){return ue(t)?t.displayName||t.name:t.name||e&&t.__name}function xg(t){return ue(t)&&"__vccOpts"in t}const Nt=(t,e)=>um(t,e,Vi);function Th(t,e,s){const i=arguments.length;return i===2?Fe(e)&&!ie(e)?Bi(e)?D(t,null,[e]):D(t,e):D(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&Bi(s)&&(s=[s]),D(t,e,s))}const vg="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ma;const uc=typeof window<"u"&&window.trustedTypes;if(uc)try{Ma=uc.createPolicy("vue",{createHTML:t=>t})}catch{}const Ih=Ma?t=>Ma.createHTML(t):t=>t,_g="http://www.w3.org/2000/svg",wg="http://www.w3.org/1998/Math/MathML",hs=typeof document<"u"?document:null,hc=hs&&hs.createElement("template"),kg={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?hs.createElementNS(_g,t):e==="mathml"?hs.createElementNS(wg,t):s?hs.createElement(t,{is:s}):hs.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>hs.createTextNode(t),createComment:t=>hs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,o){const r=s?s.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{hc.innerHTML=Ih(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=hc.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Sg=Symbol("_vtc");function Cg(t,e,s){const i=t[Sg];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const sr=Symbol("_vod"),Oh=Symbol("_vsh"),Fn={beforeMount(t,{value:e},{transition:s}){t[sr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):si(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),si(t,!0),i.enter(t)):i.leave(t,()=>{si(t,!1)}):si(t,e))},beforeUnmount(t,{value:e}){si(t,e)}};function si(t,e){t.style.display=e?t[sr]:"none",t[Oh]=!e}const Mg=Symbol(""),Ag=/(^|;)\s*display\s*:/;function Eg(t,e,s){const i=t.style,n=Ye(s);let o=!1;if(s&&!n){if(e)if(Ye(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Uo(i,a,"")}else for(const r in e)s[r]==null&&Uo(i,r,"");for(const r in s)r==="display"&&(o=!0),Uo(i,r,s[r])}else if(n){if(e!==s){const r=i[Mg];r&&(s+=";"+r),i.cssText=s,o=Ag.test(s)}}else e&&t.removeAttribute("style");sr in t&&(t[sr]=o?i.display:"",t[Oh]&&(i.display="none"))}const fc=/\s*!important$/;function Uo(t,e,s){if(ie(s))s.forEach(i=>Uo(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=Pg(t,e);fc.test(s)?t.setProperty(mn(i),s.replace(fc,""),"important"):t[i]=s}}const pc=["Webkit","Moz","ms"],Kr={};function Pg(t,e){const s=Kr[e];if(s)return s;let i=Rt(e);if(i!=="filter"&&i in t)return Kr[e]=i;i=mr(i);for(let n=0;n<pc.length;n++){const o=pc[n]+i;if(o in t)return Kr[e]=o}return e}const mc="http://www.w3.org/1999/xlink";function gc(t,e,s,i,n,o=jp(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(mc,e.slice(6,e.length)):t.setAttributeNS(mc,e,s):s==null||o&&!Tu(s)?t.removeAttribute(e):t.setAttribute(e,o?"":zt(s)?String(s):s)}function bc(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Ih(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let r=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Tu(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{t[e]=s}catch{}r&&t.removeAttribute(n||e)}function Fs(t,e,s,i){t.addEventListener(e,s,i)}function Tg(t,e,s,i){t.removeEventListener(e,s,i)}const yc=Symbol("_vei");function Ig(t,e,s,i,n=null){const o=t[yc]||(t[yc]={}),r=o[e];if(i&&r)r.value=i;else{const[a,l]=Og(e);if(i){const d=o[e]=Lg(i,n);Fs(t,a,d,l)}else r&&(Tg(t,a,r,l),o[e]=void 0)}}const xc=/(?:Once|Passive|Capture)$/;function Og(t){let e;if(xc.test(t)){e={};let i;for(;i=t.match(xc);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mn(t.slice(2)),e]}let Gr=0;const Dg=Promise.resolve(),Rg=()=>Gr||(Dg.then(()=>Gr=0),Gr=Date.now());function Lg(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;os(Fg(i,s.value),e,5,[i])};return s.value=t,s.attached=Rg(),s}function Fg(t,e){if(ie(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const vc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,jg=(t,e,s,i,n,o)=>{const r=n==="svg";e==="class"?Cg(t,i,r):e==="style"?Eg(t,s,i):fr(e)?tl(e)||Ig(t,e,s,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ug(t,e,i,r))?(bc(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&gc(t,e,i,r,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ye(i))?bc(t,Rt(e),i,o,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),gc(t,e,i,r))};function Ug(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&vc(e)&&ue(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return vc(e)&&Ye(s)?!1:e in t}const Bn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ie(e)?s=>Do(e,s):e};function Ng(t){t.target.composing=!0}function _c(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _s=Symbol("_assign"),O={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[_s]=Bn(n);const o=i||n.props&&n.props.type==="number";Fs(t,e?"change":"input",r=>{if(r.target.composing)return;let a=t.value;s&&(a=a.trim()),o&&(a=Go(a)),t[_s](a)}),s&&Fs(t,"change",()=>{t.value=t.value.trim()}),e||(Fs(t,"compositionstart",Ng),Fs(t,"compositionend",_c),Fs(t,"change",_c))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:o}},r){if(t[_s]=Bn(r),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?Go(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===l)||(t.value=l))}},Sr={deep:!0,created(t,e,s){t[_s]=Bn(s),Fs(t,"change",()=>{const i=t._modelValue,n=$i(t),o=t.checked,r=t[_s];if(ie(i)){const a=il(i,n),l=a!==-1;if(o&&!l)r(i.concat(n));else if(!o&&l){const d=[...i];d.splice(a,1),r(d)}}else if(Jn(i)){const a=new Set(i);o?a.add(n):a.delete(n),r(a)}else r(Dh(t,o))})},mounted:wc,beforeUpdate(t,e,s){t[_s]=Bn(s),wc(t,e,s)}};function wc(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(ie(e))n=il(e,i.props.value)>-1;else if(Jn(e))n=e.has(i.props.value);else{if(e===s)return;n=to(e,Dh(t,!0))}t.checked!==n&&(t.checked=n)}const be={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=Jn(e);Fs(t,"change",()=>{const o=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>s?Go($i(r)):$i(r));t[_s](t.multiple?n?new Set(o):o:o[0]),t._assigning=!0,hl(()=>{t._assigning=!1})}),t[_s]=Bn(i)},mounted(t,{value:e}){kc(t,e)},beforeUpdate(t,e,s){t[_s]=Bn(s)},updated(t,{value:e}){t._assigning||kc(t,e)}};function kc(t,e){const s=t.multiple,i=ie(e);if(!(s&&!i&&!Jn(e))){for(let n=0,o=t.options.length;n<o;n++){const r=t.options[n],a=$i(r);if(s)if(i){const l=typeof a;l==="string"||l==="number"?r.selected=e.some(d=>String(d)===String(a)):r.selected=il(e,a)>-1}else r.selected=e.has(a);else if(to($i(r),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function $i(t){return"_value"in t?t._value:t.value}function Dh(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Bg=["ctrl","shift","alt","meta"],Vg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Bg.some(s=>t[`${s}Key`]&&!e.includes(s))},ze=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=(n,...o)=>{for(let r=0;r<e.length;r++){const a=Vg[e[r]];if(a&&a(n,e))return}return t(n,...o)})},$g=st({patchProp:jg},kg);let Sc;function Hg(){return Sc||(Sc=Km($g))}const zg=(...t)=>{const e=Hg().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=qg(i);if(!n)return;const o=e._component;!ue(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=s(n,!1,Wg(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e};function Wg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function qg(t){return Ye(t)?document.querySelector(t):t}const ae=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},Kg={name:"CookieBanner",data(){return{consentGiven:!1}},mounted(){this.consentGiven=localStorage.getItem("cookieConsent")==="true"},methods:{acceptCookies(){this.consentGiven=!0,localStorage.setItem("cookieConsent","true")}}},Gg={key:0,class:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50"};function Yg(t,e,s,i,n,o){return n.consentGiven?I("",!0):(m(),y("div",Gg,[e[1]||(e[1]=c("p",{class:"mb-2"},[se(" Utilizamos cookies para melhorar sua experiência. Ao continuar, você concorda com nossa "),c("a",{href:"#",class:"underline"},"política de privacidade"),se(". ")],-1)),c("button",{onClick:e[0]||(e[0]=(...r)=>o.acceptCookies&&o.acceptCookies(...r)),class:"btn"}," Aceitar ")]))}const Jg=ae(Kg,[["render",Yg]]),Xg={name:"App",components:{CookieBanner:Jg}};function Qg(t,e,s,i,n,o){const r=j("router-view"),a=j("CookieBanner");return m(),y($,null,[D(r),D(a)],64)}const Zg=ae(Xg,[["render",Qg]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const An=typeof document<"u";function Rh(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function eb(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Rh(t.default)}const Se=Object.assign;function Yr(t,e){const s={};for(const i in e){const n=e[i];s[i]=Wt(n)?n.map(t):t(n)}return s}const Si=()=>{},Wt=Array.isArray,Lh=/#/g,tb=/&/g,sb=/\//g,nb=/=/g,ib=/\?/g,Fh=/\+/g,ob=/%5B/g,rb=/%5D/g,jh=/%5E/g,ab=/%60/g,Uh=/%7B/g,lb=/%7C/g,Nh=/%7D/g,cb=/%20/g;function xl(t){return encodeURI(""+t).replace(lb,"|").replace(ob,"[").replace(rb,"]")}function db(t){return xl(t).replace(Uh,"{").replace(Nh,"}").replace(jh,"^")}function Aa(t){return xl(t).replace(Fh,"%2B").replace(cb,"+").replace(Lh,"%23").replace(tb,"%26").replace(ab,"`").replace(Uh,"{").replace(Nh,"}").replace(jh,"^")}function ub(t){return Aa(t).replace(nb,"%3D")}function hb(t){return xl(t).replace(Lh,"%23").replace(ib,"%3F")}function fb(t){return t==null?"":hb(t).replace(sb,"%2F")}function Hi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const pb=/\/$/,mb=t=>t.replace(pb,"");function Jr(t,e,s="/"){let i,n={},o="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),n=t(o)),a>-1&&(i=i||e.slice(0,a),r=e.slice(a,e.length)),i=xb(i??e,s),{fullPath:i+(o&&"?")+o+r,path:i,query:n,hash:Hi(r)}}function gb(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Cc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function bb(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&Vn(e.matched[i],s.matched[n])&&Bh(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Vn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Bh(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!yb(t[s],e[s]))return!1;return!0}function yb(t,e){return Wt(t)?Mc(t,e):Wt(e)?Mc(e,t):t===e}function Mc(t,e){return Wt(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function xb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let o=s.length-1,r,a;for(r=0;r<i.length;r++)if(a=i[r],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+i.slice(r).join("/")}const Ps={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var zi;(function(t){t.pop="pop",t.push="push"})(zi||(zi={}));var Ci;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ci||(Ci={}));function vb(t){if(!t)if(An){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),mb(t)}const _b=/^[^#]+#/;function wb(t,e){return t.replace(_b,"#")+e}function kb(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Cr=()=>({left:window.scrollX,top:window.scrollY});function Sb(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=kb(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ac(t,e){return(history.state?history.state.position-e:-1)+t}const Ea=new Map;function Cb(t,e){Ea.set(t,e)}function Mb(t){const e=Ea.get(t);return Ea.delete(t),e}let Ab=()=>location.protocol+"//"+location.host;function Vh(t,e){const{pathname:s,search:i,hash:n}=e,o=t.indexOf("#");if(o>-1){let a=n.includes(t.slice(o))?t.slice(o).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),Cc(l,"")}return Cc(s,t)+i+n}function Eb(t,e,s,i){let n=[],o=[],r=null;const a=({state:f})=>{const p=Vh(t,location),g=s.value,b=e.value;let x=0;if(f){if(s.value=p,e.value=f,r&&r===g){r=null;return}x=b?f.position-b.position:0}else i(p);n.forEach(w=>{w(s.value,g,{delta:x,type:zi.pop,direction:x?x>0?Ci.forward:Ci.back:Ci.unknown})})};function l(){r=s.value}function d(f){n.push(f);const p=()=>{const g=n.indexOf(f);g>-1&&n.splice(g,1)};return o.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Se({},f.state,{scroll:Cr()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:d,destroy:h}}function Ec(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Cr():null}}function Pb(t){const{history:e,location:s}=window,i={value:Vh(t,s)},n={value:e.state};n.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,d,u){const h=t.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?t:t.slice(h))+l:Ab()+t+l;try{e[u?"replaceState":"pushState"](d,"",f),n.value=d}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function r(l,d){const u=Se({},e.state,Ec(n.value.back,l,n.value.forward,!0),d,{position:n.value.position});o(l,u,!0),i.value=l}function a(l,d){const u=Se({},n.value,e.state,{forward:l,scroll:Cr()});o(u.current,u,!0);const h=Se({},Ec(i.value,l,null),{position:u.position+1},d);o(l,h,!1),i.value=l}return{location:i,state:n,push:a,replace:r}}function Tb(t){t=vb(t);const e=Pb(t),s=Eb(t,e.state,e.location,e.replace);function i(o,r=!0){r||s.pauseListeners(),history.go(o)}const n=Se({location:"",base:t,go:i,createHref:wb.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Ib(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Tb(t)}function Ob(t){return typeof t=="string"||t&&typeof t=="object"}function $h(t){return typeof t=="string"||typeof t=="symbol"}const Hh=Symbol("");var Pc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Pc||(Pc={}));function $n(t,e){return Se(new Error,{type:t,[Hh]:!0},e)}function ls(t,e){return t instanceof Error&&Hh in t&&(e==null||!!(t.type&e))}const Tc="[^/]+?",Db={sensitive:!1,strict:!1,start:!0,end:!0},Rb=/[.+*?^${}()[\]/\\]/g;function Lb(t,e){const s=Se({},Db,e),i=[];let n=s.start?"^":"";const o=[];for(const d of t){const u=d.length?[]:[90];s.strict&&!d.length&&(n+="/");for(let h=0;h<d.length;h++){const f=d[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(n+="/"),n+=f.value.replace(Rb,"\\$&"),p+=40;else if(f.type===1){const{value:g,repeatable:b,optional:x,regexp:w}=f;o.push({name:g,repeatable:b,optional:x});const k=w||Tc;if(k!==Tc){p+=10;try{new RegExp(`(${k})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${g}" (${k}): `+A.message)}}let E=b?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(E=x&&d.length<2?`(?:/${E})`:"/"+E),x&&(E+="?"),n+=E,p+=20,x&&(p+=-8),b&&(p+=-20),k===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=.7000000000000001}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const r=new RegExp(n,s.sensitive?"":"i");function a(d){const u=d.match(r),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",g=o[f-1];h[g.name]=p&&g.repeatable?p.split("/"):p}return h}function l(d){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:b,optional:x}=p,w=g in d?d[g]:"";if(Wt(w)&&!b)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const k=Wt(w)?w.join("/"):w;if(!k)if(x)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=k}}return u||"/"}return{re:r,score:i,keys:o,parse:a,stringify:l}}function Fb(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function zh(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const o=Fb(i[s],n[s]);if(o)return o;s++}if(Math.abs(n.length-i.length)===1){if(Ic(i))return 1;if(Ic(n))return-1}return n.length-i.length}function Ic(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jb={type:0,value:""},Ub=/[a-zA-Z0-9_]/;function Nb(t){if(!t)return[[]];if(t==="/")return[[jb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${d}": ${p}`)}let s=0,i=s;const n=[];let o;function r(){o&&n.push(o),o=[]}let a=0,l,d="",u="";function h(){d&&(s===0?o.push({type:0,value:d}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),d="")}function f(){d+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){i=s,s=4;continue}switch(s){case 0:l==="/"?(d&&h(),r()):l===":"?(h(),s=1):f();break;case 4:f(),s=i;break;case 1:l==="("?s=2:Ub.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=3:u+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${d}"`),h(),r(),n}function Bb(t,e,s){const i=Lb(Nb(t.path),s),n=Se(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Vb(t,e){const s=[],i=new Map;e=Lc({strict:!1,end:!0,sensitive:!1},e);function n(h){return i.get(h)}function o(h,f,p){const g=!p,b=Dc(h);b.aliasOf=p&&p.record;const x=Lc(e,h),w=[b];if("alias"in h){const A=typeof h.alias=="string"?[h.alias]:h.alias;for(const P of A)w.push(Dc(Se({},b,{components:p?p.record.components:b.components,path:P,aliasOf:p?p.record:b})))}let k,E;for(const A of w){const{path:P}=A;if(f&&P[0]!=="/"){const N=f.record.path,F=N[N.length-1]==="/"?"":"/";A.path=f.record.path+(P&&F+P)}if(k=Bb(A,f,x),p?p.alias.push(k):(E=E||k,E!==k&&E.alias.push(k),g&&h.name&&!Rc(k)&&r(h.name)),Wh(k)&&l(k),b.children){const N=b.children;for(let F=0;F<N.length;F++)o(N[F],k,p&&p.children[F])}p=p||k}return E?()=>{r(E)}:Si}function r(h){if($h(h)){const f=i.get(h);f&&(i.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&i.delete(h.record.name),h.children.forEach(r),h.alias.forEach(r))}}function a(){return s}function l(h){const f=zb(h,s);s.splice(f,0,h),h.record.name&&!Rc(h)&&i.set(h.record.name,h)}function d(h,f){let p,g={},b,x;if("name"in h&&h.name){if(p=i.get(h.name),!p)throw $n(1,{location:h});x=p.record.name,g=Se(Oc(f.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&Oc(h.params,p.keys.map(E=>E.name))),b=p.stringify(g)}else if(h.path!=null)b=h.path,p=s.find(E=>E.re.test(b)),p&&(g=p.parse(b),x=p.record.name);else{if(p=f.name?i.get(f.name):s.find(E=>E.re.test(f.path)),!p)throw $n(1,{location:h,currentLocation:f});x=p.record.name,g=Se({},f.params,h.params),b=p.stringify(g)}const w=[];let k=p;for(;k;)w.unshift(k.record),k=k.parent;return{name:x,path:b,params:g,matched:w,meta:Hb(w)}}t.forEach(h=>o(h));function u(){s.length=0,i.clear()}return{addRoute:o,resolve:d,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function Oc(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function Dc(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$b(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $b(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function Rc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hb(t){return t.reduce((e,s)=>Se(e,s.meta),{})}function Lc(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}function zb(t,e){let s=0,i=e.length;for(;s!==i;){const o=s+i>>1;zh(t,e[o])<0?i=o:s=o+1}const n=Wb(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function Wb(t){let e=t;for(;e=e.parent;)if(Wh(e)&&zh(t,e)===0)return e}function Wh({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qb(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<i.length;++n){const o=i[n].replace(Fh," "),r=o.indexOf("="),a=Hi(r<0?o:o.slice(0,r)),l=r<0?null:Hi(o.slice(r+1));if(a in e){let d=e[a];Wt(d)||(d=e[a]=[d]),d.push(l)}else e[a]=l}return e}function Fc(t){let e="";for(let s in t){const i=t[s];if(s=ub(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Wt(i)?i.map(o=>o&&Aa(o)):[i&&Aa(i)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+s,o!=null&&(e+="="+o))})}return e}function Kb(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Wt(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Gb=Symbol(""),jc=Symbol(""),vl=Symbol(""),qh=Symbol(""),Pa=Symbol("");function ni(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Rs(t,e,s,i,n,o=r=>r()){const r=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const d=f=>{f===!1?l($n(4,{from:s,to:e})):f instanceof Error?l(f):Ob(f)?l($n(2,{from:e,to:f})):(r&&i.enterCallbacks[n]===r&&typeof f=="function"&&r.push(f),a())},u=o(()=>t.call(i&&i.instances[n],e,s,d));let h=Promise.resolve(u);t.length<3&&(h=h.then(d)),h.catch(f=>l(f))})}function Xr(t,e,s,i,n=o=>o()){const o=[];for(const r of t)for(const a in r.components){let l=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(Rh(l)){const u=(l.__vccOpts||l)[e];u&&o.push(Rs(u,s,i,r,a,n))}else{let d=l();o.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const h=eb(u)?u.default:u;r.mods[a]=u,r.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&Rs(p,s,i,r,a,n)()}))}}return o}function Uc(t){const e=vs(vl),s=vs(qh),i=Nt(()=>{const l=On(t.to);return e.resolve(l)}),n=Nt(()=>{const{matched:l}=i.value,{length:d}=l,u=l[d-1],h=s.matched;if(!u||!h.length)return-1;const f=h.findIndex(Vn.bind(null,u));if(f>-1)return f;const p=Nc(l[d-2]);return d>1&&Nc(u)===p&&h[h.length-1].path!==p?h.findIndex(Vn.bind(null,l[d-2])):f}),o=Nt(()=>n.value>-1&&Zb(s.params,i.value.params)),r=Nt(()=>n.value>-1&&n.value===s.matched.length-1&&Bh(s.params,i.value.params));function a(l={}){if(Qb(l)){const d=e[On(t.replace)?"replace":"push"](On(t.to)).catch(Si);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:Nt(()=>i.value.href),isActive:o,isExactActive:r,navigate:a}}function Yb(t){return t.length===1?t[0]:t}const Jb=sh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Uc,setup(t,{slots:e}){const s=yr(Uc(t)),{options:i}=vs(vl),n=Nt(()=>({[Bc(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Bc(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&Yb(e.default(s));return t.custom?o:Th("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},o)}}}),Xb=Jb;function Qb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Zb(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Wt(n)||n.length!==i.length||i.some((o,r)=>o!==n[r]))return!1}return!0}function Nc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Bc=(t,e,s)=>t??e??s,ey=sh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=vs(Pa),n=Nt(()=>t.route||i.value),o=vs(jc,0),r=Nt(()=>{let d=On(o);const{matched:u}=n.value;let h;for(;(h=u[d])&&!h.components;)d++;return d}),a=Nt(()=>n.value.matched[r.value]);Ro(jc,Nt(()=>r.value+1)),Ro(Gb,a),Ro(Pa,n);const l=rm();return Lo(()=>[l.value,a.value,t.name],([d,u,h],[f,p,g])=>{u&&(u.instances[h]=d,p&&p!==u&&d&&d===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),d&&u&&(!p||!Vn(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(b=>b(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return Vc(s.default,{Component:f,route:d});const p=h.props[u],g=p?p===!0?d.params:typeof p=="function"?p(d):p:null,x=Th(f,Se({},g,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Vc(s.default,{Component:x,route:d})||x}}});function Vc(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const ty=ey;function sy(t){const e=Vb(t.routes,t),s=t.parseQuery||qb,i=t.stringifyQuery||Fc,n=t.history,o=ni(),r=ni(),a=ni(),l=am(Ps);let d=Ps;An&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Yr.bind(null,L=>""+L),h=Yr.bind(null,fb),f=Yr.bind(null,Hi);function p(L,J){let G,ee;return $h(L)?(G=e.getRecordMatcher(L),ee=J):ee=L,e.addRoute(ee,G)}function g(L){const J=e.getRecordMatcher(L);J&&e.removeRoute(J)}function b(){return e.getRoutes().map(L=>L.record)}function x(L){return!!e.getRecordMatcher(L)}function w(L,J){if(J=Se({},J||l.value),typeof L=="string"){const _=Jr(s,L,J.path),T=e.resolve({path:_.path},J),U=n.createHref(_.fullPath);return Se(_,T,{params:f(T.params),hash:Hi(_.hash),redirectedFrom:void 0,href:U})}let G;if(L.path!=null)G=Se({},L,{path:Jr(s,L.path,J.path).path});else{const _=Se({},L.params);for(const T in _)_[T]==null&&delete _[T];G=Se({},L,{params:h(_)}),J.params=h(J.params)}const ee=e.resolve(G,J),ke=L.hash||"";ee.params=u(f(ee.params));const Be=gb(i,Se({},L,{hash:db(ke),path:ee.path})),v=n.createHref(Be);return Se({fullPath:Be,hash:ke,query:i===Fc?Kb(L.query):L.query||{}},ee,{redirectedFrom:void 0,href:v})}function k(L){return typeof L=="string"?Jr(s,L,l.value.path):Se({},L)}function E(L,J){if(d!==L)return $n(8,{from:J,to:L})}function A(L){return F(L)}function P(L){return A(Se(k(L),{replace:!0}))}function N(L){const J=L.matched[L.matched.length-1];if(J&&J.redirect){const{redirect:G}=J;let ee=typeof G=="function"?G(L):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=k(ee):{path:ee},ee.params={}),Se({query:L.query,hash:L.hash,params:ee.path!=null?{}:L.params},ee)}}function F(L,J){const G=d=w(L),ee=l.value,ke=L.state,Be=L.force,v=L.replace===!0,_=N(G);if(_)return F(Se(k(_),{state:typeof _=="object"?Se({},ke,_.state):ke,force:Be,replace:v}),J||G);const T=G;T.redirectedFrom=J;let U;return!Be&&bb(i,ee,G)&&(U=$n(16,{to:T,from:ee}),ft(ee,ee,!0,!1)),(U?Promise.resolve(U):oe(T,ee)).catch(R=>ls(R)?ls(R,2)?R:ht(R):fe(R,T,ee)).then(R=>{if(R){if(ls(R,2))return F(Se({replace:v},k(R.to),{state:typeof R.to=="object"?Se({},ke,R.to.state):ke,force:Be}),J||T)}else R=he(T,ee,!0,v,ke);return le(T,ee,R),R})}function H(L,J){const G=E(L,J);return G?Promise.reject(G):Promise.resolve()}function Z(L){const J=bt.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(L):L()}function oe(L,J){let G;const[ee,ke,Be]=ny(L,J);G=Xr(ee.reverse(),"beforeRouteLeave",L,J);for(const _ of ee)_.leaveGuards.forEach(T=>{G.push(Rs(T,L,J))});const v=H.bind(null,L,J);return G.push(v),Ge(G).then(()=>{G=[];for(const _ of o.list())G.push(Rs(_,L,J));return G.push(v),Ge(G)}).then(()=>{G=Xr(ke,"beforeRouteUpdate",L,J);for(const _ of ke)_.updateGuards.forEach(T=>{G.push(Rs(T,L,J))});return G.push(v),Ge(G)}).then(()=>{G=[];for(const _ of Be)if(_.beforeEnter)if(Wt(_.beforeEnter))for(const T of _.beforeEnter)G.push(Rs(T,L,J));else G.push(Rs(_.beforeEnter,L,J));return G.push(v),Ge(G)}).then(()=>(L.matched.forEach(_=>_.enterCallbacks={}),G=Xr(Be,"beforeRouteEnter",L,J,Z),G.push(v),Ge(G))).then(()=>{G=[];for(const _ of r.list())G.push(Rs(_,L,J));return G.push(v),Ge(G)}).catch(_=>ls(_,8)?_:Promise.reject(_))}function le(L,J,G){a.list().forEach(ee=>Z(()=>ee(L,J,G)))}function he(L,J,G,ee,ke){const Be=E(L,J);if(Be)return Be;const v=J===Ps,_=An?history.state:{};G&&(ee||v?n.replace(L.fullPath,Se({scroll:v&&_&&_.scroll},ke)):n.push(L.fullPath,ke)),l.value=L,ft(L,J,G,v),ht()}let Pe;function Qe(){Pe||(Pe=n.listen((L,J,G)=>{if(!Gt.listening)return;const ee=w(L),ke=N(ee);if(ke){F(Se(ke,{replace:!0,force:!0}),ee).catch(Si);return}d=ee;const Be=l.value;An&&Cb(Ac(Be.fullPath,G.delta),Cr()),oe(ee,Be).catch(v=>ls(v,12)?v:ls(v,2)?(F(Se(k(v.to),{force:!0}),ee).then(_=>{ls(_,20)&&!G.delta&&G.type===zi.pop&&n.go(-1,!1)}).catch(Si),Promise.reject()):(G.delta&&n.go(-G.delta,!1),fe(v,ee,Be))).then(v=>{v=v||he(ee,Be,!1),v&&(G.delta&&!ls(v,8)?n.go(-G.delta,!1):G.type===zi.pop&&ls(v,20)&&n.go(-1,!1)),le(ee,Be,v)}).catch(Si)}))}let _e=ni(),de=ni(),re;function fe(L,J,G){ht(L);const ee=de.list();return ee.length?ee.forEach(ke=>ke(L,J,G)):console.error(L),Promise.reject(L)}function Ie(){return re&&l.value!==Ps?Promise.resolve():new Promise((L,J)=>{_e.add([L,J])})}function ht(L){return re||(re=!L,Qe(),_e.list().forEach(([J,G])=>L?G(L):J()),_e.reset()),L}function ft(L,J,G,ee){const{scrollBehavior:ke}=t;if(!An||!ke)return Promise.resolve();const Be=!G&&Mb(Ac(L.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return hl().then(()=>ke(L,J,Be)).then(v=>v&&Sb(v)).catch(v=>fe(v,L,J))}const We=L=>n.go(L);let It;const bt=new Set,Gt={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:b,resolve:w,options:t,push:A,replace:P,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:de.add,isReady:Ie,install(L){const J=this;L.component("RouterLink",Xb),L.component("RouterView",ty),L.config.globalProperties.$router=J,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>On(l)}),An&&!It&&l.value===Ps&&(It=!0,A(n.location).catch(ke=>{}));const G={};for(const ke in Ps)Object.defineProperty(G,ke,{get:()=>l.value[ke],enumerable:!0});L.provide(vl,J),L.provide(qh,Ku(G)),L.provide(Pa,l);const ee=L.unmount;bt.add(L),L.unmount=function(){bt.delete(L),bt.size<1&&(d=Ps,Pe&&Pe(),Pe=null,l.value=Ps,It=!1,re=!1),ee()}}};function Ge(L){return L.reduce((J,G)=>J.then(()=>Z(G)),Promise.resolve())}return Gt}function ny(t,e){const s=[],i=[],n=[],o=Math.max(e.matched.length,t.matched.length);for(let r=0;r<o;r++){const a=e.matched[r];a&&(t.matched.find(d=>Vn(d,a))?i.push(a):s.push(a));const l=t.matched[r];l&&(e.matched.find(d=>Vn(d,l))||n.push(l))}return[s,i,n]}const iy={name:"Navbar",data(){return{open:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route(){this.open=!1}},methods:{toggleMenu(){this.open=!this.open},handleScroll(){this.open&&(this.open=!1)}}},oy={class:"bg-white/80 backdrop-blur border-b sticky top-0 z-40"},ry={class:"container mx-auto flex items-center justify-between px-6 md:px-10 py-3"},ay={class:"hidden md:flex items-center space-x-4"},ly={key:0,class:"absolute top-full left-0 w-full bg-white shadow-lg md:hidden flex flex-col items-start space-y-4 py-4 px-8"};function cy(t,e,s,i,n,o){const r=j("router-link");return m(),y("nav",oy,[c("div",ry,[D(r,{to:"/",class:"text-xl font-semibold text-primary-dark"},{default:X(()=>e[5]||(e[5]=[se("Agenda Zen")])),_:1,__:[5]}),c("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden focus:outline-none"},e[6]||(e[6]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),c("div",ay,[D(r,{to:"/buscar",class:"text-primary hover:underline"},{default:X(()=>e[7]||(e[7]=[se("Buscar")])),_:1,__:[7]}),D(r,{to:"/planos",class:"text-primary hover:underline"},{default:X(()=>e[8]||(e[8]=[se("Planos")])),_:1,__:[8]}),D(r,{to:"/contato",class:"text-primary hover:underline"},{default:X(()=>e[9]||(e[9]=[se("Contato")])),_:1,__:[9]}),D(r,{to:"/login",class:"btn"},{default:X(()=>e[10]||(e[10]=[se("Login")])),_:1,__:[10]})]),n.open?(m(),y("div",ly,[D(r,{onClick:e[1]||(e[1]=a=>n.open=!1),to:"/buscar",class:"text-primary hover:underline"},{default:X(()=>e[11]||(e[11]=[se("Buscar")])),_:1,__:[11]}),D(r,{onClick:e[2]||(e[2]=a=>n.open=!1),to:"/planos",class:"text-primary hover:underline"},{default:X(()=>e[12]||(e[12]=[se("Planos")])),_:1,__:[12]}),D(r,{onClick:e[3]||(e[3]=a=>n.open=!1),to:"/contato",class:"text-primary hover:underline"},{default:X(()=>e[13]||(e[13]=[se("Contato")])),_:1,__:[13]}),D(r,{onClick:e[4]||(e[4]=a=>n.open=!1),to:"/login",class:"btn"},{default:X(()=>e[14]||(e[14]=[se("Login")])),_:1,__:[14]})])):I("",!0)])])}const qt=ae(iy,[["render",cy]]),dy="/hero-illustration.png",uy={name:"HeroBanner"},hy={class:"text-center py-24 bg-gradient-to-r from-primary to-primary-dark text-white"},fy={class:"container mx-auto max-w-5xl px-4"},py={class:"grid grid-cols-1 md:grid-cols-2 items-center gap-12"},my={class:"md:text-left"},gy={class:"space-x-4"};function by(t,e,s,i,n,o){const r=j("router-link");return m(),y("section",hy,[c("div",fy,[c("div",py,[c("div",my,[e[2]||(e[2]=c("h1",{class:"text-5xl font-extrabold mb-6"},"A sua agenda online que trabalha por você!",-1)),e[3]||(e[3]=c("p",{class:"text-white/80 text-lg mb-8"},"Agendamentos, lembretes automáticos, pagamentos e muito mais — tudo num só lugar.",-1)),c("div",gy,[D(r,{to:"/cadastro",class:"btn"},{default:X(()=>e[0]||(e[0]=[se("Comece grátis agora")])),_:1,__:[0]}),D(r,{to:"/login",class:"bg-white text-primary px-6 py-2 rounded font-semibold shadow hover:bg-gray-50"},{default:X(()=>e[1]||(e[1]=[se("Entrar")])),_:1,__:[1]})])]),e[4]||(e[4]=c("div",null,[c("img",{src:dy,alt:"Ilustração profissional usando a plataforma",class:"w-full h-auto mx-auto"})],-1))])])])}const yy=ae(uy,[["render",by]]),xy={name:"FeaturesSection",data(){return{features:[{icon:"/icons/whatsapp.svg",text:"Confirmação por WhatsApp"},{icon:"/icons/bell.svg",text:"Evite faltas e atrasos"},{icon:"/icons/pix.svg",text:"Pagamento integrado"},{icon:"/icons/calendar.svg",text:"Sistema simples de usar"}]}}},vy={class:"py-20 px-8 bg-gray-50"},_y={class:"container mx-auto"},wy={class:"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},ky=["src"],Sy={class:"block text-gray-700 text-lg font-medium"};function Cy(t,e,s,i,n,o){return m(),y("section",vy,[c("div",_y,[e[0]||(e[0]=c("h2",{class:"text-3xl font-bold text-center mb-12"},"Funcionalidades",-1)),c("div",wy,[(m(!0),y($,null,Q(n.features,(r,a)=>(m(),y("div",{key:a,class:"bg-white rounded-lg p-6 shadow text-center space-y-4"},[c("img",{src:r.icon,alt:"",class:"w-10 h-10 mx-auto"},null,8,ky),c("span",Sy,S(r.text),1)]))),128))])])])}const My=ae(xy,[["render",Cy]]),Ay={name:"TestimonialsSection",data(){return{testimonials:[{photo:"https://via.placeholder.com/80",text:"O AgendaZen facilitou totalmente meus atendimentos.",name:"Ana Lima",role:"Fisioterapeuta"},{photo:"https://via.placeholder.com/80",text:"Uso todos os dias e recomendo para meus colegas.",name:"Carlos Souza",role:"Psicólogo"},{photo:"https://via.placeholder.com/80",text:"Meus clientes adoram receber lembretes automáticos.",name:"Mariana Alves",role:"Manicure"}]}}},Ey={class:"py-20 px-8"},Py={class:"container mx-auto text-center"},Ty={class:"max-w-5xl mx-auto grid gap-8 md:grid-cols-3"},Iy=["src"],Oy={class:"italic mb-2"},Dy={class:"font-semibold text-primary"},Ry={class:"text-sm text-gray-500"};function Ly(t,e,s,i,n,o){return m(),y("section",Ey,[c("div",Py,[e[0]||(e[0]=c("h2",{class:"text-3xl font-bold mb-12"},"O que dizem nossos clientes",-1)),c("div",Ty,[(m(!0),y($,null,Q(n.testimonials,r=>(m(),y("div",{key:r.name,class:"bg-white p-6 rounded-lg shadow"},[c("img",{src:r.photo,alt:"Foto de {{ t.name }}",class:"w-16 h-16 mx-auto rounded-full mb-4"},null,8,Iy),c("p",Oy,S(r.text),1),c("p",Dy,S(r.name),1),c("p",Ry,S(r.role),1)]))),128))])])])}const Fy=ae(Ay,[["render",Ly]]),jy={name:"AudienceSection",data(){return{audience:[{icon:"🧑‍⚕️",title:"Fisioterapeutas",desc:"Organize sessões e pagamentos facilmente."},{icon:"🧠",title:"Psicólogos",desc:"Gerencie consultas e lembretes automáticos."},{icon:"💇‍♀️",title:"Cabeleireiros",desc:"Agendamentos rápidos pelo celular."},{icon:"💅",title:"Manicure",desc:"Confirmações pelo WhatsApp em segundos."}]}}},Uy={class:"py-20 px-8 bg-gray-50"},Ny={class:"container mx-auto text-center"},By={class:"max-w-5xl mx-auto grid gap-8 md:grid-cols-4"},Vy={class:"text-4xl"},$y={class:"font-semibold"},Hy={class:"text-sm text-gray-600"};function zy(t,e,s,i,n,o){return m(),y("section",Uy,[c("div",Ny,[e[0]||(e[0]=c("h2",{class:"text-3xl font-bold mb-12"},"Para quem é",-1)),c("div",By,[(m(!0),y($,null,Q(n.audience,r=>(m(),y("div",{key:r.title,class:"space-y-3"},[c("div",Vy,S(r.icon),1),c("h3",$y,S(r.title),1),c("p",Hy,S(r.desc),1)]))),128))])])])}const Wy=ae(jy,[["render",zy]]),qy={name:"PricingSection",data(){return{plans:[{name:"Grátis",price:"R$0",items:["Agenda online","Lembretes por e-mail"]},{name:"Profissional",price:"R$49/mês",items:["WhatsApp automático","Pagamentos integrados"]},{name:"Premium",price:"R$79/mês",items:["Tudo do Profissional","Suporte prioritário"]}]}}},Ky={class:"py-20 px-8"},Gy={class:"container mx-auto text-center"},Yy={class:"max-w-5xl mx-auto grid gap-8 md:grid-cols-3"},Jy={class:"text-xl font-semibold mb-2"},Xy={class:"text-3xl font-bold text-primary mb-4"},Qy={class:"text-sm text-gray-600 flex-1 space-y-1 mb-6 text-left"};function Zy(t,e,s,i,n,o){const r=j("router-link");return m(),y("section",Ky,[c("div",Gy,[e[1]||(e[1]=c("h2",{class:"text-3xl font-bold mb-12"},"Planos e preços",-1)),c("div",Yy,[(m(!0),y($,null,Q(n.plans,a=>(m(),y("div",{key:a.name,class:"border rounded-lg p-6 shadow flex flex-col"},[c("h3",Jy,S(a.name),1),c("p",Xy,S(a.price),1),c("ul",Qy,[(m(!0),y($,null,Q(a.items,l=>(m(),y("li",{key:l},"- "+S(l),1))),128))]),D(r,{to:"/cadastro",class:"btn mt-auto"},{default:X(()=>e[0]||(e[0]=[se("Teste Grátis")])),_:1,__:[0]})]))),128))])])])}const e0=ae(qy,[["render",Zy]]),_l="/icons/whatsapp.svg",t0={name:"Footer"},s0={class:"bg-gray-100 text-center text-sm text-gray-500 py-6 space-y-4 border-t"},n0={class:"container mx-auto space-y-4"},i0={class:"flex flex-wrap justify-center space-x-2"};function o0(t,e,s,i,n,o){const r=j("router-link");return m(),y("footer",s0,[c("div",n0,[e[9]||(e[9]=Ws('<div class="space-x-4 text-primary"><a href="https://www.instagram.com/agendazen_" target="_blank" class="hover:underline">Instagram</a><a href="https://www.facebook.com/agenda.zen" target="_blank" class="hover:underline">Facebook</a><a href="https://x.com/agenda_zen" target="_blank" class="hover:underline">X</a><a href="https://wa.me/5531999999999" target="_blank" class="hover:underline inline-flex items-center"><img src="'+_l+'" alt="WhatsApp" class="w-4 h-4 mr-1">WhatsApp </a></div>',1)),c("div",i0,[D(r,{to:"/termos-de-uso",class:"hover:underline"},{default:X(()=>e[0]||(e[0]=[se("Termos de uso")])),_:1,__:[0]}),e[5]||(e[5]=c("span",null,"|",-1)),D(r,{to:"/planos",class:"hover:underline"},{default:X(()=>e[1]||(e[1]=[se("Planos")])),_:1,__:[1]}),e[6]||(e[6]=c("span",null,"|",-1)),D(r,{to:"/contato",class:"hover:underline"},{default:X(()=>e[2]||(e[2]=[se("Contato")])),_:1,__:[2]}),e[7]||(e[7]=c("span",null,"|",-1)),D(r,{to:"/faq",class:"hover:underline"},{default:X(()=>e[3]||(e[3]=[se("FAQ")])),_:1,__:[3]}),e[8]||(e[8]=c("span",null,"|",-1)),D(r,{to:"/politica-de-privacidade",class:"hover:underline"},{default:X(()=>e[4]||(e[4]=[se("Política de privacidade")])),_:1,__:[4]})]),c("p",null,"© "+S(new Date().getFullYear())+" Agenda Zen — Todos os direitos reservados",1)])])}const Kt=ae(t0,[["render",o0]]),r0={name:"Home",components:{Navbar:qt,HeroBanner:yy,FeaturesSection:My,TestimonialsSection:Fy,AudienceSection:Wy,PricingSection:e0,Footer:Kt}};function a0(t,e,s,i,n,o){const r=j("Navbar"),a=j("HeroBanner"),l=j("FeaturesSection"),d=j("TestimonialsSection"),u=j("AudienceSection"),h=j("PricingSection"),f=j("Footer");return m(),y($,null,[D(r),D(a),D(l),D(d),D(u),D(h),D(f)],64)}const l0=ae(r0,[["render",a0]]),c0="modulepreload",d0=function(t){return"/"+t},$c={},Hn=function(e,s,i){if(!s||s.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=d0(o),o in $c)return;$c[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!i)for(let u=n.length-1;u>=0;u--){const h=n[u];if(h.href===o&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":c0,r||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),r)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},u0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Hn(()=>Promise.resolve().then(()=>Xn),void 0).then(({default:i})=>i(...s)):e=fetch,(...s)=>e(...s)};class wl extends Error{constructor(e,s="FunctionsError",i){super(e),this.name=s,this.context=i}}class h0 extends wl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class f0 extends wl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class p0 extends wl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ta;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ta||(Ta={}));var m0=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};class g0{constructor(e,{headers:s={},customFetch:i,region:n=Ta.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=u0(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var i;return m0(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;r&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=r):typeof r=="string"?(a["Content-Type"]="text/plain",d=r):typeof FormData<"u"&&r instanceof FormData?d=r:(a["Content-Type"]="application/json",d=JSON.stringify(r)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:d}).catch(g=>{throw new h0(g)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new f0(u);if(!u.ok)throw new p0(u);let f=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(n){return{data:null,error:n}}})}}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function b0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(s,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),s}var _t={},kl={},Mr={},io={},Ar={},Er={},y0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zn=y0();const x0=zn.fetch,Kh=zn.fetch.bind(zn),Gh=zn.Headers,v0=zn.Request,_0=zn.Response,Xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gh,Request:v0,Response:_0,default:Kh,fetch:x0},Symbol.toStringTag,{value:"Module"})),w0=b0(Xn);var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});let k0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Pr.default=k0;var Yh=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Er,"__esModule",{value:!0});const S0=Yh(w0),C0=Yh(Pr);let M0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=S0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var r,a,l;let d=null,u=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const b=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),x=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await o.text();try{d=JSON.parse(b),Array.isArray(d)&&o.status===404&&(u=[],d=null,f=200,p="OK")}catch{o.status===404&&b===""?(f=204,p="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,f=200,p="OK"),d&&this.shouldThrowOnError)throw new C0.default(d)}return{error:d,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(o=>{var r,a,l;return{error:{message:`${(r=o==null?void 0:o.name)!==null&&r!==void 0?r:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}returns(){return this}overrideTypes(){return this}};Er.default=M0;var A0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ar,"__esModule",{value:!0});const E0=A0(Er);let P0=class extends E0.default{select(e){let s=!1;const i=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:i,foreignTable:n,referencedTable:o=n}={}){const r=o?`${o}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:i=s}={}){const n=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:i,referencedTable:n=i}={}){const o=typeof n>"u"?"offset":`${n}.offset`,r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(r,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:i=!1,buffers:n=!1,wal:o=!1,format:r="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,i?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${d}"; options=${l};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ar.default=P0;var T0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});const I0=T0(Ar);let O0=class extends I0.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const i=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:i,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const r=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${o}fts${r}.${s}`),this}match(e){return Object.entries(e).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(e,s,i){return this.url.searchParams.append(e,`not.${s}.${i}`),this}or(e,{foreignTable:s,referencedTable:i=s}={}){const n=i?`${i}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,i){return this.url.searchParams.append(e,`${s}.${i}`),this}};io.default=O0;var D0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mr,"__esModule",{value:!0});const ii=D0(io);let R0=class{constructor(e,{headers:s={},schema:i,fetch:n}){this.url=e,this.headers=s,this.schema=i,this.fetch=n}select(e,{head:s=!1,count:i}={}){const n=s?"HEAD":"GET";let o=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),i&&(this.headers.Prefer=`count=${i}`),new ii.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:i=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const r=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(r.length>0){const a=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ii.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:i=!1,count:n,defaultToNull:o=!0}={}){const r="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new ii.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const i="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new ii.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ii.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Mr.default=R0;var Tr={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.version=void 0;Ir.version="0.0.0-automated";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.DEFAULT_HEADERS=void 0;const L0=Ir;Tr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${L0.version}`};var Jh=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kl,"__esModule",{value:!0});const F0=Jh(Mr),j0=Jh(io),U0=Tr;let N0=class Xh{constructor(e,{headers:s={},schema:i,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},U0.DEFAULT_HEADERS),s),this.schemaName=i,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new F0.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:i=!1,get:n=!1,count:o}={}){let r;const a=new URL(`${this.url}/rpc/${e}`);let l;i||n?(r=i?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(r="POST",l=s);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new j0.default({method:r,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};kl.default=N0;var Qn=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_t,"__esModule",{value:!0});_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const Qh=Qn(kl);_t.PostgrestClient=Qh.default;const Zh=Qn(Mr);_t.PostgrestQueryBuilder=Zh.default;const ef=Qn(io);_t.PostgrestFilterBuilder=ef.default;const tf=Qn(Ar);_t.PostgrestTransformBuilder=tf.default;const sf=Qn(Er);_t.PostgrestBuilder=sf.default;const nf=Qn(Pr);_t.PostgrestError=nf.default;var B0=_t.default={PostgrestClient:Qh.default,PostgrestQueryBuilder:Zh.default,PostgrestFilterBuilder:ef.default,PostgrestTransformBuilder:tf.default,PostgrestBuilder:sf.default,PostgrestError:nf.default};const{PostgrestClient:V0,PostgrestQueryBuilder:y5,PostgrestFilterBuilder:x5,PostgrestTransformBuilder:v5,PostgrestBuilder:_5,PostgrestError:w5}=B0,$0="2.11.2",H0={"X-Client-Info":`realtime-js/${$0}`},z0="1.0.0",of=1e4,W0=1e3;var jn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(jn||(jn={}));var At;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(At||(At={}));var Ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ut||(Ut={}));var Ia;(function(t){t.websocket="websocket"})(Ia||(Ia={}));var ln;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ln||(ln={}));class q0{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,s,i)}_decodeBroadcast(e,s,i){const n=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=i.decode(e.slice(r,r+n));r=r+n;const l=i.decode(e.slice(r,r+o));r=r+o;const d=JSON.parse(i.decode(e.slice(r,e.byteLength)));return{ref:null,topic:a,event:l,payload:d}}}class rf{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const Hc=(t,e,s={})=>{var i;const n=(i=s.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,r)=>(o[r]=K0(r,t,e,n),o),{})},K0=(t,e,s,i)=>{const n=e.find(a=>a.name===t),o=n==null?void 0:n.type,r=s[t];return o&&!i.includes(o)?af(o,r):Oa(r)},af=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return X0(e,s)}switch(t){case De.bool:return G0(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return Y0(e);case De.json:case De.jsonb:return J0(e);case De.timestamp:return Q0(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Oa(e);default:return Oa(e)}},Oa=t=>t,G0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Y0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},J0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},X0=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,i=t[s];if(t[0]==="{"&&i==="}"){let o;const r=t.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>af(e,a))}return t},Q0=t=>typeof t=="string"?t.replace(" ","T"):t,lf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Qr{constructor(e,s,i={},n=of){this.channel=e,this.event=s,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var i;return this._hasReceived(e)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zc||(zc={}));class Mi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mi.syncState(this.state,n,o,r),this.pendingDiffs.forEach(l=>{this.state=Mi.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Mi.syncDiff(this.state,n,o,r),a())}),this.onJoin((n,o,r)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:r})}),this.onLeave((n,o,r)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,i,n){const o=this.cloneDeep(e),r=this.transformState(s),a={},l={};return this.map(o,(d,u)=>{r[d]||(l[d]=u)}),this.map(r,(d,u)=>{const h=o[d];if(h){const f=u.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),g=u.filter(x=>p.indexOf(x.presence_ref)<0),b=h.filter(x=>f.indexOf(x.presence_ref)<0);g.length>0&&(a[d]=g),b.length>0&&(l[d]=b)}else a[d]=u}),this.syncDiff(o,{joins:a,leaves:l},i,n)}static syncDiff(e,s,i,n){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{var d;const u=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}i(a,u,l)}),this.map(r,(a,l)=>{let d=e[a];if(!d)return;const u=l.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=d,n(a,d,l),d.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(i=>s(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,i)=>{const n=e[i];return"metas"in n?s[i]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[i]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Wc||(Wc={}));var qc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qc||(qc={}));var fs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fs||(fs={}));class Sl{constructor(e,s={config:{}},i){this.topic=e,this.params=s,this.socket=i,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Qr(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new rf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Mi(this),this.broadcastEndpointURL=lf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var i,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:r,private:a}}=this.params;this._onError(u=>e==null?void 0:e(fs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(fs.CLOSED));const l={},d={broadcast:o,presence:r,postgres_changes:(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(fs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let b=0;b<p;b++){const x=f[b],{filter:{event:w,schema:k,table:E,filter:A}}=x,P=u&&u[b];if(P&&P.event===w&&P.schema===k&&P.table===E&&P.filter===A)g.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),e==null||e(fs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(fs.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(fs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,i){return this._on(e,s,i)}async send(e,s={}){var i,n;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:r}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=At.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const n=new Qr(this,Ut.leave,{},e);n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,s,i){const n=new AbortController,o=setTimeout(()=>n.abort(),i),r=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(o),r}_push(e,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Qr(this,e,s,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,i){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,i){var n,o;const r=e.toLocaleLowerCase(),{close:a,error:l,leave:d,join:u}=Ut;if(i&&[a,l,d,u].indexOf(r)>=0&&i!==this._joinRef())return;let f=this._onMessage(r,s,i);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var g,b,x;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(b=p.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===r}).map(p=>p.callback(f,i)):(o=this.bindings[r])===null||o===void 0||o.filter(p=>{var g,b,x,w,k,E;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in p){const A=p.id,P=(g=p.filter)===null||g===void 0?void 0:g.event;return A&&((b=s.ids)===null||b===void 0?void 0:b.includes(A))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const A=(k=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((E=s==null?void 0:s.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===r}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:b,table:x,commit_timestamp:w,type:k,errors:E}=g;f=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:w,eventType:k,new:{},old:{},errors:E}),this._getPayloadRecords(g))}p.callback(f,i)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,i){const n=e.toLocaleLowerCase(),o={type:n,filter:s,callback:i};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,s){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Sl.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const i in e)if(e[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ut.close,{},e)}_onError(e){this._on(Ut.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Hc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Hc(e.columns,e.old_record)),s}}const Z0=()=>{},ex=typeof WebSocket<"u",tx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sx{constructor(e,s){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=H0,this.params={},this.timeout=of,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Z0,this.conn=null,this.sendBuffer=[],this.serializer=new q0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let r;return o?r=o:typeof fetch>"u"?r=(...a)=>Hn(()=>Promise.resolve().then(()=>Xn),void 0).then(({default:l})=>l(...a)):r=fetch,(...a)=>r(...a)},this.endPoint=`${e}/${Ia.websocket}`,this.httpEndpoint=lf(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(i=s==null?void 0:s.params)===null||i===void 0?void 0:i.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,r)=>r(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ex){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new nx(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Hn(()=>import("./browser-93c82501.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:z0}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,i){this.logger(e,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case jn.connecting:return ln.Connecting;case jn.open:return ln.Open;case jn.closing:return ln.Closing;default:return ln.Closed}}isConnected(){return this.connectionState()===ln.Open}channel(e,s={config:{}}){const i=new Sl(`realtime:${e}`,s,this);return this.channels.push(i),i}push(e){const{topic:s,event:i,payload:n,ref:o}=e,r=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${i} (${o})`,n),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let i=null;try{i=JSON.parse(atob(s.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(Ut.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(W0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:i,event:n,payload:o,ref:r}=s;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${i} ${n} ${r&&"("+r+")"||""}`,o),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(n,o,r)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ut.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const i=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${i}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const i=new Blob([tx],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}}class nx{constructor(e,s,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=jn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class Cl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function et(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ix extends Cl{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Da extends Cl{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var ox=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};const cf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Hn(()=>Promise.resolve().then(()=>Xn),void 0).then(({default:i})=>i(...s)):e=fetch,(...s)=>e(...s)},rx=()=>ox(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hn(()=>Promise.resolve().then(()=>Xn),void 0)).Response:Response}),Ra=t=>{if(Array.isArray(t))return t.map(s=>Ra(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,i])=>{const n=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[n]=Ra(i)}),e};var gn=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};const Zr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ax=(t,e,s)=>gn(void 0,void 0,void 0,function*(){const i=yield rx();t instanceof i&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new ix(Zr(n),t.status||500))}).catch(n=>{e(new Da(Zr(n),n))}):e(new Da(Zr(t),t))}),lx=(t,e,s,i)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(n.body=JSON.stringify(i)),Object.assign(Object.assign({},n),s))};function oo(t,e,s,i,n,o){return gn(this,void 0,void 0,function*(){return new Promise((r,a)=>{t(s,lx(e,i,n,o)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>ax(l,a,i))})})}function nr(t,e,s,i){return gn(this,void 0,void 0,function*(){return oo(t,"GET",e,s,i)})}function Ls(t,e,s,i,n){return gn(this,void 0,void 0,function*(){return oo(t,"POST",e,i,n,s)})}function cx(t,e,s,i,n){return gn(this,void 0,void 0,function*(){return oo(t,"PUT",e,i,n,s)})}function dx(t,e,s,i){return gn(this,void 0,void 0,function*(){return oo(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function df(t,e,s,i,n){return gn(this,void 0,void 0,function*(){return oo(t,"DELETE",e,i,n,s)})}var yt=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};const ux={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hx{constructor(e,s={},i,n){this.url=e,this.headers=s,this.bucketId=i,this.fetch=cf(n)}uploadOrUpdate(e,s,i,n){return yt(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Kc),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=i,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},r!=null&&r.duplex?{duplex:r.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(et(o))return{data:null,error:o};throw o}})}upload(e,s,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,i)})}uploadToSignedUrl(e,s,i,n){return yt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const d=Object.assign({upsert:Kc.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",d.cacheControl)):(l=i,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(et(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const o=yield Ls(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:n}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new Cl("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:a},error:null}}catch(i){if(et(i))return{data:null,error:i};throw i}})}update(e,s,i){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,i)})}move(e,s,i){return yt(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}copy(e,s,i){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ls(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,i){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield Ls(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const r=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,i){return yt(this,void 0,void 0,function*(){try{const n=yield Ls(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:n.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}download(e,s){return yt(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield nr(this.fetch,`${this.url}/${n}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}})}info(e){return yt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const i=yield nr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ra(i),error:null}}catch(i){if(et(i))return{data:null,error:i};throw i}})}exists(e){return yt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield dx(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(et(i)&&i instanceof Da){const n=i.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,s){const i=this._getFinalPath(e),n=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&n.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${d}`)}}}remove(e){return yt(this,void 0,void 0,function*(){try{return{data:yield df(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}})}list(e,s,i){return yt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ux),s),{prefix:e||""});return{data:yield Ls(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(n){if(et(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const fx="2.7.1",px={"X-Client-Info":`storage-js/${fx}`};var vn=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};class mx{constructor(e,s={},i){this.url=e,this.headers=Object.assign(Object.assign({},px),s),this.fetch=cf(i)}listBuckets(){return vn(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(et(e))return{data:null,error:e};throw e}})}getBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return vn(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(et(i))return{data:null,error:i};throw i}})}updateBucket(e,s){return vn(this,void 0,void 0,function*(){try{return{data:yield cx(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(et(i))return{data:null,error:i};throw i}})}emptyBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}})}deleteBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield df(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}})}}class gx extends mx{constructor(e,s={},i){super(e,s,i)}from(e){return new hx(this.url,this.headers,e,this.fetch)}}const bx="2.49.8";let hi="";typeof Deno<"u"?hi="deno":typeof document<"u"?hi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hi="react-native":hi="node";const yx={"X-Client-Info":`supabase-js-${hi}/${bx}`},xx={headers:yx},vx={schema:"public"},_x={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wx={};var kx=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};const Sx=t=>{let e;return t?e=t:typeof fetch>"u"?e=Kh:e=fetch,(...s)=>e(...s)},Cx=()=>typeof Headers>"u"?Gh:Headers,Mx=(t,e,s)=>{const i=Sx(s),n=Cx();return(o,r)=>kx(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let d=new n(r==null?void 0:r.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),i(o,Object.assign(Object.assign({},r),{headers:d}))})};var Ax=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};function Ex(t){return t.endsWith("/")?t:t+"/"}function Px(t,e){var s,i;const{db:n,auth:o,realtime:r,global:a}=t,{db:l,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),r),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(i=a==null?void 0:a.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Ax(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const uf="2.69.1",En=30*1e3,La=3,ea=La*En,Tx="http://localhost:9999",Ix="supabase.auth.token",Ox={"X-Client-Info":`gotrue-js/${uf}`},Fa="X-Supabase-Api-Version",hf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rx=6e5;class Ml extends Error{constructor(e,s,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Lx extends Ml{constructor(e,s,i){super(e,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function Fx(t){return me(t)&&t.name==="AuthApiError"}class ff extends Ml{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Gs extends Ml{constructor(e,s,i,n){super(e,i,n),this.name=s,this.status=i}}class Ts extends Gs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jx(t){return me(t)&&t.name==="AuthSessionMissingError"}class ta extends Gs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fo extends Gs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class po extends Gs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ux(t){return me(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gc extends Gs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ja extends Gs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function sa(t){return me(t)&&t.name==="AuthRetryableFetchError"}class Yc extends Gs{constructor(e,s,i){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class Ai extends Gs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xc=` 	
\r=`.split(""),Nx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Xc.length;e+=1)t[Xc[e].charCodeAt(0)]=-2;for(let e=0;e<Jc.length;e+=1)t[Jc[e].charCodeAt(0)]=e;return t})();function pf(t,e,s){const i=Nx[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Qc(t){const e=[],s=r=>{e.push(String.fromCodePoint(r))},i={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=r=>{$x(r,i,s)};for(let r=0;r<t.length;r+=1)pf(t.charCodeAt(r),n,o);return e.join("")}function Bx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Vx(t,e){for(let s=0;s<t.length;s+=1){let i=t.charCodeAt(s);if(i>55295&&i<=56319){const n=(i-55296)*1024&65535;i=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Bx(i,e)}}function $x(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Hx(t){const e=[],s={queue:0,queuedBits:0},i=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)pf(t.charCodeAt(n),s,i);return new Uint8Array(e)}function zx(t){const e=[];return Vx(t,s=>e.push(s)),new Uint8Array(e)}function Wx(t){return Math.round(Date.now()/1e3)+t}function qx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",Qs={tested:!1,writable:!1},Ei=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qs.tested)return Qs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Qs.tested=!0,Qs.writable=!0}catch{Qs.tested=!0,Qs.writable=!1}return Qs.writable};function Kx(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,o)=>{e[o]=n})}catch{}return s.searchParams.forEach((i,n)=>{e[n]=i}),e}const mf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Hn(()=>Promise.resolve().then(()=>Xn),void 0).then(({default:i})=>i(...s)):e=fetch,(...s)=>e(...s)},Gx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gf=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},mo=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},go=async(t,e)=>{await t.removeItem(e)};class Or{constructor(){this.promise=new Or.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Or.promiseConstructor=Promise;function na(t){const e=t.split(".");if(e.length!==3)throw new Ai("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Dx.test(e[i]))throw new Ai("JWT not in base64url format");return{header:JSON.parse(Qc(e[0])),payload:JSON.parse(Qc(e[1])),signature:Hx(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Jx(t,e){return new Promise((i,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await t(o);if(!e(o,null,r)){i(r);return}}catch(r){if(!e(o,r)){n(r);return}}})()})}function Xx(t){return("0"+t.toString(16)).substr(-2)}function Qx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let n="";for(let o=0;o<56;o++)n+=s.charAt(Math.floor(Math.random()*i));return n}return crypto.getRandomValues(e),Array.from(e,Xx).join("")}async function Zx(t){const s=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(i);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function ev(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Zx(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _n(t,e,s=!1){const i=Qx();let n=i;s&&(n+="/PASSWORD_RECOVERY"),await gf(t,`${e}-code-verifier`,n);const o=await ev(i);return[o,i===o?"plain":"s256"]}const tv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sv(t){const e=t.headers.get(Fa);if(!e||!e.match(tv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function iv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var ov=globalThis&&globalThis.__rest||function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]]);return s};const on=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rv=[502,503,504];async function Zc(t){var e;if(!Gx(t))throw new ja(on(t),0);if(rv.includes(t.status))throw new ja(on(t),t.status);let s;try{s=await t.json()}catch(o){throw new ff(on(o),o)}let i;const n=sv(t);if(n&&n.getTime()>=hf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new Yc(on(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ts}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new Yc(on(s),t.status,s.weak_password.reasons);throw new Lx(on(s),t.status||500,i)}const av=(t,e,s,i)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),s))};async function xe(t,e,s,i){var n;const o=Object.assign({},i==null?void 0:i.headers);o[Fa]||(o[Fa]=hf["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const r=(n=i==null?void 0:i.query)!==null&&n!==void 0?n:{};i!=null&&i.redirectTo&&(r.redirect_to=i.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await lv(t,e,s+a,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function lv(t,e,s,i,n,o){const r=av(e,i,n,o);let a;try{a=await t(s,Object.assign({},r))}catch(l){throw console.error(l),new ja(on(l),0)}if(a.ok||await Zc(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await Zc(l)}}function Is(t){var e;let s=null;hv(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Wx(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:i},error:null}}function ed(t){const e=Is(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function js(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cv(t){return{data:t,error:null}}function dv(t){const{action_link:e,email_otp:s,hashed_token:i,redirect_to:n,verification_type:o}=t,r=ov(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:i,redirect_to:n,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function uv(t){return t}function hv(t){return t.access_token&&t.refresh_token&&t.expires_in}var fv=globalThis&&globalThis.__rest||function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]]);return s};class pv{constructor({url:e="",headers:s={},fetch:i}){this.url=e,this.headers=s,this.fetch=mf(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,s={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:js})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:s}=e,i=fv(e,["options"]),n=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(n.new_email=i==null?void 0:i.newEmail,delete n.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:dv,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(me(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:js})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,i,n,o,r,a,l;try{const d={nextPage:null,lastPage:0,total:0},u=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(o=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:uv});if(u.error)throw u.error;const h=await u.json(),f=(r=u.headers.get("x-total-count"))!==null&&r!==void 0?r:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=b}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(me(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:js})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:js})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,s=!1){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:js})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:s,error:i}=await xe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:i}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}}const mv={getItem:t=>Ei()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ei()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ei()&&globalThis.localStorage.removeItem(t)}};function td(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function gv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wn={debug:!!(globalThis&&Ei()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class bv extends bf{}async function yv(t,e,s){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async n=>{if(n){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new bv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}gv();const xv={url:Tx,storageKey:Ix,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ox,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sd(t,e,s){return await s()}class Wi{constructor(e){var s,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wi.nextInstanceID,Wi.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},xv),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new pv({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=mf(n.fetch),this.lock=n.lock||sd,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Xt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=yv:this.lock=sd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ei()?this.storage=mv:(this.memoryStorage={},this.storage=td(this.memoryStorage)):(this.memoryStorage={},this.storage=td(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Kx(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),Xt()&&this.detectSessionInUrl&&i!=="none"){const{data:n,error:o}=await this._getSessionFromURL(s,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Ux(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return me(s)?{error:s}:{error:new ff("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,i,n;try{const o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Is}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,d=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,i,n;try{let o;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await _n(this.storage,this.storageKey)),o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Is})}else if("phone"in e){const{phone:u,password:h,options:f}=e;o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Is})}else throw new fo("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,d=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:r,options:a}=e;s=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ed})}else if("phone"in e){const{phone:o,password:r,options:a}=e;s=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ed})}else throw new fo("You must provide either an email or phone number and a password");const{data:i,error:n}=s;return n?{data:{user:null,session:null},error:n}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ta}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:n})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,i,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await mo(this.storage,`${this.storageKey}-code-verifier`),[i,n]=(s??"").split("/");try{const{data:o,error:r}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Is});if(await go(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ta}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:r})}catch(o){if(me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:i,token:n,access_token:o,nonce:r}=e,a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:n,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Is}),{data:l,error:d}=a;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ta}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,i,n,o,r;try{if("email"in e){const{email:a,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await _n(this.storage,this.storageKey));const{error:h}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:d,error:u}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new fo("You must provide either an email or phone number.")}catch(a){if(me(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,i;try{let n,o;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:r,error:a}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Is});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,d=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,i,n;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await _n(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:cv})}catch(o){if(me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;if(i)throw i;if(!s)throw new Ts;const{error:n}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:i,type:n,options:o}=e,{error:r}=await xe(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:i,type:n,options:o}=e,{data:r,error:a}=await xe(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:a}}throw new fo("You must provide either an email or phone number and a type")}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await mo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<ea:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!r&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:js}):await this._useSession(async s=>{var i,n,o;const{data:r,error:a}=s;if(a)throw a;return!(!((i=r.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ts}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:js})})}catch(s){if(me(s))return jx(s)&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async i=>{const{data:n,error:o}=i;if(o)throw o;if(!n.session)throw new Ts;const r=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await _n(this.storage,this.storageKey));const{data:d,error:u}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:js});if(u)throw u;return r.user=d.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ts;const s=Date.now()/1e3;let i=s,n=!0,o=null;const{payload:r}=na(e.access_token);if(r.exp&&(i=r.exp,n=i<=s),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(me(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var i;if(!e){const{data:r,error:a}=s;if(a)throw a;e=(i=r.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Ts;const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Xt())throw new po("No browser detected.");if(e.error||e.error_description||e.error_code)throw new po(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Gc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new po("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gc("No code detected.");const{data:k,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:n,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:d}=e;if(!o||!a||!r||!d)throw new po("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=En&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:b,error:x}=await this._getUser(o);if(x)throw x;const w={provider_token:i,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:f,refresh_token:r,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(i){if(me(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await mo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:n,error:o}=s;if(o)return{error:o};const r=(i=n.session)===null||i===void 0?void 0:i.access_token;if(r){const{error:a}=await this.admin.signOut(r,e);if(a&&!(Fx(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=qx(),i={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async s=>{var i,n;try{const{data:{session:o},error:r}=s;if(r)throw r;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let i=null,n=null;this.flowType==="pkce"&&([i,n]=await _n(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:i,error:n}=await this._useSession(async o=>{var r,a,l,d,u;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Xt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(me(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var i,n;const{data:o,error:r}=s;if(r)throw r;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await Jx(async n=>(n>0&&await Yx(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Is})),(n,o)=>{const r=200*Math.pow(2,n);return o&&sa(o)&&Date.now()+r-i<En})}catch(i){if(this._debug(s,"error",i),me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",i),Xt()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await mo(this.storage,this.storageKey);if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const n=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ea;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${ea}s`),n){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),sa(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,i;if(!e)throw new Ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Or;const{data:o,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!o.session)throw new Ts;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(n,"error",o),me(o)){const r={session:null,error:o};return sa(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,i=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gf(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await go(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),En);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((i.expires_at*1e3-e)/En);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${En}ms, refresh threshold is ${La} ticks`),n<=La&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,i){const n=[`provider=${encodeURIComponent(s)}`];if(i!=null&&i.redirectTo&&n.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&n.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,r]=await _n(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});n.push(a.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);n.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&n.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var i;const{data:n,error:o}=s;return o?{data:null,error:o}:await xe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var i,n;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:n,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:n,error:o}=s;return o?{data:null,error:o}:await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=n==null?void 0:n.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const i=(e==null?void 0:e.factors)||[],n=i.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=i.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:i,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,i;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=na(n.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((i=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let i=s.keys.find(r=>r.kid===e);if(i||(i=this.jwks.keys.find(r=>r.kid===e),i&&this.jwks_cached_at+Rx>Date.now()))return i;const{data:n,error:o}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!n.keys||n.keys.length===0)throw new Ai("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),i=n.keys.find(r=>r.kid===e),!i)throw new Ai("No matching signing key found in JWKS");return i}async getClaims(e,s={keys:[]}){try{let i=e;if(!i){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};i=p.session.access_token}const{header:n,payload:o,signature:r,raw:{header:a,payload:l}}=na(i);if(nv(o.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:o,header:n,signature:r},error:null}}const d=iv(n.alg),u=await this.fetchJwk(n.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,r,zx(`${a}.${l}`)))throw new Ai("Invalid JWT signature");return{data:{claims:o,header:n,signature:r},error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}}Wi.nextInstanceID=0;const vv=Wi;class _v extends vv{constructor(e){super(e)}}var wv=globalThis&&globalThis.__awaiter||function(t,e,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(u){try{d(i.next(u))}catch(h){r(h)}}function l(u){try{d(i.throw(u))}catch(h){r(h)}}function d(u){u.done?o(u.value):n(u.value).then(a,l)}d((i=i.apply(t,e||[])).next())})};class kv{constructor(e,s,i){var n,o,r;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Ex(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:vx,realtime:wx,auth:Object.assign(Object.assign({},_x),{storageKey:d}),global:xx},h=Px(i??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=h.auth)!==null&&r!==void 0?r:{},this.headers,h.global.fetch),this.fetch=Mx(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new V0(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new g0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gx(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},i={}){return this.rest.rpc(e,s,i)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return wv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(s=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:i,storage:n,storageKey:o,flowType:r,lock:a,debug:l},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _v({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:i,storage:n,flowType:r,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new sx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,s,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sv=(t,e,s)=>new kv(t,e,s),Cv="https://nivvbndswqkjnifvkauf.supabase.co",Mv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pdnZibmRzd3Fram5pZnZrYXVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NTAzMzEsImV4cCI6MjA2MzQyNjMzMX0.UocPLAEg1htKV7ZivlqRR3GZhDDCNi1jSseGikVpYv4",C=Sv(Cv,Mv);function Al(t){const e=t.replace(/\D/g,"").slice(0,11),s=e.slice(0,3),i=e.slice(3,6),n=e.slice(6,9),o=e.slice(9,11);return e.length<=3?e:e.length<=6?`${s}.${e.slice(3)}`:e.length<=9?`${s}.${i}.${e.slice(6)}`:`${s}.${i}.${n}-${o}`}function yf(t){const e=t.replace(/\D/g,"").slice(0,8),s=e.slice(0,5),i=e.slice(5);return e.length<=5?e:`${s}-${i}`}function Ft(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function qe(t){if(!t)return"";const e=t.split("-");if(e.length!==3)return t;const[s,i,n]=e;return`${n.padStart(2,"0")}/${i.padStart(2,"0")}/${s}`}function Av(t){const e=String(t??"").replace(/\D/g,"");return e?(parseInt(e,10)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):""}function Ev(t){const e=String(t??"").replace(/\D/g,"");return e?parseInt(e,10)/100:0}const Pv={name:"Signup",components:{Navbar:qt,Footer:Kt},data(){return{name:"",email:"",password:"",company:""}},methods:{async handleSignup(){if(!this.name){alert("Informe o nome");return}if(!this.company){alert("Informe a empresa");return}if(this.email&&!Ft(this.email)){alert("E-mail inválido");return}const{data:t,error:e}=await C.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,display_name:this.name}}});if(e)alert("Erro ao cadastrar: "+e.message);else if(t!=null&&t.session){const s=crypto.randomUUID(),{error:i}=await C.from("companies").insert({id:s,name:this.company});if(i){alert("Erro ao criar empresa: "+i.message);return}await C.from("profiles").insert({id:t.user.id,company_id:s,role:"admin"}),alert("Cadastro realizado!")}else alert("Cadastro realizado! Verifique seu e-mail para ativar a conta e depois associe a empresa.")}}},Tv={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},Iv={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Ov={class:"mt-6 text-center text-sm text-gray-500"};function Dv(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("section",Tv,[c("div",Iv,[e[12]||(e[12]=c("div",{class:"mb-8 text-center"},[c("h2",{class:"text-3xl font-extrabold text-blue-700"},"Crie sua conta"),c("p",{class:"text-gray-500"},"Comece agora a organizar seus atendimentos com praticidade")],-1)),c("form",{onSubmit:e[4]||(e[4]=ze((...d)=>o.handleSignup&&o.handleSignup(...d),["prevent"])),class:"space-y-5"},[c("div",null,[e[5]||(e[5]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"name"},"Nome",-1)),M(c("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>n.name=d),type:"text",id:"name",placeholder:"Seu nome",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.name]])]),c("div",null,[e[6]||(e[6]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(c("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>n.email=d),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.email]])]),c("div",null,[e[7]||(e[7]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>n.password=d),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.password]])]),c("div",null,[e[8]||(e[8]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"company"},"Empresa",-1)),M(c("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>n.company=d),type:"text",id:"company",placeholder:"Nome da empresa",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.company]])]),e[9]||(e[9]=c("button",{type:"submit",class:"btn w-full"},"Cadastrar",-1))],32),c("p",Ov,[e[11]||(e[11]=se(" Já tem uma conta? ")),D(a,{to:"/login",class:"text-blue-600 hover:underline"},{default:X(()=>e[10]||(e[10]=[se("Entrar")])),_:1,__:[10]})])])]),D(l)],64)}const Rv=ae(Pv,[["render",Dv]]),Lv={name:"Login",components:{Navbar:qt,Footer:Kt},data(){return{email:"",password:"",loginError:""}},methods:{async handleLogin(){if(this.loginError="",this.email&&!Ft(this.email)){this.loginError="E-mail inválido";return}const{error:t}=await C.auth.signInWithPassword({email:this.email,password:this.password});t?t.message&&t.message.toLowerCase().includes("confirm")?alert("Você precisa confirmar o e-mail antes de acessar o sistema."):this.loginError="E-mail ou senha inválidos":this.$router.push("/dashboard")},async handleGoogleLogin(){const{error:t}=await C.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/#/dashboard"}});t&&alert("Erro ao entrar com Google: "+t.message)},clearError(){this.loginError=""}}},Fv={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 to-white px-4"},jv={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Uv={key:0,class:"text-red-600 text-center text-sm"},Nv={class:"mt-6 text-center text-sm text-gray-500"};function Bv(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("section",Fv,[c("div",jv,[e[11]||(e[11]=c("div",{class:"mb-8 text-center"},[c("h2",{class:"text-3xl font-extrabold text-primary"},"Entrar"),c("p",{class:"text-gray-500"},"Acesse sua conta do Agenda Zen")],-1)),c("form",{onSubmit:e[5]||(e[5]=ze((...d)=>o.handleLogin&&o.handleLogin(...d),["prevent"])),class:"space-y-5"},[c("div",null,[e[6]||(e[6]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(c("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>n.email=d),onInput:e[1]||(e[1]=(...d)=>o.clearError&&o.clearError(...d)),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full"},null,544),[[O,n.email]])]),c("div",null,[e[7]||(e[7]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>n.password=d),onInput:e[3]||(e[3]=(...d)=>o.clearError&&o.clearError(...d)),type:"password",id:"password",placeholder:"********",class:"w-full"},null,544),[[O,n.password]])]),n.loginError?(m(),y("p",Uv,S(n.loginError),1)):I("",!0),e[8]||(e[8]=c("button",{type:"submit",class:"btn w-full"},"Entrar",-1)),c("button",{type:"button",onClick:e[4]||(e[4]=(...d)=>o.handleGoogleLogin&&o.handleGoogleLogin(...d)),class:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition duration-200"},"Entrar com Google")],32),c("p",Nv,[e[10]||(e[10]=se(" Ainda não tem conta? ")),D(a,{to:"/cadastro",class:"text-primary hover:underline"},{default:X(()=>e[9]||(e[9]=[se("Criar agora")])),_:1,__:[9]})])])]),D(l)],64)}const Vv=ae(Lv,[["render",Bv]]);function bn(t){const e=String(t??"").replace(/\D/g,"").slice(0,11),s=e.slice(0,2);if(e.length<=2)return e?`(${s}`:"";if(e.length<=6){const o=e.slice(2);return`(${s}) ${o}`}if(e.length<=10){const o=e.slice(2,6),r=e.slice(6);return`(${s}) ${o}${r?`-${r}`:""}`}const i=e.slice(2,7),n=e.slice(7);return`(${s}) ${i}-${n}`}function ir(t){return String(t??"").replace(/\D/g,"")}const $v={name:"Onboarding",data(){return{userId:null,step:1,form:{businessName:"",phone:"",email:""},agenda:{dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},serviceForm:{name:"",duration:"",price:""},services:[],daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:bn,generateSlug(t){return t?t.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):""},async next(){this.step===1?(await this.saveProfile(),this.step++):this.step===2?(await this.saveAgenda(),this.step++):this.step===3&&(await this.saveServices(),await this.markOnboardingComplete(),this.step++)},prev(){this.step>1&&this.step--},async saveProfile(){if(this.form.email&&!Ft(this.form.email)){alert("E-mail inválido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.generateSlug(this.form.businessName),phone:this.form.phone,email:this.form.email};await C.from("profiles").upsert(t,{onConflict:["id"]})},async saveAgenda(){const t={start:null,end:null,days:[]};for(const[s,i]of Object.entries(this.agenda.dailySchedule))i.enabled&&i.start&&i.end&&(t.days.push(s),(!t.start||i.start<t.start)&&(t.start=i.start),(!t.end||i.end>t.end)&&(t.end=i.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule};await C.from("profiles").upsert(e,{onConflict:["id"]})},async saveServices(){for(const t of this.services)await C.from("services").insert({name:t.name,duration:t.duration,price:parseFloat(t.price),user_id:this.userId,active:!0})},addService(){this.serviceForm.name&&(this.services.push({name:this.serviceForm.name,duration:this.serviceForm.duration,price:this.serviceForm.price}),this.serviceForm={name:"",duration:"",price:""})},removeService(t){this.services.splice(t,1)},async markOnboardingComplete(){await C.from("profiles").upsert({id:this.userId,onboarding_complete:!0},{onConflict:["id"]})},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id}},Hv={class:"min-h-screen flex bg-gray-100 items-center justify-center p-4"},zv={class:"bg-white p-6 rounded-lg shadow w-full max-w-2xl"},Wv={key:0,class:"space-y-4"},qv={key:1,class:"space-y-4"},Kv={class:"mt-1 space-y-2"},Gv=["onUpdate:modelValue"],Yv={class:"w-20"},Jv=["onUpdate:modelValue"],Xv=["onUpdate:modelValue"],Qv={key:2,class:"space-y-4"},Zv={class:"flex justify-end"},e_={class:"mt-4 space-y-1"},t_=["onClick"],s_={key:3,class:"space-y-4 text-center"},n_={key:4,class:"flex justify-between mt-6"},i_={key:5,class:"flex justify-center mt-6"};function o_(t,e,s,i,n,o){return m(),y("div",Hv,[c("div",zv,[n.step===1?(m(),y("div",Wv,[e[14]||(e[14]=c("h2",{class:"text-xl font-semibold mb-4"},"Bem-vindo! Vamos começar pelo seu perfil.",-1)),c("div",null,[e[11]||(e[11]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>n.form.businessName=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.businessName]])]),c("div",null,[e[12]||(e[12]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>n.form.phone=r),onInput:e[2]||(e[2]=r=>n.form.phone=o.phoneMask(n.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.phone]])]),c("div",null,[e[13]||(e[13]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=r=>n.form.email=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.email]])])])):n.step===2?(m(),y("div",qv,[e[17]||(e[17]=c("h2",{class:"text-xl font-semibold mb-4"},"Horários de atendimento",-1)),c("div",null,[e[16]||(e[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),c("div",Kv,[(m(!0),y($,null,Q(n.daysOfWeekOptions,r=>(m(),y("div",{key:r.value,class:"flex items-center space-x-2"},[M(c("input",{type:"checkbox","onUpdate:modelValue":a=>n.agenda.dailySchedule[r.value].enabled=a},null,8,Gv),[[Sr,n.agenda.dailySchedule[r.value].enabled]]),c("span",Yv,S(r.label),1),M(c("input",{type:"time",step:"60","onUpdate:modelValue":a=>n.agenda.dailySchedule[r.value].start=a,class:"border rounded-md px-2 py-1"},null,8,Jv),[[O,n.agenda.dailySchedule[r.value].start]]),e[15]||(e[15]=c("span",null,"-",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":a=>n.agenda.dailySchedule[r.value].end=a,class:"border rounded-md px-2 py-1"},null,8,Xv),[[O,n.agenda.dailySchedule[r.value].end]])]))),128))])])])):n.step===3?(m(),y("div",Qv,[e[21]||(e[21]=c("h2",{class:"text-xl font-semibold mb-4"},"Cadastre seus serviços",-1)),c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>n.serviceForm.name=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.serviceForm.name]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"Duração",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=r=>n.serviceForm.duration=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.serviceForm.duration]])]),c("div",null,[e[20]||(e[20]=c("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),M(c("input",{type:"number",step:"0.01","onUpdate:modelValue":e[6]||(e[6]=r=>n.serviceForm.price=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.serviceForm.price]])]),c("div",Zv,[c("button",{onClick:e[7]||(e[7]=(...r)=>o.addService&&o.addService(...r)),class:"btn"},"Adicionar")]),c("ul",e_,[(m(!0),y($,null,Q(n.services,(r,a)=>(m(),y("li",{key:a,class:"flex justify-between"},[c("span",null,S(r.name)+" - "+S(r.duration)+" minutos - "+S(o.formatPrice(r.price)),1),c("button",{onClick:l=>o.removeService(a),class:"text-red-600 hover:underline"},"Remover",8,t_)]))),128))])])):n.step===4?(m(),y("div",s_,e[22]||(e[22]=[c("h2",{class:"text-2xl font-semibold"},"Pronto!",-1),c("p",null,"Seu cadastro inicial está concluído.",-1),c("p",{class:"text-lg"},"Bem-vindo ao Agenda Zen!",-1)]))):I("",!0),n.step<4?(m(),y("div",n_,[n.step>1?(m(),y("button",{key:0,onClick:e[8]||(e[8]=(...r)=>o.prev&&o.prev(...r)),class:"px-4 py-2 border rounded"},"Voltar")):I("",!0),c("button",{onClick:e[9]||(e[9]=(...r)=>o.next&&o.next(...r)),class:"btn ml-auto"},S(n.step===3?"Finalizar":"Próximo"),1)])):(m(),y("div",i_,[c("button",{onClick:e[10]||(e[10]=r=>t.$router.push("/dashboard")),class:"btn"},"Ir para o Dashboard")]))])])}const r_=ae($v,[["render",o_]]),a_={name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}},data(){return{userRole:null,allowedScreens:Yn}},computed:{showAgendamentos(){return this.hasAccess(["Dashboard","Agendamentos"])},showCadastros(){return this.hasAccess(["Clientes","Servicos","Salas"])},showCentroFinanceiro(){return this.hasAccess(["Despesas","Comprovantes","Templates"])},showRelatorios(){return this.hasAccess(["RelatorioEmAberto","RelatorioAgendamentos","Recebimento","Faturamento"])},showConta(){return this.hasAccess(["Empresa","Configuracao","Usuarios","Permissoes","MinhaAssinatura"])}},methods:{canSee(t){return this.userRole===null?!1:this.userRole!=="user"?!0:this.allowedScreens.includes(t)},hasAccess(t){return t.some(e=>this.canSee(e))}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(t){const{data:e}=await C.from("profiles").select("role").eq("id",t.id).single();if(this.userRole=e?e.role:null,this.userRole==="user"){const{data:s}=await C.from("screen_permissions").select("screen, can_view").eq("profile_id",t.id),i=(s||[]).filter(n=>n.can_view===!1).map(n=>n.screen);this.allowedScreens=Yn.filter(n=>!i.includes(n))}}}},l_={class:"space-y-6 mt-8"},c_={key:0,class:"space-y-2"},d_={key:1,class:"space-y-2"},u_={key:2,class:"space-y-2"},h_={key:3,class:"space-y-2"},f_={key:4,class:"space-y-2"};function p_(t,e,s,i,n,o){const r=j("router-link");return m(),y("div",null,[s.isOpen?(m(),y("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:e[0]||(e[0]=a=>t.$emit("close"))})):I("",!0),c("aside",{class:$e(["fixed inset-y-0 left-0 transform bg-white shadow-md transition-all duration-200 z-50 md:relative overflow-hidden flex flex-col min-h-screen",s.isOpen?"w-64 p-6 translate-x-0":"w-0 p-0 -translate-x-full"])},[c("button",{class:"absolute top-4 right-4 text-gray-600 focus:outline-none",onClick:e[1]||(e[1]=a=>t.$emit("close"))},e[2]||(e[2]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[25]||(e[25]=c("h2",{class:"text-2xl font-bold text-primary mb-6"},"Agenda Zen",-1)),c("nav",l_,[o.showAgendamentos?(m(),y("div",c_,[e[5]||(e[5]=c("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Agendamentos",-1)),o.canSee("Dashboard")?(m(),ge(r,{key:0,to:"/dashboard",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[3]||(e[3]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3m10-11v10a1 1 0 01-1 1h-3m-6 0h6"})],-1),c("span",null,"Início",-1)])),_:1,__:[3]})):I("",!0),o.canSee("Agendamentos")?(m(),ge(r,{key:1,to:"/agendamentos",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[4]||(e[4]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),c("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),c("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),c("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),c("span",null,"Agendamentos",-1)])),_:1,__:[4]})):I("",!0)])):I("",!0),o.showCadastros?(m(),y("div",d_,[e[9]||(e[9]=c("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Cadastros",-1)),o.canSee("Clientes")?(m(),ge(r,{key:0,to:"/clientes",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[6]||(e[6]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("circle",{cx:"12",cy:"7",r:"4","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),c("span",null,"Clientes",-1)])),_:1,__:[6]})):I("",!0),o.canSee("Servicos")?(m(),ge(r,{key:1,to:"/servicos",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[7]||(e[7]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V5a4 4 0 018 0v2"})],-1),c("span",null,"Serviços",-1)])),_:1,__:[7]})):I("",!0),o.canSee("Salas")?(m(),ge(r,{key:2,to:"/salas",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[8]||(e[8]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v18M15 3v18M3 9h18M3 15h18"})],-1),c("span",null,"Salas",-1)])),_:1,__:[8]})):I("",!0)])):I("",!0),o.showCentroFinanceiro?(m(),y("div",u_,[e[13]||(e[13]=c("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Centro Financeiro",-1)),o.canSee("Despesas")?(m(),ge(r,{key:0,to:"/despesas",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[10]||(e[10]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})],-1),c("span",null,"Despesas",-1)])),_:1,__:[10]})):I("",!0),o.canSee("Comprovantes")?(m(),ge(r,{key:1,to:"/comprovantes",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[11]||(e[11]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1),c("span",null,"Comprovantes",-1)])),_:1,__:[11]})):I("",!0),o.canSee("Templates")?(m(),ge(r,{key:2,to:"/templates",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[12]||(e[12]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h16v4H4V4zm0 6h16v10H4V10z"})],-1),c("span",null,"Templates",-1)])),_:1,__:[12]})):I("",!0)])):I("",!0),o.showRelatorios?(m(),y("div",h_,[e[18]||(e[18]=c("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Relatórios",-1)),o.canSee("RelatorioEmAberto")?(m(),ge(r,{key:0,to:"/relatorio-em-aberto",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[14]||(e[14]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c("span",null,"Em Aberto",-1)])),_:1,__:[14]})):I("",!0),o.canSee("RelatorioAgendamentos")?(m(),ge(r,{key:1,to:"/relatorio-agendamentos",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[15]||(e[15]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),c("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),c("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),c("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),c("span",null,"Agendamentos",-1)])),_:1,__:[15]})):I("",!0),o.canSee("Recebimento")?(m(),ge(r,{key:2,to:"/recebimento",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[16]||(e[16]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})],-1),c("span",null,"Recebimento",-1)])),_:1,__:[16]})):I("",!0),o.canSee("Faturamento")?(m(),ge(r,{key:3,to:"/faturamento",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[17]||(e[17]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3v18h18M9 17v-4M13 17v-8M17 17V7"})],-1),c("span",null,"Faturamento",-1)])),_:1,__:[17]})):I("",!0)])):I("",!0),o.showConta?(m(),y("div",f_,[e[24]||(e[24]=c("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Conta",-1)),o.canSee("Empresa")?(m(),ge(r,{key:0,to:"/empresa",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[19]||(e[19]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7h18M3 12h18M3 17h18"})],-1),c("span",null,"Empresa",-1)])),_:1,__:[19]})):I("",!0),o.canSee("Configuracao")?(m(),ge(r,{key:1,to:"/configuracao",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[20]||(e[20]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),c("span",null,"Perfil/Site",-1)])),_:1,__:[20]})):I("",!0),o.canSee("Usuarios")?(m(),ge(r,{key:2,to:"/usuarios",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[21]||(e[21]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),c("span",null,"Usuários",-1)])),_:1,__:[21]})):I("",!0),n.userRole!=="user"?(m(),ge(r,{key:3,to:"/permissoes",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[22]||(e[22]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c("span",null,"Permissões",-1)])),_:1,__:[22]})):I("",!0),o.canSee("MinhaAssinatura")?(m(),ge(r,{key:4,to:"/minha-assinatura",class:"flex items-center text-gray-700 hover:text-primary"},{default:X(()=>e[23]||(e[23]=[c("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",ry:"2","stroke-width":"2"}),c("line",{x1:"3",y1:"9",x2:"21",y2:"9","stroke-width":"2"})],-1),c("span",null,"Minha Assinatura",-1)])),_:1,__:[23]})):I("",!0)])):I("",!0)])],2)])}const Je=ae(a_,[["render",p_]]);let oi=null;async function ns(t){if(oi===null){const{data:{user:e}}=await C.auth.getUser();if(!e)oi={};else{const{data:s}=await C.from("screen_permissions").select("screen, can_view").eq("profile_id",e.id);oi={},s&&s.forEach(i=>{oi[i.screen]=i.can_view})}}return!(oi[t]===!1&&Yn.includes(t))}const m_={name:"HeaderUser",props:{title:{type:String,default:"Agenda Zen"}},data(){return{userName:null,showMenu:!1,canConfiguracao:!1,canUsuarios:!1,canMinhaAssinatura:!1}},computed:{showAccountLinks(){return this.canConfiguracao||this.canUsuarios||this.canMinhaAssinatura}},async mounted(){var e,s;const{data:{user:t}}=await C.auth.getUser();if(!t)this.$router.push("/login");else{const i=((e=t.user_metadata)==null?void 0:e.display_name)||((s=t.user_metadata)==null?void 0:s.name);this.userName=i&&i.trim()!==""?i:t.email,this.canConfiguracao=await ns("Configuracao"),this.canUsuarios=await ns("Usuarios"),this.canMinhaAssinatura=await ns("MinhaAssinatura")}},methods:{toggleMenu(){this.showMenu=!this.showMenu},async handleLogout(){this.showMenu=!1,await C.auth.signOut(),this.$router.push("/")}}},g_={class:"flex justify-between items-center mb-8"},b_={class:"text-2xl font-semibold text-gray-800"},y_={key:0,class:"relative"},x_={class:"text-gray-600"},v_={key:0,class:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md"};function __(t,e,s,i,n,o){const r=j("router-link");return m(),y("header",g_,[c("h1",b_,S(s.title),1),n.userName&&o.showAccountLinks?(m(),y("div",y_,[c("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"flex items-center space-x-2 focus:outline-none"},[e[3]||(e[3]=c("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1)),c("span",x_,S(n.userName),1),(m(),y("svg",{class:$e(["w-4 h-4 text-gray-600 transition-transform",{"rotate-180":n.showMenu}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[2]||(e[2]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),n.showMenu?(m(),y("div",v_,[D(r,{to:"/",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[4]||(e[4]=[se("Início")])),_:1,__:[4]}),n.canConfiguracao?(m(),ge(r,{key:0,to:"/configuracao",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[5]||(e[5]=[se("Perfil/Site")])),_:1,__:[5]})):I("",!0),n.canUsuarios?(m(),ge(r,{key:1,to:"/usuarios",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[6]||(e[6]=[se("Usuários")])),_:1,__:[6]})):I("",!0),n.canMinhaAssinatura?(m(),ge(r,{key:2,to:"/minha-assinatura",class:"block px-4 py-2 hover:bg-gray-100"},{default:X(()=>e[7]||(e[7]=[se("Assinatura")])),_:1,__:[7]})):I("",!0),c("button",{onClick:e[1]||(e[1]=(...a)=>o.handleLogout&&o.handleLogout(...a)),class:"w-full text-left px-4 py-2 hover:bg-gray-100"},"Sair")])):I("",!0)])):I("",!0)])}const Xe=ae(m_,[["render",__]]),w_={name:"Modal"},k_={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg md:max-w-4xl max-h-[90vh] overflow-y-auto"};function S_(t,e,s,i,n,o){return m(),y("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[0]||(e[0]=ze(r=>t.$emit("close"),["self"]))},[c("div",k_,[lh(t.$slots,"default")])])}const rs=ae(w_,[["render",S_]]);function El(){const t=new Date().toLocaleString("sv-SE",{timeZone:"America/Sao_Paulo"});return new Date(t.replace(" ","T")+"-03:00")}function xf(t,e){if(!t||!e)return El();const s=`${t}T${e}-03:00`;return new Date(s)}function gt(t,e=0){if(!t)return"";const[s,i]=t.split(":").map(Number),n=new Date;n.setHours(s),n.setMinutes(i),n.setSeconds(0),n.setMinutes(n.getMinutes()+e*60);const o=String(n.getHours()).padStart(2,"0"),r=String(n.getMinutes()).padStart(2,"0");return`${o}:${r}`}function vf(t,e=1){if(!t)return"";const[s,i,n]=t.split("-").map(Number),o=new Date(s,i-1,n);o.setDate(o.getDate()+e);const r=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${r}-${a}-${l}`}function nd(t,e=1){if(!t)return"";const[s,i,n]=t.split("-").map(Number),o=new Date(s,i-1,n);o.setMonth(o.getMonth()+e);const r=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${r}-${a}-${l}`}const C_={name:"WeekView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0},startHour:{type:Number,default:6},endHour:{type:Number,default:23}},data(){const t=El(),e=t.getDay()===0?7:t.getDay(),s=new Date(t);s.setDate(t.getDate()-e+1);const i=new Date(s);return i.setDate(s.getDate()+6),{weekStart:s,weekEnd:i,dayLabels:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],minuteHeight:1}},computed:{computedStartHour(){return this.startHour},computedEndHour(){return this.endHour},totalHours(){return Math.max(0,this.computedEndHour-this.computedStartHour+1)},events(){const t=this.weekStart.toISOString().split("T")[0],e=this.weekEnd.toISOString().split("T")[0],s=this.appointments.filter(o=>o.date>=t&&o.date<=e).map(o=>{const r=gt(o.time),[a,l]=r.split(":"),d=xf(o.date,r),u=new Date(d.getTime()+Number(o.duration||0)*6e4),h=d.getDay()===0?7:d.getDay();return{id:o.id,title:this.getClientName(o.client_id),startTime:`${a}:${l}`,endTime:`${String(u.getHours()).padStart(2,"0")}:${String(u.getMinutes()).padStart(2,"0")}`,day:h,appointment:o,lane:0,totalLanes:1}}),i={},n=o=>{const[r,a]=o.split(":").map(Number);return r*60+a};return s.forEach(o=>{i[o.day]||(i[o.day]=[]),i[o.day].push(o)}),Object.values(i).forEach(o=>{o.sort((a,l)=>n(a.startTime)-n(l.startTime));let r=[];o.forEach(a=>{r=r.filter(u=>n(u.endTime)>n(a.startTime));let l=0;for(;r.some(u=>u.lane===l);)l++;a.lane=l,r.push(a);const d=Math.max(...r.map(u=>u.lane))+1;r.forEach(u=>{u.totalLanes=Math.max(u.totalLanes,d)})})}),s}},methods:{updateMinuteHeight(){if(this.$refs.grid){const e=window.getComputedStyle(this.$refs.grid).gridTemplateRows.split(" ")[0],s=parseFloat(e);!isNaN(s)&&s>0&&(this.minuteHeight=s/60)}},getStatusClass(t){return t.from_site&&!t.confirmed?"bg-red-500":t.status==="completed"?"bg-green-500":t.status==="no_show"?"bg-gray-400":"bg-blue-500"},getStatusTitle(t){return t.from_site&&!t.confirmed?"pendente confirmação de pagamento":t.status==="completed"?"atendimento finalizado":t.status==="no_show"?"cliente faltou":""},getEventStyle(t){const e=parseInt(t.startTime.split(":")[0]),s=parseInt(t.startTime.split(":")[1]),i=parseInt(t.endTime.split(":")[0]),n=parseInt(t.endTime.split(":")[1]),o=e*60+s,r=i*60+n,a=this.computedStartHour*60,l=this.minuteHeight,d=(o-a)*l+60,u=(r-o)*l,h="(100% - 64px) / 7",f=`calc((${h}) / ${t.totalLanes})`;return{top:`${d}px`,height:`${u}px`,left:`calc(64px + (${h}) * ${t.day-1} + ${f} * ${t.lane})`,width:`calc(${f} - 4px)`}},formatDate(t){return t instanceof Date?qe(t.toISOString().split("T")[0]):t},prevWeek(){const t=new Date(this.weekStart);t.setDate(t.getDate()-7);const e=new Date(this.weekEnd);e.setDate(e.getDate()-7),this.weekStart=t,this.weekEnd=e},nextWeek(){const t=new Date(this.weekStart);t.setDate(t.getDate()+7);const e=new Date(this.weekEnd);e.setDate(e.getDate()+7),this.weekStart=t,this.weekEnd=e}},watch:{computedStartHour(){this.$nextTick(this.updateMinuteHeight)},computedEndHour(){this.$nextTick(this.updateMinuteHeight)}},mounted(){this.updateMinuteHeight()}},M_={class:"bg-white rounded-lg shadow overflow-hidden"},A_={class:"flex justify-between items-center px-4 py-2 border-b bg-blue-600 text-white"},E_={class:"font-semibold"},P_={class:"relative overflow-x-auto"},T_={class:"flex justify-center items-start border bg-gray-50"},I_=["title","onClick"];function O_(t,e,s,i,n,o){return m(),y("div",M_,[c("div",A_,[c("button",{onClick:e[0]||(e[0]=(...r)=>o.prevWeek&&o.prevWeek(...r)),class:"p-1 rounded hover:bg-blue-500"},e[2]||(e[2]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),c("div",E_,S(o.formatDate(n.weekStart))+" - "+S(o.formatDate(n.weekEnd)),1),c("button",{onClick:e[1]||(e[1]=(...r)=>o.nextWeek&&o.nextWeek(...r)),class:"p-1 rounded hover:bg-blue-500"},e[3]||(e[3]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),c("div",P_,[c("div",{ref:"grid",class:"grid gap-px text-sm bg-gray-100 relative",style:Li({gridTemplateColumns:"64px repeat(7, 1fr)",gridTemplateRows:`repeat(${o.totalHours}, 60px)`})},[e[4]||(e[4]=c("div",{class:"bg-gray-50"},null,-1)),(m(!0),y($,null,Q(n.dayLabels,(r,a)=>(m(),y("div",{key:"day-"+a,class:"font-semibold text-center border px-1 bg-gray-50"},S(r),1))),128)),(m(!0),y($,null,Q(o.totalHours,r=>(m(),y($,{key:"line-"+r},[c("div",T_,S((o.computedStartHour+r-1).toString().padStart(2,"0"))+":00 ",1),(m(),y($,null,Q(7,a=>c("div",{key:"cell-"+a+"-"+r,class:"relative bg-white border hover:bg-blue-50"})),64))],64))),128)),(m(!0),y($,null,Q(o.events,r=>(m(),y("div",{key:r.id,class:$e(["absolute text-white rounded px-2 py-1 event cursor-pointer hover:opacity-90",o.getStatusClass(r.appointment)]),style:Li(o.getEventStyle(r)),title:o.getStatusTitle(r.appointment),onClick:a=>t.$emit("select",r.appointment)},S(r.title)+" - "+S(r.startTime),15,I_))),128))],4)])])}const _f=ae(C_,[["render",O_],["__scopeId","data-v-99742be3"]]),D_={name:"AppointmentDetails",props:{appointment:{type:Object,required:!0},getClientName:{type:Function,required:!0},getServiceName:{type:Function,required:!0},getRoomName:{type:Function,default:()=>""},getRoomLink:{type:Function,default:()=>""}},methods:{addHoursToTime:gt,formatDateBR:qe}},R_={class:"relative"},L_={key:0,class:"space-y-1 border rounded-md p-4 bg-gray-50 text-gray-700"},F_={key:0},j_={key:1},U_=["href"];function N_(t,e,s,i,n,o){return m(),y("div",R_,[c("button",{onClick:e[0]||(e[0]=r=>t.$emit("close")),class:"absolute top-0 right-0 m-2 px-2 py-1 rounded border text-sm"}," Fechar "),e[8]||(e[8]=c("h3",{class:"text-lg font-semibold mb-4"},"Detalhes do Agendamento",-1)),s.appointment?(m(),y("div",L_,[c("p",null,[e[1]||(e[1]=c("strong",null,"Data:",-1)),se(" "+S(o.formatDateBR(s.appointment.date)),1)]),c("p",null,[e[2]||(e[2]=c("strong",null,"Hora:",-1)),se(" "+S(o.addHoursToTime(s.appointment.time)),1)]),c("p",null,[e[3]||(e[3]=c("strong",null,"Cliente:",-1)),se(" "+S(s.getClientName(s.appointment.client_id)),1)]),c("p",null,[e[4]||(e[4]=c("strong",null,"Serviço:",-1)),se(" "+S(s.getServiceName(s.appointment.service_id)),1)]),c("p",null,[e[5]||(e[5]=c("strong",null,"Duração:",-1)),se(" "+S(s.appointment.duration)+" minutos",1)]),c("p",null,[e[6]||(e[6]=c("strong",null,"Descrição:",-1)),se(" "+S(s.appointment.description),1)]),s.appointment.room_id?(m(),y("p",F_,[e[7]||(e[7]=c("strong",null,"Sala:",-1)),se(" "+S(s.getRoomName(s.appointment.room_id)),1)])):I("",!0),s.appointment.room_id&&s.getRoomLink(s.appointment.room_id)?(m(),y("p",j_,[c("a",{href:s.getRoomLink(s.appointment.room_id),target:"_blank",class:"text-blue-600 underline"},"Acessar Google Meet",8,U_)])):I("",!0)])):I("",!0),lh(t.$slots,"actions")])}const wf=ae(D_,[["render",N_]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ro(t){return t+.5|0}const Us=(t,e,s)=>Math.max(Math.min(t,s),e);function fi(t){return Us(ro(t*2.55),0,255)}function Hs(t){return Us(ro(t*255),0,255)}function ps(t){return Us(ro(t/2.55)/100,0,1)}function id(t){return Us(ro(t*100),0,100)}const Ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ua=[..."0123456789ABCDEF"],B_=t=>Ua[t&15],V_=t=>Ua[(t&240)>>4]+Ua[t&15],bo=t=>(t&240)>>4===(t&15),$_=t=>bo(t.r)&&bo(t.g)&&bo(t.b)&&bo(t.a);function H_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ot[t[1]]*17,g:255&Ot[t[2]]*17,b:255&Ot[t[3]]*17,a:e===5?Ot[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ot[t[1]]<<4|Ot[t[2]],g:Ot[t[3]]<<4|Ot[t[4]],b:Ot[t[5]]<<4|Ot[t[6]],a:e===9?Ot[t[7]]<<4|Ot[t[8]]:255})),s}const z_=(t,e)=>t<255?e(t):"";function W_(t){var e=$_(t)?B_:V_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+z_(t.a,e):void 0}const q_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function kf(t,e,s){const i=e*Math.min(s,1-s),n=(o,r=(o+t/30)%12)=>s-i*Math.max(Math.min(r-3,9-r,1),-1);return[n(0),n(8),n(4)]}function K_(t,e,s){const i=(n,o=(n+t/60)%6)=>s-s*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function G_(t,e,s){const i=kf(t,1,.5);let n;for(e+s>1&&(n=1/(e+s),e*=n,s*=n),n=0;n<3;n++)i[n]*=1-e-s,i[n]+=e;return i}function Y_(t,e,s,i,n){return t===n?(e-s)/i+(e<s?6:0):e===n?(s-t)/i+2:(t-e)/i+4}function Pl(t){const s=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(s,i,n),r=Math.min(s,i,n),a=(o+r)/2;let l,d,u;return o!==r&&(u=o-r,d=a>.5?u/(2-o-r):u/(o+r),l=Y_(s,i,n,u,o),l=l*60+.5),[l|0,d||0,a]}function Tl(t,e,s,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,i)).map(Hs)}function Il(t,e,s){return Tl(kf,t,e,s)}function J_(t,e,s){return Tl(G_,t,e,s)}function X_(t,e,s){return Tl(K_,t,e,s)}function Sf(t){return(t%360+360)%360}function Q_(t){const e=q_.exec(t);let s=255,i;if(!e)return;e[5]!==i&&(s=e[6]?fi(+e[5]):Hs(+e[5]));const n=Sf(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=J_(n,o,r):e[1]==="hsv"?i=X_(n,o,r):i=Il(n,o,r),{r:i[0],g:i[1],b:i[2],a:s}}function Z_(t,e){var s=Pl(t);s[0]=Sf(s[0]+e),s=Il(s),t.r=s[0],t.g=s[1],t.b=s[2]}function e1(t){if(!t)return;const e=Pl(t),s=e[0],i=id(e[1]),n=id(e[2]);return t.a<255?`hsla(${s}, ${i}%, ${n}%, ${ps(t.a)})`:`hsl(${s}, ${i}%, ${n}%)`}const od={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function t1(){const t={},e=Object.keys(rd),s=Object.keys(od);let i,n,o,r,a;for(i=0;i<e.length;i++){for(r=a=e[i],n=0;n<s.length;n++)o=s[n],a=a.replace(o,od[o]);o=parseInt(rd[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let yo;function s1(t){yo||(yo=t1(),yo.transparent=[0,0,0,0]);const e=yo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const n1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function i1(t){const e=n1.exec(t);let s=255,i,n,o;if(e){if(e[7]!==i){const r=+e[7];s=e[8]?fi(r):Us(r*255,0,255)}return i=+e[1],n=+e[3],o=+e[5],i=255&(e[2]?fi(i):Us(i,0,255)),n=255&(e[4]?fi(n):Us(n,0,255)),o=255&(e[6]?fi(o):Us(o,0,255)),{r:i,g:n,b:o,a:s}}}function o1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ps(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ia=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,kn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function r1(t,e,s){const i=kn(ps(t.r)),n=kn(ps(t.g)),o=kn(ps(t.b));return{r:Hs(ia(i+s*(kn(ps(e.r))-i))),g:Hs(ia(n+s*(kn(ps(e.g))-n))),b:Hs(ia(o+s*(kn(ps(e.b))-o))),a:t.a+s*(e.a-t.a)}}function xo(t,e,s){if(t){let i=Pl(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*s,e===0?360:1)),i=Il(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Cf(t,e){return t&&Object.assign(e||{},t)}function ad(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Hs(t[3]))):(e=Cf(t,{r:0,g:0,b:0,a:1}),e.a=Hs(e.a)),e}function a1(t){return t.charAt(0)==="r"?i1(t):Q_(t)}class qi{constructor(e){if(e instanceof qi)return e;const s=typeof e;let i;s==="object"?i=ad(e):s==="string"&&(i=H_(e)||s1(e)||a1(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Cf(this._rgb);return e&&(e.a=ps(e.a)),e}set rgb(e){this._rgb=ad(e)}rgbString(){return this._valid?o1(this._rgb):void 0}hexString(){return this._valid?W_(this._rgb):void 0}hslString(){return this._valid?e1(this._rgb):void 0}mix(e,s){if(e){const i=this.rgb,n=e.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=i.a-n.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-d,i.r=255&d*i.r+o*n.r+.5,i.g=255&d*i.g+o*n.g+.5,i.b=255&d*i.b+o*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(e,s){return e&&(this._rgb=r1(this._rgb,e._rgb,s)),this}clone(){return new qi(this.rgb)}alpha(e){return this._rgb.a=Hs(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ro(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return xo(this._rgb,2,e),this}darken(e){return xo(this._rgb,2,-e),this}saturate(e){return xo(this._rgb,1,e),this}desaturate(e){return xo(this._rgb,1,-e),this}rotate(e){return Z_(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function cs(){}const l1=(()=>{let t=0;return()=>t++})();function ye(t){return t==null}function je(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function He(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Et(t,e){return He(t)?t:e}function pe(t,e){return typeof t>"u"?e:t}const c1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Mf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Le(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Ee(t,e,s,i){let n,o,r;if(je(t))if(o=t.length,i)for(n=o-1;n>=0;n--)e.call(s,t[n],n);else for(n=0;n<o;n++)e.call(s,t[n],n);else if(ve(t))for(r=Object.keys(t),o=r.length,n=0;n<o;n++)e.call(s,t[r[n]],r[n])}function or(t,e){let s,i,n,o;if(!t||!e||t.length!==e.length)return!1;for(s=0,i=t.length;s<i;++s)if(n=t[s],o=e[s],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function rr(t){if(je(t))return t.map(rr);if(ve(t)){const e=Object.create(null),s=Object.keys(t),i=s.length;let n=0;for(;n<i;++n)e[s[n]]=rr(t[s[n]]);return e}return t}function Af(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function d1(t,e,s,i){if(!Af(t))return;const n=e[t],o=s[t];ve(n)&&ve(o)?Ki(n,o,i):e[t]=rr(o)}function Ki(t,e,s){const i=je(e)?e:[e],n=i.length;if(!ve(t))return t;s=s||{};const o=s.merger||d1;let r;for(let a=0;a<n;++a){if(r=i[a],!ve(r))continue;const l=Object.keys(r);for(let d=0,u=l.length;d<u;++d)o(l[d],t,r,s)}return t}function Pi(t,e){return Ki(t,e,{merger:u1})}function u1(t,e,s){if(!Af(t))return;const i=e[t],n=s[t];ve(i)&&ve(n)?Pi(i,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=rr(n))}const ld={"":t=>t,x:t=>t.x,y:t=>t.y};function h1(t){const e=t.split("."),s=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(s.push(i),i="");return s}function f1(t){const e=h1(t);return s=>{for(const i of e){if(i==="")break;s=s&&s[i]}return s}}function qs(t,e){return(ld[e]||(ld[e]=f1(e)))(t)}function Ol(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gi=t=>typeof t<"u",Ks=t=>typeof t=="function",cd=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function p1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ne=Math.PI,Ue=2*Ne,m1=Ue+Ne,ar=Number.POSITIVE_INFINITY,g1=Ne/180,Ke=Ne/2,Zs=Ne/4,dd=Ne*2/3,Ns=Math.log10,is=Math.sign;function Ti(t,e,s){return Math.abs(t-e)<s}function ud(t){const e=Math.round(t);t=Ti(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Ns(t))),i=t/s;return(i<=1?1:i<=2?2:i<=5?5:10)*s}function b1(t){const e=[],s=Math.sqrt(t);let i;for(i=1;i<s;i++)t%i===0&&(e.push(i),e.push(t/i));return s===(s|0)&&e.push(s),e.sort((n,o)=>n-o).pop(),e}function y1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Wn(t){return!y1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function x1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function Ef(t,e,s){let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i][s],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Bt(t){return t*(Ne/180)}function Dl(t){return t*(180/Ne)}function hd(t){if(!He(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Pf(t,e){const s=e.x-t.x,i=e.y-t.y,n=Math.sqrt(s*s+i*i);let o=Math.atan2(i,s);return o<-.5*Ne&&(o+=Ue),{angle:o,distance:n}}function Na(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function v1(t,e){return(t-e+m1)%Ue-Ne}function Pt(t){return(t%Ue+Ue)%Ue}function Yi(t,e,s,i){const n=Pt(t),o=Pt(e),r=Pt(s),a=Pt(o-n),l=Pt(r-n),d=Pt(n-o),u=Pt(n-r);return n===o||n===r||i&&o===r||a>l&&d<u}function tt(t,e,s){return Math.max(e,Math.min(s,t))}function _1(t){return tt(t,-32768,32767)}function bs(t,e,s,i=1e-6){return t>=Math.min(e,s)-i&&t<=Math.max(e,s)+i}function Rl(t,e,s){s=s||(r=>t[r]<e);let i=t.length-1,n=0,o;for(;i-n>1;)o=n+i>>1,s(o)?n=o:i=o;return{lo:n,hi:i}}const ys=(t,e,s,i)=>Rl(t,s,i?n=>{const o=t[n][e];return o<s||o===s&&t[n+1][e]===s}:n=>t[n][e]<s),w1=(t,e,s)=>Rl(t,s,i=>t[i][e]>=s);function k1(t,e,s){let i=0,n=t.length;for(;i<n&&t[i]<e;)i++;for(;n>i&&t[n-1]>s;)n--;return i>0||n<t.length?t.slice(i,n):t}const Tf=["push","pop","shift","splice","unshift"];function S1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Tf.forEach(s=>{const i="_onData"+Ol(s),n=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...o){const r=n.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),r}})})}function fd(t,e){const s=t._chartjs;if(!s)return;const i=s.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(Tf.forEach(o=>{delete t[o]}),delete t._chartjs)}function If(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Of=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Df(t,e){let s=[],i=!1;return function(...n){s=n,i||(i=!0,Of.call(window,()=>{i=!1,t.apply(e,s)}))}}function C1(t,e){let s;return function(...i){return e?(clearTimeout(s),s=setTimeout(t,e,i)):t.apply(this,i),e}}const Ll=t=>t==="start"?"left":t==="end"?"right":"center",rt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,M1=(t,e,s,i)=>t===(i?"left":"right")?s:t==="center"?(e+s)/2:e;function Rf(t,e,s){const i=e.length;let n=0,o=i;if(t._sorted){const{iScale:r,vScale:a,_parsed:l}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=r.axis,{min:h,max:f,minDefined:p,maxDefined:g}=r.getUserBounds();if(p){if(n=Math.min(ys(l,u,h).lo,s?i:ys(e,u,r.getPixelForValue(h)).lo),d){const b=l.slice(0,n+1).reverse().findIndex(x=>!ye(x[a.axis]));n-=Math.max(0,b)}n=tt(n,0,i-1)}if(g){let b=Math.max(ys(l,r.axis,f,!0).hi+1,s?0:ys(e,u,r.getPixelForValue(f),!0).hi+1);if(d){const x=l.slice(b-1).findIndex(w=>!ye(w[a.axis]));b+=Math.max(0,x)}o=tt(b,n,i)-n}else o=i-n}return{start:n,count:o}}function Lf(t){const{xScale:e,yScale:s,_scaleRanges:i}=t,n={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!i)return t._scaleRanges=n,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==s.min||i.ymax!==s.max;return Object.assign(i,n),o}const vo=t=>t===0||t===1,pd=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ue/s)),md=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ue/s)+1,Ii={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ke)+1,easeOutSine:t=>Math.sin(t*Ke),easeInOutSine:t=>-.5*(Math.cos(Ne*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>vo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>vo(t)?t:pd(t,.075,.3),easeOutElastic:t=>vo(t)?t:md(t,.075,.3),easeInOutElastic(t){return vo(t)?t:t<.5?.5*pd(t*2,.1125,.45):.5+.5*md(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ii.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ii.easeInBounce(t*2)*.5:Ii.easeOutBounce(t*2-1)*.5+.5};function Fl(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gd(t){return Fl(t)?t:new qi(t)}function oa(t){return Fl(t)?t:new qi(t).saturate(.5).darken(.1).hexString()}const A1=["x","y","borderWidth","radius","tension"],E1=["color","borderColor","backgroundColor"];function P1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:E1},numbers:{type:"number",properties:A1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function T1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bd=new Map;function I1(t,e){e=e||{};const s=t+JSON.stringify(e);let i=bd.get(s);return i||(i=new Intl.NumberFormat(t,e),bd.set(s,i)),i}function ao(t,e,s){return I1(e,s).format(t)}const Ff={values(t){return je(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const i=this.chart.options.locale;let n,o=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),o=O1(t,s)}const r=Ns(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ao(t,i,l)},logarithmic(t,e,s){if(t===0)return"0";const i=s[e].significand||t/Math.pow(10,Math.floor(Ns(t)));return[1,2,3,5,10,15].includes(i)||e>.8*s.length?Ff.numeric.call(this,t,e,s):""}};function O1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Dr={formatters:Ff};function D1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Dr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const fn=Object.create(null),Ba=Object.create(null);function Oi(t,e){if(!e)return t;const s=e.split(".");for(let i=0,n=s.length;i<n;++i){const o=s[i];t=t[o]||(t[o]=Object.create(null))}return t}function ra(t,e,s){return typeof e=="string"?Ki(Oi(t,e),s):Ki(Oi(t,""),e)}class R1{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>oa(n.backgroundColor),this.hoverBorderColor=(i,n)=>oa(n.borderColor),this.hoverColor=(i,n)=>oa(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return ra(this,e,s)}get(e){return Oi(this,e)}describe(e,s){return ra(Ba,e,s)}override(e,s){return ra(fn,e,s)}route(e,s,i,n){const o=Oi(this,e),r=Oi(this,i),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],d=r[n];return ve(l)?Object.assign({},d,l):pe(l,d)},set(l){this[a]=l}}})}apply(e){e.forEach(s=>s(this))}}var Ve=new R1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[P1,T1,D1]);function L1(t){return!t||ye(t.size)||ye(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function lr(t,e,s,i,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,s.push(n)),o>i&&(i=o),i}function F1(t,e,s,i){i=i||{};let n=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(n=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let r=0;const a=s.length;let l,d,u,h,f;for(l=0;l<a;l++)if(h=s[l],h!=null&&!je(h))r=lr(t,n,o,r,h);else if(je(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!je(f)&&(r=lr(t,n,o,r,f));t.restore();const p=o.length/2;if(p>s.length){for(l=0;l<p;l++)delete n[o[l]];o.splice(0,p)}return r}function en(t,e,s){const i=t.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((e-n)*i)/i+n}function yd(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Va(t,e,s,i){jf(t,e,s,i,null)}function jf(t,e,s,i,n){let o,r,a,l,d,u,h,f;const p=e.pointStyle,g=e.rotation,b=e.radius;let x=(g||0)*g1;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(s,i),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),p){default:n?t.ellipse(s,i,n/2,b,0,0,Ue):t.arc(s,i,b,0,Ue),t.closePath();break;case"triangle":u=n?n/2:b,t.moveTo(s+Math.sin(x)*u,i-Math.cos(x)*b),x+=dd,t.lineTo(s+Math.sin(x)*u,i-Math.cos(x)*b),x+=dd,t.lineTo(s+Math.sin(x)*u,i-Math.cos(x)*b),t.closePath();break;case"rectRounded":d=b*.516,l=b-d,r=Math.cos(x+Zs)*l,h=Math.cos(x+Zs)*(n?n/2-d:l),a=Math.sin(x+Zs)*l,f=Math.sin(x+Zs)*(n?n/2-d:l),t.arc(s-h,i-a,d,x-Ne,x-Ke),t.arc(s+f,i-r,d,x-Ke,x),t.arc(s+h,i+a,d,x,x+Ke),t.arc(s-f,i+r,d,x+Ke,x+Ne),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*b,u=n?n/2:l,t.rect(s-u,i-l,2*u,2*l);break}x+=Zs;case"rectRot":h=Math.cos(x)*(n?n/2:b),r=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(n?n/2:b),t.moveTo(s-h,i-a),t.lineTo(s+f,i-r),t.lineTo(s+h,i+a),t.lineTo(s-f,i+r),t.closePath();break;case"crossRot":x+=Zs;case"cross":h=Math.cos(x)*(n?n/2:b),r=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(n?n/2:b),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+f,i-r),t.lineTo(s-f,i+r);break;case"star":h=Math.cos(x)*(n?n/2:b),r=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(n?n/2:b),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+f,i-r),t.lineTo(s-f,i+r),x+=Zs,h=Math.cos(x)*(n?n/2:b),r=Math.cos(x)*b,a=Math.sin(x)*b,f=Math.sin(x)*(n?n/2:b),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+f,i-r),t.lineTo(s-f,i+r);break;case"line":r=n?n/2:Math.cos(x)*b,a=Math.sin(x)*b,t.moveTo(s-r,i-a),t.lineTo(s+r,i+a);break;case"dash":t.moveTo(s,i),t.lineTo(s+Math.cos(x)*(n?n/2:b),i+Math.sin(x)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function xs(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Rr(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Lr(t){t.restore()}function j1(t,e,s,i,n){if(!e)return t.lineTo(s.x,s.y);if(n==="middle"){const o=(e.x+s.x)/2;t.lineTo(o,e.y),t.lineTo(o,s.y)}else n==="after"!=!!i?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function U1(t,e,s,i){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?s.cp2x:s.cp1x,i?s.cp2y:s.cp1y,s.x,s.y)}function N1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ye(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function B1(t,e,s,i,n){if(n.strikethrough||n.underline){const o=t.measureText(i),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,d=s+o.actualBoundingBoxDescent,u=n.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function V1(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function pn(t,e,s,i,n,o={}){const r=je(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,d;for(t.save(),t.font=n.string,N1(t,o),l=0;l<r.length;++l)d=r[l],o.backdrop&&V1(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ye(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(d,s,i,o.maxWidth)),t.fillText(d,s,i,o.maxWidth),B1(t,s,i,d,o),i+=Number(n.lineHeight);t.restore()}function Ji(t,e){const{x:s,y:i,w:n,h:o,radius:r}=e;t.arc(s+r.topLeft,i+r.topLeft,r.topLeft,1.5*Ne,Ne,!0),t.lineTo(s,i+o-r.bottomLeft),t.arc(s+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,Ne,Ke,!0),t.lineTo(s+n-r.bottomRight,i+o),t.arc(s+n-r.bottomRight,i+o-r.bottomRight,r.bottomRight,Ke,0,!0),t.lineTo(s+n,i+r.topRight),t.arc(s+n-r.topRight,i+r.topRight,r.topRight,0,-Ke,!0),t.lineTo(s+r.topLeft,i)}const $1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,H1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function z1(t,e){const s=(""+t).match($1);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const W1=t=>+t||0;function jl(t,e){const s={},i=ve(e),n=i?Object.keys(e):e,o=ve(t)?i?r=>pe(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of n)s[r]=W1(o(r));return s}function Uf(t){return jl(t,{top:"y",right:"x",bottom:"y",left:"x"})}function un(t){return jl(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ut(t){const e=Uf(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||Ve.font;let s=pe(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let i=pe(t.style,e.style);i&&!(""+i).match(H1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:pe(t.family,e.family),lineHeight:z1(pe(t.lineHeight,e.lineHeight),s),size:s,style:i,weight:pe(t.weight,e.weight),string:""};return n.string=L1(n),n}function pi(t,e,s,i){let n=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),n=!1),s!==void 0&&je(a)&&(a=a[s%a.length],n=!1),a!==void 0))return i&&!n&&(i.cacheable=!1),a}function q1(t,e,s){const{min:i,max:n}=t,o=Mf(e,(n-i)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(i,-Math.abs(o)),max:r(n,o)}}function Ys(t,e){return Object.assign(Object.create(t),e)}function Ul(t,e=[""],s,i,n=()=>t[0]){const o=s||t;typeof i>"u"&&(i=$f("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:n,override:a=>Ul([a,...t],e,o,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Bf(a,l,()=>ew(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return vd(a).includes(l)},ownKeys(a){return vd(a)},set(a,l,d){const u=a._storage||(a._storage=n());return a[l]=u[l]=d,delete a._keys,!0}})}function qn(t,e,s,i){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Nf(t,i),setContext:o=>qn(t,o,s,i),override:o=>qn(t.override(o),e,s,i)};return new Proxy(n,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return Bf(o,r,()=>G1(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function Nf(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:s,indexable:i,isScriptable:Ks(s)?s:()=>s,isIndexable:Ks(i)?i:()=>i}}const K1=(t,e)=>t?t+Ol(e):e,Nl=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Bf(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=s();return t[e]=i,i}function G1(t,e,s){const{_proxy:i,_context:n,_subProxy:o,_descriptors:r}=t;let a=i[e];return Ks(a)&&r.isScriptable(e)&&(a=Y1(e,a,t,s)),je(a)&&a.length&&(a=J1(e,a,t,r.isIndexable)),Nl(e,a)&&(a=qn(a,n,o&&o[e],r)),a}function Y1(t,e,s,i){const{_proxy:n,_context:o,_subProxy:r,_stack:a}=s;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,r||i);return a.delete(t),Nl(t,l)&&(l=Bl(n._scopes,n,t,l)),l}function J1(t,e,s,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(ve(e[0])){const l=e,d=n._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Bl(d,n,t,u);e.push(qn(h,o,r&&r[t],a))}}return e}function Vf(t,e,s){return Ks(t)?t(e,s):t}const X1=(t,e)=>t===!0?e:typeof t=="string"?qs(e,t):void 0;function Q1(t,e,s,i,n){for(const o of e){const r=X1(s,o);if(r){t.add(r);const a=Vf(r._fallback,s,n);if(typeof a<"u"&&a!==s&&a!==i)return a}else if(r===!1&&typeof i<"u"&&s!==i)return null}return!1}function Bl(t,e,s,i){const n=e._rootScopes,o=Vf(e._fallback,s,i),r=[...t,...n],a=new Set;a.add(i);let l=xd(a,r,s,o||s,i);return l===null||typeof o<"u"&&o!==s&&(l=xd(a,r,o,l,i),l===null)?!1:Ul(Array.from(a),[""],n,o,()=>Z1(e,s,i))}function xd(t,e,s,i,n){for(;s;)s=Q1(t,e,s,i,n);return s}function Z1(t,e,s){const i=t._getTarget();e in i||(i[e]={});const n=i[e];return je(n)&&ve(s)?s:n||{}}function ew(t,e,s,i){let n;for(const o of e)if(n=$f(K1(o,t),s),typeof n<"u")return Nl(t,n)?Bl(s,i,t,n):n}function $f(t,e){for(const s of e){if(!s)continue;const i=s[t];if(typeof i<"u")return i}}function vd(t){let e=t._keys;return e||(e=t._keys=tw(t._scopes)),e}function tw(t){const e=new Set;for(const s of t)for(const i of Object.keys(s).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}function Hf(t,e,s,i){const{iScale:n}=t,{key:o="r"}=this._parsing,r=new Array(i);let a,l,d,u;for(a=0,l=i;a<l;++a)d=a+s,u=e[d],r[a]={r:n.parse(qs(u,o),d)};return r}const sw=Number.EPSILON||1e-14,Kn=(t,e)=>e<t.length&&!t[e].skip&&t[e],zf=t=>t==="x"?"y":"x";function nw(t,e,s,i){const n=t.skip?e:t,o=e,r=s.skip?e:s,a=Na(o,n),l=Na(r,o);let d=a/(a+l),u=l/(a+l);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=i*d,f=i*u;return{previous:{x:o.x-h*(r.x-n.x),y:o.y-h*(r.y-n.y)},next:{x:o.x+f*(r.x-n.x),y:o.y+f*(r.y-n.y)}}}function iw(t,e,s){const i=t.length;let n,o,r,a,l,d=Kn(t,0);for(let u=0;u<i-1;++u)if(l=d,d=Kn(t,u+1),!(!l||!d)){if(Ti(e[u],0,sw)){s[u]=s[u+1]=0;continue}n=s[u]/e[u],o=s[u+1]/e[u],a=Math.pow(n,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[u]=n*r*e[u],s[u+1]=o*r*e[u])}}function ow(t,e,s="x"){const i=zf(s),n=t.length;let o,r,a,l=Kn(t,0);for(let d=0;d<n;++d){if(r=a,a=l,l=Kn(t,d+1),!a)continue;const u=a[s],h=a[i];r&&(o=(u-r[s])/3,a[`cp1${s}`]=u-o,a[`cp1${i}`]=h-o*e[d]),l&&(o=(l[s]-u)/3,a[`cp2${s}`]=u+o,a[`cp2${i}`]=h+o*e[d])}}function rw(t,e="x"){const s=zf(e),i=t.length,n=Array(i).fill(0),o=Array(i);let r,a,l,d=Kn(t,0);for(r=0;r<i;++r)if(a=l,l=d,d=Kn(t,r+1),!!l){if(d){const u=d[e]-l[e];n[r]=u!==0?(d[s]-l[s])/u:0}o[r]=a?d?is(n[r-1])!==is(n[r])?0:(n[r-1]+n[r])/2:n[r-1]:n[r]}iw(t,n,o),ow(t,o,e)}function _o(t,e,s){return Math.max(Math.min(t,s),e)}function aw(t,e){let s,i,n,o,r,a=xs(t[0],e);for(s=0,i=t.length;s<i;++s)r=o,o=a,a=s<i-1&&xs(t[s+1],e),o&&(n=t[s],r&&(n.cp1x=_o(n.cp1x,e.left,e.right),n.cp1y=_o(n.cp1y,e.top,e.bottom)),a&&(n.cp2x=_o(n.cp2x,e.left,e.right),n.cp2y=_o(n.cp2y,e.top,e.bottom)))}function lw(t,e,s,i,n){let o,r,a,l;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")rw(t,n);else{let d=i?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=nw(d,a,t[Math.min(o+1,r-(i?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}e.capBezierPoints&&aw(t,s)}function Vl(){return typeof window<"u"&&typeof document<"u"}function $l(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function cr(t,e,s){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[s])):i=t,i}const Fr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function cw(t,e){return Fr(t).getPropertyValue(e)}const dw=["top","right","bottom","left"];function hn(t,e,s){const i={};s=s?"-"+s:"";for(let n=0;n<4;n++){const o=dw[n];i[o]=parseFloat(t[e+"-"+o+s])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const uw=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function hw(t,e){const s=t.touches,i=s&&s.length?s[0]:t,{offsetX:n,offsetY:o}=i;let r=!1,a,l;if(uw(n,o,t.target))a=n,l=o;else{const d=e.getBoundingClientRect();a=i.clientX-d.left,l=i.clientY-d.top,r=!0}return{x:a,y:l,box:r}}function rn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:i}=e,n=Fr(s),o=n.boxSizing==="border-box",r=hn(n,"padding"),a=hn(n,"border","width"),{x:l,y:d,box:u}=hw(t,s),h=r.left+(u&&a.left),f=r.top+(u&&a.top);let{width:p,height:g}=e;return o&&(p-=r.width+a.width,g-=r.height+a.height),{x:Math.round((l-h)/p*s.width/i),y:Math.round((d-f)/g*s.height/i)}}function fw(t,e,s){let i,n;if(e===void 0||s===void 0){const o=t&&$l(t);if(!o)e=t.clientWidth,s=t.clientHeight;else{const r=o.getBoundingClientRect(),a=Fr(o),l=hn(a,"border","width"),d=hn(a,"padding");e=r.width-d.width-l.width,s=r.height-d.height-l.height,i=cr(a.maxWidth,o,"clientWidth"),n=cr(a.maxHeight,o,"clientHeight")}}return{width:e,height:s,maxWidth:i||ar,maxHeight:n||ar}}const wo=t=>Math.round(t*10)/10;function pw(t,e,s,i){const n=Fr(t),o=hn(n,"margin"),r=cr(n.maxWidth,t,"clientWidth")||ar,a=cr(n.maxHeight,t,"clientHeight")||ar,l=fw(t,e,s);let{width:d,height:u}=l;if(n.boxSizing==="content-box"){const f=hn(n,"border","width"),p=hn(n,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-o.width),u=Math.max(0,i?d/i:u-o.height),d=wo(Math.min(d,r,l.maxWidth)),u=wo(Math.min(u,a,l.maxHeight)),d&&!u&&(u=wo(d/2)),(e!==void 0||s!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,d=wo(Math.floor(u*i))),{width:d,height:u}}function _d(t,e,s){const i=e||1,n=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||r.height!==n||r.width!==o?(t.currentDevicePixelRatio=i,r.height=n,r.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const mw=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Vl()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function wd(t,e){const s=cw(t,e),i=s&&s.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function an(t,e,s,i){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function gw(t,e,s,i){return{x:t.x+s*(e.x-t.x),y:i==="middle"?s<.5?t.y:e.y:i==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function bw(t,e,s,i){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=an(t,n,s),a=an(n,o,s),l=an(o,e,s),d=an(r,a,s),u=an(a,l,s);return an(d,u,s)}const yw=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,i){return s-i},leftForLtr(s,i){return s-i}}},xw=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Un(t,e,s){return t?yw(e,s):xw()}function Wf(t,e){let s,i;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,i=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=i)}function qf(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Kf(t){return t==="angle"?{between:Yi,compare:v1,normalize:Pt}:{between:bs,compare:(e,s)=>e-s,normalize:e=>e}}function kd({start:t,end:e,count:s,loop:i,style:n}){return{start:t%s,end:e%s,loop:i&&(e-t+1)%s===0,style:n}}function vw(t,e,s){const{property:i,start:n,end:o}=s,{between:r,normalize:a}=Kf(i),l=e.length;let{start:d,end:u,loop:h}=t,f,p;if(h){for(d+=l,u+=l,f=0,p=l;f<p&&r(a(e[d%l][i]),n,o);++f)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:h,style:t.style}}function Gf(t,e,s){if(!s)return[t];const{property:i,start:n,end:o}=s,r=e.length,{compare:a,between:l,normalize:d}=Kf(i),{start:u,end:h,loop:f,style:p}=vw(t,e,s),g=[];let b=!1,x=null,w,k,E;const A=()=>l(n,E,w)&&a(n,E)!==0,P=()=>a(o,w)===0||l(o,E,w),N=()=>b||A(),F=()=>!b||P();for(let H=u,Z=u;H<=h;++H)k=e[H%r],!k.skip&&(w=d(k[i]),w!==E&&(b=l(w,n,o),x===null&&N()&&(x=a(w,n)===0?H:Z),x!==null&&F()&&(g.push(kd({start:x,end:H,loop:f,count:r,style:p})),x=null),Z=H,E=w));return x!==null&&g.push(kd({start:x,end:h,loop:f,count:r,style:p})),g}function Yf(t,e){const s=[],i=t.segments;for(let n=0;n<i.length;n++){const o=Gf(i[n],t.points,e);o.length&&s.push(...o)}return s}function _w(t,e,s,i){let n=0,o=e-1;if(s&&!i)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,s&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}function ww(t,e,s,i){const n=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=s;++l){const d=t[l%n];d.skip||d.stop?a.skip||(i=!1,o.push({start:e%n,end:(l-1)%n,loop:i}),e=r=d.stop?l:null):(r=l,a.skip&&(e=l)),a=d}return r!==null&&o.push({start:e%n,end:r%n,loop:i}),o}function kw(t,e){const s=t.points,i=t.options.spanGaps,n=s.length;if(!n)return[];const o=!!t._loop,{start:r,end:a}=_w(s,n,o,i);if(i===!0)return Sd(t,[{start:r,end:a,loop:o}],s,e);const l=a<r?a+n:a,d=!!t._fullLoop&&r===0&&a===n-1;return Sd(t,ww(s,r,l,d),s,e)}function Sd(t,e,s,i){return!i||!i.setContext||!s?e:Sw(t,e,s,i)}function Sw(t,e,s,i){const n=t._chart.getContext(),o=Cd(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=s.length,d=[];let u=o,h=e[0].start,f=h;function p(g,b,x,w){const k=a?-1:1;if(g!==b){for(g+=l;s[g%l].skip;)g-=k;for(;s[b%l].skip;)b+=k;g%l!==b%l&&(d.push({start:g%l,end:b%l,loop:x,style:w}),u=w,h=b%l)}}for(const g of e){h=a?h:g.start;let b=s[h%l],x;for(f=h+1;f<=g.end;f++){const w=s[f%l];x=Cd(i.setContext(Ys(n,{type:"segment",p0:b,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),Cw(x,u)&&p(h,f-1,g.loop,u),b=w,u=x}h<f-1&&p(h,f-1,g.loop,u)}return d}function Cd(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Cw(t,e){if(!e)return!1;const s=[],i=function(n,o){return Fl(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function ko(t,e,s){return t.options.clip?t[s]:e[s]}function Mw(t,e){const{xScale:s,yScale:i}=t;return s&&i?{left:ko(s,e,"left"),right:ko(s,e,"right"),top:ko(i,e,"top"),bottom:ko(i,e,"bottom")}:e}function Jf(t,e){const s=e._clip;if(s.disabled)return!1;const i=Mw(e,t.chartArea);return{left:s.left===!1?0:i.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:i.right+(s.right===!0?0:s.right),top:s.top===!1?0:i.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:i.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Aw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,i,n){const o=s.listeners[n],r=s.duration;o.forEach(a=>a({chart:e,initial:s.initial,numSteps:r,currentStep:Math.min(i-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Of.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,e,"progress")),o.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),s+=o.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let i=s.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,i)),i}listen(e,s,i){this._getAnims(e).listeners[s].push(i)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const i=s.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ds=new Aw;const Md="transparent",Ew={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const i=gd(t||Md),n=i.valid&&gd(e||Md);return n&&n.valid?n.mix(i,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Pw{constructor(e,s,i,n){const o=s[i];n=pi([e.to,n,o,e.from]);const r=pi([e.from,o,n]);this._active=!0,this._fn=e.fn||Ew[e.type||typeof r],this._easing=Ii[e.easing]||Ii.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(e,s,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=pi([e.to,s,n,e.from]),this._from=pi([e.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<i),!this._active){this._target[n]=a,this._notify(!0);return}if(s<0){this._target[n]=o;return}l=s/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,i)=>{e.push({res:s,rej:i})})}_notify(e){const s=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][s]()}}class Xf{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ve(e))return;const s=Object.keys(Ve.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const o=e[n];if(!ve(o))return;const r={};for(const a of s)r[a]=o[a];(je(o.properties)&&o.properties||[n]).forEach(a=>{(a===n||!i.has(a))&&i.set(a,r)})})}_animateOptions(e,s){const i=s.options,n=Iw(e,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&Tw(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,s){const i=this._properties,n=[],o=e.$animations||(e.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const d=r[l];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,s));continue}const u=s[d];let h=o[d];const f=i.get(d);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}o[d]=h=new Pw(f,e,d,u),n.push(h)}return n}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const i=this._createAnimations(e,s);if(i.length)return ds.add(this._chart,i),!0}}function Tw(t,e){const s=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const o=t[i[n]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function Iw(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Ad(t,e){const s=t&&t.options||{},i=s.reverse,n=s.min===void 0?e:0,o=s.max===void 0?e:0;return{start:i?o:n,end:i?n:o}}function Ow(t,e,s){if(s===!1)return!1;const i=Ad(t,s),n=Ad(e,s);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function Dw(t){let e,s,i,n;return ve(t)?(e=t.top,s=t.right,i=t.bottom,n=t.left):e=s=i=n=t,{top:e,right:s,bottom:i,left:n,disabled:t===!1}}function Qf(t,e){const s=[],i=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=i.length;n<o;++n)s.push(i[n].index);return s}function Ed(t,e,s,i={}){const n=t.keys,o=i.mode==="single";let r,a,l,d;if(e===null)return;let u=!1;for(r=0,a=n.length;r<a;++r){if(l=+n[r],l===s){if(u=!0,i.all)continue;break}d=t.values[l],He(d)&&(o||e===0||is(e)===is(d))&&(e+=d)}return!u&&!i.all?0:e}function Rw(t,e){const{iScale:s,vScale:i}=e,n=s.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length);let l,d,u;for(l=0,d=r.length;l<d;++l)u=r[l],a[l]={[n]:u,[o]:t[u]};return a}function aa(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Lw(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Fw(t){const{min:e,max:s,minDefined:i,maxDefined:n}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function jw(t,e,s){const i=t[e]||(t[e]={});return i[s]||(i[s]={})}function Pd(t,e,s,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const o=t[n.index];if(s&&o>0||!s&&o<0)return n.index}return null}function Td(t,e){const{chart:s,_cachedMeta:i}=t,n=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=i,l=o.axis,d=r.axis,u=Lw(o,r,i),h=e.length;let f;for(let p=0;p<h;++p){const g=e[p],{[l]:b,[d]:x}=g,w=g._stacks||(g._stacks={});f=w[d]=jw(n,u,b),f[a]=x,f._top=Pd(f,r,!0,i.type),f._bottom=Pd(f,r,!1,i.type);const k=f._visualValues||(f._visualValues={});k[a]=x}}function la(t,e){const s=t.scales;return Object.keys(s).filter(i=>s[i].axis===e).shift()}function Uw(t,e){return Ys(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Nw(t,e,s){return Ys(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function ri(t,e){const s=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const n of e){const o=n._stacks;if(!o||o[i]===void 0||o[i][s]===void 0)return;delete o[i][s],o[i]._visualValues!==void 0&&o[i]._visualValues[s]!==void 0&&delete o[i]._visualValues[s]}}}const ca=t=>t==="reset"||t==="none",Id=(t,e)=>e?t:Object.assign({},t),Bw=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Qf(s,!0),values:null};class Ht{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=aa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ri(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,i=this.getDataset(),n=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=s.xAxisID=pe(i.xAxisID,la(e,"x")),r=s.yAxisID=pe(i.yAxisID,la(e,"y")),a=s.rAxisID=pe(i.rAxisID,la(e,"r")),l=s.indexAxis,d=s.iAxisID=n(l,o,r,a),u=s.vAxisID=n(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fd(this._data,this),e._stacked&&ri(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),i=this._data;if(ve(s)){const n=this._cachedMeta;this._data=Rw(s,n)}else if(i!==s){if(i){fd(i,this);const n=this._cachedMeta;ri(n),n._parsed=[]}s&&Object.isExtensible(s)&&S1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=s._stacked;s._stacked=aa(s.vScale,s),s.stack!==i.stack&&(n=!0,ri(s),s.stack=i.stack),this._resyncElements(e),(n||o!==s._stacked)&&(Td(this,s._parsed),s._stacked=aa(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:r}=i,a=o.axis;let l=e===0&&s===n.length?!0:i._sorted,d=e>0&&i._parsed[e-1],u,h,f;if(this._parsing===!1)i._parsed=n,i._sorted=!0,f=n;else{je(n[e])?f=this.parseArrayData(i,n,e,s):ve(n[e])?f=this.parseObjectData(i,n,e,s):f=this.parsePrimitiveData(i,n,e,s);const p=()=>h[a]===null||d&&h[a]<d[a];for(u=0;u<s;++u)i._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),d=h);i._sorted=l}r&&Td(this,f)}parsePrimitiveData(e,s,i,n){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,d=o.getLabels(),u=o===r,h=new Array(n);let f,p,g;for(f=0,p=n;f<p;++f)g=f+i,h[f]={[a]:u||o.parse(d[g],g),[l]:r.parse(s[g],g)};return h}parseArrayData(e,s,i,n){const{xScale:o,yScale:r}=e,a=new Array(n);let l,d,u,h;for(l=0,d=n;l<d;++l)u=l+i,h=s[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,s,i,n){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=new Array(n);let u,h,f,p;for(u=0,h=n;u<h;++u)f=u+i,p=s[f],d[u]={x:o.parse(qs(p,a),f),y:r.parse(qs(p,l),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,i){const n=this.chart,o=this._cachedMeta,r=s[e.axis],a={keys:Qf(n,!0),values:s._stacks[e.axis]._visualValues};return Ed(a,r,o.index,{mode:i})}updateRangeFromParsed(e,s,i,n){const o=i[s.axis];let r=o===null?NaN:o;const a=n&&i._stacks[s.axis];n&&a&&(n.values=a,r=Ed(n,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,s){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&e===i.iScale,r=n.length,a=this._getOtherScale(e),l=Bw(s,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Fw(a);let f,p;function g(){p=n[f];const b=p[a.axis];return!He(p[e.axis])||u>b||h<b}for(f=0;f<r&&!(!g()&&(this.updateRangeFromParsed(d,e,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(d,e,p,l);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=s.length;n<o;++n)r=s[n][e.axis],He(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,i=s.iScale,n=s.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Dw(pe(this.options.clip,Ow(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,i=this._cachedMeta,n=i.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||n.length-a,d=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,o,a,l),u=a;u<a+l;++u){const h=n[u];h.hidden||(h.active&&d?r.push(h):h.draw(e,o))}for(u=0;u<r.length;++u)r[u].draw(e,o)}getStyle(e,s){const i=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,s,i){const n=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=Nw(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=n.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Uw(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",i){const n=s==="active",o=this._cachedDataOpts,r=e+"-"+s,a=o[r],l=this.enableOptionSharing&&Gi(i);if(a)return Id(a,l);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys(Ve.elements[e]),g=()=>this.getContext(i,n,s),b=d.resolveNamedOptions(f,p,g,h);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(Id(b,l))),b}_resolveAnimations(e,s,i){const n=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,i,s))}const d=new Xf(n,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ca(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const i=this.resolveDataElementOptions(e,s),n=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(s,o)||o!==n;return this.updateSharedOptions(o,s,i),{sharedOptions:o,includeOptions:r}}updateElement(e,s,i,n){ca(n)?Object.assign(e,i):this._resolveAnimations(s,n).update(e,i)}updateSharedOptions(e,s,i){e&&!ca(s)&&this._resolveAnimations(void 0,s).update(e,i)}_setStyle(e,s,i,n){e.active=n;const o=this.getStyle(s,n);this._resolveAnimations(s,i,n).update(e,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,s,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,i=this._cachedMeta.data;for(const[a,l,d]of this._syncList)this[a](l,d);this._syncList=[];const n=i.length,o=s.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,e):o<n&&this._removeElements(o,n-o)}_insertElements(e,s,i=!0){const n=this._cachedMeta,o=n.data,r=e+s;let a;const l=d=>{for(d.length+=s,a=d.length-1;a>=r;a--)d[a]=d[a-s]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,s),i&&this.updateElements(o,e,s,"reset")}updateElements(e,s,i,n){}_removeElements(e,s){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,s);i._stacked&&ri(i,n)}i.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,i,n]=e;this[s](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}z(Ht,"defaults",{}),z(Ht,"datasetElementType",null),z(Ht,"dataElementType",null);function Vw(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let i=[];for(let n=0,o=s.length;n<o;n++)i=i.concat(s[n].controller.getAllParsedValues(t));t._cache.$bar=If(i.sort((n,o)=>n-o))}return t._cache.$bar}function $w(t){const e=t.iScale,s=Vw(e,t.type);let i=e._length,n,o,r,a;const l=()=>{r===32767||r===-32768||(Gi(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(n=0,o=s.length;n<o;++n)r=e.getPixelForValue(s[n]),l();for(a=void 0,n=0,o=e.ticks.length;n<o;++n)r=e.getPixelForTick(n),l();return i}function Hw(t,e,s,i){const n=s.barThickness;let o,r;return ye(n)?(o=e.min*s.categoryPercentage,r=s.barPercentage):(o=n*i,r=1),{chunk:o/i,ratio:r,start:e.pixels[t]-o/2}}function zw(t,e,s,i){const n=e.pixels,o=n[t];let r=t>0?n[t-1]:null,a=t<n.length-1?n[t+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const d=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/i,ratio:s.barPercentage,start:d}}function Ww(t,e,s,i){const n=s.parse(t[0],i),o=s.parse(t[1],i),r=Math.min(n,o),a=Math.max(n,o);let l=r,d=a;Math.abs(r)>Math.abs(a)&&(l=a,d=r),e[s.axis]=d,e._custom={barStart:l,barEnd:d,start:n,end:o,min:r,max:a}}function Zf(t,e,s,i){return je(t)?Ww(t,e,s,i):e[s.axis]=s.parse(t,i),e}function Od(t,e,s,i){const n=t.iScale,o=t.vScale,r=n.getLabels(),a=n===o,l=[];let d,u,h,f;for(d=s,u=s+i;d<u;++d)f=e[d],h={},h[n.axis]=a||n.parse(r[d],d),l.push(Zf(f,h,o,d));return l}function da(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function qw(t,e,s){return t!==0?is(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Kw(t){let e,s,i,n,o;return t.horizontal?(e=t.base>t.x,s="left",i="right"):(e=t.base<t.y,s="bottom",i="top"),e?(n="end",o="start"):(n="start",o="end"),{start:s,end:i,reverse:e,top:n,bottom:o}}function Gw(t,e,s,i){let n=e.borderSkipped;const o={};if(!n){t.borderSkipped=o;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:d,bottom:u}=Kw(t);n==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===i?n=d:(s._bottom||0)===i?n=u:(o[Dd(u,r,a,l)]=!0,n=d)),o[Dd(n,r,a,l)]=!0,t.borderSkipped=o}function Dd(t,e,s,i){return i?(t=Yw(t,e,s),t=Rd(t,s,e)):t=Rd(t,e,s),t}function Yw(t,e,s){return t===e?s:t===s?e:t}function Rd(t,e,s){return t==="start"?e:t==="end"?s:t}function Jw(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class No extends Ht{parsePrimitiveData(e,s,i,n){return Od(e,s,i,n)}parseArrayData(e,s,i,n){return Od(e,s,i,n)}parseObjectData(e,s,i,n){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,d=o.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let f,p,g,b;for(f=i,p=i+n;f<p;++f)b=s[f],g={},g[o.axis]=o.parse(qs(b,d),f),h.push(Zf(qs(b,u),g,r,f));return h}updateRangeFromParsed(e,s,i,n){super.updateRangeFromParsed(e,s,i,n);const o=i._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:i,vScale:n}=s,o=this.getParsed(e),r=o._custom,a=da(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,i,n){const o=n==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),d=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,n);for(let p=s;p<s+i;p++){const g=this.getParsed(p),b=o||ye(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),x=this._calculateBarIndexPixels(p,u),w=(g._stacks||{})[a.axis],k={horizontal:d,base:b.base,enableBorderRadius:!w||da(g._custom)||r===w._top||r===w._bottom,x:d?b.head:x.center,y:d?x.center:b.head,height:d?x.size:Math.abs(b.size),width:d?Math.abs(b.size):x.size};f&&(k.options=h||this.resolveDataElementOptions(p,e[p].active?"active":n));const E=k.options||e[p].options;Gw(k,E,w,r),Jw(k,E,u.ratio),this.updateElement(e[p],p,k,n)}}_getStacks(e,s){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=i.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[i.axis],d=u=>{const h=u._parsed.find(p=>p[i.axis]===l),f=h&&h[u.vScale.axis];if(ye(f)||isNaN(f))return!0};for(const u of n)if(!(s!==void 0&&d(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,s,i){const n=this._getStacks(e,i),o=s!==void 0?n.indexOf(s):-1;return o===-1?n.length-1:o}_getRuler(){const e=this.options,s=this._cachedMeta,i=s.iScale,n=[];let o,r;for(o=0,r=s.data.length;o<r;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const a=e.barThickness;return{min:a||$w(s),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:i,index:n},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),d=l._custom,u=da(d);let h=l[s.axis],f=0,p=i?this.applyStack(s,l,i):h,g,b;p!==h&&(f=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&is(h)!==is(d.barEnd)&&(f=0),f+=h);const x=!ye(o)&&!u?o:f;let w=s.getPixelForValue(x);if(this.chart.getDataVisibility(e)?g=s.getPixelForValue(f+p):g=w,b=g-w,Math.abs(b)<r){b=qw(b,s,a)*r,h===a&&(w-=b/2);const k=s.getPixelForDecimal(0),E=s.getPixelForDecimal(1),A=Math.min(k,E),P=Math.max(k,E);w=Math.max(Math.min(w,P),A),g=w+b,i&&!u&&(l._stacks[s.axis]._visualValues[n]=s.getValueForPixel(g)-s.getValueForPixel(w))}if(w===s.getPixelForValue(a)){const k=is(b)*s.getLineWidthForValue(a)/2;w+=k,b-=k}return{size:b,base:w,head:g,center:g+b/2}}_calculateBarIndexPixels(e,s){const i=s.scale,n=this.options,o=n.skipNull,r=pe(n.maxBarThickness,1/0);let a,l;if(s.grouped){const d=o?this._getStackCount(e):s.stackCount,u=n.barThickness==="flex"?zw(e,s,n,d):Hw(e,s,n,d),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,s=e.vScale,i=e.data,n=i.length;let o=0;for(;o<n;++o)this.getParsed(o)[s.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}z(No,"id","bar"),z(No,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),z(No,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Bo extends Ht{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,i,n){const o=super.parsePrimitiveData(e,s,i,n);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+i).radius;return o}parseArrayData(e,s,i,n){const o=super.parseArrayData(e,s,i,n);for(let r=0;r<o.length;r++){const a=s[i+r];o[r]._custom=pe(a[2],this.resolveDataElementOptions(r+i).radius)}return o}parseObjectData(e,s,i,n){const o=super.parseObjectData(e,s,i,n);for(let r=0;r<o.length;r++){const a=s[i+r];o[r]._custom=pe(a&&a.r&&+a.r,this.resolveDataElementOptions(r+i).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let i=e.length-1;i>=0;--i)s=Math.max(s,e[i].size(this.resolveDataElementOptions(i))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=s,r=this.getParsed(e),a=n.getLabelForValue(r.x),l=o.getLabelForValue(r.y),d=r._custom;return{label:i[e]||"",value:"("+a+", "+l+(d?", "+d:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,i,n){const o=n==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(s,n),u=r.axis,h=a.axis;for(let f=s;f<s+i;f++){const p=e[f],g=!o&&this.getParsed(f),b={},x=b[u]=o?r.getPixelForDecimal(.5):r.getPixelForValue(g[u]),w=b[h]=o?a.getBasePixel():a.getPixelForValue(g[h]);b.skip=isNaN(x)||isNaN(w),d&&(b.options=l||this.resolveDataElementOptions(f,p.active?"active":n),o&&(b.options.radius=0)),this.updateElement(p,f,b,n)}}resolveDataElementOptions(e,s){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,s);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return s!=="active"&&(n.radius=0),n.radius+=pe(i&&i._custom,o),n}}z(Bo,"id","bubble"),z(Bo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),z(Bo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Xw(t,e,s){let i=1,n=1,o=0,r=0;if(e<Ue){const a=t,l=a+e,d=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(E,A,P)=>Yi(E,a,l,!0)?1:Math.max(A,A*s,P,P*s),g=(E,A,P)=>Yi(E,a,l,!0)?-1:Math.min(A,A*s,P,P*s),b=p(0,d,h),x=p(Ke,u,f),w=g(Ne,d,h),k=g(Ne+Ke,u,f);i=(b-w)/2,n=(x-k)/2,o=-(b+w)/2,r=-(x+k)/2}return{ratioX:i,ratioY:n,offsetX:o,offsetY:r}}class cn extends Ht{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let o=l=>+i[l];if(ve(i[e])){const{key:l="value"}=this._parsing;o=d=>+qs(i[d],l)}let r,a;for(r=e,a=e+s;r<a;++r)n._parsed[r]=o(r)}}_getRotation(){return Bt(this.options.rotation-90)}_getCircumference(){return Bt(this.options.circumference)}_getRotationExtents(){let e=Ue,s=-Ue;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),r=n._getCircumference();e=Math.min(e,o),s=Math.max(s,o+r)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:i}=s,n=this._cachedMeta,o=n.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min(c1(this.options.cutout,a),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:b}=Xw(h,u,l),x=(i.width-r)/f,w=(i.height-r)/p,k=Math.max(Math.min(x,w)/2,0),E=Mf(this.options.radius,k),A=Math.max(E*l,0),P=(E-A)/this._getVisibleDatasetWeightTotal();this.offsetX=g*E,this.offsetY=b*E,n.total=this.calculateTotal(),this.outerRadius=E-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return s&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*o/Ue)}updateElements(e,s,i,n){const o=n==="reset",r=this.chart,a=r.chartArea,d=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&d.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:x}=this._getSharedOptions(s,n);let w=this._getRotation(),k;for(k=0;k<s;++k)w+=this._circumference(k,o);for(k=s;k<s+i;++k){const E=this._circumference(k,o),A=e[k],P={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+E,circumference:E,outerRadius:g,innerRadius:p};x&&(P.options=b||this.resolveDataElementOptions(k,A.active?"active":n)),w+=E,this.updateElement(A,k,P,n)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let i=0,n;for(n=0;n<s.length;n++){const o=e._parsed[n];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!s[n].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Ue*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=ao(s._parsed[e],i.options.locale);return{label:n[e]||"",value:o}}getMaxBorderWidth(e){let s=0;const i=this.chart;let n,o,r,a,l;if(!e){for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){r=i.getDatasetMeta(n),e=r.data,a=r.controller;break}}if(!e)return 0;for(n=0,o=e.length;n<o;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let i=0,n=e.length;i<n;++i){const o=this.resolveDataElementOptions(i);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(s+=this._getRingWeight(i));return s}_getRingWeight(e){return Math.max(pe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}z(cn,"id","doughnut"),z(cn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),z(cn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),z(cn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,i){i.chart.toggleDataVisibility(s.index),i.chart.update()}}}});class Vo extends Ht{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Rf(s,n,r);this._drawStart=a,this._drawCount=l,Lf(s)&&(a=0,l=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:d},e),this.updateElements(n,a,l,e)}updateElements(e,s,i,n){const o=n==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,n),f=r.axis,p=a.axis,{spanGaps:g,segment:b}=this.options,x=Wn(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||n==="none",k=s+i,E=e.length;let A=s>0&&this.getParsed(s-1);for(let P=0;P<E;++P){const N=e[P],F=w?N:{};if(P<s||P>=k){F.skip=!0;continue}const H=this.getParsed(P),Z=ye(H[p]),oe=F[f]=r.getPixelForValue(H[f],P),le=F[p]=o||Z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,H,l):H[p],P);F.skip=isNaN(oe)||isNaN(le)||Z,F.stop=P>0&&Math.abs(H[f]-A[f])>x,b&&(F.parsed=H,F.raw=d.data[P]),h&&(F.options=u||this.resolveDataElementOptions(P,N.active?"active":n)),w||this.updateElement(N,P,F,n),A=H}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,i=s.options&&s.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}z(Vo,"id","line"),z(Vo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),z(Vo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Di extends Ht{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=ao(s._parsed[e].r,i.options.locale);return{label:n[e]||"",value:o}}parseObjectData(e,s,i,n){return Hf.bind(this)(e,s,i,n)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,i=e.options,n=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(n/2,0),r=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,s,i,n){const o=n==="reset",r=this.chart,l=r.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,f=d.getIndexAngle(0)-.5*Ne;let p=f,g;const b=360/this.countVisibleElements();for(g=0;g<s;++g)p+=this._computeAngle(g,n,b);for(g=s;g<s+i;g++){const x=e[g];let w=p,k=p+this._computeAngle(g,n,b),E=r.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=k,o&&(l.animateScale&&(E=0),l.animateRotate&&(w=k=f));const A={x:u,y:h,innerRadius:0,outerRadius:E,startAngle:w,endAngle:k,options:this.resolveDataElementOptions(g,x.active?"active":n)};this.updateElement(x,g,A,n)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((i,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&s++}),s}_computeAngle(e,s,i){return this.chart.getDataVisibility(e)?Bt(this.resolveDataElementOptions(e,s).angle||i):0}}z(Di,"id","polarArea"),z(Di,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),z(Di,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,i){i.chart.toggleDataVisibility(s.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $a extends cn{}z($a,"id","pie"),z($a,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $o extends Ht{getLabelAndValue(e){const s=this._cachedMeta.vScale,i=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(i[s.axis])}}parseObjectData(e,s,i,n){return Hf.bind(this)(e,s,i,n)}update(e){const s=this._cachedMeta,i=s.dataset,n=s.data||[],o=s.iScale.getLabels();if(i.points=n,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===n.length,options:r};this.updateElement(i,void 0,a,e)}this.updateElements(n,0,n.length,e)}updateElements(e,s,i,n){const o=this._cachedMeta.rScale,r=n==="reset";for(let a=s;a<s+i;a++){const l=e[a],d=this.resolveDataElementOptions(a,l.active?"active":n),u=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:u.x,f=r?o.yCenter:u.y,p={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(l,a,p,n)}}}z($o,"id","radar"),z($o,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),z($o,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ho extends Ht{getLabelAndValue(e){const s=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:o}=s,r=this.getParsed(e),a=n.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const s=this._cachedMeta,{data:i=[]}=s,n=this.chart._animationsDisabled;let{start:o,count:r}=Rf(s,i,n);if(this._drawStart=o,this._drawCount=r,Lf(s)&&(o=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:d},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(i,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,i,n){const o=n==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(s,n),h=this.getSharedOptions(u),f=this.includeOptions(n,h),p=r.axis,g=a.axis,{spanGaps:b,segment:x}=this.options,w=Wn(b)?b:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||n==="none";let E=s>0&&this.getParsed(s-1);for(let A=s;A<s+i;++A){const P=e[A],N=this.getParsed(A),F=k?P:{},H=ye(N[g]),Z=F[p]=r.getPixelForValue(N[p],A),oe=F[g]=o||H?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[g],A);F.skip=isNaN(Z)||isNaN(oe)||H,F.stop=A>0&&Math.abs(N[p]-E[p])>w,x&&(F.parsed=N,F.raw=d.data[A]),f&&(F.options=h||this.resolveDataElementOptions(A,P.active?"active":n)),k||this.updateElement(P,A,F,n),E=N}this.updateSharedOptions(h,n,u)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}}z(Ho,"id","scatter"),z(Ho,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),z(Ho,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Qw=Object.freeze({__proto__:null,BarController:No,BubbleController:Bo,DoughnutController:cn,LineController:Vo,PieController:$a,PolarAreaController:Di,RadarController:$o,ScatterController:Ho});function tn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hl{constructor(e){z(this,"options");this.options=e||{}}static override(e){Object.assign(Hl.prototype,e)}init(){}formats(){return tn()}parse(){return tn()}format(){return tn()}add(){return tn()}diff(){return tn()}startOf(){return tn()}endOf(){return tn()}}var Zw={_date:Hl};function ek(t,e,s,i){const{controller:n,data:o,_sorted:r}=t,a=n._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const d=a._reversePixels?w1:ys;if(i){if(n._sharedOptions){const u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(o,e,s-h),p=d(o,e,s+h);return{lo:f.lo,hi:p.hi}}}}else{const u=d(o,e,s);if(l){const{vScale:h}=n._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(b=>!ye(b[h.axis]));u.lo-=Math.max(0,p);const g=f.slice(u.hi).findIndex(b=>!ye(b[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:o.length-1}}function lo(t,e,s,i,n){const o=t.getSortedVisibleDatasetMetas(),r=s[e];for(let a=0,l=o.length;a<l;++a){const{index:d,data:u}=o[a],{lo:h,hi:f}=ek(o[a],e,r,n);for(let p=h;p<=f;++p){const g=u[p];g.skip||i(g,d,p)}}}function tk(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(i,n){const o=e?Math.abs(i.x-n.x):0,r=s?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ua(t,e,s,i,n){const o=[];return!n&&!t.isPointInArea(e)||lo(t,s,e,function(a,l,d){!n&&!xs(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&o.push({element:a,datasetIndex:l,index:d})},!0),o}function sk(t,e,s,i){let n=[];function o(r,a,l){const{startAngle:d,endAngle:u}=r.getProps(["startAngle","endAngle"],i),{angle:h}=Pf(r,{x:e.x,y:e.y});Yi(h,d,u)&&n.push({element:r,datasetIndex:a,index:l})}return lo(t,s,e,o),n}function nk(t,e,s,i,n,o){let r=[];const a=tk(s);let l=Number.POSITIVE_INFINITY;function d(u,h,f){const p=u.inRange(e.x,e.y,n);if(i&&!p)return;const g=u.getCenterPoint(n);if(!(!!o||t.isPointInArea(g))&&!p)return;const x=a(e,g);x<l?(r=[{element:u,datasetIndex:h,index:f}],l=x):x===l&&r.push({element:u,datasetIndex:h,index:f})}return lo(t,s,e,d),r}function ha(t,e,s,i,n,o){return!o&&!t.isPointInArea(e)?[]:s==="r"&&!i?sk(t,e,s,n):nk(t,e,s,i,n,o)}function Ld(t,e,s,i,n){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return lo(t,s,e,(l,d,u)=>{l[r]&&l[r](e[s],n)&&(o.push({element:l,datasetIndex:d,index:u}),a=a||l.inRange(e.x,e.y,n))}),i&&!a?[]:o}var ik={evaluateInteractionItems:lo,modes:{index(t,e,s,i){const n=rn(e,t),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?ua(t,n,o,i,r):ha(t,n,o,!1,i,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=a[0].index,h=d.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:d.index,index:u})}),l):[]},dataset(t,e,s,i){const n=rn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?ua(t,n,o,i,r):ha(t,n,o,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,d=t.getDatasetMeta(l).data;a=[];for(let u=0;u<d.length;++u)a.push({element:d[u],datasetIndex:l,index:u})}return a},point(t,e,s,i){const n=rn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return ua(t,n,o,i,r)},nearest(t,e,s,i){const n=rn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return ha(t,n,o,s.intersect,i,r)},x(t,e,s,i){const n=rn(e,t);return Ld(t,n,"x",s.intersect,i)},y(t,e,s,i){const n=rn(e,t);return Ld(t,n,"y",s.intersect,i)}}};const ep=["left","top","right","bottom"];function ai(t,e){return t.filter(s=>s.pos===e)}function Fd(t,e){return t.filter(s=>ep.indexOf(s.pos)===-1&&s.box.axis===e)}function li(t,e){return t.sort((s,i)=>{const n=e?i:s,o=e?s:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function ok(t){const e=[];let s,i,n,o,r,a;for(s=0,i=(t||[]).length;s<i;++s)n=t[s],{position:o,options:{stack:r,stackWeight:a=1}}=n,e.push({index:s,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:a});return e}function rk(t){const e={};for(const s of t){const{stack:i,pos:n,stackWeight:o}=s;if(!i||!ep.includes(n))continue;const r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function ak(t,e){const s=rk(t),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,d=s[a.stack],u=d&&a.stackWeight/d.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=n):(a.width=i,a.height=u?u*n:l&&e.availableHeight)}return s}function lk(t){const e=ok(t),s=li(e.filter(d=>d.box.fullSize),!0),i=li(ai(e,"left"),!0),n=li(ai(e,"right")),o=li(ai(e,"top"),!0),r=li(ai(e,"bottom")),a=Fd(e,"x"),l=Fd(e,"y");return{fullSize:s,leftAndTop:i.concat(o),rightAndBottom:n.concat(l).concat(r).concat(a),chartArea:ai(e,"chartArea"),vertical:i.concat(n).concat(l),horizontal:o.concat(r).concat(a)}}function jd(t,e,s,i){return Math.max(t[s],e[s])+Math.max(t[i],e[i])}function tp(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ck(t,e,s,i){const{pos:n,box:o}=s,r=t.maxPadding;if(!ve(n)){s.size&&(t[n]-=s.size);const h=i[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?o.height:o.width),s.size=h.size/h.count,t[n]+=s.size}o.getPadding&&tp(r,o.getPadding());const a=Math.max(0,e.outerWidth-jd(r,t,"left","right")),l=Math.max(0,e.outerHeight-jd(r,t,"top","bottom")),d=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,s.horizontal?{same:d,other:u}:{same:u,other:d}}function dk(t){const e=t.maxPadding;function s(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function uk(t,e){const s=e.maxPadding;function i(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{o[r]=Math.max(e[r],s[r])}),o}return i(t?["left","right"]:["top","bottom"])}function mi(t,e,s,i){const n=[];let o,r,a,l,d,u;for(o=0,r=t.length,d=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,uk(a.horizontal,e));const{same:h,other:f}=ck(e,s,a,i);d|=h&&n.length,u=u||f,l.fullSize||n.push(a)}return d&&mi(n,e,s,i)||u}function So(t,e,s,i,n){t.top=s,t.left=e,t.right=e+i,t.bottom=s+n,t.width=i,t.height=n}function Ud(t,e,s,i){const n=s.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,d=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/d.weight||1;if(a.horizontal){const h=e.w*u,f=d.size||l.height;Gi(d.start)&&(r=d.start),l.fullSize?So(l,n.left,r,s.outerWidth-n.right-n.left,f):So(l,e.left+d.placed,r,h,f),d.start=r,d.placed+=h,r=l.bottom}else{const h=e.h*u,f=d.size||l.width;Gi(d.start)&&(o=d.start),l.fullSize?So(l,o,n.top,f,s.outerHeight-n.bottom-n.top):So(l,o,e.top+d.placed,f,h),d.start=o,d.placed+=h,o=l.right}}e.x=o,e.y=r}var ct={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,i){if(!t)return;const n=ut(t.options.layout.padding),o=Math.max(e-n.width,0),r=Math.max(s-n.height,0),a=lk(t.boxes),l=a.vertical,d=a.horizontal;Ee(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,x)=>x.box.options&&x.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},n);tp(f,ut(i));const p=Object.assign({maxPadding:f,w:o,h:r,x:n.left,y:n.top},n),g=ak(l.concat(d),h);mi(a.fullSize,p,h,g),mi(l,p,h,g),mi(d,p,h,g)&&mi(l,p,h,g),dk(p),Ud(a.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,Ud(a.rightAndBottom,p,h,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ee(a.chartArea,b=>{const x=b.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class sp{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,i){}removeEventListener(e,s,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,i,n){return s=Math.max(0,s||e.width),i=i||e.height,{width:s,height:Math.max(0,n?Math.floor(s/n):i)}}isAttached(e){return!0}updateConfig(e){}}class hk extends sp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zo="$chartjs",fk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Nd=t=>t===null||t==="";function pk(t,e){const s=t.style,i=t.getAttribute("height"),n=t.getAttribute("width");if(t[zo]={initial:{height:i,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Nd(n)){const o=wd(t,"width");o!==void 0&&(t.width=o)}if(Nd(i))if(t.style.height==="")t.height=t.width/(e||2);else{const o=wd(t,"height");o!==void 0&&(t.height=o)}return t}const np=mw?{passive:!0}:!1;function mk(t,e,s){t&&t.addEventListener(e,s,np)}function gk(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,np)}function bk(t,e){const s=fk[t.type]||t.type,{x:i,y:n}=rn(t,e);return{type:s,chart:e,native:t,x:i!==void 0?i:null,y:n!==void 0?n:null}}function dr(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function yk(t,e,s){const i=t.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||dr(a.addedNodes,i),r=r&&!dr(a.removedNodes,i);r&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function xk(t,e,s){const i=t.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||dr(a.removedNodes,i),r=r&&!dr(a.addedNodes,i);r&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Xi=new Map;let Bd=0;function ip(){const t=window.devicePixelRatio;t!==Bd&&(Bd=t,Xi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function vk(t,e){Xi.size||window.addEventListener("resize",ip),Xi.set(t,e)}function _k(t){Xi.delete(t),Xi.size||window.removeEventListener("resize",ip)}function wk(t,e,s){const i=t.canvas,n=i&&$l(i);if(!n)return;const o=Df((a,l)=>{const d=n.clientWidth;s(a,l),d<n.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],d=l.contentRect.width,u=l.contentRect.height;d===0&&u===0||o(d,u)});return r.observe(n),vk(t,o),r}function fa(t,e,s){s&&s.disconnect(),e==="resize"&&_k(t)}function kk(t,e,s){const i=t.canvas,n=Df(o=>{t.ctx!==null&&s(bk(o,t))},t);return mk(i,e,n),n}class Sk extends sp{acquireContext(e,s){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(pk(e,s),i):null}releaseContext(e){const s=e.canvas;if(!s[zo])return!1;const i=s[zo].initial;["height","width"].forEach(o=>{const r=i[o];ye(r)?s.removeAttribute(o):s.setAttribute(o,r)});const n=i.style||{};return Object.keys(n).forEach(o=>{s.style[o]=n[o]}),s.width=s.width,delete s[zo],!0}addEventListener(e,s,i){this.removeEventListener(e,s);const n=e.$proxies||(e.$proxies={}),r={attach:yk,detach:xk,resize:wk}[s]||kk;n[s]=r(e,s,i)}removeEventListener(e,s){const i=e.$proxies||(e.$proxies={}),n=i[s];if(!n)return;({attach:fa,detach:fa,resize:fa}[s]||gk)(e,s,n),i[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,i,n){return pw(e,s,i,n)}isAttached(e){const s=e&&$l(e);return!!(s&&s.isConnected)}}function Ck(t){return!Vl()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?hk:Sk}var Oo;let Ms=(Oo=class{constructor(){z(this,"x");z(this,"y");z(this,"active",!1);z(this,"options");z(this,"$animations")}tooltipPosition(e){const{x:s,y:i}=this.getProps(["x","y"],e);return{x:s,y:i}}hasValue(){return Wn(this.x)&&Wn(this.y)}getProps(e,s){const i=this.$animations;if(!s||!i)return this;const n={};return e.forEach(o=>{n[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),n}},z(Oo,"defaults",{}),z(Oo,"defaultRoutes"),Oo);function Mk(t,e){const s=t.options.ticks,i=Ak(t),n=Math.min(s.maxTicksLimit||i,i),o=s.major.enabled?Pk(e):[],r=o.length,a=o[0],l=o[r-1],d=[];if(r>n)return Tk(e,d,o,r/n),d;const u=Ek(o,e,n);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(Co(e,d,u,ye(p)?0:a-p,a),h=0,f=r-1;h<f;h++)Co(e,d,u,o[h],o[h+1]);return Co(e,d,u,l,ye(p)?e.length:l+p),d}return Co(e,d,u),d}function Ak(t){const e=t.options.offset,s=t._tickSize(),i=t._length/s+(e?0:1),n=t._maxLength/s;return Math.floor(Math.min(i,n))}function Ek(t,e,s){const i=Ik(t),n=e.length/s;if(!i)return Math.max(n,1);const o=b1(i);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>n)return l}return Math.max(n,1)}function Pk(t){const e=[];let s,i;for(s=0,i=t.length;s<i;s++)t[s].major&&e.push(s);return e}function Tk(t,e,s,i){let n=0,o=s[0],r;for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),n++,o=s[n*i])}function Co(t,e,s,i,n){const o=pe(i,0),r=Math.min(pe(n,t.length),t.length);let a=0,l,d,u;for(s=Math.ceil(s),n&&(l=n-i,s=l/Math.floor(l/s)),u=o;u<0;)a++,u=Math.round(o+a*s);for(d=Math.max(o,0);d<r;d++)d===u&&(e.push(t[d]),a++,u=Math.round(o+a*s))}function Ik(t){const e=t.length;let s,i;if(e<2)return!1;for(i=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==i)return!1;return i}const Ok=t=>t==="left"?"right":t==="right"?"left":t,Vd=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,$d=(t,e)=>Math.min(e||t,t);function Hd(t,e){const s=[],i=t.length/e,n=t.length;let o=0;for(;o<n;o+=i)s.push(t[Math.floor(o)]);return s}function Dk(t,e,s){const i=t.ticks.length,n=Math.min(e,i-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(n),d;if(!(s&&(i===1?d=Math.max(l-o,r-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(n-1))/2,l+=n<e?d:-d,l<o-a||l>r+a)))return l}function Rk(t,e){Ee(t,s=>{const i=s.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete s.data[i[o]];i.splice(0,n)}})}function ci(t){return t.drawTicks?t.tickLength:0}function zd(t,e){if(!t.display)return 0;const s=Ze(t.font,e),i=ut(t.padding);return(je(t.text)?t.text.length:1)*s.lineHeight+i.height}function Lk(t,e){return Ys(t,{scale:e,type:"scale"})}function Fk(t,e,s){return Ys(t,{tick:s,index:e,type:"tick"})}function jk(t,e,s){let i=Ll(t);return(s&&e!=="right"||!s&&e==="right")&&(i=Ok(i)),i}function Uk(t,e,s,i){const{top:n,left:o,bottom:r,right:a,chart:l}=t,{chartArea:d,scales:u}=l;let h=0,f,p,g;const b=r-n,x=a-o;if(t.isHorizontal()){if(p=rt(i,o,a),ve(s)){const w=Object.keys(s)[0],k=s[w];g=u[w].getPixelForValue(k)+b-e}else s==="center"?g=(d.bottom+d.top)/2+b-e:g=Vd(t,s,e);f=a-o}else{if(ve(s)){const w=Object.keys(s)[0],k=s[w];p=u[w].getPixelForValue(k)-x+e}else s==="center"?p=(d.left+d.right)/2-x+e:p=Vd(t,s,e);g=rt(i,r,n),h=s==="left"?-Ke:Ke}return{titleX:p,titleY:g,maxWidth:f,rotation:h}}class yn extends Ms{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:i,_suggestedMax:n}=this;return e=Et(e,Number.POSITIVE_INFINITY),s=Et(s,Number.NEGATIVE_INFINITY),i=Et(i,Number.POSITIVE_INFINITY),n=Et(n,Number.NEGATIVE_INFINITY),{min:Et(e,i),max:Et(s,n),minDefined:He(e),maxDefined:He(s)}}getMinMax(e){let{min:s,max:i,minDefined:n,maxDefined:o}=this.getUserBounds(),r;if(n&&o)return{min:s,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)r=a[l].controller.getMinMax(this,e),n||(s=Math.min(s,r.min)),o||(i=Math.max(i,r.max));return s=o&&s>i?i:s,i=n&&s>i?s:i,{min:Et(s,Et(i,s)),max:Et(i,Et(s,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Le(this.options.beforeUpdate,[this])}update(e,s,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=q1(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Hd(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Mk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,i;this.isHorizontal()?(s=this.left,i=this.right):(s=this.top,i=this.bottom,e=!e),this._startPixel=s,this._endPixel=i,this._reversePixels=e,this._length=i-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Le(this.options.afterUpdate,[this])}beforeSetDimensions(){Le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let i,n,o;for(i=0,n=e.length;i<n;i++)o=e[i],o.label=Le(s.callback,[o.value,i,e],this)}afterTickToLabelConversion(){Le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,i=$d(this.ticks.length,e.ticks.maxTicksLimit),n=s.minRotation||0,o=s.maxRotation;let r=n,a,l,d;if(!this._isVisible()||!s.display||n>=o||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=tt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),h+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-ci(e.grid)-s.padding-zd(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),r=Dl(Math.min(Math.asin(tt((u.highest.height+6)/a,-1,1)),Math.asin(tt(l/d,-1,1))-Math.asin(tt(f/d,-1,1)))),r=Math.max(n,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=zd(n,s.options.font);if(a?(e.width=this.maxWidth,e.height=ci(o)+l):(e.height=this.maxHeight,e.width=ci(o)+l),i.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=i.padding*2,g=Bt(this.labelRotation),b=Math.cos(g),x=Math.sin(g);if(a){const w=i.mirror?0:x*h.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=i.mirror?0:b*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(d,u,x,b)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,i,n){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?d?(f=n*e.width,p=i*s.height):(f=i*e.height,p=n*s.width):o==="start"?p=s.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=s.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=s.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,i;for(s=0,i=e.length;s<i;s++)ye(e[s].label)&&(e.splice(s,1),i--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let i=this.ticks;s<i.length&&(i=Hd(i,s)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,i){const{ctx:n,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/$d(s,i));let d=0,u=0,h,f,p,g,b,x,w,k,E,A,P;for(h=0;h<s;h+=l){if(g=e[h].label,b=this._resolveTickFontOptions(h),n.font=x=b.string,w=o[x]=o[x]||{data:{},gc:[]},k=b.lineHeight,E=A=0,!ye(g)&&!je(g))E=lr(n,w.data,w.gc,E,g),A=k;else if(je(g))for(f=0,p=g.length;f<p;++f)P=g[f],!ye(P)&&!je(P)&&(E=lr(n,w.data,w.gc,E,P),A+=k);r.push(E),a.push(A),d=Math.max(E,d),u=Math.max(A,u)}Rk(o,s);const N=r.indexOf(d),F=a.indexOf(u),H=Z=>({width:r[Z]||0,height:a[Z]||0});return{first:H(0),last:H(s-1),widest:H(N),highest:H(F),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return _1(this._alignToPixels?en(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const i=s[e];return i.$context||(i.$context=Fk(this.getContext(),e,i))}return this.$context||(this.$context=Lk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Bt(this.labelRotation),i=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*i>a*n?a/i:l/n:l*n<a*i?l/i:a/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,i=this.chart,n=this.options,{grid:o,position:r,border:a}=n,l=o.offset,d=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=ci(o),p=[],g=a.setContext(this.getContext()),b=g.display?g.width:0,x=b/2,w=function(de){return en(i,de,b)};let k,E,A,P,N,F,H,Z,oe,le,he,Pe;if(r==="top")k=w(this.bottom),F=this.bottom-f,Z=k-x,le=w(e.top)+x,Pe=e.bottom;else if(r==="bottom")k=w(this.top),le=e.top,Pe=w(e.bottom)-x,F=k+x,Z=this.top+f;else if(r==="left")k=w(this.right),N=this.right-f,H=k-x,oe=w(e.left)+x,he=e.right;else if(r==="right")k=w(this.left),oe=e.left,he=w(e.right)-x,N=k+x,H=this.left+f;else if(s==="x"){if(r==="center")k=w((e.top+e.bottom)/2+.5);else if(ve(r)){const de=Object.keys(r)[0],re=r[de];k=w(this.chart.scales[de].getPixelForValue(re))}le=e.top,Pe=e.bottom,F=k+x,Z=F+f}else if(s==="y"){if(r==="center")k=w((e.left+e.right)/2);else if(ve(r)){const de=Object.keys(r)[0],re=r[de];k=w(this.chart.scales[de].getPixelForValue(re))}N=k-x,H=N-f,oe=e.left,he=e.right}const Qe=pe(n.ticks.maxTicksLimit,h),_e=Math.max(1,Math.ceil(h/Qe));for(E=0;E<h;E+=_e){const de=this.getContext(E),re=o.setContext(de),fe=a.setContext(de),Ie=re.lineWidth,ht=re.color,ft=fe.dash||[],We=fe.dashOffset,It=re.tickWidth,bt=re.tickColor,Gt=re.tickBorderDash||[],Ge=re.tickBorderDashOffset;A=Dk(this,E,l),A!==void 0&&(P=en(i,A,Ie),d?N=H=oe=he=P:F=Z=le=Pe=P,p.push({tx1:N,ty1:F,tx2:H,ty2:Z,x1:oe,y1:le,x2:he,y2:Pe,width:Ie,color:ht,borderDash:ft,borderDashOffset:We,tickWidth:It,tickColor:bt,tickBorderDash:Gt,tickBorderDashOffset:Ge}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){const s=this.axis,i=this.options,{position:n,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:u,mirror:h}=o,f=ci(i.grid),p=f+u,g=h?-u:p,b=-Bt(this.labelRotation),x=[];let w,k,E,A,P,N,F,H,Z,oe,le,he,Pe="middle";if(n==="top")N=this.bottom-g,F=this._getXAxisLabelAlignment();else if(n==="bottom")N=this.top+g,F=this._getXAxisLabelAlignment();else if(n==="left"){const _e=this._getYAxisLabelAlignment(f);F=_e.textAlign,P=_e.x}else if(n==="right"){const _e=this._getYAxisLabelAlignment(f);F=_e.textAlign,P=_e.x}else if(s==="x"){if(n==="center")N=(e.top+e.bottom)/2+p;else if(ve(n)){const _e=Object.keys(n)[0],de=n[_e];N=this.chart.scales[_e].getPixelForValue(de)+p}F=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")P=(e.left+e.right)/2-p;else if(ve(n)){const _e=Object.keys(n)[0],de=n[_e];P=this.chart.scales[_e].getPixelForValue(de)}F=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?Pe="top":l==="end"&&(Pe="bottom"));const Qe=this._getLabelSizes();for(w=0,k=a.length;w<k;++w){E=a[w],A=E.label;const _e=o.setContext(this.getContext(w));H=this.getPixelForTick(w)+o.labelOffset,Z=this._resolveTickFontOptions(w),oe=Z.lineHeight,le=je(A)?A.length:1;const de=le/2,re=_e.color,fe=_e.textStrokeColor,Ie=_e.textStrokeWidth;let ht=F;r?(P=H,F==="inner"&&(w===k-1?ht=this.options.reverse?"left":"right":w===0?ht=this.options.reverse?"right":"left":ht="center"),n==="top"?d==="near"||b!==0?he=-le*oe+oe/2:d==="center"?he=-Qe.highest.height/2-de*oe+oe:he=-Qe.highest.height+oe/2:d==="near"||b!==0?he=oe/2:d==="center"?he=Qe.highest.height/2-de*oe:he=Qe.highest.height-le*oe,h&&(he*=-1),b!==0&&!_e.showLabelBackdrop&&(P+=oe/2*Math.sin(b))):(N=H,he=(1-le)*oe/2);let ft;if(_e.showLabelBackdrop){const We=ut(_e.backdropPadding),It=Qe.heights[w],bt=Qe.widths[w];let Gt=he-We.top,Ge=0-We.left;switch(Pe){case"middle":Gt-=It/2;break;case"bottom":Gt-=It;break}switch(F){case"center":Ge-=bt/2;break;case"right":Ge-=bt;break;case"inner":w===k-1?Ge-=bt:w>0&&(Ge-=bt/2);break}ft={left:Ge,top:Gt,width:bt+We.width,height:It+We.height,color:_e.backdropColor}}x.push({label:A,font:Z,textOffset:he,options:{rotation:b,color:re,strokeColor:fe,strokeWidth:Ie,textAlign:ht,textBaseline:Pe,translation:[P,N],backdrop:ft}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Bt(this.labelRotation))return e==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let d,u;return s==="left"?n?(u=this.right+o,i==="near"?d="left":i==="center"?(d="center",u+=l/2):(d="right",u+=l)):(u=this.right-a,i==="near"?d="right":i==="center"?(d="center",u-=l/2):(d="left",u=this.left)):s==="right"?n?(u=this.left+o,i==="near"?d="right":i==="center"?(d="center",u-=l/2):(d="left",u-=l)):(u=this.left+a,i==="near"?d="left":i==="center"?(d="center",u+=l/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:i,top:n,width:o,height:r}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(i,n,o,r),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(o=>o.value===e);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const s=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,d,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(s.display)for(o=0,r=n.length;o<r;++o){const l=n[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=en(e,this.left,r)-r/2,u=en(e,this.right,a)+a/2,h=f=l):(h=en(e,this.top,r)-r/2,f=en(e,this.bottom,a)+a/2,d=u=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&Rr(i,n);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,d=r.label,u=r.textOffset;pn(i,d,0,u,l,a)}n&&Lr(i)}drawTitle(){const{ctx:e,options:{position:s,title:i,reverse:n}}=this;if(!i.display)return;const o=Ze(i.font),r=ut(i.padding),a=i.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||ve(s)?(l+=r.bottom,je(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=Uk(this,l,s,a);pn(e,i.text,0,0,o,{color:i.color,maxWidth:h,rotation:f,textAlign:jk(a,s,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,i=pe(e.grid&&e.grid.z,-1),n=pe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==yn.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[i]===this.id&&(!e||a.type===e)&&n.push(a)}return n}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ze(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Mo{constructor(e,s,i){this.type=e,this.scope=s,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let i;Vk(s)&&(i=this.register(s));const n=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in n||(n[o]=e,Nk(e,r,i),this.override&&Ve.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const s=this.items,i=e.id,n=this.scope;i in s&&delete s[i],n&&i in Ve[n]&&(delete Ve[n][i],this.override&&delete fn[i])}}function Nk(t,e,s){const i=Ki(Object.create(null),[s?Ve.get(s):{},Ve.get(e),t.defaults]);Ve.set(e,i),t.defaultRoutes&&Bk(e,t.defaultRoutes),t.descriptors&&Ve.describe(e,t.descriptors)}function Bk(t,e){Object.keys(e).forEach(s=>{const i=s.split("."),n=i.pop(),o=[t].concat(i).join("."),r=e[s].split("."),a=r.pop(),l=r.join(".");Ve.route(o,n,l,a)})}function Vk(t){return"id"in t&&"defaults"in t}class $k{constructor(){this.controllers=new Mo(Ht,"datasets",!0),this.elements=new Mo(Ms,"elements"),this.plugins=new Mo(Object,"plugins"),this.scales=new Mo(yn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,i){[...s].forEach(n=>{const o=i||this._getRegistryForType(n);i||o.isForType(n)||o===this.plugins&&n.id?this._exec(e,o,n):Ee(n,r=>{const a=i||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,s,i){const n=Ol(e);Le(i["before"+n],[],i),s[e](i),Le(i["after"+n],[],i)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const i=this._typedRegistries[s];if(i.isForType(e))return i}return this.plugins}_get(e,s,i){const n=s.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var es=new $k;class Hk{constructor(){this._init=[]}notify(e,s,i,n){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=n?this._descriptors(e).filter(n):this._descriptors(e),r=this._notify(o,e,s,i);return s==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,s,i,n){n=n||{};for(const o of e){const r=o.plugin,a=r[i],l=[s,n,o.options];if(Le(a,l,r)===!1&&n.cancelable)return!1}return!0}invalidate(){ye(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const i=e&&e.config,n=pe(i.options&&i.options.plugins,{}),o=zk(i);return n===!1&&!s?[]:qk(e,o,n,s)}_notifyStateChanges(e){const s=this._oldCache||[],i=this._cache,n=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(n(s,i),e,"stop"),this._notify(n(i,s),e,"start")}}function zk(t){const e={},s=[],i=Object.keys(es.plugins.items);for(let o=0;o<i.length;o++)s.push(es.getPlugin(i[o]));const n=t.plugins||[];for(let o=0;o<n.length;o++){const r=n[o];s.indexOf(r)===-1&&(s.push(r),e[r.id]=!0)}return{plugins:s,localIds:e}}function Wk(t,e){return!e&&t===!1?null:t===!0?{}:t}function qk(t,{plugins:e,localIds:s},i,n){const o=[],r=t.getContext();for(const a of e){const l=a.id,d=Wk(i[l],n);d!==null&&o.push({plugin:a,options:Kk(t.config,{plugin:a,local:s[l]},d,r)})}return o}function Kk(t,{plugin:e,local:s},i,n){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(i,o);return s&&e.defaults&&r.push(e.defaults),t.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ha(t,e){const s=Ve.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function Gk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Yk(t,e){return t===e?"_index_":"_value_"}function Wd(t){if(t==="x"||t==="y"||t==="r")return t}function Jk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function za(t,...e){if(Wd(t))return t;for(const s of e){const i=s.axis||Jk(s.position)||t.length>1&&Wd(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function qd(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function Xk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(s.length)return qd(t,"x",s[0])||qd(t,"y",s[0])}return{}}function Qk(t,e){const s=fn[t.type]||{scales:{}},i=e.scales||{},n=Ha(t.type,e),o=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!ve(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=za(r,a,Xk(r,t),Ve.scales[a.type]),d=Yk(l,n),u=s.scales||{};o[r]=Pi(Object.create(null),[{axis:l},a,u[l],u[d]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||Ha(a,e),u=(fn[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Gk(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Pi(o[p],[{axis:f},i[p],u[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Pi(a,[Ve.scales[a.type],Ve.scale])}),o}function op(t){const e=t.options||(t.options={});e.plugins=pe(e.plugins,{}),e.scales=Qk(t,e)}function rp(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Zk(t){return t=t||{},t.data=rp(t.data),op(t),t}const Kd=new Map,ap=new Set;function Ao(t,e){let s=Kd.get(t);return s||(s=e(),Kd.set(t,s),ap.add(s)),s}const di=(t,e,s)=>{const i=qs(e,s);i!==void 0&&t.add(i)};class e2{constructor(e){this._config=Zk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rp(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),op(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ao(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ao(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ao(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,i=this.type;return Ao(`${i}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const i=this._scopeCache;let n=i.get(e);return(!n||s)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,s,i){const{options:n,type:o}=this,r=this._cachedScopes(e,i),a=r.get(s);if(a)return a;const l=new Set;s.forEach(u=>{e&&(l.add(e),u.forEach(h=>di(l,e,h))),u.forEach(h=>di(l,n,h)),u.forEach(h=>di(l,fn[o]||{},h)),u.forEach(h=>di(l,Ve,h)),u.forEach(h=>di(l,Ba,h))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),ap.has(s)&&r.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,fn[s]||{},Ve.datasets[s]||{},{type:s},Ve,Ba]}resolveNamedOptions(e,s,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Gd(this._resolverCache,e,n);let l=r;if(s2(r,s)){o.$shared=!1,i=Ks(i)?i():i;const d=this.createResolver(e,i,a);l=qn(r,i,d)}for(const d of s)o[d]=l[d];return o}createResolver(e,s,i=[""],n){const{resolver:o}=Gd(this._resolverCache,e,i);return ve(s)?qn(o,s,void 0,n):o}}function Gd(t,e,s){let i=t.get(e);i||(i=new Map,t.set(e,i));const n=s.join();let o=i.get(n);return o||(o={resolver:Ul(e,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},i.set(n,o)),o}const t2=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>Ks(t[e]));function s2(t,e){const{isScriptable:s,isIndexable:i}=Nf(t);for(const n of e){const o=s(n),r=i(n),a=(r||o)&&t[n];if(o&&(Ks(a)||t2(a))||r&&je(a))return!0}return!1}var n2="4.4.9";const i2=["top","bottom","left","right","chartArea"];function Yd(t,e){return t==="top"||t==="bottom"||i2.indexOf(t)===-1&&e==="x"}function Jd(t,e){return function(s,i){return s[t]===i[t]?s[e]-i[e]:s[t]-i[t]}}function Xd(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Le(s&&s.onComplete,[t],e)}function o2(t){const e=t.chart,s=e.options.animation;Le(s&&s.onProgress,[t],e)}function lp(t){return Vl()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Wo={},Qd=t=>{const e=lp(t);return Object.values(Wo).filter(s=>s.canvas===e).pop()};function r2(t,e,s){const i=Object.keys(t);for(const n of i){const o=+n;if(o>=e){const r=t[n];delete t[n],(s>0||o>e)&&(t[o+s]=r)}}}function a2(t,e,s,i){return!s||t.type==="mouseout"?null:i?e:t}class ss{static register(...e){es.add(...e),Zd()}static unregister(...e){es.remove(...e),Zd()}constructor(e,s){const i=this.config=new e2(s),n=lp(e),o=Qd(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Ck(n)),this.platform.updateConfig(i);const a=this.platform.acquireContext(n,r.aspectRatio),l=a&&a.canvas,d=l&&l.height,u=l&&l.width;if(this.id=l1(),this.ctx=a,this.canvas=l,this.width=u,this.height=d,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=C1(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Wo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",Xd),ds.listen(this,"progress",o2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:i,height:n,_aspectRatio:o}=this;return ye(e)?s&&o?o:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_d(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yd(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(e,s){ds.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,e,s,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,_d(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Le(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Ee(s,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,s=e.scales,i=this.scales,n=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=za(r,a),d=l==="r",u=l==="x";return{options:a,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ee(o,r=>{const a=r.options,l=a.id,d=za(l,a),u=pe(a.type,r.dtype);(a.position===void 0||Yd(a.position,d)!==Yd(r.dposition))&&(a.position=r.dposition),n[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=es.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Ee(n,(r,a)=>{r||delete i[a]}),Ee(i,r=>{ct.configure(this,r,r.options),ct.addBox(this,r)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,i=e.length;if(e.sort((n,o)=>n.index-o.index),i>s){for(let n=s;n<i;++n)this._destroyDatasetMeta(n);e.splice(s,i-s)}this._sortedMetasets=e.slice(0).sort(Jd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((i,n)=>{s.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=s.length;i<n;i++){const o=s[i];let r=this.getDatasetMeta(i);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=o.indexAxis||Ha(a,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=es.getController(a),{datasetElementType:d,dataElementType:u}=Ve.datasets[a];Object.assign(l,{dataElementType:es.getElement(u),datasetElementType:d&&es.getElement(d)}),r.controller=new l(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Ee(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const i=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!n&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||Ee(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ee(this.scales,e=>{ct.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!cd(s,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of s){const r=i==="_removeElements"?-o:o;r2(e,n,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,i=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),n=i(0);for(let o=1;o<s;o++)if(!cd(n,i(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ct.update(this,this.width,this.height,e);const s=this.chartArea,i=s.width<=0||s.height<=0;this._layers=[],Ee(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,i=this.data.datasets.length;s<i;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,i=this.data.datasets.length;s<i;++s)this._updateDataset(s,Ks(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),Xd({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,i=[];let n,o;for(n=0,o=s.length;n<o;++n){const r=s[n];(!e||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=Jf(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&Rr(s,n),e.controller.draw(),n&&Lr(s),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return xs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,i,n){const o=ik.modes[s];return typeof o=="function"?o(this,e,i,n):[]}getDatasetMeta(e){const s=this.data.datasets[e],i=this._metasets;let n=i.filter(o=>o&&o._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Ys(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!s.hidden}setDatasetVisibility(e,s){const i=this.getDatasetMeta(e);i.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,i){const n=i?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,n);Gi(s)?(o.data[s].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(o,{visible:i}),this.update(a=>a.datasetIndex===e?n:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ds.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yd(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Wo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,i=(o,r)=>{s.addEventListener(this,o,r),e[o]=r},n=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Ee(this.options.events,o=>i(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,i=(l,d)=>{s.addEventListener(this,l,d),e[l]=d},n=(l,d)=>{e[l]&&(s.removeEventListener(this,l,d),delete e[l])},o=(l,d)=>{this.canvas&&this.resize(l,d)};let r;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Ee(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Ee(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,i){const n=i?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const d=r&&this.getDatasetMeta(r.datasetIndex).controller;d&&d[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],i=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!or(i,s)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,s))}notifyPlugins(e,s,i){return this._plugins.notify(this,e,s,i)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,i){const n=this.options.hover,o=(l,d)=>l.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(s,e),a=i?e:o(e,s);r.length&&this.updateHoverStyle(r,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(e,s){const i={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},n=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const o=this._handleEvent(e,s,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(e,s,i){const{_active:n=[],options:o}=this,r=s,a=this._getActiveElements(e,n,i,r),l=p1(e),d=a2(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Le(o.onHover,[e,a,this],this),l&&Le(o.onClick,[e,a,this],this));const u=!or(a,n);return(u||s)&&(this._active=a,this._updateHoverStyles(a,n,s)),this._lastEvent=d,u}_getActiveElements(e,s,i,n){if(e.type==="mouseout")return[];if(!i)return s;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,n)}}z(ss,"defaults",Ve),z(ss,"instances",Wo),z(ss,"overrides",fn),z(ss,"registry",es),z(ss,"version",n2),z(ss,"getChart",Qd);function Zd(){return Ee(ss.instances,t=>t._plugins.invalidate())}function l2(t,e,s){const{startAngle:i,pixelMargin:n,x:o,y:r,outerRadius:a,innerRadius:l}=e;let d=n/a;t.beginPath(),t.arc(o,r,a,i-d,s+d),l>n?(d=n/l,t.arc(o,r,l,s+d,i-d,!0)):t.arc(o,r,n,s+Ke,i-Ke),t.closePath(),t.clip()}function c2(t){return jl(t,["outerStart","outerEnd","innerStart","innerEnd"])}function d2(t,e,s,i){const n=c2(t.options.borderRadius),o=(s-e)/2,r=Math.min(o,i*e/2),a=l=>{const d=(s-Math.min(o,l))*i/2;return tt(l,0,Math.min(o,d))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:tt(n.innerStart,0,r),innerEnd:tt(n.innerEnd,0,r)}}function Sn(t,e,s,i){return{x:s+t*Math.cos(e),y:i+t*Math.sin(e)}}function ur(t,e,s,i,n,o){const{x:r,y:a,startAngle:l,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+i+s-d,0),f=u>0?u+i+s+d:0;let p=0;const g=n-l;if(i){const _e=u>0?u-i:0,de=h>0?h-i:0,re=(_e+de)/2,fe=re!==0?g*re/(re+i):g;p=(g-fe)/2}const b=Math.max(.001,g*h-s/Ne)/h,x=(g-b)/2,w=l+x+p,k=n-x-p,{outerStart:E,outerEnd:A,innerStart:P,innerEnd:N}=d2(e,f,h,k-w),F=h-E,H=h-A,Z=w+E/F,oe=k-A/H,le=f+P,he=f+N,Pe=w+P/le,Qe=k-N/he;if(t.beginPath(),o){const _e=(Z+oe)/2;if(t.arc(r,a,h,Z,_e),t.arc(r,a,h,_e,oe),A>0){const Ie=Sn(H,oe,r,a);t.arc(Ie.x,Ie.y,A,oe,k+Ke)}const de=Sn(he,k,r,a);if(t.lineTo(de.x,de.y),N>0){const Ie=Sn(he,Qe,r,a);t.arc(Ie.x,Ie.y,N,k+Ke,Qe+Math.PI)}const re=(k-N/f+(w+P/f))/2;if(t.arc(r,a,f,k-N/f,re,!0),t.arc(r,a,f,re,w+P/f,!0),P>0){const Ie=Sn(le,Pe,r,a);t.arc(Ie.x,Ie.y,P,Pe+Math.PI,w-Ke)}const fe=Sn(F,w,r,a);if(t.lineTo(fe.x,fe.y),E>0){const Ie=Sn(F,Z,r,a);t.arc(Ie.x,Ie.y,E,w-Ke,Z)}}else{t.moveTo(r,a);const _e=Math.cos(Z)*h+r,de=Math.sin(Z)*h+a;t.lineTo(_e,de);const re=Math.cos(oe)*h+r,fe=Math.sin(oe)*h+a;t.lineTo(re,fe)}t.closePath()}function u2(t,e,s,i,n){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){ur(t,e,s,i,l,n);for(let d=0;d<o;++d)t.fill();isNaN(a)||(l=r+(a%Ue||Ue))}return ur(t,e,s,i,l,n),t.fill(),l}function h2(t,e,s,i,n){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let g=e.endAngle;if(o){ur(t,e,s,i,g,n);for(let b=0;b<o;++b)t.stroke();isNaN(a)||(g=r+(a%Ue||Ue))}p&&l2(t,e,g),o||(ur(t,e,s,i,g,n),t.stroke())}class gi extends Ms{constructor(s){super();z(this,"circumference");z(this,"endAngle");z(this,"fullCircles");z(this,"innerRadius");z(this,"outerRadius");z(this,"pixelMargin");z(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,i,n){const o=this.getProps(["x","y"],n),{angle:r,distance:a}=Pf(o,{x:s,y:i}),{startAngle:l,endAngle:d,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,g=pe(f,d-l),b=Yi(r,l,d)&&l!==d,x=g>=Ue||b,w=bs(a,u+p,h+p);return x&&w}getCenterPoint(s){const{x:i,y:n,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:u}=this.options,h=(o+r)/2,f=(a+l+u+d)/2;return{x:i+Math.cos(h)*f,y:n+Math.sin(h)*f}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:i,circumference:n}=this,o=(i.offset||0)/4,r=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>Ue?Math.floor(n/Ue):0,n===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*o,Math.sin(l)*o);const d=1-Math.sin(Math.min(Ne,n||0)),u=o*d;s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,u2(s,this,u,r,a),h2(s,this,u,r,a),s.restore()}}z(gi,"id","arc"),z(gi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),z(gi,"defaultRoutes",{backgroundColor:"backgroundColor"}),z(gi,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function cp(t,e,s=e){t.lineCap=pe(s.borderCapStyle,e.borderCapStyle),t.setLineDash(pe(s.borderDash,e.borderDash)),t.lineDashOffset=pe(s.borderDashOffset,e.borderDashOffset),t.lineJoin=pe(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=pe(s.borderWidth,e.borderWidth),t.strokeStyle=pe(s.borderColor,e.borderColor)}function f2(t,e,s){t.lineTo(s.x,s.y)}function p2(t){return t.stepped?j1:t.tension||t.cubicInterpolationMode==="monotone"?U1:f2}function dp(t,e,s={}){const i=t.length,{start:n=0,end:o=i-1}=s,{start:r,end:a}=e,l=Math.max(n,r),d=Math.min(o,a),u=n<r&&o<r||n>a&&o>a;return{count:i,start:l,loop:e.loop,ilen:d<l&&!u?i+d-l:d-l}}function m2(t,e,s,i){const{points:n,options:o}=e,{count:r,start:a,loop:l,ilen:d}=dp(n,s,i),u=p2(o);let{move:h=!0,reverse:f}=i||{},p,g,b;for(p=0;p<=d;++p)g=n[(a+(f?d-p:p))%r],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,b,g,f,o.stepped),b=g);return l&&(g=n[(a+(f?d:0))%r],u(t,b,g,f,o.stepped)),!!l}function g2(t,e,s,i){const n=e.points,{count:o,start:r,ilen:a}=dp(n,s,i),{move:l=!0,reverse:d}=i||{};let u=0,h=0,f,p,g,b,x,w;const k=A=>(r+(d?a-A:A))%o,E=()=>{b!==x&&(t.lineTo(u,x),t.lineTo(u,b),t.lineTo(u,w))};for(l&&(p=n[k(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=n[k(f)],p.skip)continue;const A=p.x,P=p.y,N=A|0;N===g?(P<b?b=P:P>x&&(x=P),u=(h*u+A)/++h):(E(),t.lineTo(A,P),g=N,h=0,b=x=P),w=P}E()}function Wa(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?g2:m2}function b2(t){return t.stepped?gw:t.tension||t.cubicInterpolationMode==="monotone"?bw:an}function y2(t,e,s,i){let n=e._path;n||(n=e._path=new Path2D,e.path(n,s,i)&&n.closePath()),cp(t,e.options),t.stroke(n)}function x2(t,e,s,i){const{segments:n,options:o}=e,r=Wa(e);for(const a of n)cp(t,o,a.style),t.beginPath(),r(t,e,a,{start:s,end:s+i-1})&&t.closePath(),t.stroke()}const v2=typeof Path2D=="function";function _2(t,e,s,i){v2&&!e.options.segment?y2(t,e,s,i):x2(t,e,s,i)}class Bs extends Ms{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;lw(this._points,i,e,n,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kw(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,i=e.length;return i&&s[e[i-1].end]}interpolate(e,s){const i=this.options,n=e[s],o=this.points,r=Yf(this,{property:s,start:n,end:n});if(!r.length)return;const a=[],l=b2(i);let d,u;for(d=0,u=r.length;d<u;++d){const{start:h,end:f}=r[d],p=o[h],g=o[f];if(p===g){a.push(p);continue}const b=Math.abs((n-p[s])/(g[s]-p[s])),x=l(p,g,b,i.stepped);x[s]=e[s],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,s,i){return Wa(this)(e,this,s,i)}path(e,s,i){const n=this.segments,o=Wa(this);let r=this._loop;s=s||0,i=i||this.points.length-s;for(const a of n)r&=o(e,this,a,{start:s,end:s+i-1});return!!r}draw(e,s,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),_2(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}z(Bs,"id","line"),z(Bs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),z(Bs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),z(Bs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function eu(t,e,s,i){const n=t.options,{[s]:o}=t.getProps([s],i);return Math.abs(e-o)<n.radius+n.hitRadius}class qo extends Ms{constructor(s){super();z(this,"parsed");z(this,"skip");z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,i,n){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],n);return Math.pow(s-r,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,i){return eu(this,s,"x",i)}inYRange(s,i){return eu(this,s,"y",i)}getCenterPoint(s){const{x:i,y:n}=this.getProps(["x","y"],s);return{x:i,y:n}}size(s){s=s||this.options||{};let i=s.radius||0;i=Math.max(i,i&&s.hoverRadius||0);const n=i&&s.borderWidth||0;return(i+n)*2}draw(s,i){const n=this.options;this.skip||n.radius<.1||!xs(this,i,this.size(n)/2)||(s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.fillStyle=n.backgroundColor,Va(s,n,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}z(qo,"id","point"),z(qo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),z(qo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function up(t,e){const{x:s,y:i,base:n,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,d,u,h;return t.horizontal?(h=r/2,a=Math.min(s,n),l=Math.max(s,n),d=i-h,u=i+h):(h=o/2,a=s-h,l=s+h,d=Math.min(i,n),u=Math.max(i,n)),{left:a,top:d,right:l,bottom:u}}function Vs(t,e,s,i){return t?0:tt(e,s,i)}function w2(t,e,s){const i=t.options.borderWidth,n=t.borderSkipped,o=Uf(i);return{t:Vs(n.top,o.top,0,s),r:Vs(n.right,o.right,0,e),b:Vs(n.bottom,o.bottom,0,s),l:Vs(n.left,o.left,0,e)}}function k2(t,e,s){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=un(n),r=Math.min(e,s),a=t.borderSkipped,l=i||ve(n);return{topLeft:Vs(!l||a.top||a.left,o.topLeft,0,r),topRight:Vs(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Vs(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Vs(!l||a.bottom||a.right,o.bottomRight,0,r)}}function S2(t){const e=up(t),s=e.right-e.left,i=e.bottom-e.top,n=w2(t,s/2,i/2),o=k2(t,s/2,i/2);return{outer:{x:e.left,y:e.top,w:s,h:i,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:s-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function pa(t,e,s,i){const n=e===null,o=s===null,a=t&&!(n&&o)&&up(t,i);return a&&(n||bs(e,a.left,a.right))&&(o||bs(s,a.top,a.bottom))}function C2(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function M2(t,e){t.rect(e.x,e.y,e.w,e.h)}function ma(t,e,s={}){const i=t.x!==s.x?-e:0,n=t.y!==s.y?-e:0,o=(t.x+t.w!==s.x+s.w?e:0)-i,r=(t.y+t.h!==s.y+s.h?e:0)-n;return{x:t.x+i,y:t.y+n,w:t.w+o,h:t.h+r,radius:t.radius}}class Ko extends Ms{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:r}=S2(this),a=C2(r.radius)?Ji:M2;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,ma(r,s,o)),e.clip(),a(e,ma(o,-s,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,ma(o,s)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,s,i){return pa(this,e,s,i)}inXRange(e,s){return pa(this,e,null,s)}inYRange(e,s){return pa(this,null,e,s)}getCenterPoint(e){const{x:s,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(s+n)/2:s,y:o?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}z(Ko,"id","bar"),z(Ko,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),z(Ko,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var A2=Object.freeze({__proto__:null,ArcElement:gi,BarElement:Ko,LineElement:Bs,PointElement:qo});const qa=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],tu=qa.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function hp(t){return qa[t%qa.length]}function fp(t){return tu[t%tu.length]}function E2(t,e){return t.borderColor=hp(e),t.backgroundColor=fp(e),++e}function P2(t,e){return t.backgroundColor=t.data.map(()=>hp(e++)),e}function T2(t,e){return t.backgroundColor=t.data.map(()=>fp(e++)),e}function I2(t){let e=0;return(s,i)=>{const n=t.getDatasetMeta(i).controller;n instanceof cn?e=P2(s,e):n instanceof Di?e=T2(s,e):n&&(e=E2(s,e))}}function su(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function O2(t){return t&&(t.borderColor||t.backgroundColor)}function D2(){return Ve.borderColor!=="rgba(0,0,0,0.1)"||Ve.backgroundColor!=="rgba(0,0,0,0.1)"}var R2={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:i},options:n}=t.config,{elements:o}=n,r=su(i)||O2(n)||o&&su(o)||D2();if(!s.forceOverride&&r)return;const a=I2(t);i.forEach(a)}};function L2(t,e,s,i,n){const o=n.samples||i;if(o>=s)return t.slice(e,e+s);const r=[],a=(s-2)/(o-2);let l=0;const d=e+s-1;let u=e,h,f,p,g,b;for(r[l++]=t[u],h=0;h<o-2;h++){let x=0,w=0,k;const E=Math.floor((h+1)*a)+1+e,A=Math.min(Math.floor((h+2)*a)+1,s)+e,P=A-E;for(k=E;k<A;k++)x+=t[k].x,w+=t[k].y;x/=P,w/=P;const N=Math.floor(h*a)+1+e,F=Math.min(Math.floor((h+1)*a)+1,s)+e,{x:H,y:Z}=t[u];for(p=g=-1,k=N;k<F;k++)g=.5*Math.abs((H-x)*(t[k].y-Z)-(H-t[k].x)*(w-Z)),g>p&&(p=g,f=t[k],b=k);r[l++]=f,u=b}return r[l++]=t[d],r}function F2(t,e,s,i){let n=0,o=0,r,a,l,d,u,h,f,p,g,b;const x=[],w=e+s-1,k=t[e].x,A=t[w].x-k;for(r=e;r<e+s;++r){a=t[r],l=(a.x-k)/A*i,d=a.y;const P=l|0;if(P===u)d<g?(g=d,h=r):d>b&&(b=d,f=r),n=(o*n+a.x)/++o;else{const N=r-1;if(!ye(h)&&!ye(f)){const F=Math.min(h,f),H=Math.max(h,f);F!==p&&F!==N&&x.push({...t[F],x:n}),H!==p&&H!==N&&x.push({...t[H],x:n})}r>0&&N!==p&&x.push(t[N]),x.push(a),u=P,o=0,g=b=d,h=f=p=r}}return x}function pp(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function nu(t){t.data.datasets.forEach(e=>{pp(e)})}function j2(t,e){const s=e.length;let i=0,n;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:d}=o.getUserBounds();return l&&(i=tt(ys(e,o.axis,r).lo,0,s-1)),d?n=tt(ys(e,o.axis,a).hi+1,i,s)-i:n=s-i,{start:i,count:n}}var U2={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){nu(t);return}const i=t.width;t.data.datasets.forEach((n,o)=>{const{_data:r,indexAxis:a}=n,l=t.getDatasetMeta(o),d=r||n.data;if(pi([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:f}=j2(l,d);const p=s.threshold||4*i;if(f<=p){pp(n);return}ye(r)&&(n._data=d,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(s.algorithm){case"lttb":g=L2(d,h,f,i,s);break;case"min-max":g=F2(d,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}n._decimated=g})},destroy(t){nu(t)}};function N2(t,e,s){const i=t.segments,n=t.points,o=e.points,r=[];for(const a of i){let{start:l,end:d}=a;d=zl(l,d,n);const u=Ka(s,n[l],n[d],a.loop);if(!e.segments){r.push({source:a,target:u,start:n[l],end:n[d]});continue}const h=Yf(e,u);for(const f of h){const p=Ka(s,o[f.start],o[f.end],f.loop),g=Gf(a,n,p);for(const b of g)r.push({source:b,target:f,start:{[s]:iu(u,p,"start",Math.max)},end:{[s]:iu(u,p,"end",Math.min)}})}}return r}function Ka(t,e,s,i){if(i)return;let n=e[t],o=s[t];return t==="angle"&&(n=Pt(n),o=Pt(o)),{property:t,start:n,end:o}}function B2(t,e){const{x:s=null,y:i=null}=t||{},n=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=zl(r,a,n);const l=n[r],d=n[a];i!==null?(o.push({x:l.x,y:i}),o.push({x:d.x,y:i})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:d.y}))}),o}function zl(t,e,s){for(;e>t;e--){const i=s[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function iu(t,e,s,i){return t&&e?i(t[s],e[s]):t?t[s]:e?e[s]:0}function mp(t,e){let s=[],i=!1;return je(t)?(i=!0,s=t):s=B2(t,e),s.length?new Bs({points:s,options:{tension:0},_loop:i,_fullLoop:i}):null}function ou(t){return t&&t.fill!==!1}function V2(t,e,s){let n=t[e].fill;const o=[e];let r;if(!s)return n;for(;n!==!1&&o.indexOf(n)===-1;){if(!He(n))return n;if(r=t[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function $2(t,e,s){const i=q2(t);if(ve(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return He(n)&&Math.floor(n)===n?H2(i[0],e,n,s):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function H2(t,e,s,i){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=i?!1:s}function z2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ve(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function W2(t,e,s){let i;return t==="start"?i=s:t==="end"?i=e.options.reverse?e.min:e.max:ve(t)?i=t.value:i=e.getBaseValue(),i}function q2(t){const e=t.options,s=e.fill;let i=pe(s&&s.target,s);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function K2(t){const{scale:e,index:s,line:i}=t,n=[],o=i.segments,r=i.points,a=G2(e,s);a.push(mp({x:null,y:e.bottom},i));for(let l=0;l<o.length;l++){const d=o[l];for(let u=d.start;u<=d.end;u++)Y2(n,r[u],a)}return new Bs({points:n,options:{}})}function G2(t,e){const s=[],i=t.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const o=i[n];if(o.index===e)break;o.hidden||s.unshift(o.dataset)}return s}function Y2(t,e,s){const i=[];for(let n=0;n<s.length;n++){const o=s[n],{first:r,last:a,point:l}=J2(o,e,"x");if(!(!l||r&&a)){if(r)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function J2(t,e,s){const i=t.interpolate(e,s);if(!i)return{};const n=i[s],o=t.segments,r=t.points;let a=!1,l=!1;for(let d=0;d<o.length;d++){const u=o[d],h=r[u.start][s],f=r[u.end][s];if(bs(n,h,f)){a=n===h,l=n===f;break}}return{first:a,last:l,point:i}}class gp{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,i){const{x:n,y:o,radius:r}=this;return s=s||{start:0,end:Ue},e.arc(n,o,r,s.end,s.start,!0),!i.bounds}interpolate(e){const{x:s,y:i,radius:n}=this,o=e.angle;return{x:s+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function X2(t){const{chart:e,fill:s,line:i}=t;if(He(s))return Q2(e,s);if(s==="stack")return K2(t);if(s==="shape")return!0;const n=Z2(t);return n instanceof gp?n:mp(n,i)}function Q2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function Z2(t){return(t.scale||{}).getPointPositionForValue?tS(t):eS(t)}function eS(t){const{scale:e={},fill:s}=t,i=z2(s,e);if(He(i)){const n=e.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function tS(t){const{scale:e,fill:s}=t,i=e.options,n=e.getLabels().length,o=i.reverse?e.max:e.min,r=W2(s,e,o),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,o);return new gp({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<n;++l)a.push(e.getPointPositionForValue(l,r));return a}function ga(t,e,s){const i=X2(e),{chart:n,index:o,line:r,scale:a,axis:l}=e,d=r.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:p=h}=u||{},g=n.getDatasetMeta(o),b=Jf(n,g);i&&r.points.length&&(Rr(t,s),sS(t,{line:r,target:i,above:f,below:p,area:s,scale:a,axis:l,clip:b}),Lr(t))}function sS(t,e){const{line:s,target:i,above:n,below:o,area:r,scale:a,clip:l}=e,d=s._loop?"angle":e.axis;t.save(),d==="x"&&o!==n&&(ru(t,i,r.top),au(t,{line:s,target:i,color:n,scale:a,property:d,clip:l}),t.restore(),t.save(),ru(t,i,r.bottom)),au(t,{line:s,target:i,color:o,scale:a,property:d,clip:l}),t.restore()}function ru(t,e,s){const{segments:i,points:n}=e;let o=!0,r=!1;t.beginPath();for(const a of i){const{start:l,end:d}=a,u=n[l],h=n[zl(l,d,n)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function au(t,e){const{line:s,target:i,property:n,color:o,scale:r,clip:a}=e,l=N2(s,i,n);for(const{source:d,target:u,start:h,end:f}of l){const{style:{backgroundColor:p=o}={}}=d,g=i!==!0;t.save(),t.fillStyle=p,nS(t,r,a,g&&Ka(n,h,f)),t.beginPath();const b=!!s.pathSegment(t,d);let x;if(g){b?t.closePath():lu(t,i,f,n);const w=!!i.pathSegment(t,u,{move:b,reverse:!0});x=b&&w,x||lu(t,i,h,n)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function nS(t,e,s,i){const n=e.chart.chartArea,{property:o,start:r,end:a}=i||{};if(o==="x"||o==="y"){let l,d,u,h;o==="x"?(l=r,d=n.top,u=a,h=n.bottom):(l=n.left,d=r,u=n.right,h=a),t.beginPath(),s&&(l=Math.max(l,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(l,d,u-l,h-d),t.clip()}}function lu(t,e,s,i){const n=e.interpolate(s,i);n&&t.lineTo(n.x,n.y)}var iS={id:"filler",afterDatasetsUpdate(t,e,s){const i=(t.data.datasets||[]).length,n=[];let o,r,a,l;for(r=0;r<i;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Bs&&(l={visible:t.isDatasetVisible(r),index:r,fill:$2(a,r,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,n.push(l);for(r=0;r<i;++r)l=n[r],!(!l||l.fill===!1)&&(l.fill=V2(n,r,s.propagate))},beforeDraw(t,e,s){const i=s.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=n.length-1;r>=0;--r){const a=n[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&ga(t.ctx,a,o))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const o=i[n].$filler;ou(o)&&ga(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,s){const i=e.meta.$filler;!ou(i)||s.drawTime!=="beforeDatasetDraw"||ga(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const cu=(t,e)=>{let{boxHeight:s=e,boxWidth:i=e}=t;return t.usePointStyle&&(s=Math.min(s,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:s,itemHeight:Math.max(e,s)}},oS=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class du extends Ms{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,i){this.maxWidth=e,this.maxHeight=s,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Le(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(i=>e.filter(i,this.chart.data))),e.sort&&(s=s.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=Ze(i.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=cu(i,o);let d,u;s.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,d=this._fitCols(r,n,a,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,i,n){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+a;let h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,b)=>{const x=i+s/2+o.measureText(g.text).width;(b===0||d[d.length-1]+x+2*a>r)&&(h+=u,d[d.length-(b>0?0:1)]=0,p+=u,f++),l[b]={left:0,top:p,row:f,width:x,height:n},d[d.length-1]+=x+a}),h}_fitCols(e,s,i,n){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],u=r-e;let h=a,f=0,p=0,g=0,b=0;return this.legendItems.forEach((x,w)=>{const{itemWidth:k,itemHeight:E}=rS(i,s,o,x,n);w>0&&p+E+2*a>u&&(h+=f+a,d.push({width:f,height:p}),g+=f+a,b++,f=p=0),l[w]={left:g,top:p,col:b,width:k,height:E},f=Math.max(f,k),p+=E+a}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:i,labels:{padding:n},rtl:o}}=this,r=Un(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=rt(i,this.left+n,this.right-this.lineWidths[a]);for(const d of s)a!==d.row&&(a=d.row,l=rt(i,this.left+n,this.right-this.lineWidths[a])),d.top+=this.top+e+n,d.left=r.leftForLtr(r.x(l),d.width),l+=d.width+n}else{let a=0,l=rt(i,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const d of s)d.col!==a&&(a=d.col,l=rt(i,this.top+e+n,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+n,d.left=r.leftForLtr(r.x(d.left),d.width),l+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Rr(e,this),this._draw(),Lr(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:i,ctx:n}=this,{align:o,labels:r}=e,a=Ve.color,l=Un(e.rtl,this.left,this.width),d=Ze(r.font),{padding:u}=r,h=d.size,f=h/2;let p;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:g,boxHeight:b,itemHeight:x}=cu(r,h),w=function(N,F,H){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;n.save();const Z=pe(H.lineWidth,1);if(n.fillStyle=pe(H.fillStyle,a),n.lineCap=pe(H.lineCap,"butt"),n.lineDashOffset=pe(H.lineDashOffset,0),n.lineJoin=pe(H.lineJoin,"miter"),n.lineWidth=Z,n.strokeStyle=pe(H.strokeStyle,a),n.setLineDash(pe(H.lineDash,[])),r.usePointStyle){const oe={radius:b*Math.SQRT2/2,pointStyle:H.pointStyle,rotation:H.rotation,borderWidth:Z},le=l.xPlus(N,g/2),he=F+f;jf(n,oe,le,he,r.pointStyleWidth&&g)}else{const oe=F+Math.max((h-b)/2,0),le=l.leftForLtr(N,g),he=un(H.borderRadius);n.beginPath(),Object.values(he).some(Pe=>Pe!==0)?Ji(n,{x:le,y:oe,w:g,h:b,radius:he}):n.rect(le,oe,g,b),n.fill(),Z!==0&&n.stroke()}n.restore()},k=function(N,F,H){pn(n,H.text,N,F+x/2,d,{strikethrough:H.hidden,textAlign:l.textAlign(H.textAlign)})},E=this.isHorizontal(),A=this._computeTitleHeight();E?p={x:rt(o,this.left+u,this.right-i[0]),y:this.top+u+A,line:0}:p={x:this.left+u,y:rt(o,this.top+A+u,this.bottom-s[0].height),line:0},Wf(this.ctx,e.textDirection);const P=x+u;this.legendItems.forEach((N,F)=>{n.strokeStyle=N.fontColor,n.fillStyle=N.fontColor;const H=n.measureText(N.text).width,Z=l.textAlign(N.textAlign||(N.textAlign=r.textAlign)),oe=g+f+H;let le=p.x,he=p.y;l.setWidth(this.width),E?F>0&&le+oe+u>this.right&&(he=p.y+=P,p.line++,le=p.x=rt(o,this.left+u,this.right-i[p.line])):F>0&&he+P>this.bottom&&(le=p.x=le+s[p.line].width+u,p.line++,he=p.y=rt(o,this.top+A+u,this.bottom-s[p.line].height));const Pe=l.x(le);if(w(Pe,he,N),le=M1(Z,le+g+f,E?le+oe:this.right,e.rtl),k(l.x(le),he,N),E)p.x+=oe+u;else if(typeof N.text!="string"){const Qe=d.lineHeight;p.y+=bp(N,Qe)+u}else p.y+=P}),qf(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,i=Ze(s.font),n=ut(s.padding);if(!s.display)return;const o=Un(e.rtl,this.left,this.width),r=this.ctx,a=s.position,l=i.size/2,d=n.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=rt(e.align,h,this.right-f);else{const g=this.columnSizes.reduce((b,x)=>Math.max(b,x.height),0);u=d+rt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=rt(a,h,h+f);r.textAlign=o.textAlign(Ll(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=i.string,pn(r,s.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,s=Ze(e.font),i=ut(e.padding);return e.display?s.lineHeight+i.height:0}_getLegendItemAt(e,s){let i,n,o;if(bs(e,this.left,this.right)&&bs(s,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],bs(e,n.left,n.left+n.width)&&bs(s,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const s=this.options;if(!cS(e.type,s))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,o=oS(n,i);n&&!o&&Le(s.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!o&&Le(s.onHover,[e,i,this],this)}else i&&Le(s.onClick,[e,i,this],this)}}function rS(t,e,s,i,n){const o=aS(i,t,e,s),r=lS(n,i,e.lineHeight);return{itemWidth:o,itemHeight:r}}function aS(t,e,s,i){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((o,r)=>o.length>r.length?o:r)),e+s.size/2+i.measureText(n).width}function lS(t,e,s){let i=t;return typeof e.text!="string"&&(i=bp(e,s)),i}function bp(t,e){const s=t.text?t.text.length:0;return e*s}function cS(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var dS={id:"legend",_element:du,start(t,e,s){const i=t.legend=new du({ctx:t.ctx,options:s,chart:t});ct.configure(t,i,s),ct.addBox(t,i)},stop(t){ct.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const i=t.legend;ct.configure(t,i,s),i.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const i=e.datasetIndex,n=s.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:i,textAlign:n,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(s?0:void 0),u=ut(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:r&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Wl extends Ms{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const n=je(i.text)?i.text.length:1;this._padding=ut(i.padding);const o=n*Ze(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:i,bottom:n,right:o,options:r}=this,a=r.align;let l=0,d,u,h;return this.isHorizontal()?(u=rt(a,i,o),h=s+e,d=o-i):(r.position==="left"?(u=i+e,h=rt(a,n,s),l=Ne*-.5):(u=o-e,h=rt(a,s,n),l=Ne*.5),d=n-s),{titleX:u,titleY:h,maxWidth:d,rotation:l}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const i=Ze(s.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(o);pn(e,s.text,0,0,i,{color:s.color,maxWidth:l,rotation:d,textAlign:Ll(s.align),textBaseline:"middle",translation:[r,a]})}}function uS(t,e){const s=new Wl({ctx:t.ctx,options:e,chart:t});ct.configure(t,s,e),ct.addBox(t,s),t.titleBlock=s}var hS={id:"title",_element:Wl,start(t,e,s){uS(t,s)},stop(t){const e=t.titleBlock;ct.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const i=t.titleBlock;ct.configure(t,i,s),i.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Eo=new WeakMap;var fS={id:"subtitle",start(t,e,s){const i=new Wl({ctx:t.ctx,options:s,chart:t});ct.configure(t,i,s),ct.addBox(t,i),Eo.set(t,i)},stop(t){ct.removeBox(t,Eo.get(t)),Eo.delete(t)},beforeUpdate(t,e,s){const i=Eo.get(t);ct.configure(t,i,s),i.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bi={average(t){if(!t.length)return!1;let e,s,i=new Set,n=0,o=0;for(e=0,s=t.length;e<s;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),n+=l.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:n/o}},nearest(t,e){if(!t.length)return!1;let s=e.x,i=e.y,n=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),u=Na(e,d);u<n&&(n=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,i=l.y}return{x:s,y:i}}};function Qt(t,e){return e&&(je(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function us(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pS(t,e){const{element:s,datasetIndex:i,index:n}=e,o=t.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(n);return{chart:t,label:r,parsed:o.getParsed(n),raw:t.data.datasets[i].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:i,element:s}}function uu(t,e){const s=t.chart.ctx,{body:i,footer:n,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=Ze(e.bodyFont),d=Ze(e.titleFont),u=Ze(e.footerFont),h=o.length,f=n.length,p=i.length,g=ut(e.padding);let b=g.height,x=0,w=i.reduce((A,P)=>A+P.before.length+P.lines.length+P.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(b+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=p*A+(w-p)*l.lineHeight+(w-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let k=0;const E=function(A){x=Math.max(x,s.measureText(A).width+k)};return s.save(),s.font=d.string,Ee(t.title,E),s.font=l.string,Ee(t.beforeBody.concat(t.afterBody),E),k=e.displayColors?r+2+e.boxPadding:0,Ee(i,A=>{Ee(A.before,E),Ee(A.lines,E),Ee(A.after,E)}),k=0,s.font=u.string,Ee(t.footer,E),s.restore(),x+=g.width,{width:x,height:b}}function mS(t,e){const{y:s,height:i}=e;return s<i/2?"top":s>t.height-i/2?"bottom":"center"}function gS(t,e,s,i){const{x:n,width:o}=i,r=s.caretSize+s.caretPadding;if(t==="left"&&n+o+r>e.width||t==="right"&&n-o-r<0)return!0}function bS(t,e,s,i){const{x:n,width:o}=s,{width:r,chartArea:{left:a,right:l}}=t;let d="center";return i==="center"?d=n<=(a+l)/2?"left":"right":n<=o/2?d="left":n>=r-o/2&&(d="right"),gS(d,t,e,s)&&(d="center"),d}function hu(t,e,s){const i=s.yAlign||e.yAlign||mS(t,s);return{xAlign:s.xAlign||e.xAlign||bS(t,e,s,i),yAlign:i}}function yS(t,e){let{x:s,width:i}=t;return e==="right"?s-=i:e==="center"&&(s-=i/2),s}function xS(t,e,s){let{y:i,height:n}=t;return e==="top"?i+=s:e==="bottom"?i-=n+s:i-=n/2,i}function fu(t,e,s,i){const{caretSize:n,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=s,d=n+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=un(r);let g=yS(e,a);const b=xS(e,l,d);return l==="center"?a==="left"?g+=d:a==="right"&&(g-=d):a==="left"?g-=Math.max(u,f)+n:a==="right"&&(g+=Math.max(h,p)+n),{x:tt(g,0,i.width-e.width),y:tt(b,0,i.height-e.height)}}function Po(t,e,s){const i=ut(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function pu(t){return Qt([],us(t))}function vS(t,e,s){return Ys(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function mu(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const yp={beforeTitle:cs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,i=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return s[e.dataIndex]}return""},afterTitle:cs,beforeBody:cs,beforeLabel:cs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ye(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:cs,afterBody:cs,beforeFooter:cs,footer:cs,afterFooter:cs};function xt(t,e,s,i){const n=t[e].call(s,i);return typeof n>"u"?yp[e].call(s,i):n}class Ga extends Ms{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&s.options.animation&&i.animations,o=new Xf(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=vS(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:i}=s,n=xt(i,"beforeTitle",this,e),o=xt(i,"title",this,e),r=xt(i,"afterTitle",this,e);let a=[];return a=Qt(a,us(n)),a=Qt(a,us(o)),a=Qt(a,us(r)),a}getBeforeBody(e,s){return pu(xt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:i}=s,n=[];return Ee(e,o=>{const r={before:[],lines:[],after:[]},a=mu(i,o);Qt(r.before,us(xt(a,"beforeLabel",this,o))),Qt(r.lines,xt(a,"label",this,o)),Qt(r.after,us(xt(a,"afterLabel",this,o))),n.push(r)}),n}getAfterBody(e,s){return pu(xt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:i}=s,n=xt(i,"beforeFooter",this,e),o=xt(i,"footer",this,e),r=xt(i,"afterFooter",this,e);let a=[];return a=Qt(a,us(n)),a=Qt(a,us(o)),a=Qt(a,us(r)),a}_createItems(e){const s=this._active,i=this.chart.data,n=[],o=[],r=[];let a=[],l,d;for(l=0,d=s.length;l<d;++l)a.push(pS(this.chart,s[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Ee(a,u=>{const h=mu(e.callbacks,u);n.push(xt(h,"labelColor",this,u)),o.push(xt(h,"labelPointStyle",this,u)),r.push(xt(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,s){const i=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const a=bi[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=uu(this,i),d=Object.assign({},a,l),u=hu(this.chart,i,d),h=fu(i,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,i,n){const o=this.getCaretPosition(e,i,n);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,i){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:d,bottomLeft:u,bottomRight:h}=un(a),{x:f,y:p}=e,{width:g,height:b}=s;let x,w,k,E,A,P;return o==="center"?(A=p+b/2,n==="left"?(x=f,w=x-r,E=A+r,P=A-r):(x=f+g,w=x+r,E=A-r,P=A+r),k=x):(n==="left"?w=f+Math.max(l,u)+r:n==="right"?w=f+g-Math.max(d,h)-r:w=this.caretX,o==="top"?(E=p,A=E-r,x=w-r,k=w+r):(E=p+b,A=E+r,x=w+r,k=w-r),P=E),{x1:x,x2:w,x3:k,y1:E,y2:A,y3:P}}drawTitle(e,s,i){const n=this.title,o=n.length;let r,a,l;if(o){const d=Un(i.rtl,this.x,this.width);for(e.x=Po(this,i.titleAlign,i),s.textAlign=d.textAlign(i.titleAlign),s.textBaseline="middle",r=Ze(i.titleFont),a=i.titleSpacing,s.fillStyle=i.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(n[l],d.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,s,i,n,o){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:d}=o,u=Ze(o.bodyFont),h=Po(this,"left",o),f=n.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=s.y+p;if(o.usePointStyle){const b={radius:Math.min(d,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=n.leftForLtr(f,d)+d/2,w=g+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Va(e,b,x,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Va(e,b,x,w)}else{e.lineWidth=ve(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const b=n.leftForLtr(f,d),x=n.leftForLtr(n.xPlus(f,1),d-2),w=un(r.borderRadius);Object.values(w).some(k=>k!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Ji(e,{x:b,y:g,w:d,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Ji(e,{x,y:g+1,w:d-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(b,g,d,l),e.strokeRect(b,g,d,l),e.fillStyle=r.backgroundColor,e.fillRect(x,g+1,d-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,s,i){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:d,boxPadding:u}=i,h=Ze(i.bodyFont);let f=h.lineHeight,p=0;const g=Un(i.rtl,this.x,this.width),b=function(H){s.fillText(H,g.x(e.x+p),e.y+f/2),e.y+=f+o},x=g.textAlign(r);let w,k,E,A,P,N,F;for(s.textAlign=r,s.textBaseline="middle",s.font=h.string,e.x=Po(this,x,i),s.fillStyle=i.bodyColor,Ee(this.beforeBody,b),p=a&&x!=="right"?r==="center"?d/2+u:d+2+u:0,A=0,N=n.length;A<N;++A){for(w=n[A],k=this.labelTextColors[A],s.fillStyle=k,Ee(w.before,b),E=w.lines,a&&E.length&&(this._drawColorBox(s,e,A,g,i),f=Math.max(h.lineHeight,l)),P=0,F=E.length;P<F;++P)b(E[P]),f=h.lineHeight;Ee(w.after,b)}p=0,f=h.lineHeight,Ee(this.afterBody,b),e.y-=o}drawFooter(e,s,i){const n=this.footer,o=n.length;let r,a;if(o){const l=Un(i.rtl,this.x,this.width);for(e.x=Po(this,i.footerAlign,i),e.y+=i.footerMarginTop,s.textAlign=l.textAlign(i.footerAlign),s.textBaseline="middle",r=Ze(i.footerFont),s.fillStyle=i.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(n[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,s,i,n){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:d,height:u}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=un(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(a+h,l),r==="top"&&this.drawCaret(e,s,i,n),s.lineTo(a+d-f,l),s.quadraticCurveTo(a+d,l,a+d,l+f),r==="center"&&o==="right"&&this.drawCaret(e,s,i,n),s.lineTo(a+d,l+u-g),s.quadraticCurveTo(a+d,l+u,a+d-g,l+u),r==="bottom"&&this.drawCaret(e,s,i,n),s.lineTo(a+p,l+u),s.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(e,s,i,n),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const r=bi[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=uu(this,e),l=Object.assign({},r,this._size),d=hu(s,e,l),u=fu(e,l,d,s);(n._to!==u.x||o._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=ut(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,n,s),Wf(e,s.textDirection),o.y+=r.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),qf(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const i=this._active,n=e.map(({datasetIndex:a,index:l})=>{const d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[l],index:l}}),o=!or(i,n),r=this._positionChanged(n,s);(o||r)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,i=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(e,o,s,i),a=this._positionChanged(r,e),l=s||!or(r,o)||a;return l&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,i,n){const o=this.options;if(e.type==="mouseout")return[];if(!n)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(e,s){const{caretX:i,caretY:n,options:o}=this,r=bi[o.position].call(this,e,s);return r!==!1&&(i!==r.x||n!==r.y)}}z(Ga,"positioners",bi);var _S={id:"tooltip",_element:Ga,positioners:bi,afterInit(t,e,s){s&&(t.tooltip=new Ga({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wS=Object.freeze({__proto__:null,Colors:R2,Decimation:U2,Filler:iS,Legend:dS,SubTitle:fS,Title:hS,Tooltip:_S});const kS=(t,e,s,i)=>(typeof e=="string"?(s=t.push(e)-1,i.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function SS(t,e,s,i){const n=t.indexOf(e);if(n===-1)return kS(t,e,s,i);const o=t.lastIndexOf(e);return n!==o?s:n}const CS=(t,e)=>t===null?null:tt(Math.round(t),0,e);function gu(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ya extends yn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const i=this.getLabels();for(const{index:n,label:o}of s)i[n]===o&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ye(e))return null;const i=this.getLabels();return s=isFinite(s)&&i[s]===e?s:SS(i,e,pe(s,e),this._addedLabels),CS(s,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),s||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,s=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=e;r<=s;r++)n.push({value:r});return n}getLabelForValue(e){return gu.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}z(Ya,"id","category"),z(Ya,"defaults",{ticks:{callback:gu}});function MS(t,e){const s=[],{bounds:n,step:o,min:r,max:a,precision:l,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=o||1,g=u-1,{min:b,max:x}=e,w=!ye(r),k=!ye(a),E=!ye(d),A=(x-b)/(h+1);let P=ud((x-b)/g/p)*p,N,F,H,Z;if(P<1e-14&&!w&&!k)return[{value:b},{value:x}];Z=Math.ceil(x/P)-Math.floor(b/P),Z>g&&(P=ud(Z*P/g/p)*p),ye(l)||(N=Math.pow(10,l),P=Math.ceil(P*N)/N),n==="ticks"?(F=Math.floor(b/P)*P,H=Math.ceil(x/P)*P):(F=b,H=x),w&&k&&o&&x1((a-r)/o,P/1e3)?(Z=Math.round(Math.min((a-r)/P,u)),P=(a-r)/Z,F=r,H=a):E?(F=w?r:F,H=k?a:H,Z=d-1,P=(H-F)/Z):(Z=(H-F)/P,Ti(Z,Math.round(Z),P/1e3)?Z=Math.round(Z):Z=Math.ceil(Z));const oe=Math.max(hd(P),hd(F));N=Math.pow(10,ye(l)?oe:l),F=Math.round(F*N)/N,H=Math.round(H*N)/N;let le=0;for(w&&(f&&F!==r?(s.push({value:r}),F<r&&le++,Ti(Math.round((F+le*P)*N)/N,r,bu(r,A,t))&&le++):F<r&&le++);le<Z;++le){const he=Math.round((F+le*P)*N)/N;if(k&&he>a)break;s.push({value:he})}return k&&f&&H!==a?s.length&&Ti(s[s.length-1].value,a,bu(a,A,t))?s[s.length-1].value=a:s.push({value:a}):(!k||H===a)&&s.push({value:H}),s}function bu(t,e,{horizontal:s,minRotation:i}){const n=Bt(i),o=(s?Math.sin(n):Math.cos(n))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class hr extends yn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ye(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=l=>n=s?n:l,a=l=>o=i?o:l;if(e){const l=is(n),d=is(o);l<0&&d<0?a(0):l>0&&d>0&&r(0)}if(n===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(n-l)}this.min=n,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),s=s||11),s&&(n=Math.min(s,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=MS(n,o);return e.bounds==="ticks"&&Ef(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let s=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-s)/Math.max(e.length-1,1)/2;s-=n,i+=n}this._startValue=s,this._endValue=i,this._valueRange=i-s}getLabelForValue(e){return ao(e,this.chart.options.locale,this.options.ticks.format)}}class Ja extends hr{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=He(e)?e:0,this.max=He(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,i=Bt(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}z(Ja,"id","linear"),z(Ja,"defaults",{ticks:{callback:Dr.formatters.numeric}});const Qi=t=>Math.floor(Ns(t)),sn=(t,e)=>Math.pow(10,Qi(t)+e);function yu(t){return t/Math.pow(10,Qi(t))===1}function xu(t,e,s){const i=Math.pow(10,s),n=Math.floor(t/i);return Math.ceil(e/i)-n}function AS(t,e){const s=e-t;let i=Qi(s);for(;xu(t,e,i)>10;)i++;for(;xu(t,e,i)<10;)i--;return Math.min(i,Qi(t))}function ES(t,{min:e,max:s}){e=Et(t.min,e);const i=[],n=Qi(e);let o=AS(e,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=n>o?Math.pow(10,n):0,d=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((d-u)/Math.pow(10,o)),f=Et(t.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<s;)i.push({value:f,major:yu(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;const p=Et(t.max,f);return i.push({value:p,major:yu(p),significand:h}),i}class Xa extends yn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const i=hr.prototype.parse.apply(this,[e,s]);if(i===0){this._zero=!0;return}return He(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=He(e)?Math.max(0,e):null,this.max=He(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!He(this._userMin)&&(this.min=e===sn(this.min,0)?sn(this.min,-1):sn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let i=this.min,n=this.max;const o=a=>i=e?i:a,r=a=>n=s?n:a;i===n&&(i<=0?(o(1),r(10)):(o(sn(i,-1)),r(sn(n,1)))),i<=0&&o(sn(n,-1)),n<=0&&r(sn(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},i=ES(s,this);return e.bounds==="ticks"&&Ef(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":ao(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ns(e),this._valueRange=Ns(this.max)-Ns(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ns(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}z(Xa,"id","logarithmic"),z(Xa,"defaults",{ticks:{callback:Dr.formatters.logarithmic,major:{enabled:!0}}});function Qa(t){const e=t.ticks;if(e.display&&t.display){const s=ut(e.backdropPadding);return pe(e.font&&e.font.size,Ve.font.size)+s.height}return 0}function PS(t,e,s){return s=je(s)?s:[s],{w:F1(t,e.string,s),h:s.length*e.lineHeight}}function vu(t,e,s,i,n){return t===i||t===n?{start:e-s/2,end:e+s/2}:t<i||t>n?{start:e-s,end:e}:{start:e,end:e+s}}function TS(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),i=[],n=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?Ne/o:0;for(let l=0;l<o;l++){const d=r.setContext(t.getPointLabelContext(l));n[l]=d.padding;const u=t.getPointPosition(l,t.drawingArea+n[l],a),h=Ze(d.font),f=PS(t.ctx,h,t._pointLabels[l]);i[l]=f;const p=Pt(t.getIndexAngle(l)+a),g=Math.round(Dl(p)),b=vu(g,u.x,f.w,0,180),x=vu(g,u.y,f.h,90,270);IS(s,e,p,b,x)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=RS(t,i,n)}function IS(t,e,s,i,n){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),n.start<e.t?(l=(e.t-n.start)/r,t.t=Math.min(t.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function OS(t,e,s){const i=t.drawingArea,{extra:n,additionalAngle:o,padding:r,size:a}=s,l=t.getPointPosition(e,i+n+r,o),d=Math.round(Dl(Pt(l.angle+Ke))),u=jS(l.y,a.h,d),h=LS(d),f=FS(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function DS(t,e){if(!e)return!0;const{left:s,top:i,right:n,bottom:o}=t;return!(xs({x:s,y:i},e)||xs({x:s,y:o},e)||xs({x:n,y:i},e)||xs({x:n,y:o},e))}function RS(t,e,s){const i=[],n=t._pointLabels.length,o=t.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Qa(o)/2,additionalAngle:r?Ne/n:0};let d;for(let u=0;u<n;u++){l.padding=s[u],l.size=e[u];const h=OS(t,u,l);i.push(h),a==="auto"&&(h.visible=DS(h,d),h.visible&&(d=h))}return i}function LS(t){return t===0||t===180?"center":t<180?"left":"right"}function FS(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function jS(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function US(t,e,s){const{left:i,top:n,right:o,bottom:r}=s,{backdropColor:a}=e;if(!ye(a)){const l=un(e.borderRadius),d=ut(e.backdropPadding);t.fillStyle=a;const u=i-d.left,h=n-d.top,f=o-i+d.width,p=r-n+d.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),Ji(t,{x:u,y:h,w:f,h:p,radius:l}),t.fill()):t.fillRect(u,h,f,p)}}function NS(t,e){const{ctx:s,options:{pointLabels:i}}=t;for(let n=e-1;n>=0;n--){const o=t._pointLabelItems[n];if(!o.visible)continue;const r=i.setContext(t.getPointLabelContext(n));US(s,r,o);const a=Ze(r.font),{x:l,y:d,textAlign:u}=o;pn(s,t._pointLabels[n],l,d+a.lineHeight/2,a,{color:r.color,textAlign:u,textBaseline:"middle"})}}function xp(t,e,s,i){const{ctx:n}=t;if(s)n.arc(t.xCenter,t.yCenter,e,0,Ue);else{let o=t.getPointPosition(0,e);n.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=t.getPointPosition(r,e),n.lineTo(o.x,o.y)}}function BS(t,e,s,i,n){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!i||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(n.dash||[]),o.lineDashOffset=n.dashOffset,o.beginPath(),xp(t,s,r,i),o.closePath(),o.stroke(),o.restore())}function VS(t,e,s){return Ys(t,{label:s,index:e,type:"pointLabel"})}class yi extends hr{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ut(Qa(this.options)/2),s=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(s,i)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=He(e)&&!isNaN(e)?e:0,this.max=He(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Qa(this.options))}generateTickLabels(e){hr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,i)=>{const n=Le(this.options.pointLabels.callback,[s,i],this);return n||n===0?n:""}).filter((s,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?TS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,i,n){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,i,n))}getIndexAngle(e){const s=Ue/(this._pointLabels.length||1),i=this.options.startAngle||0;return Pt(e*s+Bt(i))}getDistanceFromCenterForValue(e){if(ye(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ye(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const i=s[e];return VS(this.getContext(),e,i)}}getPointPosition(e,s,i=0){const n=this.getIndexAngle(e)-Ke+i;return{x:Math.cos(n)*s+this.xCenter,y:Math.sin(n)*s+this.yCenter,angle:n}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:i,right:n,bottom:o}=this._pointLabelItems[e];return{left:s,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),xp(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:i,grid:n,border:o}=s,r=this._pointLabels.length;let a,l,d;if(s.pointLabels.display&&NS(this,r),n.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=n.setContext(f),g=o.setContext(f);BS(this,p,l,r,g)}}),i.display){for(e.save(),a=r-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,i=s.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!s.reverse)return;const d=i.setContext(this.getContext(l)),u=Ze(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=d.backdropColor;const h=ut(d.backdropPadding);e.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}pn(e,a.label,0,-o,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}z(yi,"id","radialLinear"),z(yi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Dr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),z(yi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),z(yi,"descriptors",{angleLines:{_fallback:"grid"}});const jr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wt=Object.keys(jr);function _u(t,e){return t-e}function wu(t,e){if(ye(e))return null;const s=t._adapter,{parser:i,round:n,isoWeekday:o}=t._parseOpts;let r=e;return typeof i=="function"&&(r=i(r)),He(r)||(r=typeof i=="string"?s.parse(r,i):s.parse(r)),r===null?null:(n&&(r=n==="week"&&(Wn(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,n)),+r)}function ku(t,e,s,i){const n=wt.length;for(let o=wt.indexOf(t);o<n-1;++o){const r=jr[wt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-e)/(a*r.size))<=i)return wt[o]}return wt[n-1]}function $S(t,e,s,i,n){for(let o=wt.length-1;o>=wt.indexOf(s);o--){const r=wt[o];if(jr[r].common&&t._adapter.diff(n,i,r)>=e-1)return r}return wt[s?wt.indexOf(s):0]}function HS(t){for(let e=wt.indexOf(t)+1,s=wt.length;e<s;++e)if(jr[wt[e]].common)return wt[e]}function Su(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:i,hi:n}=Rl(s,e),o=s[i]>=e?s[i]:s[n];t[o]=!0}}function zS(t,e,s,i){const n=t._adapter,o=+n.startOf(e[0].value,i),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+n.add(a,1,i))l=s[a],l>=0&&(e[l].major=!0);return e}function Cu(t,e,s){const i=[],n={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],n[a]=r,i.push({value:a,major:!1});return o===0||!s?i:zS(t,i,n,s)}class Zi extends yn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const i=e.time||(e.time={}),n=this._adapter=new Zw._date(e.adapters.date);n.init(s),Pi(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:wu(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,i=e.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(d){!r&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!a&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=He(n)&&!isNaN(n)?n:+s.startOf(Date.now(),i),o=He(o)&&!isNaN(o)?o:+s.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],i=e[e.length-1]),{min:s,max:i}}buildTicks(){const e=this.options,s=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,r=this.max,a=k1(n,o,r);return this._unit=s.unit||(i.autoSkip?ku(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):$S(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:HS(this._unit),this.initOffsets(n),e.reverse&&a.reverse(),Cu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,i=0,n,o;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?s=1-n:s=(this.getDecimalForValue(e[1])-n)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;s=tt(s,0,r),i=tt(i,0,r),this._offsets={start:s,end:i,factor:1/(s+1+i)}}_generate(){const e=this._adapter,s=this.min,i=this.max,n=this.options,o=n.time,r=o.unit||ku(o.minUnit,s,i,this._getLabelCapacity(s)),a=pe(n.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,d=Wn(l)||l===!0,u={};let h=s,f,p;if(d&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,d?"day":r),e.diff(i,s,r)>1e5*a)throw new Error(s+" and "+i+" are too far apart with stepSize of "+a+" "+r);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+e.add(f,a,r),p++)Su(u,f,g);return(f===i||n.bounds==="ticks"||p===1)&&Su(u,f,g),Object.keys(u).sort(_u).map(b=>+b)}getLabelForValue(e){const s=this._adapter,i=this.options.time;return i.tooltipFormat?s.format(e,i.tooltipFormat):s.format(e,i.displayFormats.datetime)}format(e,s){const n=this.options.time.displayFormats,o=this._unit,r=s||n[o];return this._adapter.format(e,r)}_tickFormatFunction(e,s,i,n){const o=this.options,r=o.ticks.callback;if(r)return Le(r,[e,s,i],this);const a=o.time.displayFormats,l=this._unit,d=this._majorUnit,u=l&&a[l],h=d&&a[d],f=i[s],p=d&&h&&f&&f.major;return this._adapter.format(e,n||(p?h:u))}generateTickLabels(e){let s,i,n;for(s=0,i=e.length;s<i;++s)n=e[s],n.label=this._tickFormatFunction(n.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+i)*s.factor)}getValueForPixel(e){const s=this._offsets,i=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,i=this.ctx.measureText(e).width,n=Bt(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(n),r=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*r,h:i*r+a*o}}_getLabelCapacity(e){const s=this.options.time,i=s.displayFormats,n=i[s.unit]||i.millisecond,o=this._tickFormatFunction(e,0,Cu(this,[e],this._majorUnit),n),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],s,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,i=n.length;s<i;++s)e=e.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,i;if(e.length)return e;const n=this.getLabels();for(s=0,i=n.length;s<i;++s)e.push(wu(this,n[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return If(e.sort(_u))}}z(Zi,"id","time"),z(Zi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function To(t,e,s){let i=0,n=t.length-1,o,r,a,l;s?(e>=t[i].pos&&e<=t[n].pos&&({lo:i,hi:n}=ys(t,"pos",e)),{pos:o,time:a}=t[i],{pos:r,time:l}=t[n]):(e>=t[i].time&&e<=t[n].time&&({lo:i,hi:n}=ys(t,"time",e)),{time:o,pos:a}=t[i],{time:r,pos:l}=t[n]);const d=r-o;return d?a+(l-a)*(e-o)/d:a}class Za extends Zi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=To(s,this.min),this._tableRange=To(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:i}=this,n=[],o=[];let r,a,l,d,u;for(r=0,a=e.length;r<a;++r)d=e[r],d>=s&&d<=i&&n.push(d);if(n.length<2)return[{time:s,pos:0},{time:i,pos:1}];for(r=0,a=n.length;r<a;++r)u=n[r+1],l=n[r-1],d=n[r],Math.round((u+l)/2)!==d&&o.push({time:d,pos:r/(a-1)});return o}_generate(){const e=this.min,s=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(s)||i.length===1)&&i.push(s),i.sort((n,o)=>n-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),i=this.getLabelTimestamps();return s.length&&i.length?e=this.normalize(s.concat(i)):e=s.length?s:i,e=this._cache.all=e,e}getDecimalForValue(e){return(To(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,i=this.getDecimalForPixel(e)/s.factor-s.end;return To(this._table,i*this._tableRange+this._minPos,!0)}}z(Za,"id","timeseries"),z(Za,"defaults",Zi.defaults);var WS=Object.freeze({__proto__:null,CategoryScale:Ya,LinearScale:Ja,LogarithmicScale:Xa,RadialLinearScale:yi,TimeScale:Zi,TimeSeriesScale:Za});const qS=[Qw,A2,wS,WS];ss.register(...qS);async function vp(){return await(await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")).json()}async function _p(t){return t?await(await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${t}/municipios?orderBy=nome`)).json():[]}async function wp(t){const e=t.replace(/\D/g,"");if(e.length!==8)return null;try{const s=await fetch(`https://viacep.com.br/ws/${e}/json/`);if(!s.ok)return null;const i=await s.json();return i.erro?null:{street:i.logradouro,complement:i.complemento,neighborhood:i.bairro,city:i.localidade,state:i.uf}}catch{return null}}const KS={name:"Dashboard",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs,WeekView:_f,AppointmentDetails:wf},data(){return{userId:null,stats:{week:0,month:0,clients:0,newClients:0},upcomingAppointments:[],clients:[],services:[],rooms:[],topClients:[],sidebarOpen:window.innerWidth>=768,showClientModal:!1,showAppointmentModal:!1,editingId:null,showDetailsModal:!1,weekChart:null,weekCounts:[0,0,0,0,0,0,0],states:[],cities:[],clientForm:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},appointmentForm:{date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"},selectedAppointment:null}},methods:{phoneMask:bn,cpfMask:Al,cepMask:yf,async fetchStatesList(){this.states=await vp()},async fetchCitiesList(){this.cities=await _p(this.clientForm.stateId)},async fillAddressByCep(){const t=await wp(this.clientForm.cep);if(!t)return;this.clientForm.street=t.street||"",this.clientForm.complement=t.complement||"",this.clientForm.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.clientForm.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(i=>i.nome.toLowerCase()===t.city.toLowerCase());s&&(this.clientForm.cityId=s.id)}},async openClientModal(){await this.fetchStatesList(),this.clientForm.stateId&&await this.fetchCitiesList(),this.showClientModal=!0},async fetchStats(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const i=new Date(t);i.setDate(t.getDate()+(6-e)),i.setHours(23,59,59,999);const n=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0],r=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);a.setHours(23,59,59,999);const l=r.toISOString().split("T")[0],d=a.toISOString().split("T")[0],{data:u}=await C.from("appointments").select().eq("user_id",this.userId).gte("date",n).lte("date",o).neq("status","canceled").neq("status","deleted");this.stats.week=u?u.length:0;const h=[0,0,0,0,0,0,0];u&&u.forEach(g=>{const b=new Date(g.date);h[b.getDay()]++}),this.weekCounts=h;const{data:f}=await C.from("appointments").select().eq("user_id",this.userId).gte("date",l).lte("date",d).neq("status","canceled").neq("status","deleted");this.stats.month=f?f.length:0;const{data:p}=await C.from("clients").select().eq("user_id",this.userId);p&&(this.stats.clients=p.length,this.clients=p,this.stats.newClients=p.filter(g=>{const b=new Date(g.created_at);return b>=r&&b<=a}).length),await this.fetchTopClients(),this.$nextTick(()=>this.renderWeekChart())},async fetchUpcomingAppointments(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const i=new Date(t);i.setDate(t.getDate()+(6-e)),i.setHours(23,59,59,999);const n=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0],{data:r}=await C.from("appointments").select().eq("user_id",this.userId).gte("date",n).lte("date",o).neq("status","canceled").neq("status","deleted").order("date",{ascending:!0}).order("time",{ascending:!0});this.upcomingAppointments=r||[]},async fetchTopClients(){const{data:t}=await C.from("appointments").select("client_id").eq("user_id",this.userId).neq("status","canceled").neq("status","deleted"),e={};t&&t.forEach(i=>{e[i.client_id]=(e[i.client_id]||0)+1});const s=Object.entries(e).sort((i,n)=>n[1]-i[1]).slice(0,5);this.topClients=s.map(([i,n])=>({id:i,count:n,name:this.getClientName(i)}))},renderWeekChart(){const t=this.$refs.weekChartCanvas.getContext("2d");this.weekChart&&this.weekChart.destroy(),this.weekChart=new ss(t,{type:"bar",data:{labels:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],datasets:[{label:"Agendamentos",data:this.weekCounts,backgroundColor:"#6366f1",borderColor:"#4f46e5",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#e5e7eb"}}}}})},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){if(!confirm(e))return;const{error:i}=await C.from("appointments").update({status:"deleted"}).eq("id",t);i?alert("Erro ao excluir agendamento: "+i.message):(this.upcomingAppointments=this.upcomingAppointments.filter(n=>n.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments())},async handleAddClient(){if(this.clientForm.email&&!Ft(this.clientForm.email)){alert("E-mail inválido");return}const{data:t,error:e}=await C.from("clients").insert({name:this.clientForm.name,email:this.clientForm.email,phone:this.clientForm.phone,birthdate:this.clientForm.birthdate,cpf:this.clientForm.cpf,cep:this.clientForm.cep,street:this.clientForm.street,number:this.clientForm.number,complement:this.clientForm.complement,neighborhood:this.clientForm.neighborhood,state_id:this.clientForm.stateId,city_id:this.clientForm.cityId,user_id:this.userId}).select().single();if(e)alert("Erro ao salvar cliente: "+e.message);else{this.clients.push(t),this.clientForm={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.stats.clients+=1;const s=new Date(t.created_at),i=new Date(s.getFullYear(),s.getMonth(),1),n=new Date(s.getFullYear(),s.getMonth()+1,0);n.setHours(23,59,59,999),s>=i&&s<=n&&(this.stats.newClients+=1),await this.fetchTopClients(),alert("Cliente cadastrado!")}},openAppointmentModal(t){t?(this.editingId=t.id,this.appointmentForm={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,duration:t.duration,description:t.description,status:t.status||"confirmed"}):(this.editingId=null,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"}),this.showAppointmentModal=!0},closeAppointmentModal(){this.showAppointmentModal=!1,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:"",status:"confirmed"},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openAppointmentModal(this.selectedAppointment),this.closeDetails())},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(!this.selectedAppointment||!confirm("Tem certeza que deseja desmarcar este atendimento?"))return;const{error:e}=await C.from("appointments").update({status:"canceled"}).eq("id",this.selectedAppointment.id);if(e){alert("Erro ao desmarcar atendimento: "+e.message);return}this.upcomingAppointments=this.upcomingAppointments.filter(s=>s.id!==this.selectedAppointment.id),this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments()},markNoShow(){this.selectedAppointment&&C.from("appointments").update({status:"no_show"}).eq("id",this.selectedAppointment.id).select().single().then(({data:t,error:e})=>{if(e){alert("Erro ao marcar falta: "+e.message);return}Object.assign(this.selectedAppointment,t);const s=this.upcomingAppointments.findIndex(i=>i.id===t.id);s!==-1&&(this.upcomingAppointments[s]=t),alert("Falta registrada para este atendimento.")})},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),i=`Olá ${e.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${qe(t.date)} - Hora: ${gt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${ir(e.phone)}?text=${encodeURIComponent(i)}`;window.open(o,"_blank")},async handleAddAppointment(){if(this.editingId){const{data:t,error:e}=await C.from("appointments").update({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,status:this.appointmentForm.status}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message);else{const s=this.upcomingAppointments.findIndex(i=>i.id===this.editingId);s!==-1&&(this.upcomingAppointments[s]=t),this.closeAppointmentModal(),await this.fetchStats(),await this.fetchUpcomingAppointments()}}else{const{data:t,error:e}=await C.from("appointments").insert({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,user_id:this.userId,status:this.appointmentForm.status}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{this.upcomingAppointments.push(t),this.closeAppointmentModal(),this.stats.week+=1,this.stats.month+=1;const s=new Date(t.date);this.weekCounts[s.getDay()]++,await this.fetchTopClients(),this.renderWeekChart()}}}},watch:{"appointmentForm.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&this.appointmentForm.duration===""&&(this.appointmentForm.duration=e.duration)},"clientForm.stateId"(){this.fetchCitiesList()},"clientForm.cep"(t){t.replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchStats(),await this.fetchUpcomingAppointments();const{data:e}=await C.from("services").select().eq("user_id",this.userId).eq("active",!0);e&&(this.services=e);const{data:s}=await C.from("rooms").select().eq("user_id",this.userId).eq("active",!0);s&&(this.rooms=s),await this.fetchStatesList()}},GS={class:"min-h-screen flex bg-gray-50 relative"},YS={class:"flex-1 p-4 md:p-8 space-y-8"},JS={key:0,class:"flex items-center mb-4"},XS={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},QS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},ZS={class:"text-2xl font-bold"},eC={class:"bg-white p-6 rounded-lg shadow-lg text-center"},tC={class:"text-2xl font-bold"},sC={class:"bg-white p-6 rounded-lg shadow-lg text-center"},nC={class:"text-2xl font-bold"},iC={class:"bg-white p-6 rounded-lg shadow-lg text-center"},oC={class:"text-2xl font-bold"},rC={class:"bg-white p-6 rounded-lg shadow-lg h-64"},aC={ref:"weekChartCanvas",class:"w-full h-full"},lC={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},cC={class:"md:col-span-8"},dC={class:"md:col-span-4 space-y-4"},uC={class:"bg-white p-4 rounded-lg shadow"},hC={class:"overflow-x-auto"},fC={class:"min-w-full text-left"},pC={class:"px-4 py-2"},mC={class:"px-4 py-2 text-right"},gC={key:0},bC=["value"],yC=["value"],xC={class:"flex justify-end space-x-2"},vC={class:"text-lg font-semibold mb-4"},_C=["value"],wC=["value"],kC={class:"flex justify-end space-x-2"},SC={class:"mt-4"},CC={class:"flex flex-wrap justify-start gap-2"},MC={class:"mt-4"},AC={class:"flex flex-wrap justify-start gap-2"};function EC(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("WeekView"),d=j("Modal"),u=j("AppointmentDetails");return m(),y("div",GS,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=h=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",YS,[n.sidebarOpen?I("",!0):(m(),y("div",JS,[c("button",{onClick:e[1]||(e[1]=h=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[35]||(e[35]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Dashboard"}),c("section",XS,[c("div",QS,[e[36]||(e[36]=c("p",{class:"text-sm text-gray-500"},"Agendamentos na semana",-1)),c("p",ZS,S(n.stats.week),1)]),c("div",eC,[e[37]||(e[37]=c("p",{class:"text-sm text-gray-500"},"Agendamentos no mês",-1)),c("p",tC,S(n.stats.month),1)]),c("div",sC,[e[38]||(e[38]=c("p",{class:"text-sm text-gray-500"},"Clientes cadastrados",-1)),c("p",nC,S(n.stats.clients),1)]),c("div",iC,[e[39]||(e[39]=c("p",{class:"text-sm text-gray-500"},"Novos clientes no mês",-1)),c("p",oC,S(n.stats.newClients),1)])]),c("section",rC,[e[40]||(e[40]=c("h3",{class:"text-lg font-medium mb-4"},"Agendamentos na semana",-1)),c("canvas",aC,null,512)]),c("section",lC,[c("div",cC,[e[41]||(e[41]=c("div",{class:"flex items-center justify-between mb-4"},[c("h3",{class:"text-lg font-medium"},"Agenda da Semana")],-1)),D(l,{appointments:n.upcomingAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])]),c("div",dC,[c("div",uC,[e[44]||(e[44]=c("h4",{class:"font-medium mb-2"},"Clientes com mais agendamentos",-1)),c("div",hC,[c("table",fC,[e[43]||(e[43]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),c("th",{class:"px-4 py-2 font-medium text-gray-700 text-right"},"Agendamentos")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.topClients,h=>(m(),y("tr",{key:h.id,class:"border-b last:border-b-0"},[c("td",pC,S(h.name),1),c("td",mC,S(h.count),1)]))),128)),n.topClients.length===0?(m(),y("tr",gC,e[42]||(e[42]=[c("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):I("",!0)])])])])])]),n.showClientModal?(m(),ge(d,{key:1,onClose:e[19]||(e[19]=h=>n.showClientModal=!1)},{default:X(()=>[e[60]||(e[60]=c("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Cliente",-1)),c("form",{onSubmit:e[18]||(e[18]=ze((...h)=>o.handleAddClient&&o.handleAddClient(...h),["prevent"])),class:"space-y-4"},[c("div",null,[e[45]||(e[45]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=h=>n.clientForm.name=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.name]])]),c("div",null,[e[46]||(e[46]=c("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=h=>n.clientForm.cpf=h),onInput:e[4]||(e[4]=h=>n.clientForm.cpf=o.cpfMask(n.clientForm.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.clientForm.cpf]])]),c("div",null,[e[47]||(e[47]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=h=>n.clientForm.birthdate=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.birthdate]])]),c("div",null,[e[48]||(e[48]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[6]||(e[6]=h=>n.clientForm.email=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.email]])]),c("div",null,[e[49]||(e[49]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=h=>n.clientForm.phone=h),onInput:e[8]||(e[8]=h=>n.clientForm.phone=o.phoneMask(n.clientForm.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.clientForm.phone]])]),c("div",null,[e[50]||(e[50]=c("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=h=>n.clientForm.cep=h),onInput:e[10]||(e[10]=h=>n.clientForm.cep=o.cepMask(n.clientForm.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.clientForm.cep]])]),c("div",null,[e[51]||(e[51]=c("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=h=>n.clientForm.street=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.street]])]),c("div",null,[e[52]||(e[52]=c("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=h=>n.clientForm.number=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.number]])]),c("div",null,[e[53]||(e[53]=c("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=h=>n.clientForm.complement=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.complement]])]),c("div",null,[e[54]||(e[54]=c("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=h=>n.clientForm.neighborhood=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.clientForm.neighborhood]])]),c("div",null,[e[56]||(e[56]=c("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(c("select",{"onUpdate:modelValue":e[15]||(e[15]=h=>n.clientForm.stateId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[55]||(e[55]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.states,h=>(m(),y("option",{key:h.id,value:h.id},S(h.nome)+" ("+S(h.sigla)+")",9,bC))),128))],512),[[be,n.clientForm.stateId]])]),c("div",null,[e[58]||(e[58]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(c("select",{"onUpdate:modelValue":e[16]||(e[16]=h=>n.clientForm.cityId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[57]||(e[57]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.cities,h=>(m(),y("option",{key:h.id,value:h.id},S(h.nome),9,yC))),128))],512),[[be,n.clientForm.cityId]])]),c("div",xC,[c("button",{type:"button",onClick:e[17]||(e[17]=h=>n.showClientModal=!1),class:"px-4 py-2 rounded border"},"Cancelar"),e[59]||(e[59]=c("button",{type:"submit",class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700"},"Salvar",-1))])],32)]),_:1,__:[60]})):I("",!0),n.showAppointmentModal?(m(),ge(d,{key:2,onClose:o.closeAppointmentModal},{default:X(()=>[c("h3",vC,S(n.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),c("form",{onSubmit:e[27]||(e[27]=ze((...h)=>o.handleAddAppointment&&o.handleAddAppointment(...h),["prevent"])),class:"space-y-4"},[c("div",null,[e[61]||(e[61]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[20]||(e[20]=h=>n.appointmentForm.date=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.appointmentForm.date]])]),c("div",null,[e[62]||(e[62]=c("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":e[21]||(e[21]=h=>n.appointmentForm.time=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.appointmentForm.time]])]),c("div",null,[e[64]||(e[64]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(c("select",{"onUpdate:modelValue":e[22]||(e[22]=h=>n.appointmentForm.clientId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[63]||(e[63]=c("option",{disabled:"",value:""},"Selecione um cliente",-1)),(m(!0),y($,null,Q(n.clients,h=>(m(),y("option",{key:h.id,value:h.id},S(h.name),9,_C))),128))],512),[[be,n.appointmentForm.clientId]])]),c("div",null,[e[66]||(e[66]=c("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(c("select",{"onUpdate:modelValue":e[23]||(e[23]=h=>n.appointmentForm.serviceId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[65]||(e[65]=c("option",{disabled:"",value:""},"Selecione um serviço",-1)),(m(!0),y($,null,Q(n.services,h=>(m(),y("option",{key:h.id,value:h.id},S(h.name),9,wC))),128))],512),[[be,n.appointmentForm.serviceId]])]),c("div",null,[e[67]||(e[67]=c("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[24]||(e[24]=h=>n.appointmentForm.duration=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.appointmentForm.duration]])]),c("div",null,[e[68]||(e[68]=c("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(c("textarea",{"onUpdate:modelValue":e[25]||(e[25]=h=>n.appointmentForm.description=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.appointmentForm.description]])]),c("div",kC,[c("button",{type:"button",onClick:e[26]||(e[26]=(...h)=>o.closeAppointmentModal&&o.closeAppointmentModal(...h)),class:"px-4 py-2 rounded border"},"Cancelar"),e[69]||(e[69]=c("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):I("",!0),n.showDetailsModal?(m(),ge(d,{key:3,onClose:o.closeDetails},{default:X(()=>[D(u,{appointment:n.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:X(()=>[c("div",SC,[e[70]||(e[70]=c("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),c("div",CC,[c("button",{onClick:e[28]||(e[28]=(...h)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...h)),class:"btn btn-success"},"Enviar confirmação"),c("button",{onClick:e[29]||(e[29]=(...h)=>o.cancelAppointment&&o.cancelAppointment(...h)),class:"btn btn-warning"},"Desmarcou"),c("button",{onClick:e[30]||(e[30]=(...h)=>o.markNoShow&&o.markNoShow(...h)),class:"btn btn-secondary"},"Faltou"),c("button",{onClick:e[31]||(e[31]=(...h)=>o.startAppointment&&o.startAppointment(...h)),class:"btn btn-primary"},"Iniciar atendimento")])]),c("div",MC,[e[71]||(e[71]=c("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),c("div",AC,[c("button",{onClick:e[32]||(e[32]=(...h)=>o.editFromDetails&&o.editFromDetails(...h)),class:"btn"},"Editar"),c("button",{onClick:e[33]||(e[33]=h=>o.handleDeleteAppointment(n.selectedAppointment.id)),class:"btn btn-danger"},"Excluir"),c("button",{onClick:e[34]||(e[34]=(...h)=>o.closeDetails&&o.closeDetails(...h)),class:"px-4 py-2 rounded border"},"Fechar")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):I("",!0)])])}const PC=ae(KS,[["render",EC]]),TC={name:"Configuracao",components:{Sidebar:Je,HeaderUser:Xe},data(){return{userId:null,companyId:null,sidebarOpen:window.innerWidth>=768,slug:"",activeTab:"perfil",form:{businessName:"",companyName:"",description:"",areaAtuacao:"",phone:"",whatsapp:"",email:"",address:"",instagram:"",facebook:"",youtube:"",x:"",imageUrl:"",pixKey:""},agenda:{cancelLimitHours:0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Terça"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sábado"}]}},methods:{phoneMask:bn,async fetchCompanyName(){if(!this.companyId){const{data:{user:t}}=await C.auth.getUser();if(t){const{data:e}=await C.from("profiles").select("company_id").eq("id",t.id).single();e&&(this.companyId=e.company_id)}}if(this.companyId){const{data:t}=await C.from("companies").select("name").eq("id",this.companyId).single();t&&(this.form.companyName=t.name)}},updateSlug(){this.slug=this.form.businessName.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},async handleSave(){if(this.form.email&&!Ft(this.form.email)){alert("E-mail inválido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.slug,description:this.form.description,area_atuacao:this.form.areaAtuacao,phone:this.form.phone,whatsapp:this.form.whatsapp,email:this.form.email,address:this.form.address,instagram:this.form.instagram,facebook:this.form.facebook,youtube:this.form.youtube,x:this.form.x,image_url:this.form.imageUrl,pix_key:this.form.pixKey},{error:e}=await C.from("profiles").upsert(t,{onConflict:["id"]});!e&&this.companyId&&(await C.from("companies").update({name:this.form.companyName}).eq("id",this.companyId),await this.fetchCompanyName()),alert(e?"Erro ao salvar dados: "+e.message:"Dados salvos com sucesso!")},async handleImageUpload(t){const e=t.target.files[0];if(!e)return;const s=e.name.split(".").pop(),i=`${this.userId}.${s}`,{error:n}=await C.storage.from("profile-images").upload(i,e,{upsert:!0});if(n){alert("Erro ao enviar imagem: "+n.message);return}const{data:{publicUrl:o}}=C.storage.from("profile-images").getPublicUrl(i);this.form.imageUrl=o},async handleSaveAgenda(){const t={start:null,end:null,days:[]};for(const[i,n]of Object.entries(this.agenda.dailySchedule))n.enabled&&n.start&&n.end&&(t.days.push(i),(!t.start||n.start<t.start)&&(t.start=n.start),(!t.end||n.end>t.end)&&(t.end=n.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule,cancel_limit_hours:this.agenda.cancelLimitHours},{error:s}=await C.from("profiles").upsert(e,{onConflict:["id"]});alert(s?"Erro ao salvar dados: "+s.message:"Dados salvos com sucesso!")}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e,error:s}=await C.from("profiles").select().eq("id",this.userId).single();if(e){if(this.companyId=e.company_id||null,this.form={businessName:e.business_name||"",companyName:"",description:e.description||"",areaAtuacao:e.area_atuacao||"",phone:e.phone||"",whatsapp:e.whatsapp||"",email:e.email||"",address:e.address||"",instagram:e.instagram||"",facebook:e.facebook||"",youtube:e.youtube||"",x:e.x||"",imageUrl:e.image_url||"",pixKey:e.pix_key||""},await this.fetchCompanyName(),this.agenda={cancelLimitHours:e.cancel_limit_hours||0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},e.daily_schedule)Object.assign(this.agenda.dailySchedule,typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule);else{const i=e.week_days?e.week_days.split(","):[];for(const n of i)this.agenda.dailySchedule[n]={enabled:!0,start:e.start_time||"",end:e.end_time||""}}this.updateSlug()}}},IC={class:"min-h-screen flex bg-gray-100 relative"},OC={class:"flex-1 p-8"},DC={key:0,class:"flex items-center mb-4"},RC={class:"mb-6 space-x-2"},LC={class:"text-sm text-gray-500 mt-1"},FC={class:"font-mono"},jC=["href"],UC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},NC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},BC={key:0,class:"mt-2"},VC=["src"],$C={class:"mt-1 space-y-2"},HC=["onUpdate:modelValue"],zC={class:"w-20"},WC=["onUpdate:modelValue"],qC=["onUpdate:modelValue"];function KC(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("router-link");return m(),y("div",IC,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",OC,[n.sidebarOpen?I("",!0):(m(),y("div",DC,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[26]||(e[26]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Configurações"}),D(l,{to:"/onboarding",class:"text-blue-600 underline mb-4 inline-block"},{default:X(()=>e[27]||(e[27]=[se("Refazer Onboarding")])),_:1,__:[27]}),c("nav",RC,[c("button",{onClick:e[2]||(e[2]=d=>n.activeTab="perfil"),class:$e([n.activeTab==="perfil"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Perfil",2),c("button",{onClick:e[3]||(e[3]=d=>n.activeTab="agenda"),class:$e([n.activeTab==="agenda"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2"])},"Agenda",2),c("button",{onClick:e[4]||(e[4]=d=>n.activeTab="financeiro"),class:$e([n.activeTab==="financeiro"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Financeiro",2)]),n.activeTab==="perfil"?(m(),y("form",{key:1,onSubmit:e[21]||(e[21]=ze((...d)=>o.handleSave&&o.handleSave(...d),["prevent"])),class:"space-y-6 max-w-3xl"},[c("div",null,[e[29]||(e[29]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=d=>n.form.businessName=d),onInput:e[6]||(e[6]=(...d)=>o.updateSlug&&o.updateSlug(...d)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.businessName]]),c("p",LC,[e[28]||(e[28]=se(" Seu link público: ")),c("span",FC,"#/"+S(n.slug),1),c("a",{href:"#/"+n.slug,target:"_blank",class:"text-blue-600 hover:underline ml-2"},"Abrir página do cliente",8,jC)])]),c("div",null,[e[30]||(e[30]=c("label",{class:"block text-sm font-medium text-gray-700",for:"companyName"},"Nome da Empresa",-1)),M(c("input",{id:"companyName",type:"text","onUpdate:modelValue":e[7]||(e[7]=d=>n.form.companyName=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.companyName]])]),c("div",null,[e[31]||(e[31]=c("label",{class:"block text-sm font-medium text-gray-700"},"Descrição do Estabelecimento",-1)),M(c("textarea",{"onUpdate:modelValue":e[8]||(e[8]=d=>n.form.description=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.description]])]),c("div",null,[e[33]||(e[33]=c("label",{class:"block text-sm font-medium text-gray-700"},"Área de Atuação",-1)),M(c("select",{"onUpdate:modelValue":e[9]||(e[9]=d=>n.form.areaAtuacao=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[32]||(e[32]=[Ws('<option disabled value="">Selecione</option><option>Psicologia</option><option>Terapias Gerais</option><option>Psicopedagogia</option><option>Medicina</option><option>Coaching</option><option>Fonoaudiologia</option><option>Fisioterapia</option><option>Nutrição</option><option>Terapia Ocupacional</option>',10)]),512),[[be,n.form.areaAtuacao]])]),c("div",UC,[c("div",null,[e[34]||(e[34]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone de Contato",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=d=>n.form.phone=d),onInput:e[11]||(e[11]=d=>n.form.phone=o.phoneMask(n.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.phone]])]),c("div",null,[e[35]||(e[35]=c("label",{class:"block text-sm font-medium text-gray-700"},"WhatsApp",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=d=>n.form.whatsapp=d),onInput:e[13]||(e[13]=d=>n.form.whatsapp=o.phoneMask(n.form.whatsapp)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.whatsapp]])]),c("div",null,[e[36]||(e[36]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[14]||(e[14]=d=>n.form.email=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.email]])]),c("div",null,[e[37]||(e[37]=c("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=d=>n.form.address=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.address]])])]),c("div",NC,[c("div",null,[e[38]||(e[38]=c("label",{class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=d=>n.form.instagram=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.instagram]])]),c("div",null,[e[39]||(e[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=d=>n.form.facebook=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.facebook]])]),c("div",null,[e[40]||(e[40]=c("label",{class:"block text-sm font-medium text-gray-700"},"YouTube",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=d=>n.form.youtube=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.youtube]])]),c("div",null,[e[41]||(e[41]=c("label",{class:"block text-sm font-medium text-gray-700"},"X (Twitter)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=d=>n.form.x=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.x]])])]),c("div",null,[e[42]||(e[42]=c("label",{class:"block text-sm font-medium text-gray-700"},"Imagem do Estabelecimento",-1)),c("input",{type:"file",accept:"image/*",onChange:e[20]||(e[20]=(...d)=>o.handleImageUpload&&o.handleImageUpload(...d)),class:"mt-1"},null,32),n.form.imageUrl?(m(),y("div",BC,[c("img",{src:n.form.imageUrl,alt:"Imagem do estabelecimento",class:"h-24 rounded-md"},null,8,VC)])):I("",!0)]),e[43]||(e[43]=c("div",null,[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):I("",!0),n.activeTab==="agenda"?(m(),y("form",{key:2,onSubmit:e[23]||(e[23]=ze((...d)=>o.handleSaveAgenda&&o.handleSaveAgenda(...d),["prevent"])),class:"space-y-6 max-w-3xl"},[c("div",null,[e[45]||(e[45]=c("label",{class:"block text-sm font-medium text-gray-700"},"Horários por dia",-1)),c("div",$C,[(m(!0),y($,null,Q(n.daysOfWeekOptions,d=>(m(),y("div",{key:d.value,class:"flex items-center space-x-2"},[M(c("input",{type:"checkbox","onUpdate:modelValue":u=>n.agenda.dailySchedule[d.value].enabled=u},null,8,HC),[[Sr,n.agenda.dailySchedule[d.value].enabled]]),c("span",zC,S(d.label),1),M(c("input",{type:"time",step:"60","onUpdate:modelValue":u=>n.agenda.dailySchedule[d.value].start=u,class:"border rounded-md px-2 py-1"},null,8,WC),[[O,n.agenda.dailySchedule[d.value].start]]),e[44]||(e[44]=c("span",null,"-",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":u=>n.agenda.dailySchedule[d.value].end=u,class:"border rounded-md px-2 py-1"},null,8,qC),[[O,n.agenda.dailySchedule[d.value].end]])]))),128))])]),c("div",null,[e[46]||(e[46]=c("label",{class:"block text-sm font-medium text-gray-700"},"Horas para cancelamento sem custo",-1)),M(c("input",{type:"number",min:"0","onUpdate:modelValue":e[22]||(e[22]=d=>n.agenda.cancelLimitHours=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.agenda.cancelLimitHours,void 0,{number:!0}]])]),e[47]||(e[47]=c("div",null,[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):I("",!0),n.activeTab==="financeiro"?(m(),y("form",{key:3,onSubmit:e[25]||(e[25]=ze((...d)=>o.handleSave&&o.handleSave(...d),["prevent"])),class:"space-y-6 max-w-3xl"},[c("div",null,[e[48]||(e[48]=c("label",{class:"block text-sm font-medium text-gray-700"},"Chave Pix",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[24]||(e[24]=d=>n.form.pixKey=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.pixKey]])]),e[49]||(e[49]=c("div",null,[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):I("",!0)])])}const GC=ae(TC,[["render",KC]]),YC={name:"Empresa",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,companyId:null,form:{name:"",phone:"",email:"",address:""}}},methods:{phoneMask:bn,async fetchUserCompanyId(){const{data:{user:t}}=await C.auth.getUser();if(t){const{data:e}=await C.from("profiles").select("company_id").eq("id",t.id).single();e&&(this.companyId=e.company_id)}},async fetchCompany(){if(!this.companyId)return;const{data:t,error:e}=await C.from("companies").select("name, phone, email, address").eq("id",this.companyId).single();console.log("fetchCompany - company",t,e),t&&(this.form={name:t.name||"",phone:t.phone||"",email:t.email||"",address:t.address||""})},async handleSave(){if(this.form.email&&!Ft(this.form.email)){alert("E-mail inválido");return}if(!this.companyId){const e=crypto.randomUUID(),{error:s}=await C.from("companies").insert({id:e,name:this.form.name,phone:this.form.phone,email:this.form.email,address:this.form.address});if(s){alert("Erro ao salvar dados: "+s.message);return}this.companyId=e;const{data:{user:i}}=await C.auth.getUser();i&&await C.from("profiles").update({company_id:this.companyId}).eq("id",i.id),alert("Dados salvos com sucesso!");return}const{error:t}=await C.from("companies").update({name:this.form.name,phone:this.form.phone,email:this.form.email,address:this.form.address}).eq("id",this.companyId);alert(t?"Erro ao salvar dados: "+t.message:"Dados salvos com sucesso!")}},async mounted(){this.companyId=this.$route.params.id||null,this.companyId||await this.fetchUserCompanyId(),await this.fetchCompany()}},JC={class:"min-h-screen flex bg-gray-100 relative"},XC={class:"flex-1 p-8"},QC={key:0,class:"flex items-center mb-4"};function ZC(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",JC,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",XC,[n.sidebarOpen?I("",!0):(m(),y("div",QC,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[8]||(e[8]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Empresa"}),c("form",{onSubmit:e[7]||(e[7]=ze((...l)=>o.handleSave&&o.handleSave(...l),["prevent"])),class:"bg-white p-4 rounded shadow space-y-4 max-w-xl"},[c("div",null,[e[9]||(e[9]=c("label",{for:"companyName",class:"block text-sm font-medium text-gray-700"},"Nome da Empresa",-1)),M(c("input",{id:"companyName","onUpdate:modelValue":e[2]||(e[2]=l=>n.form.name=l),type:"text",class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.name]])]),c("div",null,[e[10]||(e[10]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(c("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.form.phone=l),onInput:e[4]||(e[4]=l=>n.form.phone=o.phoneMask(n.form.phone)),type:"text",class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.phone]])]),c("div",null,[e[11]||(e[11]=c("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{id:"email","onUpdate:modelValue":e[5]||(e[5]=l=>n.form.email=l),type:"email",class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.email]])]),c("div",null,[e[12]||(e[12]=c("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(c("input",{id:"address","onUpdate:modelValue":e[6]||(e[6]=l=>n.form.address=l),type:"text",class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.address]])]),e[13]||(e[13]=c("div",{class:"text-right"},[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)])])}const eM=ae(YC,[["render",ZC]]);async function Ri(t,e=!0){const{error:s}=await C.functions.invoke("send-appointment-email",{body:t});s?console.error("Erro ao enviar email de agendamento:",s.message):e&&alert("E-mail enviado com sucesso!")}async function As(t){const{data:e}=await C.from("profiles").select("company_id").eq("id",t).single();return e?e.company_id:null}async function Es(t){if(!t)return[];const{data:e}=await C.from("profiles").select("id").eq("company_id",t);return e?e.map(s=>s.id):[]}const tM={name:"Clientes",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{userId:null,showModal:!1,modalMode:"new",editingId:null,search:"",form:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},states:[],cities:[],clients:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10,activeTab:"cadastro",originalForm:{},clientAppointments:[],history:[],services:[],rooms:[],currentClient:null}},methods:{phoneMask:bn,digitsOnly:ir,cpfMask:Al,cepMask:yf,formatDateBR:qe,addHoursToTime:gt,async fetchServicesList(){const{data:t}=await C.from("services").select().eq("user_id",this.userId).eq("active",!0);t&&(this.services=t)},async fetchRoomsList(){const{data:t}=await C.from("rooms").select().eq("user_id",this.userId).eq("active",!0);t&&(this.rooms=t)},async fetchStatesList(){this.states=await vp()},async fetchCitiesList(){this.cities=await _p(this.form.stateId)},async fillAddressByCep(){const t=await wp(this.form.cep);if(!t)return;this.form.street=t.street||"",this.form.complement=t.complement||"",this.form.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.form.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(i=>i.nome.toLowerCase()===t.city.toLowerCase());s&&(this.form.cityId=s.id)}},async openModal(t,e="new"){this.modalMode=e,this.activeTab="cadastro",this.currentClient=t||null,t?(this.editingId=t.id,this.form={name:t.name,email:t.email,phone:t.phone,birthdate:t.birthdate,cpf:t.cpf,cep:t.cep,street:t.street,number:t.number,complement:t.complement,neighborhood:t.neighborhood,stateId:t.state_id,cityId:t.city_id,from_site:t.from_site,pending_update:t.pending_update,active:t.active},this.originalForm={...this.form},await this.fetchClientAppointments(),await this.fetchClientHistory()):(this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},this.originalForm={...this.form},this.clientAppointments=[],this.history=[]),await this.fetchStatesList(),this.form.stateId&&await this.fetchCitiesList(),await this.fetchServicesList(),await this.fetchRoomsList(),this.showModal=!0},closeModal(){this.showModal=!1,this.modalMode="new",this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1,active:!0},this.activeTab="cadastro",this.clientAppointments=[],this.history=[],this.currentClient=null},handleClose(){this.modalMode==="view"?this.closeModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeModal()},whatsappLink(t){return`https://wa.me/${ir(t)}`},async handleSaveClient(){if(this.form.email&&!Ft(this.form.email)){alert("E-mail inválido");return}let t,e;if(this.editingId?({data:t,error:e}=await C.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,pending_update:!1,active:this.form.active}).eq("id",this.editingId).select().single(),this.originalForm={...t}):({data:t,error:e}=await C.from("clients").insert({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,user_id:this.userId,from_site:this.form.from_site,pending_update:this.form.pending_update,active:this.form.active}).select().single(),this.originalForm={...t}),e)alert("Erro ao salvar cliente: "+e.message);else{if(this.editingId){const s=this.clients.findIndex(i=>i.id===this.editingId);s!==-1&&(this.clients[s]=t)}else this.clients.push(t);this.closeModal(),this.currentClient=null}},async handleDeleteClient(t){if(!confirm("Tem certeza que deseja excluir este cliente?"))return;const{data:s}=await C.from("appointments").select("id").eq("client_id",t).limit(1);if(s&&s.length){const{error:n}=await C.from("clients").update({active:!1}).eq("id",t);if(n)alert("Erro ao inativar cliente: "+n.message);else{const o=this.clients.findIndex(r=>r.id===t);o!==-1&&(this.clients[o].active=!1),alert("Cliente inativado.")}return}const{error:i}=await C.from("clients").delete().eq("id",t);i?alert("Erro ao excluir cliente: "+i.message):this.clients=this.clients.filter(n=>n.id!==t)},enableEdit(){this.modalMode="edit"},changeTab(t){if(t!=="cadastro"&&this.modalMode!=="view"){if(!confirm("Dados não salvos serão perdidos. Deseja continuar?"))return;this.modalMode="view",this.form={...this.originalForm}}this.activeTab=t},async fetchClientAppointments(){if(!this.editingId){this.clientAppointments=[];return}const{data:t}=await C.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.editingId).order("date",{ascending:!0}).order("time",{ascending:!0});this.clientAppointments=t||[]},async fetchClientHistory(){if(!this.editingId){this.history=[];return}if(!this.clientAppointments.length){this.history=[];return}const t=this.clientAppointments.map(s=>s.id),{data:e}=await C.from("appointment_notes").select().in("appointment_id",t).order("created_at",{ascending:!1});this.history=(e||[]).map(s=>({...s,attachments:s.attachments||[],appointment:this.clientAppointments.find(i=>i.id===s.appointment_id)||{}}))},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},async sendConfirmationEmail(t){const e=this.clients.find(n=>n.id===t.client_id),s=this.services.find(n=>n.id===t.service_id),i=this.rooms.find(n=>n.id===t.room_id);await Ri({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Olá ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${qe(t.date)} às ${gt(t.time)}.
${i?`Sala: ${i.name}
`:""}${i!=null&&i.google_meet_link?`Link: ${i.google_meet_link}
`:""}
E-mail enviado automaticamente.`})},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{isReadOnly(){return this.modalMode==="view"},filteredClients(){const t=this.search.toLowerCase();return this.clients.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t))},paginatedClients(){const t=(this.page-1)*this.pageSize;return this.filteredClients.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredClients.length/this.pageSize))}},watch:{search(){this.page=1},"form.stateId"(){this.fetchCitiesList()},"form.cep"(t){(t||"").toString().replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId),s=e?await Es(e):[this.userId],{data:i}=await C.from("clients").select().in("user_id",s);i&&(this.clients=i),await this.fetchStatesList(),await this.fetchServicesList(),await this.fetchRoomsList()}},sM={class:"min-h-screen flex bg-gray-100 relative"},nM={class:"flex-1 p-4 md:p-8 space-y-6"},iM={key:0,class:"flex items-center mb-4"},oM={class:"bg-white p-4 rounded-lg shadow"},rM={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},aM={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},lM={class:"overflow-x-auto"},cM={class:"min-w-full text-left"},dM={class:"px-4 py-2"},uM={key:0,class:"inline-flex items-center text-red-600 text-xs ml-2"},hM={class:"px-4 py-2"},fM={class:"px-4 py-2"},pM={class:"px-4 py-2 text-right space-x-2"},mM=["href"],gM=["onClick"],bM=["onClick"],yM={key:0},xM={class:"mt-4 flex justify-between items-center"},vM=["disabled"],_M={class:"text-sm"},wM=["disabled"],kM={class:"text-lg font-semibold mb-4"},SM={key:0,class:"flex items-center text-red-600 text-sm mb-4"},CM={key:1,class:"border-b mb-4"},MM={class:"flex space-x-4"},AM=["disabled"],EM=["disabled"],PM=["disabled"],TM=["disabled"],IM=["disabled"],OM=["disabled"],DM=["disabled"],RM=["disabled"],LM=["disabled"],FM=["disabled"],jM=["disabled"],UM=["value"],NM=["disabled"],BM=["value"],VM=["disabled"],$M={class:"flex justify-end space-x-2 md:col-span-2"},HM=["disabled"],zM={class:"overflow-x-auto"},WM={class:"min-w-full text-left border-separate border-spacing-0"},qM={key:0,class:"block text-xs text-red-600"},KM=["onClick"],GM={key:0},YM={class:"space-y-4"},JM={class:"text-sm text-gray-600 mb-1"},XM={class:"mb-2 whitespace-pre-line"},QM={key:0,class:"space-x-2 mb-2"},ZM=["href"],e4={class:"text-right"},t4={key:0,class:"text-center text-gray-500"};function s4(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("router-link"),d=j("Modal");return m(),y("div",sM,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=u=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",nM,[n.sidebarOpen?I("",!0):(m(),y("div",iM,[c("button",{onClick:e[1]||(e[1]=u=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[28]||(e[28]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Clientes"}),c("section",oM,[c("div",rM,[e[29]||(e[29]=c("h3",{class:"text-lg font-medium"},"Clientes cadastrados",-1)),c("div",aM,[M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>n.search=u),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[O,n.search]]),c("button",{onClick:e[3]||(e[3]=(...u)=>o.openModal&&o.openModal(...u)),class:"btn w-full sm:w-auto"}," Novo Cliente ")])]),c("div",lM,[c("table",cM,[e[32]||(e[32]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Telefone"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.paginatedClients,u=>(m(),y("tr",{key:u.id,class:"border-b last:border-b-0"},[c("td",dM,[c("span",null,S(u.name),1),u.from_site&&u.pending_update?(m(),y("span",uM,e[30]||(e[30]=[c("span",{class:"w-2 h-2 bg-red-600 rounded-full mr-1"},null,-1),se(" cliente cadastrado via site - pendente atualização ")]))):I("",!0)]),c("td",hM,S(u.email),1),c("td",fM,S(o.phoneMask(u.phone)),1),c("td",pM,[c("a",{href:o.whatsappLink(u.phone),target:"_blank",rel:"noopener",class:"btn btn-sm btn-success"}," WhatsApp ",8,mM),c("button",{onClick:h=>o.openModal(u,"view"),class:"btn btn-sm"}," Visualizar ",8,gM),c("button",{onClick:h=>o.handleDeleteClient(u.id),class:"btn btn-sm btn-danger"}," Excluir ",8,bM)])]))),128)),o.filteredClients.length===0?(m(),y("tr",yM,e[31]||(e[31]=[c("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"}," Nenhum cliente encontrado ",-1)]))):I("",!0)])]),c("div",xM,[c("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...u)=>o.prevPage&&o.prevPage(...u)),disabled:n.page===1}," Anterior ",8,vM),c("span",_M,"Página "+S(n.page)+" de "+S(o.totalPages),1),c("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...u)=>o.nextPage&&o.nextPage(...u)),disabled:n.page===o.totalPages}," Próxima ",8,wM)])])]),n.showModal?(m(),ge(d,{key:1,onClose:o.handleClose},{default:X(()=>[c("h3",kM,S(n.modalMode==="new"?"Adicionar Cliente":"Cadastro do Cliente"),1),n.currentClient&&n.currentClient.from_site&&n.currentClient.pending_update?(m(),y("div",SM,e[33]||(e[33]=[c("span",{class:"w-3 h-3 bg-red-600 rounded-full mr-2"},null,-1),se(" cliente cadastrado via site - pendente atualização ")]))):I("",!0),n.editingId?(m(),y("div",CM,[c("nav",MM,[c("button",{class:$e(n.activeTab==="cadastro"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[6]||(e[6]=u=>o.changeTab("cadastro"))},"Cadastro",2),c("button",{class:$e(n.activeTab==="agendamentos"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[7]||(e[7]=u=>o.changeTab("agendamentos"))},"Agendamentos",2),c("button",{class:$e(n.activeTab==="historico"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[8]||(e[8]=u=>o.changeTab("historico"))},"Histórico de atendimento",2)])])):I("",!0),M(c("form",{onSubmit:e[27]||(e[27]=ze((...u)=>o.handleSaveClient&&o.handleSaveClient(...u),["prevent"])),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[c("div",null,[e[34]||(e[34]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=u=>n.form.name=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,AM),[[O,n.form.name]])]),c("div",null,[e[35]||(e[35]=c("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=u=>n.form.cpf=u),disabled:o.isReadOnly,onInput:e[11]||(e[11]=u=>n.form.cpf=o.cpfMask(n.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,EM),[[O,n.form.cpf]])]),c("div",null,[e[36]||(e[36]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=u=>n.form.birthdate=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,PM),[[O,n.form.birthdate]])]),c("div",null,[e[37]||(e[37]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[13]||(e[13]=u=>n.form.email=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,TM),[[O,n.form.email]])]),c("div",null,[e[38]||(e[38]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=u=>n.form.phone=u),disabled:o.isReadOnly,onInput:e[15]||(e[15]=u=>n.form.phone=o.phoneMask(n.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,IM),[[O,n.form.phone]])]),c("div",null,[e[39]||(e[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=u=>n.form.cep=u),disabled:o.isReadOnly,onInput:e[17]||(e[17]=u=>n.form.cep=o.cepMask(n.form.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,OM),[[O,n.form.cep]])]),c("div",null,[e[40]||(e[40]=c("label",{class:"block text-sm font-medium text-gray-700"},"Endereço",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=u=>n.form.street=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,DM),[[O,n.form.street]])]),c("div",null,[e[41]||(e[41]=c("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=u=>n.form.number=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,RM),[[O,n.form.number]])]),c("div",null,[e[42]||(e[42]=c("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=u=>n.form.complement=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,LM),[[O,n.form.complement]])]),c("div",null,[e[43]||(e[43]=c("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=u=>n.form.neighborhood=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,FM),[[O,n.form.neighborhood]])]),c("div",null,[e[45]||(e[45]=c("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(c("select",{"onUpdate:modelValue":e[22]||(e[22]=u=>n.form.stateId=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[44]||(e[44]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.states,u=>(m(),y("option",{key:u.id,value:u.id},S(u.nome)+" ("+S(u.sigla)+")",9,UM))),128))],8,jM),[[be,n.form.stateId]])]),c("div",null,[e[47]||(e[47]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(c("select",{"onUpdate:modelValue":e[23]||(e[23]=u=>n.form.cityId=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[46]||(e[46]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.cities,u=>(m(),y("option",{key:u.id,value:u.id},S(u.nome),9,BM))),128))],8,NM),[[be,n.form.cityId]])]),c("div",null,[e[49]||(e[49]=c("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(c("select",{"onUpdate:modelValue":e[24]||(e[24]=u=>n.form.active=u),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[48]||(e[48]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,VM),[[be,n.form.active]])]),c("div",$M,[c("button",{type:"button",onClick:e[25]||(e[25]=(...u)=>o.handleClose&&o.handleClose(...u)),class:"px-4 py-2 rounded border"},"Fechar"),n.modalMode==="view"?(m(),y("button",{key:0,type:"button",onClick:e[26]||(e[26]=(...u)=>o.enableEdit&&o.enableEdit(...u)),class:"btn btn-success"},"Editar")):I("",!0),c("button",{type:"submit",class:"btn",disabled:o.isReadOnly},"Salvar",8,HM)])],544),[[Fn,n.activeTab==="cadastro"]]),M(c("div",zM,[c("table",WM,[e[52]||(e[52]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Hora"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Ações")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.clientAppointments,u=>(m(),y("tr",{key:u.id},[c("td",{class:$e(["px-4 py-2",u.from_site&&!u.confirmed?"border-l-2 border-t-2 border-b-2 border-red-500 rounded-l-md":"border-b last:border-b-0"])},[se(S(o.formatDateBR(u.date))+" "+S(o.addHoursToTime(u.time))+" ",1),u.from_site&&!u.confirmed?(m(),y("span",qM,"pendente confirmação de pagamento")):I("",!0)],2),c("td",{class:$e(["px-4 py-2",u.from_site&&!u.confirmed?"border-t-2 border-b-2 border-red-500":"border-b last:border-b-0"])},S(o.getServiceName(u.service_id)),3),c("td",{class:$e(["px-4 py-2 text-right space-x-2",u.from_site&&!u.confirmed?"border-r-2 border-t-2 border-b-2 border-red-500 rounded-r-md":"border-b last:border-b-0"])},[D(l,{to:{path:"/agendamentos",query:{edit:u.id}},class:"btn btn-sm"},{default:X(()=>e[50]||(e[50]=[se("Editar")])),_:2,__:[50]},1032,["to"]),c("button",{onClick:h=>o.sendConfirmationEmail(u),class:"btn btn-sm btn-success"},"Enviar e-mail",8,KM)],2)]))),128)),n.clientAppointments.length===0?(m(),y("tr",GM,e[51]||(e[51]=[c("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):I("",!0)])])],512),[[Fn,n.activeTab==="agendamentos"]]),M(c("div",YM,[(m(!0),y($,null,Q(n.history,u=>(m(),y("div",{key:u.id,class:"border p-2 rounded"},[c("p",JM,S(o.formatDateBR(u.appointment.date))+" "+S(o.addHoursToTime(u.appointment.time)),1),c("p",XM,S(u.note),1),u.attachments&&u.attachments.length?(m(),y("div",QM,[(m(!0),y($,null,Q(u.attachments,(h,f)=>(m(),y("a",{key:f,href:h,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+S(f+1),9,ZM))),128))])):I("",!0),c("div",e4,[D(l,{to:{path:`/atendimento/${u.appointment_id}`,query:{note:u.id}},class:"btn btn-sm"},{default:X(()=>e[53]||(e[53]=[se("Editar atendimento")])),_:2,__:[53]},1032,["to"])])]))),128)),n.history.length===0?(m(),y("p",t4,"Nenhum atendimento encontrado")):I("",!0)],512),[[Fn,n.activeTab==="historico"]])]),_:1},8,["onClose"])):I("",!0)])])}const n4=ae(tM,[["render",s4]]),i4={name:"CalendarView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const t=new Date;return{currentYear:t.getFullYear(),currentMonth:t.getMonth(),monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]}},computed:{daysInMonth(){return new Date(this.currentYear,this.currentMonth+1,0).getDate()},leadingBlanks(){return new Date(this.currentYear,this.currentMonth,1).getDay()}},methods:{addHoursToTime:gt,prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--},nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++},goToCurrentMonth(){const t=new Date;this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()},getAppointmentsForDay(t){const e=String(this.currentMonth+1).padStart(2,"0"),s=String(t).padStart(2,"0"),i=`${this.currentYear}-${e}-${s}`;return this.appointments.filter(n=>n.date===i)},isToday(t){const e=new Date;return this.currentYear===e.getFullYear()&&this.currentMonth===e.getMonth()&&t===e.getDate()},getStatusClass(t){return t.from_site&&!t.confirmed?"text-red-600":t.status==="completed"?"text-green-600":t.status==="no_show"?"text-gray-600":"text-blue-600"}}},o4={class:"bg-white rounded-lg shadow overflow-hidden"},r4={class:"flex justify-between items-center px-4 py-2 border-b bg-blue-600 text-white"},a4={class:"font-semibold"},l4={class:"grid grid-cols-7 gap-px text-sm bg-gray-100"},c4={class:"text-center font-medium"},d4=["onClick"];function u4(t,e,s,i,n,o){return m(),y("div",o4,[c("div",r4,[c("button",{onClick:e[0]||(e[0]=(...r)=>o.prevMonth&&o.prevMonth(...r)),class:"p-1 rounded hover:bg-blue-500"},e[2]||(e[2]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),c("div",a4,S(n.monthNames[n.currentMonth])+" "+S(n.currentYear),1),c("button",{onClick:e[1]||(e[1]=(...r)=>o.nextMonth&&o.nextMonth(...r)),class:"p-1 rounded hover:bg-blue-500"},e[3]||(e[3]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),c("div",l4,[(m(!0),y($,null,Q(n.daysOfWeek,r=>(m(),y("div",{class:"font-semibold text-center bg-blue-50 text-blue-700 p-1",key:r},S(r),1))),128)),(m(!0),y($,null,Q(o.leadingBlanks,r=>(m(),y("div",{key:"b"+r,class:"bg-white h-24"}))),128)),(m(!0),y($,null,Q(o.daysInMonth,r=>(m(),y("div",{key:r,class:$e(["border border-gray-200 h-24 p-1 overflow-auto bg-white hover:bg-blue-50",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(r)}])},[c("div",c4,S(r),1),c("ul",null,[(m(!0),y($,null,Q(o.getAppointmentsForDay(r),a=>(m(),y("li",{key:a.id,class:$e(["text-xs truncate cursor-pointer hover:underline",o.getStatusClass(a)]),onClick:l=>t.$emit("select",a)},S(o.addHoursToTime(a.time))+" - "+S(s.getClientName(a.client_id)),11,d4))),128))])],2))),128))])])}const h4=ae(i4,[["render",u4]]),f4={name:"Agendamentos",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs,CalendarView:h4,WeekView:_f,AppointmentDetails:wf},data(){return{userId:null,showModal:!1,editingId:null,viewMode:"week",form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},clients:[],services:[],rooms:[],appointments:[],selectedAppointment:null,showDetailsModal:!1,filterStartDate:"",filterEndDate:"",searchQuery:"",sortColumn:"",sortAsc:!0,showViewDropdown:!1,sidebarOpen:window.innerWidth>=768,schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},profileWhatsapp:"",isSaving:!1}},computed:{processedAppointments(){let t=this.appointments.slice();if(this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter(s=>s.date.toLowerCase().includes(e)||s.time.toLowerCase().includes(e)||this.getClientName(s.client_id).toLowerCase().includes(e)||this.getServiceName(s.service_id).toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e))}return this.filterStartDate&&(t=t.filter(e=>e.date>=this.filterStartDate)),this.filterEndDate&&(t=t.filter(e=>e.date<=this.filterEndDate)),this.sortColumn&&t.sort((e,s)=>{let i,n;switch(this.sortColumn){case"client":i=this.getClientName(e.client_id),n=this.getClientName(s.client_id);break;case"service":i=this.getServiceName(e.service_id),n=this.getServiceName(s.service_id);break;case"datetime":i=e.date+" "+e.time,n=s.date+" "+s.time;break;default:i=e[this.sortColumn],n=s[this.sortColumn]}return i<n?this.sortAsc?-1:1:i>n?this.sortAsc?1:-1:0}),t},scheduleStartHour(){const t=this.schedule.startTime,e=t?parseInt(t.split(":")[0]):6;return Math.max(0,e-1)},scheduleEndHour(){const t=this.schedule.endTime,e=t?parseInt(t.split(":")[0]):23;return Math.min(23,e+1)},activeClients(){return this.clients.filter(t=>t.active)}},methods:{formatDateBR:qe,addHoursToTime:gt,openModal(t){t?(this.editingId=t.id,this.form={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,roomId:t.room_id||"",duration:t.duration,description:t.description,paid:!!t.paid,status:t.status||"confirmed"}):(this.editingId=null,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openModal(this.selectedAppointment),this.closeDetails())},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const i=this.schedule.dailySchedule[s];return!i||!i.enabled||!i.start||!i.end?!1:e>=i.start&&e<=i.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},canCancelAppointment(t){const e=this.schedule.cancelLimitHours||0;return e===0?!0:(xf(t.date,t.time)-El())/36e5>=e},async handleSaveAppointment(){if(this.isSaving=!0,!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado"),this.isSaving=!1;return}if(this.editingId){const{data:t,error:e}=await C.from("appointments").update({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,status:this.form.status}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message),this.isSaving=!1;else{const s=this.appointments.findIndex(i=>i.id===this.editingId);s!==-1&&(this.appointments[s]=t),this.isSaving=!1,this.closeModal()}}else{const t=this.services.find(n=>n.id===this.form.serviceId);let e=0;if(t&&t.is_package&&t.session_count&&t.session_count>1){const{count:n}=await C.from("appointments").select("id",{count:"exact",head:!0}).eq("user_id",this.userId).eq("client_id",this.form.clientId).eq("service_id",this.form.serviceId).neq("status","canceled").neq("status","deleted");e=n||0}const{data:s,error:i}=await C.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status}).select().single();if(i)alert("Erro ao salvar agendamento: "+i.message),this.isSaving=!1;else{if(this.appointments.push(s),t&&t.is_package&&t.session_count&&t.session_count>1&&e%t.session_count===0){const a=[];for(let l=1;l<t.session_count;l++)a.push({date:vf(this.form.date,7*l),time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status});if(a.length){const{data:l}=await C.from("appointments").insert(a).select();l&&this.appointments.push(...l)}}const n=this.clients.find(a=>a.id===this.form.clientId),o=this.services.find(a=>a.id===this.form.serviceId),r=this.rooms.find(a=>a.id===this.form.roomId);await Ri({to:n==null?void 0:n.email,subject:"Agendamento de Consulta realizado",text:`Olá ${n==null?void 0:n.name},

Seu agendamento para ${o==null?void 0:o.name} foi confirmado para ${qe(this.form.date)} às ${this.form.time}.
${r?`Sala: ${r.name}
`:""}${r!=null&&r.google_meet_link?`Link: ${r.google_meet_link}
`:""}
E-mail enviado automaticamente.`},!1),this.isSaving=!1,this.closeModal()}}},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){const s=this.appointments.find(r=>r.id===t);if(s&&!this.canCancelAppointment(s)){alert("Agendamento fora da política de cancelamento.");return}if(!confirm(e))return;const{data:n,error:o}=await C.from("appointments").update({status:"deleted"}).eq("id",t).select().single();o?alert("Erro ao excluir agendamento: "+o.message):(this.appointments=this.appointments.filter(r=>r.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&(this.showDetailsModal=!1,this.selectedAppointment=null))},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getClientEmail(t){const e=this.clients.find(s=>s.id===t);return e?e.email:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},getRowClass(t){return t.from_site&&!t.confirmed?"text-red-600":t.status==="completed"?"text-green-600":t.status==="no_show"?"text-gray-600":t.status==="canceled"||t.status==="deleted"?"line-through":""},sortBy(t){this.sortColumn===t?this.sortAsc=!this.sortAsc:(this.sortColumn=t,this.sortAsc=!0)},setViewMode(t){this.viewMode=t,this.showViewDropdown=!1,t==="calendar"&&this.$refs.calendarView&&this.$refs.calendarView.goToCurrentMonth&&this.$refs.calendarView.goToCurrentMonth()},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(!this.selectedAppointment)return;if(!this.canCancelAppointment(this.selectedAppointment)){alert("Agendamento fora da política de cancelamento.");return}const{data:t,error:e}=await C.from("appointments").update({status:"canceled"}).eq("id",this.selectedAppointment.id).select().single();if(e){alert("Erro ao desmarcar atendimento: "+e.message);return}Object.assign(this.selectedAppointment,t),this.appointments=this.appointments.filter(s=>s.id!==t.id),this.closeDetails()},async markNoShow(){if(!this.selectedAppointment)return;const{data:t,error:e}=await C.from("appointments").update({status:"no_show"}).eq("id",this.selectedAppointment.id).select().single();if(e){alert("Erro ao marcar falta: "+e.message);return}Object.assign(this.selectedAppointment,t);const s=this.appointments.findIndex(i=>i.id===t.id);s!==-1&&(this.appointments[s]=t),alert("Falta registrada para este atendimento.")},async sendConfirmationEmail(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(n=>n.id===t.client_id),s=this.services.find(n=>n.id===t.service_id),i=this.rooms.find(n=>n.id===t.room_id);await Ri({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Olá ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${qe(t.date)} às ${gt(t.time)}.
${i?`Sala: ${i.name}
`:""}${i!=null&&i.google_meet_link?`Link: ${i.google_meet_link}
`:""}
E-mail enviado automaticamente.`})},async confirmPayment(){const t=this.selectedAppointment;if(!t)return;const{data:e,error:s}=await C.from("appointments").update({confirmed:!0,paid:!0}).eq("id",t.id).select().single();if(s){alert("Erro ao confirmar pagamento: "+s.message);return}Object.assign(t,e);const i=this.clients.find(r=>r.id===t.client_id),n=this.services.find(r=>r.id===t.service_id),o=this.rooms.find(r=>r.id===t.room_id);await Ri({to:i==null?void 0:i.email,subject:"Agendamento confirmado",text:`Olá ${i==null?void 0:i.name},

Seu agendamento para ${n==null?void 0:n.name} foi confirmado para ${qe(t.date)} às ${gt(t.time)}.
${o?`Sala: ${o.name}
`:""}${o!=null&&o.google_meet_link?`Link: ${o.google_meet_link}
`:""}
E-mail enviado automaticamente.`},!1)},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),i=`Olá ${e.name},

Passando para informar que seu agendamento está confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${qe(t.date)} - Hora: ${gt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Está mensagem é uma mensagem automática.`,o=`https://wa.me/${ir(e.phone)}?text=${encodeURIComponent(i)}`;window.open(o,"_blank")},exportCSV(){const t=["Data","Hora","Cliente","Serviço","Duração","Descrição"],e=this.appointments.map(o=>[qe(o.date),gt(o.time),this.getClientName(o.client_id),this.getServiceName(o.service_id),o.duration,(o.description||"").replace(/(\r\n|\n|\r)/g," ")]),s=[t.join(","),...e.map(o=>o.map(r=>`"${String(r).replace(/"/g,'""')}"`).join(","))].join(`
`),i=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.setAttribute("download","agendamentos.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},clearFilters(){this.searchQuery="",this.filterStartDate="",this.filterEndDate=""}},watch:{"form.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&(!this.editingId||this.form.duration==="")&&(this.form.duration=e.duration)}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId),s=e?await Es(e):[this.userId],{data:i}=await C.from("clients").select().in("user_id",s);i&&(this.clients=i);const{data:n}=await C.from("services").select().in("user_id",s).eq("active",!0);n&&(this.services=n);const{data:o}=await C.from("rooms").select().in("user_id",s).eq("active",!0);o&&(this.rooms=o);const{data:r}=await C.from("profiles").select("start_time, end_time, week_days, daily_schedule, whatsapp, cancel_limit_hours").eq("id",this.userId).single();r&&(this.schedule.startTime=r.start_time||"",this.schedule.endTime=r.end_time||"",this.schedule.weekDays=r.week_days?r.week_days.split(","):[],this.schedule.dailySchedule=r.daily_schedule?typeof r.daily_schedule=="string"?JSON.parse(r.daily_schedule):r.daily_schedule:null,this.schedule.cancelLimitHours=r.cancel_limit_hours||0,this.profileWhatsapp=r.whatsapp||"");const{data:a}=await C.from("appointments").select().in("user_id",s).neq("status","canceled").neq("status","deleted");a&&(this.appointments=a);const l=this.$route.query.edit;if(l){const d=this.appointments.find(u=>u.id===l);d&&this.openModal(d)}}},p4={class:"min-h-screen flex bg-gray-100 relative"},m4={class:"flex-1 p-4 md:p-8"},g4={key:0,class:"flex items-center mb-4"},b4={class:"flex flex-col sm:flex-row sm:items-center mb-4 gap-2"},y4={class:"mb-4 flex items-center space-x-2"},x4={class:"relative"},v4={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20"},_4={class:"text-lg font-semibold mb-4"},w4=["value"],k4=["value"],S4=["value"],C4={class:"flex justify-end space-x-2"},M4=["disabled"],A4={key:0,class:"mt-4"},E4={class:"flex flex-wrap justify-start gap-2"},P4={class:"mt-4"},T4={class:"flex flex-wrap justify-start gap-2"},I4={class:"mt-4"},O4={class:"flex flex-wrap justify-start gap-2"},D4={class:"mt-8"},R4={class:"bg-white p-4 rounded-lg shadow"},L4={class:"overflow-x-auto"},F4={class:"min-w-full text-left"},j4={class:"bg-blue-600 text-white"},U4={key:0},N4={key:0},B4={key:0},V4={key:0},$4={key:0},H4={class:"px-4 py-2"},z4={class:"px-4 py-2"},W4={class:"px-4 py-2"},q4={class:"px-4 py-2"},K4={class:"px-4 py-2"},G4={class:"px-4 py-2"},Y4={class:"px-4 py-2 text-right space-x-2"},J4=["onClick"],X4={key:0},Q4={class:"mt-8"},Z4={class:"mt-8"};function eA(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("router-link"),d=j("Modal"),u=j("AppointmentDetails"),h=j("CalendarView"),f=j("WeekView");return m(),y("div",p4,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=p=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",m4,[n.sidebarOpen?I("",!0):(m(),y("div",g4,[c("button",{onClick:e[1]||(e[1]=p=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[33]||(e[33]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Agendamentos"}),c("section",null,[c("div",b4,[M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=p=>n.searchQuery=p),type:"text",placeholder:"Buscar...",class:"border px-3 py-2 rounded-lg flex-grow sm:max-w-xs"},null,512),[[O,n.searchQuery]]),M(c("input",{"onUpdate:modelValue":e[3]||(e[3]=p=>n.filterStartDate=p),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[O,n.filterStartDate]]),M(c("input",{"onUpdate:modelValue":e[4]||(e[4]=p=>n.filterEndDate=p),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[O,n.filterEndDate]]),c("button",{onClick:e[5]||(e[5]=(...p)=>o.clearFilters&&o.clearFilters(...p)),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Limpar"),D(l,{to:"/agendamentos/novo",class:"btn sm:ml-auto w-full sm:w-auto"},{default:X(()=>e[34]||(e[34]=[se("Novo")])),_:1,__:[34]}),c("button",{onClick:e[6]||(e[6]=(...p)=>o.exportCSV&&o.exportCSV(...p)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full sm:w-auto"},"Exportar")]),c("div",y4,[e[35]||(e[35]=c("span",{class:"text-xs text-gray-600"},"Modo de exibição:",-1)),c("div",x4,[c("button",{onClick:e[7]||(e[7]=p=>n.showViewDropdown=!n.showViewDropdown),class:"px-4 py-2 bg-gray-200 rounded-lg"},S(n.viewMode==="list"?"Lista":n.viewMode==="calendar"?"Calendário":"Semana"),1),n.showViewDropdown?(m(),y("div",v4,[c("button",{onClick:e[8]||(e[8]=p=>o.setViewMode("list")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Lista"),c("button",{onClick:e[9]||(e[9]=p=>o.setViewMode("calendar")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Calendário"),c("button",{onClick:e[10]||(e[10]=p=>o.setViewMode("week")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Semana")])):I("",!0)])]),e[62]||(e[62]=Ws('<div class="flex space-x-4 text-sm mb-4 ml-6"><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-gray-400 rounded-full inline-block"></span><span>Faltou</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-blue-500 rounded-full inline-block"></span><span>Confirmado</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-green-500 rounded-full inline-block"></span><span>Finalizado</span></div><div class="flex items-center space-x-1"><span class="w-3 h-3 bg-red-500 rounded-full inline-block"></span><span>Pendente pagamento</span></div></div>',1)),n.showModal?(m(),ge(d,{key:0,onClose:o.closeModal},{default:X(()=>[c("h3",_4,S(n.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),c("form",{onSubmit:e[20]||(e[20]=ze((...p)=>o.handleSaveAppointment&&o.handleSaveAppointment(...p),["prevent"])),class:"space-y-4"},[c("div",null,[e[36]||(e[36]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=p=>n.form.date=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.date]])]),c("div",null,[e[37]||(e[37]=c("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":e[12]||(e[12]=p=>n.form.time=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.time]])]),c("div",null,[e[39]||(e[39]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(c("select",{"onUpdate:modelValue":e[13]||(e[13]=p=>n.form.clientId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[38]||(e[38]=c("option",{disabled:"",value:""},"Selecione um cliente",-1)),(m(!0),y($,null,Q(o.activeClients,p=>(m(),y("option",{key:p.id,value:p.id},S(p.name),9,w4))),128))],512),[[be,n.form.clientId]])]),c("div",null,[e[41]||(e[41]=c("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(c("select",{"onUpdate:modelValue":e[14]||(e[14]=p=>n.form.serviceId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[40]||(e[40]=c("option",{disabled:"",value:""},"Selecione um serviço",-1)),(m(!0),y($,null,Q(n.services,p=>(m(),y("option",{key:p.id,value:p.id},S(p.name),9,k4))),128))],512),[[be,n.form.serviceId]])]),c("div",null,[e[43]||(e[43]=c("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),M(c("select",{"onUpdate:modelValue":e[15]||(e[15]=p=>n.form.roomId=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[42]||(e[42]=c("option",{disabled:"",value:""},"Selecione uma sala",-1)),(m(!0),y($,null,Q(n.rooms,p=>(m(),y("option",{key:p.id,value:p.id},S(p.name),9,S4))),128))],512),[[be,n.form.roomId]])]),c("div",null,[e[44]||(e[44]=c("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=p=>n.form.duration=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.duration]])]),c("div",null,[e[45]||(e[45]=c("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(c("textarea",{"onUpdate:modelValue":e[17]||(e[17]=p=>n.form.description=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.description]])]),c("div",null,[e[47]||(e[47]=c("label",{class:"block text-sm font-medium text-gray-700"},"Pago?",-1)),M(c("select",{"onUpdate:modelValue":e[18]||(e[18]=p=>n.form.paid=p),class:"w-full mt-1 px-4 py-2 border rounded-lg"},e[46]||(e[46]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),512),[[be,n.form.paid]])]),c("div",C4,[c("button",{type:"button",onClick:e[19]||(e[19]=(...p)=>o.closeModal&&o.closeModal(...p)),class:"px-4 py-2 rounded border"},"Cancelar"),c("button",{type:"submit",class:"btn",disabled:n.isSaving},"Salvar",8,M4)])],32)]),_:1},8,["onClose"])):I("",!0),n.showDetailsModal?(m(),ge(d,{key:1,onClose:o.closeDetails},{default:X(()=>[D(u,{appointment:n.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:X(()=>[n.selectedAppointment&&n.selectedAppointment.from_site&&!n.selectedAppointment.paid?(m(),y("div",A4,[e[48]||(e[48]=c("h4",{class:"font-medium mb-2"},"Ações Financeiras",-1)),c("div",E4,[c("button",{onClick:e[21]||(e[21]=(...p)=>o.confirmPayment&&o.confirmPayment(...p)),class:"btn btn-primary"}," Confirmar pagamento ")])])):I("",!0),c("div",P4,[e[49]||(e[49]=c("h4",{class:"font-medium mb-2"},"Ações de atendimento",-1)),c("div",T4,[c("button",{onClick:e[22]||(e[22]=(...p)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...p)),class:"btn btn-success"},"Enviar confirmação"),c("button",{onClick:e[23]||(e[23]=(...p)=>o.cancelAppointment&&o.cancelAppointment(...p)),class:"btn btn-warning"},"Desmarcou"),c("button",{onClick:e[24]||(e[24]=(...p)=>o.markNoShow&&o.markNoShow(...p)),class:"btn btn-secondary"},"Faltou"),c("button",{onClick:e[25]||(e[25]=(...p)=>o.startAppointment&&o.startAppointment(...p)),class:"btn btn-primary"},"Iniciar atendimento")])]),c("div",I4,[e[50]||(e[50]=c("h4",{class:"font-medium mb-2"},"Ações de cadastro",-1)),c("div",O4,[c("button",{onClick:e[26]||(e[26]=(...p)=>o.editFromDetails&&o.editFromDetails(...p)),class:"btn"},"Editar"),c("button",{onClick:e[27]||(e[27]=p=>o.handleDeleteAppointment(n.selectedAppointment.id)),class:"btn btn-danger"},"Excluir")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):I("",!0),M(c("div",D4,[e[59]||(e[59]=c("h3",{class:"text-lg font-medium mb-4"},"Agendamentos",-1)),c("div",R4,[c("div",L4,[c("table",F4,[c("thead",j4,[c("tr",null,[c("th",{onClick:e[28]||(e[28]=p=>o.sortBy("datetime")),class:"px-4 py-2 font-medium text-white cursor-pointer"},[e[51]||(e[51]=se(" Data/Hora ")),n.sortColumn==="datetime"?(m(),y("span",U4,S(n.sortAsc?"▲":"▼"),1)):I("",!0)]),c("th",{onClick:e[29]||(e[29]=p=>o.sortBy("client")),class:"px-4 py-2 font-medium text-white cursor-pointer"},[e[52]||(e[52]=se(" Cliente ")),n.sortColumn==="client"?(m(),y("span",N4,S(n.sortAsc?"▲":"▼"),1)):I("",!0)]),c("th",{onClick:e[30]||(e[30]=p=>o.sortBy("service")),class:"px-4 py-2 font-medium text-white cursor-pointer"},[e[53]||(e[53]=se(" Serviço ")),n.sortColumn==="service"?(m(),y("span",B4,S(n.sortAsc?"▲":"▼"),1)):I("",!0)]),e[56]||(e[56]=c("th",{class:"px-4 py-2 font-medium text-white"},"Sala",-1)),c("th",{onClick:e[31]||(e[31]=p=>o.sortBy("duration")),class:"px-4 py-2 font-medium text-white cursor-pointer"},[e[54]||(e[54]=se(" Duração ")),n.sortColumn==="duration"?(m(),y("span",V4,S(n.sortAsc?"▲":"▼"),1)):I("",!0)]),c("th",{onClick:e[32]||(e[32]=p=>o.sortBy("description")),class:"px-4 py-2 font-medium text-white cursor-pointer"},[e[55]||(e[55]=se(" Descrição ")),n.sortColumn==="description"?(m(),y("span",$4,S(n.sortAsc?"▲":"▼"),1)):I("",!0)]),e[57]||(e[57]=c("th",{class:"px-4 py-2"},null,-1))])]),c("tbody",null,[(m(!0),y($,null,Q(o.processedAppointments,p=>(m(),y("tr",{key:p.id,class:$e(["border-b last:border-b-0 even:bg-gray-50 hover:bg-blue-50",o.getRowClass(p)])},[c("td",H4,S(o.formatDateBR(p.date))+" "+S(o.addHoursToTime(p.time)),1),c("td",z4,S(o.getClientName(p.client_id)),1),c("td",W4,S(o.getServiceName(p.service_id)),1),c("td",q4,S(o.getRoomName(p.room_id)),1),c("td",K4,S(p.duration)+" minutos",1),c("td",G4,S(p.description),1),c("td",Y4,[c("button",{onClick:g=>o.openDetails(p),class:"btn btn-sm"},"Visualizar",8,J4)])],2))),128)),o.processedAppointments.length===0?(m(),y("tr",X4,e[58]||(e[58]=[c("td",{colspan:"7",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento encontrado",-1)]))):I("",!0)])])])])],512),[[Fn,n.viewMode==="list"]]),M(c("div",Q4,[e[60]||(e[60]=c("h3",{class:"text-lg font-medium mb-4"},"Calendário",-1)),D(h,{ref:"calendarView",appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[Fn,n.viewMode==="calendar"]]),M(c("div",Z4,[e[61]||(e[61]=c("h3",{class:"text-lg font-medium mb-4"},"Semana",-1)),D(f,{appointments:o.processedAppointments,getClientName:o.getClientName,startHour:o.scheduleStartHour,endHour:o.scheduleEndHour,onSelect:o.openDetails},null,8,["appointments","getClientName","startHour","endHour","onSelect"])],512),[[Fn,n.viewMode==="week"]])])])])}const tA=ae(f4,[["render",eA]]),sA={name:"NovoAgendamento",components:{Sidebar:Je,HeaderUser:Xe},data(){return{userId:null,form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:"",paid:!1,status:"confirmed"},clients:[],services:[],rooms:[],schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},isSaving:!1,fieldsDisabled:!1,sidebarOpen:window.innerWidth>=768,reschedulingId:null}},methods:{formatDateBR:qe,addHoursToTime:gt,cancel(){this.fieldsDisabled=!1,this.$router.push("/agendamentos")},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const i=this.schedule.dailySchedule[s];return!i||!i.enabled||!i.start||!i.end?!1:e>=i.start&&e<=i.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},async checkPendingSessionsForClient(t){if(!t)return;const{data:e}=await C.from("appointments").select("id, service_id, room_id, description, paid, status, duration").eq("user_id",this.userId).eq("client_id",t).in("status",["canceled","deleted"]).eq("rescheduled",!1).order("created_at",{ascending:!0}).order("date",{ascending:!0}).order("time",{ascending:!0}).limit(1).maybeSingle();if(e){const n=this.services.find(o=>o.id===e.service_id);if(n&&n.is_package&&n.session_count){const o=`O cliente possui um agendamento cancelado do serviço ${n.name}. Deseja reagendar?`;if(confirm(o)){this.reschedulingId=e.id,this.form.serviceId=n.id,this.form.duration=e.duration||n.duration||"",this.form.roomId=e.room_id||"",this.form.description=e.description||"",this.form.paid=!!e.paid,this.form.status="confirmed",this.fieldsDisabled=!0;return}}}this.reschedulingId=null;const{data:s}=await C.from("appointments").select("service_id, status, rescheduled").eq("user_id",this.userId).eq("client_id",t),i={};(s||[]).forEach(n=>{i[n.service_id]||(i[n.service_id]={done:0,pending:0,canceled:0}),n.status==="completed"||n.status==="no_show"?i[n.service_id].done+=1:(n.status==="canceled"||n.status==="deleted")&&!n.rescheduled?i[n.service_id].canceled+=1:n.status!=="canceled"&&n.status!=="deleted"&&(i[n.service_id].pending+=1)});for(const n of this.services.filter(o=>o.is_package&&o.session_count)){const o=i[n.id];if(!o)continue;if(o.canceled>0){const a=`O cliente possui sessões pendentes do serviço ${n.name}. Deseja agendar para este serviço?`;if(confirm(a)){this.form.serviceId=n.id,this.form.duration=n.duration||"";const{data:l}=await C.from("appointments").select("room_id, description, paid, status, duration").eq("user_id",this.userId).eq("client_id",t).eq("service_id",n.id).order("date",{ascending:!1}).order("time",{ascending:!1}).limit(1).maybeSingle();l&&(this.form.roomId=l.room_id||"",this.form.description=l.description||"",this.form.paid=!!l.paid,this.form.duration=l.duration||this.form.duration,this.form.status="confirmed"),this.fieldsDisabled=!0;break}}}},async handleSaveAppointment(){if(this.isSaving=!0,!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horário fora do horário de trabalho configurado"),this.isSaving=!1;return}const t=this.services.find(o=>o.id===this.form.serviceId);let e=0;if(t&&t.is_package&&t.session_count&&t.session_count>1){const{count:o}=await C.from("appointments").select("id",{count:"exact",head:!0}).eq("user_id",this.userId).eq("client_id",this.form.clientId).eq("service_id",this.form.serviceId).in("status",["completed","no_show"]);e=o||0}const s=!!this.reschedulingId,{data:i,error:n}=await C.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status}).select().single();if(n)alert("Erro ao salvar agendamento: "+n.message),this.isSaving=!1;else{if(this.reschedulingId){const{error:l}=await C.from("appointments").update({rescheduled:!0}).eq("id",this.reschedulingId).eq("user_id",this.userId);l&&console.error("Erro ao atualizar agendamento remarcado:",l),this.reschedulingId=null}if(t&&t.is_package&&t.session_count&&t.session_count>1&&!s&&!this.fieldsDisabled&&e%t.session_count===0){const l=[];for(let d=1;d<t.session_count;d++)l.push({date:vf(this.form.date,7*d),time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,paid:this.form.paid,user_id:this.userId,confirmed:!0,from_site:!1,status:this.form.status});l.length&&await C.from("appointments").insert(l)}const o=this.clients.find(l=>l.id===this.form.clientId),r=this.services.find(l=>l.id===this.form.serviceId),a=this.rooms.find(l=>l.id===this.form.roomId);await Ri({to:o==null?void 0:o.email,subject:"Agendamento de Consulta realizado",text:`Olá ${o==null?void 0:o.name},

Seu agendamento para ${r==null?void 0:r.name} foi confirmado para ${qe(this.form.date)} às ${this.form.time}.
${a?`Sala: ${a.name}
`:""}${a!=null&&a.google_meet_link?`Link: ${a.google_meet_link}
`:""}
E-mail enviado automaticamente.`},!1),this.isSaving=!1,this.$router.push("/agendamentos")}}},computed:{activeClients(){return this.clients.filter(t=>t.active)}},watch:{async"form.clientId"(t){t&&await this.checkPendingSessionsForClient(t)},"form.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&this.form.duration===""&&(this.form.duration=e.duration)}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await C.from("services").select().eq("user_id",this.userId).eq("active",!0);s&&(this.services=s);const{data:i}=await C.from("rooms").select().eq("user_id",this.userId).eq("active",!0);i&&(this.rooms=i);const{data:n}=await C.from("profiles").select("start_time, end_time, week_days, daily_schedule, cancel_limit_hours").eq("id",this.userId).single();n&&(this.schedule.startTime=n.start_time||"",this.schedule.endTime=n.end_time||"",this.schedule.weekDays=n.week_days?n.week_days.split(","):[],this.schedule.dailySchedule=n.daily_schedule?typeof n.daily_schedule=="string"?JSON.parse(n.daily_schedule):n.daily_schedule:null,this.schedule.cancelLimitHours=n.cancel_limit_hours||0)}},nA={class:"min-h-screen flex bg-gray-100 relative"},iA={class:"flex-1 p-4 md:p-8"},oA={key:0,class:"flex items-center mb-4"},rA={class:"bg-white p-4 rounded-lg shadow"},aA=["disabled"],lA=["value"],cA=["disabled"],dA=["value"],uA=["disabled"],hA=["value"],fA=["disabled"],pA=["disabled"],mA=["disabled"],gA={class:"flex justify-end space-x-2"},bA=["disabled"];function yA(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",nA,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",iA,[n.sidebarOpen?I("",!0):(m(),y("div",oA,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Novo Agendamento"}),c("section",rA,[e[25]||(e[25]=c("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Agendamento",-1)),c("form",{onSubmit:e[11]||(e[11]=ze((...l)=>o.handleSaveAppointment&&o.handleSaveAppointment(...l),["prevent"])),class:"space-y-4"},[c("div",null,[e[13]||(e[13]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=l=>n.form.date=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.date]])]),c("div",null,[e[14]||(e[14]=c("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":e[3]||(e[3]=l=>n.form.time=l),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[O,n.form.time]])]),c("div",null,[e[16]||(e[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(c("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.form.clientId=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[15]||(e[15]=c("option",{disabled:"",value:""},"Selecione um cliente",-1)),(m(!0),y($,null,Q(o.activeClients,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,lA))),128))],8,aA),[[be,n.form.clientId]])]),c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Serviço",-1)),M(c("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>n.form.serviceId=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[17]||(e[17]=c("option",{disabled:"",value:""},"Selecione um serviço",-1)),(m(!0),y($,null,Q(n.services,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,dA))),128))],8,cA),[[be,n.form.serviceId]])]),c("div",null,[e[20]||(e[20]=c("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunião",-1)),M(c("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>n.form.roomId=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[19]||(e[19]=c("option",{disabled:"",value:""},"Selecione uma sala",-1)),(m(!0),y($,null,Q(n.rooms,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,hA))),128))],8,uA),[[be,n.form.roomId]])]),c("div",null,[e[21]||(e[21]=c("label",{class:"block text-sm font-medium text-gray-700"},"Duração (minutos)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>n.form.duration=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,8,fA),[[O,n.form.duration]])]),c("div",null,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(c("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>n.form.description=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,8,pA),[[O,n.form.description]])]),c("div",null,[e[24]||(e[24]=c("label",{class:"block text-sm font-medium text-gray-700"},"Pago?",-1)),M(c("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>n.form.paid=l),disabled:n.fieldsDisabled,class:"w-full mt-1 px-4 py-2 border rounded-lg"},e[23]||(e[23]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,mA),[[be,n.form.paid]])]),c("div",gA,[c("button",{type:"button",onClick:e[10]||(e[10]=(...l)=>o.cancel&&o.cancel(...l)),class:"px-4 py-2 rounded border"},"Cancelar"),c("button",{type:"submit",class:"btn",disabled:n.isSaving},"Salvar",8,bA)])],32)])])])}const xA=ae(sA,[["render",yA]]),vA={name:"Servicos",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{userId:null,showModal:!1,editingId:null,viewMode:!1,search:"",sidebarOpen:window.innerWidth>=768,form:{name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0},services:[],page:1,pageSize:10}},methods:{openModal(t,e=!1){this.viewMode=e,t?(this.editingId=t.id,this.form={name:t.name,description:t.description,duration:t.duration,price:t.price,allowOnlineBooking:t.allow_online_booking,isPackage:t.is_package,sessions:t.session_count,active:t.active}):(this.editingId=null,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0}),this.showModal=!0},closeModal(){this.showModal=!1,this.viewMode=!1,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null,active:!0},this.editingId=null},enableEditing(){this.viewMode=!1},async handleSaveService(){let t,e;if(this.editingId?{data:t,error:e}=await C.from("services").update({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions,active:this.form.active}).eq("id",this.editingId).select().single():{data:t,error:e}=await C.from("services").insert({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions,active:this.form.active,user_id:this.userId}).select().single(),e)alert("Erro ao salvar serviço: "+e.message);else{if(this.editingId){const s=this.services.findIndex(i=>i.id===this.editingId);s!==-1&&(this.services[s]=t)}else this.services.push(t);this.closeModal()}},async handleDeleteService(t){if(!confirm("Tem certeza que deseja excluir este serviço?"))return;const{data:s}=await C.from("appointments").select("id").eq("service_id",t).limit(1);if(s&&s.length){const{error:n}=await C.from("services").update({active:!1}).eq("id",t);if(n)alert("Erro ao inativar serviço: "+n.message);else{const o=this.services.findIndex(r=>r.id===t);o!==-1&&(this.services[o].active=!1),alert("Serviço inativado.")}return}const{error:i}=await C.from("services").delete().eq("id",t);i?alert("Erro ao excluir serviço: "+i.message):this.services=this.services.filter(n=>n.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},computed:{filteredServices(){const t=this.search.toLowerCase();return this.services.filter(e=>e.name.toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.duration||"").toLowerCase().includes(t)||e.price!==null&&e.price.toString().includes(t))},paginatedServices(){const t=(this.page-1)*this.pageSize;return this.filteredServices.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredServices.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId),s=e?await Es(e):[this.userId],{data:i}=await C.from("services").select().in("user_id",s);i&&(this.services=i)}},_A={class:"min-h-screen flex bg-gray-100 relative"},wA={class:"flex-1 p-4 md:p-8 space-y-6"},kA={key:0,class:"flex items-center mb-4"},SA={class:"bg-white p-4 rounded-lg shadow"},CA={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},MA={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},AA={class:"overflow-x-auto"},EA={class:"min-w-full text-left"},PA={class:"px-4 py-2"},TA={class:"px-4 py-2"},IA={class:"px-4 py-2"},OA={class:"px-4 py-2"},DA={class:"px-4 py-2 text-right space-x-2 whitespace-nowrap"},RA=["onClick"],LA=["onClick"],FA=["onClick"],jA={key:0},UA={class:"mt-4 flex justify-between items-center"},NA=["disabled"],BA={class:"text-sm"},VA=["disabled"],$A={class:"text-lg font-semibold mb-4"},HA=["disabled"],zA=["disabled"],WA=["disabled"],qA=["disabled"],KA=["disabled"],GA=["disabled"],YA={key:0},JA=["disabled"],XA=["disabled"],QA={class:"flex justify-end space-x-2"},ZA={key:1,type:"submit",class:"btn"};function eE(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",_A,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",wA,[n.sidebarOpen?I("",!0):(m(),y("div",kA,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[19]||(e[19]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Serviços"}),c("section",SA,[c("div",CA,[e[20]||(e[20]=c("h3",{class:"text-lg font-medium"},"Serviços cadastrados",-1)),c("div",MA,[M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>n.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[O,n.search]]),c("button",{onClick:e[3]||(e[3]=d=>o.openModal()),class:"btn w-full sm:w-auto"}," Novo Serviço ")])]),c("div",AA,[c("table",EA,[e[22]||(e[22]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Descrição"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Duração"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.paginatedServices,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",PA,S(d.name),1),c("td",TA,S(d.description),1),c("td",IA,S(d.duration)+" minutos",1),c("td",OA,S(o.formatPrice(d.price)),1),c("td",DA,[c("button",{onClick:u=>o.openModal(d,!0),class:"btn btn-sm btn-secondary"}," Visualizar ",8,RA),c("button",{onClick:u=>o.openModal(d),class:"btn btn-sm"}," Editar ",8,LA),c("button",{onClick:u=>o.handleDeleteService(d.id),class:"btn btn-sm btn-danger"}," Excluir ",8,FA)])]))),128)),o.filteredServices.length===0?(m(),y("tr",jA,e[21]||(e[21]=[c("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"}," Nenhum serviço encontrado ",-1)]))):I("",!0)])]),c("div",UA,[c("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...d)=>o.prevPage&&o.prevPage(...d)),disabled:n.page===1}," Anterior ",8,NA),c("span",BA,"Página "+S(n.page)+" de "+S(o.totalPages),1),c("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...d)=>o.nextPage&&o.nextPage(...d)),disabled:n.page===o.totalPages}," Próxima ",8,VA)])])]),n.showModal?(m(),ge(l,{key:1,onClose:o.closeModal},{default:X(()=>[c("h3",$A,S(n.viewMode?"Visualizar Serviço":n.editingId?"Editar Serviço":"Adicionar Serviço"),1),c("form",{onSubmit:e[18]||(e[18]=ze((...d)=>o.handleSaveService&&o.handleSaveService(...d),["prevent"])),class:"space-y-6"},[c("div",null,[e[23]||(e[23]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=d=>n.form.name=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,HA),[[O,n.form.name]])]),c("div",null,[e[24]||(e[24]=c("label",{class:"block text-sm font-medium text-gray-700"},"Descrição",-1)),M(c("textarea",{"onUpdate:modelValue":e[7]||(e[7]=d=>n.form.description=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,zA),[[O,n.form.description]])]),c("div",null,[e[25]||(e[25]=c("label",{class:"block text-sm font-medium text-gray-700"},"Tempo de duração",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=d=>n.form.duration=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,WA),[[O,n.form.duration]])]),c("div",null,[e[26]||(e[26]=c("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),M(c("input",{type:"number",step:"0.01","onUpdate:modelValue":e[9]||(e[9]=d=>n.form.price=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,qA),[[O,n.form.price]])]),c("div",null,[e[28]||(e[28]=c("label",{class:"block text-sm font-medium text-gray-700"},"Agendável pelo site?",-1)),M(c("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>n.form.allowOnlineBooking=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[27]||(e[27]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,KA),[[be,n.form.allowOnlineBooking]])]),c("div",null,[e[30]||(e[30]=c("label",{class:"block text-sm font-medium text-gray-700"},"É pacote?",-1)),M(c("select",{"onUpdate:modelValue":e[11]||(e[11]=d=>n.form.isPackage=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[29]||(e[29]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,GA),[[be,n.form.isPackage]])]),n.form.isPackage?(m(),y("div",YA,[e[31]||(e[31]=c("label",{class:"block text-sm font-medium text-gray-700"},"Quantidade de sessões",-1)),M(c("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=d=>n.form.sessions=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,JA),[[O,n.form.sessions]])])):I("",!0),c("div",null,[e[33]||(e[33]=c("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(c("select",{"onUpdate:modelValue":e[13]||(e[13]=d=>n.form.active=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[32]||(e[32]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,XA),[[be,n.form.active]])]),c("div",null,[e[35]||(e[35]=c("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(c("select",{"onUpdate:modelValue":e[14]||(e[14]=d=>n.form.active=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[34]||(e[34]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),512),[[be,n.form.active]])]),c("div",null,[e[37]||(e[37]=c("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(c("select",{"onUpdate:modelValue":e[15]||(e[15]=d=>n.form.active=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[36]||(e[36]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),512),[[be,n.form.active]])]),c("div",QA,[c("button",{type:"button",onClick:e[16]||(e[16]=(...d)=>o.closeModal&&o.closeModal(...d)),class:"px-4 py-2 rounded border"},S(n.viewMode?"Fechar":"Cancelar"),1),n.viewMode?(m(),y("button",{key:0,type:"button",onClick:e[17]||(e[17]=(...d)=>o.enableEditing&&o.enableEditing(...d)),class:"btn"},"Editar")):(m(),y("button",ZA,"Salvar"))])],32)]),_:1},8,["onClose"])):I("",!0)])])}const tE=ae(vA,[["render",eE]]),sE={name:"Usuarios",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{form:{email:"",password:""},sidebarOpen:window.innerWidth>=768,userId:null,successMessage:"",errorMessage:"",users:[],search:"",showUserModal:!1,userModalMode:"new",selectedUserId:null,userForm:{email:"",password:"",role:"user"}}},methods:{async handleAddUser(){if(this.successMessage="",this.errorMessage="",this.form.email&&!Ft(this.form.email)){this.errorMessage="E-mail inválido";return}const{data:{user:t}}=await C.auth.getUser(),{data:{session:e}}=await C.auth.getSession();let s=null;const i=["business_name","description","area_atuacao","phone","whatsapp","address","instagram","facebook","youtube","x","image_url","slug","start_time","end_time","week_days","daily_schedule","cancel_limit_hours","pix_key","company_id"];if(t){const{data:r}=await C.from("profiles").select(i.join(",")).eq("id",t.id).single();s=r}const{data:n,error:o}=await C.auth.signUp({email:this.form.email,password:this.form.password,options:{data:{company_id:s?s.company_id:null}}});if(e&&await C.auth.setSession(e),o)this.errorMessage="Erro ao cadastrar usuário: "+o.message;else{if(n!=null&&n.user&&s){const r={id:n.user.id,email:n.user.email,company_id:s.company_id,onboarding_complete:!0,role:"user"};for(const a of i)a!=="company_id"&&s[a]!==void 0&&(r[a]=s[a]);await C.from("profiles").upsert(r,{onConflict:["id"]})}this.successMessage="Usuário cadastrado! Verifique o e-mail para ativar a conta.",this.form={email:"",password:""},await this.fetchUsers()}},openUserModal(t,e="new"){this.userModalMode=e,t?(this.selectedUserId=t.id,this.userForm={email:t.email,password:"",role:t.role}):(this.selectedUserId=null,this.userForm={email:"",password:"",role:"user"}),this.showUserModal=!0},handleUserClose(){this.userModalMode==="view"?this.closeUserModal():confirm("Tem certeza? Os dados não foram salvos e serão perdidos.")&&this.closeUserModal()},closeUserModal(){this.showUserModal=!1,this.userModalMode="new",this.selectedUserId=null,this.userForm={email:"",password:"",role:"user"}},enableUserEdit(){this.userModalMode="edit"},async handleSaveUser(){if(this.userModalMode!=="view"){if(this.userForm.email&&!Ft(this.userForm.email)){alert("E-mail inválido");return}if(this.selectedUserId){const{error:t}=await C.from("profiles").update({email:this.userForm.email}).eq("id",this.selectedUserId);if(t)alert("Erro ao salvar usuário: "+t.message);else{const e=this.users.findIndex(s=>s.id===this.selectedUserId);e!==-1&&(this.users[e].email=this.userForm.email),this.closeUserModal()}}else this.form={email:this.userForm.email,password:this.userForm.password},await this.handleAddUser(),this.closeUserModal()}},async fetchUsers(){const{data:t}=await C.from("profiles").select("company_id").eq("id",this.userId).single();if(t){let e=C.from("profiles").select("id, email, role");t.company_id===null?e=e.is("company_id",null):e=e.eq("company_id",t.company_id);const{data:s}=await e;this.users=s||[]}}},computed:{isUserView(){return this.userModalMode==="view"},filteredUsers(){const t=this.search.toLowerCase();return this.users.filter(e=>e.id.toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t))}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchUsers()}},nE={class:"min-h-screen flex bg-gray-100 relative"},iE={class:"flex-1 p-8 space-y-6"},oE={key:0,class:"flex items-center mb-4"},rE={class:"bg-white p-4 rounded-lg shadow"},aE={key:0,class:"text-green-600 mt-4"},lE={key:1,class:"text-red-600 mt-4"},cE={class:"bg-white p-4 rounded-lg shadow"},dE={class:"flex justify-between items-center mb-4"},uE={class:"overflow-x-auto"},hE={class:"min-w-full text-left"},fE={class:"px-4 py-2"},pE={class:"px-4 py-2"},mE={class:"px-4 py-2"},gE={class:"px-4 py-2 text-right"},bE=["onClick"],yE={key:0},xE={class:"text-lg font-semibold mb-4"},vE=["disabled"],_E=["disabled"],wE={class:"flex justify-end space-x-2"},kE=["disabled"];function SE(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",nE,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",iE,[n.sidebarOpen?I("",!0):(m(),y("div",oE,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Usuários"}),c("section",rE,[e[16]||(e[16]=c("h3",{class:"text-lg font-medium mb-4"},"Cadastrar novo usuário",-1)),c("form",{onSubmit:e[4]||(e[4]=ze((...d)=>o.handleAddUser&&o.handleAddUser(...d),["prevent"])),class:"space-y-4"},[c("div",null,[e[13]||(e[13]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=d=>n.form.email=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.email]])]),c("div",null,[e[14]||(e[14]=c("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),M(c("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=d=>n.form.password=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.password]])]),e[15]||(e[15]=c("div",{class:"flex justify-end"},[c("button",{type:"submit",class:"btn"},"Cadastrar")],-1))],32),n.successMessage?(m(),y("p",aE,S(n.successMessage),1)):I("",!0),n.errorMessage?(m(),y("p",lE,S(n.errorMessage),1)):I("",!0)]),c("section",cE,[c("div",dE,[e[17]||(e[17]=c("h3",{class:"text-lg font-medium"},"Usuários cadastrados",-1)),M(c("input",{"onUpdate:modelValue":e[5]||(e[5]=d=>n.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.search]])]),c("div",uE,[c("table",hE,[e[19]||(e[19]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"ID"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Perfil"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.filteredUsers,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",fE,S(d.id),1),c("td",pE,S(d.email),1),c("td",mE,S(d.role),1),c("td",gE,[c("button",{onClick:u=>o.openUserModal(d,"view"),class:"btn btn-sm"},"Visualizar",8,bE)])]))),128)),o.filteredUsers.length===0?(m(),y("tr",yE,e[18]||(e[18]=[c("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum usuário encontrado",-1)]))):I("",!0)])])])]),n.showUserModal?(m(),ge(l,{key:1,onClose:o.handleUserClose},{default:X(()=>[c("h3",xE,S(n.userModalMode==="new"?"Adicionar Usuário":"Cadastro de Usuário"),1),c("form",{onSubmit:e[11]||(e[11]=ze((...d)=>o.handleSaveUser&&o.handleSaveUser(...d),["prevent"])),class:"space-y-4"},[c("div",null,[e[20]||(e[20]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[6]||(e[6]=d=>n.userForm.email=d),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,vE),[[O,n.userForm.email]])]),c("div",null,[e[21]||(e[21]=c("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),M(c("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=d=>n.userForm.password=d),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,_E),[[O,n.userForm.password]])]),c("div",null,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700"},"Perfil",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=d=>n.userForm.role=d),disabled:"",class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.userForm.role]])]),c("div",wE,[c("button",{type:"button",onClick:e[9]||(e[9]=(...d)=>o.handleUserClose&&o.handleUserClose(...d)),class:"px-4 py-2 rounded border"},"Fechar"),n.userModalMode==="view"?(m(),y("button",{key:0,type:"button",onClick:e[10]||(e[10]=(...d)=>o.enableUserEdit&&o.enableUserEdit(...d)),class:"btn btn-success"},"Editar")):I("",!0),c("button",{type:"submit",class:"btn",disabled:o.isUserView},"Salvar",8,kE)])],32)]),_:1},8,["onClose"])):I("",!0)])])}const CE=ae(sE,[["render",SE]]),ME={name:"SearchProfiles",components:{Navbar:qt,Footer:Kt},data(){return{profiles:[],search:""}},computed:{filteredProfiles(){const t=this.search.toLowerCase();return this.profiles.filter(e=>e.business_name.toLowerCase().includes(t))}},async mounted(){const{data:t}=await C.from("profiles").select("id, business_name, description, slug, area_atuacao");t&&(this.profiles=t)}},AE={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-10"},EE={class:"max-w-2xl mx-auto px-4"},PE={class:"mb-6 text-center"},TE={class:"space-y-4"},IE={class:"text-xl font-semibold text-blue-600"},OE={key:0,class:"text-sm text-gray-500"},DE={class:"text-gray-700 mb-2"},RE={key:0,class:"text-center text-gray-500 py-6"};function LE(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("div",AE,[c("div",EE,[c("div",PE,[e[1]||(e[1]=c("h1",{class:"text-3xl font-extrabold text-blue-700 mb-4"},"Buscar perfis",-1)),M(c("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>n.search=d),type:"text",placeholder:"Digite o nome do estabelecimento",class:"w-full px-4 py-2 border rounded-md"},null,512),[[O,n.search]])]),c("ul",TE,[(m(!0),y($,null,Q(o.filteredProfiles,d=>(m(),y("li",{key:d.id,class:"bg-white p-4 rounded-md shadow"},[c("h2",IE,S(d.business_name),1),d.area_atuacao?(m(),y("p",OE,S(d.area_atuacao),1)):I("",!0),c("p",DE,S(d.description),1),D(a,{to:"/"+d.slug,class:"text-blue-600 hover:underline"},{default:X(()=>e[2]||(e[2]=[se(" Ver perfil ")])),_:2,__:[2]},1032,["to"])]))),128)),o.filteredProfiles.length===0?(m(),y("li",RE," Nenhum resultado encontrado ")):I("",!0)])])]),D(l)],64)}const FE=ae(ME,[["render",LE]]),jE={name:"PublicPage",components:{Modal:rs},data(){return{profile:null,services:[],showModal:!1,selectedService:null,form:{name:"",email:"",phone:"",cpf:"",date:"",time:""},slotError:"",schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null}}},computed:{whatsappLink(){var s;return`https://wa.me/${(((s=this.profile)==null?void 0:s.whatsapp)||"").replace(/\D/g,"")}`}},watch:{"form.date"(){this.slotError=""},"form.time"(){this.slotError=""}},methods:{phoneMask:bn,cpfMask:Al,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},openModal(t){this.selectedService=t,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedService=null,this.form={name:"",email:"",phone:"",cpf:"",date:"",time:""},this.slotError=""},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const i=this.schedule.dailySchedule[s];return!i||!i.enabled||!i.start||!i.end?!1:e>=i.start&&e<=i.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},async handleSchedule(){if(this.form.email&&!Ft(this.form.email)){alert("E-mail inválido");return}if(!this.isSlotAllowed(this.form.date,this.form.time)){this.slotError="Este horário não está disponível. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}const{data:t}=await C.from("appointments").select("id").eq("user_id",this.profile.id).eq("date",this.form.date).eq("time",this.form.time).limit(1);if(t&&t.length){this.slotError="Este horário não está disponível. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}let e,s=null;if(this.form.email){const{data:o}=await C.from("clients").select("id, active").eq("user_id",this.profile.id).eq("email",this.form.email).maybeSingle();o&&(s=o)}if(!s&&this.form.cpf){const{data:o}=await C.from("clients").select("id, active").eq("user_id",this.profile.id).eq("cpf",this.form.cpf).maybeSingle();o&&(s=o)}if(!s&&this.form.phone){const{data:o}=await C.from("clients").select("id, active").eq("user_id",this.profile.id).eq("phone",this.form.phone).maybeSingle();o&&(s=o)}if(s){if(s.active===!1){alert("Seu cadastro está inativo. Entre em contato com o consultório.");return}e=s.id;const{error:o}=await C.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0}).eq("id",e);o&&console.error("Erro ao atualizar cliente:",o.message)}else{const{data:o,error:r}=await C.from("clients").insert({user_id:this.profile.id,name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0,active:!0}).select().single();if(r){alert("Erro ao cadastrar cliente: "+r.message);return}e=o.id}const{data:i,error:n}=await C.from("appointments").insert({user_id:this.profile.id,client_id:e,service_id:this.selectedService.id,date:this.form.date,time:this.form.time,duration:this.selectedService.duration,confirmed:!1,from_site:!0}).select().single();if(n){alert("Erro ao agendar: "+n.message);return}this.closeModal(),this.$router.push({name:"PagamentoAgendamento",params:{id:i.id}})}},async mounted(){const t=this.$route.params.slug,{data:e}=await C.from("profiles").select("*").eq("slug",t).single();if(e){this.profile=e;const{data:s}=await C.from("services").select().eq("user_id",e.id).eq("allow_online_booking",!0).eq("active",!0);this.services=s||[],this.schedule.startTime=e.start_time||"",this.schedule.endTime=e.end_time||"",this.schedule.weekDays=e.week_days?e.week_days.split(","):[],this.schedule.dailySchedule=e.daily_schedule?typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule:null}}},UE={class:"min-h-screen flex flex-col bg-white"},NE={key:0,class:"flex-1"},BE={class:"bg-blue-600 text-white py-12"},VE={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},$E=["src"],HE={class:"text-4xl font-bold"},zE={key:0,class:"text-sm"},WE={class:"text-lg"},qE={class:"max-w-5xl mx-auto px-4 py-12 space-y-16"},KE={key:0,class:"grid gap-6 md:grid-cols-2"},GE={class:"text-lg font-medium text-blue-700"},YE={class:"text-sm text-gray-600"},JE={class:"text-sm text-gray-500 mt-1"},XE={class:"text-sm text-gray-500"},QE=["onClick"],ZE={key:1,class:"text-gray-500"},eP={class:"space-y-1 text-gray-700"},tP=["href"],sP={key:2,class:"flex-1 flex items-center justify-center text-gray-500"},nP={class:"text-lg font-semibold mb-4"},iP={key:0,class:"mt-1 text-sm text-red-600"},oP={class:"flex justify-end gap-2"},rP={key:4,class:"bg-gray-100 py-6"},aP={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},lP={class:"space-x-4 text-blue-600"},cP=["href"],dP=["href"],uP=["href"],hP=["href"],fP={class:"text-sm text-gray-500"};function pP(t,e,s,i,n,o){const r=j("Modal");return m(),y("div",UE,[n.profile?(m(),y("section",NE,[c("div",BE,[c("div",VE,[c("img",{src:n.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,$E),c("h1",HE,S(n.profile.business_name),1),n.profile.area_atuacao?(m(),y("p",zE,S(n.profile.area_atuacao),1)):I("",!0),c("p",WE,S(n.profile.description),1)])]),c("div",qE,[c("div",null,[e[10]||(e[10]=c("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Serviços",-1)),n.services.length?(m(),y("ul",KE,[(m(!0),y($,null,Q(n.services,a=>(m(),y("li",{key:a.id,class:"p-4 bg-gray-50 border rounded-lg shadow"},[c("h3",GE,S(a.name),1),c("p",YE,S(a.description),1),c("p",JE,"Duração: "+S(a.duration)+" minutos",1),c("p",XE,"Valor: "+S(o.formatPrice(a.price)),1),c("button",{class:"btn mt-2",onClick:l=>o.openModal(a)},"Agendar",8,QE)]))),128))])):(m(),y("p",ZE,"Nenhum serviço cadastrado."))]),c("div",null,[e[15]||(e[15]=c("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Contato",-1)),c("ul",eP,[c("li",null,[e[11]||(e[11]=c("strong",null,"Telefone:",-1)),se(" "+S(n.profile.phone),1)]),c("li",null,[e[12]||(e[12]=c("strong",null,"WhatsApp:",-1)),se(" "+S(n.profile.whatsapp),1)]),c("li",null,[e[13]||(e[13]=c("strong",null,"Email:",-1)),se(" "+S(n.profile.email),1)]),c("li",null,[e[14]||(e[14]=c("strong",null,"Endereço:",-1)),se(" "+S(n.profile.address),1)])])])])])):I("",!0),n.profile&&n.profile.whatsapp?(m(),y("a",{key:1,href:o.whatsappLink,target:"_blank",rel:"noopener",class:"fixed bottom-4 right-4 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg"},e[16]||(e[16]=[c("img",{src:_l,alt:"WhatsApp",class:"w-6 h-6"},null,-1)]),8,tP)):(m(),y("div",sP,e[17]||(e[17]=[c("p",null,"Carregando perfil...",-1)]))),n.showModal?(m(),ge(r,{key:3,onClose:o.closeModal},{default:X(()=>{var a;return[c("h3",nP,"Agendar "+S((a=n.selectedService)==null?void 0:a.name),1),c("form",{onSubmit:e[9]||(e[9]=ze((...l)=>o.handleSchedule&&o.handleSchedule(...l),["prevent"])),class:"space-y-4"},[c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>n.form.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.name]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),M(c("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>n.form.email=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.email]])]),c("div",null,[e[20]||(e[20]=c("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>n.form.phone=l),onInput:e[3]||(e[3]=l=>n.form.phone=o.phoneMask(n.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.phone]])]),c("div",null,[e[21]||(e[21]=c("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>n.form.cpf=l),onInput:e[5]||(e[5]=l=>n.form.cpf=o.cpfMask(n.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.cpf]])]),c("div",null,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>n.form.date=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.date]])]),c("div",null,[e[23]||(e[23]=c("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),M(c("input",{type:"time",step:"60","onUpdate:modelValue":e[7]||(e[7]=l=>n.form.time=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.time]]),n.slotError?(m(),y("p",iP,S(n.slotError),1)):I("",!0)]),c("div",oP,[c("button",{type:"button",onClick:e[8]||(e[8]=(...l)=>o.closeModal&&o.closeModal(...l)),class:"px-4 py-2 rounded border"},"Cancelar"),e[24]||(e[24]=c("button",{type:"submit",class:"btn"},"Agendar",-1))])],32)]}),_:1},8,["onClose"])):I("",!0),n.profile?(m(),y("footer",rP,[c("div",aP,[c("div",lP,[n.profile.instagram?(m(),y("a",{key:0,href:n.profile.instagram,class:"hover:underline"},"Instagram",8,cP)):I("",!0),n.profile.facebook?(m(),y("a",{key:1,href:n.profile.facebook,class:"hover:underline"},"Facebook",8,dP)):I("",!0),n.profile.youtube?(m(),y("a",{key:2,href:n.profile.youtube,class:"hover:underline"},"YouTube",8,uP)):I("",!0),n.profile.x?(m(),y("a",{key:3,href:n.profile.x,class:"hover:underline"},"X (Twitter)",8,hP)):I("",!0)]),c("p",fP,"© "+S(new Date().getFullYear())+" "+S(n.profile.business_name),1)])])):I("",!0)])}const mP=ae(jE,[["render",pP]]),gP={name:"Planos",components:{Navbar:qt,Footer:Kt}},bP={class:"max-w-5xl mx-auto px-4 py-16"},yP={class:"text-center mt-8"};function xP(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("section",bP,[e[1]||(e[1]=Ws('<h1 class="text-3xl font-bold text-center mb-8">Conheça nossos planos</h1><div class="bg-white p-4 rounded-lg shadow"><div class="overflow-x-auto"><table class="min-w-full text-left"><thead class="bg-gray-50"><tr><th class="px-4 py-2 font-medium text-gray-700">Recursos</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Básico</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Beta</th></tr></thead><tbody><tr><td class="border-t px-4 py-2 text-gray-600">Valor</td><td class="border-t px-4 py-2 text-center font-semibold">Grátis</td><td class="border-t px-4 py-2 text-center font-semibold line-through text-gray-400">R$167,97</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Cadastro de pacientes</td><td class="border-t px-4 py-2 text-center">Até 5 pacientes</td><td class="border-t px-4 py-2 text-center">Ilimitado</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Lembretes por e-mail</td><td class="border-t px-4 py-2 text-center">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Lembretes via WhatsApp</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Customização de domínio da página pública</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Página pública sem banner do Agenda Zen</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Geração de recibos de atendimentos</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Envio de recibos por e-mail automático</td><td class="border-t px-4 py-2 text-center line-through text-gray-400">✓</td><td class="border-t px-4 py-2 text-center">✓</td></tr></tbody></table></div></div>',2)),c("div",yP,[D(a,{to:"/cadastro",class:"btn"},{default:X(()=>e[0]||(e[0]=[se(" Contratar plano ")])),_:1,__:[0]})])]),D(l)],64)}const vP=ae(gP,[["render",xP]]),_P={name:"Salas",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{userId:null,showModal:!1,editingId:null,viewMode:!1,search:"",form:{name:"",googleMeetLink:"",active:!0},rooms:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{openModal(t,e=!1){this.viewMode=e,t?(this.editingId=t.id,this.form={name:t.name,googleMeetLink:t.google_meet_link,active:t.active}):(this.editingId=null,this.form={name:"",googleMeetLink:"",active:!0}),this.showModal=!0},generateMeetLink(){const t=window.open("https://meet.google.com/new","_blank");setTimeout(()=>{try{this.form.googleMeetLink=t.location.href}catch{}},3e3)},async pasteFromClipboard(){try{const t=await navigator.clipboard.readText();this.form.googleMeetLink=t}catch{alert("Não foi possível acessar o conteúdo da área de transferência.")}},closeModal(){this.showModal=!1,this.viewMode=!1,this.form={name:"",googleMeetLink:"",active:!0},this.editingId=null},enableEditing(){this.viewMode=!1},async handleSaveRoom(){let t,e;if(this.editingId?{data:t,error:e}=await C.from("rooms").update({name:this.form.name,google_meet_link:this.form.googleMeetLink,active:this.form.active}).eq("id",this.editingId).select().single():{data:t,error:e}=await C.from("rooms").insert({name:this.form.name,google_meet_link:this.form.googleMeetLink,user_id:this.userId,active:this.form.active}).select().single(),e)alert("Erro ao salvar sala: "+e.message);else{if(this.editingId){const s=this.rooms.findIndex(i=>i.id===this.editingId);s!==-1&&(this.rooms[s]=t)}else this.rooms.push(t);this.closeModal()}},async handleDeleteRoom(t){if(!confirm("Tem certeza que deseja excluir esta sala?"))return;const{data:s}=await C.from("appointments").select("id").eq("room_id",t).limit(1);if(s&&s.length){const{error:n}=await C.from("rooms").update({active:!1}).eq("id",t);if(n)alert("Erro ao inativar sala: "+n.message);else{const o=this.rooms.findIndex(r=>r.id===t);o!==-1&&(this.rooms[o].active=!1),alert("Sala inativada.")}return}const{error:i}=await C.from("rooms").delete().eq("id",t);i?alert("Erro ao excluir sala: "+i.message):this.rooms=this.rooms.filter(n=>n.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{filteredRooms(){const t=this.search.toLowerCase();return this.rooms.filter(e=>e.name.toLowerCase().includes(t)||e.google_meet_link&&e.google_meet_link.toLowerCase().includes(t))},paginatedRooms(){const t=(this.page-1)*this.pageSize;return this.filteredRooms.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredRooms.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId),s=e?await Es(e):[this.userId],{data:i}=await C.from("rooms").select().in("user_id",s);i&&(this.rooms=i)}},wP={class:"min-h-screen flex bg-gray-100 relative"},kP={class:"flex-1 p-4 md:p-8 space-y-6"},SP={key:0,class:"flex items-center mb-4"},CP={class:"bg-white p-4 rounded-lg shadow"},MP={class:"flex justify-between items-center mb-4"},AP={class:"flex items-center space-x-3"},EP={class:"overflow-x-auto"},PP={class:"min-w-full text-left"},TP={class:"px-4 py-2"},IP={class:"px-4 py-2"},OP=["href"],DP={class:"px-4 py-2 text-right space-x-2 whitespace-nowrap"},RP=["onClick"],LP=["onClick"],FP=["onClick"],jP={key:0},UP={class:"mt-4 flex justify-between items-center"},NP=["disabled"],BP={class:"text-sm"},VP=["disabled"],$P={class:"text-lg font-semibold mb-4"},HP=["disabled"],zP={class:"flex space-x-2 mt-1"},WP=["disabled"],qP=["disabled"],KP=["disabled"],GP=["disabled"],YP={class:"flex justify-end space-x-2"},JP={key:1,type:"submit",class:"btn"};function XP(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",wP,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",kP,[n.sidebarOpen?I("",!0):(m(),y("div",SP,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[14]||(e[14]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Salas"}),c("section",CP,[c("div",MP,[e[15]||(e[15]=c("h3",{class:"text-lg font-medium"},"Salas cadastradas",-1)),c("div",AP,[M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>n.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.search]]),c("button",{onClick:e[3]||(e[3]=d=>o.openModal()),class:"btn"}," Nova Sala ")])]),c("div",EP,[c("table",PP,[e[17]||(e[17]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Google Meet"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.paginatedRooms,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",TP,S(d.name),1),c("td",IP,[d.google_meet_link?(m(),y("a",{key:0,href:d.google_meet_link,class:"text-blue-600 underline",target:"_blank"}," Link ",8,OP)):I("",!0)]),c("td",DP,[c("button",{onClick:u=>o.openModal(d,!0),class:"btn btn-sm btn-secondary"},"Visualizar",8,RP),c("button",{onClick:u=>o.openModal(d),class:"btn btn-sm"},"Editar",8,LP),c("button",{onClick:u=>o.handleDeleteRoom(d.id),class:"btn btn-sm btn-danger"}," Excluir ",8,FP)])]))),128)),o.filteredRooms.length===0?(m(),y("tr",jP,e[16]||(e[16]=[c("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"}," Nenhuma sala encontrada ",-1)]))):I("",!0)])]),c("div",UP,[c("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...d)=>o.prevPage&&o.prevPage(...d)),disabled:n.page===1}," Anterior ",8,NP),c("span",BP,"Página "+S(n.page)+" de "+S(o.totalPages),1),c("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...d)=>o.nextPage&&o.nextPage(...d)),disabled:n.page===o.totalPages}," Próxima ",8,VP)])])]),n.showModal?(m(),ge(l,{key:1,onClose:o.closeModal},{default:X(()=>[c("h3",$P,S(n.viewMode?"Visualizar Sala":n.editingId?"Editar Sala":"Adicionar Sala"),1),c("form",{onSubmit:e[13]||(e[13]=ze((...d)=>o.handleSaveRoom&&o.handleSaveRoom(...d),["prevent"])),class:"space-y-6"},[c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=d=>n.form.name=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,HP),[[O,n.form.name]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"Link do Google Meet",-1)),c("div",zP,[M(c("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=d=>n.form.googleMeetLink=d),disabled:n.viewMode,class:"flex-grow px-4 py-2 border rounded-md"},null,8,WP),[[O,n.form.googleMeetLink]]),c("button",{type:"button",onClick:e[8]||(e[8]=(...d)=>o.generateMeetLink&&o.generateMeetLink(...d)),disabled:n.viewMode,class:"btn"},"Gerar",8,qP),c("button",{type:"button",onClick:e[9]||(e[9]=(...d)=>o.pasteFromClipboard&&o.pasteFromClipboard(...d)),disabled:n.viewMode,class:"btn"},"Paste",8,KP)]),e[20]||(e[20]=c("p",{class:"text-xs text-gray-500 mt-2"}," Após abrir a nova aba, copie o link da reunião e cole no campo acima. ",-1))]),c("div",null,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700"},"Ativo?",-1)),M(c("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>n.form.active=d),disabled:n.viewMode,class:"w-full mt-1 px-4 py-2 border rounded-md"},e[21]||(e[21]=[c("option",{value:!0},"Sim",-1),c("option",{value:!1},"Não",-1)]),8,GP),[[be,n.form.active]])]),c("div",YP,[c("button",{type:"button",onClick:e[11]||(e[11]=(...d)=>o.closeModal&&o.closeModal(...d)),class:"px-4 py-2 rounded border"},S(n.viewMode?"Fechar":"Cancelar"),1),n.viewMode?(m(),y("button",{key:0,type:"button",onClick:e[12]||(e[12]=(...d)=>o.enableEditing&&o.enableEditing(...d)),class:"btn"},"Editar")):(m(),y("button",JP,"Salvar"))])],32)]),_:1},8,["onClose"])):I("",!0)])])}const QP=ae(_P,[["render",XP]]),ZP={name:"Comprovantes",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],receipts:[],clients:[],showGenerateModal:!1,generateForm:{clientId:"",startDate:"",endDate:"",templateId:""},receiptContent:null}},methods:{formatDateBR:qe,closeGenerateModal(){this.showGenerateModal=!1,this.generateForm={clientId:"",startDate:"",endDate:"",templateId:""}},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},showReceipt(t){this.receiptContent=t},async handleGenerate(){const{data:t}=await C.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.generateForm.clientId).gte("date",this.generateForm.startDate).lte("date",this.generateForm.endDate).neq("status","canceled").neq("status","deleted").order("date",{ascending:!0}).order("time",{ascending:!0}),e=this.templates.find(a=>a.id===this.generateForm.templateId),s=this.clients.find(a=>a.id===this.generateForm.clientId);let i=e?e.content:"";s&&(i=i.replace("{{client_name}}",s.name));const n=(t||[]).map(a=>`- ${qe(a.date)} ${a.time}`).join(`
`);i=i.replace("{{appointments}}",n);const{data:o,error:r}=await C.from("receipts").insert({user_id:this.userId,client_id:this.generateForm.clientId,template_id:this.generateForm.templateId,start_date:this.generateForm.startDate,end_date:this.generateForm.endDate,content:i}).select().single();r?alert("Erro ao gerar comprovante: "+r.message):(this.receipts.push(o),this.closeGenerateModal())}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await C.from("receipt_templates").select().eq("user_id",this.userId);s&&(this.templates=s);const{data:i}=await C.from("receipts").select().eq("user_id",this.userId).order("created_at",{ascending:!1});i&&(this.receipts=i)}},eT={class:"min-h-screen flex bg-gray-100 relative"},tT={class:"flex-1 p-4 md:p-8 space-y-6"},sT={key:0,class:"flex items-center mb-4"},nT={class:"bg-white p-4 rounded-lg shadow space-y-4"},iT={class:"flex justify-between items-center"},oT={class:"overflow-x-auto"},rT={class:"min-w-full text-left"},aT={class:"px-4 py-2"},lT={class:"px-4 py-2"},cT={class:"px-4 py-2"},dT={class:"px-4 py-2 text-right"},uT=["onClick"],hT={key:0},fT=["value"],pT={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mT=["value"],gT={class:"flex justify-end space-x-2"},bT={class:"border rounded-md p-4 bg-gray-50"},yT={class:"whitespace-pre-wrap font-mono text-sm"};function xT(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",eT,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",tT,[n.sidebarOpen?I("",!0):(m(),y("div",sT,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[10]||(e[10]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Comprovantes"}),c("section",nT,[c("div",iT,[e[11]||(e[11]=c("h3",{class:"text-lg font-medium"},"Comprovantes Gerados",-1)),c("button",{onClick:e[2]||(e[2]=d=>n.showGenerateModal=!0),class:"btn"},"Novo Comprovante")]),c("div",oT,[c("table",rT,[e[13]||(e[13]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Criado em"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.receipts,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",aT,S(o.getClientName(d.client_id)),1),c("td",lT,S(o.formatDateBR(d.start_date))+" - "+S(o.formatDateBR(d.end_date)),1),c("td",cT,S(o.formatDateBR(d.created_at.split("T")[0])),1),c("td",dT,[c("button",{onClick:u=>o.showReceipt(d.content),class:"btn btn-sm"},"Ver",8,uT)])]))),128)),n.receipts.length===0?(m(),y("tr",hT,e[12]||(e[12]=[c("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum comprovante",-1)]))):I("",!0)])])])]),n.showGenerateModal?(m(),ge(l,{key:1,onClose:o.closeGenerateModal},{default:X(()=>[e[21]||(e[21]=c("h3",{class:"text-lg font-semibold mb-4"},"Novo Comprovante",-1)),c("form",{onSubmit:e[8]||(e[8]=ze((...d)=>o.handleGenerate&&o.handleGenerate(...d),["prevent"])),class:"space-y-4"},[c("div",null,[e[15]||(e[15]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),M(c("select",{"onUpdate:modelValue":e[3]||(e[3]=d=>n.generateForm.clientId=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[14]||(e[14]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.clients,d=>(m(),y("option",{key:d.id,value:d.id},S(d.name),9,fT))),128))],512),[[be,n.generateForm.clientId]])]),c("div",pT,[c("div",null,[e[16]||(e[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"De",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=d=>n.generateForm.startDate=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.generateForm.startDate]])]),c("div",null,[e[17]||(e[17]=c("label",{class:"block text-sm font-medium text-gray-700"},"Até",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=d=>n.generateForm.endDate=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.generateForm.endDate]])])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"Template",-1)),M(c("select",{"onUpdate:modelValue":e[6]||(e[6]=d=>n.generateForm.templateId=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[18]||(e[18]=c("option",{disabled:"",value:""},"Selecione",-1)),(m(!0),y($,null,Q(n.templates,d=>(m(),y("option",{key:d.id,value:d.id},S(d.name),9,mT))),128))],512),[[be,n.generateForm.templateId]])]),c("div",gT,[c("button",{type:"button",onClick:e[7]||(e[7]=(...d)=>o.closeGenerateModal&&o.closeGenerateModal(...d)),class:"px-4 py-2 rounded border"},"Cancelar"),e[20]||(e[20]=c("button",{type:"submit",class:"btn"},"Gerar",-1))])],32)]),_:1,__:[21]},8,["onClose"])):I("",!0),n.receiptContent?(m(),ge(l,{key:2,onClose:e[9]||(e[9]=d=>n.receiptContent=null)},{default:X(()=>[e[22]||(e[22]=c("h3",{class:"text-lg font-semibold text-center mb-4"},"Comprovante",-1)),c("div",bT,[c("pre",yT,S(n.receiptContent),1)])]),_:1,__:[22]})):I("",!0)])])}const vT=ae(ZP,[["render",xT]]),_T={name:"Atendimento",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"current",appointment:null,clientName:"",note:"",files:[],notes:[],userId:null,isEditing:!1,editingNoteId:null,editingAttachments:[]}},computed:{appointmentDateTime(){return this.appointment?`${qe(this.appointment.date)} ${gt(this.appointment.time)}`:""},groupedNotes(){const t={};return this.notes.forEach(e=>{const s=e.created_at.split("T")[0];t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).sort((e,s)=>new Date(s)-new Date(e)).map(e=>({date:qe(e),items:t[e]}))}},methods:{formatDateTime(t){return new Date(t).toLocaleString("pt-BR")},handleFileChange(t){const e=["pdf","doc","txt","png","jpeg","jpg"],s=Array.from(t.target.files);this.files=[];for(const i of s){const n=i.name.split(".").pop().toLowerCase();e.includes(n)?this.files.push(i):alert(`Formato de arquivo não permitido: ${i.name}`)}},editExistingNote(t,e=!0){(this.note&&this.note.trim()||this.files.length)&&!confirm("Dados não salvos serão perdidos. Deseja continuar?")||(this.isEditing=!0,this.editingNoteId=t.id,this.editingAttachments=[...t.attachments||[]],this.note=t.note,this.files=[],e&&(this.activeTab="current"))},cancelEdit(){this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],this.note="",this.files=[]},async removeAttachment(t){if(!confirm("Remover este anexo?"))return;const i=this.editingAttachments[t].split("/appointment-attachments/");if(i.length===2){const n=i[1];await C.storage.from("appointment-attachments").remove([n])}this.editingAttachments.splice(t,1)},async fetchData(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("appointments").select().eq("id",this.$route.params.id).single();if(this.appointment=e,this.clientName="",e){const{data:o}=await C.from("clients").select("name").eq("id",e.client_id).single();o&&(this.clientName=o.name)}let s=[this.$route.params.id];if(e){const{data:o}=await C.from("appointments").select("id").eq("user_id",this.userId).eq("client_id",e.client_id);s=o?o.map(r=>r.id):s}const{data:i}=await C.from("appointment_notes").select().in("appointment_id",s).order("created_at",{ascending:!1});this.notes=(i||[]).map(o=>({...o,attachments:o.attachments||[]}));const n=this.$route.query.note;if(n){const o=this.notes.find(r=>r.id===Number(n)||r.id===n);o&&this.editExistingNote(o)}},async saveNote(){if(!this.note.trim()&&!this.files.length&&!this.editingAttachments.length)return;const t=this.isEditing,e=[];for(const n of this.files){const o=n.name.split(".").pop(),r=`${this.$route.params.id}-${Date.now()}-${Math.random().toString(36).slice(2)}.${o}`,{error:a}=await C.storage.from("appointment-attachments").upload(r,n);if(!a){const{data:{publicUrl:l}}=C.storage.from("appointment-attachments").getPublicUrl(r);e.push(l)}}let s,i;if(this.isEditing){const n=[...this.editingAttachments,...e];if({data:s,error:i}=await C.from("appointment_notes").update({note:this.note,attachments:n}).eq("id",this.editingNoteId).select().single(),!i){const o=this.notes.findIndex(r=>r.id===this.editingNoteId);o!==-1&&(this.notes[o]={...s,attachments:s.attachments||[]})}}else({data:s,error:i}=await C.from("appointment_notes").insert({appointment_id:this.$route.params.id,user_id:this.userId,note:this.note,attachments:e}).select().single()),i||this.notes.unshift({...s,attachments:s.attachments||[]});if(i)alert("Erro ao salvar atendimento: "+i.message);else if(this.note="",this.files=[],this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],!t){const{data:n,error:o}=await C.from("appointments").update({status:"completed"}).eq("id",this.$route.params.id).select().single();!o&&this.appointment&&(this.appointment.status=n.status),this.$router.push("/agendamentos")}}},watch:{"$route.params.id"(){this.fetchData()},"$route.query.note"(t){if(!t){this.isEditing&&this.cancelEdit();return}const e=this.notes.find(s=>s.id===Number(t)||s.id===t);e&&this.editExistingNote(e)}},async mounted(){await this.fetchData()}},wT={class:"min-h-screen flex bg-gray-100 relative"},kT={class:"flex-1 p-4 md:p-8"},ST={key:0,class:"flex items-center mb-4"},CT={class:"bg-white p-4 rounded-lg shadow mt-4"},MT={class:"border-b mb-4"},AT={class:"flex space-x-4"},ET={key:0},PT={class:"mb-2 text-sm text-gray-600"},TT={class:"mb-2 text-sm text-gray-600"},IT={key:0,class:"mb-4 space-y-1"},OT=["href"],DT=["onClick"],RT={class:"space-x-2"},LT={key:1},FT={class:"font-semibold mb-2"},jT={class:"text-sm text-gray-600 mb-1"},UT={class:"mb-2 whitespace-pre-line"},NT={key:0,class:"space-x-2 mb-2"},BT=["href"],VT={class:"text-right"},$T=["onClick"];function HT(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",wT,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",kT,[n.sidebarOpen?I("",!0):(m(),y("div",ST,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[8]||(e[8]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Atendimento"}),c("section",CT,[c("div",MT,[c("nav",AT,[c("button",{class:$e(n.activeTab==="current"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[2]||(e[2]=l=>n.activeTab="current")},"Atendimento",2),c("button",{class:$e(n.activeTab==="history"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[3]||(e[3]=l=>n.activeTab="history")},"Histórico de atendimento",2)])]),n.activeTab==="current"?(m(),y("div",ET,[c("p",PT,"Data/hora: "+S(o.appointmentDateTime),1),c("p",TT,"Cliente: "+S(n.clientName),1),M(c("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.note=l),class:"w-full border rounded p-2 mb-4",rows:"6",placeholder:"Descreva o atendimento"},null,512),[[O,n.note]]),n.isEditing&&n.editingAttachments.length?(m(),y("div",IT,[(m(!0),y($,null,Q(n.editingAttachments,(l,d)=>(m(),y("div",{key:d,class:"flex items-center space-x-2"},[c("a",{href:l,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+S(d+1),9,OT),c("button",{type:"button",onClick:u=>o.removeAttachment(d),class:"text-red-600 text-sm"},"Remover",8,DT)]))),128))])):I("",!0),c("input",{type:"file",multiple:"",onChange:e[5]||(e[5]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),class:"mb-4",accept:".pdf,.doc,.txt,.png,.jpeg,.jpg"},null,32),c("div",RT,[c("button",{onClick:e[6]||(e[6]=(...l)=>o.saveNote&&o.saveNote(...l)),class:"btn"},S(n.isEditing?"Atualizar":"Finalizar atendimento"),1),n.isEditing?(m(),y("button",{key:0,onClick:e[7]||(e[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-danger"},"Cancelar")):I("",!0)])])):(m(),y("div",LT,[(m(!0),y($,null,Q(o.groupedNotes,l=>(m(),y("div",{key:l.date,class:"mb-4"},[c("h4",FT,S(l.date),1),(m(!0),y($,null,Q(l.items,d=>(m(),y("div",{key:d.id,class:"border p-2 rounded mb-2"},[c("p",jT,S(o.formatDateTime(d.created_at)),1),c("p",UT,S(d.note),1),d.attachments&&d.attachments.length?(m(),y("div",NT,[(m(!0),y($,null,Q(d.attachments,(u,h)=>(m(),y("a",{key:h,href:u,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+S(h+1),9,BT))),128))])):I("",!0),c("div",VT,[c("button",{onClick:u=>o.editExistingNote(d),class:"btn btn-sm"},"Editar atendimento",8,$T)])]))),128))]))),128))]))])])])}const zT=ae(_T,[["render",HT]]),WT={name:"Templates",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],showTemplateModal:!1,templateForm:{name:"",content:""}}},methods:{closeTemplateModal(){this.showTemplateModal=!1,this.templateForm={name:"",content:""}},async handleAddTemplate(){const{data:t,error:e}=await C.from("receipt_templates").insert({name:this.templateForm.name,content:this.templateForm.content,user_id:this.userId}).select().single();e?alert("Erro ao salvar template: "+e.message):(this.templates.push(t),this.closeTemplateModal())}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("receipt_templates").select().eq("user_id",this.userId);e&&(this.templates=e)}},qT={class:"min-h-screen flex bg-gray-100 relative"},KT={class:"flex-1 p-4 md:p-8 space-y-6"},GT={key:0,class:"flex items-center mb-4"},YT={class:"bg-white p-4 rounded-lg shadow space-y-4"},JT={class:"flex justify-between items-center"},XT={class:"overflow-x-auto"},QT={class:"min-w-full text-left"},ZT={class:"px-4 py-2"},eI={key:0},tI={class:"flex justify-end space-x-2"};function sI(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",qT,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",KT,[n.sidebarOpen?I("",!0):(m(),y("div",GT,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Templates"}),c("section",YT,[c("div",JT,[e[8]||(e[8]=c("h3",{class:"text-lg font-medium"},"Templates",-1)),c("button",{onClick:e[2]||(e[2]=d=>n.showTemplateModal=!0),class:"btn"},"Novo Template")]),c("div",XT,[c("table",QT,[e[10]||(e[10]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.templates,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",ZT,S(d.name),1)]))),128)),n.templates.length===0?(m(),y("tr",eI,e[9]||(e[9]=[c("td",{class:"px-4 py-6 text-center text-gray-500"},"Nenhum template",-1)]))):I("",!0)])])])]),n.showTemplateModal?(m(),ge(l,{key:1,onClose:o.closeTemplateModal},{default:X(()=>[e[15]||(e[15]=c("h3",{class:"text-lg font-semibold mb-4"},"Novo Template",-1)),c("form",{onSubmit:e[6]||(e[6]=ze((...d)=>o.handleAddTemplate&&o.handleAddTemplate(...d),["prevent"])),class:"space-y-4"},[c("div",null,[e[11]||(e[11]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=d=>n.templateForm.name=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.templateForm.name]])]),c("div",null,[e[12]||(e[12]=c("label",{class:"block text-sm font-medium text-gray-700"},"Conteúdo",-1)),M(c("textarea",{"onUpdate:modelValue":e[4]||(e[4]=d=>n.templateForm.content=d),class:"w-full mt-1 px-4 py-2 border rounded-md",rows:"4"},null,512),[[O,n.templateForm.content]]),e[13]||(e[13]=c("p",{class:"text-sm text-gray-500 mt-1"},"Use {{client_name}} e {{appointments}}",-1))]),c("div",tI,[c("button",{type:"button",onClick:e[5]||(e[5]=(...d)=>o.closeTemplateModal&&o.closeTemplateModal(...d)),class:"px-4 py-2 rounded border"},"Cancelar"),e[14]||(e[14]=c("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[15]},8,["onClose"])):I("",!0)])])}const nI=ae(WT,[["render",sI]]),iI={name:"Contato",components:{Navbar:qt,Footer:Kt},data(){return{nome:"",email:"",mensagem:"",sucesso:!1,erro:""}},methods:{async enviar(){if(this.sucesso=!1,this.erro="",this.email&&!Ft(this.email)){this.erro="E-mail inválido";return}const{error:t}=await C.from("contacts").insert({name:this.nome,email:this.email,message:this.mensagem});t?this.erro="Erro ao enviar mensagem: "+t.message:(this.sucesso=!0,this.nome="",this.email="",this.mensagem="")}}},oI={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-primary/10 px-4"},rI={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},aI={key:0,class:"mt-4 text-green-600 text-center"},lI={key:1,class:"mt-4 text-red-600 text-center"};function cI(t,e,s,i,n,o){const r=j("Navbar"),a=j("Footer");return m(),y($,null,[D(r),c("section",oI,[c("div",rI,[e[8]||(e[8]=Ws('<div class="mb-8 text-center"><h2 class="text-3xl font-extrabold text-primary-dark">Fale conosco</h2><p class="text-gray-500">Envie sua mensagem e entraremos em contato</p></div><div class="mb-6 text-center"><a href="https://wa.me/5518996233098" target="_blank" rel="noopener" class="btn btn-success inline-flex items-center space-x-2"><img src="'+_l+'" alt="WhatsApp" class="w-5 h-5"><span>Falar via WhatsApp</span></a></div>',2)),c("form",{onSubmit:e[3]||(e[3]=ze((...l)=>o.enviar&&o.enviar(...l),["prevent"])),class:"space-y-5"},[c("div",null,[e[4]||(e[4]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"nome"},"Nome",-1)),M(c("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.nome=l),id:"nome",type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[O,n.nome]])]),c("div",null,[e[5]||(e[5]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),M(c("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.email=l),id:"email",type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[O,n.email]])]),c("div",null,[e[6]||(e[6]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"mensagem"},"Mensagem",-1)),M(c("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.mensagem=l),id:"mensagem",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary",rows:"4"},null,512),[[O,n.mensagem]])]),e[7]||(e[7]=c("button",{type:"submit",class:"btn w-full"},"Enviar",-1))],32),n.sucesso?(m(),y("p",aI,"Mensagem enviada com sucesso!")):I("",!0),n.erro?(m(),y("p",lI,S(n.erro),1)):I("",!0)])]),D(a)],64)}const dI=ae(iI,[["render",cI]]),uI={name:"MinhaAssinatura",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768}},methods:{goBeta(){this.$router.push({path:"/assinatura-plus",query:{amount:"167.97"}})},goBasico(){this.$router.push("/dashboard")}}},hI={class:"min-h-screen flex bg-gray-100 relative"},fI={class:"flex-1 p-4 md:p-8 space-y-6"},pI={key:0,class:"flex items-center mb-4"},mI={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gI={class:"bg-white p-6 rounded-lg shadow space-y-4"},bI={class:"bg-white p-6 rounded-lg shadow space-y-4"};function yI(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",hI,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",fI,[n.sidebarOpen?I("",!0):(m(),y("div",pI,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[4]||(e[4]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Minha Assinatura"}),c("section",mI,[c("div",gI,[e[5]||(e[5]=Ws('<h3 class="text-xl font-semibold text-center">Básico</h3><p class="text-center text-2xl font-bold text-blue-600">Grátis</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de até 5 pacientes</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start line-through text-gray-400"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),c("button",{class:"btn mt-4 w-full",onClick:e[2]||(e[2]=(...l)=>o.goBasico&&o.goBasico(...l))},"Escolher")]),c("div",bI,[e[6]||(e[6]=Ws('<h3 class="text-xl font-semibold text-center">Beta</h3><p class="text-center text-2xl font-bold line-through text-gray-400">R$167,97</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2">✓</span>Cadastro de pacientes ilimitado</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes por e-mail</li><li class="flex items-start"><span class="mr-2">✓</span>Lembretes via WhatsApp</li><li class="flex items-start"><span class="mr-2">✓</span>Customização de domínio da página pública</li><li class="flex items-start"><span class="mr-2">✓</span>Página pública sem banner do Agenda Zen</li><li class="flex items-start"><span class="mr-2">✓</span>Geração de recibos de atendimentos</li><li class="flex items-start"><span class="mr-2">✓</span>Envio de recibos por e-mail automático</li></ul>',3)),c("button",{class:"btn mt-4 w-full",onClick:e[3]||(e[3]=(...l)=>o.goBeta&&o.goBeta(...l))},"Escolher")])])])])}const xI=ae(uI,[["render",yI]]),vI={name:"Faturamento",components:{Sidebar:Je,HeaderUser:Xe},data(){return{userId:null,userIds:[],sidebarOpen:window.innerWidth>=768,services:[],selectedServices:[],filterStart:"",filterEnd:"",groupBy:"mes",revenueData:[],chart:null,canSeeServices:!0}},methods:{async fetchServices(){const{data:t}=await C.from("services").select().in("user_id",this.userIds).eq("active",!0);this.services=t||[],this.selectedServices=this.canSeeServices?this.services.map(e=>e.id):[]},async fetchRevenue(){if(!this.filterStart||!this.filterEnd)return;const{data:t}=await C.from("appointments").select("date, service_id").in("user_id",this.userIds).gte("date",this.filterStart).lte("date",this.filterEnd),e=t||[],s={};this.services.forEach(o=>{s[o.id]=Number(o.price)||0});const i=this.selectedServices.length?e.filter(o=>this.selectedServices.includes(o.service_id)):e,n={};i.forEach(o=>{const r=new Date(o.date);let a="";if(this.groupBy==="dia")a=r.toISOString().split("T")[0];else if(this.groupBy==="semana"){const d=this.getWeekNumber(r);a=`${r.getFullYear()}-W${d}`}else a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`;const l=s[o.service_id]||0;n[a]=(n[a]||0)+l}),this.revenueData=Object.keys(n).sort().map(o=>({label:o,total:n[o]})),this.renderChart()},getWeekNumber(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const i=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-i)/864e5+1)/7)},renderChart(){const t=this.$refs.chartCanvas.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new ss(t,{type:"bar",data:{labels:this.revenueData.map(e=>this.formatLabel(e.label)),datasets:[{label:"Faturamento",data:this.revenueData.map(e=>e.total),backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},formatPrice(t){return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatLabel(t){if(this.groupBy==="dia")return qe(t);if(this.groupBy==="semana"){const[e,s]=t.split("-W");return`Semana ${s}/${e}`}if(this.groupBy==="mes"){const[e,s]=t.split("-");return`${s.padStart(2,"0")}/${e}`}return t}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId);this.userIds=e?await Es(e):[this.userId],this.canSeeServices=await ns("Servicos"),await this.fetchServices();const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),1),n=new Date(s.getFullYear(),s.getMonth()+1,0);this.filterStart=i.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0]}},_I={class:"min-h-screen flex bg-gray-100 relative"},wI={class:"flex-1 p-4 md:p-8 space-y-6"},kI={key:0,class:"flex items-center mb-4"},SI={class:"bg-white p-4 rounded-lg shadow space-y-4"},CI={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},MI={class:"mt-1 space-y-1"},AI=["value","disabled"],EI={class:"md:col-span-2"},PI={class:"grid grid-cols-2 gap-2 mt-1"},TI={class:"flex flex-col mt-3"},II={class:"flex justify-end"},OI={class:"bg-white p-4 rounded-lg shadow space-y-4"},DI={class:"overflow-x-auto"},RI={class:"min-w-full text-left"},LI={class:"px-4 py-2"},FI={class:"px-4 py-2"},jI={key:0},UI={class:"h-64"},NI={ref:"chartCanvas",class:"w-full h-full"};function BI(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",_I,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",wI,[n.sidebarOpen?I("",!0):(m(),y("div",kI,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Relatório de Faturamento"}),c("section",SI,[c("div",CI,[c("div",null,[e[8]||(e[8]=c("label",{class:"block text-sm font-medium text-gray-700"},"Serviços",-1)),c("div",MI,[(m(!0),y($,null,Q(n.services,l=>(m(),y("label",{key:l.id,class:"flex items-center space-x-2"},[M(c("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedServices=d),disabled:!n.canSeeServices},null,8,AI),[[Sr,n.selectedServices]]),c("span",null,S(l.name),1)]))),128))])]),c("div",EI,[e[13]||(e[13]=c("label",{class:"block text-sm font-medium text-gray-700"},"Datas",-1)),c("div",PI,[c("div",null,[e[9]||(e[9]=c("label",{class:"block text-xs font-medium text-gray-700"},"De",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>n.filterStart=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.filterStart]])]),c("div",null,[e[10]||(e[10]=c("label",{class:"block text-xs font-medium text-gray-700"},"Até",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>n.filterEnd=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.filterEnd]])])]),c("div",TI,[e[12]||(e[12]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),M(c("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>n.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},e[11]||(e[11]=[c("option",{value:"mes"},"Mês",-1),c("option",{value:"semana"},"Semana",-1),c("option",{value:"dia"},"Dia",-1)]),512),[[be,n.groupBy]])])])]),c("div",II,[c("button",{onClick:e[6]||(e[6]=(...l)=>o.fetchRevenue&&o.fetchRevenue(...l)),class:"btn"},"Aplicar")])]),c("section",OI,[c("div",DI,[c("table",RI,[e[15]||(e[15]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Período"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Faturamento")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.revenueData,l=>(m(),y("tr",{key:l.label,class:"border-b last:border-b-0"},[c("td",LI,S(o.formatLabel(l.label)),1),c("td",FI,S(o.formatPrice(l.total)),1)]))),128)),n.revenueData.length===0?(m(),y("tr",jI,e[14]||(e[14]=[c("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):I("",!0)])])]),c("div",UI,[c("canvas",NI,null,512)])])])])}const VI=ae(vI,[["render",BI]]),$I={name:"RelatorioAgendamentos",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,userIds:[],clients:[],services:[],appointments:[],filterStart:"",filterEnd:"",clientId:"",serviceId:"",canSeeClients:!0,canSeeServices:!0,userRole:null}},methods:{formatDateBR:qe,addHoursToTime:gt,setPeriodo(t){const e=new Date;let s=new Date(e),i=new Date(e);if(t==="semana"){const n=e.getDay(),o=n===0?6:n-1;s.setDate(e.getDate()-o),i=new Date(s),i.setDate(s.getDate()+6)}else t==="mes"&&(s=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0));this.filterStart=s.toISOString().split("T")[0],this.filterEnd=i.toISOString().split("T")[0],this.fetchAppointments()},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getStatusLabel(t){return t.status==="completed"?"atendimento realizado":t.status==="no_show"?"faltou":"atendimento pendente"},async fetchAppointments(){if(!this.filterStart||!this.filterEnd)return;let t=C.from("appointments").select().in("user_id",this.userIds).gte("date",this.filterStart).lte("date",this.filterEnd).neq("status","canceled").neq("status","deleted");this.canSeeClients&&this.clientId&&(t=t.eq("client_id",this.clientId)),this.canSeeServices&&this.serviceId&&(t=t.eq("service_id",this.serviceId));const{data:e}=await t.order("date",{ascending:!0}).order("time",{ascending:!0});this.appointments=e||[]}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("profiles").select("role").eq("id",this.userId).single();this.userRole=e?e.role:null;const s=await As(this.userId);this.userIds=s?await Es(s):[this.userId],this.canSeeClients=await ns("Clientes"),this.canSeeServices=await ns("Servicos");const{data:i}=await C.from("clients").select().in("user_id",this.userIds);i&&(this.clients=i);const{data:n}=await C.from("services").select().in("user_id",this.userIds).eq("active",!0);n&&(this.services=n);const r=new Date().toISOString().split("T")[0];this.filterStart=r,this.filterEnd=r,this.fetchAppointments()}},HI={class:"min-h-screen flex bg-gray-100 relative"},zI={class:"flex-1 p-4 md:p-8 space-y-6"},WI={key:0,class:"flex items-center mb-4"},qI={class:"bg-white p-4 rounded-lg shadow space-y-4"},KI={class:"flex flex-wrap items-end gap-2"},GI={class:"flex flex-wrap gap-2"},YI={class:"flex space-x-2"},JI=["disabled"],XI=["value"],QI=["disabled"],ZI=["value"],eO={class:"flex justify-end"},tO={class:"bg-white p-4 rounded-lg shadow"},sO={class:"overflow-x-auto"},nO={class:"min-w-full text-left"},iO={class:"px-4 py-2"},oO={class:"px-4 py-2"},rO={class:"px-4 py-2"},aO={class:"px-4 py-2"},lO={key:0};function cO(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",HI,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",zI,[n.sidebarOpen?I("",!0):(m(),y("div",WI,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[10]||(e[10]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Relatório de Agendamentos"}),c("section",qI,[c("div",KI,[c("div",GI,[c("button",{class:"btn btn-sm",onClick:e[2]||(e[2]=l=>o.setPeriodo("dia"))},"Dia"),c("button",{class:"btn btn-sm",onClick:e[3]||(e[3]=l=>o.setPeriodo("semana"))},"Semana"),c("button",{class:"btn btn-sm",onClick:e[4]||(e[4]=l=>o.setPeriodo("mes"))},"Mês")]),c("div",YI,[M(c("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=l=>n.filterStart=l),class:"border px-3 py-2 rounded"},null,512),[[O,n.filterStart]]),M(c("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>n.filterEnd=l),class:"border px-3 py-2 rounded"},null,512),[[O,n.filterEnd]])]),c("div",null,[M(c("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>n.clientId=l),class:"border px-3 py-2 rounded",disabled:!n.canSeeClients},[e[11]||(e[11]=c("option",{value:""},"Todos os clientes",-1)),(m(!0),y($,null,Q(n.clients,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,XI))),128))],8,JI),[[be,n.clientId]])]),c("div",null,[M(c("select",{"onUpdate:modelValue":e[8]||(e[8]=l=>n.serviceId=l),class:"border px-3 py-2 rounded w-40",disabled:!n.canSeeServices},[e[12]||(e[12]=c("option",{value:""},"Todos os serviços",-1)),(m(!0),y($,null,Q(n.services,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,ZI))),128))],8,QI),[[be,n.serviceId]])]),c("div",eO,[c("button",{onClick:e[9]||(e[9]=(...l)=>o.fetchAppointments&&o.fetchAppointments(...l)),class:"btn"},"Aplicar")])])]),c("section",tO,[c("div",sO,[c("table",nO,[e[14]||(e[14]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Horário do Atendimento"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Paciente"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Status")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.appointments,l=>(m(),y("tr",{key:l.id,class:"border-b last:border-b-0"},[c("td",iO,S(o.formatDateBR(l.date))+" "+S(o.addHoursToTime(l.time)),1),c("td",oO,S(o.getClientName(l.client_id)),1),c("td",rO,S(o.getServiceName(l.service_id)),1),c("td",aO,S(o.getStatusLabel(l)),1)]))),128)),n.appointments.length===0?(m(),y("tr",lO,e[13]||(e[13]=[c("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):I("",!0)])])])])])])}const dO=ae($I,[["render",cO]]),uO={name:"Recebimento",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,userIds:[],clients:[],services:[],appointments:[],clientId:"",serviceId:"",filterStart:"",groupBy:"none",filterEnd:"",paidFilter:"all",canSeeClients:!0,canSeeServices:!0,userRole:null}},computed:{compactLayout(){return this.userRole==="user"||this.userRole==="admin"},displayRows(){if(this.groupBy==="none")return this.appointments;const t={};return this.appointments.forEach(e=>{const s=this.getServicePrice(e.service_id);let i="";this.groupBy==="client"?i=`c${e.client_id}`:this.groupBy==="service"?i=`s${e.service_id}`:this.groupBy==="status"&&(i=e.paid?"paid":"open"),t[i]||(t[i]={key:i,client_id:this.groupBy==="client"?e.client_id:null,service_id:this.groupBy==="service"?e.service_id:null,status:this.groupBy==="status"?e.paid:null,total:0}),t[i].total+=s}),Object.values(t)},totalAmount(){return this.groupBy==="none"?this.appointments.reduce((t,e)=>t+this.getServicePrice(e.service_id),0):this.displayRows.reduce((t,e)=>t+e.total,0)}},methods:{formatDateBR:qe,addHoursToTime:gt,formatPrice(t){return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getServicePrice(t){const e=this.services.find(s=>s.id===t);return e&&e.price||0},async fetchAppointments(){if(!this.filterStart||!this.filterEnd)return;let t=C.from("appointments").select().in("user_id",this.userIds).gte("date",this.filterStart).lte("date",this.filterEnd);this.canSeeClients&&this.clientId&&(t=t.eq("client_id",this.clientId)),this.canSeeServices&&this.serviceId&&(t=t.eq("service_id",this.serviceId)),this.paidFilter==="paid"?t=t.eq("paid",!0):this.paidFilter==="open"&&(t=t.eq("paid",!1));const{data:e}=await t.order("date",{ascending:!0}).order("time",{ascending:!0});this.appointments=e||[]}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await C.from("profiles").select("role").eq("id",this.userId).single();this.userRole=e?e.role:null;const s=await As(this.userId);this.userIds=s?await Es(s):[this.userId],this.canSeeClients=await ns("Clientes"),this.canSeeServices=await ns("Servicos");const{data:i}=await C.from("clients").select().in("user_id",this.userIds);i&&(this.clients=i);const{data:n}=await C.from("services").select().in("user_id",this.userIds).eq("active",!0);n&&(this.services=n);const o=new Date,r=new Date(o.getFullYear(),o.getMonth(),1);this.filterStart=r.toISOString().split("T")[0],this.filterEnd=o.toISOString().split("T")[0],this.fetchAppointments()}},hO={class:"min-h-screen flex bg-gray-100 relative"},fO={class:"flex-1 p-4 md:p-8 space-y-6"},pO={key:0,class:"flex items-center mb-4"},mO={class:"bg-white p-4 rounded-lg shadow space-y-4"},gO=["disabled"],bO=["value"],yO=["disabled"],xO=["value"],vO={class:"flex justify-end"},_O={class:"bg-white p-4 rounded-lg shadow"},wO={class:"overflow-x-auto"},kO={class:"min-w-full text-left"},SO={class:"px-4 py-2"},CO={key:0},MO={class:"px-4 py-2"},AO={key:0},EO={class:"px-4 py-2"},PO={key:0},TO={class:"px-4 py-2"},IO={class:"px-4 py-2"},OO={key:0},DO={key:0},RO={class:"px-4 py-2 font-semibold"};function LO(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",hO,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",fO,[n.sidebarOpen?I("",!0):(m(),y("div",pO,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[9]||(e[9]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Relatório de Recebimento"}),c("section",mO,[c("div",{class:$e(["grid gap-4 items-end",o.compactLayout?"grid-cols-6":"grid-cols-1 md:grid-cols-6"])},[c("div",null,[e[11]||(e[11]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cliente",-1)),M(c("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.clientId=l),class:"w-full px-4 py-2 border rounded-md",disabled:!n.canSeeClients},[e[10]||(e[10]=c("option",{value:""},"Todos",-1)),(m(!0),y($,null,Q(n.clients,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,bO))),128))],8,gO),[[be,n.clientId]])]),c("div",null,[e[13]||(e[13]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Serviço",-1)),M(c("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.serviceId=l),class:"w-full px-4 py-2 border rounded-md",disabled:!n.canSeeServices},[e[12]||(e[12]=c("option",{value:""},"Todos",-1)),(m(!0),y($,null,Q(n.services,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,xO))),128))],8,yO),[[be,n.serviceId]])]),c("div",null,[e[14]||(e[14]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"De",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>n.filterStart=l),class:"w-full px-4 py-2 border rounded-md"},null,512),[[O,n.filterStart]])]),c("div",null,[e[15]||(e[15]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Até",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=l=>n.filterEnd=l),class:"w-full px-4 py-2 border rounded-md"},null,512),[[O,n.filterEnd]])]),c("div",null,[e[17]||(e[17]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agendamentos",-1)),M(c("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>n.paidFilter=l),class:"w-full px-4 py-2 border rounded-md"},e[16]||(e[16]=[c("option",{value:"all"},"Todos",-1),c("option",{value:"paid"},"Pagos",-1),c("option",{value:"open"},"Em aberto",-1)]),512),[[be,n.paidFilter]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),M(c("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>n.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},e[18]||(e[18]=[c("option",{value:"none"},"Nenhum",-1),c("option",{value:"client"},"Cliente",-1),c("option",{value:"service"},"Serviço",-1),c("option",{value:"status"},"Status",-1)]),512),[[be,n.groupBy]])])],2),c("div",vO,[c("button",{onClick:e[8]||(e[8]=(...l)=>o.fetchAppointments&&o.fetchAppointments(...l)),class:"btn"},"Aplicar")])]),c("section",_O,[c("div",wO,[c("table",kO,[e[23]||(e[23]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Horário do Atendimento"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Status")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.displayRows,l=>(m(),y("tr",{key:l.id||l.key,class:"border-b last:border-b-0"},[c("td",SO,[n.groupBy==="none"?(m(),y("span",CO,S(o.formatDateBR(l.date))+" "+S(o.addHoursToTime(l.time)),1)):I("",!0)]),c("td",MO,[n.groupBy==="none"||n.groupBy==="client"?(m(),y("span",AO,S(o.getClientName(l.client_id)),1)):I("",!0)]),c("td",EO,[n.groupBy==="none"||n.groupBy==="service"?(m(),y("span",PO,S(o.getServiceName(l.service_id)),1)):I("",!0)]),c("td",TO,S(o.formatPrice(n.groupBy==="none"?o.getServicePrice(l.service_id):l.total)),1),c("td",IO,[n.groupBy==="none"||n.groupBy==="status"?(m(),y("span",OO,S((n.groupBy==="status"?l.status:l.paid)?"Pago":"pagamento em aberto"),1)):I("",!0)])]))),128)),o.displayRows.length===0?(m(),y("tr",DO,e[20]||(e[20]=[c("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"},"Nenhum registro",-1)]))):I("",!0),c("tr",null,[e[21]||(e[21]=c("td",{colspan:"3",class:"px-4 py-2 text-right font-semibold"},"Total",-1)),c("td",RO,S(o.formatPrice(o.totalAmount)),1),e[22]||(e[22]=c("td",null,null,-1))])])])])])])])}const FO=ae(uO,[["render",LO]]),jO={name:"RelatorioEmAberto",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,userIds:[],clients:[],services:[],appointments:[],clientId:"",serviceId:"",rows:[],canSeeClients:!0,canSeeServices:!0}},methods:{getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},computeRows(){const t={};this.appointments.forEach(s=>{const i=`${s.client_id}-${s.service_id}`;t[i]||(t[i]={done:0,pending:0,canceled:0}),s.status==="completed"||s.status==="no_show"?t[i].done+=1:(s.status==="canceled"||s.status==="deleted")&&!s.rescheduled?t[i].canceled+=1:s.status!=="canceled"&&s.status!=="deleted"&&(t[i].pending+=1)});const e=[];this.services.filter(s=>s.is_package&&s.session_count).forEach(s=>{this.serviceId&&s.id!==this.serviceId||this.clients.forEach(i=>{if(this.clientId&&i.id!==this.clientId)return;const n=`${i.id}-${s.id}`,o=t[n];if(!o)return;const r=o.canceled;r>0&&e.push({client_id:i.id,service_id:s.id,remaining:r})})}),this.rows=e},async fetchAppointments(){let t=C.from("appointments").select("client_id, service_id, status, rescheduled").in("user_id",this.userIds).neq("status","deleted");this.canSeeClients&&this.clientId&&(t=t.eq("client_id",this.clientId)),this.canSeeServices&&this.serviceId&&(t=t.eq("service_id",this.serviceId));const{data:e}=await t;this.appointments=e||[]},async generateReport(){await this.fetchAppointments(),this.computeRows()}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId);this.userIds=e?await Es(e):[this.userId],this.canSeeClients=await ns("Clientes"),this.canSeeServices=await ns("Servicos");const{data:s}=await C.from("clients").select().in("user_id",this.userIds).eq("active",!0);s&&(this.clients=s);const{data:i}=await C.from("services").select().in("user_id",this.userIds).eq("active",!0);i&&(this.services=i),await this.generateReport()}},UO={class:"min-h-screen flex bg-gray-100 relative"},NO={class:"flex-1 p-4 md:p-8 space-y-6"},BO={key:0,class:"flex items-center mb-4"},VO={class:"bg-white p-4 rounded-lg shadow space-y-4"},$O={class:"flex flex-col md:flex-row md:items-end md:space-x-4 space-y-4 md:space-y-0"},HO=["disabled"],zO=["value"],WO=["disabled"],qO=["value"],KO={class:"bg-white p-4 rounded-lg shadow"},GO={class:"overflow-x-auto"},YO={class:"min-w-full text-left"},JO={class:"px-4 py-2"},XO={class:"px-4 py-2"},QO={class:"px-4 py-2"},ZO={key:0};function eD(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",UO,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",NO,[n.sidebarOpen?I("",!0):(m(),y("div",BO,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[5]||(e[5]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Relatório Em Aberto"}),c("section",VO,[c("div",$O,[c("div",null,[M(c("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.clientId=l),class:"border px-3 py-2 rounded",disabled:!n.canSeeClients},[e[6]||(e[6]=c("option",{value:""},"Todos os clientes",-1)),(m(!0),y($,null,Q(n.clients,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,zO))),128))],8,HO),[[be,n.clientId]])]),c("div",null,[M(c("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.serviceId=l),class:"border px-3 py-2 rounded",disabled:!n.canSeeServices},[e[7]||(e[7]=c("option",{value:""},"Todos os serviços",-1)),(m(!0),y($,null,Q(n.services,l=>(m(),y("option",{key:l.id,value:l.id},S(l.name),9,qO))),128))],8,WO),[[be,n.serviceId]])]),c("button",{onClick:e[4]||(e[4]=(...l)=>o.generateReport&&o.generateReport(...l)),class:"btn"},"Aplicar")])]),c("section",KO,[c("div",GO,[c("table",YO,[e[9]||(e[9]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Serviço"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Sessões Pendentes")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.rows,l=>(m(),y("tr",{key:l.client_id+l.service_id,class:"border-b last:border-b-0"},[c("td",JO,S(o.getClientName(l.client_id)),1),c("td",XO,S(o.getServiceName(l.service_id)),1),c("td",QO,S(l.remaining),1)]))),128)),n.rows.length===0?(m(),y("tr",ZO,e[8]||(e[8]=[c("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum registro",-1)]))):I("",!0)])])])])])])}const tD=ae(jO,[["render",eD]]),sD={name:"Faq",components:{Navbar:qt,Footer:Kt},data(){return{faqs:[{question:"Como me cadastro?",answer:'Clique em "Cadastre-se" no menu e preencha o formulário.'},{question:"Posso cancelar a qualquer momento?",answer:"Sim, você pode cancelar seu plano a hora que quiser sem taxas adicionais."},{question:"Como entro em contato com o suporte?",answer:"Utilize a página de contato para nos enviar sua mensagem."}]}}},nD={class:"min-h-screen flex flex-col bg-gray-100"},iD={class:"flex-1 max-w-3xl mx-auto p-8"},oD={class:"space-y-6"},rD={class:"font-semibold text-blue-600 mb-2"},aD={class:"text-gray-700"};function lD(t,e,s,i,n,o){const r=j("Navbar"),a=j("Footer");return m(),y($,null,[D(r),c("div",nD,[c("main",iD,[e[0]||(e[0]=c("h1",{class:"text-3xl font-bold text-center mb-8"},"Perguntas Frequentes",-1)),c("div",oD,[(m(!0),y($,null,Q(n.faqs,(l,d)=>(m(),y("div",{key:d,class:"bg-white p-6 rounded-lg shadow"},[c("h2",rD,S(l.question),1),c("p",aD,S(l.answer),1)]))),128))])]),D(a)])],64)}const cD=ae(sD,[["render",lD]]),dD={name:"PoliticaPrivacidade",components:{Navbar:qt,Footer:Kt}};function uD(t,e,s,i,n,o){const r=j("Navbar"),a=j("Footer");return m(),y($,null,[D(r),e[0]||(e[0]=c("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[c("h1",{class:"text-3xl font-bold text-center mb-4"},"Política de Privacidade"),c("p",null,"Esta política descreve como tratamos seus dados pessoais e garante a transparência sobre o uso das suas informações."),c("p",null,"Utilizamos seus dados apenas para prover nossos serviços de agendamento e nunca os compartilhamos com terceiros sem consentimento."),c("p",null,"Ao utilizar o Agenda Zen você concorda com esta política. Em caso de dúvidas entre em contato conosco.")],-1)),D(a)],64)}const hD=ae(dD,[["render",uD]]),fD={name:"TermosDeUso",components:{Navbar:qt,Footer:Kt}};function pD(t,e,s,i,n,o){const r=j("Navbar"),a=j("Footer");return m(),y($,null,[D(r),e[0]||(e[0]=c("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[c("h1",{class:"text-3xl font-bold text-center mb-4"},"Termos de Uso"),c("p",null,"Estes termos definem as regras para utilização da plataforma Agenda Zen. Ao criar uma conta você concorda em segui-los."),c("p",null,"O serviço deve ser utilizado apenas para atividades lícitas e em conformidade com a legislação vigente. Contas que violem estas condições poderão ser suspensas."),c("p",null,"Podemos atualizar estes termos periodicamente. Avisaremos sobre mudanças importantes diretamente no site.")],-1)),D(a)],64)}const mD=ae(fD,[["render",pD]]);function Cn(t,e){const s=String(e.length).padStart(2,"0");return`${t}${s}${e}`}function gD(t){let e=65535;for(let s=0;s<t.length;s++){e^=t.charCodeAt(s)<<8;for(let i=0;i<8;i++)e&32768?e=e<<1^4129:e<<=1,e&=65535}return e.toString(16).toUpperCase().padStart(4,"0")}function kp({key:t,name:e,city:s="SAO PAULO",amount:i,txid:n="AGENDAZEN"}){const o=e.slice(0,25),r=Cn("00","BR.GOV.BCB.PIX")+Cn("01",t),a=Cn("05",n),l="00020101021126"+String(r.length).padStart(2,"0")+r+"520400005303986"+(i?Cn("54",i):"")+"5802BR"+Cn("59",o)+Cn("60",s)+"62"+String(a.length).padStart(2,"0")+a+"6304",d=gD(l);return l+d}const bD="/icons/visa.svg",yD="/icons/mastercard.svg",xD="/icons/amex.svg",vD="/icons/elo.svg",Sp="/logo_pix.png",_D={name:"PagamentoPlus",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"pix",card:{name:"",number:"",expiry:"",cvv:"",document:""},billing:{cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""},pixAmount:"167.97",pixCode:"",pixQrCode:""}},mounted(){const t=this.$route.query.amount;t&&(this.pixAmount=t),this.generatePix()},methods:{generatePix(){const t=kp({key:"37775989840",name:"Jeferson Carlos A de Paula",amount:this.pixAmount});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}}},wD={class:"min-h-screen flex bg-gray-100 relative"},kD={class:"flex-1 p-8 space-y-6"},SD={key:0,class:"flex items-center mb-4"},CD={class:"mb-6 space-x-2"},MD={key:1,class:"space-y-6 max-w-3xl"},AD={class:"grid grid-cols-2 gap-4"},ED={class:"space-y-4 mt-4"},PD={class:"grid grid-cols-2 gap-4"},TD={class:"grid grid-cols-2 gap-4"},ID={key:2,class:"space-y-6 max-w-3xl"},OD={class:"text-center space-y-4"},DD=["src"],RD={class:"text-lg font-semibold"};function LD(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",wD,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",kD,[n.sidebarOpen?I("",!0):(m(),y("div",SD,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[17]||(e[17]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Pagamento"}),c("nav",CD,[c("button",{onClick:e[2]||(e[2]=l=>n.activeTab="cartao"),class:$e([n.activeTab==="cartao"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Cartão de Crédito",2),c("button",{onClick:e[3]||(e[3]=l=>n.activeTab="pix"),class:$e([n.activeTab==="pix"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Pix",2)]),n.activeTab==="cartao"?(m(),y("section",MD,[e[31]||(e[31]=Ws('<div class="flex justify-center space-x-2 mb-4"><img src="'+bD+'" alt="Visa" class="h-8"><img src="'+yD+'" alt="Mastercard" class="h-8"><img src="'+xD+'" alt="American Express" class="h-8"><img src="'+vD+'" alt="Elo" class="h-8"></div>',1)),c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Nome (igual no cartão)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>n.card.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.card.name]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"Número do cartão",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>n.card.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.card.number]])]),c("div",AD,[c("div",null,[e[20]||(e[20]=c("label",{class:"block text-sm font-medium text-gray-700"},"Validade (MM/AA)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>n.card.expiry=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.card.expiry]])]),c("div",null,[e[21]||(e[21]=c("label",{class:"block text-sm font-medium text-gray-700"},"Código de Segurança (CVV)",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>n.card.cvv=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.card.cvv]])])]),c("div",null,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700"},"CPF/CNPJ",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>n.card.document=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.card.document]])]),c("div",ED,[e[30]||(e[30]=c("h3",{class:"text-md font-semibold"},"Endereço de cobrança",-1)),c("div",null,[e[23]||(e[23]=c("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>n.billing.cep=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.cep]])]),c("div",null,[e[24]||(e[24]=c("label",{class:"block text-sm font-medium text-gray-700"},"Rua",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>n.billing.street=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.street]])]),c("div",PD,[c("div",null,[e[25]||(e[25]=c("label",{class:"block text-sm font-medium text-gray-700"},"Número",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>n.billing.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.number]])]),c("div",null,[e[26]||(e[26]=c("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>n.billing.complement=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.complement]])])]),c("div",null,[e[27]||(e[27]=c("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>n.billing.neighborhood=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.neighborhood]])]),c("div",TD,[c("div",null,[e[28]||(e[28]=c("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=l=>n.billing.city=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.city]])]),c("div",null,[e[29]||(e[29]=c("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=l=>n.billing.state=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.billing.state]])])])]),e[32]||(e[32]=c("div",{class:"text-right mt-4"},[c("button",{class:"btn"},"Pagar")],-1))])):I("",!0),n.activeTab==="pix"?(m(),y("section",ID,[c("div",OD,[e[33]||(e[33]=c("img",{src:Sp,alt:"Logo Pix",class:"mx-auto w-[17.6rem] h-auto"},null,-1)),n.pixQrCode?(m(),y("img",{key:0,src:n.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,DD)):I("",!0),e[34]||(e[34]=c("p",{class:"font-semibold"},"Código de pagamento",-1)),e[35]||(e[35]=c("p",null,"Copie e cole o código abaixo no app da sua instituição financeira para finalizar a compra.",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>n.pixCode=l),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[O,n.pixCode]]),e[36]||(e[36]=c("p",{class:"font-semibold"},"Valor do pagamento",-1)),c("p",RD,"R$ "+S(n.pixAmount.replace(".",",")),1)])])):I("",!0)])])}const FD=ae(_D,[["render",LD]]),jD={name:"ProfileFooter",props:{profile:{type:Object,required:!0}}},UD={key:0,class:"bg-gray-100 py-6"},ND={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},BD={class:"space-x-4 text-blue-600"},VD=["href"],$D=["href"],HD=["href"],zD=["href"],WD={class:"text-sm text-gray-500"};function qD(t,e,s,i,n,o){return s.profile?(m(),y("footer",UD,[c("div",ND,[c("div",BD,[s.profile.instagram?(m(),y("a",{key:0,href:s.profile.instagram,class:"hover:underline"},"Instagram",8,VD)):I("",!0),s.profile.facebook?(m(),y("a",{key:1,href:s.profile.facebook,class:"hover:underline"},"Facebook",8,$D)):I("",!0),s.profile.youtube?(m(),y("a",{key:2,href:s.profile.youtube,class:"hover:underline"},"YouTube",8,HD)):I("",!0),s.profile.x?(m(),y("a",{key:3,href:s.profile.x,class:"hover:underline"},"X (Twitter)",8,zD)):I("",!0)]),c("p",WD,"© "+S(new Date().getFullYear())+" "+S(s.profile.business_name),1)])])):I("",!0)}const KD=ae(jD,[["render",qD]]),GD={name:"PagamentoAgendamento",components:{ProfileFooter:KD},data(){return{profile:null,appointment:null,service:null,pixCode:"",pixQrCode:""}},methods:{phoneMask:bn,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},generatePix(){if(!this.profile||!this.service)return;const t=kp({key:this.profile.pix_key,name:this.profile.business_name,amount:String(this.service.price)});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}},async mounted(){const t=this.$route.params.id,{data:e,error:s}=await C.from("appointments").select("*").eq("id",t).single();if(s){console.error("Erro ao buscar agendamento:",s.message);return}if(e){this.appointment=e;const{data:i}=await C.from("services").select("price").eq("id",e.service_id).single();this.service=i;const{data:n}=await C.from("profiles").select("pix_key,business_name,whatsapp,image_url,area_atuacao,description,instagram,facebook,youtube,x").eq("id",e.user_id).single();this.profile=n,this.generatePix()}}},YD={class:"flex flex-col min-h-screen"},JD={key:0,class:"bg-blue-600 text-white py-12"},XD={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},QD=["src"],ZD={class:"text-4xl font-bold"},eR={key:0,class:"text-sm"},tR={class:"text-lg"},sR={class:"flex-1 flex items-center justify-center bg-gray-100 px-4"},nR={key:0,class:"bg-white p-8 rounded-lg shadow w-full max-w-md space-y-4 text-center mt-8"},iR=["src"],oR={class:"text-lg font-semibold"},rR={class:"text-sm text-gray-600"},aR={key:1,class:"text-gray-500"};function lR(t,e,s,i,n,o){const r=j("ProfileFooter");return m(),y("div",YD,[n.profile?(m(),y("section",JD,[c("div",XD,[c("img",{src:n.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,QD),c("h1",ZD,S(n.profile.business_name),1),n.profile.area_atuacao?(m(),y("p",eR,S(n.profile.area_atuacao),1)):I("",!0),c("p",tR,S(n.profile.description),1)])])):I("",!0),c("section",sR,[n.profile&&n.service?(m(),y("div",nR,[e[1]||(e[1]=c("img",{src:Sp,alt:"Pix",class:"mx-auto w-44 h-auto"},null,-1)),n.pixQrCode?(m(),y("img",{key:0,src:n.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,iR)):I("",!0),e[2]||(e[2]=c("p",{class:"font-semibold"},"Código de pagamento",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.pixCode=a),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[O,n.pixCode]]),e[3]||(e[3]=c("p",{class:"font-semibold"},"Valor do pagamento",-1)),c("p",oR,S(o.formatPrice(n.service.price)),1),c("p",rR,"Após o pagamento envie o comprovante para "+S(o.phoneMask(n.profile.whatsapp)),1)])):(m(),y("div",aR,"Carregando..."))]),n.profile?(m(),ge(r,{key:1,profile:n.profile},null,8,["profile"])):I("",!0)])}const cR=ae(GD,[["render",lR]]),dR="/icons/check.svg",uR={name:"Confirmacao",components:{Navbar:qt,Footer:Kt}},hR={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},fR={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},pR={class:"flex justify-center space-x-4"};function mR(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("section",hR,[c("div",fR,[e[2]||(e[2]=c("img",{src:dR,alt:"Sucesso",class:"w-16 h-16 mx-auto text-green-500"},null,-1)),e[3]||(e[3]=c("h1",{class:"text-2xl font-bold text-green-600"},"Cadastro efetuado com sucesso",-1)),c("div",pR,[D(a,{to:"/",class:"btn inline-block"},{default:X(()=>e[0]||(e[0]=[se("Início")])),_:1,__:[0]}),D(a,{to:"/login",class:"btn inline-block"},{default:X(()=>e[1]||(e[1]=[se("Login")])),_:1,__:[1]})])])]),D(l)],64)}const gR=ae(uR,[["render",mR]]),bR="/icons/error.svg",yR={name:"LinkExpirado",components:{Navbar:qt,Footer:Kt},data(){return{email:""}},methods:{async reenviarLink(){if(!Ft(this.email)){alert("E-mail inválido");return}const{error:t}=await C.auth.resend({type:"signup",email:this.email});alert(t?"Erro ao reenviar link: "+t.message:"Link reenviado! Verifique seu e-mail.")}}},xR={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},vR={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},_R={class:"flex justify-center space-x-4"};function wR(t,e,s,i,n,o){const r=j("Navbar"),a=j("router-link"),l=j("Footer");return m(),y($,null,[D(r),c("section",xR,[c("div",vR,[e[3]||(e[3]=c("img",{src:bR,alt:"Erro",class:"w-16 h-16 mx-auto text-red-500"},null,-1)),e[4]||(e[4]=c("h1",{class:"text-2xl font-bold text-red-600"},"Link expirado ou inválido",-1)),e[5]||(e[5]=c("p",{class:"text-gray-700"},"Informe seu e-mail para receber um novo link de confirmação.",-1)),M(c("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>n.email=d),type:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,n.email]]),c("div",_R,[c("button",{onClick:e[1]||(e[1]=(...d)=>o.reenviarLink&&o.reenviarLink(...d)),class:"btn"},"Reenviar link"),D(a,{to:"/",class:"btn"},{default:X(()=>e[2]||(e[2]=[se("Início")])),_:1,__:[2]})])])]),D(l)],64)}const kR=ae(yR,[["render",wR]]),SR={name:"Despesas",components:{Sidebar:Je,HeaderUser:Xe,Modal:rs},data(){return{sidebarOpen:window.innerWidth>=768,userId:null,search:"",expenses:[],showModal:!1,editingId:null,form:{title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}}},computed:{filteredExpenses(){const t=this.search.toLowerCase();return this.expenses.filter(e=>e.title.toLowerCase().includes(t)||e.amount!==null&&e.amount.toString().includes(t))}},methods:{openModal(t){t?(this.editingId=t.id,this.form={title:t.title,amount:this.formatPrice(t.amount),dueDate:t.due_date,paidDate:t.paid_date||"",fixed:t.fixed,repeat:t.repeat_months||1}):(this.editingId=null,this.form={title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}),this.showModal=!0},closeModal(){this.showModal=!1,this.editingId=null,this.form={title:"",amount:"",dueDate:"",paidDate:"",fixed:!1,repeat:1}},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatDateBR:qe,currencyMask:Av,async handleSaveExpense(){const t=Ev(this.form.amount);if(this.editingId){const{data:e,error:s}=await C.from("expenses").update({title:this.form.title,amount:t,due_date:this.form.dueDate,paid_date:this.form.paidDate||null,fixed:this.form.fixed,repeat_months:this.form.fixed?this.form.repeat:null}).eq("id",this.editingId).select().single();if(s){alert("Erro ao salvar despesa: "+s.message);return}const i=this.expenses.findIndex(n=>n.id===this.editingId);i!==-1&&(this.expenses[i]=e)}else{const e={title:this.form.title,amount:t,due_date:this.form.dueDate,paid_date:this.form.paidDate||null,fixed:this.form.fixed,repeat_months:this.form.fixed?this.form.repeat:null,user_id:this.userId},s=[e];if(this.form.fixed&&this.form.repeat>=1)for(let o=1;o<=this.form.repeat;o++)s.push({...e,due_date:nd(this.form.dueDate,o),paid_date:this.form.paidDate?nd(this.form.paidDate,o):null,repeat_months:null});const{data:i,error:n}=await C.from("expenses").insert(s).select();if(n){alert("Erro ao salvar despesa: "+n.message);return}this.expenses.push(...i)}this.closeModal()},async handleDeleteExpense(t){if(!confirm("Tem certeza que deseja excluir esta despesa?"))return;const{error:s}=await C.from("expenses").delete().eq("id",t);s?alert("Erro ao excluir despesa: "+s.message):this.expenses=this.expenses.filter(i=>i.id!==t)}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const e=await As(this.userId),s=e?await Es(e):[this.userId],{data:i}=await C.from("expenses").select().in("user_id",s);i&&(this.expenses=i)}},CR={class:"min-h-screen flex bg-gray-100 relative"},MR={class:"flex-1 p-4 md:p-8 space-y-6"},AR={key:0,class:"flex items-center mb-4"},ER={class:"bg-white p-4 rounded-lg shadow"},PR={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},TR={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},IR={class:"overflow-x-auto"},OR={class:"min-w-full text-left"},DR={class:"px-4 py-2"},RR={class:"px-4 py-2"},LR={class:"px-4 py-2"},FR={class:"px-4 py-2"},jR={class:"px-4 py-2"},UR={class:"px-4 py-2 text-right space-x-2"},NR=["onClick"],BR=["onClick"],VR={key:0},$R={class:"text-lg font-semibold mb-4"},HR={key:0},zR=["value"];function WR(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser"),l=j("Modal");return m(),y("div",CR,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=d=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",MR,[n.sidebarOpen?I("",!0):(m(),y("div",AR,[c("button",{onClick:e[1]||(e[1]=d=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Despesas"}),c("section",ER,[c("div",PR,[e[13]||(e[13]=c("h3",{class:"text-lg font-medium"},"Despesas cadastradas",-1)),c("div",TR,[M(c("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>n.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[O,n.search]]),c("button",{onClick:e[3]||(e[3]=d=>o.openModal()),class:"btn w-full sm:w-auto"},"Nova Despesa")])]),c("div",IR,[c("table",OR,[e[15]||(e[15]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Título"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Vencimento"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Pagamento"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Tipo"),c("th",{class:"px-4 py-2"})])],-1)),c("tbody",null,[(m(!0),y($,null,Q(o.filteredExpenses,d=>(m(),y("tr",{key:d.id,class:"border-b last:border-b-0"},[c("td",DR,S(d.title),1),c("td",RR,S(o.formatPrice(d.amount)),1),c("td",LR,S(o.formatDateBR(d.due_date)),1),c("td",FR,S(d.paid_date?o.formatDateBR(d.paid_date):"-"),1),c("td",jR,S(d.fixed?"Fixa":"Variável"),1),c("td",UR,[c("button",{onClick:u=>o.openModal(d),class:"btn btn-sm"},"Editar",8,NR),c("button",{onClick:u=>o.handleDeleteExpense(d.id),class:"btn btn-sm btn-danger"}," Excluir ",8,BR)])]))),128)),o.filteredExpenses.length===0?(m(),y("tr",VR,e[14]||(e[14]=[c("td",{colspan:"6",class:"px-4 py-6 text-center text-gray-500"},"Nenhuma despesa",-1)]))):I("",!0)])])])]),n.showModal?(m(),ge(l,{key:1,onClose:o.closeModal},{default:X(()=>[c("h3",$R,S(n.editingId?"Editar Despesa":"Nova Despesa"),1),c("form",{onSubmit:e[11]||(e[11]=ze((...d)=>o.handleSaveExpense&&o.handleSaveExpense(...d),["prevent"])),class:"space-y-4"},[c("div",null,[e[16]||(e[16]=c("label",{class:"block text-sm font-medium text-gray-700"},"Título da despesa",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=d=>n.form.title=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.title]])]),c("div",null,[e[17]||(e[17]=c("label",{class:"block text-sm font-medium text-gray-700"},"Valor da despesa",-1)),M(c("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=d=>n.form.amount=d),onInput:e[6]||(e[6]=d=>n.form.amount=o.currencyMask(n.form.amount)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[O,n.form.amount]])]),c("div",null,[e[18]||(e[18]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data de Vencimento",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=d=>n.form.dueDate=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.dueDate]])]),c("div",null,[e[19]||(e[19]=c("label",{class:"block text-sm font-medium text-gray-700"},"Data de Pagamento",-1)),M(c("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=d=>n.form.paidDate=d),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[O,n.form.paidDate]])]),c("div",null,[e[21]||(e[21]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fixa ou Variável?",-1)),M(c("select",{"onUpdate:modelValue":e[9]||(e[9]=d=>n.form.fixed=d),class:"w-full px-4 py-2 border rounded-md"},e[20]||(e[20]=[c("option",{value:!1},"Variável",-1),c("option",{value:!0},"Fixa",-1)]),512),[[be,n.form.fixed]])]),n.form.fixed?(m(),y("div",HR,[e[22]||(e[22]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Replicar por",-1)),M(c("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>n.form.repeat=d),class:"w-full px-4 py-2 border rounded-md"},[(m(),y($,null,Q(12,d=>c("option",{key:d,value:d},S(d)+" mês"+S(d>1?"es":""),9,zR)),64))],512),[[be,n.form.repeat]])])):I("",!0),e[23]||(e[23]=c("div",{class:"text-right"},[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)]),_:1},8,["onClose"])):I("",!0)])])}const qR=ae(SR,[["render",WR]]),KR={name:"Permissoes",components:{Sidebar:Je,HeaderUser:Xe},data(){return{sidebarOpen:window.innerWidth>=768,users:[],permissions:[],screens:Yn,form:{profileId:"",screens:[],canView:!0},userId:null}},methods:{async fetchUsers(){const{data:t}=await C.from("profiles").select("company_id").eq("id",this.userId).single();if(t){const{data:e}=await C.from("profiles").select("id, email").eq("company_id",t.company_id);this.users=e||[]}},async fetchPermissions(){const{data:t}=await C.from("screen_permissions").select("*");this.permissions=t||[]},async addPermission(){if(!(!this.form.profileId||this.form.screens.length===0)){for(const t of this.form.screens){const{data:e}=await C.from("screen_permissions").select("id").eq("profile_id",this.form.profileId).eq("screen",t).single();e?await C.from("screen_permissions").update({can_view:this.form.canView}).eq("id",e.id):await C.from("screen_permissions").insert({profile_id:this.form.profileId,screen:t,can_view:this.form.canView})}this.form={profileId:"",screens:[],canView:!0},await this.fetchPermissions()}},getUserEmail(t){const e=this.users.find(s=>s.id===t);return e?e.email:t}},async mounted(){const{data:{user:t}}=await C.auth.getUser();if(!t){this.$router.push("/login");return}const{data:e}=await C.from("profiles").select("id, role").eq("id",t.id).single();if((e==null?void 0:e.role)==="user"){this.$router.push("/dashboard");return}this.userId=t.id,await this.fetchUsers(),await this.fetchPermissions()}},GR={class:"min-h-screen flex bg-gray-100 relative"},YR={class:"flex-1 p-8 space-y-6"},JR={key:0,class:"flex items-center mb-4"},XR={class:"bg-white p-4 rounded-lg shadow"},QR=["value"],ZR=["value"],e5={class:"flex items-center"},t5={class:"bg-white p-4 rounded-lg shadow"},s5={class:"overflow-x-auto"},n5={class:"min-w-full text-left"},i5={class:"px-4 py-2"},o5={class:"px-4 py-2"},r5={class:"px-4 py-2"},a5={key:0};function l5(t,e,s,i,n,o){const r=j("Sidebar"),a=j("HeaderUser");return m(),y("div",GR,[D(r,{"is-open":n.sidebarOpen,onClose:e[0]||(e[0]=l=>n.sidebarOpen=!1)},null,8,["is-open"]),c("main",YR,[n.sidebarOpen?I("",!0):(m(),y("div",JR,[c("button",{onClick:e[1]||(e[1]=l=>n.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[6]||(e[6]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),D(a,{title:"Permissões"}),c("section",XR,[e[12]||(e[12]=c("h3",{class:"text-lg font-medium mb-4"},"Cadastrar permissão",-1)),c("form",{onSubmit:e[5]||(e[5]=ze((...l)=>o.addPermission&&o.addPermission(...l),["prevent"])),class:"space-y-4"},[c("div",null,[e[8]||(e[8]=c("label",{class:"block text-sm font-medium text-gray-700",for:"profileId"},"Usuário",-1)),M(c("select",{id:"profileId","onUpdate:modelValue":e[2]||(e[2]=l=>n.form.profileId=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[7]||(e[7]=c("option",{value:"",disabled:""},"Selecione",-1)),(m(!0),y($,null,Q(n.users,l=>(m(),y("option",{key:l.id,value:l.id},S(l.email),9,QR))),128))],512),[[be,n.form.profileId]])]),c("div",null,[e[9]||(e[9]=c("label",{class:"block text-sm font-medium text-gray-700",for:"screen"},"Tela",-1)),M(c("select",{id:"screen","onUpdate:modelValue":e[3]||(e[3]=l=>n.form.screens=l),multiple:"",class:"w-full mt-1 px-4 py-2 border rounded-md"},[(m(!0),y($,null,Q(n.screens,l=>(m(),y("option",{key:l,value:l},S(l),9,ZR))),128))],512),[[be,n.form.screens]])]),c("div",e5,[M(c("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>n.form.canView=l),id:"canView",class:"mr-2"},null,512),[[Sr,n.form.canView]]),e[10]||(e[10]=c("label",{for:"canView"},"Pode visualizar",-1))]),e[11]||(e[11]=c("div",{class:"flex justify-end"},[c("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)]),c("section",t5,[e[15]||(e[15]=c("div",{class:"flex justify-between items-center mb-4"},[c("h3",{class:"text-lg font-medium"},"Permissões cadastradas")],-1)),c("div",s5,[c("table",n5,[e[14]||(e[14]=c("thead",{class:"bg-gray-50"},[c("tr",null,[c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Usuário"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Tela"),c("th",{class:"px-4 py-2 font-medium text-gray-700"},"Pode ver")])],-1)),c("tbody",null,[(m(!0),y($,null,Q(n.permissions,l=>(m(),y("tr",{key:l.id,class:"border-b last:border-b-0"},[c("td",i5,S(o.getUserEmail(l.profile_id)),1),c("td",o5,S(l.screen),1),c("td",r5,S(l.can_view?"Sim":"Não"),1)]))),128)),n.permissions.length===0?(m(),y("tr",a5,e[13]||(e[13]=[c("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhuma permissão",-1)]))):I("",!0)])])])])])])}const c5=ae(KR,[["render",l5]]);let Io=null;const Ur=[{path:"/",name:"Home",component:l0},{path:"/cadastro",name:"Signup",component:Rv},{path:"/confirmacao",name:"Confirmacao",component:gR},{path:"/link-expirado",name:"LinkExpirado",component:kR},{path:"/login",name:"Login",component:Vv},{path:"/onboarding",name:"Onboarding",component:r_},{path:"/dashboard",name:"Dashboard",component:PC},{path:"/empresa/:id?",name:"Empresa",component:eM},{path:"/configuracao",name:"Configuracao",component:GC},{path:"/clientes",name:"Clientes",component:n4},{path:"/servicos",name:"Servicos",component:tE},{path:"/salas",name:"Salas",component:QP},{path:"/agendamentos/novo",name:"NovoAgendamento",component:xA},{path:"/agendamentos",name:"Agendamentos",component:tA},{path:"/comprovantes",name:"Comprovantes",component:vT},{path:"/despesas",name:"Despesas",component:qR},{path:"/templates",name:"Templates",component:nI},{path:"/usuarios",name:"Usuarios",component:CE},{path:"/permissoes",name:"Permissoes",component:c5},{path:"/minha-assinatura",name:"MinhaAssinatura",component:xI},{path:"/assinatura-plus",name:"PagamentoPlus",component:FD},{path:"/relatorio-em-aberto",name:"RelatorioEmAberto",component:tD},{path:"/relatorio-agendamentos",name:"RelatorioAgendamentos",component:dO},{path:"/recebimento",name:"Recebimento",component:FO},{path:"/faturamento",name:"Faturamento",component:VI},{path:"/buscar",name:"SearchProfiles",component:FE},{path:"/planos",name:"Planos",component:vP},{path:"/contato",name:"Contato",component:dI},{path:"/faq",name:"Faq",component:cD},{path:"/politica-de-privacidade",name:"PoliticaDePrivacidade",component:hD},{path:"/termos-de-uso",name:"TermosDeUso",component:mD},{path:"/atendimento/:id",name:"Atendimento",component:zT},{path:"/pagar-agendamento/:id",name:"PagamentoAgendamento",component:cR},{path:"/:slug",name:"PublicPage",component:mP}],Gn=sy({history:Ib(),routes:Ur});Gn.beforeEach(async(t,e,s)=>{const{data:{user:i}}=await C.auth.getUser();if(i){const{data:n}=await C.from("profiles").select("onboarding_complete, company_id, role").eq("id",i.id).single();if((n==null?void 0:n.role)==="user"){if(!Io){const{data:o}=await C.from("screen_permissions").select("screen, can_view").eq("profile_id",i.id);Io={},o&&o.forEach(r=>{Io[r.screen]=r.can_view})}if(Io[t.name]===!1&&Yn.includes(t.name)){s("/dashboard");return}if(t.path==="/permissoes"){s("/dashboard");return}}if(n&&!n.onboarding_complete){if(n.company_id){if(!t.path.startsWith("/empresa")){s("/empresa");return}}else if(t.path!=="/onboarding"){s("/onboarding");return}}}s()});Gn.afterEach(t=>{window.gtag&&window.gtag("config","G-8DZT2EVSC7",{page_path:t.fullPath})});Ur.map(t=>t.name);const Yn=Ur.filter(t=>!["Home","Signup","Login","Confirmacao","LinkExpirado","SearchProfiles","PublicPage","Planos","Contato","Faq","PoliticaDePrivacidade","TermosDeUso","PagamentoPlus","PagamentoAgendamento"].includes(t.name)).map(t=>t.name);Ur.filter(t=>!Yn.includes(t.name)).map(t=>t.name);const d5=async()=>{var s;const t=window.location.hash.replace(/^#\/?/,""),e=new URLSearchParams(t);if(e.get("error_code")==="otp_expired"||(s=e.get("error_description"))!=null&&s.includes("Email link is invalid")){Gn.replace("/link-expirado");return}if(window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")){const i=e.get("access_token"),n=e.get("refresh_token");if(i&&n)try{await C.auth.setSession({access_token:i,refresh_token:n}),Gn.replace("/confirmacao")}catch{}}};d5();C.auth.onAuthStateChange(t=>{t==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")&&Gn.replace("/confirmacao")});zg(Zg).use(Gn).mount("#app");export{h5 as g};
