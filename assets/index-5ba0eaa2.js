var bp=Object.defineProperty;var yp=(t,e,s)=>e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var V=(t,e,s)=>(yp(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ka(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Pe={},Mn=[],$t=()=>{},xp=()=>!1,lr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ga=t=>t.startsWith("onUpdate:"),Xe=Object.assign,Ya=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},_p=Object.prototype.hasOwnProperty,Se=(t,e)=>_p.call(t,e),ne=Array.isArray,An=t=>Yi(t)==="[object Map]",qn=t=>Yi(t)==="[object Set]",$l=t=>Yi(t)==="[object Date]",ce=t=>typeof t=="function",We=t=>typeof t=="string",zt=t=>typeof t=="symbol",Re=t=>t!==null&&typeof t=="object",bu=t=>(Re(t)||ce(t))&&ce(t.then)&&ce(t.catch),yu=Object.prototype.toString,Yi=t=>yu.call(t),vp=t=>Yi(t).slice(8,-1),xu=t=>Yi(t)==="[object Object]",Ja=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mi=Ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},wp=/-(\w)/g,Rt=cr(t=>t.replace(wp,(e,s)=>s?s.toUpperCase():"")),kp=/\B([A-Z])/g,fn=cr(t=>t.replace(kp,"-$1").toLowerCase()),dr=cr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dr=cr(t=>t?`on${dr(t)}`:""),$s=(t,e)=>!Object.is(t,e),Ao=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},_u=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},zo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Bl;const ur=()=>Bl||(Bl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ti(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=We(n)?Ap(n):Ti(n);if(i)for(const o in i)e[o]=i[o]}return e}else if(We(t)||Re(t))return t}const Sp=/;(?![^(]*\))/g,Cp=/:([^]+)/,Mp=/\/\*[^]*?\*\//g;function Ap(t){const e={};return t.replace(Mp,"").split(Sp).forEach(s=>{if(s){const n=s.split(Cp);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function $e(t){let e="";if(We(t))e=t;else if(ne(t))for(let s=0;s<t.length;s++){const n=$e(t[s]);n&&(e+=n+" ")}else if(Re(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Pp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ep=Ka(Pp);function vu(t){return!!t||t===""}function Tp(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Ji(t[n],e[n]);return s}function Ji(t,e){if(t===e)return!0;let s=$l(t),n=$l(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=zt(t),n=zt(e),s||n)return t===e;if(s=ne(t),n=ne(e),s||n)return s&&n?Tp(t,e):!1;if(s=Re(t),n=Re(e),s||n){if(!s||!n)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const r in t){const a=t.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!Ji(t[r],e[r]))return!1}}return String(t)===String(e)}function Xa(t,e){return t.findIndex(s=>Ji(s,e))}const wu=t=>!!(t&&t.__v_isRef===!0),P=t=>We(t)?t:t==null?"":ne(t)||Re(t)&&(t.toString===yu||!ce(t.toString))?wu(t)?P(t.value):JSON.stringify(t,ku,2):String(t),ku=(t,e)=>wu(e)?ku(t,e.value):An(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],o)=>(s[Ir(n,o)+" =>"]=i,s),{})}:qn(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Ir(s))}:zt(e)?Ir(e):Re(e)&&!ne(e)&&!xu(e)?String(e):e,Ir=(t,e="")=>{var s;return zt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bt;class Op{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bt,!e&&bt&&(this.index=(bt.scopes||(bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=bt;try{return bt=this,e()}finally{bt=s}}}on(){++this._on===1&&(this.prevScope=bt,bt=this)}off(){this._on>0&&--this._on===0&&(bt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Dp(){return bt}let De;const Rr=new WeakSet;class Su{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bt&&bt.active&&bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rr.has(this)&&(Rr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vl(this),Au(this);const e=De,s=Bt;De=this,Bt=!0;try{return this.fn()}finally{Pu(this),De=e,Bt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)el(e);this.deps=this.depsTail=void 0,Vl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){da(this)&&this.run()}get dirty(){return da(this)}}let Cu=0,gi,bi;function Mu(t,e=!1){if(t.flags|=8,e){t.next=bi,bi=t;return}t.next=gi,gi=t}function Qa(){Cu++}function Za(){if(--Cu>0)return;if(bi){let e=bi;for(bi=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;gi;){let e=gi;for(gi=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Au(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pu(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),el(n),Ip(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function da(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Eu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Eu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Oi)||(t.globalVersion=Oi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!da(t))))return;t.flags|=2;const e=t.dep,s=De,n=Bt;De=t,Bt=!0;try{Au(t);const i=t.fn(t._value);(e.version===0||$s(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{De=s,Bt=n,Pu(t),t.flags&=-3}}function el(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)el(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ip(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Bt=!0;const Tu=[];function vs(){Tu.push(Bt),Bt=!1}function ws(){const t=Tu.pop();Bt=t===void 0?!0:t}function Vl(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=De;De=void 0;try{e()}finally{De=s}}}let Oi=0;class Rp{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!De||!Bt||De===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==De)s=this.activeLink=new Rp(De,this),De.deps?(s.prevDep=De.depsTail,De.depsTail.nextDep=s,De.depsTail=s):De.deps=De.depsTail=s,Ou(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=De.depsTail,s.nextDep=void 0,De.depsTail.nextDep=s,De.depsTail=s,De.deps===s&&(De.deps=n)}return s}trigger(e){this.version++,Oi++,this.notify(e)}notify(e){Qa();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Za()}}}function Ou(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ou(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const ua=new WeakMap,an=Symbol(""),ha=Symbol(""),Di=Symbol("");function nt(t,e,s){if(Bt&&De){let n=ua.get(t);n||ua.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new tl),i.map=n,i.key=s),i.track()}}function ps(t,e,s,n,i,o){const r=ua.get(t);if(!r){Oi++;return}const a=l=>{l&&l.trigger()};if(Qa(),e==="clear")r.forEach(a);else{const l=ne(t),c=l&&Ja(s);if(l&&s==="length"){const d=Number(n);r.forEach((h,f)=>{(f==="length"||f===Di||!zt(f)&&f>=d)&&a(h)})}else switch((s!==void 0||r.has(void 0))&&a(r.get(s)),c&&a(r.get(Di)),e){case"add":l?c&&a(r.get("length")):(a(r.get(an)),An(t)&&a(r.get(ha)));break;case"delete":l||(a(r.get(an)),An(t)&&a(r.get(ha)));break;case"set":An(t)&&a(r.get(an));break}}Za()}function gn(t){const e=ke(t);return e===t?e:(nt(e,"iterate",Di),It(t)?e:e.map(Qe))}function hr(t){return nt(t=ke(t),"iterate",Di),t}const Lp={__proto__:null,[Symbol.iterator](){return Lr(this,Symbol.iterator,Qe)},concat(...t){return gn(this).concat(...t.map(e=>ne(e)?gn(e):e))},entries(){return Lr(this,"entries",t=>(t[1]=Qe(t[1]),t))},every(t,e){return os(this,"every",t,e,void 0,arguments)},filter(t,e){return os(this,"filter",t,e,s=>s.map(Qe),arguments)},find(t,e){return os(this,"find",t,e,Qe,arguments)},findIndex(t,e){return os(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return os(this,"findLast",t,e,Qe,arguments)},findLastIndex(t,e){return os(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return os(this,"forEach",t,e,void 0,arguments)},includes(...t){return Fr(this,"includes",t)},indexOf(...t){return Fr(this,"indexOf",t)},join(t){return gn(this).join(t)},lastIndexOf(...t){return Fr(this,"lastIndexOf",t)},map(t,e){return os(this,"map",t,e,void 0,arguments)},pop(){return Xn(this,"pop")},push(...t){return Xn(this,"push",t)},reduce(t,...e){return zl(this,"reduce",t,e)},reduceRight(t,...e){return zl(this,"reduceRight",t,e)},shift(){return Xn(this,"shift")},some(t,e){return os(this,"some",t,e,void 0,arguments)},splice(...t){return Xn(this,"splice",t)},toReversed(){return gn(this).toReversed()},toSorted(t){return gn(this).toSorted(t)},toSpliced(...t){return gn(this).toSpliced(...t)},unshift(...t){return Xn(this,"unshift",t)},values(){return Lr(this,"values",Qe)}};function Lr(t,e,s){const n=hr(t),i=n[e]();return n!==t&&!It(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=s(o.value)),o}),i}const Fp=Array.prototype;function os(t,e,s,n,i,o){const r=hr(t),a=r!==t&&!It(t),l=r[e];if(l!==Fp[e]){const h=l.apply(t,o);return a?Qe(h):h}let c=s;r!==t&&(a?c=function(h,f){return s.call(this,Qe(h),f,t)}:s.length>2&&(c=function(h,f){return s.call(this,h,f,t)}));const d=l.call(r,c,n);return a&&i?i(d):d}function zl(t,e,s,n){const i=hr(t);let o=s;return i!==t&&(It(t)?s.length>3&&(o=function(r,a,l){return s.call(this,r,a,l,t)}):o=function(r,a,l){return s.call(this,r,Qe(a),l,t)}),i[e](o,...n)}function Fr(t,e,s){const n=ke(t);nt(n,"iterate",Di);const i=n[e](...s);return(i===-1||i===!1)&&il(s[0])?(s[0]=ke(s[0]),n[e](...s)):i}function Xn(t,e,s=[]){vs(),Qa();const n=ke(t)[e].apply(t,s);return Za(),ws(),n}const jp=Ka("__proto__,__v_isRef,__isVue"),Du=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(zt));function Np(t){zt(t)||(t=String(t));const e=ke(this);return nt(e,"has",t),e.hasOwnProperty(t)}class Iu{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?Gp:ju:o?Fu:Lu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const r=ne(e);if(!i){let l;if(r&&(l=Lp[s]))return l;if(s==="hasOwnProperty")return Np}const a=Reflect.get(e,s,at(e)?e:n);return(zt(s)?Du.has(s):jp(s))||(i||nt(e,"get",s),o)?a:at(a)?r&&Ja(s)?a:a.value:Re(a)?i?Uu(a):fr(a):a}}class Ru extends Iu{constructor(e=!1){super(!1,e)}set(e,s,n,i){let o=e[s];if(!this._isShallow){const l=Vs(o);if(!It(n)&&!Vs(n)&&(o=ke(o),n=ke(n)),!ne(e)&&at(o)&&!at(n))return l?!1:(o.value=n,!0)}const r=ne(e)&&Ja(s)?Number(s)<e.length:Se(e,s),a=Reflect.set(e,s,n,at(e)?e:i);return e===ke(i)&&(r?$s(n,o)&&ps(e,"set",s,n):ps(e,"add",s,n)),a}deleteProperty(e,s){const n=Se(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&ps(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!zt(s)||!Du.has(s))&&nt(e,"has",s),n}ownKeys(e){return nt(e,"iterate",ne(e)?"length":an),Reflect.ownKeys(e)}}class Up extends Iu{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const $p=new Ru,Bp=new Up,Vp=new Ru(!0);const fa=t=>t,io=t=>Reflect.getPrototypeOf(t);function zp(t,e,s){return function(...n){const i=this.__v_raw,o=ke(i),r=An(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=i[t](...n),d=s?fa:e?Ho:Qe;return!e&&nt(o,"iterate",l?ha:an),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function oo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Hp(t,e){const s={get(i){const o=this.__v_raw,r=ke(o),a=ke(i);t||($s(i,a)&&nt(r,"get",i),nt(r,"get",a));const{has:l}=io(r),c=e?fa:t?Ho:Qe;if(l.call(r,i))return c(o.get(i));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!t&&nt(ke(i),"iterate",an),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,r=ke(o),a=ke(i);return t||($s(i,a)&&nt(r,"has",i),nt(r,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const r=this,a=r.__v_raw,l=ke(a),c=e?fa:t?Ho:Qe;return!t&&nt(l,"iterate",an),a.forEach((d,h)=>i.call(o,c(d),c(h),r))}};return Xe(s,t?{add:oo("add"),set:oo("set"),delete:oo("delete"),clear:oo("clear")}:{add(i){!e&&!It(i)&&!Vs(i)&&(i=ke(i));const o=ke(this);return io(o).has.call(o,i)||(o.add(i),ps(o,"add",i,i)),this},set(i,o){!e&&!It(o)&&!Vs(o)&&(o=ke(o));const r=ke(this),{has:a,get:l}=io(r);let c=a.call(r,i);c||(i=ke(i),c=a.call(r,i));const d=l.call(r,i);return r.set(i,o),c?$s(o,d)&&ps(r,"set",i,o):ps(r,"add",i,o),this},delete(i){const o=ke(this),{has:r,get:a}=io(o);let l=r.call(o,i);l||(i=ke(i),l=r.call(o,i)),a&&a.call(o,i);const c=o.delete(i);return l&&ps(o,"delete",i,void 0),c},clear(){const i=ke(this),o=i.size!==0,r=i.clear();return o&&ps(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=zp(i,t,e)}),s}function sl(t,e){const s=Hp(t,e);return(n,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Se(s,i)&&i in n?s:n,i,o)}const Wp={get:sl(!1,!1)},qp={get:sl(!1,!0)},Kp={get:sl(!0,!1)};const Lu=new WeakMap,Fu=new WeakMap,ju=new WeakMap,Gp=new WeakMap;function Yp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jp(t){return t.__v_skip||!Object.isExtensible(t)?0:Yp(vp(t))}function fr(t){return Vs(t)?t:nl(t,!1,$p,Wp,Lu)}function Nu(t){return nl(t,!1,Vp,qp,Fu)}function Uu(t){return nl(t,!0,Bp,Kp,ju)}function nl(t,e,s,n,i){if(!Re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=Jp(t);if(o===0)return t;const r=i.get(t);if(r)return r;const a=new Proxy(t,o===2?n:s);return i.set(t,a),a}function Pn(t){return Vs(t)?Pn(t.__v_raw):!!(t&&t.__v_isReactive)}function Vs(t){return!!(t&&t.__v_isReadonly)}function It(t){return!!(t&&t.__v_isShallow)}function il(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function Xp(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&_u(t,"__v_skip",!0),t}const Qe=t=>Re(t)?fr(t):t,Ho=t=>Re(t)?Uu(t):t;function at(t){return t?t.__v_isRef===!0:!1}function Qp(t){return $u(t,!1)}function Zp(t){return $u(t,!0)}function $u(t,e){return at(t)?t:new em(t,e)}class em{constructor(e,s){this.dep=new tl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ke(e),this._value=s?e:Qe(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||It(e)||Vs(e);e=n?e:ke(e),$s(e,s)&&(this._rawValue=e,this._value=n?e:Qe(e),this.dep.trigger())}}function En(t){return at(t)?t.value:t}const tm={get:(t,e,s)=>e==="__v_raw"?t:En(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return at(i)&&!at(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function Bu(t){return Pn(t)?t:new Proxy(t,tm)}class sm{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new tl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return Mu(this,!0),!0}get value(){const e=this.dep.track();return Eu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nm(t,e,s=!1){let n,i;return ce(t)?n=t:(n=t.get,i=t.set),new sm(n,i,s)}const ro={},Wo=new WeakMap;let en;function im(t,e=!1,s=en){if(s){let n=Wo.get(s);n||Wo.set(s,n=[]),n.push(t)}}function om(t,e,s=Pe){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:a,call:l}=s,c=S=>i?S:It(S)||i===!1||i===0?ms(S,1):ms(S);let d,h,f,p,m=!1,g=!1;if(at(t)?(h=()=>t.value,m=It(t)):Pn(t)?(h=()=>c(t),m=!0):ne(t)?(g=!0,m=t.some(S=>Pn(S)||It(S)),h=()=>t.map(S=>{if(at(S))return S.value;if(Pn(S))return c(S);if(ce(S))return l?l(S,2):S()})):ce(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){vs();try{f()}finally{ws()}}const S=en;en=d;try{return l?l(t,3,[p]):t(p)}finally{en=S}}:h=$t,e&&i){const S=h,M=i===!0?1/0:i;h=()=>ms(S(),M)}const b=Dp(),v=()=>{d.stop(),b&&b.active&&Ya(b.effects,d)};if(o&&e){const S=e;e=(...M)=>{S(...M),v()}}let k=g?new Array(t.length).fill(ro):ro;const C=S=>{if(!(!(d.flags&1)||!d.dirty&&!S))if(e){const M=d.run();if(i||m||(g?M.some((N,L)=>$s(N,k[L])):$s(M,k))){f&&f();const N=en;en=d;try{const L=[M,k===ro?void 0:g&&k[0]===ro?[]:k,p];l?l(e,3,L):e(...L),k=M}finally{en=N}}}else d.run()};return a&&a(C),d=new Su(h),d.scheduler=r?()=>r(C,!1):C,p=S=>im(S,!1,d),f=d.onStop=()=>{const S=Wo.get(d);if(S){if(l)l(S,4);else for(const M of S)M();Wo.delete(d)}},e?n?C(!0):k=d.run():r?r(C.bind(null,!0),!0):d.run(),v.pause=d.pause.bind(d),v.resume=d.resume.bind(d),v.stop=v,v}function ms(t,e=1/0,s){if(e<=0||!Re(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,at(t))ms(t.value,e,s);else if(ne(t))for(let n=0;n<t.length;n++)ms(t[n],e,s);else if(qn(t)||An(t))t.forEach(n=>{ms(n,e,s)});else if(xu(t)){for(const n in t)ms(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ms(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xi(t,e,s,n){try{return n?t(...n):t()}catch(i){pr(i,e,s)}}function is(t,e,s,n){if(ce(t)){const i=Xi(t,e,s,n);return i&&bu(i)&&i.catch(o=>{pr(o,e,s)}),i}if(ne(t)){const i=[];for(let o=0;o<t.length;o++)i.push(is(t[o],e,s,n));return i}}function pr(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||Pe;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](t,l,c)===!1)return}a=a.parent}if(o){vs(),Xi(o,null,10,[t,l,c]),ws();return}}rm(t,s,i,n,r)}function rm(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const ht=[];let Zt=-1;const Tn=[];let Ts=null,kn=0;const Vu=Promise.resolve();let qo=null;function ol(t){const e=qo||Vu;return t?e.then(this?t.bind(this):t):e}function am(t){let e=Zt+1,s=ht.length;for(;e<s;){const n=e+s>>>1,i=ht[n],o=Ii(i);o<t||o===t&&i.flags&2?e=n+1:s=n}return e}function rl(t){if(!(t.flags&1)){const e=Ii(t),s=ht[ht.length-1];!s||!(t.flags&2)&&e>=Ii(s)?ht.push(t):ht.splice(am(e),0,t),t.flags|=1,zu()}}function zu(){qo||(qo=Vu.then(Wu))}function lm(t){ne(t)?Tn.push(...t):Ts&&t.id===-1?Ts.splice(kn+1,0,t):t.flags&1||(Tn.push(t),t.flags|=1),zu()}function Hl(t,e,s=Zt+1){for(;s<ht.length;s++){const n=ht[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ht.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Hu(t){if(Tn.length){const e=[...new Set(Tn)].sort((s,n)=>Ii(s)-Ii(n));if(Tn.length=0,Ts){Ts.push(...e);return}for(Ts=e,kn=0;kn<Ts.length;kn++){const s=Ts[kn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ts=null,kn=0}}const Ii=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Wu(t){const e=$t;try{for(Zt=0;Zt<ht.length;Zt++){const s=ht[Zt];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Xi(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Zt<ht.length;Zt++){const s=ht[Zt];s&&(s.flags&=-2)}Zt=-1,ht.length=0,Hu(),qo=null,(ht.length||Tn.length)&&Wu()}}let Ze=null,qu=null;function Ko(t){const e=Ze;return Ze=t,qu=t&&t.type.__scopeId||null,e}function ee(t,e=Ze,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&Zl(-1);const o=Ko(e);let r;try{r=t(...i)}finally{Ko(o),n._d&&Zl(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function E(t,e){if(Ze===null)return t;const s=yr(Ze),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,r,a,l=Pe]=e[i];o&&(ce(o)&&(o={mounted:o,updated:o}),o.deep&&ms(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ks(t,e,s,n){const i=t.dirs,o=e&&e.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(vs(),is(l,s,8,[t.el,a,t,e]),ws())}}const cm=Symbol("_vte"),dm=t=>t.__isTeleport;function al(t,e){t.shapeFlag&6&&t.component?(t.transition=e,al(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ku(t,e){return ce(t)?(()=>Xe({name:t.name},e,{setup:t}))():t}function Gu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Go(t,e,s,n,i=!1){if(ne(t)){t.forEach((m,g)=>Go(m,e&&(ne(e)?e[g]:e),s,n,i));return}if(On(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Go(t,e,s,n.component.subTree);return}const o=n.shapeFlag&4?yr(n.component):n.el,r=i?null:o,{i:a,r:l}=t,c=e&&e.r,d=a.refs===Pe?a.refs={}:a.refs,h=a.setupState,f=ke(h),p=h===Pe?()=>!1:m=>Se(f,m);if(c!=null&&c!==l&&(We(c)?(d[c]=null,p(c)&&(h[c]=null)):at(c)&&(c.value=null)),ce(l))Xi(l,a,12,[r,d]);else{const m=We(l),g=at(l);if(m||g){const b=()=>{if(t.f){const v=m?p(l)?h[l]:d[l]:l.value;i?ne(v)&&Ya(v,o):ne(v)?v.includes(o)||v.push(o):m?(d[l]=[o],p(l)&&(h[l]=d[l])):(l.value=[o],t.k&&(d[t.k]=l.value))}else m?(d[l]=r,p(l)&&(h[l]=r)):g&&(l.value=r,t.k&&(d[t.k]=r))};r?(b.id=-1,kt(b,s)):b()}}}ur().requestIdleCallback;ur().cancelIdleCallback;const On=t=>!!t.type.__asyncLoader,Yu=t=>t.type.__isKeepAlive;function um(t,e){Ju(t,"a",e)}function hm(t,e){Ju(t,"da",e)}function Ju(t,e,s=ot){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(mr(e,n,s),s){let i=s.parent;for(;i&&i.parent;)Yu(i.parent.vnode)&&fm(n,e,s,i),i=i.parent}}function fm(t,e,s,n){const i=mr(e,t,n,!0);Xu(()=>{Ya(n[e],i)},s)}function mr(t,e,s=ot,n=!1){if(s){const i=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...r)=>{vs();const a=Qi(s),l=is(e,s,t,r);return a(),ws(),l});return n?i.unshift(o):i.push(o),o}}const Ss=t=>(e,s=ot)=>{(!Fi||t==="sp")&&mr(t,(...n)=>e(...n),s)},pm=Ss("bm"),mm=Ss("m"),gm=Ss("bu"),bm=Ss("u"),ym=Ss("bum"),Xu=Ss("um"),xm=Ss("sp"),_m=Ss("rtg"),vm=Ss("rtc");function wm(t,e=ot){mr("ec",t,e)}const Qu="components";function z(t,e){return Sm(Qu,t,!0,e)||t}const km=Symbol.for("v-ndc");function Sm(t,e,s=!0,n=!1){const i=Ze||ot;if(i){const o=i.type;if(t===Qu){const a=dg(o,!1);if(a&&(a===e||a===Rt(e)||a===dr(Rt(e))))return o}const r=Wl(i[t]||o[t],e)||Wl(i.appContext[t],e);return!r&&n?o:r}}function Wl(t,e){return t&&(t[e]||t[Rt(e)]||t[dr(Rt(e))])}function fe(t,e,s,n){let i;const o=s&&s[n],r=ne(t);if(r||We(t)){const a=r&&Pn(t);let l=!1,c=!1;a&&(l=!It(t),c=Vs(t),t=hr(t)),i=new Array(t.length);for(let d=0,h=t.length;d<h;d++)i[d]=e(l?c?Ho(Qe(t[d])):Qe(t[d]):t[d],d,void 0,o&&o[d])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o&&o[a])}else if(Re(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,o&&o[l])}}else i=[];return s&&(s[n]=i),i}function Zu(t,e,s={},n,i){if(Ze.ce||Ze.parent&&On(Ze.parent)&&Ze.parent.ce)return e!=="default"&&(s.name=e),x(),et(Y,null,[O("slot",s,n&&n())],64);let o=t[e];o&&o._c&&(o._d=!1),x();const r=o&&eh(o(s)),a=s.key||r&&r.key,l=et(Y,{key:(a&&!zt(a)?a:`_${e}`)+(!r&&n?"_fb":"")},r||(n?n():[]),r&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function eh(t){return t.some(e=>Li(e)?!(e.type===ks||e.type===Y&&!eh(e.children)):!0)?t:null}const pa=t=>t?xh(t)?yr(t):pa(t.parent):null,yi=Xe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pa(t.parent),$root:t=>pa(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ll(t),$forceUpdate:t=>t.f||(t.f=()=>{rl(t.update)}),$nextTick:t=>t.n||(t.n=ol.bind(t.proxy)),$watch:t=>Wm.bind(t)}),jr=(t,e)=>t!==Pe&&!t.__isScriptSetup&&Se(t,e),Cm={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=r[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return o[e]}else{if(jr(n,e))return r[e]=1,n[e];if(i!==Pe&&Se(i,e))return r[e]=2,i[e];if((c=t.propsOptions[0])&&Se(c,e))return r[e]=3,o[e];if(s!==Pe&&Se(s,e))return r[e]=4,s[e];ma&&(r[e]=0)}}const d=yi[e];let h,f;if(d)return e==="$attrs"&&nt(t.attrs,"get",""),d(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==Pe&&Se(s,e))return r[e]=4,s[e];if(f=l.config.globalProperties,Se(f,e))return f[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:o}=t;return jr(i,e)?(i[e]=s,!0):n!==Pe&&Se(n,e)?(n[e]=s,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!s[r]||t!==Pe&&Se(t,r)||jr(e,r)||(a=o[0])&&Se(a,r)||Se(n,r)||Se(yi,r)||Se(i.config.globalProperties,r)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Se(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ql(t){return ne(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ma=!0;function Mm(t){const e=ll(t),s=t.proxy,n=t.ctx;ma=!1,e.beforeCreate&&Kl(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:b,beforeDestroy:v,beforeUnmount:k,destroyed:C,unmounted:S,render:M,renderTracked:N,renderTriggered:L,errorCaptured:B,serverPrefetch:X,expose:ie,inheritAttrs:re,components:de,directives:Ae,filters:qe}=e;if(c&&Am(c,n,null),r)for(const oe in r){const ue=r[oe];ce(ue)&&(n[oe]=ue.bind(s))}if(i){const oe=i.call(s,s);Re(oe)&&(t.data=fr(oe))}if(ma=!0,o)for(const oe in o){const ue=o[oe],Ee=ce(ue)?ue.bind(s,s):ce(ue.get)?ue.get.bind(s,s):$t,ct=!ce(ue)&&ce(ue.set)?ue.set.bind(s):$t,dt=Nt({get:Ee,set:ct});Object.defineProperty(n,oe,{enumerable:!0,configurable:!0,get:()=>dt.value,set:Ve=>dt.value=Ve})}if(a)for(const oe in a)th(a[oe],n,s,oe);if(l){const oe=ce(l)?l.call(s):l;Reflect.ownKeys(oe).forEach(ue=>{Po(ue,oe[ue])})}d&&Kl(d,t,"c");function le(oe,ue){ne(ue)?ue.forEach(Ee=>oe(Ee.bind(s))):ue&&oe(ue.bind(s))}if(le(pm,h),le(mm,f),le(gm,p),le(bm,m),le(um,g),le(hm,b),le(wm,B),le(vm,N),le(_m,L),le(ym,k),le(Xu,S),le(xm,X),ne(ie))if(ie.length){const oe=t.exposed||(t.exposed={});ie.forEach(ue=>{Object.defineProperty(oe,ue,{get:()=>s[ue],set:Ee=>s[ue]=Ee})})}else t.exposed||(t.exposed={});M&&t.render===$t&&(t.render=M),re!=null&&(t.inheritAttrs=re),de&&(t.components=de),Ae&&(t.directives=Ae),X&&Gu(t)}function Am(t,e,s=$t){ne(t)&&(t=ga(t));for(const n in t){const i=t[n];let o;Re(i)?"default"in i?o=xs(i.from||n,i.default,!0):o=xs(i.from||n):o=xs(i),at(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[n]=o}}function Kl(t,e,s){is(ne(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function th(t,e,s,n){let i=n.includes(".")?ph(s,n):()=>s[n];if(We(t)){const o=e[t];ce(o)&&Eo(i,o)}else if(ce(t))Eo(i,t.bind(s));else if(Re(t))if(ne(t))t.forEach(o=>th(o,e,s,n));else{const o=ce(t.handler)?t.handler.bind(s):e[t.handler];ce(o)&&Eo(i,o,t)}}function ll(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!i.length&&!s&&!n?l=e:(l={},i.length&&i.forEach(c=>Yo(l,c,r,!0)),Yo(l,e,r)),Re(e)&&o.set(e,l),l}function Yo(t,e,s,n=!1){const{mixins:i,extends:o}=e;o&&Yo(t,o,s,!0),i&&i.forEach(r=>Yo(t,r,s,!0));for(const r in e)if(!(n&&r==="expose")){const a=Pm[r]||s&&s[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const Pm={data:Gl,props:Yl,emits:Yl,methods:ai,computed:ai,beforeCreate:ut,created:ut,beforeMount:ut,mounted:ut,beforeUpdate:ut,updated:ut,beforeDestroy:ut,beforeUnmount:ut,destroyed:ut,unmounted:ut,activated:ut,deactivated:ut,errorCaptured:ut,serverPrefetch:ut,components:ai,directives:ai,watch:Tm,provide:Gl,inject:Em};function Gl(t,e){return e?t?function(){return Xe(ce(t)?t.call(this,this):t,ce(e)?e.call(this,this):e)}:e:t}function Em(t,e){return ai(ga(t),ga(e))}function ga(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function ut(t,e){return t?[...new Set([].concat(t,e))]:e}function ai(t,e){return t?Xe(Object.create(null),t,e):e}function Yl(t,e){return t?ne(t)&&ne(e)?[...new Set([...t,...e])]:Xe(Object.create(null),ql(t),ql(e??{})):e}function Tm(t,e){if(!t)return e;if(!e)return t;const s=Xe(Object.create(null),t);for(const n in e)s[n]=ut(t[n],e[n]);return s}function sh(){return{app:null,config:{isNativeTag:xp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Om=0;function Dm(t,e){return function(n,i=null){ce(n)||(n=Xe({},n)),i!=null&&!Re(i)&&(i=null);const o=sh(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:Om++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:hg,get config(){return o.config},set config(d){},use(d,...h){return r.has(d)||(d&&ce(d.install)?(r.add(d),d.install(c,...h)):ce(d)&&(r.add(d),d(c,...h))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,h){return h?(o.components[d]=h,c):o.components[d]},directive(d,h){return h?(o.directives[d]=h,c):o.directives[d]},mount(d,h,f){if(!l){const p=c._ceVNode||O(n,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&e?e(p,d):t(p,d,f),l=!0,c._container=d,d.__vue_app__=c,yr(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(is(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,h){return o.provides[d]=h,c},runWithContext(d){const h=Dn;Dn=c;try{return d()}finally{Dn=h}}};return c}}let Dn=null;function Po(t,e){if(ot){let s=ot.provides;const n=ot.parent&&ot.parent.provides;n===s&&(s=ot.provides=Object.create(n)),s[t]=e}}function xs(t,e,s=!1){const n=ot||Ze;if(n||Dn){const i=Dn?Dn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&ce(e)?e.call(n&&n.proxy):e}}const nh={},ih=()=>Object.create(nh),oh=t=>Object.getPrototypeOf(t)===nh;function Im(t,e,s,n=!1){const i={},o=ih();t.propsDefaults=Object.create(null),rh(t,e,i,o);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);s?t.props=n?i:Nu(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function Rm(t,e,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,a=ke(i),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(gr(t.emitsOptions,f))continue;const p=e[f];if(l)if(Se(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const m=Rt(f);i[m]=ba(l,a,m,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{rh(t,e,i,o)&&(c=!0);let d;for(const h in a)(!e||!Se(e,h)&&((d=fn(h))===h||!Se(e,d)))&&(l?s&&(s[h]!==void 0||s[d]!==void 0)&&(i[h]=ba(l,a,h,void 0,t,!0)):delete i[h]);if(o!==a)for(const h in o)(!e||!Se(e,h))&&(delete o[h],c=!0)}c&&ps(t.attrs,"set","")}function rh(t,e,s,n){const[i,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(mi(l))continue;const c=e[l];let d;i&&Se(i,d=Rt(l))?!o||!o.includes(d)?s[d]=c:(a||(a={}))[d]=c:gr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=ke(s),c=a||Pe;for(let d=0;d<o.length;d++){const h=o[d];s[h]=ba(i,l,h,c[h],t,!Se(c,h))}}return r}function ba(t,e,s,n,i,o){const r=t[s];if(r!=null){const a=Se(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ce(l)){const{propsDefaults:c}=i;if(s in c)n=c[s];else{const d=Qi(i);n=c[s]=l.call(null,e),d()}}else n=l;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===fn(s))&&(n=!0))}return n}const Lm=new WeakMap;function ah(t,e,s=!1){const n=s?Lm:e.propsCache,i=n.get(t);if(i)return i;const o=t.props,r={},a=[];let l=!1;if(!ce(t)){const d=h=>{l=!0;const[f,p]=ah(h,e,!0);Xe(r,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!o&&!l)return Re(t)&&n.set(t,Mn),Mn;if(ne(o))for(let d=0;d<o.length;d++){const h=Rt(o[d]);Jl(h)&&(r[h]=Pe)}else if(o)for(const d in o){const h=Rt(d);if(Jl(h)){const f=o[d],p=r[h]=ne(f)||ce(f)?{type:f}:Xe({},f),m=p.type;let g=!1,b=!0;if(ne(m))for(let v=0;v<m.length;++v){const k=m[v],C=ce(k)&&k.name;if(C==="Boolean"){g=!0;break}else C==="String"&&(b=!1)}else g=ce(m)&&m.name==="Boolean";p[0]=g,p[1]=b,(g||Se(p,"default"))&&a.push(h)}}const c=[r,a];return Re(t)&&n.set(t,c),c}function Jl(t){return t[0]!=="$"&&!mi(t)}const cl=t=>t[0]==="_"||t==="$stable",dl=t=>ne(t)?t.map(ts):[ts(t)],Fm=(t,e,s)=>{if(e._n)return e;const n=ee((...i)=>dl(e(...i)),s);return n._c=!1,n},lh=(t,e,s)=>{const n=t._ctx;for(const i in t){if(cl(i))continue;const o=t[i];if(ce(o))e[i]=Fm(i,o,n);else if(o!=null){const r=dl(o);e[i]=()=>r}}},ch=(t,e)=>{const s=dl(e);t.slots.default=()=>s},dh=(t,e,s)=>{for(const n in e)(s||!cl(n))&&(t[n]=e[n])},jm=(t,e,s)=>{const n=t.slots=ih();if(t.vnode.shapeFlag&32){const i=e._;i?(dh(n,e,s),s&&_u(n,"_",i,!0)):lh(e,n)}else e&&ch(t,e)},Nm=(t,e,s)=>{const{vnode:n,slots:i}=t;let o=!0,r=Pe;if(n.shapeFlag&32){const a=e._;a?s&&a===1?o=!1:dh(i,e,s):(o=!e.$stable,lh(e,i)),r=e}else e&&(ch(t,e),r={default:1});if(o)for(const a in i)!cl(a)&&r[a]==null&&delete i[a]},kt=Qm;function Um(t){return $m(t)}function $m(t,e){const s=ur();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=$t,insertStaticContent:m}=t,g=(y,_,A,F=null,T=null,U=null,q=void 0,W=null,H=!!_.dynamicChildren)=>{if(y===_)return;y&&!Qn(y,_)&&(F=D(y),Ve(y,T,U,!0),y=null),_.patchFlag===-2&&(H=!1,_.dynamicChildren=null);const{type:$,ref:se,shapeFlag:G}=_;switch($){case br:b(y,_,A,F);break;case ks:v(y,_,A,F);break;case To:y==null&&k(_,A,F,q);break;case Y:de(y,_,A,F,T,U,q,W,H);break;default:G&1?M(y,_,A,F,T,U,q,W,H):G&6?Ae(y,_,A,F,T,U,q,W,H):(G&64||G&128)&&$.process(y,_,A,F,T,U,q,W,H,Q)}se!=null&&T&&Go(se,y&&y.ref,U,_||y,!_)},b=(y,_,A,F)=>{if(y==null)n(_.el=a(_.children),A,F);else{const T=_.el=y.el;_.children!==y.children&&c(T,_.children)}},v=(y,_,A,F)=>{y==null?n(_.el=l(_.children||""),A,F):_.el=y.el},k=(y,_,A,F)=>{[y.el,y.anchor]=m(y.children,_,A,F,y.el,y.anchor)},C=({el:y,anchor:_},A,F)=>{let T;for(;y&&y!==_;)T=f(y),n(y,A,F),y=T;n(_,A,F)},S=({el:y,anchor:_})=>{let A;for(;y&&y!==_;)A=f(y),i(y),y=A;i(_)},M=(y,_,A,F,T,U,q,W,H)=>{_.type==="svg"?q="svg":_.type==="math"&&(q="mathml"),y==null?N(_,A,F,T,U,q,W,H):X(y,_,T,U,q,W,H)},N=(y,_,A,F,T,U,q,W)=>{let H,$;const{props:se,shapeFlag:G,transition:Z,dirs:ae}=y;if(H=y.el=r(y.type,U,se&&se.is,se),G&8?d(H,y.children):G&16&&B(y.children,H,null,F,T,Nr(y,U),q,W),ae&&Ks(y,null,F,"created"),L(H,y,y.scopeId,q,F),se){for(const Te in se)Te!=="value"&&!mi(Te)&&o(H,Te,null,se[Te],U,F);"value"in se&&o(H,"value",null,se.value,U),($=se.onVnodeBeforeMount)&&Jt($,F,y)}ae&&Ks(y,null,F,"beforeMount");const _e=Bm(T,Z);_e&&Z.beforeEnter(H),n(H,_,A),(($=se&&se.onVnodeMounted)||_e||ae)&&kt(()=>{$&&Jt($,F,y),_e&&Z.enter(H),ae&&Ks(y,null,F,"mounted")},T)},L=(y,_,A,F,T)=>{if(A&&p(y,A),F)for(let U=0;U<F.length;U++)p(y,F[U]);if(T){let U=T.subTree;if(_===U||gh(U.type)&&(U.ssContent===_||U.ssFallback===_)){const q=T.vnode;L(y,q,q.scopeId,q.slotScopeIds,T.parent)}}},B=(y,_,A,F,T,U,q,W,H=0)=>{for(let $=H;$<y.length;$++){const se=y[$]=W?Os(y[$]):ts(y[$]);g(null,se,_,A,F,T,U,q,W)}},X=(y,_,A,F,T,U,q)=>{const W=_.el=y.el;let{patchFlag:H,dynamicChildren:$,dirs:se}=_;H|=y.patchFlag&16;const G=y.props||Pe,Z=_.props||Pe;let ae;if(A&&Gs(A,!1),(ae=Z.onVnodeBeforeUpdate)&&Jt(ae,A,_,y),se&&Ks(_,y,A,"beforeUpdate"),A&&Gs(A,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&d(W,""),$?ie(y.dynamicChildren,$,W,A,F,Nr(_,T),U):q||ue(y,_,W,null,A,F,Nr(_,T),U,!1),H>0){if(H&16)re(W,G,Z,A,T);else if(H&2&&G.class!==Z.class&&o(W,"class",null,Z.class,T),H&4&&o(W,"style",G.style,Z.style,T),H&8){const _e=_.dynamicProps;for(let Te=0;Te<_e.length;Te++){const Ce=_e[Te],_t=G[Ce],tt=Z[Ce];(tt!==_t||Ce==="value")&&o(W,Ce,_t,tt,T,A)}}H&1&&y.children!==_.children&&d(W,_.children)}else!q&&$==null&&re(W,G,Z,A,T);((ae=Z.onVnodeUpdated)||se)&&kt(()=>{ae&&Jt(ae,A,_,y),se&&Ks(_,y,A,"updated")},F)},ie=(y,_,A,F,T,U,q)=>{for(let W=0;W<_.length;W++){const H=y[W],$=_[W],se=H.el&&(H.type===Y||!Qn(H,$)||H.shapeFlag&70)?h(H.el):A;g(H,$,se,null,F,T,U,q,!0)}},re=(y,_,A,F,T)=>{if(_!==A){if(_!==Pe)for(const U in _)!mi(U)&&!(U in A)&&o(y,U,_[U],null,T,F);for(const U in A){if(mi(U))continue;const q=A[U],W=_[U];q!==W&&U!=="value"&&o(y,U,W,q,T,F)}"value"in A&&o(y,"value",_.value,A.value,T)}},de=(y,_,A,F,T,U,q,W,H)=>{const $=_.el=y?y.el:a(""),se=_.anchor=y?y.anchor:a("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:ae}=_;ae&&(W=W?W.concat(ae):ae),y==null?(n($,A,F),n(se,A,F),B(_.children||[],A,se,T,U,q,W,H)):G>0&&G&64&&Z&&y.dynamicChildren?(ie(y.dynamicChildren,Z,A,T,U,q,W),(_.key!=null||T&&_===T.subTree)&&uh(y,_,!0)):ue(y,_,A,se,T,U,q,W,H)},Ae=(y,_,A,F,T,U,q,W,H)=>{_.slotScopeIds=W,y==null?_.shapeFlag&512?T.ctx.activate(_,A,F,q,H):qe(_,A,F,T,U,q,H):xe(y,_,H)},qe=(y,_,A,F,T,U,q)=>{const W=y.component=og(y,F,T);if(Yu(y)&&(W.ctx.renderer=Q),rg(W,!1,q),W.asyncDep){if(T&&T.registerDep(W,le,q),!y.el){const H=W.subTree=O(ks);v(null,H,_,A)}}else le(W,y,_,A,T,U,q)},xe=(y,_,A)=>{const F=_.component=y.component;if(Jm(y,_,A))if(F.asyncDep&&!F.asyncResolved){oe(F,_,A);return}else F.next=_,F.update();else _.el=y.el,F.vnode=_},le=(y,_,A,F,T,U,q)=>{const W=()=>{if(y.isMounted){let{next:G,bu:Z,u:ae,parent:_e,vnode:Te}=y;{const vt=hh(y);if(vt){G&&(G.el=Te.el,oe(y,G,q)),vt.asyncDep.then(()=>{y.isUnmounted||W()});return}}let Ce=G,_t;Gs(y,!1),G?(G.el=Te.el,oe(y,G,q)):G=Te,Z&&Ao(Z),(_t=G.props&&G.props.onVnodeBeforeUpdate)&&Jt(_t,_e,G,Te),Gs(y,!0);const tt=Ur(y),Ft=y.subTree;y.subTree=tt,g(Ft,tt,h(Ft.el),D(Ft),y,T,U),G.el=tt.el,Ce===null&&Xm(y,tt.el),ae&&kt(ae,T),(_t=G.props&&G.props.onVnodeUpdated)&&kt(()=>Jt(_t,_e,G,Te),T)}else{let G;const{el:Z,props:ae}=_,{bm:_e,m:Te,parent:Ce,root:_t,type:tt}=y,Ft=On(_);if(Gs(y,!1),_e&&Ao(_e),!Ft&&(G=ae&&ae.onVnodeBeforeMount)&&Jt(G,Ce,_),Gs(y,!0),Z&&Ne){const vt=()=>{y.subTree=Ur(y),Ne(Z,y.subTree,y,T,null)};Ft&&tt.__asyncHydrate?tt.__asyncHydrate(Z,y,vt):vt()}else{_t.ce&&_t.ce._injectChildStyle(tt);const vt=y.subTree=Ur(y);g(null,vt,A,F,y,T,U),_.el=vt.el}if(Te&&kt(Te,T),!Ft&&(G=ae&&ae.onVnodeMounted)){const vt=_;kt(()=>Jt(G,Ce,vt),T)}(_.shapeFlag&256||Ce&&On(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&y.a&&kt(y.a,T),y.isMounted=!0,_=A=F=null}};y.scope.on();const H=y.effect=new Su(W);y.scope.off();const $=y.update=H.run.bind(H),se=y.job=H.runIfDirty.bind(H);se.i=y,se.id=y.uid,H.scheduler=()=>rl(se),Gs(y,!0),$()},oe=(y,_,A)=>{_.component=y;const F=y.vnode.props;y.vnode=_,y.next=null,Rm(y,_.props,F,A),Nm(y,_.children,A),vs(),Hl(y),ws()},ue=(y,_,A,F,T,U,q,W,H=!1)=>{const $=y&&y.children,se=y?y.shapeFlag:0,G=_.children,{patchFlag:Z,shapeFlag:ae}=_;if(Z>0){if(Z&128){ct($,G,A,F,T,U,q,W,H);return}else if(Z&256){Ee($,G,A,F,T,U,q,W,H);return}}ae&8?(se&16&&He($,T,U),G!==$&&d(A,G)):se&16?ae&16?ct($,G,A,F,T,U,q,W,H):He($,T,U,!0):(se&8&&d(A,""),ae&16&&B(G,A,F,T,U,q,W,H))},Ee=(y,_,A,F,T,U,q,W,H)=>{y=y||Mn,_=_||Mn;const $=y.length,se=_.length,G=Math.min($,se);let Z;for(Z=0;Z<G;Z++){const ae=_[Z]=H?Os(_[Z]):ts(_[Z]);g(y[Z],ae,A,null,T,U,q,W,H)}$>se?He(y,T,U,!0,!1,G):B(_,A,F,T,U,q,W,H,G)},ct=(y,_,A,F,T,U,q,W,H)=>{let $=0;const se=_.length;let G=y.length-1,Z=se-1;for(;$<=G&&$<=Z;){const ae=y[$],_e=_[$]=H?Os(_[$]):ts(_[$]);if(Qn(ae,_e))g(ae,_e,A,null,T,U,q,W,H);else break;$++}for(;$<=G&&$<=Z;){const ae=y[G],_e=_[Z]=H?Os(_[Z]):ts(_[Z]);if(Qn(ae,_e))g(ae,_e,A,null,T,U,q,W,H);else break;G--,Z--}if($>G){if($<=Z){const ae=Z+1,_e=ae<se?_[ae].el:F;for(;$<=Z;)g(null,_[$]=H?Os(_[$]):ts(_[$]),A,_e,T,U,q,W,H),$++}}else if($>Z)for(;$<=G;)Ve(y[$],T,U,!0),$++;else{const ae=$,_e=$,Te=new Map;for($=_e;$<=Z;$++){const wt=_[$]=H?Os(_[$]):ts(_[$]);wt.key!=null&&Te.set(wt.key,$)}let Ce,_t=0;const tt=Z-_e+1;let Ft=!1,vt=0;const Jn=new Array(tt);for($=0;$<tt;$++)Jn[$]=0;for($=ae;$<=G;$++){const wt=y[$];if(_t>=tt){Ve(wt,T,U,!0);continue}let Yt;if(wt.key!=null)Yt=Te.get(wt.key);else for(Ce=_e;Ce<=Z;Ce++)if(Jn[Ce-_e]===0&&Qn(wt,_[Ce])){Yt=Ce;break}Yt===void 0?Ve(wt,T,U,!0):(Jn[Yt-_e]=$+1,Yt>=vt?vt=Yt:Ft=!0,g(wt,_[Yt],A,null,T,U,q,W,H),_t++)}const Nl=Ft?Vm(Jn):Mn;for(Ce=Nl.length-1,$=tt-1;$>=0;$--){const wt=_e+$,Yt=_[wt],Ul=wt+1<se?_[wt+1].el:F;Jn[$]===0?g(null,Yt,A,Ul,T,U,q,W,H):Ft&&(Ce<0||$!==Nl[Ce]?dt(Yt,A,Ul,2):Ce--)}}},dt=(y,_,A,F,T=null)=>{const{el:U,type:q,transition:W,children:H,shapeFlag:$}=y;if($&6){dt(y.component.subTree,_,A,F);return}if($&128){y.suspense.move(_,A,F);return}if($&64){q.move(y,_,A,Q);return}if(q===Y){n(U,_,A);for(let G=0;G<H.length;G++)dt(H[G],_,A,F);n(y.anchor,_,A);return}if(q===To){C(y,_,A);return}if(F!==2&&$&1&&W)if(F===0)W.beforeEnter(U),n(U,_,A),kt(()=>W.enter(U),T);else{const{leave:G,delayLeave:Z,afterLeave:ae}=W,_e=()=>{y.ctx.isUnmounted?i(U):n(U,_,A)},Te=()=>{G(U,()=>{_e(),ae&&ae()})};Z?Z(U,_e,Te):Te()}else n(U,_,A)},Ve=(y,_,A,F=!1,T=!1)=>{const{type:U,props:q,ref:W,children:H,dynamicChildren:$,shapeFlag:se,patchFlag:G,dirs:Z,cacheIndex:ae}=y;if(G===-2&&(T=!1),W!=null&&(vs(),Go(W,null,A,y,!0),ws()),ae!=null&&(_.renderCache[ae]=void 0),se&256){_.ctx.deactivate(y);return}const _e=se&1&&Z,Te=!On(y);let Ce;if(Te&&(Ce=q&&q.onVnodeBeforeUnmount)&&Jt(Ce,_,y),se&6)Gt(y.component,A,F);else{if(se&128){y.suspense.unmount(A,F);return}_e&&Ks(y,null,_,"beforeUnmount"),se&64?y.type.remove(y,_,A,Q,F):$&&!$.hasOnce&&(U!==Y||G>0&&G&64)?He($,_,A,!1,!0):(U===Y&&G&384||!T&&se&16)&&He(H,_,A),F&&Tt(y)}(Te&&(Ce=q&&q.onVnodeUnmounted)||_e)&&kt(()=>{Ce&&Jt(Ce,_,y),_e&&Ks(y,null,_,"unmounted")},A)},Tt=y=>{const{type:_,el:A,anchor:F,transition:T}=y;if(_===Y){pt(A,F);return}if(_===To){S(y);return}const U=()=>{i(A),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(y.shapeFlag&1&&T&&!T.persisted){const{leave:q,delayLeave:W}=T,H=()=>q(A,U);W?W(y.el,U,H):H()}else U()},pt=(y,_)=>{let A;for(;y!==_;)A=f(y),i(y),y=A;i(_)},Gt=(y,_,A)=>{const{bum:F,scope:T,job:U,subTree:q,um:W,m:H,a:$,parent:se,slots:{__:G}}=y;Xl(H),Xl($),F&&Ao(F),se&&ne(G)&&G.forEach(Z=>{se.renderCache[Z]=void 0}),T.stop(),U&&(U.flags|=8,Ve(q,y,_,A)),W&&kt(W,_),kt(()=>{y.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},He=(y,_,A,F=!1,T=!1,U=0)=>{for(let q=U;q<y.length;q++)Ve(y[q],_,A,F,T)},D=y=>{if(y.shapeFlag&6)return D(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const _=f(y.anchor||y.el),A=_&&_[cm];return A?f(A):_};let J=!1;const K=(y,_,A)=>{y==null?_._vnode&&Ve(_._vnode,null,null,!0):g(_._vnode||null,y,_,null,null,null,A),_._vnode=y,J||(J=!0,Hl(),Hu(),J=!1)},Q={p:g,um:Ve,m:dt,r:Tt,mt:qe,mc:B,pc:ue,pbc:ie,n:D,o:t};let ve,Ne;return e&&([ve,Ne]=e(Q)),{render:K,hydrate:ve,createApp:Dm(K,ve)}}function Nr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Gs({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bm(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function uh(t,e,s=!1){const n=t.children,i=e.children;if(ne(n)&&ne(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Os(i[o]),a.el=r.el),!s&&a.patchFlag!==-2&&uh(r,a)),a.type===br&&(a.el=r.el),a.type===ks&&!a.el&&(a.el=r.el)}}function Vm(t){const e=t.slice(),s=[0];let n,i,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=s[s.length-1],t[i]<c){e[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)a=o+r>>1,t[s[a]]<c?o=a+1:r=a;c<t[s[o]]&&(o>0&&(e[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=e[r];return s}function hh(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:hh(e)}function Xl(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const zm=Symbol.for("v-scx"),Hm=()=>xs(zm);function Eo(t,e,s){return fh(t,e,s)}function fh(t,e,s=Pe){const{immediate:n,deep:i,flush:o,once:r}=s,a=Xe({},s),l=e&&n||!e&&o!=="post";let c;if(Fi){if(o==="sync"){const p=Hm();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=$t,p.resume=$t,p.pause=$t,p}}const d=ot;a.call=(p,m,g)=>is(p,d,m,g);let h=!1;o==="post"?a.scheduler=p=>{kt(p,d&&d.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():rl(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=om(t,e,a);return Fi&&(c?c.push(f):l&&f()),f}function Wm(t,e,s){const n=this.proxy,i=We(t)?t.includes(".")?ph(n,t):()=>n[t]:t.bind(n,n);let o;ce(e)?o=e:(o=e.handler,s=e);const r=Qi(this),a=fh(i,o.bind(n),s);return r(),a}function ph(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const qm=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rt(e)}Modifiers`]||t[`${fn(e)}Modifiers`];function Km(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Pe;let i=s;const o=e.startsWith("update:"),r=o&&qm(n,e.slice(7));r&&(r.trim&&(i=s.map(d=>We(d)?d.trim():d)),r.number&&(i=s.map(zo)));let a,l=n[a=Dr(e)]||n[a=Dr(Rt(e))];!l&&o&&(l=n[a=Dr(fn(e))]),l&&is(l,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,is(c,t,6,i)}}function mh(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const o=t.emits;let r={},a=!1;if(!ce(t)){const l=c=>{const d=mh(c,e,!0);d&&(a=!0,Xe(r,d))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Re(t)&&n.set(t,null),null):(ne(o)?o.forEach(l=>r[l]=null):Xe(r,o),Re(t)&&n.set(t,r),r)}function gr(t,e){return!t||!lr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,fn(e))||Se(t,e))}function Ur(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:d,props:h,data:f,setupState:p,ctx:m,inheritAttrs:g}=t,b=Ko(t);let v,k;try{if(s.shapeFlag&4){const S=i||n,M=S;v=ts(c.call(M,S,d,h,p,f,m)),k=a}else{const S=e;v=ts(S.length>1?S(h,{attrs:a,slots:r,emit:l}):S(h,null)),k=e.props?a:Gm(a)}}catch(S){xi.length=0,pr(S,t,1),v=O(ks)}let C=v;if(k&&g!==!1){const S=Object.keys(k),{shapeFlag:M}=C;S.length&&M&7&&(o&&S.some(Ga)&&(k=Ym(k,o)),C=Fn(C,k,!1,!0))}return s.dirs&&(C=Fn(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&al(C,s.transition),v=C,Ko(b),v}const Gm=t=>{let e;for(const s in t)(s==="class"||s==="style"||lr(s))&&((e||(e={}))[s]=t[s]);return e},Ym=(t,e)=>{const s={};for(const n in t)(!Ga(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Jm(t,e,s){const{props:n,children:i,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ql(n,r,c):!!r;if(l&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(r[f]!==n[f]&&!gr(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Ql(n,r,c):!0:!!r;return!1}function Ql(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==t[o]&&!gr(s,o))return!0}return!1}function Xm({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const gh=t=>t.__isSuspense;function Qm(t,e){e&&e.pendingBranch?ne(t)?e.effects.push(...t):e.effects.push(t):lm(t)}const Y=Symbol.for("v-fgt"),br=Symbol.for("v-txt"),ks=Symbol.for("v-cmt"),To=Symbol.for("v-stc"),xi=[];let At=null;function x(t=!1){xi.push(At=t?null:[])}function Zm(){xi.pop(),At=xi[xi.length-1]||null}let Ri=1;function Zl(t,e=!1){Ri+=t,t<0&&At&&e&&(At.hasOnce=!0)}function bh(t){return t.dynamicChildren=Ri>0?At||Mn:null,Zm(),Ri>0&&At&&At.push(t),t}function w(t,e,s,n,i,o){return bh(u(t,e,s,n,i,o,!0))}function et(t,e,s,n,i){return bh(O(t,e,s,n,i,!0))}function Li(t){return t?t.__v_isVNode===!0:!1}function Qn(t,e){return t.type===e.type&&t.key===e.key}const yh=({key:t})=>t??null,Oo=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||at(t)||ce(t)?{i:Ze,r:t,k:e,f:!!s}:t:null);function u(t,e=null,s=null,n=0,i=null,o=t===Y?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&yh(e),ref:e&&Oo(e),scopeId:qu,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ze};return a?(ul(l,s),o&128&&t.normalize(l)):s&&(l.shapeFlag|=We(s)?8:16),Ri>0&&!r&&At&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&At.push(l),l}const O=eg;function eg(t,e=null,s=null,n=0,i=null,o=!1){if((!t||t===km)&&(t=ks),Li(t)){const a=Fn(t,e,!0);return s&&ul(a,s),Ri>0&&!o&&At&&(a.shapeFlag&6?At[At.indexOf(t)]=a:At.push(a)),a.patchFlag=-2,a}if(ug(t)&&(t=t.__vccOpts),e){e=tg(e);let{class:a,style:l}=e;a&&!We(a)&&(e.class=$e(a)),Re(l)&&(il(l)&&!ne(l)&&(l=Xe({},l)),e.style=Ti(l))}const r=We(t)?1:gh(t)?128:dm(t)?64:Re(t)?4:ce(t)?2:0;return u(t,e,s,n,i,r,o,!0)}function tg(t){return t?il(t)||oh(t)?Xe({},t):t:null}function Fn(t,e,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:a,transition:l}=t,c=e?sg(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&yh(c),ref:e&&e.ref?s&&o?ne(o)?o.concat(Oo(e)):[o,Oo(e)]:Oo(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Y?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fn(t.ssContent),ssFallback:t.ssFallback&&Fn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&al(d,l.clone(d)),d}function te(t=" ",e=0){return O(br,null,t,e)}function dn(t,e){const s=O(To,null,t);return s.staticCount=e,s}function j(t="",e=!1){return e?(x(),et(ks,null,t)):O(ks,null,t)}function ts(t){return t==null||typeof t=="boolean"?O(ks):ne(t)?O(Y,null,t.slice()):Li(t)?Os(t):O(br,null,String(t))}function Os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Fn(t)}function ul(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ne(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),ul(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!oh(e)?e._ctx=Ze:i===3&&Ze&&(Ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ce(e)?(e={default:e,_ctx:Ze},s=32):(e=String(e),n&64?(s=16,e=[te(e)]):s=8);t.children=e,t.shapeFlag|=s}function sg(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=$e([e.class,n.class]));else if(i==="style")e.style=Ti([e.style,n.style]);else if(lr(i)){const o=e[i],r=n[i];r&&o!==r&&!(ne(o)&&o.includes(r))&&(e[i]=o?[].concat(o,r):r)}else i!==""&&(e[i]=n[i])}return e}function Jt(t,e,s,n=null){is(t,e,7,[s,n])}const ng=sh();let ig=0;function og(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||ng,o={uid:ig++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Op(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ah(n,i),emitsOptions:mh(n,i),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:n.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Km.bind(null,o),t.ce&&t.ce(o),o}let ot=null,Jo,ya;{const t=ur(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};Jo=e("__VUE_INSTANCE_SETTERS__",s=>ot=s),ya=e("__VUE_SSR_SETTERS__",s=>Fi=s)}const Qi=t=>{const e=ot;return Jo(t),t.scope.on(),()=>{t.scope.off(),Jo(e)}},ec=()=>{ot&&ot.scope.off(),Jo(null)};function xh(t){return t.vnode.shapeFlag&4}let Fi=!1;function rg(t,e=!1,s=!1){e&&ya(e);const{props:n,children:i}=t.vnode,o=xh(t);Im(t,n,o,e),jm(t,i,s||e);const r=o?ag(t,e):void 0;return e&&ya(!1),r}function ag(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Cm);const{setup:n}=s;if(n){vs();const i=t.setupContext=n.length>1?cg(t):null,o=Qi(t),r=Xi(n,t,0,[t.props,i]),a=bu(r);if(ws(),o(),(a||t.sp)&&!On(t)&&Gu(t),a){if(r.then(ec,ec),e)return r.then(l=>{tc(t,l,e)}).catch(l=>{pr(l,t,0)});t.asyncDep=r}else tc(t,r,e)}else _h(t,e)}function tc(t,e,s){ce(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Re(e)&&(t.setupState=Bu(e)),_h(t,s)}let sc;function _h(t,e,s){const n=t.type;if(!t.render){if(!e&&sc&&!n.render){const i=n.template||ll(t).template;if(i){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=Xe(Xe({isCustomElement:o,delimiters:a},r),l);n.render=sc(i,c)}}t.render=n.render||$t}{const i=Qi(t);vs();try{Mm(t)}finally{ws(),i()}}}const lg={get(t,e){return nt(t,"get",""),t[e]}};function cg(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,lg),slots:t.slots,emit:t.emit,expose:e}}function yr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Bu(Xp(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in yi)return yi[s](t)},has(e,s){return s in e||s in yi}})):t.proxy}function dg(t,e=!0){return ce(t)?t.displayName||t.name:t.name||e&&t.__name}function ug(t){return ce(t)&&"__vccOpts"in t}const Nt=(t,e)=>nm(t,e,Fi);function vh(t,e,s){const n=arguments.length;return n===2?Re(e)&&!ne(e)?Li(e)?O(t,null,[e]):O(t,e):O(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Li(s)&&(s=[s]),O(t,e,s))}const hg="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xa;const nc=typeof window<"u"&&window.trustedTypes;if(nc)try{xa=nc.createPolicy("vue",{createHTML:t=>t})}catch{}const wh=xa?t=>xa.createHTML(t):t=>t,fg="http://www.w3.org/2000/svg",pg="http://www.w3.org/1998/Math/MathML",us=typeof document<"u"?document:null,ic=us&&us.createElement("template"),mg={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?us.createElementNS(fg,t):e==="mathml"?us.createElementNS(pg,t):s?us.createElement(t,{is:s}):us.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>us.createTextNode(t),createComment:t=>us.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>us.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,o){const r=s?s.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{ic.innerHTML=wh(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=ic.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},gg=Symbol("_vtc");function bg(t,e,s){const n=t[gg];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Xo=Symbol("_vod"),kh=Symbol("_vsh"),In={beforeMount(t,{value:e},{transition:s}){t[Xo]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Zn(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),Zn(t,!0),n.enter(t)):n.leave(t,()=>{Zn(t,!1)}):Zn(t,e))},beforeUnmount(t,{value:e}){Zn(t,e)}};function Zn(t,e){t.style.display=e?t[Xo]:"none",t[kh]=!e}const yg=Symbol(""),xg=/(^|;)\s*display\s*:/;function _g(t,e,s){const n=t.style,i=We(s);let o=!1;if(s&&!i){if(e)if(We(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();s[a]==null&&Do(n,a,"")}else for(const r in e)s[r]==null&&Do(n,r,"");for(const r in s)r==="display"&&(o=!0),Do(n,r,s[r])}else if(i){if(e!==s){const r=n[yg];r&&(s+=";"+r),n.cssText=s,o=xg.test(s)}}else e&&t.removeAttribute("style");Xo in t&&(t[Xo]=o?n.display:"",t[kh]&&(n.display="none"))}const oc=/\s*!important$/;function Do(t,e,s){if(ne(s))s.forEach(n=>Do(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=vg(t,e);oc.test(s)?t.setProperty(fn(n),s.replace(oc,""),"important"):t[n]=s}}const rc=["Webkit","Moz","ms"],$r={};function vg(t,e){const s=$r[e];if(s)return s;let n=Rt(e);if(n!=="filter"&&n in t)return $r[e]=n;n=dr(n);for(let i=0;i<rc.length;i++){const o=rc[i]+n;if(o in t)return $r[e]=o}return e}const ac="http://www.w3.org/1999/xlink";function lc(t,e,s,n,i,o=Ep(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ac,e.slice(6,e.length)):t.setAttributeNS(ac,e,s):s==null||o&&!vu(s)?t.removeAttribute(e):t.setAttribute(e,o?"":zt(s)?String(s):s)}function cc(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?wh(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let r=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=vu(s):s==null&&a==="string"?(s="",r=!0):a==="number"&&(s=0,r=!0)}try{t[e]=s}catch{}r&&t.removeAttribute(i||e)}function Rs(t,e,s,n){t.addEventListener(e,s,n)}function wg(t,e,s,n){t.removeEventListener(e,s,n)}const dc=Symbol("_vei");function kg(t,e,s,n,i=null){const o=t[dc]||(t[dc]={}),r=o[e];if(n&&r)r.value=n;else{const[a,l]=Sg(e);if(n){const c=o[e]=Ag(n,i);Rs(t,a,c,l)}else r&&(wg(t,a,r,l),o[e]=void 0)}}const uc=/(?:Once|Passive|Capture)$/;function Sg(t){let e;if(uc.test(t)){e={};let n;for(;n=t.match(uc);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fn(t.slice(2)),e]}let Br=0;const Cg=Promise.resolve(),Mg=()=>Br||(Cg.then(()=>Br=0),Br=Date.now());function Ag(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;is(Pg(n,s.value),e,5,[n])};return s.value=t,s.attached=Mg(),s}function Pg(t,e){if(ne(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const hc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Eg=(t,e,s,n,i,o)=>{const r=i==="svg";e==="class"?bg(t,n,r):e==="style"?_g(t,s,n):lr(e)?Ga(e)||kg(t,e,s,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Tg(t,e,n,r))?(cc(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&lc(t,e,n,r,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(n))?cc(t,Rt(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),lc(t,e,n,r))};function Tg(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&hc(e)&&ce(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return hc(e)&&We(s)?!1:e in t}const jn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ne(e)?s=>Ao(e,s):e};function Og(t){t.target.composing=!0}function fc(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _s=Symbol("_assign"),R={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[_s]=jn(i);const o=n||i.props&&i.props.type==="number";Rs(t,e?"change":"input",r=>{if(r.target.composing)return;let a=t.value;s&&(a=a.trim()),o&&(a=zo(a)),t[_s](a)}),s&&Rs(t,"change",()=>{t.value=t.value.trim()}),e||(Rs(t,"compositionstart",Og),Rs(t,"compositionend",fc),Rs(t,"change",fc))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(t[_s]=jn(r),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?zo(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===l)||(t.value=l))}},hl={deep:!0,created(t,e,s){t[_s]=jn(s),Rs(t,"change",()=>{const n=t._modelValue,i=ji(t),o=t.checked,r=t[_s];if(ne(n)){const a=Xa(n,i),l=a!==-1;if(o&&!l)r(n.concat(i));else if(!o&&l){const c=[...n];c.splice(a,1),r(c)}}else if(qn(n)){const a=new Set(n);o?a.add(i):a.delete(i),r(a)}else r(Sh(t,o))})},mounted:pc,beforeUpdate(t,e,s){t[_s]=jn(s),pc(t,e,s)}};function pc(t,{value:e,oldValue:s},n){t._modelValue=e;let i;if(ne(e))i=Xa(e,n.props.value)>-1;else if(qn(e))i=e.has(n.props.value);else{if(e===s)return;i=Ji(e,Sh(t,!0))}t.checked!==i&&(t.checked=i)}const ft={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const i=qn(e);Rs(t,"change",()=>{const o=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>s?zo(ji(r)):ji(r));t[_s](t.multiple?i?new Set(o):o:o[0]),t._assigning=!0,ol(()=>{t._assigning=!1})}),t[_s]=jn(n)},mounted(t,{value:e}){mc(t,e)},beforeUpdate(t,e,s){t[_s]=jn(s)},updated(t,{value:e}){t._assigning||mc(t,e)}};function mc(t,e){const s=t.multiple,n=ne(e);if(!(s&&!n&&!qn(e))){for(let i=0,o=t.options.length;i<o;i++){const r=t.options[i],a=ji(r);if(s)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=e.some(c=>String(c)===String(a)):r.selected=Xa(e,a)>-1}else r.selected=e.has(a);else if(Ji(ji(r),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ji(t){return"_value"in t?t._value:t.value}function Sh(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Dg=["ctrl","shift","alt","meta"],Ig={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Dg.some(s=>t[`${s}Key`]&&!e.includes(s))},Je=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<e.length;r++){const a=Ig[e[r]];if(a&&a(i,e))return}return t(i,...o)})},Rg=Xe({patchProp:Eg},mg);let gc;function Lg(){return gc||(gc=Um(Rg))}const Fg=(...t)=>{const e=Lg().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=Ng(n);if(!i)return;const o=e._component;!ce(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,jg(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},e};function jg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ng(t){return We(t)?document.querySelector(t):t}const me=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},Ug={name:"CookieBanner",data(){return{consentGiven:!1}},mounted(){this.consentGiven=localStorage.getItem("cookieConsent")==="true"},methods:{acceptCookies(){this.consentGiven=!0,localStorage.setItem("cookieConsent","true")}}},$g={key:0,class:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 text-center z-50"};function Bg(t,e,s,n,i,o){return i.consentGiven?j("",!0):(x(),w("div",$g,[e[1]||(e[1]=u("p",{class:"mb-2"},[te(" Utilizamos cookies para melhorar sua experincia. Ao continuar, voc concorda com nossa "),u("a",{href:"#",class:"underline"},"poltica de privacidade"),te(". ")],-1)),u("button",{onClick:e[0]||(e[0]=(...r)=>o.acceptCookies&&o.acceptCookies(...r)),class:"btn"}," Aceitar ")]))}const Vg=me(Ug,[["render",Bg]]),zg={name:"App",components:{CookieBanner:Vg}};function Hg(t,e,s,n,i,o){const r=z("router-view"),a=z("CookieBanner");return x(),w(Y,null,[O(r),O(a)],64)}const Wg=me(zg,[["render",Hg]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Sn=typeof document<"u";function Ch(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qg(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Ch(t.default)}const we=Object.assign;function Vr(t,e){const s={};for(const n in e){const i=e[n];s[n]=Ht(i)?i.map(t):t(i)}return s}const _i=()=>{},Ht=Array.isArray,Mh=/#/g,Kg=/&/g,Gg=/\//g,Yg=/=/g,Jg=/\?/g,Ah=/\+/g,Xg=/%5B/g,Qg=/%5D/g,Ph=/%5E/g,Zg=/%60/g,Eh=/%7B/g,eb=/%7C/g,Th=/%7D/g,tb=/%20/g;function fl(t){return encodeURI(""+t).replace(eb,"|").replace(Xg,"[").replace(Qg,"]")}function sb(t){return fl(t).replace(Eh,"{").replace(Th,"}").replace(Ph,"^")}function _a(t){return fl(t).replace(Ah,"%2B").replace(tb,"+").replace(Mh,"%23").replace(Kg,"%26").replace(Zg,"`").replace(Eh,"{").replace(Th,"}").replace(Ph,"^")}function nb(t){return _a(t).replace(Yg,"%3D")}function ib(t){return fl(t).replace(Mh,"%23").replace(Jg,"%3F")}function ob(t){return t==null?"":ib(t).replace(Gg,"%2F")}function Ni(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const rb=/\/$/,ab=t=>t.replace(rb,"");function zr(t,e,s="/"){let n,i={},o="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),i=t(o)),a>-1&&(n=n||e.slice(0,a),r=e.slice(a,e.length)),n=ub(n??e,s),{fullPath:n+(o&&"?")+o+r,path:n,query:i,hash:Ni(r)}}function lb(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function bc(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function cb(t,e,s){const n=e.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&Nn(e.matched[n],s.matched[i])&&Oh(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Nn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Oh(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!db(t[s],e[s]))return!1;return!0}function db(t,e){return Ht(t)?yc(t,e):Ht(e)?yc(e,t):t===e}function yc(t,e){return Ht(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function ub(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=s.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(r).join("/")}const As={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ui;(function(t){t.pop="pop",t.push="push"})(Ui||(Ui={}));var vi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vi||(vi={}));function hb(t){if(!t)if(Sn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ab(t)}const fb=/^[^#]+#/;function pb(t,e){return t.replace(fb,"#")+e}function mb(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const xr=()=>({left:window.scrollX,top:window.scrollY});function gb(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;e=mb(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function xc(t,e){return(history.state?history.state.position-e:-1)+t}const va=new Map;function bb(t,e){va.set(t,e)}function yb(t){const e=va.get(t);return va.delete(t),e}let xb=()=>location.protocol+"//"+location.host;function Dh(t,e){const{pathname:s,search:n,hash:i}=e,o=t.indexOf("#");if(o>-1){let a=i.includes(t.slice(o))?t.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),bc(l,"")}return bc(s,t)+n+i}function _b(t,e,s,n){let i=[],o=[],r=null;const a=({state:f})=>{const p=Dh(t,location),m=s.value,g=e.value;let b=0;if(f){if(s.value=p,e.value=f,r&&r===m){r=null;return}b=g?f.position-g.position:0}else n(p);i.forEach(v=>{v(s.value,m,{delta:b,type:Ui.pop,direction:b?b>0?vi.forward:vi.back:vi.unknown})})};function l(){r=s.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return o.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(we({},f.state,{scroll:xr()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function _c(t,e,s,n=!1,i=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:i?xr():null}}function vb(t){const{history:e,location:s}=window,n={value:Dh(t,s)},i={value:e.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const h=t.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?t:t.slice(h))+l:xb()+t+l;try{e[d?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),s[d?"replace":"assign"](f)}}function r(l,c){const d=we({},e.state,_c(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,d,!0),n.value=l}function a(l,c){const d=we({},i.value,e.state,{forward:l,scroll:xr()});o(d.current,d,!0);const h=we({},_c(n.value,l,null),{position:d.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function wb(t){t=hb(t);const e=vb(t),s=_b(t,e.state,e.location,e.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=we({location:"",base:t,go:n,createHref:pb.bind(null,t)},e,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function kb(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),wb(t)}function Sb(t){return typeof t=="string"||t&&typeof t=="object"}function Ih(t){return typeof t=="string"||typeof t=="symbol"}const Rh=Symbol("");var vc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(vc||(vc={}));function Un(t,e){return we(new Error,{type:t,[Rh]:!0},e)}function rs(t,e){return t instanceof Error&&Rh in t&&(e==null||!!(t.type&e))}const wc="[^/]+?",Cb={sensitive:!1,strict:!1,start:!0,end:!0},Mb=/[.+*?^${}()[\]/\\]/g;function Ab(t,e){const s=we({},Cb,e),n=[];let i=s.start?"^":"";const o=[];for(const c of t){const d=c.length?[]:[90];s.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(Mb,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:g,optional:b,regexp:v}=f;o.push({name:m,repeatable:g,optional:b});const k=v||wc;if(k!==wc){p+=10;try{new RegExp(`(${k})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${k}): `+S.message)}}let C=g?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(C=b&&c.length<2?`(?:/${C})`:"/"+C),b&&(C+="?"),i+=C,p+=20,b&&(p+=-8),g&&(p+=-20),k===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function a(c){const d=c.match(r),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",m=o[f-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:b}=p,v=m in c?c[m]:"";if(Ht(v)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const k=Ht(v)?v.join("/"):v;if(!k)if(b)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);d+=k}}return d||"/"}return{re:r,score:n,keys:o,parse:a,stringify:l}}function Pb(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Lh(t,e){let s=0;const n=t.score,i=e.score;for(;s<n.length&&s<i.length;){const o=Pb(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(kc(n))return 1;if(kc(i))return-1}return i.length-n.length}function kc(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Eb={type:0,value:""},Tb=/[a-zA-Z0-9_]/;function Ob(t){if(!t)return[[]];if(t==="/")return[[Eb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=0,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,l,c="",d="";function h(){c&&(s===0?o.push({type:0,value:c}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&h(),r()):l===":"?(h(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:Tb.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=3:d+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),r(),i}function Db(t,e,s){const n=Ab(Ob(t.path),s),i=we(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Ib(t,e){const s=[],n=new Map;e=Ac({strict:!1,end:!0,sensitive:!1},e);function i(h){return n.get(h)}function o(h,f,p){const m=!p,g=Cc(h);g.aliasOf=p&&p.record;const b=Ac(e,h),v=[g];if("alias"in h){const S=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of S)v.push(Cc(we({},g,{components:p?p.record.components:g.components,path:M,aliasOf:p?p.record:g})))}let k,C;for(const S of v){const{path:M}=S;if(f&&M[0]!=="/"){const N=f.record.path,L=N[N.length-1]==="/"?"":"/";S.path=f.record.path+(M&&L+M)}if(k=Db(S,f,b),p?p.alias.push(k):(C=C||k,C!==k&&C.alias.push(k),m&&h.name&&!Mc(k)&&r(h.name)),Fh(k)&&l(k),g.children){const N=g.children;for(let L=0;L<N.length;L++)o(N[L],k,p&&p.children[L])}p=p||k}return C?()=>{r(C)}:_i}function r(h){if(Ih(h)){const f=n.get(h);f&&(n.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(r),f.alias.forEach(r))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(r),h.alias.forEach(r))}}function a(){return s}function l(h){const f=Fb(h,s);s.splice(f,0,h),h.record.name&&!Mc(h)&&n.set(h.record.name,h)}function c(h,f){let p,m={},g,b;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw Un(1,{location:h});b=p.record.name,m=we(Sc(f.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),h.params&&Sc(h.params,p.keys.map(C=>C.name))),g=p.stringify(m)}else if(h.path!=null)g=h.path,p=s.find(C=>C.re.test(g)),p&&(m=p.parse(g),b=p.record.name);else{if(p=f.name?n.get(f.name):s.find(C=>C.re.test(f.path)),!p)throw Un(1,{location:h,currentLocation:f});b=p.record.name,m=we({},f.params,h.params),g=p.stringify(m)}const v=[];let k=p;for(;k;)v.unshift(k.record),k=k.parent;return{name:b,path:g,params:m,matched:v,meta:Lb(v)}}t.forEach(h=>o(h));function d(){s.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function Sc(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function Cc(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Rb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Rb(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Mc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Lb(t){return t.reduce((e,s)=>we(e,s.meta),{})}function Ac(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function Fb(t,e){let s=0,n=e.length;for(;s!==n;){const o=s+n>>1;Lh(t,e[o])<0?n=o:s=o+1}const i=jb(t);return i&&(n=e.lastIndexOf(i,n-1)),n}function jb(t){let e=t;for(;e=e.parent;)if(Fh(e)&&Lh(t,e)===0)return e}function Fh({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Nb(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Ah," "),r=o.indexOf("="),a=Ni(r<0?o:o.slice(0,r)),l=r<0?null:Ni(o.slice(r+1));if(a in e){let c=e[a];Ht(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Pc(t){let e="";for(let s in t){const n=t[s];if(s=nb(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(Ht(n)?n.map(o=>o&&_a(o)):[n&&_a(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+s,o!=null&&(e+="="+o))})}return e}function Ub(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=Ht(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const $b=Symbol(""),Ec=Symbol(""),pl=Symbol(""),jh=Symbol(""),wa=Symbol("");function ei(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Ds(t,e,s,n,i,o=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Un(4,{from:s,to:e})):f instanceof Error?l(f):Sb(f)?l(Un(2,{from:e,to:f})):(r&&n.enterCallbacks[i]===r&&typeof f=="function"&&r.push(f),a())},d=o(()=>t.call(n&&n.instances[i],e,s,c));let h=Promise.resolve(d);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Hr(t,e,s,n,i=o=>o()){const o=[];for(const r of t)for(const a in r.components){let l=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(Ch(l)){const d=(l.__vccOpts||l)[e];d&&o.push(Ds(d,s,n,r,a,i))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const h=qg(d)?d.default:d;r.mods[a]=d,r.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&Ds(p,s,n,r,a,i)()}))}}return o}function Tc(t){const e=xs(pl),s=xs(jh),n=Nt(()=>{const l=En(t.to);return e.resolve(l)}),i=Nt(()=>{const{matched:l}=n.value,{length:c}=l,d=l[c-1],h=s.matched;if(!d||!h.length)return-1;const f=h.findIndex(Nn.bind(null,d));if(f>-1)return f;const p=Oc(l[c-2]);return c>1&&Oc(d)===p&&h[h.length-1].path!==p?h.findIndex(Nn.bind(null,l[c-2])):f}),o=Nt(()=>i.value>-1&&Wb(s.params,n.value.params)),r=Nt(()=>i.value>-1&&i.value===s.matched.length-1&&Oh(s.params,n.value.params));function a(l={}){if(Hb(l)){const c=e[En(t.replace)?"replace":"push"](En(t.to)).catch(_i);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Nt(()=>n.value.href),isActive:o,isExactActive:r,navigate:a}}function Bb(t){return t.length===1?t[0]:t}const Vb=Ku({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tc,setup(t,{slots:e}){const s=fr(Tc(t)),{options:n}=xs(pl),i=Nt(()=>({[Dc(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Dc(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&Bb(e.default(s));return t.custom?o:vh("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),zb=Vb;function Hb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Wb(t,e){for(const s in e){const n=e[s],i=t[s];if(typeof n=="string"){if(n!==i)return!1}else if(!Ht(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function Oc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dc=(t,e,s)=>t??e??s,qb=Ku({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=xs(wa),i=Nt(()=>t.route||n.value),o=xs(Ec,0),r=Nt(()=>{let c=En(o);const{matched:d}=i.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=Nt(()=>i.value.matched[r.value]);Po(Ec,Nt(()=>r.value+1)),Po($b,a),Po(wa,i);const l=Qp();return Eo(()=>[l.value,a.value,t.name],([c,d,h],[f,p,m])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Nn(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,h=a.value,f=h&&h.components[d];if(!f)return Ic(s.default,{Component:f,route:c});const p=h.props[d],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,b=vh(f,we({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return Ic(s.default,{Component:b,route:c})||b}}});function Ic(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Kb=qb;function Gb(t){const e=Ib(t.routes,t),s=t.parseQuery||Nb,n=t.stringifyQuery||Pc,i=t.history,o=ei(),r=ei(),a=ei(),l=Zp(As);let c=As;Sn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Vr.bind(null,D=>""+D),h=Vr.bind(null,ob),f=Vr.bind(null,Ni);function p(D,J){let K,Q;return Ih(D)?(K=e.getRecordMatcher(D),Q=J):Q=D,e.addRoute(Q,K)}function m(D){const J=e.getRecordMatcher(D);J&&e.removeRoute(J)}function g(){return e.getRoutes().map(D=>D.record)}function b(D){return!!e.getRecordMatcher(D)}function v(D,J){if(J=we({},J||l.value),typeof D=="string"){const _=zr(s,D,J.path),A=e.resolve({path:_.path},J),F=i.createHref(_.fullPath);return we(_,A,{params:f(A.params),hash:Ni(_.hash),redirectedFrom:void 0,href:F})}let K;if(D.path!=null)K=we({},D,{path:zr(s,D.path,J.path).path});else{const _=we({},D.params);for(const A in _)_[A]==null&&delete _[A];K=we({},D,{params:h(_)}),J.params=h(J.params)}const Q=e.resolve(K,J),ve=D.hash||"";Q.params=d(f(Q.params));const Ne=lb(n,we({},D,{hash:sb(ve),path:Q.path})),y=i.createHref(Ne);return we({fullPath:Ne,hash:ve,query:n===Pc?Ub(D.query):D.query||{}},Q,{redirectedFrom:void 0,href:y})}function k(D){return typeof D=="string"?zr(s,D,l.value.path):we({},D)}function C(D,J){if(c!==D)return Un(8,{from:J,to:D})}function S(D){return L(D)}function M(D){return S(we(k(D),{replace:!0}))}function N(D){const J=D.matched[D.matched.length-1];if(J&&J.redirect){const{redirect:K}=J;let Q=typeof K=="function"?K(D):K;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=k(Q):{path:Q},Q.params={}),we({query:D.query,hash:D.hash,params:Q.path!=null?{}:D.params},Q)}}function L(D,J){const K=c=v(D),Q=l.value,ve=D.state,Ne=D.force,y=D.replace===!0,_=N(K);if(_)return L(we(k(_),{state:typeof _=="object"?we({},ve,_.state):ve,force:Ne,replace:y}),J||K);const A=K;A.redirectedFrom=J;let F;return!Ne&&cb(n,Q,K)&&(F=Un(16,{to:A,from:Q}),dt(Q,Q,!0,!1)),(F?Promise.resolve(F):ie(A,Q)).catch(T=>rs(T)?rs(T,2)?T:ct(T):ue(T,A,Q)).then(T=>{if(T){if(rs(T,2))return L(we({replace:y},k(T.to),{state:typeof T.to=="object"?we({},ve,T.to.state):ve,force:Ne}),J||A)}else T=de(A,Q,!0,y,ve);return re(A,Q,T),T})}function B(D,J){const K=C(D,J);return K?Promise.reject(K):Promise.resolve()}function X(D){const J=pt.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(D):D()}function ie(D,J){let K;const[Q,ve,Ne]=Yb(D,J);K=Hr(Q.reverse(),"beforeRouteLeave",D,J);for(const _ of Q)_.leaveGuards.forEach(A=>{K.push(Ds(A,D,J))});const y=B.bind(null,D,J);return K.push(y),He(K).then(()=>{K=[];for(const _ of o.list())K.push(Ds(_,D,J));return K.push(y),He(K)}).then(()=>{K=Hr(ve,"beforeRouteUpdate",D,J);for(const _ of ve)_.updateGuards.forEach(A=>{K.push(Ds(A,D,J))});return K.push(y),He(K)}).then(()=>{K=[];for(const _ of Ne)if(_.beforeEnter)if(Ht(_.beforeEnter))for(const A of _.beforeEnter)K.push(Ds(A,D,J));else K.push(Ds(_.beforeEnter,D,J));return K.push(y),He(K)}).then(()=>(D.matched.forEach(_=>_.enterCallbacks={}),K=Hr(Ne,"beforeRouteEnter",D,J,X),K.push(y),He(K))).then(()=>{K=[];for(const _ of r.list())K.push(Ds(_,D,J));return K.push(y),He(K)}).catch(_=>rs(_,8)?_:Promise.reject(_))}function re(D,J,K){a.list().forEach(Q=>X(()=>Q(D,J,K)))}function de(D,J,K,Q,ve){const Ne=C(D,J);if(Ne)return Ne;const y=J===As,_=Sn?history.state:{};K&&(Q||y?i.replace(D.fullPath,we({scroll:y&&_&&_.scroll},ve)):i.push(D.fullPath,ve)),l.value=D,dt(D,J,K,y),ct()}let Ae;function qe(){Ae||(Ae=i.listen((D,J,K)=>{if(!Gt.listening)return;const Q=v(D),ve=N(Q);if(ve){L(we(ve,{replace:!0,force:!0}),Q).catch(_i);return}c=Q;const Ne=l.value;Sn&&bb(xc(Ne.fullPath,K.delta),xr()),ie(Q,Ne).catch(y=>rs(y,12)?y:rs(y,2)?(L(we(k(y.to),{force:!0}),Q).then(_=>{rs(_,20)&&!K.delta&&K.type===Ui.pop&&i.go(-1,!1)}).catch(_i),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ue(y,Q,Ne))).then(y=>{y=y||de(Q,Ne,!1),y&&(K.delta&&!rs(y,8)?i.go(-K.delta,!1):K.type===Ui.pop&&rs(y,20)&&i.go(-1,!1)),re(Q,Ne,y)}).catch(_i)}))}let xe=ei(),le=ei(),oe;function ue(D,J,K){ct(D);const Q=le.list();return Q.length?Q.forEach(ve=>ve(D,J,K)):console.error(D),Promise.reject(D)}function Ee(){return oe&&l.value!==As?Promise.resolve():new Promise((D,J)=>{xe.add([D,J])})}function ct(D){return oe||(oe=!D,qe(),xe.list().forEach(([J,K])=>D?K(D):J()),xe.reset()),D}function dt(D,J,K,Q){const{scrollBehavior:ve}=t;if(!Sn||!ve)return Promise.resolve();const Ne=!K&&yb(xc(D.fullPath,0))||(Q||!K)&&history.state&&history.state.scroll||null;return ol().then(()=>ve(D,J,Ne)).then(y=>y&&gb(y)).catch(y=>ue(y,D,J))}const Ve=D=>i.go(D);let Tt;const pt=new Set,Gt={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:g,resolve:v,options:t,push:S,replace:M,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:le.add,isReady:Ee,install(D){const J=this;D.component("RouterLink",zb),D.component("RouterView",Kb),D.config.globalProperties.$router=J,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>En(l)}),Sn&&!Tt&&l.value===As&&(Tt=!0,S(i.location).catch(ve=>{}));const K={};for(const ve in As)Object.defineProperty(K,ve,{get:()=>l.value[ve],enumerable:!0});D.provide(pl,J),D.provide(jh,Nu(K)),D.provide(wa,l);const Q=D.unmount;pt.add(D),D.unmount=function(){pt.delete(D),pt.size<1&&(c=As,Ae&&Ae(),Ae=null,l.value=As,Tt=!1,oe=!1),Q()}}};function He(D){return D.reduce((J,K)=>J.then(()=>X(K)),Promise.resolve())}return Gt}function Yb(t,e){const s=[],n=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let r=0;r<o;r++){const a=e.matched[r];a&&(t.matched.find(c=>Nn(c,a))?n.push(a):s.push(a));const l=t.matched[r];l&&(e.matched.find(c=>Nn(c,l))||i.push(l))}return[s,n,i]}const Jb={name:"Navbar",data(){return{open:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route(){this.open=!1}},methods:{toggleMenu(){this.open=!this.open},handleScroll(){this.open&&(this.open=!1)}}},Xb={class:"flex items-center justify-between px-8 py-4 bg-white shadow relative"},Qb={class:"hidden md:flex items-center space-x-4"},Zb={key:0,class:"absolute top-full left-0 w-full bg-white shadow-md md:hidden flex flex-col items-start space-y-4 py-4 px-8"};function e0(t,e,s,n,i,o){const r=z("router-link");return x(),w("nav",Xb,[O(r,{to:"/",class:"text-xl font-bold text-blue-600"},{default:ee(()=>e[5]||(e[5]=[te("Agenda Zen")])),_:1,__:[5]}),u("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"md:hidden focus:outline-none"},e[6]||(e[6]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),u("div",Qb,[O(r,{to:"/buscar",class:"text-blue-600 hover:underline"},{default:ee(()=>e[7]||(e[7]=[te("Buscar")])),_:1,__:[7]}),O(r,{to:"/planos",class:"text-blue-600 hover:underline"},{default:ee(()=>e[8]||(e[8]=[te("Planos")])),_:1,__:[8]}),O(r,{to:"/contato",class:"text-blue-600 hover:underline"},{default:ee(()=>e[9]||(e[9]=[te("Contato")])),_:1,__:[9]}),O(r,{to:"/login",class:"btn"},{default:ee(()=>e[10]||(e[10]=[te("Login")])),_:1,__:[10]})]),i.open?(x(),w("div",Zb,[O(r,{onClick:e[1]||(e[1]=a=>i.open=!1),to:"/buscar",class:"text-blue-600 hover:underline"},{default:ee(()=>e[11]||(e[11]=[te("Buscar")])),_:1,__:[11]}),O(r,{onClick:e[2]||(e[2]=a=>i.open=!1),to:"/planos",class:"text-blue-600 hover:underline"},{default:ee(()=>e[12]||(e[12]=[te("Planos")])),_:1,__:[12]}),O(r,{onClick:e[3]||(e[3]=a=>i.open=!1),to:"/contato",class:"text-blue-600 hover:underline"},{default:ee(()=>e[13]||(e[13]=[te("Contato")])),_:1,__:[13]}),O(r,{onClick:e[4]||(e[4]=a=>i.open=!1),to:"/login",class:"btn"},{default:ee(()=>e[14]||(e[14]=[te("Login")])),_:1,__:[14]})])):j("",!0)])}const qt=me(Jb,[["render",e0]]),t0="/hero-illustration.png",s0={name:"HeroBanner"},n0={class:"text-center py-20"},i0={class:"max-w-4xl mx-auto px-4"},o0={class:"grid grid-cols-1 md:grid-cols-2 items-center gap-8"},r0={class:"space-x-4"};function a0(t,e,s,n,i,o){const r=z("router-link");return x(),w("section",n0,[u("div",i0,[u("div",o0,[u("div",null,[e[2]||(e[2]=u("h1",{class:"text-4xl font-bold text-blue-800 mb-4"},"Sua agenda digital simples e profissional",-1)),e[3]||(e[3]=u("p",{class:"text-gray-600 text-lg mb-6"},"Perfeita para psiclogos, terapeutas, dentistas, cabeleireiros e mais",-1)),u("div",r0,[O(r,{to:"/login",class:"bg-white border border-blue-600 text-blue-600 px-6 py-2 rounded hover:bg-blue-100"},{default:ee(()=>e[0]||(e[0]=[te("Entrar")])),_:1,__:[0]}),O(r,{to:"/cadastro",class:"btn"},{default:ee(()=>e[1]||(e[1]=[te("Criar conta")])),_:1,__:[1]})])]),e[4]||(e[4]=u("div",null,[u("img",{src:t0,alt:"Ilustrao profissional usando a plataforma",class:"w-full h-auto mx-auto"})],-1))])])])}const l0=me(s0,[["render",a0]]),ls="/icons/check.svg",c0={name:"FeaturesSection"},d0={class:"py-16 px-8"};function u0(t,e,s,n,i,o){return x(),w("section",d0,e[0]||(e[0]=[dn('<h2 class="text-2xl font-bold text-center mb-8">Funcionalidades</h2><ul class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 text-lg"><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Cadastro e autenticao de usurios</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Gesto de clientes, servios e salas</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Controle de agendamentos em lista, calendrio ou semana</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Dashboard com estatsticas e grficos</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Configurao de perfil pblico com link personalizado</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Gerao de comprovantes de atendimento</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Lembretes automticos para seus clientes</span></li><li class="flex items-start"><img src="'+ls+'" alt="" class="w-6 h-6 mt-1 mr-2"><span>Pagamentos via Pix de forma prtica e segura</span></li></ul>',2)]))}const h0=me(c0,[["render",u0]]),f0="/about-illustration.png",p0={name:"AboutSection"},m0={class:"px-8 py-16"};function g0(t,e,s,n,i,o){return x(),w("section",m0,e[0]||(e[0]=[u("div",{class:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center"},[u("div",null,[u("img",{src:f0,alt:"Ilustrao sobre agendamento",class:"w-full h-auto mx-auto"})]),u("div",null,[u("h2",{class:"text-2xl font-bold mb-4"},"O que  o Agenda Zen?"),u("p",{class:"text-gray-700 text-lg"}," O Agenda Zen  uma plataforma pensada para profissionais que trabalham com agendamentos. Criamos uma soluo simples, bonita e eficiente para divulgar seus servios, aceitar agendamentos online, enviar lembretes automticos e receber pagamentos por Pix  tudo sem complicao. ")])],-1)]))}const b0=me(p0,[["render",g0]]),y0={name:"Footer"},x0={class:"bg-gray-100 text-center text-sm text-gray-500 py-6 space-y-4"},_0={class:"flex flex-wrap justify-center space-x-2"};function v0(t,e,s,n,i,o){const r=z("router-link");return x(),w("footer",x0,[e[9]||(e[9]=u("div",{class:"space-x-4 text-blue-600"},[u("a",{href:"https://www.instagram.com/agendazen_",target:"_blank",class:"hover:underline"},"Instagram"),u("a",{href:"https://www.facebook.com/agenda.zen",target:"_blank",class:"hover:underline"},"Facebook"),u("a",{href:"https://x.com/agenda_zen",target:"_blank",class:"hover:underline"},"X")],-1)),u("div",_0,[O(r,{to:"/termos-de-uso",class:"hover:underline"},{default:ee(()=>e[0]||(e[0]=[te("Termos de uso")])),_:1,__:[0]}),e[5]||(e[5]=u("span",null,"|",-1)),O(r,{to:"/planos",class:"hover:underline"},{default:ee(()=>e[1]||(e[1]=[te("Planos")])),_:1,__:[1]}),e[6]||(e[6]=u("span",null,"|",-1)),O(r,{to:"/contato",class:"hover:underline"},{default:ee(()=>e[2]||(e[2]=[te("Contato")])),_:1,__:[2]}),e[7]||(e[7]=u("span",null,"|",-1)),O(r,{to:"/faq",class:"hover:underline"},{default:ee(()=>e[3]||(e[3]=[te("FAQ")])),_:1,__:[3]}),e[8]||(e[8]=u("span",null,"|",-1)),O(r,{to:"/politica-de-privacidade",class:"hover:underline"},{default:ee(()=>e[4]||(e[4]=[te("Poltica de privacidade")])),_:1,__:[4]})]),e[10]||(e[10]=u("p",null," 2025 Agenda Zen  Todos os direitos reservados",-1))])}const Kt=me(y0,[["render",v0]]),w0={name:"Home",components:{Navbar:qt,HeroBanner:l0,FeaturesSection:h0,AboutSection:b0,Footer:Kt}};function k0(t,e,s,n,i,o){const r=z("Navbar"),a=z("HeroBanner"),l=z("FeaturesSection"),c=z("AboutSection"),d=z("Footer");return x(),w(Y,null,[O(r),O(a),O(l),O(c),O(d)],64)}const S0=me(w0,[["render",k0]]),C0="modulepreload",M0=function(t){return"/"+t},Rc={},$n=function(e,s,n){if(!s||s.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=M0(o),o in Rc)return;Rc[o]=!0;const r=o.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===o&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":C0,r||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),r)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},A0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class ml extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class P0 extends ml{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class E0 extends ml{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class T0 extends ml{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ka;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ka||(ka={}));var O0=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class D0{constructor(e,{headers:s={},customFetch:n,region:i=ka.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=A0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return O0(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:r}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=r):typeof r=="string"?(a["Content-Type"]="text/plain",c=r):typeof FormData<"u"&&r instanceof FormData?c=r:(a["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new P0(m)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new E0(d);if(!d.ok)throw new T0(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var yt={},gl={},_r={},Zi={},vr={},wr={},R0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bn=R0();const L0=Bn.fetch,Nh=Bn.fetch.bind(Bn),Uh=Bn.Headers,F0=Bn.Request,j0=Bn.Response,Kn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uh,Request:F0,Response:j0,default:Nh,fetch:L0},Symbol.toStringTag,{value:"Module"})),N0=I0(Kn);var kr={};Object.defineProperty(kr,"__esModule",{value:!0});let U0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};kr.default=U0;var $h=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});const $0=$h(N0),B0=$h(kr);let V0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=$0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var r,a,l;let c=null,d=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const g=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),b=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(d=[],c=null,f=200,p="OK")}catch{o.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new B0.default(c)}return{error:c,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var r,a,l;return{error:{message:`${(r=o==null?void 0:o.name)!==null&&r!==void 0?r:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};wr.default=V0;var z0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vr,"__esModule",{value:!0});const H0=z0(wr);let W0=class extends H0.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const r=o?`${o}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(r,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:r="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${l};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};vr.default=W0;var q0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zi,"__esModule",{value:!0});const K0=q0(vr);let G0=class extends K0.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const r=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${r}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Zi.default=G0;var Y0=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r,"__esModule",{value:!0});const ti=Y0(Zi);let J0=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=s,this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let o=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",r),n&&(this.headers.Prefer=`count=${n}`),new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const r=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(r.length>0){const a=[...new Set(r)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ti.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){const r="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new ti.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new ti.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ti.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_r.default=J0;var Sr={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.version=void 0;Cr.version="0.0.0-automated";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.DEFAULT_HEADERS=void 0;const X0=Cr;Sr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${X0.version}`};var Bh=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gl,"__esModule",{value:!0});const Q0=Bh(_r),Z0=Bh(Zi),ey=Sr;let ty=class Vh{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},ey.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new Q0.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Vh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:o}={}){let r;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(r=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(r="POST",l=s);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new Z0.default({method:r,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};gl.default=ty;var Gn=Lt&&Lt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const zh=Gn(gl);yt.PostgrestClient=zh.default;const Hh=Gn(_r);yt.PostgrestQueryBuilder=Hh.default;const Wh=Gn(Zi);yt.PostgrestFilterBuilder=Wh.default;const qh=Gn(vr);yt.PostgrestTransformBuilder=qh.default;const Kh=Gn(wr);yt.PostgrestBuilder=Kh.default;const Gh=Gn(kr);yt.PostgrestError=Gh.default;var sy=yt.default={PostgrestClient:zh.default,PostgrestQueryBuilder:Hh.default,PostgrestFilterBuilder:Wh.default,PostgrestTransformBuilder:qh.default,PostgrestBuilder:Kh.default,PostgrestError:Gh.default};const{PostgrestClient:ny,PostgrestQueryBuilder:$4,PostgrestFilterBuilder:B4,PostgrestTransformBuilder:V4,PostgrestBuilder:z4,PostgrestError:H4}=sy,iy="2.11.2",oy={"X-Client-Info":`realtime-js/${iy}`},ry="1.0.0",Yh=1e4,ay=1e3;var Rn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rn||(Rn={}));var St;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(St||(St={}));var jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jt||(jt={}));var Sa;(function(t){t.websocket="websocket"})(Sa||(Sa={}));var on;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(on||(on={}));class ly{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),o=s.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(e.slice(r,r+i));r=r+i;const l=n.decode(e.slice(r,r+o));r=r+o;const c=JSON.parse(n.decode(e.slice(r,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Jh{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const Lc=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,r)=>(o[r]=cy(r,t,e,i),o),{})},cy=(t,e,s,n)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,r=s[t];return o&&!n.includes(o)?Xh(o,r):Ca(r)},Xh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return fy(e,s)}switch(t){case Oe.bool:return dy(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return uy(e);case Oe.json:case Oe.jsonb:return hy(e);case Oe.timestamp:return py(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Ca(e);default:return Ca(e)}},Ca=t=>t,dy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},uy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},fy=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let o;const r=t.slice(1,s);try{o=JSON.parse("["+r+"]")}catch{o=r?r.split(","):[]}return o.map(a=>Xh(e,a))}return t},py=t=>typeof t=="string"?t.replace(" ","T"):t,Qh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wr{constructor(e,s,n={},i=Yh){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fc||(Fc={}));class wi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wi.syncState(this.state,i,o,r),this.pendingDiffs.forEach(l=>{this.state=wi.syncDiff(this.state,l,o,r)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:r,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wi.syncDiff(this.state,i,o,r),a())}),this.onJoin((i,o,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:r})}),this.onLeave((i,o,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const o=this.cloneDeep(e),r=this.transformState(s),a={},l={};return this.map(o,(c,d)=>{r[c]||(l[c]=d)}),this.map(r,(c,d)=>{const h=o[c];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},n,i)}static syncDiff(e,s,n,i){const{joins:o,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(r,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jc||(jc={}));var Nc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Nc||(Nc={}));var hs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class bl{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Wr(this,jt.join,this.params,this.timeout),this.rejoinTimer=new Jh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new wi(this),this.broadcastEndpointURL=Qh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:r,private:a}}=this.params;this._onError(d=>e==null?void 0:e(hs.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(hs.CLOSED));const l={},c={broadcast:o,presence:r,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(hs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let g=0;g<p;g++){const b=f[g],{filter:{event:v,schema:k,table:C,filter:S}}=b,M=d&&d[g];if(M&&M.event===v&&M.schema===k&&M.table===C&&M.filter===S)m.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),e==null||e(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(hs.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:r}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var r,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(r=this.params)===null||r===void 0?void 0:r.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new Wr(this,jt.leave,{},e);i.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,s,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),r}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Wr(this,e,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,o;const r=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=jt;if(n&&[a,l,c,d].indexOf(r)>=0&&n!==this._joinRef())return;let f=this._onMessage(r,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===r}).map(p=>p.callback(f,n)):(o=this.bindings[r])===null||o===void 0||o.filter(p=>{var m,g,b,v,k,C;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in p){const S=p.id,M=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(k=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return S==="*"||S===((C=s==null?void 0:s.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===r}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:b,commit_timestamp:v,type:k,errors:C}=m;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:v,eventType:k,new:{},old:{},errors:C}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&bl.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jt.close,{},e)}_onError(e){this._on(jt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Lc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Lc(e.columns,e.old_record)),s}}const my=()=>{},gy=typeof WebSocket<"u",by=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yy{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=oy,this.params={},this.timeout=Yh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=my,this.conn=null,this.sendBuffer=[],this.serializer=new ly,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let r;return o?r=o:typeof fetch>"u"?r=(...a)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:l})=>l(...a)):r=fetch,(...a)=>r(...a)},this.endPoint=`${e}/${Sa.websocket}`,this.httpEndpoint=Qh(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,r)=>r(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(gy){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new xy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$n(()=>import("./browser-7d6f2d52.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ry}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rn.connecting:return on.Connecting;case Rn.open:return on.Open;case Rn.closing:return on.Closing;default:return on.Closed}}isConnected(){return this.connectionState()===on.Open}channel(e,s={config:{}}){const n=new bl(`realtime:${e}`,s,this);return this.channels.push(n),n}push(e){const{topic:s,event:n,payload:i,ref:o}=e,r=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(i=>{s&&i.updateJoinPayload({access_token:s}),i.joinedOnce&&i._isJoined()&&i._push(jt.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ay,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:i,payload:o,ref:r}=s;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${i} ${r&&"("+r+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,o,r)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(jt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([by],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class xy{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Rn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class yl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class _y extends yl{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ma extends yl{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var vy=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Zh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},wy=()=>vy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $n(()=>Promise.resolve().then(()=>Kn),void 0)).Response:Response}),Aa=t=>{if(Array.isArray(t))return t.map(s=>Aa(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Aa(n)}),e};var pn=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const qr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ky=(t,e,s)=>pn(void 0,void 0,void 0,function*(){const n=yield wy();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new _y(qr(i),t.status||500))}).catch(i=>{e(new Ma(qr(i),i))}):e(new Ma(qr(t),t))}),Sy=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function eo(t,e,s,n,i,o){return pn(this,void 0,void 0,function*(){return new Promise((r,a)=>{t(s,Sy(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>r(l)).catch(l=>ky(l,a,n))})})}function Qo(t,e,s,n){return pn(this,void 0,void 0,function*(){return eo(t,"GET",e,s,n)})}function Is(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return eo(t,"POST",e,n,i,s)})}function Cy(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return eo(t,"PUT",e,n,i,s)})}function My(t,e,s,n){return pn(this,void 0,void 0,function*(){return eo(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function ef(t,e,s,n,i){return pn(this,void 0,void 0,function*(){return eo(t,"DELETE",e,n,i,s)})}var mt=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Ay={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Py{constructor(e,s={},n,i){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Zh(i)}uploadOrUpdate(e,s,n,i){return mt(this,void 0,void 0,function*(){try{let o;const r=Object.assign(Object.assign({},Uc),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const l=r.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",r.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(s),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:o,headers:a},r!=null&&r.duplex?{duplex:r.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ge(o))return{data:null,error:o};throw o}})}upload(e,s,n){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return mt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),r=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Uc.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const o=yield Is(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+o.url),a=r.searchParams.get("token");if(!a)throw new yl("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:a},error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}update(e,s,n){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return mt(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}copy(e,s,n){return mt(this,void 0,void 0,function*(){try{return{data:{path:(yield Is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return mt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Is(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${r}`)},{data:o,error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return mt(this,void 0,void 0,function*(){try{const i=yield Is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${o}`):null})),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}download(e,s){return mt(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),r=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Qo(this.fetch,`${this.url}/${i}/${a}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}info(e){return mt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Qo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Aa(n),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}exists(e){return mt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield My(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ge(n)&&n instanceof Ma){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return mt(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ge(s))return{data:null,error:s};throw s}})}list(e,s,n){return mt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ay),s),{prefix:e||""});return{data:yield Is(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Ey="2.7.1",Ty={"X-Client-Info":`storage-js/${Ey}`};var bn=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Oy{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ty),s),this.fetch=Zh(n)}listBuckets(){return bn(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}getBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ge(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return bn(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return bn(this,void 0,void 0,function*(){try{return{data:yield Cy(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}emptyBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ge(s))return{data:null,error:s};throw s}})}deleteBucket(e){return bn(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ge(s))return{data:null,error:s};throw s}})}}class Dy extends Oy{constructor(e,s={},n){super(e,s,n)}from(e){return new Py(this.url,this.headers,e,this.fetch)}}const Iy="2.49.8";let li="";typeof Deno<"u"?li="deno":typeof document<"u"?li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?li="react-native":li="node";const Ry={"X-Client-Info":`supabase-js-${li}/${Iy}`},Ly={headers:Ry},Fy={schema:"public"},jy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ny={};var Uy=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const $y=t=>{let e;return t?e=t:typeof fetch>"u"?e=Nh:e=fetch,(...s)=>e(...s)},By=()=>typeof Headers>"u"?Uh:Headers,Vy=(t,e,s)=>{const n=$y(s),i=By();return(o,r)=>Uy(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},r),{headers:c}))})};var zy=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function Hy(t){return t.endsWith("/")?t:t+"/"}function Wy(t,e){var s,n;const{db:i,auth:o,realtime:r,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),r),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>zy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const tf="2.69.1",Cn=30*1e3,Pa=3,Kr=Pa*Cn,qy="http://localhost:9999",Ky="supabase.auth.token",Gy={"X-Client-Info":`gotrue-js/${tf}`},Ea="X-Supabase-Api-Version",sf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jy=6e5;class xl extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function pe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Xy extends xl{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Qy(t){return pe(t)&&t.name==="AuthApiError"}class nf extends xl{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ws extends xl{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class Ps extends Ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zy(t){return pe(t)&&t.name==="AuthSessionMissingError"}class Gr extends Ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ao extends Ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lo extends Ws{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ex(t){return pe(t)&&t.name==="AuthImplicitGrantRedirectError"}class $c extends Ws{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ta extends Ws{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Yr(t){return pe(t)&&t.name==="AuthRetryableFetchError"}class Bc extends Ws{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class ki extends Ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zc=` 	
\r=`.split(""),tx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<zc.length;e+=1)t[zc[e].charCodeAt(0)]=-2;for(let e=0;e<Vc.length;e+=1)t[Vc[e].charCodeAt(0)]=e;return t})();function of(t,e,s){const n=tx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hc(t){const e=[],s=r=>{e.push(String.fromCodePoint(r))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=r=>{ix(r,n,s)};for(let r=0;r<t.length;r+=1)of(t.charCodeAt(r),i,o);return e.join("")}function sx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nx(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}sx(n,e)}}function ix(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ox(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)of(t.charCodeAt(i),s,n);return new Uint8Array(e)}function rx(t){const e=[];return nx(t,s=>e.push(s)),new Uint8Array(e)}function ax(t){return Math.round(Date.now()/1e3)+t}function lx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",Ys={tested:!1,writable:!1},Si=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ys.tested)return Ys.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ys.tested=!0,Ys.writable=!0}catch{Ys.tested=!0,Ys.writable=!1}return Ys.writable};function cx(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const rf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$n(()=>Promise.resolve().then(()=>Kn),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},dx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",af=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},co=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},uo=async(t,e)=>{await t.removeItem(e)};class Mr{constructor(){this.promise=new Mr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Mr.promiseConstructor=Promise;function Jr(t){const e=t.split(".");if(e.length!==3)throw new ki("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Yy.test(e[n]))throw new ki("JWT not in base64url format");return{header:JSON.parse(Hc(e[0])),payload:JSON.parse(Hc(e[1])),signature:ox(e[2]),raw:{header:e[0],payload:e[1]}}}async function ux(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hx(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const r=await t(o);if(!e(o,null,r)){n(r);return}}catch(r){if(!e(o,r)){i(r);return}}})()})}function fx(t){return("0"+t.toString(16)).substr(-2)}function px(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,fx).join("")}async function mx(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function gx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await mx(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(t,e,s=!1){const n=px();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await af(t,`${e}-code-verifier`,i);const o=await gx(n);return[o,n===o?"plain":"s256"]}const bx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yx(t){const e=t.headers.get(Ea);if(!e||!e.match(bx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _x(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var vx=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const tn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wx=[502,503,504];async function Wc(t){var e;if(!dx(t))throw new Ta(tn(t),0);if(wx.includes(t.status))throw new Ta(tn(t),t.status);let s;try{s=await t.json()}catch(o){throw new nf(tn(o),o)}let n;const i=yx(t);if(i&&i.getTime()>=sf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Bc(tn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,r)=>o&&typeof r=="string",!0))throw new Bc(tn(s),t.status,s.weak_password.reasons);throw new Xy(tn(s),t.status||500,n)}const kx=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function be(t,e,s,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Ea]||(o[Ea]=sf["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const r=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(r.redirect_to=n.redirectTo);const a=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",l=await Sx(t,e,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Sx(t,e,s,n,i,o){const r=kx(e,n,i,o);let a;try{a=await t(s,Object.assign({},r))}catch(l){throw console.error(l),new Ta(tn(l),0)}if(a.ok||await Wc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Wc(l)}}function Es(t){var e;let s=null;Px(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ax(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function qc(t){const e=Es(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ls(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Cx(t){return{data:t,error:null}}function Mx(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o}=t,r=vx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},r);return{data:{properties:a,user:l},error:null}}function Ax(t){return t}function Px(t){return t.access_token&&t.refresh_token&&t.expires_in}var Ex=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class Tx{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=rf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Ex(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Mx,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(pe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ls})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,o,r,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ax});if(d.error)throw d.error;const h=await d.json(),f=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(pe(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ls})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:s,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}}const Ox={getItem:t=>Si()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Si()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Si()&&globalThis.localStorage.removeItem(t)}};function Kc(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Dx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xn={debug:!!(globalThis&&Si()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ix extends lf{}async function Rx(t,e,s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ix(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Dx();const Lx={url:qy,storageKey:Ky,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gc(t,e,s){return await s()}class $i{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$i.nextInstanceID,$i.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Lx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Tx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rf(i.fetch),this.lock=i.lock||Gc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Xt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Rx:this.lock=Gc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Si()?this.storage=Ox:(this.memoryStorage={},this.storage=Kc(this.memoryStorage)):(this.memoryStorage={},this.storage=Kc(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=cx(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ex(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return pe(s)?{error:s}:{error:new nf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Es}),{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(pe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,n,i;try{let o;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await yn(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Es})}else if("phone"in e){const{phone:d,password:h,options:f}=e;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Es})}else throw new ao("You must provide either an email or phone number and a password");const{data:r,error:a}=o;if(a||!r)return{data:{user:null,session:null},error:a};const l=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(pe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:r,options:a}=e;s=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qc})}else if("phone"in e){const{phone:o,password:r,options:a}=e;s=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qc})}else throw new ao("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Gr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await co(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:o,error:r}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Es});if(await uo(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Gr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:r})}catch(o){if(pe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:o,nonce:r}=e,a=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Es}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,o,r;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await yn(this.storage,this.storageKey));const{error:h}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(r=l==null?void 0:l.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ao("You must provide either an email or phone number.")}catch(a){if(pe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:r,error:a}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Es});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,c=r.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(pe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let o=null,r=null;return this.flowType==="pkce"&&([o,r]=await yn(this.storage,this.storageKey)),await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:r}),headers:this.headers,xform:Cx})}catch(o){if(pe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ps;const{error:i}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(pe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:r}=await be(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:r,error:a}=await be(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:a}}throw new ao("You must provide either an email or phone number and a type")}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await co(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Kr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!r&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ls}):await this._useSession(async s=>{var n,i,o;const{data:r,error:a}=s;if(a)throw a;return!(!((n=r.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ls})})}catch(s){if(pe(s))return Zy(s)&&(await this._removeSession(),await uo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ps;const r=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await yn(this.storage,this.storageKey));const{data:c,error:d}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:r.access_token,xform:Ls});if(d)throw d;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ps;const s=Date.now()/1e3;let n=s,i=!0,o=null;const{payload:r}=Jr(e.access_token);if(r.exp&&(n=r.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(pe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:r,error:a}=s;if(a)throw a;e=(n=r.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ps;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Xt())throw new lo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new $c("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $c("No code detected.");const{data:k,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:r,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!r||!c)throw new lo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:b}=await this._getUser(o);if(b)throw b;const v={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:f,refresh_token:r,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(pe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await co(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{error:o};const r=(n=i.session)===null||n===void 0?void 0:n.access_token;if(r){const{error:a}=await this.admin.signOut(r,e);if(a&&!(Qy(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await uo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=lx(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:o},error:r}=s;if(r)throw r;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await yn(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(pe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async o=>{var r,a,l,c,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Xt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(pe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)throw r;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await hx(async i=>(i>0&&await ux(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Es})),(i,o)=>{const r=200*Math.pow(2,i);return o&&Yr(o)&&Date.now()+r-n<Cn})}catch(n){if(this._debug(s,"error",n),pe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Xt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await co(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Kr;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Kr}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Yr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mr;const{data:o,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!o.session)throw new Ps;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),pe(o)){const r={session:null,error:o};return Yr(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(r),r}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],r=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){o.push(l)}});if(await Promise.all(r),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await af(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await uo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Cn}ms, refresh threshold is ${Pa} ticks`),i<=Pa&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,r]=await yn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:o,error:r}=s;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:r,error:a}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(s){if(pe(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:o}=s;return o?{data:null,error:o}:await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(pe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(r=>r.factor_type==="totp"&&r.status==="verified"),o=n.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:n,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Jr(i.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(r=>r.kid===e);if(n||(n=this.jwks.keys.find(r=>r.kid===e),n&&this.jwks_cached_at+Jy>Date.now()))return n;const{data:i,error:o}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!i.keys||i.keys.length===0)throw new ki("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(r=>r.kid===e),!n)throw new ki("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:i,payload:o,signature:r,raw:{header:a,payload:l}}=Jr(n);if(xx(o.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:i,signature:r},error:null}}const c=_x(i.alg),d=await this.fetchJwk(i.kid,s),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,r,rx(`${a}.${l}`)))throw new ki("Invalid JWT signature");return{data:{claims:o,header:i,signature:r},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}}$i.nextInstanceID=0;const Fx=$i;class jx extends Fx{constructor(e){super(e)}}var Nx=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}function l(d){try{c(n.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Ux{constructor(e,s,n){var i,o,r;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Hy(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Fy,realtime:Ny,auth:Object.assign(Object.assign({},jy),{storageKey:c}),global:Ly},h=Wy(n??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=h.auth)!==null&&r!==void 0?r:{},this.headers,h.global.fetch),this.fetch=Vy(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ny(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new D0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dy(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Nx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:o,flowType:r,lock:a,debug:l},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jx({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,flowType:r,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new yy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $x=(t,e,s)=>new Ux(t,e,s),Bx="https://nivvbndswqkjnifvkauf.supabase.co",Vx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pdnZibmRzd3Fram5pZnZrYXVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NTAzMzEsImV4cCI6MjA2MzQyNjMzMX0.UocPLAEg1htKV7ZivlqRR3GZhDDCNi1jSseGikVpYv4",I=$x(Bx,Vx);function _l(t){const e=t.replace(/\D/g,"").slice(0,11),s=e.slice(0,3),n=e.slice(3,6),i=e.slice(6,9),o=e.slice(9,11);return e.length<=3?e:e.length<=6?`${s}.${e.slice(3)}`:e.length<=9?`${s}.${n}.${e.slice(6)}`:`${s}.${n}.${i}-${o}`}function cf(t){const e=t.replace(/\D/g,"").slice(0,8),s=e.slice(0,5),n=e.slice(5);return e.length<=5?e:`${s}-${n}`}function Wt(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function it(t){if(!t)return"";const e=t.split("-");if(e.length!==3)return t;const[s,n,i]=e;return`${i.padStart(2,"0")}/${n.padStart(2,"0")}/${s}`}const zx={name:"Signup",components:{Navbar:qt,Footer:Kt},data(){return{name:"",email:"",password:""}},methods:{async handleSignup(){if(!this.name){alert("Informe o nome");return}if(this.email&&!Wt(this.email)){alert("E-mail invlido");return}const{data:t,error:e}=await I.auth.signUp({email:this.email,password:this.password,options:{data:{name:this.name,display_name:this.name}}});alert(e?"Erro ao cadastrar: "+e.message:"Cadastro realizado! Verifique seu e-mail para ativar a conta.")}}},Hx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},Wx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},qx={class:"mt-6 text-center text-sm text-gray-500"};function Kx(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("section",Hx,[u("div",Wx,[e[10]||(e[10]=u("div",{class:"mb-8 text-center"},[u("h2",{class:"text-3xl font-extrabold text-blue-700"},"Crie sua conta"),u("p",{class:"text-gray-500"},"Comece agora a organizar seus atendimentos com praticidade")],-1)),u("form",{onSubmit:e[3]||(e[3]=Je((...c)=>o.handleSignup&&o.handleSignup(...c),["prevent"])),class:"space-y-5"},[u("div",null,[e[4]||(e[4]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"name"},"Nome",-1)),E(u("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.name=c),type:"text",id:"name",placeholder:"Seu nome",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.name]])]),u("div",null,[e[5]||(e[5]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),E(u("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>i.email=c),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.email]])]),u("div",null,[e[6]||(e[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.password=c),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.password]])]),e[7]||(e[7]=u("button",{type:"submit",class:"btn w-full"},"Cadastrar",-1))],32),u("p",qx,[e[9]||(e[9]=te(" J tem uma conta? ")),O(a,{to:"/login",class:"text-blue-600 hover:underline"},{default:ee(()=>e[8]||(e[8]=[te("Entrar")])),_:1,__:[8]})])])]),O(l)],64)}const Gx=me(zx,[["render",Kx]]),Yx={name:"Login",components:{Navbar:qt,Footer:Kt},data(){return{email:"",password:"",loginError:""}},methods:{async handleLogin(){if(this.loginError="",this.email&&!Wt(this.email)){this.loginError="E-mail invlido";return}const{error:t}=await I.auth.signInWithPassword({email:this.email,password:this.password});t?t.message&&t.message.toLowerCase().includes("confirm")?alert("Voc precisa confirmar o e-mail antes de acessar o sistema."):this.loginError="E-mail ou senha invlidos":this.$router.push("/dashboard")},async handleGoogleLogin(){const{error:t}=await I.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/#/dashboard"}});t&&alert("Erro ao entrar com Google: "+t.message)},clearError(){this.loginError=""}}},Jx={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-blue-100 px-4"},Xx={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},Qx={key:0,class:"text-red-600 text-center text-sm"},Zx={class:"mt-6 text-center text-sm text-gray-500"};function e_(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("section",Jx,[u("div",Xx,[e[11]||(e[11]=u("div",{class:"mb-8 text-center"},[u("h2",{class:"text-3xl font-extrabold text-blue-700"},"Entrar"),u("p",{class:"text-gray-500"},"Acesse sua conta do Agenda Zen")],-1)),u("form",{onSubmit:e[5]||(e[5]=Je((...c)=>o.handleLogin&&o.handleLogin(...c),["prevent"])),class:"space-y-5"},[u("div",null,[e[6]||(e[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),E(u("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.email=c),onInput:e[1]||(e[1]=(...c)=>o.clearError&&o.clearError(...c)),type:"email",id:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[R,i.email]])]),u("div",null,[e[7]||(e[7]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"password"},"Senha",-1)),E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.password=c),onInput:e[3]||(e[3]=(...c)=>o.clearError&&o.clearError(...c)),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[R,i.password]])]),i.loginError?(x(),w("p",Qx,P(i.loginError),1)):j("",!0),e[8]||(e[8]=u("button",{type:"submit",class:"btn w-full"},"Entrar",-1)),u("button",{type:"button",onClick:e[4]||(e[4]=(...c)=>o.handleGoogleLogin&&o.handleGoogleLogin(...c)),class:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition duration-200"},"Entrar com Google")],32),u("p",Zx,[e[10]||(e[10]=te(" Ainda no tem conta? ")),O(a,{to:"/cadastro",class:"text-blue-600 hover:underline"},{default:ee(()=>e[9]||(e[9]=[te("Criar agora")])),_:1,__:[9]})])])]),O(l)],64)}const t_=me(Yx,[["render",e_]]);function Yn(t){const e=t.replace(/\D/g,"").slice(0,11),s=e.slice(0,2);if(e.length<=2)return e?`(${s}`:"";if(e.length<=6){const o=e.slice(2);return`(${s}) ${o}`}if(e.length<=10){const o=e.slice(2,6),r=e.slice(6);return`(${s}) ${o}${r?`-${r}`:""}`}const n=e.slice(2,7),i=e.slice(7);return`(${s}) ${n}-${i}`}function Zo(t){return t.replace(/\D/g,"")}const s_={name:"Onboarding",data(){return{userId:null,step:1,form:{businessName:"",phone:"",email:""},agenda:{dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},serviceForm:{name:"",duration:"",price:""},services:[],daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Tera"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sbado"}]}},methods:{phoneMask:Yn,generateSlug(t){return t?t.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""):""},async next(){this.step===1?(await this.saveProfile(),this.step++):this.step===2?(await this.saveAgenda(),this.step++):this.step===3&&(await this.saveServices(),await this.markOnboardingComplete(),this.step++)},prev(){this.step>1&&this.step--},async saveProfile(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail invlido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.generateSlug(this.form.businessName),phone:this.form.phone,email:this.form.email};await I.from("profiles").upsert(t,{onConflict:["id"]})},async saveAgenda(){const t={start:null,end:null,days:[]};for(const[s,n]of Object.entries(this.agenda.dailySchedule))n.enabled&&n.start&&n.end&&(t.days.push(s),(!t.start||n.start<t.start)&&(t.start=n.start),(!t.end||n.end>t.end)&&(t.end=n.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule};await I.from("profiles").upsert(e,{onConflict:["id"]})},async saveServices(){for(const t of this.services)await I.from("services").insert({name:t.name,duration:t.duration,price:parseFloat(t.price),user_id:this.userId})},addService(){this.serviceForm.name&&(this.services.push({name:this.serviceForm.name,duration:this.serviceForm.duration,price:this.serviceForm.price}),this.serviceForm={name:"",duration:"",price:""})},removeService(t){this.services.splice(t,1)},async markOnboardingComplete(){await I.from("profiles").upsert({id:this.userId,onboarding_complete:!0},{onConflict:["id"]})},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id}},n_={class:"min-h-screen flex bg-gray-100 items-center justify-center p-4"},i_={class:"bg-white p-6 rounded-lg shadow w-full max-w-2xl"},o_={key:0,class:"space-y-4"},r_={key:1,class:"space-y-4"},a_={class:"mt-1 space-y-2"},l_=["onUpdate:modelValue"],c_={class:"w-20"},d_=["onUpdate:modelValue"],u_=["onUpdate:modelValue"],h_={key:2,class:"space-y-4"},f_={class:"flex justify-end"},p_={class:"mt-4 space-y-1"},m_=["onClick"],g_={key:3,class:"space-y-4 text-center"},b_={key:4,class:"flex justify-between mt-6"},y_={key:5,class:"flex justify-center mt-6"};function x_(t,e,s,n,i,o){return x(),w("div",n_,[u("div",i_,[i.step===1?(x(),w("div",o_,[e[14]||(e[14]=u("h2",{class:"text-xl font-semibold mb-4"},"Bem-vindo! Vamos comear pelo seu perfil.",-1)),u("div",null,[e[11]||(e[11]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>i.form.businessName=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.businessName]])]),u("div",null,[e[12]||(e[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>i.form.phone=r),onInput:e[2]||(e[2]=r=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.phone]])]),u("div",null,[e[13]||(e[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=r=>i.form.email=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.email]])])])):i.step===2?(x(),w("div",r_,[e[17]||(e[17]=u("h2",{class:"text-xl font-semibold mb-4"},"Horrios de atendimento",-1)),u("div",null,[e[16]||(e[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horrios por dia",-1)),u("div",a_,[(x(!0),w(Y,null,fe(i.daysOfWeekOptions,r=>(x(),w("div",{key:r.value,class:"flex items-center space-x-2"},[E(u("input",{type:"checkbox","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].enabled=a},null,8,l_),[[hl,i.agenda.dailySchedule[r.value].enabled]]),u("span",c_,P(r.label),1),E(u("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].start=a,class:"border rounded-md px-2 py-1"},null,8,d_),[[R,i.agenda.dailySchedule[r.value].start]]),e[15]||(e[15]=u("span",null,"-",-1)),E(u("input",{type:"time",step:"60","onUpdate:modelValue":a=>i.agenda.dailySchedule[r.value].end=a,class:"border rounded-md px-2 py-1"},null,8,u_),[[R,i.agenda.dailySchedule[r.value].end]])]))),128))])])])):i.step===3?(x(),w("div",h_,[e[21]||(e[21]=u("h2",{class:"text-xl font-semibold mb-4"},"Cadastre seus servios",-1)),u("div",null,[e[18]||(e[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>i.serviceForm.name=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.serviceForm.name]])]),u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Durao",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=r=>i.serviceForm.duration=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.serviceForm.duration]])]),u("div",null,[e[20]||(e[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),E(u("input",{type:"number",step:"0.01","onUpdate:modelValue":e[6]||(e[6]=r=>i.serviceForm.price=r),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.serviceForm.price]])]),u("div",f_,[u("button",{onClick:e[7]||(e[7]=(...r)=>o.addService&&o.addService(...r)),class:"btn"},"Adicionar")]),u("ul",p_,[(x(!0),w(Y,null,fe(i.services,(r,a)=>(x(),w("li",{key:a,class:"flex justify-between"},[u("span",null,P(r.name)+" - "+P(r.duration)+" minutos - "+P(o.formatPrice(r.price)),1),u("button",{onClick:l=>o.removeService(a),class:"text-red-600 hover:underline"},"Remover",8,m_)]))),128))])])):i.step===4?(x(),w("div",g_,e[22]||(e[22]=[u("h2",{class:"text-2xl font-semibold"},"Pronto!",-1),u("p",null,"Seu cadastro inicial est concludo.",-1),u("p",{class:"text-lg"},"Bem-vindo ao Agenda Zen!",-1)]))):j("",!0),i.step<4?(x(),w("div",b_,[i.step>1?(x(),w("button",{key:0,onClick:e[8]||(e[8]=(...r)=>o.prev&&o.prev(...r)),class:"px-4 py-2 border rounded"},"Voltar")):j("",!0),u("button",{onClick:e[9]||(e[9]=(...r)=>o.next&&o.next(...r)),class:"btn ml-auto"},P(i.step===3?"Finalizar":"Prximo"),1)])):(x(),w("div",y_,[u("button",{onClick:e[10]||(e[10]=r=>t.$router.push("/dashboard")),class:"btn"},"Ir para o Dashboard")]))])])}const __=me(s_,[["render",x_]]),v_={name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}}},w_={class:"space-y-6 mt-8"},k_={class:"space-y-2"},S_={class:"space-y-2"},C_={class:"space-y-2"},M_={class:"space-y-2"},A_={class:"space-y-2"};function P_(t,e,s,n,i,o){const r=z("router-link");return x(),w("div",null,[s.isOpen?(x(),w("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:e[0]||(e[0]=a=>t.$emit("close"))})):j("",!0),u("aside",{class:$e(["fixed inset-y-0 left-0 transform bg-white shadow-md transition-all duration-200 z-50 md:relative overflow-hidden flex flex-col min-h-screen",s.isOpen?"w-64 p-6 translate-x-0":"w-0 p-0 -translate-x-full"])},[u("button",{class:"absolute top-4 right-4 text-gray-600 focus:outline-none",onClick:e[1]||(e[1]=a=>t.$emit("close"))},e[2]||(e[2]=[u("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[19]||(e[19]=u("h2",{class:"text-2xl font-bold text-blue-600 mb-6"},"Agenda Zen",-1)),u("nav",w_,[u("div",k_,[e[5]||(e[5]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Agendamentos",-1)),O(r,{to:"/dashboard",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[3]||(e[3]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l9-9 9 9M4 10v10a1 1 0 001 1h3m10-11v10a1 1 0 01-1 1h-3m-6 0h6"})],-1),u("span",null,"Incio",-1)])),_:1,__:[3]}),O(r,{to:"/agendamentos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[4]||(e[4]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),u("line",{x1:"16",y1:"2",x2:"16",y2:"6","stroke-width":"2"}),u("line",{x1:"8",y1:"2",x2:"8",y2:"6","stroke-width":"2"}),u("line",{x1:"3",y1:"10",x2:"21",y2:"10","stroke-width":"2"})],-1),u("span",null,"Agendamentos",-1)])),_:1,__:[4]})]),u("div",S_,[e[9]||(e[9]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Cadastros",-1)),O(r,{to:"/clientes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[6]||(e[6]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"7",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Clientes",-1)])),_:1,__:[6]}),O(r,{to:"/servicos",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[7]||(e[7]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V5a4 4 0 018 0v2"})],-1),u("span",null,"Servios",-1)])),_:1,__:[7]}),O(r,{to:"/salas",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[8]||(e[8]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v18M15 3v18M3 9h18M3 15h18"})],-1),u("span",null,"Salas",-1)])),_:1,__:[8]})]),u("div",C_,[e[11]||(e[11]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Relatrios",-1)),O(r,{to:"/faturamento",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[10]||(e[10]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3v18h18M9 17v-4M13 17v-8M17 17V7"})],-1),u("span",null,"Faturamento",-1)])),_:1,__:[10]})]),u("div",M_,[e[14]||(e[14]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Pagamentos",-1)),O(r,{to:"/comprovantes",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[12]||(e[12]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})],-1),u("span",null,"Comprovantes",-1)])),_:1,__:[12]}),O(r,{to:"/templates",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[13]||(e[13]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4h16v4H4V4zm0 6h16v10H4V10z"})],-1),u("span",null,"Templates",-1)])),_:1,__:[13]})]),u("div",A_,[e[18]||(e[18]=u("h3",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Conta",-1)),O(r,{to:"/configuracao",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[15]||(e[15]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Perfil",-1)])),_:1,__:[15]}),O(r,{to:"/usuarios",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[16]||(e[16]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1),u("span",null,"Usurios",-1)])),_:1,__:[16]}),O(r,{to:"/minha-assinatura",class:"flex items-center text-gray-700 hover:text-blue-600"},{default:ee(()=>e[17]||(e[17]=[u("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",ry:"2","stroke-width":"2"}),u("line",{x1:"3",y1:"9",x2:"21",y2:"9","stroke-width":"2"})],-1),u("span",null,"Minha Assinatura",-1)])),_:1,__:[17]})])])],2)])}const Pt=me(v_,[["render",P_]]),E_={name:"HeaderUser",props:{title:{type:String,default:"Agenda Zen"}},data(){return{userName:null,showMenu:!1}},async mounted(){var e,s;const{data:{user:t}}=await I.auth.getUser();if(!t)this.$router.push("/login");else{const n=((e=t.user_metadata)==null?void 0:e.display_name)||((s=t.user_metadata)==null?void 0:s.name);this.userName=n&&n.trim()!==""?n:t.email}},methods:{toggleMenu(){this.showMenu=!this.showMenu},async handleLogout(){this.showMenu=!1,await I.auth.signOut(),this.$router.push("/")}}},T_={class:"flex justify-between items-center mb-8"},O_={class:"text-2xl font-semibold text-gray-800"},D_={key:0,class:"relative"},I_={class:"text-gray-600"},R_={key:0,class:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-md"};function L_(t,e,s,n,i,o){const r=z("router-link");return x(),w("header",T_,[u("h1",O_,P(s.title),1),i.userName?(x(),w("div",D_,[u("button",{onClick:e[0]||(e[0]=(...a)=>o.toggleMenu&&o.toggleMenu(...a)),class:"flex items-center space-x-2 focus:outline-none"},[e[3]||(e[3]=u("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[u("circle",{cx:"12",cy:"8",r:"4","stroke-width":"2"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 21v-2a6 6 0 0112 0v2"})],-1)),u("span",I_,P(i.userName),1),(x(),w("svg",{class:$e(["w-4 h-4 text-gray-600 transition-transform",{"rotate-180":i.showMenu}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[2]||(e[2]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),i.showMenu?(x(),w("div",R_,[O(r,{to:"/",class:"block px-4 py-2 hover:bg-gray-100"},{default:ee(()=>e[4]||(e[4]=[te("Incio")])),_:1,__:[4]}),O(r,{to:"/configuracao",class:"block px-4 py-2 hover:bg-gray-100"},{default:ee(()=>e[5]||(e[5]=[te("Perfil")])),_:1,__:[5]}),O(r,{to:"/usuarios",class:"block px-4 py-2 hover:bg-gray-100"},{default:ee(()=>e[6]||(e[6]=[te("Usurios")])),_:1,__:[6]}),O(r,{to:"/minha-assinatura",class:"block px-4 py-2 hover:bg-gray-100"},{default:ee(()=>e[7]||(e[7]=[te("Assinatura")])),_:1,__:[7]}),u("button",{onClick:e[1]||(e[1]=(...a)=>o.handleLogout&&o.handleLogout(...a)),class:"w-full text-left px-4 py-2 hover:bg-gray-100"},"Sair")])):j("",!0)])):j("",!0)])}const Et=me(E_,[["render",L_]]),F_={name:"Modal"},j_={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg md:max-w-4xl max-h-[90vh] overflow-y-auto"};function N_(t,e,s,n,i,o){return x(),w("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[0]||(e[0]=Je(r=>t.$emit("close"),["self"]))},[u("div",j_,[Zu(t.$slots,"default")])])}const Cs=me(F_,[["render",N_]]);function df(){return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function uf(t,e){if(!t||!e)return new Date(new Date().toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}));const s=`${t}T${e}`;return new Date(new Date(s).toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))}function Dt(t,e=1){if(!t)return"";const[s,n]=t.split(":").map(Number),i=new Date;i.setHours(s),i.setMinutes(n),i.setSeconds(0),i.setMinutes(i.getMinutes()+e*60);const o=String(i.getHours()).padStart(2,"0"),r=String(i.getMinutes()).padStart(2,"0");return`${o}:${r}`}const U_={name:"WeekView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0},startHour:{type:Number,default:6},endHour:{type:Number,default:23}},data(){const t=df(),e=t.getDay()===0?7:t.getDay(),s=new Date(t);s.setDate(t.getDate()-e+1);const n=new Date(s);return n.setDate(s.getDate()+6),{weekStart:s,weekEnd:n,dayLabels:["Seg","Ter","Qua","Qui","Sex","Sb","Dom"],minuteHeight:1}},computed:{computedStartHour(){return this.startHour},computedEndHour(){return this.endHour},totalHours(){return Math.max(0,this.computedEndHour-this.computedStartHour+1)},events(){const t=this.weekStart.toISOString().split("T")[0],e=this.weekEnd.toISOString().split("T")[0],s=this.appointments.filter(o=>o.date>=t&&o.date<=e).map(o=>{const r=Dt(o.time),[a,l]=r.split(":"),c=uf(o.date,r),d=new Date(c.getTime()+Number(o.duration||0)*6e4),h=c.getDay()===0?7:c.getDay();return{id:o.id,title:this.getClientName(o.client_id),startTime:`${a}:${l}`,endTime:`${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`,day:h,appointment:o,lane:0,totalLanes:1}}),n={},i=o=>{const[r,a]=o.split(":").map(Number);return r*60+a};return s.forEach(o=>{n[o.day]||(n[o.day]=[]),n[o.day].push(o)}),Object.values(n).forEach(o=>{o.sort((a,l)=>i(a.startTime)-i(l.startTime));let r=[];o.forEach(a=>{r=r.filter(d=>i(d.endTime)>i(a.startTime));let l=0;for(;r.some(d=>d.lane===l);)l++;a.lane=l,r.push(a);const c=Math.max(...r.map(d=>d.lane))+1;r.forEach(d=>{d.totalLanes=Math.max(d.totalLanes,c)})})}),s}},methods:{updateMinuteHeight(){if(this.$refs.grid){const e=window.getComputedStyle(this.$refs.grid).gridTemplateRows.split(" ")[0],s=parseFloat(e);!isNaN(s)&&s>0&&(this.minuteHeight=s/60)}},getEventStyle(t){const e=parseInt(t.startTime.split(":")[0]),s=parseInt(t.startTime.split(":")[1]),n=parseInt(t.endTime.split(":")[0]),i=parseInt(t.endTime.split(":")[1]),o=e*60+s,r=n*60+i,a=this.computedStartHour*60,l=this.minuteHeight,c=(o-a)*l+60,d=(r-o)*l,h="(100% - 64px) / 7",f=`calc((${h}) / ${t.totalLanes})`;return{top:`${c}px`,height:`${d}px`,left:`calc(64px + (${h}) * ${t.day-1} + ${f} * ${t.lane})`,width:`calc(${f} - 4px)`}},formatDate(t){return t instanceof Date?it(t.toISOString().split("T")[0]):t}},watch:{computedStartHour(){this.$nextTick(this.updateMinuteHeight)},computedEndHour(){this.$nextTick(this.updateMinuteHeight)}},mounted(){this.updateMinuteHeight()}},$_={class:"bg-white rounded-lg shadow overflow-hidden"},B_={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},V_={class:"font-semibold"},z_={class:"relative overflow-x-auto"},H_={class:"flex justify-center items-start border bg-gray-50"},W_=["title","onClick"];function q_(t,e,s,n,i,o){return x(),w("div",$_,[u("div",B_,[u("div",V_,P(o.formatDate(i.weekStart))+" - "+P(o.formatDate(i.weekEnd)),1)]),u("div",z_,[u("div",{ref:"grid",class:"grid gap-px text-sm bg-gray-100 relative",style:Ti({gridTemplateColumns:"64px repeat(7, 1fr)",gridTemplateRows:`repeat(${o.totalHours}, 60px)`})},[e[0]||(e[0]=u("div",{class:"bg-gray-50"},null,-1)),(x(!0),w(Y,null,fe(i.dayLabels,(r,a)=>(x(),w("div",{key:"day-"+a,class:"font-semibold text-center border px-1 bg-gray-50"},P(r),1))),128)),(x(!0),w(Y,null,fe(o.totalHours,r=>(x(),w(Y,{key:"line-"+r},[u("div",H_,P((o.computedStartHour+r-1).toString().padStart(2,"0"))+":00 ",1),(x(),w(Y,null,fe(7,a=>u("div",{key:"cell-"+a+"-"+r,class:"relative bg-white border"})),64))],64))),128)),(x(!0),w(Y,null,fe(o.events,r=>(x(),w("div",{key:r.id,class:$e(["absolute text-white rounded px-2 py-1 event cursor-pointer",r.appointment.from_site&&!r.appointment.confirmed?"bg-red-500":"bg-blue-500"]),style:Ti(o.getEventStyle(r)),title:r.appointment.from_site&&!r.appointment.confirmed?"pendente confirmao de pagamento":"",onClick:a=>t.$emit("select",r.appointment)},P(r.title)+" - "+P(r.startTime),15,W_))),128))],4)])])}const hf=me(U_,[["render",q_],["__scopeId","data-v-7aa4b6ae"]]),K_={name:"AppointmentDetails",props:{appointment:{type:Object,required:!0},getClientName:{type:Function,required:!0},getServiceName:{type:Function,required:!0},getRoomName:{type:Function,default:()=>""},getRoomLink:{type:Function,default:()=>""}},methods:{addHoursToTime:Dt,formatDateBR:it}},G_={class:"relative"},Y_={key:0,class:"space-y-1 border rounded-md p-4 bg-gray-50 text-gray-700"},J_={key:0},X_={key:1},Q_=["href"];function Z_(t,e,s,n,i,o){return x(),w("div",G_,[u("button",{onClick:e[0]||(e[0]=r=>t.$emit("close")),class:"absolute top-0 right-0 m-2 px-2 py-1 rounded border text-sm"}," Fechar "),e[8]||(e[8]=u("h3",{class:"text-lg font-semibold mb-4"},"Detalhes do Agendamento",-1)),s.appointment?(x(),w("div",Y_,[u("p",null,[e[1]||(e[1]=u("strong",null,"Data:",-1)),te(" "+P(o.formatDateBR(s.appointment.date)),1)]),u("p",null,[e[2]||(e[2]=u("strong",null,"Hora:",-1)),te(" "+P(o.addHoursToTime(s.appointment.time)),1)]),u("p",null,[e[3]||(e[3]=u("strong",null,"Cliente:",-1)),te(" "+P(s.getClientName(s.appointment.client_id)),1)]),u("p",null,[e[4]||(e[4]=u("strong",null,"Servio:",-1)),te(" "+P(s.getServiceName(s.appointment.service_id)),1)]),u("p",null,[e[5]||(e[5]=u("strong",null,"Durao:",-1)),te(" "+P(s.appointment.duration)+" minutos",1)]),u("p",null,[e[6]||(e[6]=u("strong",null,"Descrio:",-1)),te(" "+P(s.appointment.description),1)]),s.appointment.room_id?(x(),w("p",J_,[e[7]||(e[7]=u("strong",null,"Sala:",-1)),te(" "+P(s.getRoomName(s.appointment.room_id)),1)])):j("",!0),s.appointment.room_id&&s.getRoomLink(s.appointment.room_id)?(x(),w("p",X_,[u("a",{href:s.getRoomLink(s.appointment.room_id),target:"_blank",class:"text-blue-600 underline"},"Acessar Google Meet",8,Q_)])):j("",!0)])):j("",!0),Zu(t.$slots,"actions")])}const ff=me(K_,[["render",Z_]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function to(t){return t+.5|0}const Fs=(t,e,s)=>Math.max(Math.min(t,s),e);function ci(t){return Fs(to(t*2.55),0,255)}function Bs(t){return Fs(to(t*255),0,255)}function fs(t){return Fs(to(t/2.55)/100,0,1)}function Yc(t){return Fs(to(t*100),0,100)}const Ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Oa=[..."0123456789ABCDEF"],ev=t=>Oa[t&15],tv=t=>Oa[(t&240)>>4]+Oa[t&15],ho=t=>(t&240)>>4===(t&15),sv=t=>ho(t.r)&&ho(t.g)&&ho(t.b)&&ho(t.a);function nv(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ot[t[1]]*17,g:255&Ot[t[2]]*17,b:255&Ot[t[3]]*17,a:e===5?Ot[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ot[t[1]]<<4|Ot[t[2]],g:Ot[t[3]]<<4|Ot[t[4]],b:Ot[t[5]]<<4|Ot[t[6]],a:e===9?Ot[t[7]]<<4|Ot[t[8]]:255})),s}const iv=(t,e)=>t<255?e(t):"";function ov(t){var e=sv(t)?ev:tv;return t?"#"+e(t.r)+e(t.g)+e(t.b)+iv(t.a,e):void 0}const rv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pf(t,e,s){const n=e*Math.min(s,1-s),i=(o,r=(o+t/30)%12)=>s-n*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function av(t,e,s){const n=(i,o=(i+t/60)%6)=>s-s*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function lv(t,e,s){const n=pf(t,1,.5);let i;for(e+s>1&&(i=1/(e+s),e*=i,s*=i),i=0;i<3;i++)n[i]*=1-e-s,n[i]+=e;return n}function cv(t,e,s,n,i){return t===i?(e-s)/n+(e<s?6:0):e===i?(s-t)/n+2:(t-e)/n+4}function vl(t){const s=t.r/255,n=t.g/255,i=t.b/255,o=Math.max(s,n,i),r=Math.min(s,n,i),a=(o+r)/2;let l,c,d;return o!==r&&(d=o-r,c=a>.5?d/(2-o-r):d/(o+r),l=cv(s,n,i,d,o),l=l*60+.5),[l|0,c||0,a]}function wl(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Bs)}function kl(t,e,s){return wl(pf,t,e,s)}function dv(t,e,s){return wl(lv,t,e,s)}function uv(t,e,s){return wl(av,t,e,s)}function mf(t){return(t%360+360)%360}function hv(t){const e=rv.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ci(+e[5]):Bs(+e[5]));const i=mf(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=dv(i,o,r):e[1]==="hsv"?n=uv(i,o,r):n=kl(i,o,r),{r:n[0],g:n[1],b:n[2],a:s}}function fv(t,e){var s=vl(t);s[0]=mf(s[0]+e),s=kl(s),t.r=s[0],t.g=s[1],t.b=s[2]}function pv(t){if(!t)return;const e=vl(t),s=e[0],n=Yc(e[1]),i=Yc(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${i}%, ${fs(t.a)})`:`hsl(${s}, ${n}%, ${i}%)`}const Jc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mv(){const t={},e=Object.keys(Xc),s=Object.keys(Jc);let n,i,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],i=0;i<s.length;i++)o=s[i],a=a.replace(o,Jc[o]);o=parseInt(Xc[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}let fo;function gv(t){fo||(fo=mv(),fo.transparent=[0,0,0,0]);const e=fo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const bv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yv(t){const e=bv.exec(t);let s=255,n,i,o;if(e){if(e[7]!==n){const r=+e[7];s=e[8]?ci(r):Fs(r*255,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?ci(n):Fs(n,0,255)),i=255&(e[4]?ci(i):Fs(i,0,255)),o=255&(e[6]?ci(o):Fs(o,0,255)),{r:n,g:i,b:o,a:s}}}function xv(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Xr=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_n=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function _v(t,e,s){const n=_n(fs(t.r)),i=_n(fs(t.g)),o=_n(fs(t.b));return{r:Bs(Xr(n+s*(_n(fs(e.r))-n))),g:Bs(Xr(i+s*(_n(fs(e.g))-i))),b:Bs(Xr(o+s*(_n(fs(e.b))-o))),a:t.a+s*(e.a-t.a)}}function po(t,e,s){if(t){let n=vl(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=kl(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function gf(t,e){return t&&Object.assign(e||{},t)}function Qc(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bs(t[3]))):(e=gf(t,{r:0,g:0,b:0,a:1}),e.a=Bs(e.a)),e}function vv(t){return t.charAt(0)==="r"?yv(t):hv(t)}class Bi{constructor(e){if(e instanceof Bi)return e;const s=typeof e;let n;s==="object"?n=Qc(e):s==="string"&&(n=nv(e)||gv(e)||vv(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=gf(this._rgb);return e&&(e.a=fs(e.a)),e}set rgb(e){this._rgb=Qc(e)}rgbString(){return this._valid?xv(this._rgb):void 0}hexString(){return this._valid?ov(this._rgb):void 0}hslString(){return this._valid?pv(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,i=e.rgb;let o;const r=s===o?.5:s,a=2*r-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*i.r+.5,n.g=255&c*n.g+o*i.g+.5,n.b=255&c*n.b+o*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=_v(this._rgb,e._rgb,s)),this}clone(){return new Bi(this.rgb)}alpha(e){return this._rgb.a=Bs(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=to(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return po(this._rgb,2,e),this}darken(e){return po(this._rgb,2,-e),this}saturate(e){return po(this._rgb,1,e),this}desaturate(e){return po(this._rgb,1,-e),this}rotate(e){return fv(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function as(){}const wv=(()=>{let t=0;return()=>t++})();function ge(t){return t==null}function Le(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Be(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ct(t,e){return Be(t)?t:e}function he(t,e){return typeof t>"u"?e:t}const kv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,bf=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ie(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Me(t,e,s,n){let i,o,r;if(Le(t))if(o=t.length,n)for(i=o-1;i>=0;i--)e.call(s,t[i],i);else for(i=0;i<o;i++)e.call(s,t[i],i);else if(ye(t))for(r=Object.keys(t),o=r.length,i=0;i<o;i++)e.call(s,t[r[i]],r[i])}function er(t,e){let s,n,i,o;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(i=t[s],o=e[s],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function tr(t){if(Le(t))return t.map(tr);if(ye(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let i=0;for(;i<n;++i)e[s[i]]=tr(t[s[i]]);return e}return t}function yf(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Sv(t,e,s,n){if(!yf(t))return;const i=e[t],o=s[t];ye(i)&&ye(o)?Vi(i,o,n):e[t]=tr(o)}function Vi(t,e,s){const n=Le(e)?e:[e],i=n.length;if(!ye(t))return t;s=s||{};const o=s.merger||Sv;let r;for(let a=0;a<i;++a){if(r=n[a],!ye(r))continue;const l=Object.keys(r);for(let c=0,d=l.length;c<d;++c)o(l[c],t,r,s)}return t}function Ci(t,e){return Vi(t,e,{merger:Cv})}function Cv(t,e,s){if(!yf(t))return;const n=e[t],i=s[t];ye(n)&&ye(i)?Ci(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=tr(i))}const Zc={"":t=>t,x:t=>t.x,y:t=>t.y};function Mv(t){const e=t.split("."),s=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function Av(t){const e=Mv(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function zs(t,e){return(Zc[e]||(Zc[e]=Av(e)))(t)}function Sl(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zi=t=>typeof t<"u",Hs=t=>typeof t=="function",ed=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function Pv(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const je=Math.PI,Fe=2*je,Ev=Fe+je,sr=Number.POSITIVE_INFINITY,Tv=je/180,ze=je/2,Js=je/4,td=je*2/3,js=Math.log10,ns=Math.sign;function Mi(t,e,s){return Math.abs(t-e)<s}function sd(t){const e=Math.round(t);t=Mi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(js(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function Ov(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((i,o)=>i-o).pop(),e}function Dv(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Vn(t){return!Dv(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Iv(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function xf(t,e,s){let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n][s],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ut(t){return t*(je/180)}function Cl(t){return t*(180/je)}function nd(t){if(!Be(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function _f(t,e){const s=e.x-t.x,n=e.y-t.y,i=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*je&&(o+=Fe),{angle:o,distance:i}}function Da(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Rv(t,e){return(t-e+Ev)%Fe-je}function Mt(t){return(t%Fe+Fe)%Fe}function Hi(t,e,s,n){const i=Mt(t),o=Mt(e),r=Mt(s),a=Mt(o-i),l=Mt(r-i),c=Mt(i-o),d=Mt(i-r);return i===o||i===r||n&&o===r||a>l&&c<d}function Ye(t,e,s){return Math.max(e,Math.min(s,t))}function Lv(t){return Ye(t,-32768,32767)}function gs(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Ml(t,e,s){s=s||(r=>t[r]<e);let n=t.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,s(o)?i=o:n=o;return{lo:i,hi:n}}const bs=(t,e,s,n)=>Ml(t,s,n?i=>{const o=t[i][e];return o<s||o===s&&t[i+1][e]===s}:i=>t[i][e]<s),Fv=(t,e,s)=>Ml(t,s,n=>t[n][e]>=s);function jv(t,e,s){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>s;)i--;return n>0||i<t.length?t.slice(n,i):t}const vf=["push","pop","shift","splice","unshift"];function Nv(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),vf.forEach(s=>{const n="_onData"+Sl(s),i=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...o){const r=i.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function id(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(vf.forEach(o=>{delete t[o]}),delete t._chartjs)}function wf(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const kf=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Sf(t,e){let s=[],n=!1;return function(...i){s=i,n||(n=!0,kf.call(window,()=>{n=!1,t.apply(e,s)}))}}function Uv(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Al=t=>t==="start"?"left":t==="end"?"right":"center",st=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,$v=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function Cf(t,e,s){const n=e.length;let i=0,o=n;if(t._sorted){const{iScale:r,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=r.axis,{min:h,max:f,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(i=Math.min(bs(l,d,h).lo,s?n:bs(e,d,r.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(b=>!ge(b[a.axis]));i-=Math.max(0,g)}i=Ye(i,0,n-1)}if(m){let g=Math.max(bs(l,r.axis,f,!0).hi+1,s?0:bs(e,d,r.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(g-1).findIndex(v=>!ge(v[a.axis]));g+=Math.max(0,b)}o=Ye(g,i,n)-i}else o=n-i}return{start:i,count:o}}function Mf(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=i,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,i),o}const mo=t=>t===0||t===1,od=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Fe/s)),rd=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Fe/s)+1,Ai={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ze)+1,easeOutSine:t=>Math.sin(t*ze),easeInOutSine:t=>-.5*(Math.cos(je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>mo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>mo(t)?t:od(t,.075,.3),easeOutElastic:t=>mo(t)?t:rd(t,.075,.3),easeInOutElastic(t){return mo(t)?t:t<.5?.5*od(t*2,.1125,.45):.5+.5*rd(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ai.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ai.easeInBounce(t*2)*.5:Ai.easeOutBounce(t*2-1)*.5+.5};function Pl(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ad(t){return Pl(t)?t:new Bi(t)}function Qr(t){return Pl(t)?t:new Bi(t).saturate(.5).darken(.1).hexString()}const Bv=["x","y","borderWidth","radius","tension"],Vv=["color","borderColor","backgroundColor"];function zv(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Vv},numbers:{type:"number",properties:Bv}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Hv(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ld=new Map;function Wv(t,e){e=e||{};const s=t+JSON.stringify(e);let n=ld.get(s);return n||(n=new Intl.NumberFormat(t,e),ld.set(s,n)),n}function so(t,e,s){return Wv(e,s).format(t)}const Af={values(t){return Le(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let i,o=t;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),o=qv(t,s)}const r=js(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),so(t,n,l)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(js(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?Af.numeric.call(this,t,e,s):""}};function qv(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Ar={formatters:Af};function Kv(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ar.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const un=Object.create(null),Ia=Object.create(null);function Pi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,i=s.length;n<i;++n){const o=s[n];t=t[o]||(t[o]=Object.create(null))}return t}function Zr(t,e,s){return typeof e=="string"?Vi(Pi(t,e),s):Vi(Pi(t,""),e)}class Gv{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Qr(i.backgroundColor),this.hoverBorderColor=(n,i)=>Qr(i.borderColor),this.hoverColor=(n,i)=>Qr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Zr(this,e,s)}get(e){return Pi(this,e)}describe(e,s){return Zr(Ia,e,s)}override(e,s){return Zr(un,e,s)}route(e,s,n,i){const o=Pi(this,e),r=Pi(this,n),a="_"+s;Object.defineProperties(o,{[a]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=r[i];return ye(l)?Object.assign({},c,l):he(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(s=>s(this))}}var Ue=new Gv({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zv,Hv,Kv]);function Yv(t){return!t||ge(t.size)||ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function nr(t,e,s,n,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,s.push(i)),o>n&&(n=o),n}function Jv(t,e,s,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=s.length;let l,c,d,h,f;for(l=0;l<a;l++)if(h=s[l],h!=null&&!Le(h))r=nr(t,i,o,r,h);else if(Le(h))for(c=0,d=h.length;c<d;c++)f=h[c],f!=null&&!Le(f)&&(r=nr(t,i,o,r,f));t.restore();const p=o.length/2;if(p>s.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return r}function Xs(t,e,s){const n=t.currentDevicePixelRatio,i=s!==0?Math.max(s/2,.5):0;return Math.round((e-i)*n)/n+i}function cd(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ra(t,e,s,n){Pf(t,e,s,n,null)}function Pf(t,e,s,n,i){let o,r,a,l,c,d,h,f;const p=e.pointStyle,m=e.rotation,g=e.radius;let b=(m||0)*Tv;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:i?t.ellipse(s,n,i/2,g,0,0,Fe):t.arc(s,n,g,0,Fe),t.closePath();break;case"triangle":d=i?i/2:g,t.moveTo(s+Math.sin(b)*d,n-Math.cos(b)*g),b+=td,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*g),b+=td,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(b+Js)*l,h=Math.cos(b+Js)*(i?i/2-c:l),a=Math.sin(b+Js)*l,f=Math.sin(b+Js)*(i?i/2-c:l),t.arc(s-h,n-a,c,b-je,b-ze),t.arc(s+f,n-r,c,b-ze,b),t.arc(s+h,n+a,c,b,b+ze),t.arc(s-f,n+r,c,b+ze,b+je),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,d=i?i/2:l,t.rect(s-d,n-l,2*d,2*l);break}b+=Js;case"rectRot":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+f,n-r),t.lineTo(s+h,n+a),t.lineTo(s-f,n+r),t.closePath();break;case"crossRot":b+=Js;case"cross":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r);break;case"star":h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r),b+=Js,h=Math.cos(b)*(i?i/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(s-h,n-a),t.lineTo(s+h,n+a),t.moveTo(s+f,n-r),t.lineTo(s-f,n+r);break;case"line":r=i?i/2:Math.cos(b)*g,a=Math.sin(b)*g,t.moveTo(s-r,n-a),t.lineTo(s+r,n+a);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(i?i/2:g),n+Math.sin(b)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ys(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Pr(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Er(t){t.restore()}function Xv(t,e,s,n,i){if(!e)return t.lineTo(s.x,s.y);if(i==="middle"){const o=(e.x+s.x)/2;t.lineTo(o,e.y),t.lineTo(o,s.y)}else i==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function Qv(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Zv(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function ew(t,e,s,n,i){if(i.strikethrough||i.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=s-o.actualBoundingBoxAscent,c=s+o.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(r,d),t.lineTo(a,d),t.stroke()}}function tw(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function hn(t,e,s,n,i,o={}){const r=Le(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Zv(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&tw(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ge(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,s,n,o.maxWidth)),t.fillText(c,s,n,o.maxWidth),ew(t,s,n,c,o),n+=Number(i.lineHeight);t.restore()}function Wi(t,e){const{x:s,y:n,w:i,h:o,radius:r}=e;t.arc(s+r.topLeft,n+r.topLeft,r.topLeft,1.5*je,je,!0),t.lineTo(s,n+o-r.bottomLeft),t.arc(s+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,je,ze,!0),t.lineTo(s+i-r.bottomRight,n+o),t.arc(s+i-r.bottomRight,n+o-r.bottomRight,r.bottomRight,ze,0,!0),t.lineTo(s+i,n+r.topRight),t.arc(s+i-r.topRight,n+r.topRight,r.topRight,0,-ze,!0),t.lineTo(s+r.topLeft,n)}const sw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iw(t,e){const s=(""+t).match(sw);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const ow=t=>+t||0;function El(t,e){const s={},n=ye(e),i=n?Object.keys(e):e,o=ye(t)?n?r=>he(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of i)s[r]=ow(o(r));return s}function Ef(t){return El(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ln(t){return El(t,["topLeft","topRight","bottomLeft","bottomRight"])}function lt(t){const e=Ef(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ke(t,e){t=t||{},e=e||Ue.font;let s=he(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=he(t.style,e.style);n&&!(""+n).match(nw)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:he(t.family,e.family),lineHeight:iw(he(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:he(t.weight,e.weight),string:""};return i.string=Yv(i),i}function di(t,e,s,n){let i=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),s!==void 0&&Le(a)&&(a=a[s%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function rw(t,e,s){const{min:n,max:i}=t,o=bf(e,(i-n)/2),r=(a,l)=>s&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(i,o)}}function qs(t,e){return Object.assign(Object.create(t),e)}function Tl(t,e=[""],s,n,i=()=>t[0]){const o=s||t;typeof n>"u"&&(n=If("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>Tl([a,...t],e,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Of(a,l,()=>pw(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ud(a).includes(l)},ownKeys(a){return ud(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function zn(t,e,s,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Tf(t,n),setContext:o=>zn(t,o,s,n),override:o=>zn(t.override(o),e,s,n)};return new Proxy(i,{deleteProperty(o,r){return delete o[r],delete t[r],!0},get(o,r,a){return Of(o,r,()=>lw(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(o,r,a){return t[r]=a,delete o[r],!0}})}function Tf(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:s,indexable:n,isScriptable:Hs(s)?s:()=>s,isIndexable:Hs(n)?n:()=>n}}const aw=(t,e)=>t?t+Sl(e):e,Ol=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Of(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function lw(t,e,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:r}=t;let a=n[e];return Hs(a)&&r.isScriptable(e)&&(a=cw(e,a,t,s)),Le(a)&&a.length&&(a=dw(e,a,t,r.isIndexable)),Ol(e,a)&&(a=zn(a,i,o&&o[e],r)),a}function cw(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_stack:a}=s;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,r||n);return a.delete(t),Ol(t,l)&&(l=Dl(i._scopes,i,t,l)),l}function dw(t,e,s,n){const{_proxy:i,_context:o,_subProxy:r,_descriptors:a}=s;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(ye(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const h=Dl(c,i,t,d);e.push(zn(h,o,r&&r[t],a))}}return e}function Df(t,e,s){return Hs(t)?t(e,s):t}const uw=(t,e)=>t===!0?e:typeof t=="string"?zs(e,t):void 0;function hw(t,e,s,n,i){for(const o of e){const r=uw(s,o);if(r){t.add(r);const a=Df(r._fallback,s,i);if(typeof a<"u"&&a!==s&&a!==n)return a}else if(r===!1&&typeof n<"u"&&s!==n)return null}return!1}function Dl(t,e,s,n){const i=e._rootScopes,o=Df(e._fallback,s,n),r=[...t,...i],a=new Set;a.add(n);let l=dd(a,r,s,o||s,n);return l===null||typeof o<"u"&&o!==s&&(l=dd(a,r,o,l,n),l===null)?!1:Tl(Array.from(a),[""],i,o,()=>fw(e,s,n))}function dd(t,e,s,n,i){for(;s;)s=hw(t,e,s,n,i);return s}function fw(t,e,s){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return Le(i)&&ye(s)?s:i||{}}function pw(t,e,s,n){let i;for(const o of e)if(i=If(aw(o,t),s),typeof i<"u")return Ol(t,i)?Dl(s,n,t,i):i}function If(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function ud(t){let e=t._keys;return e||(e=t._keys=mw(t._scopes)),e}function mw(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Rf(t,e,s,n){const{iScale:i}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+s,d=e[c],r[a]={r:i.parse(zs(d,o),c)};return r}const gw=Number.EPSILON||1e-14,Hn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Lf=t=>t==="x"?"y":"x";function bw(t,e,s,n){const i=t.skip?e:t,o=e,r=s.skip?e:s,a=Da(o,i),l=Da(r,o);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=n*c,f=n*d;return{previous:{x:o.x-h*(r.x-i.x),y:o.y-h*(r.y-i.y)},next:{x:o.x+f*(r.x-i.x),y:o.y+f*(r.y-i.y)}}}function yw(t,e,s){const n=t.length;let i,o,r,a,l,c=Hn(t,0);for(let d=0;d<n-1;++d)if(l=c,c=Hn(t,d+1),!(!l||!c)){if(Mi(e[d],0,gw)){s[d]=s[d+1]=0;continue}i=s[d]/e[d],o=s[d+1]/e[d],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),s[d]=i*r*e[d],s[d+1]=o*r*e[d])}}function xw(t,e,s="x"){const n=Lf(s),i=t.length;let o,r,a,l=Hn(t,0);for(let c=0;c<i;++c){if(r=a,a=l,l=Hn(t,c+1),!a)continue;const d=a[s],h=a[n];r&&(o=(d-r[s])/3,a[`cp1${s}`]=d-o,a[`cp1${n}`]=h-o*e[c]),l&&(o=(l[s]-d)/3,a[`cp2${s}`]=d+o,a[`cp2${n}`]=h+o*e[c])}}function _w(t,e="x"){const s=Lf(e),n=t.length,i=Array(n).fill(0),o=Array(n);let r,a,l,c=Hn(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=Hn(t,r+1),!!l){if(c){const d=c[e]-l[e];i[r]=d!==0?(c[s]-l[s])/d:0}o[r]=a?c?ns(i[r-1])!==ns(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}yw(t,i,o),xw(t,o,e)}function go(t,e,s){return Math.max(Math.min(t,s),e)}function vw(t,e){let s,n,i,o,r,a=ys(t[0],e);for(s=0,n=t.length;s<n;++s)r=o,o=a,a=s<n-1&&ys(t[s+1],e),o&&(i=t[s],r&&(i.cp1x=go(i.cp1x,e.left,e.right),i.cp1y=go(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=go(i.cp2x,e.left,e.right),i.cp2y=go(i.cp2y,e.top,e.bottom)))}function ww(t,e,s,n,i){let o,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")_w(t,i);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=bw(c,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&vw(t,s)}function Il(){return typeof window<"u"&&typeof document<"u"}function Rl(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ir(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Tr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function kw(t,e){return Tr(t).getPropertyValue(e)}const Sw=["top","right","bottom","left"];function cn(t,e,s){const n={};s=s?"-"+s:"";for(let i=0;i<4;i++){const o=Sw[i];n[o]=parseFloat(t[e+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Cw=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Mw(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:i,offsetY:o}=n;let r=!1,a,l;if(Cw(i,o,t.target))a=i,l=o;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function sn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,i=Tr(s),o=i.boxSizing==="border-box",r=cn(i,"padding"),a=cn(i,"border","width"),{x:l,y:c,box:d}=Mw(t,s),h=r.left+(d&&a.left),f=r.top+(d&&a.top);let{width:p,height:m}=e;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-h)/p*s.width/n),y:Math.round((c-f)/m*s.height/n)}}function Aw(t,e,s){let n,i;if(e===void 0||s===void 0){const o=t&&Rl(t);if(!o)e=t.clientWidth,s=t.clientHeight;else{const r=o.getBoundingClientRect(),a=Tr(o),l=cn(a,"border","width"),c=cn(a,"padding");e=r.width-c.width-l.width,s=r.height-c.height-l.height,n=ir(a.maxWidth,o,"clientWidth"),i=ir(a.maxHeight,o,"clientHeight")}}return{width:e,height:s,maxWidth:n||sr,maxHeight:i||sr}}const bo=t=>Math.round(t*10)/10;function Pw(t,e,s,n){const i=Tr(t),o=cn(i,"margin"),r=ir(i.maxWidth,t,"clientWidth")||sr,a=ir(i.maxHeight,t,"clientHeight")||sr,l=Aw(t,e,s);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const f=cn(i,"border","width"),p=cn(i,"padding");c-=p.width+f.width,d-=p.height+f.height}return c=Math.max(0,c-o.width),d=Math.max(0,n?c/n:d-o.height),c=bo(Math.min(c,r,l.maxWidth)),d=bo(Math.min(d,a,l.maxHeight)),c&&!d&&(d=bo(c/2)),(e!==void 0||s!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,c=bo(Math.floor(d*n))),{width:c,height:d}}function hd(t,e,s){const n=e||1,i=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(s||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||r.height!==i||r.width!==o?(t.currentDevicePixelRatio=n,r.height=i,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Ew=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Il()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function fd(t,e){const s=kw(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function nn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Tw(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function Ow(t,e,s,n){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=nn(t,i,s),a=nn(i,o,s),l=nn(o,e,s),c=nn(r,a,s),d=nn(a,l,s);return nn(c,d,s)}const Dw=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Iw=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ln(t,e,s){return t?Dw(e,s):Iw()}function Ff(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function jf(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Nf(t){return t==="angle"?{between:Hi,compare:Rv,normalize:Mt}:{between:gs,compare:(e,s)=>e-s,normalize:e=>e}}function pd({start:t,end:e,count:s,loop:n,style:i}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:i}}function Rw(t,e,s){const{property:n,start:i,end:o}=s,{between:r,normalize:a}=Nf(n),l=e.length;let{start:c,end:d,loop:h}=t,f,p;if(h){for(c+=l,d+=l,f=0,p=l;f<p&&r(a(e[c%l][n]),i,o);++f)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:t.style}}function Uf(t,e,s){if(!s)return[t];const{property:n,start:i,end:o}=s,r=e.length,{compare:a,between:l,normalize:c}=Nf(n),{start:d,end:h,loop:f,style:p}=Rw(t,e,s),m=[];let g=!1,b=null,v,k,C;const S=()=>l(i,C,v)&&a(i,C)!==0,M=()=>a(o,v)===0||l(o,C,v),N=()=>g||S(),L=()=>!g||M();for(let B=d,X=d;B<=h;++B)k=e[B%r],!k.skip&&(v=c(k[n]),v!==C&&(g=l(v,i,o),b===null&&N()&&(b=a(v,i)===0?B:X),b!==null&&L()&&(m.push(pd({start:b,end:B,loop:f,count:r,style:p})),b=null),X=B,C=v));return b!==null&&m.push(pd({start:b,end:h,loop:f,count:r,style:p})),m}function $f(t,e){const s=[],n=t.segments;for(let i=0;i<n.length;i++){const o=Uf(n[i],t.points,e);o.length&&s.push(...o)}return s}function Lw(t,e,s,n){let i=0,o=e-1;if(s&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,s&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}function Fw(t,e,s,n){const i=t.length,o=[];let r=e,a=t[e],l;for(l=e+1;l<=s;++l){const c=t[l%i];c.skip||c.stop?a.skip||(n=!1,o.push({start:e%i,end:(l-1)%i,loop:n}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&o.push({start:e%i,end:r%i,loop:n}),o}function jw(t,e){const s=t.points,n=t.options.spanGaps,i=s.length;if(!i)return[];const o=!!t._loop,{start:r,end:a}=Lw(s,i,o,n);if(n===!0)return md(t,[{start:r,end:a,loop:o}],s,e);const l=a<r?a+i:a,c=!!t._fullLoop&&r===0&&a===i-1;return md(t,Fw(s,r,l,c),s,e)}function md(t,e,s,n){return!n||!n.setContext||!s?e:Nw(t,e,s,n)}function Nw(t,e,s,n){const i=t._chart.getContext(),o=gd(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=s.length,c=[];let d=o,h=e[0].start,f=h;function p(m,g,b,v){const k=a?-1:1;if(m!==g){for(m+=l;s[m%l].skip;)m-=k;for(;s[g%l].skip;)g+=k;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:b,style:v}),d=v,h=g%l)}}for(const m of e){h=a?h:m.start;let g=s[h%l],b;for(f=h+1;f<=m.end;f++){const v=s[f%l];b=gd(n.setContext(qs(i,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),Uw(b,d)&&p(h,f-1,m.loop,d),g=v,d=b}h<f-1&&p(h,f-1,m.loop,d)}return c}function gd(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Uw(t,e){if(!e)return!1;const s=[],n=function(i,o){return Pl(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function yo(t,e,s){return t.options.clip?t[s]:e[s]}function $w(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:yo(s,e,"left"),right:yo(s,e,"right"),top:yo(n,e,"top"),bottom:yo(n,e,"bottom")}:e}function Bf(t,e){const s=e._clip;if(s.disabled)return!1;const n=$w(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Bw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,i){const o=s.listeners[i],r=s.duration;o.forEach(a=>a({chart:e,initial:s.initial,numSteps:r,currentStep:Math.min(n-s.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=kf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),o.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),s+=o.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cs=new Bw;const bd="transparent",Vw={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=ad(t||bd),i=n.valid&&ad(e||bd);return i&&i.valid?i.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class zw{constructor(e,s,n,i){const o=s[n];i=di([e.to,i,o,e.from]);const r=di([e.from,o,i]);this._active=!0,this._fn=e.fn||Vw[e.type||typeof r],this._easing=Ai[e.easing]||Ai.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const i=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=di([e.to,s,i,e.from]),this._from=di([e.from,i,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,i=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||s<n),!this._active){this._target[i]=a,this._notify(!0);return}if(s<0){this._target[i]=o;return}l=s/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(o,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][s]()}}class Vf{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ye(e))return;const s=Object.keys(Ue.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!ye(o))return;const r={};for(const a of s)r[a]=o[a];(Le(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,r)})})}_animateOptions(e,s){const n=s.options,i=Ww(e,n);if(!i)return[];const o=this._createAnimations(i,n);return n.$shared&&Hw(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,s){const n=this._properties,i=[],o=e.$animations||(e.$animations={}),r=Object.keys(s),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,s));continue}const d=s[c];let h=o[c];const f=n.get(c);if(h)if(f&&h.active()){h.update(f,d,a);continue}else h.cancel();if(!f||!f.duration){e[c]=d;continue}o[c]=h=new zw(f,e,c,d),i.push(h)}return i}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return cs.add(this._chart,n),!0}}function Hw(t,e){const s=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const o=t[n[i]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function Ww(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function yd(t,e){const s=t&&t.options||{},n=s.reverse,i=s.min===void 0?e:0,o=s.max===void 0?e:0;return{start:n?o:i,end:n?i:o}}function qw(t,e,s){if(s===!1)return!1;const n=yd(t,s),i=yd(e,s);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function Kw(t){let e,s,n,i;return ye(t)?(e=t.top,s=t.right,n=t.bottom,i=t.left):e=s=n=i=t,{top:e,right:s,bottom:n,left:i,disabled:t===!1}}function zf(t,e){const s=[],n=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=n.length;i<o;++i)s.push(n[i].index);return s}function xd(t,e,s,n={}){const i=t.keys,o=n.mode==="single";let r,a,l,c;if(e===null)return;let d=!1;for(r=0,a=i.length;r<a;++r){if(l=+i[r],l===s){if(d=!0,n.all)continue;break}c=t.values[l],Be(c)&&(o||e===0||ns(e)===ns(c))&&(e+=c)}return!d&&!n.all?0:e}function Gw(t,e){const{iScale:s,vScale:n}=e,i=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length);let l,c,d;for(l=0,c=r.length;l<c;++l)d=r[l],a[l]={[i]:d,[o]:t[d]};return a}function ea(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Yw(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Jw(t){const{min:e,max:s,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?s:Number.POSITIVE_INFINITY}}function Xw(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function _d(t,e,s,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const o=t[i.index];if(s&&o>0||!s&&o<0)return i.index}return null}function vd(t,e){const{chart:s,_cachedMeta:n}=t,i=s._stacks||(s._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,d=Yw(o,r,n),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[l]:g,[c]:b}=m,v=m._stacks||(m._stacks={});f=v[c]=Xw(i,d,g),f[a]=b,f._top=_d(f,r,!0,n.type),f._bottom=_d(f,r,!1,n.type);const k=f._visualValues||(f._visualValues={});k[a]=b}}function ta(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Qw(t,e){return qs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Zw(t,e,s){return qs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function si(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const o=i._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const sa=t=>t==="reset"||t==="none",wd=(t,e)=>e?t:Object.assign({},t),e1=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:zf(s,!0),values:null};class Vt{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ea(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&si(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),i=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,o=s.xAxisID=he(n.xAxisID,ta(e,"x")),r=s.yAxisID=he(n.yAxisID,ta(e,"y")),a=s.rAxisID=he(n.rAxisID,ta(e,"r")),l=s.indexAxis,c=s.iAxisID=i(l,o,r,a),d=s.vAxisID=i(l,r,o,a);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(r),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&id(this._data,this),e._stacked&&si(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ye(s)){const i=this._cachedMeta;this._data=Gw(s,i)}else if(n!==s){if(n){id(n,this);const i=this._cachedMeta;si(i),i._parsed=[]}s&&Object.isExtensible(s)&&Nv(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const o=s._stacked;s._stacked=ea(s.vScale,s),s.stack!==n.stack&&(i=!0,si(s),s.stack=n.stack),this._resyncElements(e),(i||o!==s._stacked)&&(vd(this,s._parsed),s._stacked=ea(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=e===0&&s===i.length?!0:n._sorted,c=e>0&&n._parsed[e-1],d,h,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Le(i[e])?f=this.parseArrayData(n,i,e,s):ye(i[e])?f=this.parseObjectData(n,i,e,s):f=this.parsePrimitiveData(n,i,e,s);const p=()=>h[a]===null||c&&h[a]<c[a];for(d=0;d<s;++d)n._parsed[d+e]=h=f[d],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&vd(this,f)}parsePrimitiveData(e,s,n,i){const{iScale:o,vScale:r}=e,a=o.axis,l=r.axis,c=o.getLabels(),d=o===r,h=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+n,h[f]={[a]:d||o.parse(c[m],m),[l]:r.parse(s[m],m)};return h}parseArrayData(e,s,n,i){const{xScale:o,yScale:r}=e,a=new Array(i);let l,c,d,h;for(l=0,c=i;l<c;++l)d=l+n,h=s[d],a[l]={x:o.parse(h[0],d),y:r.parse(h[1],d)};return a}parseObjectData(e,s,n,i){const{xScale:o,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,h,f,p;for(d=0,h=i;d<h;++d)f=d+n,p=s[f],c[d]={x:o.parse(zs(p,a),f),y:r.parse(zs(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const i=this.chart,o=this._cachedMeta,r=s[e.axis],a={keys:zf(i,!0),values:s._stacks[e.axis]._visualValues};return xd(a,r,o.index,{mode:n})}updateRangeFromParsed(e,s,n,i){const o=n[s.axis];let r=o===null?NaN:o;const a=i&&n._stacks[s.axis];i&&a&&(i.values=a,r=xd(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,s){const n=this._cachedMeta,i=n._parsed,o=n._sorted&&e===n.iScale,r=i.length,a=this._getOtherScale(e),l=e1(s,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Jw(a);let f,p;function m(){p=i[f];const g=p[a.axis];return!Be(p[e.axis])||d>g||h<g}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let i,o,r;for(i=0,o=s.length;i<o;++i)r=s[i][e.axis],Be(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,i=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Kw(he(this.options.clip,qw(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,i=n.data||[],o=s.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,o,a,l),d=a;d<a+l;++d){const h=i[d];h.hidden||(h.active&&c?r.push(h):h.draw(e,o))}for(d=0;d<r.length;++d)r[d].draw(e,o)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=Zw(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Qw(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const i=s==="active",o=this._cachedDataOpts,r=e+"-"+s,a=o[r],l=this.enableOptionSharing&&zi(n);if(a)return wd(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),d),p=Object.keys(Ue.elements[e]),m=()=>this.getContext(n,i,s),g=c.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(wd(g,l))),g}_resolveAnimations(e,s,n){const i=this.chart,o=this._cachedDataOpts,r=`animation-${s}`,a=o[r];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,s),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(e,n,s))}const c=new Vf(i,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||sa(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),i=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(s,o)||o!==i;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:r}}updateElement(e,s,n,i){sa(i)?Object.assign(e,n):this._resolveAnimations(s,i).update(e,n)}updateSharedOptions(e,s,n){e&&!sa(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,i){e.active=i;const o=this.getStyle(s,i);this._resolveAnimations(s,n,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,o=s.length,r=Math.min(o,i);r&&this.parse(0,r),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,s,n=!0){const i=this._cachedMeta,o=i.data,r=e+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=r;a--)c[a]=c[a-s]};for(l(o),a=e;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,i){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,s);n._stacked&&si(n,i)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,i]=e;this[s](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}V(Vt,"defaults",{}),V(Vt,"datasetElementType",null),V(Vt,"dataElementType",null);function t1(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,o=s.length;i<o;i++)n=n.concat(s[i].controller.getAllParsedValues(t));t._cache.$bar=wf(n.sort((i,o)=>i-o))}return t._cache.$bar}function s1(t){const e=t.iScale,s=t1(e,t.type);let n=e._length,i,o,r,a;const l=()=>{r===32767||r===-32768||(zi(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(i=0,o=s.length;i<o;++i)r=e.getPixelForValue(s[i]),l();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)r=e.getPixelForTick(i),l();return n}function n1(t,e,s,n){const i=s.barThickness;let o,r;return ge(i)?(o=e.min*s.categoryPercentage,r=s.barPercentage):(o=i*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}function i1(t,e,s,n){const i=e.pixels,o=i[t];let r=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=s.categoryPercentage;r===null&&(r=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:s.barPercentage,start:c}}function o1(t,e,s,n){const i=s.parse(t[0],n),o=s.parse(t[1],n),r=Math.min(i,o),a=Math.max(i,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[s.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:r,max:a}}function Hf(t,e,s,n){return Le(t)?o1(t,e,s,n):e[s.axis]=s.parse(t,n),e}function kd(t,e,s,n){const i=t.iScale,o=t.vScale,r=i.getLabels(),a=i===o,l=[];let c,d,h,f;for(c=s,d=s+n;c<d;++c)f=e[c],h={},h[i.axis]=a||i.parse(r[c],c),l.push(Hf(f,h,o,c));return l}function na(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function r1(t,e,s){return t!==0?ns(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function a1(t){let e,s,n,i,o;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(i="end",o="start"):(i="start",o="end"),{start:s,end:n,reverse:e,top:i,bottom:o}}function l1(t,e,s,n){let i=e.borderSkipped;const o={};if(!i){t.borderSkipped=o;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:d}=a1(t);i==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?i=c:(s._bottom||0)===n?i=d:(o[Sd(d,r,a,l)]=!0,i=c)),o[Sd(i,r,a,l)]=!0,t.borderSkipped=o}function Sd(t,e,s,n){return n?(t=c1(t,e,s),t=Cd(t,s,e)):t=Cd(t,e,s),t}function c1(t,e,s){return t===e?s:t===s?e:t}function Cd(t,e,s){return t==="start"?e:t==="end"?s:t}function d1(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Io extends Vt{parsePrimitiveData(e,s,n,i){return kd(e,s,n,i)}parseArrayData(e,s,n,i){return kd(e,s,n,i)}parseObjectData(e,s,n,i){const{iScale:o,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,d=r.axis==="x"?a:l,h=[];let f,p,m,g;for(f=n,p=n+i;f<p;++f)g=s[f],m={},m[o.axis]=o.parse(zs(g,c),f),h.push(Hf(zs(g,d),m,r,f));return h}updateRangeFromParsed(e,s,n,i){super.updateRangeFromParsed(e,s,n,i);const o=n._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:i}=s,o=this.getParsed(e),r=o._custom,a=na(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,i){const o=i==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,i);for(let p=s;p<s+n;p++){const m=this.getParsed(p),g=o||ge(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),b=this._calculateBarIndexPixels(p,d),v=(m._stacks||{})[a.axis],k={horizontal:c,base:g.base,enableBorderRadius:!v||na(m._custom)||r===v._top||r===v._bottom,x:c?g.head:b.center,y:c?b.center:g.head,height:c?b.size:Math.abs(g.size),width:c?Math.abs(g.size):b.size};f&&(k.options=h||this.resolveDataElementOptions(p,e[p].active?"active":i));const C=k.options||e[p].options;l1(k,C,v,r),d1(k,C,d.ratio),this.updateElement(e[p],p,k,i)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[n.axis],c=d=>{const h=d._parsed.find(p=>p[n.axis]===l),f=h&&h[d.vScale.axis];if(ge(f)||isNaN(f))return!0};for(const d of i)if(!(s!==void 0&&c(d))&&((o===!1||r.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&r.push(d.stack),d.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,s,n){const i=this._getStacks(e,n),o=s!==void 0?i.indexOf(s):-1;return o===-1?i.length-1:o}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,i=[];let o,r;for(o=0,r=s.data.length;o<r;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const a=e.barThickness;return{min:a||s1(s),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:i},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(e),c=l._custom,d=na(c);let h=l[s.axis],f=0,p=n?this.applyStack(s,l,n):h,m,g;p!==h&&(f=p-h,p=h),d&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&ns(h)!==ns(c.barEnd)&&(f=0),f+=h);const b=!ge(o)&&!d?o:f;let v=s.getPixelForValue(b);if(this.chart.getDataVisibility(e)?m=s.getPixelForValue(f+p):m=v,g=m-v,Math.abs(g)<r){g=r1(g,s,a)*r,h===a&&(v-=g/2);const k=s.getPixelForDecimal(0),C=s.getPixelForDecimal(1),S=Math.min(k,C),M=Math.max(k,C);v=Math.max(Math.min(v,M),S),m=v+g,n&&!d&&(l._stacks[s.axis]._visualValues[i]=s.getValueForPixel(m)-s.getValueForPixel(v))}if(v===s.getPixelForValue(a)){const k=ns(g)*s.getLineWidthForValue(a)/2;v+=k,g-=k}return{size:g,base:v,head:m,center:m+g/2}}_calculateBarIndexPixels(e,s){const n=s.scale,i=this.options,o=i.skipNull,r=he(i.maxBarThickness,1/0);let a,l;if(s.grouped){const c=o?this._getStackCount(e):s.stackCount,d=i.barThickness==="flex"?i1(e,s,i,c):n1(e,s,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);a=d.start+d.chunk*h+d.chunk/2,l=Math.min(r,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,i=n.length;let o=0;for(;o<i;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}V(Io,"id","bar"),V(Io,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),V(Io,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ro extends Vt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,i){const o=super.parsePrimitiveData(e,s,n,i);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(e,s,n,i){const o=super.parseArrayData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=he(a[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(e,s,n,i){const o=super.parseObjectData(e,s,n,i);for(let r=0;r<o.length;r++){const a=s[n+r];o[r]._custom=he(a&&a.r&&+a.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(s,i),d=r.axis,h=a.axis;for(let f=s;f<s+n;f++){const p=e[f],m=!o&&this.getParsed(f),g={},b=g[d]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[d]),v=g[h]=o?a.getBasePixel():a.getPixelForValue(m[h]);g.skip=isNaN(b)||isNaN(v),c&&(g.options=l||this.resolveDataElementOptions(f,p.active?"active":i),o&&(g.options.radius=0)),this.updateElement(p,f,g,i)}}resolveDataElementOptions(e,s){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,s);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const o=i.radius;return s!=="active"&&(i.radius=0),i.radius+=he(n&&n._custom,o),i}}V(Ro,"id","bubble"),V(Ro,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),V(Ro,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function u1(t,e,s){let n=1,i=1,o=0,r=0;if(e<Fe){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(C,S,M)=>Hi(C,a,l,!0)?1:Math.max(S,S*s,M,M*s),m=(C,S,M)=>Hi(C,a,l,!0)?-1:Math.min(S,S*s,M,M*s),g=p(0,c,h),b=p(ze,d,f),v=m(je,c,h),k=m(je+ze,d,f);n=(g-v)/2,i=(b-k)/2,o=-(g+v)/2,r=-(b+k)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:r}}class rn extends Vt{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=l=>+n[l];if(ye(n[e])){const{key:l="value"}=this._parsing;o=c=>+zs(n[c],l)}let r,a;for(r=e,a=e+s;r<a;++r)i._parsed[r]=o(r)}}_getRotation(){return Ut(this.options.rotation-90)}_getCircumference(){return Ut(this.options.circumference)}_getRotationExtents(){let e=Fe,s=-Fe;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),r=i._getCircumference();e=Math.min(e,o),s=Math.max(s,o+r)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,i=this._cachedMeta,o=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(kv(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=u1(h,d,l),b=(n.width-r)/f,v=(n.height-r)/p,k=Math.max(Math.min(b,v)/2,0),C=bf(this.options.radius,k),S=Math.max(C*l,0),M=(C-S)/this._getVisibleDatasetWeightTotal();this.offsetX=m*C,this.offsetY=g*C,i.total=this.calculateTotal(),this.outerRadius=C-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){const n=this.options,i=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/Fe)}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,d=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(s,i);let v=this._getRotation(),k;for(k=0;k<s;++k)v+=this._circumference(k,o);for(k=s;k<s+n;++k){const C=this._circumference(k,o),S=e[k],M={x:d+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+C,circumference:C,outerRadius:m,innerRadius:p};b&&(M.options=g||this.resolveDataElementOptions(k,S.active?"active":i)),v+=C,this.updateElement(S,k,M,i)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,i;for(i=0;i<s.length;i++){const o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!s[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Fe*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=so(s._parsed[e],n.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let s=0;const n=this.chart;let i,o,r,a,l;if(!e){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),e=r.data,a=r.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(s=Math.max(s,l.borderWidth||0,l.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,i=e.length;n<i;++n){const o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(he(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}V(rn,"id","doughnut"),V(rn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),V(rn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),V(rn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}});class Lo extends Vt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=s,r=this.chart._animationsDisabled;let{start:a,count:l}=Cf(s,i,r);this._drawStart=a,this._drawCount=l,Mf(s)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(s,i),f=r.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,b=Vn(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||i==="none",k=s+n,C=e.length;let S=s>0&&this.getParsed(s-1);for(let M=0;M<C;++M){const N=e[M],L=v?N:{};if(M<s||M>=k){L.skip=!0;continue}const B=this.getParsed(M),X=ge(B[p]),ie=L[f]=r.getPixelForValue(B[f],M),re=L[p]=o||X?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[p],M);L.skip=isNaN(ie)||isNaN(re)||X,L.stop=M>0&&Math.abs(B[f]-S[f])>b,g&&(L.parsed=B,L.raw=c.data[M]),h&&(L.options=d||this.resolveDataElementOptions(M,N.active?"active":i)),v||this.updateElement(N,M,L,i),S=B}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}V(Lo,"id","line"),V(Lo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),V(Lo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ei extends Vt{constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=so(s._parsed[e].r,n.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,s,n,i){return Rf.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){const e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){const e=this.chart,s=e.chartArea,n=e.options,i=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(i/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),a=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,s,n,i){const o=i==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*je;let p=f,m;const g=360/this.countVisibleElements();for(m=0;m<s;++m)p+=this._computeAngle(m,i,g);for(m=s;m<s+n;m++){const b=e[m];let v=p,k=p+this._computeAngle(m,i,g),C=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=k,o&&(l.animateScale&&(C=0),l.animateRotate&&(v=k=f));const S={x:d,y:h,innerRadius:0,outerRadius:C,startAngle:v,endAngle:k,options:this.resolveDataElementOptions(m,b.active?"active":i)};this.updateElement(b,m,S,i)}}countVisibleElements(){const e=this._cachedMeta;let s=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?Ut(this.resolveDataElementOptions(e,s).angle||n):0}}V(Ei,"id","polarArea"),V(Ei,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),V(Ei,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return s.labels.map((o,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class La extends rn{}V(La,"id","pie"),V(La,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Fo extends Vt{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,i){return Rf.bind(this)(e,s,n,i)}update(e){const s=this._cachedMeta,n=s.dataset,i=s.data||[],o=s.iScale.getLabels();if(n.points=i,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===i.length,options:r};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,s,n,i){const o=this._cachedMeta.rScale,r=i==="reset";for(let a=s;a<s+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=o.getPointPositionForValue(a,this.getParsed(a).r),h=r?o.xCenter:d.x,f=r?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}V(Fo,"id","radar"),V(Fo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),V(Fo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class jo extends Vt{getLabelAndValue(e){const s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=s,r=this.getParsed(e),a=i.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const s=this._cachedMeta,{data:n=[]}=s,i=this.chart._animationsDisabled;let{start:o,count:r}=Cf(s,n,i);if(this._drawStart=o,this._drawCount=r,Mf(s)&&(o=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=s;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,i){const o=i==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(s,i),h=this.getSharedOptions(d),f=this.includeOptions(i,h),p=r.axis,m=a.axis,{spanGaps:g,segment:b}=this.options,v=Vn(g)?g:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||i==="none";let C=s>0&&this.getParsed(s-1);for(let S=s;S<s+n;++S){const M=e[S],N=this.getParsed(S),L=k?M:{},B=ge(N[m]),X=L[p]=r.getPixelForValue(N[p],S),ie=L[m]=o||B?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],S);L.skip=isNaN(X)||isNaN(ie)||B,L.stop=S>0&&Math.abs(N[p]-C[p])>v,b&&(L.parsed=N,L.raw=c.data[S]),f&&(L.options=h||this.resolveDataElementOptions(S,M.active?"active":i)),k||this.updateElement(M,S,L,i),C=N}this.updateSharedOptions(h,i,d)}getMaxOverflow(){const e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let a=0;for(let l=s.length-1;l>=0;--l)a=Math.max(a,s[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}}V(jo,"id","scatter"),V(jo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),V(jo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var h1=Object.freeze({__proto__:null,BarController:Io,BubbleController:Ro,DoughnutController:rn,LineController:Lo,PieController:La,PolarAreaController:Ei,RadarController:Fo,ScatterController:jo});function Qs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ll{constructor(e){V(this,"options");this.options=e||{}}static override(e){Object.assign(Ll.prototype,e)}init(){}formats(){return Qs()}parse(){return Qs()}format(){return Qs()}add(){return Qs()}diff(){return Qs()}startOf(){return Qs()}endOf(){return Qs()}}var f1={_date:Ll};function p1(t,e,s,n){const{controller:i,data:o,_sorted:r}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&o.length){const c=a._reversePixels?Fv:bs;if(n){if(i._sharedOptions){const d=o[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=c(o,e,s-h),p=c(o,e,s+h);return{lo:f.lo,hi:p.hi}}}}else{const d=c(o,e,s);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(g=>!ge(g[h.axis]));d.lo-=Math.max(0,p);const m=f.slice(d.hi).findIndex(g=>!ge(g[h.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:o.length-1}}function no(t,e,s,n,i){const o=t.getSortedVisibleDatasetMetas(),r=s[e];for(let a=0,l=o.length;a<l;++a){const{index:c,data:d}=o[a],{lo:h,hi:f}=p1(o[a],e,r,i);for(let p=h;p<=f;++p){const m=d[p];m.skip||n(m,c,p)}}}function m1(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,i){const o=e?Math.abs(n.x-i.x):0,r=s?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ia(t,e,s,n,i){const o=[];return!i&&!t.isPointInArea(e)||no(t,s,e,function(a,l,c){!i&&!ys(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function g1(t,e,s,n){let i=[];function o(r,a,l){const{startAngle:c,endAngle:d}=r.getProps(["startAngle","endAngle"],n),{angle:h}=_f(r,{x:e.x,y:e.y});Hi(h,c,d)&&i.push({element:r,datasetIndex:a,index:l})}return no(t,s,e,o),i}function b1(t,e,s,n,i,o){let r=[];const a=m1(s);let l=Number.POSITIVE_INFINITY;function c(d,h,f){const p=d.inRange(e.x,e.y,i);if(n&&!p)return;const m=d.getCenterPoint(i);if(!(!!o||t.isPointInArea(m))&&!p)return;const b=a(e,m);b<l?(r=[{element:d,datasetIndex:h,index:f}],l=b):b===l&&r.push({element:d,datasetIndex:h,index:f})}return no(t,s,e,c),r}function oa(t,e,s,n,i,o){return!o&&!t.isPointInArea(e)?[]:s==="r"&&!n?g1(t,e,s,i):b1(t,e,s,n,i,o)}function Md(t,e,s,n,i){const o=[],r=s==="x"?"inXRange":"inYRange";let a=!1;return no(t,s,e,(l,c,d)=>{l[r]&&l[r](e[s],i)&&(o.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),n&&!a?[]:o}var y1={evaluateInteractionItems:no,modes:{index(t,e,s,n){const i=sn(e,t),o=s.axis||"x",r=s.includeInvisible||!1,a=s.intersect?ia(t,i,o,n,r):oa(t,i,o,!1,n,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,s,n){const i=sn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;let a=s.intersect?ia(t,i,o,n,r):oa(t,i,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,s,n){const i=sn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return ia(t,i,o,n,r)},nearest(t,e,s,n){const i=sn(e,t),o=s.axis||"xy",r=s.includeInvisible||!1;return oa(t,i,o,s.intersect,n,r)},x(t,e,s,n){const i=sn(e,t);return Md(t,i,"x",s.intersect,n)},y(t,e,s,n){const i=sn(e,t);return Md(t,i,"y",s.intersect,n)}}};const Wf=["left","top","right","bottom"];function ni(t,e){return t.filter(s=>s.pos===e)}function Ad(t,e){return t.filter(s=>Wf.indexOf(s.pos)===-1&&s.box.axis===e)}function ii(t,e){return t.sort((s,n)=>{const i=e?n:s,o=e?s:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function x1(t){const e=[];let s,n,i,o,r,a;for(s=0,n=(t||[]).length;s<n;++s)i=t[s],{position:o,options:{stack:r,stackWeight:a=1}}=i,e.push({index:s,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&o+r,stackWeight:a});return e}function _1(t){const e={};for(const s of t){const{stack:n,pos:i,stackWeight:o}=s;if(!n||!Wf.includes(i))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function v1(t,e){const s=_1(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:l}=a.box,c=s[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*n:l&&e.availableWidth,a.height=i):(a.width=n,a.height=d?d*i:l&&e.availableHeight)}return s}function w1(t){const e=x1(t),s=ii(e.filter(c=>c.box.fullSize),!0),n=ii(ni(e,"left"),!0),i=ii(ni(e,"right")),o=ii(ni(e,"top"),!0),r=ii(ni(e,"bottom")),a=Ad(e,"x"),l=Ad(e,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(r).concat(a),chartArea:ni(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(r).concat(a)}}function Pd(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function qf(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function k1(t,e,s,n){const{pos:i,box:o}=s,r=t.maxPadding;if(!ye(i)){s.size&&(t[i]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?o.height:o.width),s.size=h.size/h.count,t[i]+=s.size}o.getPadding&&qf(r,o.getPadding());const a=Math.max(0,e.outerWidth-Pd(r,t,"left","right")),l=Math.max(0,e.outerHeight-Pd(r,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,s.horizontal?{same:c,other:d}:{same:d,other:c}}function S1(t){const e=t.maxPadding;function s(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function C1(t,e){const s=e.maxPadding;function n(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{o[r]=Math.max(e[r],s[r])}),o}return n(t?["left","right"]:["top","bottom"])}function ui(t,e,s,n){const i=[];let o,r,a,l,c,d;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,C1(a.horizontal,e));const{same:h,other:f}=k1(e,s,a,n);c|=h&&i.length,d=d||f,l.fullSize||i.push(a)}return c&&ui(i,e,s,n)||d}function xo(t,e,s,n,i){t.top=s,t.left=e,t.right=e+n,t.bottom=s+i,t.width=n,t.height=i}function Ed(t,e,s,n){const i=s.padding;let{x:o,y:r}=e;for(const a of t){const l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*d,f=c.size||l.height;zi(c.start)&&(r=c.start),l.fullSize?xo(l,i.left,r,s.outerWidth-i.right-i.left,f):xo(l,e.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*d,f=c.size||l.width;zi(c.start)&&(o=c.start),l.fullSize?xo(l,o,i.top,f,s.outerHeight-i.bottom-i.top):xo(l,o,e.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}e.x=o,e.y=r}var rt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const i=lt(t.options.layout.padding),o=Math.max(e-i.width,0),r=Math.max(s-i.height,0),a=w1(t.boxes),l=a.vertical,c=a.horizontal;Me(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:i,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/d,hBoxMaxHeight:r/2}),f=Object.assign({},i);qf(f,lt(n));const p=Object.assign({maxPadding:f,w:o,h:r,x:i.left,y:i.top},i),m=v1(l.concat(c),h);ui(a.fullSize,p,h,m),ui(l,p,h,m),ui(c,p,h,m)&&ui(l,p,h,m),S1(p),Ed(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Ed(a.rightAndBottom,p,h,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Me(a.chartArea,g=>{const b=g.box;Object.assign(b,t.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Kf{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,i){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,i?Math.floor(s/i):n)}}isAttached(e){return!0}updateConfig(e){}}class M1 extends Kf{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const No="$chartjs",A1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Td=t=>t===null||t==="";function P1(t,e){const s=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[No]={initial:{height:n,width:i,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Td(i)){const o=fd(t,"width");o!==void 0&&(t.width=o)}if(Td(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=fd(t,"height");o!==void 0&&(t.height=o)}return t}const Gf=Ew?{passive:!0}:!1;function E1(t,e,s){t&&t.addEventListener(e,s,Gf)}function T1(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Gf)}function O1(t,e){const s=A1[t.type]||t.type,{x:n,y:i}=sn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function or(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function D1(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||or(a.addedNodes,n),r=r&&!or(a.removedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}function I1(t,e,s){const n=t.canvas,i=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||or(a.removedNodes,n),r=r&&!or(a.addedNodes,n);r&&s()});return i.observe(document,{childList:!0,subtree:!0}),i}const qi=new Map;let Od=0;function Yf(){const t=window.devicePixelRatio;t!==Od&&(Od=t,qi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function R1(t,e){qi.size||window.addEventListener("resize",Yf),qi.set(t,e)}function L1(t){qi.delete(t),qi.size||window.removeEventListener("resize",Yf)}function F1(t,e,s){const n=t.canvas,i=n&&Rl(n);if(!i)return;const o=Sf((a,l)=>{const c=i.clientWidth;s(a,l),c<i.clientWidth&&s()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return r.observe(i),R1(t,o),r}function ra(t,e,s){s&&s.disconnect(),e==="resize"&&L1(t)}function j1(t,e,s){const n=t.canvas,i=Sf(o=>{t.ctx!==null&&s(O1(o,t))},t);return E1(n,e,i),i}class N1 extends Kf{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(P1(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[No])return!1;const n=s[No].initial;["height","width"].forEach(o=>{const r=n[o];ge(r)?s.removeAttribute(o):s.setAttribute(o,r)});const i=n.style||{};return Object.keys(i).forEach(o=>{s.style[o]=i[o]}),s.width=s.width,delete s[No],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const i=e.$proxies||(e.$proxies={}),r={attach:D1,detach:I1,resize:F1}[s]||j1;i[s]=r(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),i=n[s];if(!i)return;({attach:ra,detach:ra,resize:ra}[s]||T1)(e,s,i),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,i){return Pw(e,s,n,i)}isAttached(e){const s=e&&Rl(e);return!!(s&&s.isConnected)}}function U1(t){return!Il()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?M1:N1}var Mo;let Ms=(Mo=class{constructor(){V(this,"x");V(this,"y");V(this,"active",!1);V(this,"options");V(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Vn(this.x)&&Vn(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const i={};return e.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}},V(Mo,"defaults",{}),V(Mo,"defaultRoutes"),Mo);function $1(t,e){const s=t.options.ticks,n=B1(t),i=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?z1(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>i)return H1(e,c,o,r/i),c;const d=V1(o,e,i);if(r>0){let h,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(_o(e,c,d,ge(p)?0:a-p,a),h=0,f=r-1;h<f;h++)_o(e,c,d,o[h],o[h+1]);return _o(e,c,d,l,ge(p)?e.length:l+p),c}return _o(e,c,d),c}function B1(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),i=t._maxLength/s;return Math.floor(Math.min(n,i))}function V1(t,e,s){const n=W1(t),i=e.length/s;if(!n)return Math.max(i,1);const o=Ov(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>i)return l}return Math.max(i,1)}function z1(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function H1(t,e,s,n){let i=0,o=s[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(e.push(t[r]),i++,o=s[i*n])}function _o(t,e,s,n,i){const o=he(n,0),r=Math.min(he(i,t.length),t.length);let a=0,l,c,d;for(s=Math.ceil(s),i&&(l=i-n,s=l/Math.floor(l/s)),d=o;d<0;)a++,d=Math.round(o+a*s);for(c=Math.max(o,0);c<r;c++)c===d&&(e.push(t[c]),a++,d=Math.round(o+a*s))}function W1(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const q1=t=>t==="left"?"right":t==="right"?"left":t,Dd=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Id=(t,e)=>Math.min(e||t,t);function Rd(t,e){const s=[],n=t.length/e,i=t.length;let o=0;for(;o<i;o+=n)s.push(t[Math.floor(o)]);return s}function K1(t,e,s){const n=t.ticks.length,i=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(s&&(n===1?c=Math.max(l-o,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<o-a||l>r+a)))return l}function G1(t,e){Me(t,s=>{const n=s.gc,i=n.length/2;let o;if(i>e){for(o=0;o<i;++o)delete s.data[n[o]];n.splice(0,i)}})}function oi(t){return t.drawTicks?t.tickLength:0}function Ld(t,e){if(!t.display)return 0;const s=Ke(t.font,e),n=lt(t.padding);return(Le(t.text)?t.text.length:1)*s.lineHeight+n.height}function Y1(t,e){return qs(t,{scale:e,type:"scale"})}function J1(t,e,s){return qs(t,{tick:s,index:e,type:"tick"})}function X1(t,e,s){let n=Al(t);return(s&&e!=="right"||!s&&e==="right")&&(n=q1(n)),n}function Q1(t,e,s,n){const{top:i,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let h=0,f,p,m;const g=r-i,b=a-o;if(t.isHorizontal()){if(p=st(n,o,a),ye(s)){const v=Object.keys(s)[0],k=s[v];m=d[v].getPixelForValue(k)+g-e}else s==="center"?m=(c.bottom+c.top)/2+g-e:m=Dd(t,s,e);f=a-o}else{if(ye(s)){const v=Object.keys(s)[0],k=s[v];p=d[v].getPixelForValue(k)-b+e}else s==="center"?p=(c.left+c.right)/2-b+e:p=Dd(t,s,e);m=st(n,r,i),h=s==="left"?-ze:ze}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class mn extends Ms{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:i}=this;return e=Ct(e,Number.POSITIVE_INFINITY),s=Ct(s,Number.NEGATIVE_INFINITY),n=Ct(n,Number.POSITIVE_INFINITY),i=Ct(i,Number.NEGATIVE_INFINITY),{min:Ct(e,n),max:Ct(s,i),minDefined:Be(e),maxDefined:Be(s)}}getMinMax(e){let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),r;if(i&&o)return{min:s,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),i||(s=Math.min(s,r.min)),o||(n=Math.max(n,r.max));return s=o&&s>n?n:s,n=i&&s>n?s:n,{min:Ct(s,Ct(n,s)),max:Ct(n,Ct(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ie(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:i,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=rw(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Rd(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=$1(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ie(this.options.afterUpdate,[this])}beforeSetDimensions(){Ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n],o.label=Ie(s.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Id(this.ticks.length,e.ticks.maxTicksLimit),i=s.minRotation||0,o=s.maxRotation;let r=i,a,l,c;if(!this._isVisible()||!s.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=Ye(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(e.offset?.5:1)),l=this.maxHeight-oi(e.grid)-s.padding-Ld(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=Cl(Math.min(Math.asin(Ye((d.highest.height+6)/a,-1,1)),Math.asin(Ye(l/c,-1,1))-Math.asin(Ye(f/c,-1,1)))),r=Math.max(i,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:i,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ld(i,s.options.font);if(a?(e.width=this.maxWidth,e.height=oi(o)+l):(e.height=this.maxHeight,e.width=oi(o)+l),n.display&&this.ticks.length){const{first:c,last:d,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Ut(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(a){const v=n.mirror?0:b*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=n.mirror?0:g*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(c,d,b,g)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,i){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=n*s.height):(f=n*e.height,p=i*s.width):o==="start"?p=s.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=s.width/2),this.paddingLeft=Math.max((f-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let d=s.height/2,h=e.height/2;o==="start"?(d=0,h=e.height):o==="end"&&(d=s.height,h=0),this.paddingTop=d+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ge(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Rd(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:i,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(s/Id(s,n));let c=0,d=0,h,f,p,m,g,b,v,k,C,S,M;for(h=0;h<s;h+=l){if(m=e[h].label,g=this._resolveTickFontOptions(h),i.font=b=g.string,v=o[b]=o[b]||{data:{},gc:[]},k=g.lineHeight,C=S=0,!ge(m)&&!Le(m))C=nr(i,v.data,v.gc,C,m),S=k;else if(Le(m))for(f=0,p=m.length;f<p;++f)M=m[f],!ge(M)&&!Le(M)&&(C=nr(i,v.data,v.gc,C,M),S+=k);r.push(C),a.push(S),c=Math.max(C,c),d=Math.max(S,d)}G1(o,s);const N=r.indexOf(c),L=a.indexOf(d),B=X=>({width:r[X]||0,height:a[X]||0});return{first:B(0),last:B(s-1),widest:B(N),highest:B(L),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return Lv(this._alignToPixels?Xs(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=J1(this.getContext(),e,n))}return this.$context||(this.$context=Y1(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Ut(this.labelRotation),n=Math.abs(Math.cos(s)),i=Math.abs(Math.sin(s)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,i=this.options,{grid:o,position:r,border:a}=i,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=oi(o),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,v=function(le){return Xs(n,le,g)};let k,C,S,M,N,L,B,X,ie,re,de,Ae;if(r==="top")k=v(this.bottom),L=this.bottom-f,X=k-b,re=v(e.top)+b,Ae=e.bottom;else if(r==="bottom")k=v(this.top),re=e.top,Ae=v(e.bottom)-b,L=k+b,X=this.top+f;else if(r==="left")k=v(this.right),N=this.right-f,B=k-b,ie=v(e.left)+b,de=e.right;else if(r==="right")k=v(this.left),ie=e.left,de=v(e.right)-b,N=k+b,B=this.left+f;else if(s==="x"){if(r==="center")k=v((e.top+e.bottom)/2+.5);else if(ye(r)){const le=Object.keys(r)[0],oe=r[le];k=v(this.chart.scales[le].getPixelForValue(oe))}re=e.top,Ae=e.bottom,L=k+b,X=L+f}else if(s==="y"){if(r==="center")k=v((e.left+e.right)/2);else if(ye(r)){const le=Object.keys(r)[0],oe=r[le];k=v(this.chart.scales[le].getPixelForValue(oe))}N=k-b,B=N-f,ie=e.left,de=e.right}const qe=he(i.ticks.maxTicksLimit,h),xe=Math.max(1,Math.ceil(h/qe));for(C=0;C<h;C+=xe){const le=this.getContext(C),oe=o.setContext(le),ue=a.setContext(le),Ee=oe.lineWidth,ct=oe.color,dt=ue.dash||[],Ve=ue.dashOffset,Tt=oe.tickWidth,pt=oe.tickColor,Gt=oe.tickBorderDash||[],He=oe.tickBorderDashOffset;S=K1(this,C,l),S!==void 0&&(M=Xs(n,S,Ee),c?N=B=ie=de=M:L=X=re=Ae=M,p.push({tx1:N,ty1:L,tx2:B,ty2:X,x1:ie,y1:re,x2:de,y2:Ae,width:Ee,color:ct,borderDash:dt,borderDashOffset:Ve,tickWidth:Tt,tickColor:pt,tickBorderDash:Gt,tickBorderDashOffset:He}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){const s=this.axis,n=this.options,{position:i,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,f=oi(n.grid),p=f+d,m=h?-d:p,g=-Ut(this.labelRotation),b=[];let v,k,C,S,M,N,L,B,X,ie,re,de,Ae="middle";if(i==="top")N=this.bottom-m,L=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+m,L=this._getXAxisLabelAlignment();else if(i==="left"){const xe=this._getYAxisLabelAlignment(f);L=xe.textAlign,M=xe.x}else if(i==="right"){const xe=this._getYAxisLabelAlignment(f);L=xe.textAlign,M=xe.x}else if(s==="x"){if(i==="center")N=(e.top+e.bottom)/2+p;else if(ye(i)){const xe=Object.keys(i)[0],le=i[xe];N=this.chart.scales[xe].getPixelForValue(le)+p}L=this._getXAxisLabelAlignment()}else if(s==="y"){if(i==="center")M=(e.left+e.right)/2-p;else if(ye(i)){const xe=Object.keys(i)[0],le=i[xe];M=this.chart.scales[xe].getPixelForValue(le)}L=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?Ae="top":l==="end"&&(Ae="bottom"));const qe=this._getLabelSizes();for(v=0,k=a.length;v<k;++v){C=a[v],S=C.label;const xe=o.setContext(this.getContext(v));B=this.getPixelForTick(v)+o.labelOffset,X=this._resolveTickFontOptions(v),ie=X.lineHeight,re=Le(S)?S.length:1;const le=re/2,oe=xe.color,ue=xe.textStrokeColor,Ee=xe.textStrokeWidth;let ct=L;r?(M=B,L==="inner"&&(v===k-1?ct=this.options.reverse?"left":"right":v===0?ct=this.options.reverse?"right":"left":ct="center"),i==="top"?c==="near"||g!==0?de=-re*ie+ie/2:c==="center"?de=-qe.highest.height/2-le*ie+ie:de=-qe.highest.height+ie/2:c==="near"||g!==0?de=ie/2:c==="center"?de=qe.highest.height/2-le*ie:de=qe.highest.height-re*ie,h&&(de*=-1),g!==0&&!xe.showLabelBackdrop&&(M+=ie/2*Math.sin(g))):(N=B,de=(1-re)*ie/2);let dt;if(xe.showLabelBackdrop){const Ve=lt(xe.backdropPadding),Tt=qe.heights[v],pt=qe.widths[v];let Gt=de-Ve.top,He=0-Ve.left;switch(Ae){case"middle":Gt-=Tt/2;break;case"bottom":Gt-=Tt;break}switch(L){case"center":He-=pt/2;break;case"right":He-=pt;break;case"inner":v===k-1?He-=pt:v>0&&(He-=pt/2);break}dt={left:He,top:Gt,width:pt+Ve.width,height:Tt+Ve.height,color:xe.backdropColor}}b.push({label:S,font:X,textOffset:de,options:{rotation:g,color:oe,strokeColor:ue,strokeWidth:Ee,textAlign:ct,textBaseline:Ae,translation:[M,N],backdrop:dt}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Ut(this.labelRotation))return e==="top"?"left":"right";let i="center";return s.align==="start"?i="left":s.align==="end"?i="right":s.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width;let c,d;return s==="left"?i?(d=this.right+o,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d=this.left)):s==="right"?i?(d=this.left+o,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:i,width:o,height:r}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,i,o,r),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?s.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const a=(l,c,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(s.display)for(o=0,r=i.length;o<r;++o){const l=i[o];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,h,f;this.isHorizontal()?(c=Xs(e,this.left,r)-r/2,d=Xs(e,this.right,a)+a/2,h=f=l):(h=Xs(e,this.top,r)-r/2,f=Xs(e,this.bottom,a)+a/2,c=d=l),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(c,h),s.lineTo(d,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Pr(n,i);const o=this.getLabelItems(e);for(const r of o){const a=r.options,l=r.font,c=r.label,d=r.textOffset;hn(n,c,0,d,l,a)}i&&Er(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:i}}=this;if(!n.display)return;const o=Ke(n.font),r=lt(n.padding),a=n.align;let l=o.lineHeight/2;s==="bottom"||s==="center"||ye(s)?(l+=r.bottom,Le(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:d,maxWidth:h,rotation:f}=Q1(this,l,s,a);hn(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:X1(a,s,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=he(e.grid&&e.grid.z,-1),i=he(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==mn.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let o,r;for(o=0,r=s.length;o<r;++o){const a=s[o];a[n]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ke(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;tk(s)&&(n=this.register(s));const i=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,Z1(e,r,n),this.override&&Ue.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,i=this.scope;n in s&&delete s[n],i&&n in Ue[i]&&(delete Ue[i][n],this.override&&delete un[n])}}function Z1(t,e,s){const n=Vi(Object.create(null),[s?Ue.get(s):{},Ue.get(e),t.defaults]);Ue.set(e,n),t.defaultRoutes&&ek(e,t.defaultRoutes),t.descriptors&&Ue.describe(e,t.descriptors)}function ek(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),i=n.pop(),o=[t].concat(n).join("."),r=e[s].split("."),a=r.pop(),l=r.join(".");Ue.route(o,i,l,a)})}function tk(t){return"id"in t&&"defaults"in t}class sk{constructor(){this.controllers=new vo(Vt,"datasets",!0),this.elements=new vo(Ms,"elements"),this.plugins=new vo(Object,"plugins"),this.scales=new vo(mn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(i=>{const o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Me(i,r=>{const a=n||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,s,n){const i=Sl(e);Ie(n["before"+i],[],n),s[e](n),Ie(n["after"+i],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const i=s.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var es=new sk;class nk{constructor(){this._init=[]}notify(e,s,n,i){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),r=this._notify(o,e,s,n);return s==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,s,n,i){i=i||{};for(const o of e){const r=o.plugin,a=r[n],l=[s,i,o.options];if(Ie(a,l,r)===!1&&i.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,i=he(n.options&&n.options.plugins,{}),o=ik(n);return i===!1&&!s?[]:rk(e,o,i,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,i=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(i(s,n),e,"stop"),this._notify(i(n,s),e,"start")}}function ik(t){const e={},s=[],n=Object.keys(es.plugins.items);for(let o=0;o<n.length;o++)s.push(es.getPlugin(n[o]));const i=t.plugins||[];for(let o=0;o<i.length;o++){const r=i[o];s.indexOf(r)===-1&&(s.push(r),e[r.id]=!0)}return{plugins:s,localIds:e}}function ok(t,e){return!e&&t===!1?null:t===!0?{}:t}function rk(t,{plugins:e,localIds:s},n,i){const o=[],r=t.getContext();for(const a of e){const l=a.id,c=ok(n[l],i);c!==null&&o.push({plugin:a,options:ak(t.config,{plugin:a,local:s[l]},c,r)})}return o}function ak(t,{plugin:e,local:s},n,i){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return s&&e.defaults&&r.push(e.defaults),t.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fa(t,e){const s=Ue.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function lk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function ck(t,e){return t===e?"_index_":"_value_"}function Fd(t){if(t==="x"||t==="y"||t==="r")return t}function dk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ja(t,...e){if(Fd(t))return t;for(const s of e){const n=s.axis||dk(s.position)||t.length>1&&Fd(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function jd(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function uk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return jd(t,"x",s[0])||jd(t,"y",s[0])}return{}}function hk(t,e){const s=un[t.type]||{scales:{}},n=e.scales||{},i=Fa(t.type,e),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!ye(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=ja(r,a,uk(r,t),Ue.scales[a.type]),c=ck(l,i),d=s.scales||{};o[r]=Ci(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||Fa(a,e),d=(un[a]||{}).scales||{};Object.keys(d).forEach(h=>{const f=lk(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Ci(o[p],[{axis:f},n[p],d[h]])})}),Object.keys(o).forEach(r=>{const a=o[r];Ci(a,[Ue.scales[a.type],Ue.scale])}),o}function Jf(t){const e=t.options||(t.options={});e.plugins=he(e.plugins,{}),e.scales=hk(t,e)}function Xf(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fk(t){return t=t||{},t.data=Xf(t.data),Jf(t),t}const Nd=new Map,Qf=new Set;function wo(t,e){let s=Nd.get(t);return s||(s=e(),Nd.set(t,s),Qf.add(s)),s}const ri=(t,e,s)=>{const n=zs(e,s);n!==void 0&&t.add(n)};class pk{constructor(e){this._config=fk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Xf(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Jf(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return wo(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return wo(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return wo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let i=n.get(e);return(!i||s)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,s,n){const{options:i,type:o}=this,r=this._cachedScopes(e,n),a=r.get(s);if(a)return a;const l=new Set;s.forEach(d=>{e&&(l.add(e),d.forEach(h=>ri(l,e,h))),d.forEach(h=>ri(l,i,h)),d.forEach(h=>ri(l,un[o]||{},h)),d.forEach(h=>ri(l,Ue,h)),d.forEach(h=>ri(l,Ia,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Qf.has(s)&&r.set(s,c),c}chartOptionScopes(){const{options:e,type:s}=this;return[e,un[s]||{},Ue.datasets[s]||{},{type:s},Ue,Ia]}resolveNamedOptions(e,s,n,i=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ud(this._resolverCache,e,i);let l=r;if(gk(r,s)){o.$shared=!1,n=Hs(n)?n():n;const c=this.createResolver(e,n,a);l=zn(r,n,c)}for(const c of s)o[c]=l[c];return o}createResolver(e,s,n=[""],i){const{resolver:o}=Ud(this._resolverCache,e,n);return ye(s)?zn(o,s,void 0,i):o}}function Ud(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=s.join();let o=n.get(i);return o||(o={resolver:Tl(e,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}const mk=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>Hs(t[e]));function gk(t,e){const{isScriptable:s,isIndexable:n}=Tf(t);for(const i of e){const o=s(i),r=n(i),a=(r||o)&&t[i];if(o&&(Hs(a)||mk(a))||r&&Le(a))return!0}return!1}var bk="4.4.9";const yk=["top","bottom","left","right","chartArea"];function $d(t,e){return t==="top"||t==="bottom"||yk.indexOf(t)===-1&&e==="x"}function Bd(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function Vd(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ie(s&&s.onComplete,[t],e)}function xk(t){const e=t.chart,s=e.options.animation;Ie(s&&s.onProgress,[t],e)}function Zf(t){return Il()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Uo={},zd=t=>{const e=Zf(t);return Object.values(Uo).filter(s=>s.canvas===e).pop()};function _k(t,e,s){const n=Object.keys(t);for(const i of n){const o=+i;if(o>=e){const r=t[i];delete t[i],(s>0||o>e)&&(t[o+s]=r)}}}function vk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}class ss{static register(...e){es.add(...e),Hd()}static unregister(...e){es.remove(...e),Hd()}constructor(e,s){const n=this.config=new pk(s),i=Zf(e),o=zd(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||U1(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=wv(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Uv(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Uo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}cs.listen(this,"complete",Vd),cs.listen(this,"progress",xk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:i,_aspectRatio:o}=this;return ge(e)?s&&o?o:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cd(this.canvas,this.ctx),this}stop(){return cs.stop(this),this}resize(e,s){cs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,e,s,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,hd(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Ie(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Me(s,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,i=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];s&&(o=o.concat(Object.keys(s).map(r=>{const a=s[r],l=ja(r,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Me(o,r=>{const a=r.options,l=a.id,c=ja(l,a),d=he(a.type,r.dtype);(a.position===void 0||$d(a.position,c)!==$d(r.dposition))&&(a.position=r.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===d)h=n[l];else{const f=es.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),Me(i,(r,a)=>{r||delete n[a]}),Me(n,r=>{rt.configure(this,r,r.options),rt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((i,o)=>i.index-o.index),n>s){for(let i=s;i<n;++i)this._destroyDatasetMeta(i);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Bd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,i)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=s.length;n<i;n++){const o=s[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Fa(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=es.getController(a),{datasetElementType:c,dataElementType:d}=Ue.datasets[a];Object.assign(l,{dataElementType:es.getElement(d),datasetElementType:c&&es.getElement(c)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Me(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Me(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Bd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Me(this.scales,e=>{rt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!ed(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:o}of s){const r=n==="_removeElements"?-o:o;_k(e,i,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(e.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),i=n(0);for(let o=1;o<s;o++)if(!ed(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rt.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Me(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Hs(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(s),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cs.has(this)?this.attached&&!cs.running(this)&&cs.start(this):(this.draw(),Vd({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let i,o;for(i=0,o=s.length;i<o;++i){const r=s[i];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Bf(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Pr(s,i),e.controller.draw(),i&&Er(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ys(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,i){const o=y1.modes[s];return typeof o=="function"?o(this,e,n,i):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let i=n.filter(o=>o&&o._dataset===s).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=qs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const i=n?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,i);zi(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),cs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),cd(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Uo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(o,r)=>{s.addEventListener(this,o,r),e[o]=r},i=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};Me(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(s.removeEventListener(this,l,c),delete e[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},s.isAttached(this.canvas)?a():r()}unbindEvents(){Me(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Me(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const i=n?"set":"remove";let o,r,a,l;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!er(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const i=this.options.hover,o=(l,c)=>l.filter(d=>!c.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),r=o(s,e),a=n?e:o(e,s);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},i=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:i=[],options:o}=this,r=s,a=this._getActiveElements(e,i,n,r),l=Pv(e),c=vk(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Ie(o.onHover,[e,a,this],this),l&&Ie(o.onClick,[e,a,this],this));const d=!er(a,i);return(d||s)&&(this._active=a,this._updateHoverStyles(a,i,s)),this._lastEvent=c,d}_getActiveElements(e,s,n,i){if(e.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}}V(ss,"defaults",Ue),V(ss,"instances",Uo),V(ss,"overrides",un),V(ss,"registry",es),V(ss,"version",bk),V(ss,"getChart",zd);function Hd(){return Me(ss.instances,t=>t._plugins.invalidate())}function wk(t,e,s){const{startAngle:n,pixelMargin:i,x:o,y:r,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,r,a,n-c,s+c),l>i?(c=i/l,t.arc(o,r,l,s+c,n-c,!0)):t.arc(o,r,i,s+ze,n-ze),t.closePath(),t.clip()}function kk(t){return El(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Sk(t,e,s,n){const i=kk(t.options.borderRadius),o=(s-e)/2,r=Math.min(o,n*e/2),a=l=>{const c=(s-Math.min(o,l))*n/2;return Ye(l,0,Math.min(o,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ye(i.innerStart,0,r),innerEnd:Ye(i.innerEnd,0,r)}}function vn(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function rr(t,e,s,n,i,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,h=Math.max(e.outerRadius+n+s-c,0),f=d>0?d+n+s+c:0;let p=0;const m=i-l;if(n){const xe=d>0?d-n:0,le=h>0?h-n:0,oe=(xe+le)/2,ue=oe!==0?m*oe/(oe+n):m;p=(m-ue)/2}const g=Math.max(.001,m*h-s/je)/h,b=(m-g)/2,v=l+b+p,k=i-b-p,{outerStart:C,outerEnd:S,innerStart:M,innerEnd:N}=Sk(e,f,h,k-v),L=h-C,B=h-S,X=v+C/L,ie=k-S/B,re=f+M,de=f+N,Ae=v+M/re,qe=k-N/de;if(t.beginPath(),o){const xe=(X+ie)/2;if(t.arc(r,a,h,X,xe),t.arc(r,a,h,xe,ie),S>0){const Ee=vn(B,ie,r,a);t.arc(Ee.x,Ee.y,S,ie,k+ze)}const le=vn(de,k,r,a);if(t.lineTo(le.x,le.y),N>0){const Ee=vn(de,qe,r,a);t.arc(Ee.x,Ee.y,N,k+ze,qe+Math.PI)}const oe=(k-N/f+(v+M/f))/2;if(t.arc(r,a,f,k-N/f,oe,!0),t.arc(r,a,f,oe,v+M/f,!0),M>0){const Ee=vn(re,Ae,r,a);t.arc(Ee.x,Ee.y,M,Ae+Math.PI,v-ze)}const ue=vn(L,v,r,a);if(t.lineTo(ue.x,ue.y),C>0){const Ee=vn(L,X,r,a);t.arc(Ee.x,Ee.y,C,v-ze,X)}}else{t.moveTo(r,a);const xe=Math.cos(X)*h+r,le=Math.sin(X)*h+a;t.lineTo(xe,le);const oe=Math.cos(ie)*h+r,ue=Math.sin(ie)*h+a;t.lineTo(oe,ue)}t.closePath()}function Ck(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a}=e;let l=e.endAngle;if(o){rr(t,e,s,n,l,i);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%Fe||Fe))}return rr(t,e,s,n,l,i),t.fill(),l}function Mk(t,e,s,n,i){const{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let m=e.endAngle;if(o){rr(t,e,s,n,m,i);for(let g=0;g<o;++g)t.stroke();isNaN(a)||(m=r+(a%Fe||Fe))}p&&wk(t,e,m),o||(rr(t,e,s,n,m,i),t.stroke())}class hi extends Ms{constructor(s){super();V(this,"circumference");V(this,"endAngle");V(this,"fullCircles");V(this,"innerRadius");V(this,"outerRadius");V(this,"pixelMargin");V(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.getProps(["x","y"],i),{angle:r,distance:a}=_f(o,{x:s,y:n}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=he(f,c-l),g=Hi(r,l,c)&&l!==c,b=m>=Fe||g,v=gs(a,d+p,h+p);return b&&v}getCenterPoint(s){const{x:n,y:i,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:c,spacing:d}=this.options,h=(o+r)/2,f=(a+l+d+c)/2;return{x:n+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:n,circumference:i}=this,o=(n.offset||0)/4,r=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Fe?Math.floor(i/Fe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const l=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(je,i||0)),d=o*c;s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,Ck(s,this,d,r,a),Mk(s,this,d,r,a),s.restore()}}V(hi,"id","arc"),V(hi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),V(hi,"defaultRoutes",{backgroundColor:"backgroundColor"}),V(hi,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function ep(t,e,s=e){t.lineCap=he(s.borderCapStyle,e.borderCapStyle),t.setLineDash(he(s.borderDash,e.borderDash)),t.lineDashOffset=he(s.borderDashOffset,e.borderDashOffset),t.lineJoin=he(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=he(s.borderWidth,e.borderWidth),t.strokeStyle=he(s.borderColor,e.borderColor)}function Ak(t,e,s){t.lineTo(s.x,s.y)}function Pk(t){return t.stepped?Xv:t.tension||t.cubicInterpolationMode==="monotone"?Qv:Ak}function tp(t,e,s={}){const n=t.length,{start:i=0,end:o=n-1}=s,{start:r,end:a}=e,l=Math.max(i,r),c=Math.min(o,a),d=i<r&&o<r||i>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!d?n+c-l:c-l}}function Ek(t,e,s,n){const{points:i,options:o}=e,{count:r,start:a,loop:l,ilen:c}=tp(i,s,n),d=Pk(o);let{move:h=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=i[(a+(f?c-p:p))%r],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):d(t,g,m,f,o.stepped),g=m);return l&&(m=i[(a+(f?c:0))%r],d(t,g,m,f,o.stepped)),!!l}function Tk(t,e,s,n){const i=e.points,{count:o,start:r,ilen:a}=tp(i,s,n),{move:l=!0,reverse:c}=n||{};let d=0,h=0,f,p,m,g,b,v;const k=S=>(r+(c?a-S:S))%o,C=()=>{g!==b&&(t.lineTo(d,b),t.lineTo(d,g),t.lineTo(d,v))};for(l&&(p=i[k(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[k(f)],p.skip)continue;const S=p.x,M=p.y,N=S|0;N===m?(M<g?g=M:M>b&&(b=M),d=(h*d+S)/++h):(C(),t.lineTo(S,M),m=N,h=0,g=b=M),v=M}C()}function Na(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Tk:Ek}function Ok(t){return t.stepped?Tw:t.tension||t.cubicInterpolationMode==="monotone"?Ow:nn}function Dk(t,e,s,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,s,n)&&i.closePath()),ep(t,e.options),t.stroke(i)}function Ik(t,e,s,n){const{segments:i,options:o}=e,r=Na(e);for(const a of i)ep(t,o,a.style),t.beginPath(),r(t,e,a,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Rk=typeof Path2D=="function";function Lk(t,e,s,n){Rk&&!e.options.segment?Dk(t,e,s,n):Ik(t,e,s,n)}class Ns extends Ms{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;ww(this._points,n,e,i,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=jw(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,i=e[s],o=this.points,r=$f(this,{property:s,start:i,end:i});if(!r.length)return;const a=[],l=Ok(n);let c,d;for(c=0,d=r.length;c<d;++c){const{start:h,end:f}=r[c],p=o[h],m=o[f];if(p===m){a.push(p);continue}const g=Math.abs((i-p[s])/(m[s]-p[s])),b=l(p,m,g,n.stepped);b[s]=e[s],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,s,n){return Na(this)(e,this,s,n)}path(e,s,n){const i=this.segments,o=Na(this);let r=this._loop;s=s||0,n=n||this.points.length-s;for(const a of i)r&=o(e,this,a,{start:s,end:s+n-1});return!!r}draw(e,s,n,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),Lk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}V(Ns,"id","line"),V(Ns,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),V(Ns,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),V(Ns,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Wd(t,e,s,n){const i=t.options,{[s]:o}=t.getProps([s],n);return Math.abs(e-o)<i.radius+i.hitRadius}class $o extends Ms{constructor(s){super();V(this,"parsed");V(this,"skip");V(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,i){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],i);return Math.pow(s-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,n){return Wd(this,s,"x",n)}inYRange(s,n){return Wd(this,s,"y",n)}getCenterPoint(s){const{x:n,y:i}=this.getProps(["x","y"],s);return{x:n,y:i}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const i=n&&s.borderWidth||0;return(n+i)*2}draw(s,n){const i=this.options;this.skip||i.radius<.1||!ys(this,n,this.size(i)/2)||(s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.fillStyle=i.backgroundColor,Ra(s,i,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}V($o,"id","point"),V($o,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),V($o,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function sp(t,e){const{x:s,y:n,base:i,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,h;return t.horizontal?(h=r/2,a=Math.min(s,i),l=Math.max(s,i),c=n-h,d=n+h):(h=o/2,a=s-h,l=s+h,c=Math.min(n,i),d=Math.max(n,i)),{left:a,top:c,right:l,bottom:d}}function Us(t,e,s,n){return t?0:Ye(e,s,n)}function Fk(t,e,s){const n=t.options.borderWidth,i=t.borderSkipped,o=Ef(n);return{t:Us(i.top,o.top,0,s),r:Us(i.right,o.right,0,e),b:Us(i.bottom,o.bottom,0,s),l:Us(i.left,o.left,0,e)}}function jk(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=ln(i),r=Math.min(e,s),a=t.borderSkipped,l=n||ye(i);return{topLeft:Us(!l||a.top||a.left,o.topLeft,0,r),topRight:Us(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Us(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Us(!l||a.bottom||a.right,o.bottomRight,0,r)}}function Nk(t){const e=sp(t),s=e.right-e.left,n=e.bottom-e.top,i=Fk(t,s/2,n/2),o=jk(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:s-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function aa(t,e,s,n){const i=e===null,o=s===null,a=t&&!(i&&o)&&sp(t,n);return a&&(i||gs(e,a.left,a.right))&&(o||gs(s,a.top,a.bottom))}function Uk(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function $k(t,e){t.rect(e.x,e.y,e.w,e.h)}function la(t,e,s={}){const n=t.x!==s.x?-e:0,i=t.y!==s.y?-e:0,o=(t.x+t.w!==s.x+s.w?e:0)-n,r=(t.y+t.h!==s.y+s.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+o,h:t.h+r,radius:t.radius}}class Bo extends Ms{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:r}=Nk(this),a=Uk(r.radius)?Wi:$k;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),a(e,la(r,s,o)),e.clip(),a(e,la(o,-s,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,la(o,s)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,s,n){return aa(this,e,s,n)}inXRange(e,s){return aa(this,e,null,s)}inYRange(e,s){return aa(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(s+i)/2:s,y:o?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}V(Bo,"id","bar"),V(Bo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),V(Bo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Bk=Object.freeze({__proto__:null,ArcElement:hi,BarElement:Bo,LineElement:Ns,PointElement:$o});const Ua=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],qd=Ua.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function np(t){return Ua[t%Ua.length]}function ip(t){return qd[t%qd.length]}function Vk(t,e){return t.borderColor=np(e),t.backgroundColor=ip(e),++e}function zk(t,e){return t.backgroundColor=t.data.map(()=>np(e++)),e}function Hk(t,e){return t.backgroundColor=t.data.map(()=>ip(e++)),e}function Wk(t){let e=0;return(s,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof rn?e=zk(s,e):i instanceof Ei?e=Hk(s,e):i&&(e=Vk(s,e))}}function Kd(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function qk(t){return t&&(t.borderColor||t.backgroundColor)}function Kk(){return Ue.borderColor!=="rgba(0,0,0,0.1)"||Ue.backgroundColor!=="rgba(0,0,0,0.1)"}var Gk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,s){if(!s.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:o}=i,r=Kd(n)||qk(i)||o&&Kd(o)||Kk();if(!s.forceOverride&&r)return;const a=Wk(t);n.forEach(a)}};function Yk(t,e,s,n,i){const o=i.samples||n;if(o>=s)return t.slice(e,e+s);const r=[],a=(s-2)/(o-2);let l=0;const c=e+s-1;let d=e,h,f,p,m,g;for(r[l++]=t[d],h=0;h<o-2;h++){let b=0,v=0,k;const C=Math.floor((h+1)*a)+1+e,S=Math.min(Math.floor((h+2)*a)+1,s)+e,M=S-C;for(k=C;k<S;k++)b+=t[k].x,v+=t[k].y;b/=M,v/=M;const N=Math.floor(h*a)+1+e,L=Math.min(Math.floor((h+1)*a)+1,s)+e,{x:B,y:X}=t[d];for(p=m=-1,k=N;k<L;k++)m=.5*Math.abs((B-b)*(t[k].y-X)-(B-t[k].x)*(v-X)),m>p&&(p=m,f=t[k],g=k);r[l++]=f,d=g}return r[l++]=t[c],r}function Jk(t,e,s,n){let i=0,o=0,r,a,l,c,d,h,f,p,m,g;const b=[],v=e+s-1,k=t[e].x,S=t[v].x-k;for(r=e;r<e+s;++r){a=t[r],l=(a.x-k)/S*n,c=a.y;const M=l|0;if(M===d)c<m?(m=c,h=r):c>g&&(g=c,f=r),i=(o*i+a.x)/++o;else{const N=r-1;if(!ge(h)&&!ge(f)){const L=Math.min(h,f),B=Math.max(h,f);L!==p&&L!==N&&b.push({...t[L],x:i}),B!==p&&B!==N&&b.push({...t[B],x:i})}r>0&&N!==p&&b.push(t[N]),b.push(a),d=M,o=0,m=g=c,h=f=p=r}}return b}function op(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Gd(t){t.data.datasets.forEach(e=>{op(e)})}function Xk(t,e){const s=e.length;let n=0,i;const{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=Ye(bs(e,o.axis,r).lo,0,s-1)),c?i=Ye(bs(e,o.axis,a).hi+1,n,s)-n:i=s-n,{start:n,count:i}}var Qk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,s)=>{if(!s.enabled){Gd(t);return}const n=t.width;t.data.datasets.forEach((i,o)=>{const{_data:r,indexAxis:a}=i,l=t.getDatasetMeta(o),c=r||i.data;if(di([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:h,count:f}=Xk(l,c);const p=s.threshold||4*n;if(f<=p){op(i);return}ge(r)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(s.algorithm){case"lttb":m=Yk(c,h,f,n,s);break;case"min-max":m=Jk(c,h,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}i._decimated=m})},destroy(t){Gd(t)}};function Zk(t,e,s){const n=t.segments,i=t.points,o=e.points,r=[];for(const a of n){let{start:l,end:c}=a;c=Fl(l,c,i);const d=$a(s,i[l],i[c],a.loop);if(!e.segments){r.push({source:a,target:d,start:i[l],end:i[c]});continue}const h=$f(e,d);for(const f of h){const p=$a(s,o[f.start],o[f.end],f.loop),m=Uf(a,i,p);for(const g of m)r.push({source:g,target:f,start:{[s]:Yd(d,p,"start",Math.max)},end:{[s]:Yd(d,p,"end",Math.min)}})}}return r}function $a(t,e,s,n){if(n)return;let i=e[t],o=s[t];return t==="angle"&&(i=Mt(i),o=Mt(o)),{property:t,start:i,end:o}}function e2(t,e){const{x:s=null,y:n=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:r,end:a})=>{a=Fl(r,a,i);const l=i[r],c=i[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):s!==null&&(o.push({x:s,y:l.y}),o.push({x:s,y:c.y}))}),o}function Fl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Yd(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function rp(t,e){let s=[],n=!1;return Le(t)?(n=!0,s=t):s=e2(t,e),s.length?new Ns({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Jd(t){return t&&t.fill!==!1}function t2(t,e,s){let i=t[e].fill;const o=[e];let r;if(!s)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Be(i))return i;if(r=t[i],!r)return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function s2(t,e,s){const n=r2(t);if(ye(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return Be(i)&&Math.floor(i)===i?n2(n[0],e,i,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function n2(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function i2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ye(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function o2(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ye(t)?n=t.value:n=e.getBaseValue(),n}function r2(t){const e=t.options,s=e.fill;let n=he(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function a2(t){const{scale:e,index:s,line:n}=t,i=[],o=n.segments,r=n.points,a=l2(e,s);a.push(rp({x:null,y:e.bottom},n));for(let l=0;l<o.length;l++){const c=o[l];for(let d=c.start;d<=c.end;d++)c2(i,r[d],a)}return new Ns({points:i,options:{}})}function l2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const o=n[i];if(o.index===e)break;o.hidden||s.unshift(o.dataset)}return s}function c2(t,e,s){const n=[];for(let i=0;i<s.length;i++){const o=s[i],{first:r,last:a,point:l}=d2(o,e,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function d2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const i=n[s],o=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const d=o[c],h=r[d.start][s],f=r[d.end][s];if(gs(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:n}}class ap{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:i,y:o,radius:r}=this;return s=s||{start:0,end:Fe},e.arc(i,o,r,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:i}=this,o=e.angle;return{x:s+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}}function u2(t){const{chart:e,fill:s,line:n}=t;if(Be(s))return h2(e,s);if(s==="stack")return a2(t);if(s==="shape")return!0;const i=f2(t);return i instanceof ap?i:rp(i,n)}function h2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function f2(t){return(t.scale||{}).getPointPositionForValue?m2(t):p2(t)}function p2(t){const{scale:e={},fill:s}=t,n=i2(s,e);if(Be(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function m2(t){const{scale:e,fill:s}=t,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,r=o2(s,e,o),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,o);return new ap({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,r));return a}function ca(t,e,s){const n=u2(e),{chart:i,index:o,line:r,scale:a,axis:l}=e,c=r.options,d=c.fill,h=c.backgroundColor,{above:f=h,below:p=h}=d||{},m=i.getDatasetMeta(o),g=Bf(i,m);n&&r.points.length&&(Pr(t,s),g2(t,{line:r,target:n,above:f,below:p,area:s,scale:a,axis:l,clip:g}),Er(t))}function g2(t,e){const{line:s,target:n,above:i,below:o,area:r,scale:a,clip:l}=e,c=s._loop?"angle":e.axis;t.save(),c==="x"&&o!==i&&(Xd(t,n,r.top),Qd(t,{line:s,target:n,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Xd(t,n,r.bottom)),Qd(t,{line:s,target:n,color:o,scale:a,property:c,clip:l}),t.restore()}function Xd(t,e,s){const{segments:n,points:i}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:l,end:c}=a,d=i[l],h=i[Fl(l,c,i)];o?(t.moveTo(d.x,d.y),o=!1):(t.lineTo(d.x,s),t.lineTo(d.x,d.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Qd(t,e){const{line:s,target:n,property:i,color:o,scale:r,clip:a}=e,l=Zk(s,n,i);for(const{source:c,target:d,start:h,end:f}of l){const{style:{backgroundColor:p=o}={}}=c,m=n!==!0;t.save(),t.fillStyle=p,b2(t,r,a,m&&$a(i,h,f)),t.beginPath();const g=!!s.pathSegment(t,c);let b;if(m){g?t.closePath():Zd(t,n,f,i);const v=!!n.pathSegment(t,d,{move:g,reverse:!0});b=g&&v,b||Zd(t,n,h,i)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function b2(t,e,s,n){const i=e.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=r,c=i.top,d=a,h=i.bottom):(l=i.left,c=r,d=i.right,h=a),t.beginPath(),s&&(l=Math.max(l,s.left),d=Math.min(d,s.right),c=Math.max(c,s.top),h=Math.min(h,s.bottom)),t.rect(l,c,d-l,h-c),t.clip()}}function Zd(t,e,s,n){const i=e.interpolate(s,n);i&&t.lineTo(i.x,i.y)}var y2={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,i=[];let o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof Ns&&(l={visible:t.isDatasetVisible(r),index:r,fill:s2(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(r=0;r<n;++r)l=i[r],!(!l||l.fill===!1)&&(l.fill=t2(i,r,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&ca(t.ctx,a,o))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const o=n[i].$filler;Jd(o)&&ca(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Jd(n)||s.drawTime!=="beforeDatasetDraw"||ca(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eu=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},x2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class tu extends Ms{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ie(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=Ke(n.font),o=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eu(n,o);let c,d;s.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(r,o,a,l)+10):(d=this.maxHeight,c=this._fitCols(r,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,i){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((m,g)=>{const b=n+s/2+o.measureText(m.text).width;(g===0||c[c.length-1]+b+2*a>r)&&(h+=d,c[c.length-(g>0?0:1)]=0,p+=d,f++),l[g]={left:0,top:p,row:f,width:b,height:i},c[c.length-1]+=b+a}),h}_fitCols(e,s,n,i){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=r-e;let h=a,f=0,p=0,m=0,g=0;return this.legendItems.forEach((b,v)=>{const{itemWidth:k,itemHeight:C}=_2(n,s,o,b,i);v>0&&p+C+2*a>d&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,g++,f=p=0),l[v]={left:m,top:p,col:g,width:k,height:C},f=Math.max(f,k),p+=C+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:i},rtl:o}}=this,r=Ln(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=st(n,this.left+i,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=st(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+i}else{let a=0,l=st(n,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=st(n,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pr(e,this),this._draw(),Er(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:i}=this,{align:o,labels:r}=e,a=Ue.color,l=Ln(e.rtl,this.left,this.width),c=Ke(r.font),{padding:d}=r,h=c.size,f=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=eu(r,h),v=function(N,L,B){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const X=he(B.lineWidth,1);if(i.fillStyle=he(B.fillStyle,a),i.lineCap=he(B.lineCap,"butt"),i.lineDashOffset=he(B.lineDashOffset,0),i.lineJoin=he(B.lineJoin,"miter"),i.lineWidth=X,i.strokeStyle=he(B.strokeStyle,a),i.setLineDash(he(B.lineDash,[])),r.usePointStyle){const ie={radius:g*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:X},re=l.xPlus(N,m/2),de=L+f;Pf(i,ie,re,de,r.pointStyleWidth&&m)}else{const ie=L+Math.max((h-g)/2,0),re=l.leftForLtr(N,m),de=ln(B.borderRadius);i.beginPath(),Object.values(de).some(Ae=>Ae!==0)?Wi(i,{x:re,y:ie,w:m,h:g,radius:de}):i.rect(re,ie,m,g),i.fill(),X!==0&&i.stroke()}i.restore()},k=function(N,L,B){hn(i,B.text,N,L+b/2,c,{strikethrough:B.hidden,textAlign:l.textAlign(B.textAlign)})},C=this.isHorizontal(),S=this._computeTitleHeight();C?p={x:st(o,this.left+d,this.right-n[0]),y:this.top+d+S,line:0}:p={x:this.left+d,y:st(o,this.top+S+d,this.bottom-s[0].height),line:0},Ff(this.ctx,e.textDirection);const M=b+d;this.legendItems.forEach((N,L)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const B=i.measureText(N.text).width,X=l.textAlign(N.textAlign||(N.textAlign=r.textAlign)),ie=m+f+B;let re=p.x,de=p.y;l.setWidth(this.width),C?L>0&&re+ie+d>this.right&&(de=p.y+=M,p.line++,re=p.x=st(o,this.left+d,this.right-n[p.line])):L>0&&de+M>this.bottom&&(re=p.x=re+s[p.line].width+d,p.line++,de=p.y=st(o,this.top+S+d,this.bottom-s[p.line].height));const Ae=l.x(re);if(v(Ae,de,N),re=$v(X,re+m+f,C?re+ie:this.right,e.rtl),k(l.x(re),de,N),C)p.x+=ie+d;else if(typeof N.text!="string"){const qe=c.lineHeight;p.y+=lp(N,qe)+d}else p.y+=M}),jf(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ke(s.font),i=lt(s.padding);if(!s.display)return;const o=Ln(e.rtl,this.left,this.width),r=this.ctx,a=s.position,l=n.size/2,c=i.top+l;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,h=st(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);d=c+st(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=st(a,h,h+f);r.textAlign=o.textAlign(Al(a)),r.textBaseline="middle",r.strokeStyle=s.color,r.fillStyle=s.color,r.font=n.string,hn(r,s.text,p,d,n)}_computeTitleHeight(){const e=this.options.title,s=Ke(e.font),n=lt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,i,o;if(gs(e,this.left,this.right)&&gs(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],gs(e,i.left,i.left+i.width)&&gs(s,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!k2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=x2(i,n);i&&!o&&Ie(s.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!o&&Ie(s.onHover,[e,n,this],this)}else n&&Ie(s.onClick,[e,n,this],this)}}function _2(t,e,s,n,i){const o=v2(n,t,e,s),r=w2(i,n,e.lineHeight);return{itemWidth:o,itemHeight:r}}function v2(t,e,s,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((o,r)=>o.length>r.length?o:r)),e+s.size/2+n.measureText(i).width}function w2(t,e,s){let n=t;return typeof e.text!="string"&&(n=lp(e,s)),n}function lp(t,e){const s=t.text?t.text.length:0;return e*s}function k2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var S2={id:"legend",_element:tu,start(t,e,s){const n=t.legend=new tu({ctx:t.ctx,options:s,chart:t});rt.configure(t,n,s),rt.addBox(t,n)},stop(t){rt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;rt.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,i=s.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:i,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),d=lt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class jl extends Ms{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const i=Le(n.text)?n.text.length:1;this._padding=lt(n.padding);const o=i*Ke(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:i,right:o,options:r}=this,a=r.align;let l=0,c,d,h;return this.isHorizontal()?(d=st(a,n,o),h=s+e,c=o-n):(r.position==="left"?(d=n+e,h=st(a,i,s),l=je*-.5):(d=o-e,h=st(a,s,i),l=je*.5),c=i-s),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Ke(s.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);hn(e,s.text,0,0,n,{color:s.color,maxWidth:l,rotation:c,textAlign:Al(s.align),textBaseline:"middle",translation:[r,a]})}}function C2(t,e){const s=new jl({ctx:t.ctx,options:e,chart:t});rt.configure(t,s,e),rt.addBox(t,s),t.titleBlock=s}var M2={id:"title",_element:jl,start(t,e,s){C2(t,s)},stop(t){const e=t.titleBlock;rt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;rt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ko=new WeakMap;var A2={id:"subtitle",start(t,e,s){const n=new jl({ctx:t.ctx,options:s,chart:t});rt.configure(t,n,s),rt.addBox(t,n),ko.set(t,n)},stop(t){rt.removeBox(t,ko.get(t)),ko.delete(t)},beforeUpdate(t,e,s){const n=ko.get(t);rt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fi={average(t){if(!t.length)return!1;let e,s,n=new Set,i=0,o=0;for(e=0,s=t.length;e<s;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,i=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){const l=t[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Da(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,n=l.y}return{x:s,y:n}}};function Qt(t,e){return e&&(Le(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ds(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function P2(t,e){const{element:s,datasetIndex:n,index:i}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(i);return{chart:t,label:r,parsed:o.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:s}}function su(t,e){const s=t.chart.ctx,{body:n,footer:i,title:o}=t,{boxWidth:r,boxHeight:a}=e,l=Ke(e.bodyFont),c=Ke(e.titleFont),d=Ke(e.footerFont),h=o.length,f=i.length,p=n.length,m=lt(e.padding);let g=m.height,b=0,v=n.reduce((S,M)=>S+M.before.length+M.lines.length+M.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*S+(v-p)*l.lineHeight+(v-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let k=0;const C=function(S){b=Math.max(b,s.measureText(S).width+k)};return s.save(),s.font=c.string,Me(t.title,C),s.font=l.string,Me(t.beforeBody.concat(t.afterBody),C),k=e.displayColors?r+2+e.boxPadding:0,Me(n,S=>{Me(S.before,C),Me(S.lines,C),Me(S.after,C)}),k=0,s.font=d.string,Me(t.footer,C),s.restore(),b+=m.width,{width:b,height:g}}function E2(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function T2(t,e,s,n){const{x:i,width:o}=n,r=s.caretSize+s.caretPadding;if(t==="left"&&i+o+r>e.width||t==="right"&&i-o-r<0)return!0}function O2(t,e,s,n){const{x:i,width:o}=s,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=r-o/2&&(c="right"),T2(c,t,e,s)&&(c="center"),c}function nu(t,e,s){const n=s.yAlign||e.yAlign||E2(t,s);return{xAlign:s.xAlign||e.xAlign||O2(t,e,s,n),yAlign:n}}function D2(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function I2(t,e,s){let{y:n,height:i}=t;return e==="top"?n+=s:e==="bottom"?n-=i+s:n-=i/2,n}function iu(t,e,s,n){const{caretSize:i,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=s,c=i+o,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=ln(r);let m=D2(e,a);const g=I2(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(d,f)+i:a==="right"&&(m+=Math.max(h,p)+i),{x:Ye(m,0,n.width-e.width),y:Ye(g,0,n.height-e.height)}}function So(t,e,s){const n=lt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function ou(t){return Qt([],ds(t))}function R2(t,e,s){return qs(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function ru(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const cp={beforeTitle:as,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:as,beforeBody:as,beforeLabel:as,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ge(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:as,afterBody:as,beforeFooter:as,footer:as,afterFooter:as};function gt(t,e,s,n){const i=t[e].call(s,n);return typeof i>"u"?cp[e].call(s,n):i}class Ba extends Ms{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&s.options.animation&&n.animations,o=new Vf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=R2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,i=gt(n,"beforeTitle",this,e),o=gt(n,"title",this,e),r=gt(n,"afterTitle",this,e);let a=[];return a=Qt(a,ds(i)),a=Qt(a,ds(o)),a=Qt(a,ds(r)),a}getBeforeBody(e,s){return ou(gt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,i=[];return Me(e,o=>{const r={before:[],lines:[],after:[]},a=ru(n,o);Qt(r.before,ds(gt(a,"beforeLabel",this,o))),Qt(r.lines,gt(a,"label",this,o)),Qt(r.after,ds(gt(a,"afterLabel",this,o))),i.push(r)}),i}getAfterBody(e,s){return ou(gt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,i=gt(n,"beforeFooter",this,e),o=gt(n,"footer",this,e),r=gt(n,"afterFooter",this,e);let a=[];return a=Qt(a,ds(i)),a=Qt(a,ds(o)),a=Qt(a,ds(r)),a}_createItems(e){const s=this._active,n=this.chart.data,i=[],o=[],r=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(P2(this.chart,s[l]));return e.filter&&(a=a.filter((d,h,f)=>e.filter(d,h,f,n))),e.itemSort&&(a=a.sort((d,h)=>e.itemSort(d,h,n))),Me(a,d=>{const h=ru(e.callbacks,d);i.push(gt(h,"labelColor",this,d)),o.push(gt(h,"labelPointStyle",this,d)),r.push(gt(h,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(e,s){const n=this.options.setContext(this.getContext()),i=this._active;let o,r=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const a=fi[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=su(this,n),c=Object.assign({},a,l),d=nu(this.chart,n,c),h=iu(n,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,i){const o=this.getCaretPosition(e,n,i);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){const{xAlign:i,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:h}=ln(a),{x:f,y:p}=e,{width:m,height:g}=s;let b,v,k,C,S,M;return o==="center"?(S=p+g/2,i==="left"?(b=f,v=b-r,C=S+r,M=S-r):(b=f+m,v=b+r,C=S-r,M=S+r),k=b):(i==="left"?v=f+Math.max(l,d)+r:i==="right"?v=f+m-Math.max(c,h)-r:v=this.caretX,o==="top"?(C=p,S=C-r,b=v-r,k=v+r):(C=p+g,S=C+r,b=v+r,k=v-r),M=C),{x1:b,x2:v,x3:k,y1:C,y2:S,y3:M}}drawTitle(e,s,n){const i=this.title,o=i.length;let r,a,l;if(o){const c=Ln(n.rtl,this.x,this.width);for(e.x=So(this,n.titleAlign,n),s.textAlign=c.textAlign(n.titleAlign),s.textBaseline="middle",r=Ke(n.titleFont),a=n.titleSpacing,s.fillStyle=n.titleColor,s.font=r.string,l=0;l<o;++l)s.fillText(i[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,s,n,i,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,d=Ke(o.bodyFont),h=So(this,"left",o),f=i.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,m=s.y+p;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,v=m+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Ra(e,g,b,v),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Ra(e,g,b,v)}else{e.lineWidth=ye(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const g=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),v=ln(r.borderRadius);Object.values(v).some(k=>k!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Wi(e,{x:g,y:m,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Wi(e,{x:b,y:m+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=r.backgroundColor,e.fillRect(b,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:i}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=n,h=Ke(n.bodyFont);let f=h.lineHeight,p=0;const m=Ln(n.rtl,this.x,this.width),g=function(B){s.fillText(B,m.x(e.x+p),e.y+f/2),e.y+=f+o},b=m.textAlign(r);let v,k,C,S,M,N,L;for(s.textAlign=r,s.textBaseline="middle",s.font=h.string,e.x=So(this,b,n),s.fillStyle=n.bodyColor,Me(this.beforeBody,g),p=a&&b!=="right"?r==="center"?c/2+d:c+2+d:0,S=0,N=i.length;S<N;++S){for(v=i[S],k=this.labelTextColors[S],s.fillStyle=k,Me(v.before,g),C=v.lines,a&&C.length&&(this._drawColorBox(s,e,S,m,n),f=Math.max(h.lineHeight,l)),M=0,L=C.length;M<L;++M)g(C[M]),f=h.lineHeight;Me(v.after,g)}p=0,f=h.lineHeight,Me(this.afterBody,g),e.y-=o}drawFooter(e,s,n){const i=this.footer,o=i.length;let r,a;if(o){const l=Ln(n.rtl,this.x,this.width);for(e.x=So(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=l.textAlign(n.footerAlign),s.textBaseline="middle",r=Ke(n.footerFont),s.fillStyle=n.footerColor,s.font=r.string,a=0;a<o;++a)s.fillText(i[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,s,n,i){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:d}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=ln(i.cornerRadius);s.fillStyle=i.backgroundColor,s.strokeStyle=i.borderColor,s.lineWidth=i.borderWidth,s.beginPath(),s.moveTo(a+h,l),r==="top"&&this.drawCaret(e,s,n,i),s.lineTo(a+c-f,l),s.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(e,s,n,i),s.lineTo(a+c,l+d-m),s.quadraticCurveTo(a+c,l+d,a+c-m,l+d),r==="bottom"&&this.drawCaret(e,s,n,i),s.lineTo(a+p,l+d),s.quadraticCurveTo(a,l+d,a,l+d-p),r==="center"&&o==="left"&&this.drawCaret(e,s,n,i),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),i.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){const r=fi[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=su(this,e),l=Object.assign({},r,this._size),c=nu(s,e,l),d=iu(e,l,c,s);(i._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=lt(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,i,s),Ff(e,s.textDirection),o.y+=r.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),jf(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!er(n,i),r=this._positionChanged(i,s);(o||r)&&(this._active=i,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],r=this._getActiveElements(e,o,s,n),a=this._positionChanged(r,e),l=s||!er(r,o)||a;return l&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,n,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(e,s){const{caretX:n,caretY:i,options:o}=this,r=fi[o.position].call(this,e,s);return r!==!1&&(n!==r.x||i!==r.y)}}V(Ba,"positioners",fi);var L2={id:"tooltip",_element:Ba,positioners:fi,afterInit(t,e,s){s&&(t.tooltip=new Ba({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},F2=Object.freeze({__proto__:null,Colors:Gk,Decimation:Qk,Filler:y2,Legend:S2,SubTitle:A2,Title:M2,Tooltip:L2});const j2=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function N2(t,e,s,n){const i=t.indexOf(e);if(i===-1)return j2(t,e,s,n);const o=t.lastIndexOf(e);return i!==o?s:i}const U2=(t,e)=>t===null?null:Ye(Math.round(t),0,e);function au(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Va extends mn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:i,label:o}of s)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ge(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:N2(n,e,he(s,e),this._addedLabels),U2(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,i=[];let o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=s;r++)i.push({value:r});return i}getLabelForValue(e){return au.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}V(Va,"id","category"),V(Va,"defaults",{ticks:{callback:au}});function $2(t,e){const s=[],{bounds:i,step:o,min:r,max:a,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=o||1,m=d-1,{min:g,max:b}=e,v=!ge(r),k=!ge(a),C=!ge(c),S=(b-g)/(h+1);let M=sd((b-g)/m/p)*p,N,L,B,X;if(M<1e-14&&!v&&!k)return[{value:g},{value:b}];X=Math.ceil(b/M)-Math.floor(g/M),X>m&&(M=sd(X*M/m/p)*p),ge(l)||(N=Math.pow(10,l),M=Math.ceil(M*N)/N),i==="ticks"?(L=Math.floor(g/M)*M,B=Math.ceil(b/M)*M):(L=g,B=b),v&&k&&o&&Iv((a-r)/o,M/1e3)?(X=Math.round(Math.min((a-r)/M,d)),M=(a-r)/X,L=r,B=a):C?(L=v?r:L,B=k?a:B,X=c-1,M=(B-L)/X):(X=(B-L)/M,Mi(X,Math.round(X),M/1e3)?X=Math.round(X):X=Math.ceil(X));const ie=Math.max(nd(M),nd(L));N=Math.pow(10,ge(l)?ie:l),L=Math.round(L*N)/N,B=Math.round(B*N)/N;let re=0;for(v&&(f&&L!==r?(s.push({value:r}),L<r&&re++,Mi(Math.round((L+re*M)*N)/N,r,lu(r,S,t))&&re++):L<r&&re++);re<X;++re){const de=Math.round((L+re*M)*N)/N;if(k&&de>a)break;s.push({value:de})}return k&&f&&B!==a?s.length&&Mi(s[s.length-1].value,a,lu(a,S,t))?s[s.length-1].value=a:s.push({value:a}):(!k||B===a)&&s.push({value:B}),s}function lu(t,e,{horizontal:s,minRotation:n}){const i=Ut(n),o=(s?Math.sin(i):Math.cos(i))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class ar extends mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this;const r=l=>i=s?i:l,a=l=>o=n?o:l;if(e){const l=ns(i),c=ns(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(i===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(i-l)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),s=s||11),s&&(i=Math.min(s,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,r=$2(i,o);return e.bounds==="ticks"&&xf(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-s)/Math.max(e.length-1,1)/2;s-=i,n+=i}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return so(e,this.chart.options.locale,this.options.ticks.format)}}class za extends ar{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Be(e)?e:0,this.max=Be(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Ut(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}V(za,"id","linear"),V(za,"defaults",{ticks:{callback:Ar.formatters.numeric}});const Ki=t=>Math.floor(js(t)),Zs=(t,e)=>Math.pow(10,Ki(t)+e);function cu(t){return t/Math.pow(10,Ki(t))===1}function du(t,e,s){const n=Math.pow(10,s),i=Math.floor(t/n);return Math.ceil(e/n)-i}function B2(t,e){const s=e-t;let n=Ki(s);for(;du(t,e,n)>10;)n++;for(;du(t,e,n)<10;)n--;return Math.min(n,Ki(t))}function V2(t,{min:e,max:s}){e=Ct(t.min,e);const n=[],i=Ki(e);let o=B2(e,s),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*r)/r,d=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-d)/Math.pow(10,o)),f=Ct(t.min,Math.round((l+d+h*Math.pow(10,o))*r)/r);for(;f<s;)n.push({value:f,major:cu(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+d+h*Math.pow(10,o))*r)/r;const p=Ct(t.max,f);return n.push({value:p,major:cu(p),significand:h}),n}class Ha extends mn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=ar.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return Be(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Be(e)?Math.max(0,e):null,this.max=Be(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Be(this._userMin)&&(this.min=e===Zs(this.min,0)?Zs(this.min,-1):Zs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,i=this.max;const o=a=>n=e?n:a,r=a=>i=s?i:a;n===i&&(n<=0?(o(1),r(10)):(o(Zs(n,-1)),r(Zs(i,1)))),n<=0&&o(Zs(i,-1)),i<=0&&r(Zs(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=V2(s,this);return e.bounds==="ticks"&&xf(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":so(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=js(e),this._valueRange=js(this.max)-js(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(js(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}V(Ha,"id","logarithmic"),V(Ha,"defaults",{ticks:{callback:Ar.formatters.logarithmic,major:{enabled:!0}}});function Wa(t){const e=t.ticks;if(e.display&&t.display){const s=lt(e.backdropPadding);return he(e.font&&e.font.size,Ue.font.size)+s.height}return 0}function z2(t,e,s){return s=Le(s)?s:[s],{w:Jv(t,e.string,s),h:s.length*e.lineHeight}}function uu(t,e,s,n,i){return t===n||t===i?{start:e-s/2,end:e+s/2}:t<n||t>i?{start:e-s,end:e}:{start:e,end:e+s}}function H2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],i=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?je/o:0;for(let l=0;l<o;l++){const c=r.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),h=Ke(c.font),f=z2(t.ctx,h,t._pointLabels[l]);n[l]=f;const p=Mt(t.getIndexAngle(l)+a),m=Math.round(Cl(p)),g=uu(m,d.x,f.w,0,180),b=uu(m,d.y,f.h,90,270);W2(s,e,p,g,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=G2(t,n,i)}function W2(t,e,s,n,i){const o=Math.abs(Math.sin(s)),r=Math.abs(Math.cos(s));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/r,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function q2(t,e,s){const n=t.drawingArea,{extra:i,additionalAngle:o,padding:r,size:a}=s,l=t.getPointPosition(e,n+i+r,o),c=Math.round(Cl(Mt(l.angle+ze))),d=X2(l.y,a.h,c),h=Y2(c),f=J2(l.x,a.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:f,top:d,right:f+a.w,bottom:d+a.h}}function K2(t,e){if(!e)return!0;const{left:s,top:n,right:i,bottom:o}=t;return!(ys({x:s,y:n},e)||ys({x:s,y:o},e)||ys({x:i,y:n},e)||ys({x:i,y:o},e))}function G2(t,e,s){const n=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Wa(o)/2,additionalAngle:r?je/i:0};let c;for(let d=0;d<i;d++){l.padding=s[d],l.size=e[d];const h=q2(t,d,l);n.push(h),a==="auto"&&(h.visible=K2(h,c),h.visible&&(c=h))}return n}function Y2(t){return t===0||t===180?"center":t<180?"left":"right"}function J2(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function X2(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function Q2(t,e,s){const{left:n,top:i,right:o,bottom:r}=s,{backdropColor:a}=e;if(!ge(a)){const l=ln(e.borderRadius),c=lt(e.backdropPadding);t.fillStyle=a;const d=n-c.left,h=i-c.top,f=o-n+c.width,p=r-i+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),Wi(t,{x:d,y:h,w:f,h:p,radius:l}),t.fill()):t.fillRect(d,h,f,p)}}function Z2(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const o=t._pointLabelItems[i];if(!o.visible)continue;const r=n.setContext(t.getPointLabelContext(i));Q2(s,r,o);const a=Ke(r.font),{x:l,y:c,textAlign:d}=o;hn(s,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:r.color,textAlign:d,textBaseline:"middle"})}}function dp(t,e,s,n){const{ctx:i}=t;if(s)i.arc(t.xCenter,t.yCenter,e,0,Fe);else{let o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,e),i.lineTo(o.x,o.y)}}function eS(t,e,s,n,i){const o=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!n||!a||!l||s<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),dp(t,s,r,n),o.closePath(),o.stroke(),o.restore())}function tS(t,e,s){return qs(t,{label:s,index:e,type:"pointLabel"})}class pi extends ar{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=lt(Wa(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Be(e)&&!isNaN(e)?e:0,this.max=Be(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wa(this.options))}generateTickLabels(e){ar.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const i=Ie(this.options.pointLabels.callback,[s,n],this);return i||i===0?i:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?H2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,i){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,i))}getIndexAngle(e){const s=Fe/(this._pointLabels.length||1),n=this.options.startAngle||0;return Mt(e*s+Ut(n))}getDistanceFromCenterForValue(e){if(ge(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ge(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return tS(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const i=this.getIndexAngle(e)-ze+n;return{x:Math.cos(i)*s+this.xCenter,y:Math.sin(i)*s+this.yCenter,angle:i}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:i,bottom:o}=this._pointLabelItems[e];return{left:s,top:n,right:i,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),dp(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:i,border:o}=s,r=this._pointLabels.length;let a,l,c;if(s.pointLabels.display&&Z2(this,r),i.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const f=this.getContext(h),p=i.setContext(f),m=o.setContext(f);eS(this,p,l,r,m)}}),n.display){for(e.save(),a=r-1;a>=0;a--){const d=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=d;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!s.reverse)return;const c=n.setContext(this.getContext(l)),d=Ke(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=lt(c.backdropPadding);e.fillRect(-r/2-h.left,-o-d.size/2-h.top,r+h.width,d.size+h.height)}hn(e,a.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}V(pi,"id","radialLinear"),V(pi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ar.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),V(pi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),V(pi,"descriptors",{angleLines:{_fallback:"grid"}});const Or={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xt=Object.keys(Or);function hu(t,e){return t-e}function fu(t,e){if(ge(e))return null;const s=t._adapter,{parser:n,round:i,isoWeekday:o}=t._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),Be(r)||(r=typeof n=="string"?s.parse(r,n):s.parse(r)),r===null?null:(i&&(r=i==="week"&&(Vn(o)||o===!0)?s.startOf(r,"isoWeek",o):s.startOf(r,i)),+r)}function pu(t,e,s,n){const i=xt.length;for(let o=xt.indexOf(t);o<i-1;++o){const r=Or[xt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((s-e)/(a*r.size))<=n)return xt[o]}return xt[i-1]}function sS(t,e,s,n,i){for(let o=xt.length-1;o>=xt.indexOf(s);o--){const r=xt[o];if(Or[r].common&&t._adapter.diff(i,n,r)>=e-1)return r}return xt[s?xt.indexOf(s):0]}function nS(t){for(let e=xt.indexOf(t)+1,s=xt.length;e<s;++e)if(Or[xt[e]].common)return xt[e]}function mu(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:i}=Ml(s,e),o=s[n]>=e?s[n]:s[i];t[o]=!0}}function iS(t,e,s,n){const i=t._adapter,o=+i.startOf(e[0].value,n),r=e[e.length-1].value;let a,l;for(a=o;a<=r;a=+i.add(a,1,n))l=s[a],l>=0&&(e[l].major=!0);return e}function gu(t,e,s){const n=[],i={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],i[a]=r,n.push({value:a,major:!1});return o===0||!s?n:iS(t,n,i,s)}class Gi extends mn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),i=this._adapter=new f1._date(e.adapters.date);i.init(s),Ci(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:fu(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:i,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Be(i)&&!isNaN(i)?i:+s.startOf(Date.now(),n),o=Be(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,r=this.max,a=jv(i,o,r);return this._unit=s.unit||(n.autoSkip?pu(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):sS(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:nS(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),gu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?s=1-i:s=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;s=Ye(s,0,r),n=Ye(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,i=this.options,o=i.time,r=o.unit||pu(o.minUnit,s,n,this._getLabelCapacity(s)),a=he(i.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Vn(l)||l===!0,d={};let h=s,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(n,s,r)>1e5*a)throw new Error(s+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+e.add(f,a,r),p++)mu(d,f,m);return(f===n||i.bounds==="ticks"||p===1)&&mu(d,f,m),Object.keys(d).sort(hu).map(g=>+g)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const i=this.options.time.displayFormats,o=this._unit,r=s||i[o];return this._adapter.format(e,r)}_tickFormatFunction(e,s,n,i){const o=this.options,r=o.ticks.callback;if(r)return Ie(r,[e,s,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],h=c&&a[c],f=n[s],p=c&&h&&f&&f.major;return this._adapter.format(e,i||(p?h:d))}generateTickLabels(e){let s,n,i;for(s=0,n=e.length;s<n;++s)i=e[s],i.label=this._tickFormatFunction(i.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,i=Ut(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,i=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,gu(this,[e],this._majorUnit),i),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(s=0,n=i.length;s<n;++s)e=e.concat(i[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const i=this.getLabels();for(s=0,n=i.length;s<n;++s)e.push(fu(this,i[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wf(e.sort(hu))}}V(Gi,"id","time"),V(Gi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Co(t,e,s){let n=0,i=t.length-1,o,r,a,l;s?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=bs(t,"pos",e)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=bs(t,"time",e)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[i]);const c=r-o;return c?a+(l-a)*(e-o)/c:a}class qa extends Gi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Co(s,this.min),this._tableRange=Co(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,i=[],o=[];let r,a,l,c,d;for(r=0,a=e.length;r<a;++r)c=e[r],c>=s&&c<=n&&i.push(c);if(i.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(r=0,a=i.length;r<a;++r)d=i[r+1],l=i[r-1],c=i[r],Math.round((d+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Co(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Co(this._table,n*this._tableRange+this._minPos,!0)}}V(qa,"id","timeseries"),V(qa,"defaults",Gi.defaults);var oS=Object.freeze({__proto__:null,CategoryScale:Va,LinearScale:za,LogarithmicScale:Ha,RadialLinearScale:pi,TimeScale:Gi,TimeSeriesScale:qa});const rS=[h1,Bk,F2,oS];ss.register(...rS);async function up(){return await(await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")).json()}async function hp(t){return t?await(await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${t}/municipios?orderBy=nome`)).json():[]}async function fp(t){const e=t.replace(/\D/g,"");if(e.length!==8)return null;try{const s=await fetch(`https://viacep.com.br/ws/${e}/json/`);if(!s.ok)return null;const n=await s.json();return n.erro?null:{street:n.logradouro,complement:n.complemento,neighborhood:n.bairro,city:n.localidade,state:n.uf}}catch{return null}}const aS={name:"Dashboard",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs,WeekView:hf,AppointmentDetails:ff},data(){return{userId:null,stats:{week:0,month:0,clients:0,newClients:0},upcomingAppointments:[],clients:[],services:[],rooms:[],topClients:[],sidebarOpen:window.innerWidth>=768,showClientModal:!1,showAppointmentModal:!1,editingId:null,showDetailsModal:!1,weekChart:null,weekCounts:[0,0,0,0,0,0,0],states:[],cities:[],clientForm:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},appointmentForm:{date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},selectedAppointment:null}},methods:{phoneMask:Yn,cpfMask:_l,cepMask:cf,async fetchStatesList(){this.states=await up()},async fetchCitiesList(){this.cities=await hp(this.clientForm.stateId)},async fillAddressByCep(){const t=await fp(this.clientForm.cep);if(!t)return;this.clientForm.street=t.street||"",this.clientForm.complement=t.complement||"",this.clientForm.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.clientForm.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(n=>n.nome.toLowerCase()===t.city.toLowerCase());s&&(this.clientForm.cityId=s.id)}},async openClientModal(){await this.fetchStatesList(),this.clientForm.stateId&&await this.fetchCitiesList(),this.showClientModal=!0},async fetchStats(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const n=new Date(t);n.setDate(t.getDate()+(6-e)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],r=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);a.setHours(23,59,59,999);const l=r.toISOString().split("T")[0],c=a.toISOString().split("T")[0],{data:d}=await I.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o);this.stats.week=d?d.length:0;const h=[0,0,0,0,0,0,0];d&&d.forEach(m=>{const g=new Date(m.date);h[g.getDay()]++}),this.weekCounts=h;const{data:f}=await I.from("appointments").select().eq("user_id",this.userId).gte("date",l).lte("date",c);this.stats.month=f?f.length:0;const{data:p}=await I.from("clients").select().eq("user_id",this.userId);p&&(this.stats.clients=p.length,this.clients=p,this.stats.newClients=p.filter(m=>{const g=new Date(m.created_at);return g>=r&&g<=a}).length),await this.fetchTopClients(),this.$nextTick(()=>this.renderWeekChart())},async fetchUpcomingAppointments(){const t=new Date,e=t.getDay(),s=new Date(t);s.setDate(t.getDate()-e),s.setHours(0,0,0,0);const n=new Date(t);n.setDate(t.getDate()+(6-e)),n.setHours(23,59,59,999);const i=s.toISOString().split("T")[0],o=n.toISOString().split("T")[0],{data:r}=await I.from("appointments").select().eq("user_id",this.userId).gte("date",i).lte("date",o).order("date",{ascending:!0}).order("time",{ascending:!0});this.upcomingAppointments=r||[]},async fetchTopClients(){const{data:t}=await I.from("appointments").select("client_id").eq("user_id",this.userId),e={};t&&t.forEach(n=>{e[n.client_id]=(e[n.client_id]||0)+1});const s=Object.entries(e).sort((n,i)=>i[1]-n[1]).slice(0,5);this.topClients=s.map(([n,i])=>({id:n,count:i,name:this.getClientName(n)}))},renderWeekChart(){const t=this.$refs.weekChartCanvas.getContext("2d");this.weekChart&&this.weekChart.destroy(),this.weekChart=new ss(t,{type:"bar",data:{labels:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],datasets:[{label:"Agendamentos",data:this.weekCounts,backgroundColor:"#6366f1",borderColor:"#4f46e5",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#e5e7eb"}}}}})},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){if(!confirm(e))return;const{error:n}=await I.from("appointments").delete().eq("id",t);n?alert("Erro ao excluir agendamento: "+n.message):(this.upcomingAppointments=this.upcomingAppointments.filter(i=>i.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&this.closeDetails(),await this.fetchStats(),await this.fetchTopClients(),await this.fetchUpcomingAppointments())},async handleAddClient(){if(this.clientForm.email&&!Wt(this.clientForm.email)){alert("E-mail invlido");return}const{data:t,error:e}=await I.from("clients").insert({name:this.clientForm.name,email:this.clientForm.email,phone:this.clientForm.phone,birthdate:this.clientForm.birthdate,cpf:this.clientForm.cpf,cep:this.clientForm.cep,street:this.clientForm.street,number:this.clientForm.number,complement:this.clientForm.complement,neighborhood:this.clientForm.neighborhood,state_id:this.clientForm.stateId,city_id:this.clientForm.cityId,user_id:this.userId}).select().single();if(e)alert("Erro ao salvar cliente: "+e.message);else{this.clients.push(t),this.clientForm={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:""},this.stats.clients+=1;const s=new Date(t.created_at),n=new Date(s.getFullYear(),s.getMonth(),1),i=new Date(s.getFullYear(),s.getMonth()+1,0);i.setHours(23,59,59,999),s>=n&&s<=i&&(this.stats.newClients+=1),await this.fetchTopClients(),alert("Cliente cadastrado!")}},openAppointmentModal(t){t?(this.editingId=t.id,this.appointmentForm={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,duration:t.duration,description:t.description}):(this.editingId=null,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""}),this.showAppointmentModal=!0},closeAppointmentModal(){this.showAppointmentModal=!1,this.appointmentForm={date:"",time:"",clientId:"",serviceId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openAppointmentModal(this.selectedAppointment),this.closeDetails())},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){this.selectedAppointment&&(await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails())},markNoShow(){alert("Falta registrada para este atendimento.")},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),n=`Ol ${e.name},

Passando para informar que seu agendamento est confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${it(t.date)} - Hora: ${Dt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Est mensagem  uma mensagem automtica.`,o=`https://wa.me/${Zo(e.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},async handleAddAppointment(){if(this.editingId){const{data:t,error:e}=await I.from("appointments").update({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message);else{const s=this.upcomingAppointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.upcomingAppointments[s]=t),this.closeAppointmentModal(),await this.fetchStats(),await this.fetchUpcomingAppointments()}}else{const{data:t,error:e}=await I.from("appointments").insert({date:this.appointmentForm.date,time:this.appointmentForm.time,client_id:this.appointmentForm.clientId,service_id:this.appointmentForm.serviceId,duration:this.appointmentForm.duration,description:this.appointmentForm.description,user_id:this.userId}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{this.upcomingAppointments.push(t),this.closeAppointmentModal(),this.stats.week+=1,this.stats.month+=1;const s=new Date(t.date);this.weekCounts[s.getDay()]++,await this.fetchTopClients(),this.renderWeekChart()}}}},watch:{"appointmentForm.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&this.appointmentForm.duration===""&&(this.appointmentForm.duration=e.duration)},"clientForm.stateId"(){this.fetchCitiesList()},"clientForm.cep"(t){t.replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchStats(),await this.fetchUpcomingAppointments();const{data:e}=await I.from("services").select().eq("user_id",this.userId);e&&(this.services=e);const{data:s}=await I.from("rooms").select().eq("user_id",this.userId);s&&(this.rooms=s),await this.fetchStatesList()}},lS={class:"min-h-screen flex bg-gray-50 relative"},cS={class:"flex-1 p-4 md:p-8 space-y-8"},dS={key:0,class:"flex items-center mb-4"},uS={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},hS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},fS={class:"text-2xl font-bold"},pS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},mS={class:"text-2xl font-bold"},gS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},bS={class:"text-2xl font-bold"},yS={class:"bg-white p-6 rounded-lg shadow-lg text-center"},xS={class:"text-2xl font-bold"},_S={class:"bg-white p-6 rounded-lg shadow-lg h-64"},vS={ref:"weekChartCanvas",class:"w-full h-full"},wS={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},kS={class:"md:col-span-8"},SS={class:"flex items-center justify-between mb-4"},CS={class:"md:col-span-4 space-y-4"},MS={class:"bg-white p-4 rounded-lg shadow"},AS={class:"overflow-x-auto"},PS={class:"min-w-full text-left"},ES={class:"px-4 py-2"},TS={class:"px-4 py-2 text-right"},OS={key:0},DS=["value"],IS=["value"],RS={class:"flex justify-end space-x-2"},LS={class:"text-lg font-semibold mb-4"},FS=["value"],jS=["value"],NS={class:"flex justify-end space-x-2"},US={class:"mt-4"},$S={class:"flex flex-wrap justify-start gap-2"},BS={class:"mt-4"},VS={class:"flex flex-wrap justify-start gap-2"};function zS(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("WeekView"),c=z("Modal"),d=z("AppointmentDetails");return x(),w("div",lS,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=h=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",cS,[i.sidebarOpen?j("",!0):(x(),w("div",dS,[u("button",{onClick:e[1]||(e[1]=h=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[37]||(e[37]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Dashboard"}),u("section",uS,[u("div",hS,[e[38]||(e[38]=u("p",{class:"text-sm text-gray-500"},"Agendamentos na semana",-1)),u("p",fS,P(i.stats.week),1)]),u("div",pS,[e[39]||(e[39]=u("p",{class:"text-sm text-gray-500"},"Agendamentos no ms",-1)),u("p",mS,P(i.stats.month),1)]),u("div",gS,[e[40]||(e[40]=u("p",{class:"text-sm text-gray-500"},"Clientes cadastrados",-1)),u("p",bS,P(i.stats.clients),1)]),u("div",yS,[e[41]||(e[41]=u("p",{class:"text-sm text-gray-500"},"Novos clientes no ms",-1)),u("p",xS,P(i.stats.newClients),1)])]),u("section",_S,[e[42]||(e[42]=u("h3",{class:"text-lg font-medium mb-4"},"Agendamentos na semana",-1)),u("canvas",vS,null,512)]),u("section",wS,[u("div",kS,[u("div",SS,[e[43]||(e[43]=u("h3",{class:"text-lg font-medium"},"Agenda da Semana",-1)),u("button",{onClick:e[2]||(e[2]=h=>o.openAppointmentModal()),class:"btn"},"Novo Agendamento")]),O(l,{appointments:i.upcomingAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])]),u("div",CS,[u("button",{onClick:e[3]||(e[3]=(...h)=>o.openClientModal&&o.openClientModal(...h)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},"Novo Cliente"),u("div",MS,[e[46]||(e[46]=u("h4",{class:"font-medium mb-2"},"Clientes com mais agendamentos",-1)),u("div",AS,[u("table",PS,[e[45]||(e[45]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),u("th",{class:"px-4 py-2 font-medium text-gray-700 text-right"},"Agendamentos")])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(i.topClients,h=>(x(),w("tr",{key:h.id,class:"border-b last:border-b-0"},[u("td",ES,P(h.name),1),u("td",TS,P(h.count),1)]))),128)),i.topClients.length===0?(x(),w("tr",OS,e[44]||(e[44]=[u("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):j("",!0)])])])])])]),i.showClientModal?(x(),et(c,{key:1,onClose:e[21]||(e[21]=h=>i.showClientModal=!1)},{default:ee(()=>[e[62]||(e[62]=u("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Cliente",-1)),u("form",{onSubmit:e[20]||(e[20]=Je((...h)=>o.handleAddClient&&o.handleAddClient(...h),["prevent"])),class:"space-y-4"},[u("div",null,[e[47]||(e[47]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=h=>i.clientForm.name=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.name]])]),u("div",null,[e[48]||(e[48]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=h=>i.clientForm.cpf=h),onInput:e[6]||(e[6]=h=>i.clientForm.cpf=o.cpfMask(i.clientForm.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.clientForm.cpf]])]),u("div",null,[e[49]||(e[49]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=h=>i.clientForm.birthdate=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.birthdate]])]),u("div",null,[e[50]||(e[50]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[8]||(e[8]=h=>i.clientForm.email=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.email]])]),u("div",null,[e[51]||(e[51]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=h=>i.clientForm.phone=h),onInput:e[10]||(e[10]=h=>i.clientForm.phone=o.phoneMask(i.clientForm.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.clientForm.phone]])]),u("div",null,[e[52]||(e[52]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=h=>i.clientForm.cep=h),onInput:e[12]||(e[12]=h=>i.clientForm.cep=o.cepMask(i.clientForm.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.clientForm.cep]])]),u("div",null,[e[53]||(e[53]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereo",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=h=>i.clientForm.street=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.street]])]),u("div",null,[e[54]||(e[54]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nmero",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=h=>i.clientForm.number=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.number]])]),u("div",null,[e[55]||(e[55]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=h=>i.clientForm.complement=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.complement]])]),u("div",null,[e[56]||(e[56]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=h=>i.clientForm.neighborhood=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.clientForm.neighborhood]])]),u("div",null,[e[58]||(e[58]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),E(u("select",{"onUpdate:modelValue":e[17]||(e[17]=h=>i.clientForm.stateId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[57]||(e[57]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.states,h=>(x(),w("option",{key:h.id,value:h.id},P(h.nome)+" ("+P(h.sigla)+")",9,DS))),128))],512),[[ft,i.clientForm.stateId]])]),u("div",null,[e[60]||(e[60]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),E(u("select",{"onUpdate:modelValue":e[18]||(e[18]=h=>i.clientForm.cityId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[59]||(e[59]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.cities,h=>(x(),w("option",{key:h.id,value:h.id},P(h.nome),9,IS))),128))],512),[[ft,i.clientForm.cityId]])]),u("div",RS,[u("button",{type:"button",onClick:e[19]||(e[19]=h=>i.showClientModal=!1),class:"px-4 py-2 rounded border"},"Cancelar"),e[61]||(e[61]=u("button",{type:"submit",class:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700"},"Salvar",-1))])],32)]),_:1,__:[62]})):j("",!0),i.showAppointmentModal?(x(),et(c,{key:2,onClose:o.closeAppointmentModal},{default:ee(()=>[u("h3",LS,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),u("form",{onSubmit:e[29]||(e[29]=Je((...h)=>o.handleAddAppointment&&o.handleAddAppointment(...h),["prevent"])),class:"space-y-4"},[u("div",null,[e[63]||(e[63]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[22]||(e[22]=h=>i.appointmentForm.date=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.appointmentForm.date]])]),u("div",null,[e[64]||(e[64]=u("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),E(u("input",{type:"time",step:"60","onUpdate:modelValue":e[23]||(e[23]=h=>i.appointmentForm.time=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.appointmentForm.time]])]),u("div",null,[e[66]||(e[66]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),E(u("select",{"onUpdate:modelValue":e[24]||(e[24]=h=>i.appointmentForm.clientId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[65]||(e[65]=u("option",{disabled:"",value:""},"Selecione um cliente",-1)),(x(!0),w(Y,null,fe(i.clients,h=>(x(),w("option",{key:h.id,value:h.id},P(h.name),9,FS))),128))],512),[[ft,i.appointmentForm.clientId]])]),u("div",null,[e[68]||(e[68]=u("label",{class:"block text-sm font-medium text-gray-700"},"Servio",-1)),E(u("select",{"onUpdate:modelValue":e[25]||(e[25]=h=>i.appointmentForm.serviceId=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[67]||(e[67]=u("option",{disabled:"",value:""},"Selecione um servio",-1)),(x(!0),w(Y,null,fe(i.services,h=>(x(),w("option",{key:h.id,value:h.id},P(h.name),9,jS))),128))],512),[[ft,i.appointmentForm.serviceId]])]),u("div",null,[e[69]||(e[69]=u("label",{class:"block text-sm font-medium text-gray-700"},"Durao (minutos)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[26]||(e[26]=h=>i.appointmentForm.duration=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.appointmentForm.duration]])]),u("div",null,[e[70]||(e[70]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrio",-1)),E(u("textarea",{"onUpdate:modelValue":e[27]||(e[27]=h=>i.appointmentForm.description=h),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.appointmentForm.description]])]),u("div",NS,[u("button",{type:"button",onClick:e[28]||(e[28]=(...h)=>o.closeAppointmentModal&&o.closeAppointmentModal(...h)),class:"px-4 py-2 rounded border"},"Cancelar"),e[71]||(e[71]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):j("",!0),i.showDetailsModal?(x(),et(c,{key:3,onClose:o.closeDetails},{default:ee(()=>[O(d,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:ee(()=>[u("div",US,[e[72]||(e[72]=u("h4",{class:"font-medium mb-2"},"Aes de atendimento",-1)),u("div",$S,[u("button",{onClick:e[30]||(e[30]=(...h)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...h)),class:"btn btn-success"},"Enviar confirmao"),u("button",{onClick:e[31]||(e[31]=(...h)=>o.cancelAppointment&&o.cancelAppointment(...h)),class:"btn btn-warning"},"Desmarcou"),u("button",{onClick:e[32]||(e[32]=(...h)=>o.markNoShow&&o.markNoShow(...h)),class:"btn btn-secondary"},"Faltou"),u("button",{onClick:e[33]||(e[33]=(...h)=>o.startAppointment&&o.startAppointment(...h)),class:"btn btn-primary"},"Iniciar atendimento")])]),u("div",BS,[e[73]||(e[73]=u("h4",{class:"font-medium mb-2"},"Aes de cadastro",-1)),u("div",VS,[u("button",{onClick:e[34]||(e[34]=(...h)=>o.editFromDetails&&o.editFromDetails(...h)),class:"btn"},"Editar"),u("button",{onClick:e[35]||(e[35]=h=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir"),u("button",{onClick:e[36]||(e[36]=(...h)=>o.closeDetails&&o.closeDetails(...h)),class:"px-4 py-2 rounded border"},"Fechar")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):j("",!0)])])}const HS=me(aS,[["render",zS]]),WS={name:"Configuracao",components:{Sidebar:Pt,HeaderUser:Et},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,slug:"",activeTab:"perfil",form:{businessName:"",description:"",areaAtuacao:"",phone:"",whatsapp:"",email:"",address:"",instagram:"",facebook:"",youtube:"",x:"",imageUrl:"",pixKey:""},agenda:{cancelLimitHours:0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},daysOfWeekOptions:[{value:"0",label:"Domingo"},{value:"1",label:"Segunda"},{value:"2",label:"Tera"},{value:"3",label:"Quarta"},{value:"4",label:"Quinta"},{value:"5",label:"Sexta"},{value:"6",label:"Sbado"}]}},methods:{phoneMask:Yn,updateSlug(){this.slug=this.form.businessName.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},async handleSave(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail invlido");return}const t={id:this.userId,business_name:this.form.businessName,slug:this.slug,description:this.form.description,area_atuacao:this.form.areaAtuacao,phone:this.form.phone,whatsapp:this.form.whatsapp,email:this.form.email,address:this.form.address,instagram:this.form.instagram,facebook:this.form.facebook,youtube:this.form.youtube,x:this.form.x,image_url:this.form.imageUrl,pix_key:this.form.pixKey},{error:e}=await I.from("profiles").upsert(t,{onConflict:["id"]});alert(e?"Erro ao salvar dados: "+e.message:"Dados salvos com sucesso!")},async handleImageUpload(t){const e=t.target.files[0];if(!e)return;const s=e.name.split(".").pop(),n=`${this.userId}.${s}`,{error:i}=await I.storage.from("profile-images").upload(n,e,{upsert:!0});if(i){alert("Erro ao enviar imagem: "+i.message);return}const{data:{publicUrl:o}}=I.storage.from("profile-images").getPublicUrl(n);this.form.imageUrl=o},async handleSaveAgenda(){const t={start:null,end:null,days:[]};for(const[n,i]of Object.entries(this.agenda.dailySchedule))i.enabled&&i.start&&i.end&&(t.days.push(n),(!t.start||i.start<t.start)&&(t.start=i.start),(!t.end||i.end>t.end)&&(t.end=i.end));const e={id:this.userId,start_time:t.start,end_time:t.end,week_days:t.days.join(","),daily_schedule:this.agenda.dailySchedule,cancel_limit_hours:this.agenda.cancelLimitHours},{error:s}=await I.from("profiles").upsert(e,{onConflict:["id"]});alert(s?"Erro ao salvar dados: "+s.message:"Dados salvos com sucesso!")}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e,error:s}=await I.from("profiles").select().eq("id",this.userId).single();if(e){if(this.form={businessName:e.business_name||"",description:e.description||"",areaAtuacao:e.area_atuacao||"",phone:e.phone||"",whatsapp:e.whatsapp||"",email:e.email||"",address:e.address||"",instagram:e.instagram||"",facebook:e.facebook||"",youtube:e.youtube||"",x:e.x||"",imageUrl:e.image_url||"",pixKey:e.pix_key||""},this.agenda={cancelLimitHours:e.cancel_limit_hours||0,dailySchedule:{0:{enabled:!1,start:"",end:""},1:{enabled:!1,start:"",end:""},2:{enabled:!1,start:"",end:""},3:{enabled:!1,start:"",end:""},4:{enabled:!1,start:"",end:""},5:{enabled:!1,start:"",end:""},6:{enabled:!1,start:"",end:""}}},e.daily_schedule)Object.assign(this.agenda.dailySchedule,typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule);else{const n=e.week_days?e.week_days.split(","):[];for(const i of n)this.agenda.dailySchedule[i]={enabled:!0,start:e.start_time||"",end:e.end_time||""}}this.updateSlug()}}},qS={class:"min-h-screen flex bg-gray-100 relative"},KS={class:"flex-1 p-8"},GS={key:0,class:"flex items-center mb-4"},YS={class:"mb-6 space-x-2"},JS={class:"text-sm text-gray-500 mt-1"},XS={class:"font-mono"},QS=["href"],ZS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},eC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tC={key:0,class:"mt-2"},sC=["src"],nC={class:"mt-1 space-y-2"},iC=["onUpdate:modelValue"],oC={class:"w-20"},rC=["onUpdate:modelValue"],aC=["onUpdate:modelValue"];function lC(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("router-link");return x(),w("div",qS,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",KS,[i.sidebarOpen?j("",!0):(x(),w("div",GS,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[25]||(e[25]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Configuraes"}),O(l,{to:"/onboarding",class:"text-blue-600 underline mb-4 inline-block"},{default:ee(()=>e[26]||(e[26]=[te("Refazer Onboarding")])),_:1,__:[26]}),u("nav",YS,[u("button",{onClick:e[2]||(e[2]=c=>i.activeTab="perfil"),class:$e([i.activeTab==="perfil"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Perfil",2),u("button",{onClick:e[3]||(e[3]=c=>i.activeTab="agenda"),class:$e([i.activeTab==="agenda"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2"])},"Agenda",2),u("button",{onClick:e[4]||(e[4]=c=>i.activeTab="financeiro"),class:$e([i.activeTab==="financeiro"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Financeiro",2)]),i.activeTab==="perfil"?(x(),w("form",{key:1,onSubmit:e[20]||(e[20]=Je((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[e[28]||(e[28]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome Comercial",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.form.businessName=c),onInput:e[6]||(e[6]=(...c)=>o.updateSlug&&o.updateSlug(...c)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.businessName]]),u("p",JS,[e[27]||(e[27]=te(" Seu link pblico: ")),u("span",XS,"#/"+P(i.slug),1),u("a",{href:"#/"+i.slug,target:"_blank",class:"text-blue-600 hover:underline ml-2"},"Abrir pgina do cliente",8,QS)])]),u("div",null,[e[29]||(e[29]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrio do Estabelecimento",-1)),E(u("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.description]])]),u("div",null,[e[31]||(e[31]=u("label",{class:"block text-sm font-medium text-gray-700"},"rea de Atuao",-1)),E(u("select",{"onUpdate:modelValue":e[8]||(e[8]=c=>i.form.areaAtuacao=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[30]||(e[30]=[dn('<option disabled value="">Selecione</option><option>Psicologia</option><option>Terapias Gerais</option><option>Psicopedagogia</option><option>Medicina</option><option>Coaching</option><option>Fonoaudiologia</option><option>Fisioterapia</option><option>Nutrio</option><option>Terapia Ocupacional</option>',10)]),512),[[ft,i.form.areaAtuacao]])]),u("div",ZS,[u("div",null,[e[32]||(e[32]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone de Contato",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=c=>i.form.phone=c),onInput:e[10]||(e[10]=c=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.phone]])]),u("div",null,[e[33]||(e[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"WhatsApp",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=c=>i.form.whatsapp=c),onInput:e[12]||(e[12]=c=>i.form.whatsapp=o.phoneMask(i.form.whatsapp)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.whatsapp]])]),u("div",null,[e[34]||(e[34]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[13]||(e[13]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.email]])]),u("div",null,[e[35]||(e[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereo",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=c=>i.form.address=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.address]])])]),u("div",eC,[u("div",null,[e[36]||(e[36]=u("label",{class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=c=>i.form.instagram=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.instagram]])]),u("div",null,[e[37]||(e[37]=u("label",{class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=c=>i.form.facebook=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.facebook]])]),u("div",null,[e[38]||(e[38]=u("label",{class:"block text-sm font-medium text-gray-700"},"YouTube",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=c=>i.form.youtube=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.youtube]])]),u("div",null,[e[39]||(e[39]=u("label",{class:"block text-sm font-medium text-gray-700"},"X (Twitter)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=c=>i.form.x=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.x]])])]),u("div",null,[e[40]||(e[40]=u("label",{class:"block text-sm font-medium text-gray-700"},"Imagem do Estabelecimento",-1)),u("input",{type:"file",accept:"image/*",onChange:e[19]||(e[19]=(...c)=>o.handleImageUpload&&o.handleImageUpload(...c)),class:"mt-1"},null,32),i.form.imageUrl?(x(),w("div",tC,[u("img",{src:i.form.imageUrl,alt:"Imagem do estabelecimento",class:"h-24 rounded-md"},null,8,sC)])):j("",!0)]),e[41]||(e[41]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):j("",!0),i.activeTab==="agenda"?(x(),w("form",{key:2,onSubmit:e[22]||(e[22]=Je((...c)=>o.handleSaveAgenda&&o.handleSaveAgenda(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[e[43]||(e[43]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horrios por dia",-1)),u("div",nC,[(x(!0),w(Y,null,fe(i.daysOfWeekOptions,c=>(x(),w("div",{key:c.value,class:"flex items-center space-x-2"},[E(u("input",{type:"checkbox","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].enabled=d},null,8,iC),[[hl,i.agenda.dailySchedule[c.value].enabled]]),u("span",oC,P(c.label),1),E(u("input",{type:"time",step:"60","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].start=d,class:"border rounded-md px-2 py-1"},null,8,rC),[[R,i.agenda.dailySchedule[c.value].start]]),e[42]||(e[42]=u("span",null,"-",-1)),E(u("input",{type:"time",step:"60","onUpdate:modelValue":d=>i.agenda.dailySchedule[c.value].end=d,class:"border rounded-md px-2 py-1"},null,8,aC),[[R,i.agenda.dailySchedule[c.value].end]])]))),128))])]),u("div",null,[e[44]||(e[44]=u("label",{class:"block text-sm font-medium text-gray-700"},"Horas para cancelamento sem custo",-1)),E(u("input",{type:"number",min:"0","onUpdate:modelValue":e[21]||(e[21]=c=>i.agenda.cancelLimitHours=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.agenda.cancelLimitHours,void 0,{number:!0}]])]),e[45]||(e[45]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):j("",!0),i.activeTab==="financeiro"?(x(),w("form",{key:3,onSubmit:e[24]||(e[24]=Je((...c)=>o.handleSave&&o.handleSave(...c),["prevent"])),class:"space-y-6 max-w-3xl"},[u("div",null,[e[46]||(e[46]=u("label",{class:"block text-sm font-medium text-gray-700"},"Chave Pix",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[23]||(e[23]=c=>i.form.pixKey=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.pixKey]])]),e[47]||(e[47]=u("div",null,[u("button",{type:"submit",class:"btn"},"Salvar")],-1))],32)):j("",!0)])])}const cC=me(WS,[["render",lC]]);async function Vo(t,e=!0){const{error:s}=await I.functions.invoke("send-appointment-email",{body:t});s?console.error("Erro ao enviar email de agendamento:",s.message):e&&alert("E-mail enviado com sucesso!")}const dC={name:"Clientes",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{userId:null,showModal:!1,modalMode:"new",editingId:null,search:"",form:{name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1},states:[],cities:[],clients:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10,activeTab:"cadastro",originalForm:{},clientAppointments:[],history:[],services:[],rooms:[],currentClient:null}},methods:{phoneMask:Yn,digitsOnly:Zo,cpfMask:_l,cepMask:cf,formatDateBR:it,addHoursToTime:Dt,async fetchServicesList(){const{data:t}=await I.from("services").select().eq("user_id",this.userId);t&&(this.services=t)},async fetchRoomsList(){const{data:t}=await I.from("rooms").select().eq("user_id",this.userId);t&&(this.rooms=t)},async fetchStatesList(){this.states=await up()},async fetchCitiesList(){this.cities=await hp(this.form.stateId)},async fillAddressByCep(){const t=await fp(this.form.cep);if(!t)return;this.form.street=t.street||"",this.form.complement=t.complement||"",this.form.neighborhood=t.neighborhood||"";const e=this.states.find(s=>s.sigla===t.state);if(e){this.form.stateId=e.id,await this.fetchCitiesList();const s=this.cities.find(n=>n.nome.toLowerCase()===t.city.toLowerCase());s&&(this.form.cityId=s.id)}},async openModal(t,e="new"){this.modalMode=e,this.activeTab="cadastro",this.currentClient=t||null,t?(this.editingId=t.id,this.form={name:t.name,email:t.email,phone:t.phone,birthdate:t.birthdate,cpf:t.cpf,cep:t.cep,street:t.street,number:t.number,complement:t.complement,neighborhood:t.neighborhood,stateId:t.state_id,cityId:t.city_id,from_site:t.from_site,pending_update:t.pending_update},this.originalForm={...this.form},await this.fetchClientAppointments(),await this.fetchClientHistory()):(this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1},this.originalForm={...this.form},this.clientAppointments=[],this.history=[]),await this.fetchStatesList(),this.form.stateId&&await this.fetchCitiesList(),await this.fetchServicesList(),await this.fetchRoomsList(),this.showModal=!0},closeModal(){this.showModal=!1,this.modalMode="new",this.editingId=null,this.form={name:"",email:"",phone:"",birthdate:"",cpf:"",cep:"",street:"",number:"",complement:"",neighborhood:"",stateId:"",cityId:"",from_site:!1,pending_update:!1},this.activeTab="cadastro",this.clientAppointments=[],this.history=[],this.currentClient=null},handleClose(){this.modalMode==="view"?this.closeModal():confirm("Tem certeza? Os dados no foram salvos e sero perdidos.")&&this.closeModal()},whatsappLink(t){return`https://wa.me/${Zo(t)}`},async handleSaveClient(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail invlido");return}let t,e;if(this.editingId?({data:t,error:e}=await I.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,pending_update:!1}).eq("id",this.editingId).select().single(),this.originalForm={...t}):({data:t,error:e}=await I.from("clients").insert({name:this.form.name,email:this.form.email,phone:this.form.phone,birthdate:this.form.birthdate,cpf:this.form.cpf,cep:this.form.cep,street:this.form.street,number:this.form.number,complement:this.form.complement,neighborhood:this.form.neighborhood,state_id:this.form.stateId,city_id:this.form.cityId,user_id:this.userId,from_site:this.form.from_site,pending_update:this.form.pending_update}).select().single(),this.originalForm={...t}),e)alert("Erro ao salvar cliente: "+e.message);else{if(this.editingId){const s=this.clients.findIndex(n=>n.id===this.editingId);s!==-1&&(this.clients[s]=t)}else this.clients.push(t);this.closeModal(),this.currentClient=null}},async handleDeleteClient(t){if(!confirm("Tem certeza que deseja excluir este cliente?"))return;const{error:s}=await I.from("clients").delete().eq("id",t);s?alert("Erro ao excluir cliente: "+s.message):this.clients=this.clients.filter(n=>n.id!==t)},enableEdit(){this.modalMode="edit"},changeTab(t){if(t!=="cadastro"&&this.modalMode!=="view"){if(!confirm("Dados no salvos sero perdidos. Deseja continuar?"))return;this.modalMode="view",this.form={...this.originalForm}}this.activeTab=t},async fetchClientAppointments(){if(!this.editingId){this.clientAppointments=[];return}const{data:t}=await I.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.editingId).order("date",{ascending:!0}).order("time",{ascending:!0});this.clientAppointments=t||[]},async fetchClientHistory(){if(!this.editingId){this.history=[];return}if(!this.clientAppointments.length){this.history=[];return}const t=this.clientAppointments.map(s=>s.id),{data:e}=await I.from("appointment_notes").select().in("appointment_id",t).order("created_at",{ascending:!1});this.history=(e||[]).map(s=>({...s,attachments:s.attachments||[],appointment:this.clientAppointments.find(n=>n.id===s.appointment_id)||{}}))},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},async sendConfirmationEmail(t){const e=this.clients.find(i=>i.id===t.client_id),s=this.services.find(i=>i.id===t.service_id),n=this.rooms.find(i=>i.id===t.room_id);await Vo({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Ol ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${it(t.date)} s ${Dt(t.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${t.description?`Observaes: ${t.description}
`:""}
E-mail enviado automaticamente.`})},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{isReadOnly(){return this.modalMode==="view"},filteredClients(){const t=this.search.toLowerCase();return this.clients.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t))},paginatedClients(){const t=(this.page-1)*this.pageSize;return this.filteredClients.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredClients.length/this.pageSize))}},watch:{search(){this.page=1},"form.stateId"(){this.fetchCitiesList()},"form.cep"(t){t.replace(/\D/g,"").length===8&&this.fillAddressByCep()}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e),await this.fetchStatesList(),await this.fetchServicesList(),await this.fetchRoomsList()}},uC={class:"min-h-screen flex bg-gray-100 relative"},hC={class:"flex-1 p-4 md:p-8 space-y-6"},fC={key:0,class:"flex items-center mb-4"},pC={class:"bg-white p-4 rounded-lg shadow"},mC={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},gC={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},bC={class:"overflow-x-auto"},yC={class:"min-w-full text-left"},xC={class:"px-4 py-2"},_C={key:0,class:"inline-flex items-center text-red-600 text-xs ml-2"},vC={class:"px-4 py-2"},wC={class:"px-4 py-2"},kC={class:"px-4 py-2 text-right space-x-2"},SC=["href"],CC=["onClick"],MC=["onClick"],AC={key:0},PC={class:"mt-4 flex justify-between items-center"},EC=["disabled"],TC={class:"text-sm"},OC=["disabled"],DC={class:"text-lg font-semibold mb-4"},IC={key:0,class:"flex items-center text-red-600 text-sm mb-4"},RC={key:1,class:"border-b mb-4"},LC={class:"flex space-x-4"},FC=["disabled"],jC=["disabled"],NC=["disabled"],UC=["disabled"],$C=["disabled"],BC=["disabled"],VC=["disabled"],zC=["disabled"],HC=["disabled"],WC=["disabled"],qC=["disabled"],KC=["value"],GC=["disabled"],YC=["value"],JC={class:"flex justify-end space-x-2 md:col-span-2"},XC=["disabled"],QC={class:"overflow-x-auto"},ZC={class:"min-w-full text-left border-separate border-spacing-0"},eM={key:0,class:"block text-xs text-red-600"},tM=["onClick"],sM={key:0},nM={class:"space-y-4"},iM={class:"text-sm text-gray-600 mb-1"},oM={class:"mb-2 whitespace-pre-line"},rM={key:0,class:"space-x-2 mb-2"},aM=["href"],lM={class:"text-right"},cM={key:0,class:"text-center text-gray-500"};function dM(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("router-link"),c=z("Modal");return x(),w("div",uC,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=d=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",hC,[i.sidebarOpen?j("",!0):(x(),w("div",fC,[u("button",{onClick:e[1]||(e[1]=d=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[27]||(e[27]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Clientes"}),u("section",pC,[u("div",mC,[e[28]||(e[28]=u("h3",{class:"text-lg font-medium"},"Clientes cadastrados",-1)),u("div",gC,[E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>i.search=d),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[R,i.search]]),u("button",{onClick:e[3]||(e[3]=(...d)=>o.openModal&&o.openModal(...d)),class:"btn w-full sm:w-auto"}," Novo Cliente ")])]),u("div",bC,[u("table",yC,[e[31]||(e[31]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Telefone"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(o.paginatedClients,d=>(x(),w("tr",{key:d.id,class:"border-b last:border-b-0"},[u("td",xC,[u("span",null,P(d.name),1),d.from_site&&d.pending_update?(x(),w("span",_C,e[29]||(e[29]=[u("span",{class:"w-2 h-2 bg-red-600 rounded-full mr-1"},null,-1),te(" cliente cadastrado via site - pendente atualizao ")]))):j("",!0)]),u("td",vC,P(d.email),1),u("td",wC,P(o.phoneMask(d.phone)),1),u("td",kC,[u("a",{href:o.whatsappLink(d.phone),target:"_blank",rel:"noopener",class:"btn btn-sm btn-success"}," WhatsApp ",8,SC),u("button",{onClick:h=>o.openModal(d,"view"),class:"btn btn-sm"}," Visualizar ",8,CC),u("button",{onClick:h=>o.handleDeleteClient(d.id),class:"btn btn-sm btn-danger"}," Excluir ",8,MC)])]))),128)),o.filteredClients.length===0?(x(),w("tr",AC,e[30]||(e[30]=[u("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"}," Nenhum cliente encontrado ",-1)]))):j("",!0)])]),u("div",PC,[u("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...d)=>o.prevPage&&o.prevPage(...d)),disabled:i.page===1}," Anterior ",8,EC),u("span",TC,"Pgina "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...d)=>o.nextPage&&o.nextPage(...d)),disabled:i.page===o.totalPages}," Prxima ",8,OC)])])]),i.showModal?(x(),et(c,{key:1,onClose:o.handleClose},{default:ee(()=>[u("h3",DC,P(i.modalMode==="new"?"Adicionar Cliente":"Cadastro do Cliente"),1),i.currentClient&&i.currentClient.from_site&&i.currentClient.pending_update?(x(),w("div",IC,e[32]||(e[32]=[u("span",{class:"w-3 h-3 bg-red-600 rounded-full mr-2"},null,-1),te(" cliente cadastrado via site - pendente atualizao ")]))):j("",!0),i.editingId?(x(),w("div",RC,[u("nav",LC,[u("button",{class:$e(i.activeTab==="cadastro"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[6]||(e[6]=d=>o.changeTab("cadastro"))},"Cadastro",2),u("button",{class:$e(i.activeTab==="agendamentos"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[7]||(e[7]=d=>o.changeTab("agendamentos"))},"Agendamentos",2),u("button",{class:$e(i.activeTab==="historico"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[8]||(e[8]=d=>o.changeTab("historico"))},"Histrico de atendimento",2)])])):j("",!0),E(u("form",{onSubmit:e[26]||(e[26]=Je((...d)=>o.handleSaveClient&&o.handleSaveClient(...d),["prevent"])),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[u("div",null,[e[33]||(e[33]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=d=>i.form.name=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,FC),[[R,i.form.name]])]),u("div",null,[e[34]||(e[34]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=d=>i.form.cpf=d),disabled:o.isReadOnly,onInput:e[11]||(e[11]=d=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,jC),[[R,i.form.cpf]])]),u("div",null,[e[35]||(e[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data de nascimento",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=d=>i.form.birthdate=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,NC),[[R,i.form.birthdate]])]),u("div",null,[e[36]||(e[36]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[13]||(e[13]=d=>i.form.email=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,UC),[[R,i.form.email]])]),u("div",null,[e[37]||(e[37]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=d=>i.form.phone=d),disabled:o.isReadOnly,onInput:e[15]||(e[15]=d=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,$C),[[R,i.form.phone]])]),u("div",null,[e[38]||(e[38]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=d=>i.form.cep=d),disabled:o.isReadOnly,onInput:e[17]||(e[17]=d=>i.form.cep=o.cepMask(i.form.cep)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,40,BC),[[R,i.form.cep]])]),u("div",null,[e[39]||(e[39]=u("label",{class:"block text-sm font-medium text-gray-700"},"Endereo",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=d=>i.form.street=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,VC),[[R,i.form.street]])]),u("div",null,[e[40]||(e[40]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nmero",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=d=>i.form.number=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,zC),[[R,i.form.number]])]),u("div",null,[e[41]||(e[41]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=d=>i.form.complement=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,HC),[[R,i.form.complement]])]),u("div",null,[e[42]||(e[42]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=d=>i.form.neighborhood=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,WC),[[R,i.form.neighborhood]])]),u("div",null,[e[44]||(e[44]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),E(u("select",{"onUpdate:modelValue":e[22]||(e[22]=d=>i.form.stateId=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[43]||(e[43]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.states,d=>(x(),w("option",{key:d.id,value:d.id},P(d.nome)+" ("+P(d.sigla)+")",9,KC))),128))],8,qC),[[ft,i.form.stateId]])]),u("div",null,[e[46]||(e[46]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),E(u("select",{"onUpdate:modelValue":e[23]||(e[23]=d=>i.form.cityId=d),disabled:o.isReadOnly,class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[45]||(e[45]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.cities,d=>(x(),w("option",{key:d.id,value:d.id},P(d.nome),9,YC))),128))],8,GC),[[ft,i.form.cityId]])]),u("div",JC,[u("button",{type:"button",onClick:e[24]||(e[24]=(...d)=>o.handleClose&&o.handleClose(...d)),class:"px-4 py-2 rounded border"},"Fechar"),i.modalMode==="view"?(x(),w("button",{key:0,type:"button",onClick:e[25]||(e[25]=(...d)=>o.enableEdit&&o.enableEdit(...d)),class:"btn btn-success"},"Editar")):j("",!0),u("button",{type:"submit",class:"btn",disabled:o.isReadOnly},"Salvar",8,XC)])],544),[[In,i.activeTab==="cadastro"]]),E(u("div",QC,[u("table",ZC,[e[49]||(e[49]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Data/Hora"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Servio"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Aes")])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(i.clientAppointments,d=>(x(),w("tr",{key:d.id},[u("td",{class:$e(["px-4 py-2",d.from_site&&!d.confirmed?"border-l-2 border-t-2 border-b-2 border-red-500 rounded-l-md":"border-b last:border-b-0"])},[te(P(o.formatDateBR(d.date))+" "+P(o.addHoursToTime(d.time))+" ",1),d.from_site&&!d.confirmed?(x(),w("span",eM,"pendente confirmao de pagamento")):j("",!0)],2),u("td",{class:$e(["px-4 py-2",d.from_site&&!d.confirmed?"border-t-2 border-b-2 border-red-500":"border-b last:border-b-0"])},P(o.getServiceName(d.service_id)),3),u("td",{class:$e(["px-4 py-2 text-right space-x-2",d.from_site&&!d.confirmed?"border-r-2 border-t-2 border-b-2 border-red-500 rounded-r-md":"border-b last:border-b-0"])},[O(l,{to:{path:"/agendamentos",query:{edit:d.id}},class:"btn btn-sm"},{default:ee(()=>e[47]||(e[47]=[te("Editar")])),_:2,__:[47]},1032,["to"]),u("button",{onClick:h=>o.sendConfirmationEmail(d),class:"btn btn-sm btn-success"},"Enviar e-mail",8,tM)],2)]))),128)),i.clientAppointments.length===0?(x(),w("tr",sM,e[48]||(e[48]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento",-1)]))):j("",!0)])])],512),[[In,i.activeTab==="agendamentos"]]),E(u("div",nM,[(x(!0),w(Y,null,fe(i.history,d=>(x(),w("div",{key:d.id,class:"border p-2 rounded"},[u("p",iM,P(o.formatDateBR(d.appointment.date))+" "+P(o.addHoursToTime(d.appointment.time)),1),u("p",oM,P(d.note),1),d.attachments&&d.attachments.length?(x(),w("div",rM,[(x(!0),w(Y,null,fe(d.attachments,(h,f)=>(x(),w("a",{key:f,href:h,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(f+1),9,aM))),128))])):j("",!0),u("div",lM,[O(l,{to:{path:`/atendimento/${d.appointment_id}`,query:{note:d.id}},class:"btn btn-sm"},{default:ee(()=>e[50]||(e[50]=[te("Editar atendimento")])),_:2,__:[50]},1032,["to"])])]))),128)),i.history.length===0?(x(),w("p",cM,"Nenhum atendimento encontrado")):j("",!0)],512),[[In,i.activeTab==="historico"]])]),_:1},8,["onClose"])):j("",!0)])])}const uM=me(dC,[["render",dM]]),hM={name:"CalendarView",props:{appointments:{type:Array,required:!0},getClientName:{type:Function,required:!0}},data(){const t=new Date;return{currentYear:t.getFullYear(),currentMonth:t.getMonth(),monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]}},computed:{daysInMonth(){return new Date(this.currentYear,this.currentMonth+1,0).getDate()},leadingBlanks(){return new Date(this.currentYear,this.currentMonth,1).getDay()}},methods:{addHoursToTime:Dt,prevMonth(){this.currentMonth===0?(this.currentMonth=11,this.currentYear--):this.currentMonth--},nextMonth(){this.currentMonth===11?(this.currentMonth=0,this.currentYear++):this.currentMonth++},goToCurrentMonth(){const t=new Date;this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()},getAppointmentsForDay(t){const e=String(this.currentMonth+1).padStart(2,"0"),s=String(t).padStart(2,"0"),n=`${this.currentYear}-${e}-${s}`;return this.appointments.filter(i=>i.date===n)},isToday(t){const e=new Date;return this.currentYear===e.getFullYear()&&this.currentMonth===e.getMonth()&&t===e.getDate()}}},fM={class:"bg-white rounded-lg shadow overflow-hidden"},pM={class:"flex justify-between items-center px-4 py-2 border-b bg-gray-50"},mM={class:"font-semibold"},gM={class:"grid grid-cols-7 gap-px text-sm bg-gray-100"},bM={class:"text-center font-medium"},yM=["onClick"];function xM(t,e,s,n,i,o){return x(),w("div",fM,[u("div",pM,[u("button",{onClick:e[0]||(e[0]=(...r)=>o.prevMonth&&o.prevMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},e[2]||(e[2]=[u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),u("div",mM,P(i.monthNames[i.currentMonth])+" "+P(i.currentYear),1),u("button",{onClick:e[1]||(e[1]=(...r)=>o.nextMonth&&o.nextMonth(...r)),class:"p-1 rounded hover:bg-gray-200"},e[3]||(e[3]=[u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),u("div",gM,[(x(!0),w(Y,null,fe(i.daysOfWeek,r=>(x(),w("div",{class:"font-semibold text-center bg-gray-50 p-1",key:r},P(r),1))),128)),(x(!0),w(Y,null,fe(o.leadingBlanks,r=>(x(),w("div",{key:"b"+r,class:"bg-white h-24"}))),128)),(x(!0),w(Y,null,fe(o.daysInMonth,r=>(x(),w("div",{key:r,class:$e(["border border-gray-200 h-24 p-1 overflow-auto bg-white",{"bg-blue-50 border-l-4 border-blue-500":o.isToday(r)}])},[u("div",bM,P(r),1),u("ul",null,[(x(!0),w(Y,null,fe(o.getAppointmentsForDay(r),a=>(x(),w("li",{key:a.id,class:$e(["text-xs truncate cursor-pointer",a.from_site&&!a.confirmed?"text-red-600":""]),onClick:l=>t.$emit("select",a)},P(o.addHoursToTime(a.time))+" - "+P(s.getClientName(a.client_id)),11,yM))),128))])],2))),128))])])}const _M=me(hM,[["render",xM]]),vM={name:"Agendamentos",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs,CalendarView:_M,WeekView:hf,AppointmentDetails:ff},data(){return{userId:null,showModal:!1,editingId:null,viewMode:"week",form:{date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},clients:[],services:[],rooms:[],appointments:[],selectedAppointment:null,showDetailsModal:!1,filterStartDate:"",filterEndDate:"",searchQuery:"",sortColumn:"",sortAsc:!0,showViewDropdown:!1,sidebarOpen:window.innerWidth>=768,schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null,cancelLimitHours:0},profileWhatsapp:""}},computed:{processedAppointments(){let t=this.appointments.slice();if(this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter(s=>s.date.toLowerCase().includes(e)||s.time.toLowerCase().includes(e)||this.getClientName(s.client_id).toLowerCase().includes(e)||this.getServiceName(s.service_id).toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e))}return this.filterStartDate&&(t=t.filter(e=>e.date>=this.filterStartDate)),this.filterEndDate&&(t=t.filter(e=>e.date<=this.filterEndDate)),this.sortColumn&&t.sort((e,s)=>{let n,i;switch(this.sortColumn){case"client":n=this.getClientName(e.client_id),i=this.getClientName(s.client_id);break;case"service":n=this.getServiceName(e.service_id),i=this.getServiceName(s.service_id);break;case"datetime":n=e.date+" "+e.time,i=s.date+" "+s.time;break;default:n=e[this.sortColumn],i=s[this.sortColumn]}return n<i?this.sortAsc?-1:1:n>i?this.sortAsc?1:-1:0}),t},scheduleStartHour(){const t=this.schedule.startTime,e=t?parseInt(t.split(":")[0]):6;return Math.max(0,e-1)},scheduleEndHour(){const t=this.schedule.endTime,e=t?parseInt(t.split(":")[0]):23;return Math.min(23,e+1)}},methods:{formatDateBR:it,addHoursToTime:Dt,openModal(t){t?(this.editingId=t.id,this.form={date:t.date,time:t.time,clientId:t.client_id,serviceId:t.service_id,roomId:t.room_id||"",duration:t.duration,description:t.description}):(this.editingId=null,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={date:"",time:"",clientId:"",serviceId:"",roomId:"",duration:"",description:""},this.editingId=null},editFromDetails(){this.selectedAppointment&&(this.openModal(this.selectedAppointment),this.closeDetails())},closeDetails(){this.showDetailsModal=!1,this.selectedAppointment=null},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:e>=n.start&&e<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},canCancelAppointment(t){const e=this.schedule.cancelLimitHours||0;return e===0?!0:(uf(t.date,t.time)-df())/36e5>=e},async handleSaveAppointment(){if(!this.isSlotAllowed(this.form.date,this.form.time)){alert("Horrio fora do horrio de trabalho configurado");return}if(this.editingId){const{data:t,error:e}=await I.from("appointments").update({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description}).eq("id",this.editingId).select().single();if(e)alert("Erro ao atualizar agendamento: "+e.message);else{const s=this.appointments.findIndex(n=>n.id===this.editingId);s!==-1&&(this.appointments[s]=t),this.closeModal()}}else{const{data:t,error:e}=await I.from("appointments").insert({date:this.form.date,time:this.form.time,client_id:this.form.clientId,service_id:this.form.serviceId,room_id:this.form.roomId||null,duration:this.form.duration,description:this.form.description,user_id:this.userId,confirmed:!0,from_site:!1}).select().single();if(e)alert("Erro ao salvar agendamento: "+e.message);else{this.appointments.push(t);const s=this.clients.find(o=>o.id===this.form.clientId),n=this.services.find(o=>o.id===this.form.serviceId),i=this.rooms.find(o=>o.id===this.form.roomId);await Vo({to:s==null?void 0:s.email,subject:"Agendamento de Consulta realizado",text:`Ol ${s==null?void 0:s.name},

Seu agendamento para ${n==null?void 0:n.name} foi confirmado para ${it(this.form.date)} s ${this.form.time}.
${i?`Sala: ${i.name}
`:""}${i!=null&&i.google_meet_link?`Link: ${i.google_meet_link}
`:""}${this.form.description?`Observaes: ${this.form.description}
`:""}
E-mail enviado automaticamente.`},!1),this.closeModal()}}},async handleDeleteAppointment(t,e="Tem certeza que deseja excluir este agendamento?"){const s=this.appointments.find(o=>o.id===t);if(s&&!this.canCancelAppointment(s)){alert("Agendamento fora da poltica de cancelamento.");return}if(!confirm(e))return;const{error:i}=await I.from("appointments").delete().eq("id",t);i?alert("Erro ao excluir agendamento: "+i.message):(this.appointments=this.appointments.filter(o=>o.id!==t),this.selectedAppointment&&this.selectedAppointment.id===t&&(this.showDetailsModal=!1,this.selectedAppointment=null))},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},getClientEmail(t){const e=this.clients.find(s=>s.id===t);return e?e.email:""},getServiceName(t){const e=this.services.find(s=>s.id===t);return e?e.name:""},getRoomName(t){const e=this.rooms.find(s=>s.id===t);return e?e.name:""},getRoomLink(t){const e=this.rooms.find(s=>s.id===t);return e?e.google_meet_link:""},sortBy(t){this.sortColumn===t?this.sortAsc=!this.sortAsc:(this.sortColumn=t,this.sortAsc=!0)},setViewMode(t){this.viewMode=t,this.showViewDropdown=!1,t==="calendar"&&this.$refs.calendarView&&this.$refs.calendarView.goToCurrentMonth&&this.$refs.calendarView.goToCurrentMonth()},openDetails(t){this.selectedAppointment=t,this.showDetailsModal=!0},startAppointment(){this.selectedAppointment&&this.$router.push(`/atendimento/${this.selectedAppointment.id}`)},async cancelAppointment(){if(this.selectedAppointment){if(!this.canCancelAppointment(this.selectedAppointment)){alert("Agendamento fora da poltica de cancelamento.");return}await this.handleDeleteAppointment(this.selectedAppointment.id,"Tem certeza que deseja desmarcar este atendimento?"),this.closeDetails()}},markNoShow(){alert("Falta registrada para este atendimento.")},async sendConfirmationEmail(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(i=>i.id===t.client_id),s=this.services.find(i=>i.id===t.service_id),n=this.rooms.find(i=>i.id===t.room_id);await Vo({to:e==null?void 0:e.email,subject:"Agendamento de Consulta realizado",text:`Ol ${e==null?void 0:e.name},

Seu agendamento para ${s==null?void 0:s.name} foi confirmado para ${it(t.date)} s ${Dt(t.time)}.
${n?`Sala: ${n.name}
`:""}${n!=null&&n.google_meet_link?`Link: ${n.google_meet_link}
`:""}${t.description?`Observaes: ${t.description}
`:""}
E-mail enviado automaticamente.`})},async confirmPayment(){const t=this.selectedAppointment;if(!t)return;const{data:e,error:s}=await I.from("appointments").update({confirmed:!0}).eq("id",t.id).select().single();if(s){alert("Erro ao confirmar pagamento: "+s.message);return}Object.assign(t,e);const n=this.clients.find(r=>r.id===t.client_id),i=this.services.find(r=>r.id===t.service_id),o=this.rooms.find(r=>r.id===t.room_id);await Vo({to:n==null?void 0:n.email,subject:"Agendamento confirmado",text:`Ol ${n==null?void 0:n.name},

Seu agendamento para ${i==null?void 0:i.name} foi confirmado para ${it(t.date)} s ${Dt(t.time)}.
${o?`Sala: ${o.name}
`:""}${o!=null&&o.google_meet_link?`Link: ${o.google_meet_link}
`:""}${t.description?`Observaes: ${t.description}
`:""}
E-mail enviado automaticamente.`},!1)},sendConfirmationWhatsApp(){const t=this.selectedAppointment;if(!t)return;const e=this.clients.find(r=>r.id===t.client_id);if(!(e!=null&&e.phone)){alert("Cliente sem telefone cadastrado");return}const s=this.rooms.find(r=>r.id===t.room_id),n=`Ol ${e.name},

Passando para informar que seu agendamento est confirmado!

Segue os dados para consulta:
Cliente: ${e.name}
Data: ${it(t.date)} - Hora: ${Dt(t.time)}
Sala: ${(s==null?void 0:s.google_meet_link)||""}

Obrigado.

Est mensagem  uma mensagem automtica.`,o=`https://wa.me/${Zo(e.phone)}?text=${encodeURIComponent(n)}`;window.open(o,"_blank")},exportCSV(){const t=["Data","Hora","Cliente","Servio","Durao","Descrio"],e=this.appointments.map(o=>[it(o.date),Dt(o.time),this.getClientName(o.client_id),this.getServiceName(o.service_id),o.duration,(o.description||"").replace(/(\r\n|\n|\r)/g," ")]),s=[t.join(","),...e.map(o=>o.map(r=>`"${String(r).replace(/"/g,'""')}"`).join(","))].join(`
`),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.setAttribute("download","agendamentos.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},clearFilters(){this.searchQuery="",this.filterStartDate="",this.filterEndDate=""}},watch:{"form.serviceId"(t){const e=this.services.find(s=>s.id===t);e&&(!this.editingId||this.form.duration==="")&&(this.form.duration=e.duration)}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await I.from("services").select().eq("user_id",this.userId);s&&(this.services=s);const{data:n}=await I.from("rooms").select().eq("user_id",this.userId);n&&(this.rooms=n);const{data:i}=await I.from("profiles").select("start_time, end_time, week_days, daily_schedule, whatsapp, cancel_limit_hours").eq("id",this.userId).single();i&&(this.schedule.startTime=i.start_time||"",this.schedule.endTime=i.end_time||"",this.schedule.weekDays=i.week_days?i.week_days.split(","):[],this.schedule.dailySchedule=i.daily_schedule?typeof i.daily_schedule=="string"?JSON.parse(i.daily_schedule):i.daily_schedule:null,this.schedule.cancelLimitHours=i.cancel_limit_hours||0,this.profileWhatsapp=i.whatsapp||"");const{data:o}=await I.from("appointments").select().eq("user_id",this.userId);o&&(this.appointments=o);const r=this.$route.query.edit;if(r){const a=this.appointments.find(l=>l.id===r);a&&this.openModal(a)}}},wM={class:"min-h-screen flex bg-gray-100 relative"},kM={class:"flex-1 p-4 md:p-8"},SM={key:0,class:"flex items-center mb-4"},CM={class:"flex flex-col sm:flex-row sm:items-center mb-4 gap-2"},MM={class:"mb-4 flex items-center space-x-2"},AM={class:"relative"},PM={key:0,class:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20"},EM={class:"text-lg font-semibold mb-4"},TM=["value"],OM=["value"],DM=["value"],IM={class:"flex justify-end space-x-2"},RM={key:0,class:"mt-4"},LM={class:"flex flex-wrap justify-start gap-2"},FM={class:"mt-4"},jM={class:"flex flex-wrap justify-start gap-2"},NM={class:"mt-4"},UM={class:"flex flex-wrap justify-start gap-2"},$M={class:"mt-8"},BM={class:"bg-white p-4 rounded-lg shadow"},VM={class:"overflow-x-auto"},zM={class:"min-w-full text-left"},HM={class:"bg-gray-50"},WM={key:0},qM={key:0},KM={key:0},GM={key:0},YM={key:0},JM={class:"px-4 py-2"},XM={class:"px-4 py-2"},QM={class:"px-4 py-2"},ZM={class:"px-4 py-2"},eA={class:"px-4 py-2"},tA={class:"px-4 py-2"},sA={class:"px-4 py-2 text-right space-x-2"},nA=["onClick"],iA={key:0},oA={class:"mt-8"},rA={class:"mt-8"};function aA(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal"),c=z("AppointmentDetails"),d=z("CalendarView"),h=z("WeekView");return x(),w("div",wM,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=f=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",kM,[i.sidebarOpen?j("",!0):(x(),w("div",SM,[u("button",{onClick:e[1]||(e[1]=f=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[33]||(e[33]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Agendamentos"}),u("section",null,[u("div",CM,[E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=f=>i.searchQuery=f),type:"text",placeholder:"Buscar...",class:"border px-3 py-2 rounded-lg flex-grow sm:max-w-xs"},null,512),[[R,i.searchQuery]]),E(u("input",{"onUpdate:modelValue":e[3]||(e[3]=f=>i.filterStartDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[R,i.filterStartDate]]),E(u("input",{"onUpdate:modelValue":e[4]||(e[4]=f=>i.filterEndDate=f),type:"date",class:"border px-3 py-2 rounded-lg"},null,512),[[R,i.filterEndDate]]),u("button",{onClick:e[5]||(e[5]=(...f)=>o.clearFilters&&o.clearFilters(...f)),class:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Limpar"),u("button",{onClick:e[6]||(e[6]=f=>o.openModal()),class:"btn sm:ml-auto w-full sm:w-auto"},"Novo"),u("button",{onClick:e[7]||(e[7]=(...f)=>o.exportCSV&&o.exportCSV(...f)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full sm:w-auto"},"Exportar")]),u("div",MM,[e[34]||(e[34]=u("span",{class:"text-xs text-gray-600"},"Modo de exibio:",-1)),u("div",AM,[u("button",{onClick:e[8]||(e[8]=f=>i.showViewDropdown=!i.showViewDropdown),class:"px-4 py-2 bg-gray-200 rounded-lg"},P(i.viewMode==="list"?"Lista":i.viewMode==="calendar"?"Calendrio":"Semana"),1),i.showViewDropdown?(x(),w("div",PM,[u("button",{onClick:e[9]||(e[9]=f=>o.setViewMode("list")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Lista"),u("button",{onClick:e[10]||(e[10]=f=>o.setViewMode("calendar")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Calendrio"),u("button",{onClick:e[11]||(e[11]=f=>o.setViewMode("week")),class:"block w-full text-left px-4 py-2 hover:bg-gray-100"},"Semana")])):j("",!0)])]),i.showModal?(x(),et(l,{key:0,onClose:o.closeModal},{default:ee(()=>[u("h3",EM,P(i.editingId?"Editar Agendamento":"Adicionar Agendamento"),1),u("form",{onSubmit:e[20]||(e[20]=Je((...f)=>o.handleSaveAppointment&&o.handleSaveAppointment(...f),["prevent"])),class:"space-y-4"},[u("div",null,[e[35]||(e[35]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=f=>i.form.date=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[R,i.form.date]])]),u("div",null,[e[36]||(e[36]=u("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),E(u("input",{type:"time",step:"60","onUpdate:modelValue":e[13]||(e[13]=f=>i.form.time=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[R,i.form.time]])]),u("div",null,[e[38]||(e[38]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),E(u("select",{"onUpdate:modelValue":e[14]||(e[14]=f=>i.form.clientId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[37]||(e[37]=u("option",{disabled:"",value:""},"Selecione um cliente",-1)),(x(!0),w(Y,null,fe(i.clients,f=>(x(),w("option",{key:f.id,value:f.id},P(f.name),9,TM))),128))],512),[[ft,i.form.clientId]])]),u("div",null,[e[40]||(e[40]=u("label",{class:"block text-sm font-medium text-gray-700"},"Servio",-1)),E(u("select",{"onUpdate:modelValue":e[15]||(e[15]=f=>i.form.serviceId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[39]||(e[39]=u("option",{disabled:"",value:""},"Selecione um servio",-1)),(x(!0),w(Y,null,fe(i.services,f=>(x(),w("option",{key:f.id,value:f.id},P(f.name),9,OM))),128))],512),[[ft,i.form.serviceId]])]),u("div",null,[e[42]||(e[42]=u("label",{class:"block text-sm font-medium text-gray-700"},"Sala de Reunio",-1)),E(u("select",{"onUpdate:modelValue":e[16]||(e[16]=f=>i.form.roomId=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},[e[41]||(e[41]=u("option",{disabled:"",value:""},"Selecione uma sala",-1)),(x(!0),w(Y,null,fe(i.rooms,f=>(x(),w("option",{key:f.id,value:f.id},P(f.name),9,DM))),128))],512),[[ft,i.form.roomId]])]),u("div",null,[e[43]||(e[43]=u("label",{class:"block text-sm font-medium text-gray-700"},"Durao (minutos)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=f=>i.form.duration=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[R,i.form.duration]])]),u("div",null,[e[44]||(e[44]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrio",-1)),E(u("textarea",{"onUpdate:modelValue":e[18]||(e[18]=f=>i.form.description=f),class:"w-full mt-1 px-4 py-2 border rounded-lg"},null,512),[[R,i.form.description]])]),u("div",IM,[u("button",{type:"button",onClick:e[19]||(e[19]=(...f)=>o.closeModal&&o.closeModal(...f)),class:"px-4 py-2 rounded border"},"Cancelar"),e[45]||(e[45]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):j("",!0),i.showDetailsModal?(x(),et(l,{key:1,onClose:o.closeDetails},{default:ee(()=>[O(c,{appointment:i.selectedAppointment,getClientName:o.getClientName,getServiceName:o.getServiceName,getRoomName:o.getRoomName,getRoomLink:o.getRoomLink,onClose:o.closeDetails},{actions:ee(()=>[i.selectedAppointment&&i.selectedAppointment.from_site&&!i.selectedAppointment.confirmed?(x(),w("div",RM,[e[46]||(e[46]=u("h4",{class:"font-medium mb-2"},"Aes Financeiras",-1)),u("div",LM,[u("button",{onClick:e[21]||(e[21]=(...f)=>o.confirmPayment&&o.confirmPayment(...f)),class:"btn btn-primary"}," Confirmar pagamento ")])])):j("",!0),u("div",FM,[e[47]||(e[47]=u("h4",{class:"font-medium mb-2"},"Aes de atendimento",-1)),u("div",jM,[u("button",{onClick:e[22]||(e[22]=(...f)=>o.sendConfirmationWhatsApp&&o.sendConfirmationWhatsApp(...f)),class:"btn btn-success"},"Enviar confirmao"),u("button",{onClick:e[23]||(e[23]=(...f)=>o.cancelAppointment&&o.cancelAppointment(...f)),class:"btn btn-warning"},"Desmarcou"),u("button",{onClick:e[24]||(e[24]=(...f)=>o.markNoShow&&o.markNoShow(...f)),class:"btn btn-secondary"},"Faltou"),u("button",{onClick:e[25]||(e[25]=(...f)=>o.startAppointment&&o.startAppointment(...f)),class:"btn btn-primary"},"Iniciar atendimento")])]),u("div",NM,[e[48]||(e[48]=u("h4",{class:"font-medium mb-2"},"Aes de cadastro",-1)),u("div",UM,[u("button",{onClick:e[26]||(e[26]=(...f)=>o.editFromDetails&&o.editFromDetails(...f)),class:"btn"},"Editar"),u("button",{onClick:e[27]||(e[27]=f=>o.handleDeleteAppointment(i.selectedAppointment.id)),class:"btn btn-danger"},"Excluir")])])]),_:1},8,["appointment","getClientName","getServiceName","getRoomName","getRoomLink","onClose"])]),_:1},8,["onClose"])):j("",!0),E(u("div",$M,[e[57]||(e[57]=u("h3",{class:"text-lg font-medium mb-4"},"Agendamentos",-1)),u("div",BM,[u("div",VM,[u("table",zM,[u("thead",HM,[u("tr",null,[u("th",{onClick:e[28]||(e[28]=f=>o.sortBy("datetime")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[49]||(e[49]=te(" Data/Hora ")),i.sortColumn==="datetime"?(x(),w("span",WM,P(i.sortAsc?"":""),1)):j("",!0)]),u("th",{onClick:e[29]||(e[29]=f=>o.sortBy("client")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[50]||(e[50]=te(" Cliente ")),i.sortColumn==="client"?(x(),w("span",qM,P(i.sortAsc?"":""),1)):j("",!0)]),u("th",{onClick:e[30]||(e[30]=f=>o.sortBy("service")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[51]||(e[51]=te(" Servio ")),i.sortColumn==="service"?(x(),w("span",KM,P(i.sortAsc?"":""),1)):j("",!0)]),e[54]||(e[54]=u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Sala",-1)),u("th",{onClick:e[31]||(e[31]=f=>o.sortBy("duration")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[52]||(e[52]=te(" Durao ")),i.sortColumn==="duration"?(x(),w("span",GM,P(i.sortAsc?"":""),1)):j("",!0)]),u("th",{onClick:e[32]||(e[32]=f=>o.sortBy("description")),class:"px-4 py-2 font-medium text-gray-700 cursor-pointer"},[e[53]||(e[53]=te(" Descrio ")),i.sortColumn==="description"?(x(),w("span",YM,P(i.sortAsc?"":""),1)):j("",!0)]),e[55]||(e[55]=u("th",{class:"px-4 py-2"},null,-1))])]),u("tbody",null,[(x(!0),w(Y,null,fe(o.processedAppointments,f=>(x(),w("tr",{key:f.id,class:$e(["border-b last:border-b-0",f.from_site&&!f.confirmed?"text-red-600":""])},[u("td",JM,P(o.formatDateBR(f.date))+" "+P(o.addHoursToTime(f.time)),1),u("td",XM,P(o.getClientName(f.client_id)),1),u("td",QM,P(o.getServiceName(f.service_id)),1),u("td",ZM,P(o.getRoomName(f.room_id)),1),u("td",eA,P(f.duration)+" minutos",1),u("td",tA,P(f.description),1),u("td",sA,[u("button",{onClick:p=>o.openDetails(f),class:"btn btn-sm"},"Visualizar",8,nA)])],2))),128)),o.processedAppointments.length===0?(x(),w("tr",iA,e[56]||(e[56]=[u("td",{colspan:"7",class:"px-4 py-6 text-center text-gray-500"},"Nenhum agendamento encontrado",-1)]))):j("",!0)])])])])],512),[[In,i.viewMode==="list"]]),E(u("div",oA,[e[58]||(e[58]=u("h3",{class:"text-lg font-medium mb-4"},"Calendrio",-1)),O(d,{ref:"calendarView",appointments:o.processedAppointments,getClientName:o.getClientName,onSelect:o.openDetails},null,8,["appointments","getClientName","onSelect"])],512),[[In,i.viewMode==="calendar"]]),E(u("div",rA,[e[59]||(e[59]=u("h3",{class:"text-lg font-medium mb-4"},"Semana",-1)),O(h,{appointments:o.processedAppointments,getClientName:o.getClientName,startHour:o.scheduleStartHour,endHour:o.scheduleEndHour,onSelect:o.openDetails},null,8,["appointments","getClientName","startHour","endHour","onSelect"])],512),[[In,i.viewMode==="week"]])])])])}const lA=me(vM,[["render",aA]]),cA={name:"Servicos",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{userId:null,showModal:!1,editingId:null,search:"",sidebarOpen:window.innerWidth>=768,form:{name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null},services:[],page:1,pageSize:10}},methods:{openModal(t){t?(this.editingId=t.id,this.form={name:t.name,description:t.description,duration:t.duration,price:t.price,allowOnlineBooking:t.allow_online_booking,isPackage:t.is_package,sessions:t.session_count}):(this.editingId=null,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null}),this.showModal=!0},closeModal(){this.showModal=!1,this.form={name:"",description:"",duration:"",price:"",allowOnlineBooking:!0,isPackage:!1,sessions:null},this.editingId=null},async handleSaveService(){let t,e;if(this.editingId?{data:t,error:e}=await I.from("services").update({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions}).eq("id",this.editingId).select().single():{data:t,error:e}=await I.from("services").insert({name:this.form.name,description:this.form.description,duration:this.form.duration,price:parseFloat(this.form.price),allow_online_booking:this.form.allowOnlineBooking,is_package:this.form.isPackage,session_count:this.form.sessions,user_id:this.userId}).select().single(),e)alert("Erro ao salvar servio: "+e.message);else{if(this.editingId){const s=this.services.findIndex(n=>n.id===this.editingId);s!==-1&&(this.services[s]=t)}else this.services.push(t);this.closeModal()}},async handleDeleteService(t){if(!confirm("Tem certeza que deseja excluir este servio?"))return;const{error:s}=await I.from("services").delete().eq("id",t);s?alert("Erro ao excluir servio: "+s.message):this.services=this.services.filter(n=>n.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--},formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}},computed:{filteredServices(){const t=this.search.toLowerCase();return this.services.filter(e=>e.name.toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.duration||"").toLowerCase().includes(t)||e.price!==null&&e.price.toString().includes(t))},paginatedServices(){const t=(this.page-1)*this.pageSize;return this.filteredServices.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredServices.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("services").select().eq("user_id",this.userId);e&&(this.services=e)}},dA={class:"min-h-screen flex bg-gray-100 relative"},uA={class:"flex-1 p-4 md:p-8 space-y-6"},hA={key:0,class:"flex items-center mb-4"},fA={class:"bg-white p-4 rounded-lg shadow"},pA={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-4 sm:space-y-0"},mA={class:"flex flex-col sm:flex-row items-stretch sm:items-center w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-3"},gA={class:"overflow-x-auto"},bA={class:"min-w-full text-left"},yA={class:"px-4 py-2"},xA={class:"px-4 py-2"},_A={class:"px-4 py-2"},vA={class:"px-4 py-2"},wA={class:"px-4 py-2 text-right space-x-2"},kA=["onClick"],SA=["onClick"],CA={key:0},MA={class:"mt-4 flex justify-between items-center"},AA=["disabled"],PA={class:"text-sm"},EA=["disabled"],TA={class:"text-lg font-semibold mb-4"},OA={key:0},DA={class:"flex justify-end space-x-2"};function IA(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return x(),w("div",dA,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",uA,[i.sidebarOpen?j("",!0):(x(),w("div",hA,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[15]||(e[15]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Servios"}),u("section",fA,[u("div",pA,[e[16]||(e[16]=u("h3",{class:"text-lg font-medium"},"Servios cadastrados",-1)),u("div",mA,[E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"},null,512),[[R,i.search]]),u("button",{onClick:e[3]||(e[3]=c=>o.openModal()),class:"btn w-full sm:w-auto"}," Novo Servio ")])]),u("div",gA,[u("table",bA,[e[18]||(e[18]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Descrio"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Durao"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Valor"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(o.paginatedServices,c=>(x(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",yA,P(c.name),1),u("td",xA,P(c.description),1),u("td",_A,P(c.duration)+" minutos",1),u("td",vA,P(o.formatPrice(c.price)),1),u("td",wA,[u("button",{onClick:d=>o.openModal(c),class:"btn btn-sm"}," Editar ",8,kA),u("button",{onClick:d=>o.handleDeleteService(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,SA)])]))),128)),o.filteredServices.length===0?(x(),w("tr",CA,e[17]||(e[17]=[u("td",{colspan:"5",class:"px-4 py-6 text-center text-gray-500"}," Nenhum servio encontrado ",-1)]))):j("",!0)])]),u("div",MA,[u("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,AA),u("span",PA,"Pgina "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Prxima ",8,EA)])])]),i.showModal?(x(),et(l,{key:1,onClose:o.closeModal},{default:ee(()=>[u("h3",TA,P(i.editingId?"Editar Servio":"Adicionar Servio"),1),u("form",{onSubmit:e[14]||(e[14]=Je((...c)=>o.handleSaveService&&o.handleSaveService(...c),["prevent"])),class:"space-y-6"},[u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.name]])]),u("div",null,[e[20]||(e[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Descrio",-1)),E(u("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.description=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.description]])]),u("div",null,[e[21]||(e[21]=u("label",{class:"block text-sm font-medium text-gray-700"},"Tempo de durao",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=c=>i.form.duration=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.duration]])]),u("div",null,[e[22]||(e[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"Valor",-1)),E(u("input",{type:"number",step:"0.01","onUpdate:modelValue":e[9]||(e[9]=c=>i.form.price=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.price]])]),u("div",null,[e[24]||(e[24]=u("label",{class:"block text-sm font-medium text-gray-700"},"Agendvel pelo site?",-1)),E(u("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>i.form.allowOnlineBooking=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[23]||(e[23]=[u("option",{value:!0},"Sim",-1),u("option",{value:!1},"No",-1)]),512),[[ft,i.form.allowOnlineBooking]])]),u("div",null,[e[26]||(e[26]=u("label",{class:"block text-sm font-medium text-gray-700"}," pacote?",-1)),E(u("select",{"onUpdate:modelValue":e[11]||(e[11]=c=>i.form.isPackage=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},e[25]||(e[25]=[u("option",{value:!0},"Sim",-1),u("option",{value:!1},"No",-1)]),512),[[ft,i.form.isPackage]])]),i.form.isPackage?(x(),w("div",OA,[e[27]||(e[27]=u("label",{class:"block text-sm font-medium text-gray-700"},"Quantidade de sesses",-1)),E(u("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=c=>i.form.sessions=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.sessions]])])):j("",!0),u("div",DA,[u("button",{type:"button",onClick:e[13]||(e[13]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[28]||(e[28]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1},8,["onClose"])):j("",!0)])])}const RA=me(cA,[["render",IA]]),LA={name:"Usuarios",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{form:{email:"",password:""},sidebarOpen:window.innerWidth>=768,userId:null,successMessage:"",errorMessage:"",users:[],search:"",showUserModal:!1,userModalMode:"new",selectedUserId:null,userForm:{email:"",password:""}}},methods:{async handleAddUser(){if(this.successMessage="",this.errorMessage="",this.form.email&&!Wt(this.form.email)){this.errorMessage="E-mail invlido";return}const{data:{user:t}}=await I.auth.getUser(),{data:{session:e}}=await I.auth.getSession();let s=null;if(t){const{data:o}=await I.from("profiles").select("*").eq("id",t.id).single();s=o}const{data:n,error:i}=await I.auth.signUp({email:this.form.email,password:this.form.password});e&&await I.auth.setSession(e),i?this.errorMessage="Erro ao cadastrar usurio: "+i.message:(n!=null&&n.user&&s&&await I.from("profiles").insert({id:n.user.id,business_name:s.business_name,description:s.description,phone:s.phone,whatsapp:s.whatsapp,email:s.email,address:s.address,instagram:s.instagram,facebook:s.facebook,youtube:s.youtube,x:s.x,slug:s.slug}),this.successMessage="Usurio cadastrado! Verifique o e-mail para ativar a conta.",this.form={email:"",password:""},await this.fetchUsers())},openUserModal(t,e="new"){this.userModalMode=e,t?(this.selectedUserId=t.id,this.userForm={email:t.email,password:""}):(this.selectedUserId=null,this.userForm={email:"",password:""}),this.showUserModal=!0},handleUserClose(){this.userModalMode==="view"?this.closeUserModal():confirm("Tem certeza? Os dados no foram salvos e sero perdidos.")&&this.closeUserModal()},closeUserModal(){this.showUserModal=!1,this.userModalMode="new",this.selectedUserId=null,this.userForm={email:"",password:""}},enableUserEdit(){this.userModalMode="edit"},async handleSaveUser(){if(this.userModalMode!=="view"){if(this.userForm.email&&!Wt(this.userForm.email)){alert("E-mail invlido");return}if(this.selectedUserId){const{error:t}=await I.from("profiles").update({email:this.userForm.email}).eq("id",this.selectedUserId);if(t)alert("Erro ao salvar usurio: "+t.message);else{const e=this.users.findIndex(s=>s.id===this.selectedUserId);e!==-1&&(this.users[e].email=this.userForm.email),this.closeUserModal()}}else this.form={email:this.userForm.email,password:this.userForm.password},await this.handleAddUser(),this.closeUserModal()}},async fetchUsers(){const{data:t}=await I.from("profiles").select("slug").eq("id",this.userId).single();if(t){const{data:e}=await I.from("profiles").select("id, email").eq("slug",t.slug);this.users=e||[]}}},computed:{isUserView(){return this.userModalMode==="view"},filteredUsers(){const t=this.search.toLowerCase();return this.users.filter(e=>e.id.toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t))}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchUsers()}},FA={class:"min-h-screen flex bg-gray-100 relative"},jA={class:"flex-1 p-8 space-y-6"},NA={key:0,class:"flex items-center mb-4"},UA={class:"bg-white p-4 rounded-lg shadow"},$A={key:0,class:"text-green-600 mt-4"},BA={key:1,class:"text-red-600 mt-4"},VA={class:"bg-white p-4 rounded-lg shadow"},zA={class:"flex justify-between items-center mb-4"},HA={class:"overflow-x-auto"},WA={class:"min-w-full text-left"},qA={class:"px-4 py-2"},KA={class:"px-4 py-2"},GA={class:"px-4 py-2 text-right"},YA=["onClick"],JA={key:0},XA={class:"text-lg font-semibold mb-4"},QA=["disabled"],ZA=["disabled"],eP={class:"flex justify-end space-x-2"},tP=["disabled"];function sP(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return x(),w("div",FA,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",jA,[i.sidebarOpen?j("",!0):(x(),w("div",NA,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[11]||(e[11]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Usurios"}),u("section",UA,[e[15]||(e[15]=u("h3",{class:"text-lg font-medium mb-4"},"Cadastrar novo usurio",-1)),u("form",{onSubmit:e[4]||(e[4]=Je((...c)=>o.handleAddUser&&o.handleAddUser(...c),["prevent"])),class:"space-y-4"},[u("div",null,[e[12]||(e[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=c=>i.form.email=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.email]])]),u("div",null,[e[13]||(e[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),E(u("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=c=>i.form.password=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.password]])]),e[14]||(e[14]=u("div",{class:"flex justify-end"},[u("button",{type:"submit",class:"btn"},"Cadastrar")],-1))],32),i.successMessage?(x(),w("p",$A,P(i.successMessage),1)):j("",!0),i.errorMessage?(x(),w("p",BA,P(i.errorMessage),1)):j("",!0)]),u("section",VA,[u("div",zA,[e[16]||(e[16]=u("h3",{class:"text-lg font-medium"},"Usurios cadastrados",-1)),E(u("input",{"onUpdate:modelValue":e[5]||(e[5]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.search]])]),u("div",HA,[u("table",WA,[e[18]||(e[18]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"ID"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"E-mail"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(o.filteredUsers,c=>(x(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",qA,P(c.id),1),u("td",KA,P(c.email),1),u("td",GA,[u("button",{onClick:d=>o.openUserModal(c,"view"),class:"btn btn-sm"},"Visualizar",8,YA)])]))),128)),o.filteredUsers.length===0?(x(),w("tr",JA,e[17]||(e[17]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"},"Nenhum usurio encontrado",-1)]))):j("",!0)])])])]),i.showUserModal?(x(),et(l,{key:1,onClose:o.handleUserClose},{default:ee(()=>[u("h3",XA,P(i.userModalMode==="new"?"Adicionar Usurio":"Cadastro de Usurio"),1),u("form",{onSubmit:e[10]||(e[10]=Je((...c)=>o.handleSaveUser&&o.handleSaveUser(...c),["prevent"])),class:"space-y-4"},[u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[6]||(e[6]=c=>i.userForm.email=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,QA),[[R,i.userForm.email]])]),u("div",null,[e[20]||(e[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Senha",-1)),E(u("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=c=>i.userForm.password=c),disabled:o.isUserView,class:"w-full mt-1 px-4 py-2 border rounded-md"},null,8,ZA),[[R,i.userForm.password]])]),u("div",eP,[u("button",{type:"button",onClick:e[8]||(e[8]=(...c)=>o.handleUserClose&&o.handleUserClose(...c)),class:"px-4 py-2 rounded border"},"Fechar"),i.userModalMode==="view"?(x(),w("button",{key:0,type:"button",onClick:e[9]||(e[9]=(...c)=>o.enableUserEdit&&o.enableUserEdit(...c)),class:"btn btn-success"},"Editar")):j("",!0),u("button",{type:"submit",class:"btn",disabled:o.isUserView},"Salvar",8,tP)])],32)]),_:1},8,["onClose"])):j("",!0)])])}const nP=me(LA,[["render",sP]]),iP={name:"SearchProfiles",components:{Navbar:qt,Footer:Kt},data(){return{profiles:[],search:""}},computed:{filteredProfiles(){const t=this.search.toLowerCase();return this.profiles.filter(e=>e.business_name.toLowerCase().includes(t))}},async mounted(){const{data:t}=await I.from("profiles").select("id, business_name, description, slug, area_atuacao");t&&(this.profiles=t)}},oP={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-10"},rP={class:"max-w-2xl mx-auto px-4"},aP={class:"mb-6 text-center"},lP={class:"space-y-4"},cP={class:"text-xl font-semibold text-blue-600"},dP={key:0,class:"text-sm text-gray-500"},uP={class:"text-gray-700 mb-2"},hP={key:0,class:"text-center text-gray-500 py-6"};function fP(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("div",oP,[u("div",rP,[u("div",aP,[e[1]||(e[1]=u("h1",{class:"text-3xl font-extrabold text-blue-700 mb-4"},"Buscar perfis",-1)),E(u("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.search=c),type:"text",placeholder:"Digite o nome do estabelecimento",class:"w-full px-4 py-2 border rounded-md"},null,512),[[R,i.search]])]),u("ul",lP,[(x(!0),w(Y,null,fe(o.filteredProfiles,c=>(x(),w("li",{key:c.id,class:"bg-white p-4 rounded-md shadow"},[u("h2",cP,P(c.business_name),1),c.area_atuacao?(x(),w("p",dP,P(c.area_atuacao),1)):j("",!0),u("p",uP,P(c.description),1),O(a,{to:"/"+c.slug,class:"text-blue-600 hover:underline"},{default:ee(()=>e[2]||(e[2]=[te(" Ver perfil ")])),_:2,__:[2]},1032,["to"])]))),128)),o.filteredProfiles.length===0?(x(),w("li",hP," Nenhum resultado encontrado ")):j("",!0)])])]),O(l)],64)}const pP=me(iP,[["render",fP]]),pp="/icons/whatsapp.svg",mP={name:"PublicPage",components:{Modal:Cs},data(){return{profile:null,services:[],showModal:!1,selectedService:null,form:{name:"",email:"",phone:"",cpf:"",date:"",time:""},slotError:"",schedule:{startTime:"",endTime:"",weekDays:[],dailySchedule:null}}},computed:{whatsappLink(){var s;return`https://wa.me/${(((s=this.profile)==null?void 0:s.whatsapp)||"").replace(/\D/g,"")}`}},watch:{"form.date"(){this.slotError=""},"form.time"(){this.slotError=""}},methods:{phoneMask:Yn,cpfMask:_l,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},openModal(t){this.selectedService=t,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedService=null,this.form={name:"",email:"",phone:"",cpf:"",date:"",time:""},this.slotError=""},isSlotAllowed(t,e){if(!t||!e)return!1;const s=new Date(t+"T12:00:00").getDay().toString();if(this.schedule.dailySchedule){const n=this.schedule.dailySchedule[s];return!n||!n.enabled||!n.start||!n.end?!1:e>=n.start&&e<=n.end}return!(this.schedule.weekDays.length&&(!this.schedule.weekDays.includes(s)||this.schedule.startTime&&e<this.schedule.startTime||this.schedule.endTime&&e>this.schedule.endTime))},async handleSchedule(){if(this.form.email&&!Wt(this.form.email)){alert("E-mail invlido");return}if(!this.isSlotAllowed(this.form.date,this.form.time)){this.slotError="Este horrio no est disponvel. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}const{data:t}=await I.from("appointments").select("id").eq("user_id",this.profile.id).eq("date",this.form.date).eq("time",this.form.time).limit(1);if(t&&t.length){this.slotError="Este horrio no est disponvel. Que tal agendar para 1 hora mais tarde ou mais cedo?";return}let e,s=null;if(this.form.email){const{data:o}=await I.from("clients").select("id").eq("user_id",this.profile.id).eq("email",this.form.email).maybeSingle();o&&(s=o)}if(!s&&this.form.cpf){const{data:o}=await I.from("clients").select("id").eq("user_id",this.profile.id).eq("cpf",this.form.cpf).maybeSingle();o&&(s=o)}if(!s&&this.form.phone){const{data:o}=await I.from("clients").select("id").eq("user_id",this.profile.id).eq("phone",this.form.phone).maybeSingle();o&&(s=o)}if(s){e=s.id;const{error:o}=await I.from("clients").update({name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0}).eq("id",e);o&&console.error("Erro ao atualizar cliente:",o.message)}else{const{data:o,error:r}=await I.from("clients").insert({user_id:this.profile.id,name:this.form.name,email:this.form.email,phone:this.form.phone,cpf:this.form.cpf,from_site:!0,pending_update:!0}).select().single();if(r){alert("Erro ao cadastrar cliente: "+r.message);return}e=o.id}const{data:n,error:i}=await I.from("appointments").insert({user_id:this.profile.id,client_id:e,service_id:this.selectedService.id,date:this.form.date,time:this.form.time,duration:this.selectedService.duration,confirmed:!1,from_site:!0}).select().single();if(i){alert("Erro ao agendar: "+i.message);return}this.closeModal(),this.$router.push({name:"PagamentoAgendamento",params:{id:n.id}})}},async mounted(){const t=this.$route.params.slug,{data:e}=await I.from("profiles").select("*").eq("slug",t).single();if(e){this.profile=e;const{data:s}=await I.from("services").select().eq("user_id",e.id).eq("allow_online_booking",!0);this.services=s||[],this.schedule.startTime=e.start_time||"",this.schedule.endTime=e.end_time||"",this.schedule.weekDays=e.week_days?e.week_days.split(","):[],this.schedule.dailySchedule=e.daily_schedule?typeof e.daily_schedule=="string"?JSON.parse(e.daily_schedule):e.daily_schedule:null}}},gP={class:"min-h-screen flex flex-col bg-white"},bP={key:0,class:"flex-1"},yP={class:"bg-blue-600 text-white py-12"},xP={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},_P=["src"],vP={class:"text-4xl font-bold"},wP={key:0,class:"text-sm"},kP={class:"text-lg"},SP={class:"max-w-5xl mx-auto px-4 py-12 space-y-16"},CP={key:0,class:"grid gap-6 md:grid-cols-2"},MP={class:"text-lg font-medium text-blue-700"},AP={class:"text-sm text-gray-600"},PP={class:"text-sm text-gray-500 mt-1"},EP={class:"text-sm text-gray-500"},TP=["onClick"],OP={key:1,class:"text-gray-500"},DP={class:"space-y-1 text-gray-700"},IP=["href"],RP={key:2,class:"flex-1 flex items-center justify-center text-gray-500"},LP={class:"text-lg font-semibold mb-4"},FP={key:0,class:"mt-1 text-sm text-red-600"},jP={class:"flex justify-end gap-2"},NP={key:4,class:"bg-gray-100 py-6"},UP={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},$P={class:"space-x-4 text-blue-600"},BP=["href"],VP=["href"],zP=["href"],HP=["href"],WP={class:"text-sm text-gray-500"};function qP(t,e,s,n,i,o){const r=z("Modal");return x(),w("div",gP,[i.profile?(x(),w("section",bP,[u("div",yP,[u("div",xP,[u("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,_P),u("h1",vP,P(i.profile.business_name),1),i.profile.area_atuacao?(x(),w("p",wP,P(i.profile.area_atuacao),1)):j("",!0),u("p",kP,P(i.profile.description),1)])]),u("div",SP,[u("div",null,[e[10]||(e[10]=u("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Servios",-1)),i.services.length?(x(),w("ul",CP,[(x(!0),w(Y,null,fe(i.services,a=>(x(),w("li",{key:a.id,class:"p-4 bg-gray-50 border rounded-lg shadow"},[u("h3",MP,P(a.name),1),u("p",AP,P(a.description),1),u("p",PP,"Durao: "+P(a.duration)+" minutos",1),u("p",EP,"Valor: "+P(o.formatPrice(a.price)),1),u("button",{class:"btn mt-2",onClick:l=>o.openModal(a)},"Agendar",8,TP)]))),128))])):(x(),w("p",OP,"Nenhum servio cadastrado."))]),u("div",null,[e[15]||(e[15]=u("h2",{class:"text-2xl font-semibold text-blue-600 mb-4"},"Contato",-1)),u("ul",DP,[u("li",null,[e[11]||(e[11]=u("strong",null,"Telefone:",-1)),te(" "+P(i.profile.phone),1)]),u("li",null,[e[12]||(e[12]=u("strong",null,"WhatsApp:",-1)),te(" "+P(i.profile.whatsapp),1)]),u("li",null,[e[13]||(e[13]=u("strong",null,"Email:",-1)),te(" "+P(i.profile.email),1)]),u("li",null,[e[14]||(e[14]=u("strong",null,"Endereo:",-1)),te(" "+P(i.profile.address),1)])])])])])):j("",!0),i.profile&&i.profile.whatsapp?(x(),w("a",{key:1,href:o.whatsappLink,target:"_blank",rel:"noopener",class:"fixed bottom-4 right-4 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg"},e[16]||(e[16]=[u("img",{src:pp,alt:"WhatsApp",class:"w-6 h-6"},null,-1)]),8,IP)):(x(),w("div",RP,e[17]||(e[17]=[u("p",null,"Carregando perfil...",-1)]))),i.showModal?(x(),et(r,{key:3,onClose:o.closeModal},{default:ee(()=>{var a;return[u("h3",LP,"Agendar "+P((a=i.selectedService)==null?void 0:a.name),1),u("form",{onSubmit:e[9]||(e[9]=Je((...l)=>o.handleSchedule&&o.handleSchedule(...l),["prevent"])),class:"space-y-4"},[u("div",null,[e[18]||(e[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>i.form.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.name]])]),u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"E-mail",-1)),E(u("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>i.form.email=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.email]])]),u("div",null,[e[20]||(e[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Telefone",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>i.form.phone=l),onInput:e[3]||(e[3]=l=>i.form.phone=o.phoneMask(i.form.phone)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.phone]])]),u("div",null,[e[21]||(e[21]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>i.form.cpf=l),onInput:e[5]||(e[5]=l=>i.form.cpf=o.cpfMask(i.form.cpf)),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,544),[[R,i.form.cpf]])]),u("div",null,[e[22]||(e[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"Data",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>i.form.date=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.date]])]),u("div",null,[e[23]||(e[23]=u("label",{class:"block text-sm font-medium text-gray-700"},"Hora",-1)),E(u("input",{type:"time",step:"60","onUpdate:modelValue":e[7]||(e[7]=l=>i.form.time=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.time]]),i.slotError?(x(),w("p",FP,P(i.slotError),1)):j("",!0)]),u("div",jP,[u("button",{type:"button",onClick:e[8]||(e[8]=(...l)=>o.closeModal&&o.closeModal(...l)),class:"px-4 py-2 rounded border"},"Cancelar"),e[24]||(e[24]=u("button",{type:"submit",class:"btn"},"Agendar",-1))])],32)]}),_:1},8,["onClose"])):j("",!0),i.profile?(x(),w("footer",NP,[u("div",UP,[u("div",$P,[i.profile.instagram?(x(),w("a",{key:0,href:i.profile.instagram,class:"hover:underline"},"Instagram",8,BP)):j("",!0),i.profile.facebook?(x(),w("a",{key:1,href:i.profile.facebook,class:"hover:underline"},"Facebook",8,VP)):j("",!0),i.profile.youtube?(x(),w("a",{key:2,href:i.profile.youtube,class:"hover:underline"},"YouTube",8,zP)):j("",!0),i.profile.x?(x(),w("a",{key:3,href:i.profile.x,class:"hover:underline"},"X (Twitter)",8,HP)):j("",!0)]),u("p",WP," "+P(new Date().getFullYear())+" "+P(i.profile.business_name),1)])])):j("",!0)])}const KP=me(mP,[["render",qP]]),GP={name:"Planos",components:{Navbar:qt,Footer:Kt}},YP={class:"max-w-5xl mx-auto px-4 py-16"},JP={class:"text-center mt-8"};function XP(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("section",YP,[e[1]||(e[1]=dn('<h1 class="text-3xl font-bold text-center mb-8">Conhea nossos planos</h1><div class="bg-white p-4 rounded-lg shadow"><div class="overflow-x-auto"><table class="min-w-full text-left"><thead class="bg-gray-50"><tr><th class="px-4 py-2 font-medium text-gray-700">Recursos</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Bsico</th><th class="px-4 py-2 font-medium text-gray-700 text-center">Beta</th></tr></thead><tbody><tr><td class="border-t px-4 py-2 text-gray-600">Valor</td><td class="border-t px-4 py-2 text-center font-semibold">Grtis</td><td class="border-t px-4 py-2 text-center font-semibold line-through text-gray-400">R$167,97</td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Cadastro de pacientes</td><td class="border-t px-4 py-2 text-center">At 5 pacientes</td><td class="border-t px-4 py-2 text-center">Ilimitado</td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Lembretes por e-mail</td><td class="border-t px-4 py-2 text-center"></td><td class="border-t px-4 py-2 text-center"></td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Lembretes via WhatsApp</td><td class="border-t px-4 py-2 text-center line-through text-gray-400"></td><td class="border-t px-4 py-2 text-center"></td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Customizao de domnio da pgina pblica</td><td class="border-t px-4 py-2 text-center line-through text-gray-400"></td><td class="border-t px-4 py-2 text-center"></td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Pgina pblica sem banner do Agenda Zen</td><td class="border-t px-4 py-2 text-center line-through text-gray-400"></td><td class="border-t px-4 py-2 text-center"></td></tr><tr><td class="border-t px-4 py-2 text-gray-600">Gerao de recibos de atendimentos</td><td class="border-t px-4 py-2 text-center line-through text-gray-400"></td><td class="border-t px-4 py-2 text-center"></td></tr><tr class="bg-gray-50"><td class="border-t px-4 py-2 text-gray-600">Envio de recibos por e-mail automtico</td><td class="border-t px-4 py-2 text-center line-through text-gray-400"></td><td class="border-t px-4 py-2 text-center"></td></tr></tbody></table></div></div>',2)),u("div",JP,[O(a,{to:"/cadastro",class:"btn"},{default:ee(()=>e[0]||(e[0]=[te(" Contratar plano ")])),_:1,__:[0]})])]),O(l)],64)}const QP=me(GP,[["render",XP]]),ZP={name:"Salas",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{userId:null,showModal:!1,search:"",form:{name:"",googleMeetLink:""},rooms:[],sidebarOpen:window.innerWidth>=768,page:1,pageSize:10}},methods:{openModal(){this.showModal=!0},generateMeetLink(){const t=window.open("https://meet.google.com/new","_blank");setTimeout(()=>{try{this.form.googleMeetLink=t.location.href}catch{}},3e3)},async pasteFromClipboard(){try{const t=await navigator.clipboard.readText();this.form.googleMeetLink=t}catch{alert("No foi possvel acessar o contedo da rea de transferncia.")}},closeModal(){this.showModal=!1,this.form={name:"",googleMeetLink:""}},async handleAddRoom(){const{data:t,error:e}=await I.from("rooms").insert({name:this.form.name,google_meet_link:this.form.googleMeetLink,user_id:this.userId}).select().single();e?alert("Erro ao salvar sala: "+e.message):(this.rooms.push(t),this.closeModal())},async handleDeleteRoom(t){if(!confirm("Tem certeza que deseja excluir esta sala?"))return;const{error:s}=await I.from("rooms").delete().eq("id",t);s?alert("Erro ao excluir sala: "+s.message):this.rooms=this.rooms.filter(n=>n.id!==t)},nextPage(){this.page<this.totalPages&&this.page++},prevPage(){this.page>1&&this.page--}},computed:{filteredRooms(){const t=this.search.toLowerCase();return this.rooms.filter(e=>e.name.toLowerCase().includes(t)||e.google_meet_link&&e.google_meet_link.toLowerCase().includes(t))},paginatedRooms(){const t=(this.page-1)*this.pageSize;return this.filteredRooms.slice(t,t+this.pageSize)},totalPages(){return Math.max(1,Math.ceil(this.filteredRooms.length/this.pageSize))}},watch:{search(){this.page=1}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("rooms").select().eq("user_id",this.userId);e&&(this.rooms=e)}},eE={class:"min-h-screen flex bg-gray-100 relative"},tE={class:"flex-1 p-4 md:p-8 space-y-6"},sE={key:0,class:"flex items-center mb-4"},nE={class:"bg-white p-4 rounded-lg shadow"},iE={class:"flex justify-between items-center mb-4"},oE={class:"flex items-center space-x-3"},rE={class:"overflow-x-auto"},aE={class:"min-w-full text-left"},lE={class:"px-4 py-2"},cE={class:"px-4 py-2"},dE=["href"],uE={class:"px-4 py-2 text-right"},hE=["onClick"],fE={key:0},pE={class:"mt-4 flex justify-between items-center"},mE=["disabled"],gE={class:"text-sm"},bE=["disabled"],yE={class:"flex space-x-2 mt-1"},xE={class:"flex justify-end space-x-2"};function _E(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return x(),w("div",eE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",tE,[i.sidebarOpen?j("",!0):(x(),w("div",sE,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[12]||(e[12]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Salas"}),u("section",nE,[u("div",iE,[e[13]||(e[13]=u("h3",{class:"text-lg font-medium"},"Salas cadastradas",-1)),u("div",oE,[E(u("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>i.search=c),type:"text",placeholder:"Buscar...",class:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.search]]),u("button",{onClick:e[3]||(e[3]=(...c)=>o.openModal&&o.openModal(...c)),class:"btn"}," Nova Sala ")])]),u("div",rE,[u("table",aE,[e[15]||(e[15]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Google Meet"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(o.paginatedRooms,c=>(x(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",lE,P(c.name),1),u("td",cE,[c.google_meet_link?(x(),w("a",{key:0,href:c.google_meet_link,class:"text-blue-600 underline",target:"_blank"}," Link ",8,dE)):j("",!0)]),u("td",uE,[u("button",{onClick:d=>o.handleDeleteRoom(c.id),class:"btn btn-sm btn-danger"}," Excluir ",8,hE)])]))),128)),o.filteredRooms.length===0?(x(),w("tr",fE,e[14]||(e[14]=[u("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-500"}," Nenhuma sala encontrada ",-1)]))):j("",!0)])]),u("div",pE,[u("button",{class:"px-3 py-1 border rounded",onClick:e[4]||(e[4]=(...c)=>o.prevPage&&o.prevPage(...c)),disabled:i.page===1}," Anterior ",8,mE),u("span",gE,"Pgina "+P(i.page)+" de "+P(o.totalPages),1),u("button",{class:"px-3 py-1 border rounded",onClick:e[5]||(e[5]=(...c)=>o.nextPage&&o.nextPage(...c)),disabled:i.page===o.totalPages}," Prxima ",8,bE)])])]),i.showModal?(x(),et(l,{key:1,onClose:o.closeModal},{default:ee(()=>[e[20]||(e[20]=u("h3",{class:"text-lg font-semibold mb-4"},"Adicionar Sala",-1)),u("form",{onSubmit:e[11]||(e[11]=Je((...c)=>o.handleAddRoom&&o.handleAddRoom(...c),["prevent"])),class:"space-y-6"},[u("div",null,[e[16]||(e[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.form.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.form.name]])]),u("div",null,[e[17]||(e[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"Link do Google Meet",-1)),u("div",yE,[E(u("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=c=>i.form.googleMeetLink=c),class:"flex-grow px-4 py-2 border rounded-md"},null,512),[[R,i.form.googleMeetLink]]),u("button",{type:"button",onClick:e[8]||(e[8]=(...c)=>o.generateMeetLink&&o.generateMeetLink(...c)),class:"btn"},"Gerar"),u("button",{type:"button",onClick:e[9]||(e[9]=(...c)=>o.pasteFromClipboard&&o.pasteFromClipboard(...c)),class:"btn"},"Paste")]),e[18]||(e[18]=u("p",{class:"text-xs text-gray-500 mt-2"}," Aps abrir a nova aba, copie o link da reunio e cole no campo acima. ",-1))]),u("div",xE,[u("button",{type:"button",onClick:e[10]||(e[10]=(...c)=>o.closeModal&&o.closeModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[19]||(e[19]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[20]},8,["onClose"])):j("",!0)])])}const vE=me(ZP,[["render",_E]]),wE={name:"Comprovantes",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],receipts:[],clients:[],showGenerateModal:!1,generateForm:{clientId:"",startDate:"",endDate:"",templateId:""},receiptContent:null}},methods:{formatDateBR:it,closeGenerateModal(){this.showGenerateModal=!1,this.generateForm={clientId:"",startDate:"",endDate:"",templateId:""}},getClientName(t){const e=this.clients.find(s=>s.id===t);return e?e.name:""},showReceipt(t){this.receiptContent=t},async handleGenerate(){const{data:t}=await I.from("appointments").select().eq("user_id",this.userId).eq("client_id",this.generateForm.clientId).gte("date",this.generateForm.startDate).lte("date",this.generateForm.endDate).order("date",{ascending:!0}).order("time",{ascending:!0}),e=this.templates.find(a=>a.id===this.generateForm.templateId),s=this.clients.find(a=>a.id===this.generateForm.clientId);let n=e?e.content:"";s&&(n=n.replace("{{client_name}}",s.name));const i=(t||[]).map(a=>`- ${it(a.date)} ${a.time}`).join(`
`);n=n.replace("{{appointments}}",i);const{data:o,error:r}=await I.from("receipts").insert({user_id:this.userId,client_id:this.generateForm.clientId,template_id:this.generateForm.templateId,start_date:this.generateForm.startDate,end_date:this.generateForm.endDate,content:n}).select().single();r?alert("Erro ao gerar comprovante: "+r.message):(this.receipts.push(o),this.closeGenerateModal())}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("clients").select().eq("user_id",this.userId);e&&(this.clients=e);const{data:s}=await I.from("receipt_templates").select().eq("user_id",this.userId);s&&(this.templates=s);const{data:n}=await I.from("receipts").select().eq("user_id",this.userId).order("created_at",{ascending:!1});n&&(this.receipts=n)}},kE={class:"min-h-screen flex bg-gray-100 relative"},SE={class:"flex-1 p-4 md:p-8 space-y-6"},CE={key:0,class:"flex items-center mb-4"},ME={class:"bg-white p-4 rounded-lg shadow space-y-4"},AE={class:"flex justify-between items-center"},PE={class:"overflow-x-auto"},EE={class:"min-w-full text-left"},TE={class:"px-4 py-2"},OE={class:"px-4 py-2"},DE={class:"px-4 py-2"},IE={class:"px-4 py-2 text-right"},RE=["onClick"],LE={key:0},FE=["value"],jE={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},NE=["value"],UE={class:"flex justify-end space-x-2"},$E={class:"border rounded-md p-4 bg-gray-50"},BE={class:"whitespace-pre-wrap font-mono text-sm"};function VE(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return x(),w("div",kE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",SE,[i.sidebarOpen?j("",!0):(x(),w("div",CE,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[10]||(e[10]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Comprovantes"}),u("section",ME,[u("div",AE,[e[11]||(e[11]=u("h3",{class:"text-lg font-medium"},"Comprovantes Gerados",-1)),u("button",{onClick:e[2]||(e[2]=c=>i.showGenerateModal=!0),class:"btn"},"Novo Comprovante")]),u("div",PE,[u("table",EE,[e[13]||(e[13]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Cliente"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Perodo"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Criado em"),u("th",{class:"px-4 py-2"})])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(i.receipts,c=>(x(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",TE,P(o.getClientName(c.client_id)),1),u("td",OE,P(o.formatDateBR(c.start_date))+" - "+P(o.formatDateBR(c.end_date)),1),u("td",DE,P(o.formatDateBR(c.created_at.split("T")[0])),1),u("td",IE,[u("button",{onClick:d=>o.showReceipt(c.content),class:"btn btn-sm"},"Ver",8,RE)])]))),128)),i.receipts.length===0?(x(),w("tr",LE,e[12]||(e[12]=[u("td",{colspan:"4",class:"px-4 py-6 text-center text-gray-500"},"Nenhum comprovante",-1)]))):j("",!0)])])])]),i.showGenerateModal?(x(),et(l,{key:1,onClose:o.closeGenerateModal},{default:ee(()=>[e[21]||(e[21]=u("h3",{class:"text-lg font-semibold mb-4"},"Novo Comprovante",-1)),u("form",{onSubmit:e[8]||(e[8]=Je((...c)=>o.handleGenerate&&o.handleGenerate(...c),["prevent"])),class:"space-y-4"},[u("div",null,[e[15]||(e[15]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cliente",-1)),E(u("select",{"onUpdate:modelValue":e[3]||(e[3]=c=>i.generateForm.clientId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[14]||(e[14]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.clients,c=>(x(),w("option",{key:c.id,value:c.id},P(c.name),9,FE))),128))],512),[[ft,i.generateForm.clientId]])]),u("div",jE,[u("div",null,[e[16]||(e[16]=u("label",{class:"block text-sm font-medium text-gray-700"},"De",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=c=>i.generateForm.startDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.generateForm.startDate]])]),u("div",null,[e[17]||(e[17]=u("label",{class:"block text-sm font-medium text-gray-700"},"At",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=c=>i.generateForm.endDate=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.generateForm.endDate]])])]),u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Template",-1)),E(u("select",{"onUpdate:modelValue":e[6]||(e[6]=c=>i.generateForm.templateId=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},[e[18]||(e[18]=u("option",{disabled:"",value:""},"Selecione",-1)),(x(!0),w(Y,null,fe(i.templates,c=>(x(),w("option",{key:c.id,value:c.id},P(c.name),9,NE))),128))],512),[[ft,i.generateForm.templateId]])]),u("div",UE,[u("button",{type:"button",onClick:e[7]||(e[7]=(...c)=>o.closeGenerateModal&&o.closeGenerateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[20]||(e[20]=u("button",{type:"submit",class:"btn"},"Gerar",-1))])],32)]),_:1,__:[21]},8,["onClose"])):j("",!0),i.receiptContent?(x(),et(l,{key:2,onClose:e[9]||(e[9]=c=>i.receiptContent=null)},{default:ee(()=>[e[22]||(e[22]=u("h3",{class:"text-lg font-semibold text-center mb-4"},"Comprovante",-1)),u("div",$E,[u("pre",BE,P(i.receiptContent),1)])]),_:1,__:[22]})):j("",!0)])])}const zE=me(wE,[["render",VE]]),HE={name:"Atendimento",components:{Sidebar:Pt,HeaderUser:Et},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"current",appointment:null,note:"",files:[],notes:[],userId:null,isEditing:!1,editingNoteId:null,editingAttachments:[]}},computed:{appointmentDateTime(){return this.appointment?`${it(this.appointment.date)} ${Dt(this.appointment.time)}`:""},groupedNotes(){const t={};return this.notes.forEach(e=>{const s=e.created_at.split("T")[0];t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).sort((e,s)=>new Date(s)-new Date(e)).map(e=>({date:it(e),items:t[e]}))}},methods:{formatDateTime(t){return new Date(t).toLocaleString("pt-BR")},handleFileChange(t){const e=["pdf","doc","txt","png","jpeg","jpg"],s=Array.from(t.target.files);this.files=[];for(const n of s){const i=n.name.split(".").pop().toLowerCase();e.includes(i)?this.files.push(n):alert(`Formato de arquivo no permitido: ${n.name}`)}},editExistingNote(t,e=!0){(this.note&&this.note.trim()||this.files.length)&&!confirm("Dados no salvos sero perdidos. Deseja continuar?")||(this.isEditing=!0,this.editingNoteId=t.id,this.editingAttachments=[...t.attachments||[]],this.note=t.note,this.files=[],e&&(this.activeTab="current"))},cancelEdit(){this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[],this.note="",this.files=[]},async removeAttachment(t){if(!confirm("Remover este anexo?"))return;const n=this.editingAttachments[t].split("/appointment-attachments/");if(n.length===2){const i=n[1];await I.storage.from("appointment-attachments").remove([i])}this.editingAttachments.splice(t,1)},async fetchData(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("appointments").select().eq("id",this.$route.params.id).single();this.appointment=e;let s=[this.$route.params.id];if(e){const{data:o}=await I.from("appointments").select("id").eq("user_id",this.userId).eq("client_id",e.client_id);s=o?o.map(r=>r.id):s}const{data:n}=await I.from("appointment_notes").select().in("appointment_id",s).order("created_at",{ascending:!1});this.notes=(n||[]).map(o=>({...o,attachments:o.attachments||[]}));const i=this.$route.query.note;if(i){const o=this.notes.find(r=>r.id===Number(i)||r.id===i);o&&this.editExistingNote(o)}},async saveNote(){if(!this.note.trim()&&!this.files.length&&!this.editingAttachments.length)return;const t=[];for(const n of this.files){const i=n.name.split(".").pop(),o=`${this.$route.params.id}-${Date.now()}-${Math.random().toString(36).slice(2)}.${i}`,{error:r}=await I.storage.from("appointment-attachments").upload(o,n);if(!r){const{data:{publicUrl:a}}=I.storage.from("appointment-attachments").getPublicUrl(o);t.push(a)}}let e,s;if(this.isEditing){const n=[...this.editingAttachments,...t];if({data:e,error:s}=await I.from("appointment_notes").update({note:this.note,attachments:n}).eq("id",this.editingNoteId).select().single(),!s){const i=this.notes.findIndex(o=>o.id===this.editingNoteId);i!==-1&&(this.notes[i]={...e,attachments:e.attachments||[]})}}else({data:e,error:s}=await I.from("appointment_notes").insert({appointment_id:this.$route.params.id,user_id:this.userId,note:this.note,attachments:t}).select().single()),s||this.notes.unshift({...e,attachments:e.attachments||[]});s?alert("Erro ao salvar atendimento: "+s.message):(this.note="",this.files=[],this.isEditing=!1,this.editingNoteId=null,this.editingAttachments=[])}},watch:{"$route.params.id"(){this.fetchData()},"$route.query.note"(t){if(!t){this.isEditing&&this.cancelEdit();return}const e=this.notes.find(s=>s.id===Number(t)||s.id===t);e&&this.editExistingNote(e)}},async mounted(){await this.fetchData()}},WE={class:"min-h-screen flex bg-gray-100 relative"},qE={class:"flex-1 p-4 md:p-8"},KE={key:0,class:"flex items-center mb-4"},GE={class:"bg-white p-4 rounded-lg shadow mt-4"},YE={class:"border-b mb-4"},JE={class:"flex space-x-4"},XE={key:0},QE={class:"mb-2 text-sm text-gray-600"},ZE={key:0,class:"mb-4 space-y-1"},eT=["href"],tT=["onClick"],sT={class:"space-x-2"},nT={key:1},iT={class:"font-semibold mb-2"},oT={class:"text-sm text-gray-600 mb-1"},rT={class:"mb-2 whitespace-pre-line"},aT={key:0,class:"space-x-2 mb-2"},lT=["href"],cT={class:"text-right"},dT=["onClick"];function uT(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return x(),w("div",WE,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",qE,[i.sidebarOpen?j("",!0):(x(),w("div",KE,[u("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[8]||(e[8]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Atendimento"}),u("section",GE,[u("div",YE,[u("nav",JE,[u("button",{class:$e(i.activeTab==="current"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[2]||(e[2]=l=>i.activeTab="current")},"Atendimento",2),u("button",{class:$e(i.activeTab==="history"?"border-b-2 border-blue-500 pb-2":"text-gray-500 pb-2"),onClick:e[3]||(e[3]=l=>i.activeTab="history")},"Histrico de atendimento",2)])]),i.activeTab==="current"?(x(),w("div",XE,[u("p",QE,"Data/hora: "+P(o.appointmentDateTime),1),E(u("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>i.note=l),class:"w-full border rounded p-2 mb-4",rows:"6",placeholder:"Descreva o atendimento"},null,512),[[R,i.note]]),i.isEditing&&i.editingAttachments.length?(x(),w("div",ZE,[(x(!0),w(Y,null,fe(i.editingAttachments,(l,c)=>(x(),w("div",{key:c,class:"flex items-center space-x-2"},[u("a",{href:l,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(c+1),9,eT),u("button",{type:"button",onClick:d=>o.removeAttachment(c),class:"text-red-600 text-sm"},"Remover",8,tT)]))),128))])):j("",!0),u("input",{type:"file",multiple:"",onChange:e[5]||(e[5]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),class:"mb-4",accept:".pdf,.doc,.txt,.png,.jpeg,.jpg"},null,32),u("div",sT,[u("button",{onClick:e[6]||(e[6]=(...l)=>o.saveNote&&o.saveNote(...l)),class:"btn"},P(i.isEditing?"Atualizar":"Finalizar atendimento"),1),i.isEditing?(x(),w("button",{key:0,onClick:e[7]||(e[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-danger"},"Cancelar")):j("",!0)])])):(x(),w("div",nT,[(x(!0),w(Y,null,fe(o.groupedNotes,l=>(x(),w("div",{key:l.date,class:"mb-4"},[u("h4",iT,P(l.date),1),(x(!0),w(Y,null,fe(l.items,c=>(x(),w("div",{key:c.id,class:"border p-2 rounded mb-2"},[u("p",oT,P(o.formatDateTime(c.created_at)),1),u("p",rT,P(c.note),1),c.attachments&&c.attachments.length?(x(),w("div",aT,[(x(!0),w(Y,null,fe(c.attachments,(d,h)=>(x(),w("a",{key:h,href:d,target:"_blank",download:"",class:"text-blue-600 underline"},"Anexo "+P(h+1),9,lT))),128))])):j("",!0),u("div",cT,[u("button",{onClick:d=>o.editExistingNote(c),class:"btn btn-sm"},"Editar atendimento",8,dT)])]))),128))]))),128))]))])])])}const hT=me(HE,[["render",uT]]),fT={name:"Templates",components:{Sidebar:Pt,HeaderUser:Et,Modal:Cs},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,templates:[],showTemplateModal:!1,templateForm:{name:"",content:""}}},methods:{closeTemplateModal(){this.showTemplateModal=!1,this.templateForm={name:"",content:""}},async handleAddTemplate(){const{data:t,error:e}=await I.from("receipt_templates").insert({name:this.templateForm.name,content:this.templateForm.content,user_id:this.userId}).select().single();e?alert("Erro ao salvar template: "+e.message):(this.templates.push(t),this.closeTemplateModal())}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id;const{data:e}=await I.from("receipt_templates").select().eq("user_id",this.userId);e&&(this.templates=e)}},pT={class:"min-h-screen flex bg-gray-100 relative"},mT={class:"flex-1 p-4 md:p-8 space-y-6"},gT={key:0,class:"flex items-center mb-4"},bT={class:"bg-white p-4 rounded-lg shadow space-y-4"},yT={class:"flex justify-between items-center"},xT={class:"overflow-x-auto"},_T={class:"min-w-full text-left"},vT={class:"px-4 py-2"},wT={key:0},kT={class:"flex justify-end space-x-2"};function ST(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser"),l=z("Modal");return x(),w("div",pT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=c=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",mT,[i.sidebarOpen?j("",!0):(x(),w("div",gT,[u("button",{onClick:e[1]||(e[1]=c=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Templates"}),u("section",bT,[u("div",yT,[e[8]||(e[8]=u("h3",{class:"text-lg font-medium"},"Templates",-1)),u("button",{onClick:e[2]||(e[2]=c=>i.showTemplateModal=!0),class:"btn"},"Novo Template")]),u("div",xT,[u("table",_T,[e[10]||(e[10]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Nome")])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(i.templates,c=>(x(),w("tr",{key:c.id,class:"border-b last:border-b-0"},[u("td",vT,P(c.name),1)]))),128)),i.templates.length===0?(x(),w("tr",wT,e[9]||(e[9]=[u("td",{class:"px-4 py-6 text-center text-gray-500"},"Nenhum template",-1)]))):j("",!0)])])])]),i.showTemplateModal?(x(),et(l,{key:1,onClose:o.closeTemplateModal},{default:ee(()=>[e[15]||(e[15]=u("h3",{class:"text-lg font-semibold mb-4"},"Novo Template",-1)),u("form",{onSubmit:e[6]||(e[6]=Je((...c)=>o.handleAddTemplate&&o.handleAddTemplate(...c),["prevent"])),class:"space-y-4"},[u("div",null,[e[11]||(e[11]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=c=>i.templateForm.name=c),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.templateForm.name]])]),u("div",null,[e[12]||(e[12]=u("label",{class:"block text-sm font-medium text-gray-700"},"Contedo",-1)),E(u("textarea",{"onUpdate:modelValue":e[4]||(e[4]=c=>i.templateForm.content=c),class:"w-full mt-1 px-4 py-2 border rounded-md",rows:"4"},null,512),[[R,i.templateForm.content]]),e[13]||(e[13]=u("p",{class:"text-sm text-gray-500 mt-1"},"Use {{client_name}} e {{appointments}}",-1))]),u("div",kT,[u("button",{type:"button",onClick:e[5]||(e[5]=(...c)=>o.closeTemplateModal&&o.closeTemplateModal(...c)),class:"px-4 py-2 rounded border"},"Cancelar"),e[14]||(e[14]=u("button",{type:"submit",class:"btn"},"Salvar",-1))])],32)]),_:1,__:[15]},8,["onClose"])):j("",!0)])])}const CT=me(fT,[["render",ST]]),MT={name:"Contato",components:{Navbar:qt,Footer:Kt},data(){return{nome:"",email:"",mensagem:"",sucesso:!1,erro:""}},methods:{async enviar(){if(this.sucesso=!1,this.erro="",this.email&&!Wt(this.email)){this.erro="E-mail invlido";return}const{error:t}=await I.from("contacts").insert({name:this.nome,email:this.email,message:this.mensagem});t?this.erro="Erro ao enviar mensagem: "+t.message:(this.sucesso=!0,this.nome="",this.email="",this.mensagem="")}}},AT={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},PT={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg"},ET={key:0,class:"mt-4 text-green-600 text-center"},TT={key:1,class:"mt-4 text-red-600 text-center"};function OT(t,e,s,n,i,o){const r=z("Navbar"),a=z("Footer");return x(),w(Y,null,[O(r),u("section",AT,[u("div",PT,[e[8]||(e[8]=dn('<div class="mb-8 text-center"><h2 class="text-3xl font-extrabold text-blue-700">Fale conosco</h2><p class="text-gray-500">Envie sua mensagem e entraremos em contato</p></div><div class="mb-6 text-center"><a href="https://wa.me/5518996233098" target="_blank" rel="noopener" class="btn btn-success inline-flex items-center space-x-2"><img src="'+pp+'" alt="WhatsApp" class="w-5 h-5"><span>Falar via WhatsApp</span></a></div>',2)),u("form",{onSubmit:e[3]||(e[3]=Je((...l)=>o.enviar&&o.enviar(...l),["prevent"])),class:"space-y-5"},[u("div",null,[e[4]||(e[4]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"nome"},"Nome",-1)),E(u("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.nome=l),id:"nome",type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.nome]])]),u("div",null,[e[5]||(e[5]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"email"},"E-mail",-1)),E(u("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i.email=l),id:"email",type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.email]])]),u("div",null,[e[6]||(e[6]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"mensagem"},"Mensagem",-1)),E(u("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>i.mensagem=l),id:"mensagem",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4"},null,512),[[R,i.mensagem]])]),e[7]||(e[7]=u("button",{type:"submit",class:"btn w-full"},"Enviar",-1))],32),i.sucesso?(x(),w("p",ET,"Mensagem enviada com sucesso!")):j("",!0),i.erro?(x(),w("p",TT,P(i.erro),1)):j("",!0)])]),O(a)],64)}const DT=me(MT,[["render",OT]]),IT={name:"MinhaAssinatura",components:{Sidebar:Pt,HeaderUser:Et},data(){return{sidebarOpen:window.innerWidth>=768}},methods:{goBeta(){this.$router.push({path:"/assinatura-plus",query:{amount:"167.97"}})},goBasico(){this.$router.push("/dashboard")}}},RT={class:"min-h-screen flex bg-gray-100 relative"},LT={class:"flex-1 p-4 md:p-8 space-y-6"},FT={key:0,class:"flex items-center mb-4"},jT={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},NT={class:"bg-white p-6 rounded-lg shadow space-y-4"},UT={class:"bg-white p-6 rounded-lg shadow space-y-4"};function $T(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return x(),w("div",RT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",LT,[i.sidebarOpen?j("",!0):(x(),w("div",FT,[u("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[4]||(e[4]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Minha Assinatura"}),u("section",jT,[u("div",NT,[e[5]||(e[5]=dn('<h3 class="text-xl font-semibold text-center">Bsico</h3><p class="text-center text-2xl font-bold text-blue-600">Grtis</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2"></span>Cadastro de at 5 pacientes</li><li class="flex items-start"><span class="mr-2"></span>Lembretes por e-mail</li><li class="flex items-start line-through text-gray-400"><span class="mr-2"></span>Lembretes via WhatsApp</li><li class="flex items-start line-through text-gray-400"><span class="mr-2"></span>Customizao de domnio da pgina pblica</li><li class="flex items-start line-through text-gray-400"><span class="mr-2"></span>Pgina pblica sem banner do Agenda Zen</li><li class="flex items-start line-through text-gray-400"><span class="mr-2"></span>Gerao de recibos de atendimentos</li><li class="flex items-start line-through text-gray-400"><span class="mr-2"></span>Envio de recibos por e-mail automtico</li></ul>',3)),u("button",{class:"btn mt-4 w-full",onClick:e[2]||(e[2]=(...l)=>o.goBasico&&o.goBasico(...l))},"Escolher")]),u("div",UT,[e[6]||(e[6]=dn('<h3 class="text-xl font-semibold text-center">Beta</h3><p class="text-center text-2xl font-bold line-through text-gray-400">R$167,97</p><ul class="space-y-2"><li class="flex items-start"><span class="mr-2"></span>Cadastro de pacientes ilimitado</li><li class="flex items-start"><span class="mr-2"></span>Lembretes por e-mail</li><li class="flex items-start"><span class="mr-2"></span>Lembretes via WhatsApp</li><li class="flex items-start"><span class="mr-2"></span>Customizao de domnio da pgina pblica</li><li class="flex items-start"><span class="mr-2"></span>Pgina pblica sem banner do Agenda Zen</li><li class="flex items-start"><span class="mr-2"></span>Gerao de recibos de atendimentos</li><li class="flex items-start"><span class="mr-2"></span>Envio de recibos por e-mail automtico</li></ul>',3)),u("button",{class:"btn mt-4 w-full",onClick:e[3]||(e[3]=(...l)=>o.goBeta&&o.goBeta(...l))},"Escolher")])])])])}const BT=me(IT,[["render",$T]]),VT={name:"Faturamento",components:{Sidebar:Pt,HeaderUser:Et},data(){return{userId:null,sidebarOpen:window.innerWidth>=768,services:[],selectedServices:[],filterStart:"",filterEnd:"",groupBy:"mes",revenueData:[],chart:null}},methods:{async fetchServices(){const{data:t}=await I.from("services").select().eq("user_id",this.userId);this.services=t||[],this.selectedServices=this.services.map(e=>e.id)},async fetchRevenue(){if(!this.filterStart||!this.filterEnd)return;const{data:t}=await I.from("appointments").select("date, service_id").eq("user_id",this.userId).gte("date",this.filterStart).lte("date",this.filterEnd),e=t||[],s={};this.services.forEach(o=>{s[o.id]=Number(o.price)||0});const n=this.selectedServices.length?e.filter(o=>this.selectedServices.includes(o.service_id)):e,i={};n.forEach(o=>{const r=new Date(o.date);let a="";if(this.groupBy==="dia")a=r.toISOString().split("T")[0];else if(this.groupBy==="semana"){const c=this.getWeekNumber(r);a=`${r.getFullYear()}-W${c}`}else a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`;const l=s[o.service_id]||0;i[a]=(i[a]||0)+l}),this.revenueData=Object.keys(i).sort().map(o=>({label:o,total:i[o]})),this.renderChart()},getWeekNumber(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-n)/864e5+1)/7)},renderChart(){const t=this.$refs.chartCanvas.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new ss(t,{type:"bar",data:{labels:this.revenueData.map(e=>this.formatLabel(e.label)),datasets:[{label:"Faturamento",data:this.revenueData.map(e=>e.total),backgroundColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},formatPrice(t){return Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatLabel(t){if(this.groupBy==="dia")return it(t);if(this.groupBy==="semana"){const[e,s]=t.split("-W");return`Semana ${s}/${e}`}if(this.groupBy==="mes"){const[e,s]=t.split("-");return`${s.padStart(2,"0")}/${e}`}return t}},async mounted(){const{data:{user:t}}=await I.auth.getUser();if(!t){this.$router.push("/login");return}this.userId=t.id,await this.fetchServices();const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);this.filterStart=s.toISOString().split("T")[0],this.filterEnd=n.toISOString().split("T")[0]}},zT={class:"min-h-screen flex bg-gray-100 relative"},HT={class:"flex-1 p-4 md:p-8 space-y-6"},WT={key:0,class:"flex items-center mb-4"},qT={class:"bg-white p-4 rounded-lg shadow space-y-4"},KT={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},GT={class:"mt-1 space-y-1"},YT=["value"],JT={class:"md:col-span-2"},XT={class:"grid grid-cols-2 gap-2 mt-1"},QT={class:"flex flex-col mt-3"},ZT={class:"flex justify-end"},eO={class:"bg-white p-4 rounded-lg shadow space-y-4"},tO={class:"overflow-x-auto"},sO={class:"min-w-full text-left"},nO={class:"px-4 py-2"},iO={class:"px-4 py-2"},oO={key:0},rO={class:"h-64"},aO={ref:"chartCanvas",class:"w-full h-full"};function lO(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return x(),w("div",zT,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",HT,[i.sidebarOpen?j("",!0):(x(),w("div",WT,[u("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[7]||(e[7]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Relatrio de Faturamento"}),u("section",qT,[u("div",KT,[u("div",null,[e[8]||(e[8]=u("label",{class:"block text-sm font-medium text-gray-700"},"Servios",-1)),u("div",GT,[(x(!0),w(Y,null,fe(i.services,l=>(x(),w("label",{key:l.id,class:"flex items-center space-x-2"},[E(u("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[2]||(e[2]=c=>i.selectedServices=c)},null,8,YT),[[hl,i.selectedServices]]),u("span",null,P(l.name),1)]))),128))])]),u("div",JT,[e[13]||(e[13]=u("label",{class:"block text-sm font-medium text-gray-700"},"Datas",-1)),u("div",XT,[u("div",null,[e[9]||(e[9]=u("label",{class:"block text-xs font-medium text-gray-700"},"De",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>i.filterStart=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.filterStart]])]),u("div",null,[e[10]||(e[10]=u("label",{class:"block text-xs font-medium text-gray-700"},"At",-1)),E(u("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>i.filterEnd=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.filterEnd]])])]),u("div",QT,[e[12]||(e[12]=u("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agrupar por",-1)),E(u("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.groupBy=l),class:"w-full px-4 py-2 border rounded-md"},e[11]||(e[11]=[u("option",{value:"mes"},"Ms",-1),u("option",{value:"semana"},"Semana",-1),u("option",{value:"dia"},"Dia",-1)]),512),[[ft,i.groupBy]])])])]),u("div",ZT,[u("button",{onClick:e[6]||(e[6]=(...l)=>o.fetchRevenue&&o.fetchRevenue(...l)),class:"btn"},"Aplicar")])]),u("section",eO,[u("div",tO,[u("table",sO,[e[15]||(e[15]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Perodo"),u("th",{class:"px-4 py-2 font-medium text-gray-700"},"Faturamento")])],-1)),u("tbody",null,[(x(!0),w(Y,null,fe(i.revenueData,l=>(x(),w("tr",{key:l.label,class:"border-b last:border-b-0"},[u("td",nO,P(o.formatLabel(l.label)),1),u("td",iO,P(o.formatPrice(l.total)),1)]))),128)),i.revenueData.length===0?(x(),w("tr",oO,e[14]||(e[14]=[u("td",{colspan:"2",class:"px-4 py-6 text-center text-gray-500"},"Nenhum dado",-1)]))):j("",!0)])])]),u("div",rO,[u("canvas",aO,null,512)])])])])}const cO=me(VT,[["render",lO]]),dO={name:"Faq",components:{Navbar:qt,Footer:Kt},data(){return{faqs:[{question:"Como me cadastro?",answer:'Clique em "Cadastre-se" no menu e preencha o formulrio.'},{question:"Posso cancelar a qualquer momento?",answer:"Sim, voc pode cancelar seu plano a hora que quiser sem taxas adicionais."},{question:"Como entro em contato com o suporte?",answer:"Utilize a pgina de contato para nos enviar sua mensagem."}]}}},uO={class:"min-h-screen flex flex-col bg-gray-100"},hO={class:"flex-1 max-w-3xl mx-auto p-8"},fO={class:"space-y-6"},pO={class:"font-semibold text-blue-600 mb-2"},mO={class:"text-gray-700"};function gO(t,e,s,n,i,o){const r=z("Navbar"),a=z("Footer");return x(),w(Y,null,[O(r),u("div",uO,[u("main",hO,[e[0]||(e[0]=u("h1",{class:"text-3xl font-bold text-center mb-8"},"Perguntas Frequentes",-1)),u("div",fO,[(x(!0),w(Y,null,fe(i.faqs,(l,c)=>(x(),w("div",{key:c,class:"bg-white p-6 rounded-lg shadow"},[u("h2",pO,P(l.question),1),u("p",mO,P(l.answer),1)]))),128))])]),O(a)])],64)}const bO=me(dO,[["render",gO]]),yO={name:"PoliticaPrivacidade",components:{Navbar:qt,Footer:Kt}};function xO(t,e,s,n,i,o){const r=z("Navbar"),a=z("Footer");return x(),w(Y,null,[O(r),e[0]||(e[0]=u("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[u("h1",{class:"text-3xl font-bold text-center mb-4"},"Poltica de Privacidade"),u("p",null,"Esta poltica descreve como tratamos seus dados pessoais e garante a transparncia sobre o uso das suas informaes."),u("p",null,"Utilizamos seus dados apenas para prover nossos servios de agendamento e nunca os compartilhamos com terceiros sem consentimento."),u("p",null,"Ao utilizar o Agenda Zen voc concorda com esta poltica. Em caso de dvidas entre em contato conosco.")],-1)),O(a)],64)}const _O=me(yO,[["render",xO]]),vO={name:"TermosDeUso",components:{Navbar:qt,Footer:Kt}};function wO(t,e,s,n,i,o){const r=z("Navbar"),a=z("Footer");return x(),w(Y,null,[O(r),e[0]||(e[0]=u("section",{class:"max-w-3xl mx-auto px-4 py-16 space-y-4"},[u("h1",{class:"text-3xl font-bold text-center mb-4"},"Termos de Uso"),u("p",null,"Estes termos definem as regras para utilizao da plataforma Agenda Zen. Ao criar uma conta voc concorda em segui-los."),u("p",null,"O servio deve ser utilizado apenas para atividades lcitas e em conformidade com a legislao vigente. Contas que violem estas condies podero ser suspensas."),u("p",null,"Podemos atualizar estes termos periodicamente. Avisaremos sobre mudanas importantes diretamente no site.")],-1)),O(a)],64)}const kO=me(vO,[["render",wO]]);function wn(t,e){const s=String(e.length).padStart(2,"0");return`${t}${s}${e}`}function SO(t){let e=65535;for(let s=0;s<t.length;s++){e^=t.charCodeAt(s)<<8;for(let n=0;n<8;n++)e&32768?e=e<<1^4129:e<<=1,e&=65535}return e.toString(16).toUpperCase().padStart(4,"0")}function mp({key:t,name:e,city:s="SAO PAULO",amount:n,txid:i="AGENDAZEN"}){const o=e.slice(0,25),r=wn("00","BR.GOV.BCB.PIX")+wn("01",t),a=wn("05",i),l="00020101021126"+String(r.length).padStart(2,"0")+r+"520400005303986"+(n?wn("54",n):"")+"5802BR"+wn("59",o)+wn("60",s)+"62"+String(a.length).padStart(2,"0")+a+"6304",c=SO(l);return l+c}const CO="/icons/visa.svg",MO="/icons/mastercard.svg",AO="/icons/amex.svg",PO="/icons/elo.svg",gp="/logo_pix.png",EO={name:"PagamentoPlus",components:{Sidebar:Pt,HeaderUser:Et},data(){return{sidebarOpen:window.innerWidth>=768,activeTab:"pix",card:{name:"",number:"",expiry:"",cvv:"",document:""},billing:{cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""},pixAmount:"167.97",pixCode:"",pixQrCode:""}},mounted(){const t=this.$route.query.amount;t&&(this.pixAmount=t),this.generatePix()},methods:{generatePix(){const t=mp({key:"37775989840",name:"Jeferson Carlos A de Paula",amount:this.pixAmount});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}}},TO={class:"min-h-screen flex bg-gray-100 relative"},OO={class:"flex-1 p-8 space-y-6"},DO={key:0,class:"flex items-center mb-4"},IO={class:"mb-6 space-x-2"},RO={key:1,class:"space-y-6 max-w-3xl"},LO={class:"grid grid-cols-2 gap-4"},FO={class:"space-y-4 mt-4"},jO={class:"grid grid-cols-2 gap-4"},NO={class:"grid grid-cols-2 gap-4"},UO={key:2,class:"space-y-6 max-w-3xl"},$O={class:"text-center space-y-4"},BO=["src"],VO={class:"text-lg font-semibold"};function zO(t,e,s,n,i,o){const r=z("Sidebar"),a=z("HeaderUser");return x(),w("div",TO,[O(r,{"is-open":i.sidebarOpen,onClose:e[0]||(e[0]=l=>i.sidebarOpen=!1)},null,8,["is-open"]),u("main",OO,[i.sidebarOpen?j("",!0):(x(),w("div",DO,[u("button",{onClick:e[1]||(e[1]=l=>i.sidebarOpen=!0),class:"text-gray-600 focus:outline-none"},e[17]||(e[17]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))])),O(a,{title:"Pagamento"}),u("nav",IO,[u("button",{onClick:e[2]||(e[2]=l=>i.activeTab="cartao"),class:$e([i.activeTab==="cartao"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-l"])},"Carto de Crdito",2),u("button",{onClick:e[3]||(e[3]=l=>i.activeTab="pix"),class:$e([i.activeTab==="pix"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","px-4 py-2 rounded-r"])},"Pix",2)]),i.activeTab==="cartao"?(x(),w("section",RO,[e[31]||(e[31]=dn('<div class="flex justify-center space-x-2 mb-4"><img src="'+CO+'" alt="Visa" class="h-8"><img src="'+MO+'" alt="Mastercard" class="h-8"><img src="'+AO+'" alt="American Express" class="h-8"><img src="'+PO+'" alt="Elo" class="h-8"></div>',1)),u("div",null,[e[18]||(e[18]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nome (igual no carto)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>i.card.name=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.card.name]])]),u("div",null,[e[19]||(e[19]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nmero do carto",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>i.card.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.card.number]])]),u("div",LO,[u("div",null,[e[20]||(e[20]=u("label",{class:"block text-sm font-medium text-gray-700"},"Validade (MM/AA)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>i.card.expiry=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.card.expiry]])]),u("div",null,[e[21]||(e[21]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cdigo de Segurana (CVV)",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>i.card.cvv=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.card.cvv]])])]),u("div",null,[e[22]||(e[22]=u("label",{class:"block text-sm font-medium text-gray-700"},"CPF/CNPJ",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>i.card.document=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.card.document]])]),u("div",FO,[e[30]||(e[30]=u("h3",{class:"text-md font-semibold"},"Endereo de cobrana",-1)),u("div",null,[e[23]||(e[23]=u("label",{class:"block text-sm font-medium text-gray-700"},"CEP",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>i.billing.cep=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.cep]])]),u("div",null,[e[24]||(e[24]=u("label",{class:"block text-sm font-medium text-gray-700"},"Rua",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>i.billing.street=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.street]])]),u("div",jO,[u("div",null,[e[25]||(e[25]=u("label",{class:"block text-sm font-medium text-gray-700"},"Nmero",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>i.billing.number=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.number]])]),u("div",null,[e[26]||(e[26]=u("label",{class:"block text-sm font-medium text-gray-700"},"Complemento",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>i.billing.complement=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.complement]])])]),u("div",null,[e[27]||(e[27]=u("label",{class:"block text-sm font-medium text-gray-700"},"Bairro",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>i.billing.neighborhood=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.neighborhood]])]),u("div",NO,[u("div",null,[e[28]||(e[28]=u("label",{class:"block text-sm font-medium text-gray-700"},"Cidade",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=l=>i.billing.city=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.city]])]),u("div",null,[e[29]||(e[29]=u("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=l=>i.billing.state=l),class:"w-full mt-1 px-4 py-2 border rounded-md"},null,512),[[R,i.billing.state]])])])]),e[32]||(e[32]=u("div",{class:"text-right mt-4"},[u("button",{class:"btn"},"Pagar")],-1))])):j("",!0),i.activeTab==="pix"?(x(),w("section",UO,[u("div",$O,[e[33]||(e[33]=u("img",{src:gp,alt:"Logo Pix",class:"mx-auto w-[17.6rem] h-auto"},null,-1)),i.pixQrCode?(x(),w("img",{key:0,src:i.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,BO)):j("",!0),e[34]||(e[34]=u("p",{class:"font-semibold"},"Cdigo de pagamento",-1)),e[35]||(e[35]=u("p",null,"Copie e cole o cdigo abaixo no app da sua instituio financeira para finalizar a compra.",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>i.pixCode=l),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[R,i.pixCode]]),e[36]||(e[36]=u("p",{class:"font-semibold"},"Valor do pagamento",-1)),u("p",VO,"R$ "+P(i.pixAmount.replace(".",",")),1)])])):j("",!0)])])}const HO=me(EO,[["render",zO]]),WO={name:"ProfileFooter",props:{profile:{type:Object,required:!0}}},qO={key:0,class:"bg-gray-100 py-6"},KO={class:"max-w-5xl mx-auto px-4 text-center space-y-2"},GO={class:"space-x-4 text-blue-600"},YO=["href"],JO=["href"],XO=["href"],QO=["href"],ZO={class:"text-sm text-gray-500"};function e4(t,e,s,n,i,o){return s.profile?(x(),w("footer",qO,[u("div",KO,[u("div",GO,[s.profile.instagram?(x(),w("a",{key:0,href:s.profile.instagram,class:"hover:underline"},"Instagram",8,YO)):j("",!0),s.profile.facebook?(x(),w("a",{key:1,href:s.profile.facebook,class:"hover:underline"},"Facebook",8,JO)):j("",!0),s.profile.youtube?(x(),w("a",{key:2,href:s.profile.youtube,class:"hover:underline"},"YouTube",8,XO)):j("",!0),s.profile.x?(x(),w("a",{key:3,href:s.profile.x,class:"hover:underline"},"X (Twitter)",8,QO)):j("",!0)]),u("p",ZO," "+P(new Date().getFullYear())+" "+P(s.profile.business_name),1)])])):j("",!0)}const t4=me(WO,[["render",e4]]),s4={name:"PagamentoAgendamento",components:{ProfileFooter:t4},data(){return{profile:null,appointment:null,service:null,pixCode:"",pixQrCode:""}},methods:{phoneMask:Yn,formatPrice(t){return t==null||t===""?"":Number(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},generatePix(){if(!this.profile||!this.service)return;const t=mp({key:this.profile.pix_key,name:this.profile.business_name,amount:String(this.service.price)});this.pixCode=t,this.pixQrCode="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(t)}},async mounted(){const t=this.$route.params.id,{data:e,error:s}=await I.from("appointments").select("*").eq("id",t).single();if(s){console.error("Erro ao buscar agendamento:",s.message);return}if(e){this.appointment=e;const{data:n}=await I.from("services").select("price").eq("id",e.service_id).single();this.service=n;const{data:i}=await I.from("profiles").select("pix_key,business_name,whatsapp,image_url,area_atuacao,description,instagram,facebook,youtube,x").eq("id",e.user_id).single();this.profile=i,this.generatePix()}}},n4={class:"flex flex-col min-h-screen"},i4={key:0,class:"bg-blue-600 text-white py-12"},o4={class:"max-w-5xl mx-auto px-4 text-center space-y-4"},r4=["src"],a4={class:"text-4xl font-bold"},l4={key:0,class:"text-sm"},c4={class:"text-lg"},d4={class:"flex-1 flex items-center justify-center bg-gray-100 px-4"},u4={key:0,class:"bg-white p-8 rounded-lg shadow w-full max-w-md space-y-4 text-center mt-8"},h4=["src"],f4={class:"text-lg font-semibold"},p4={class:"text-sm text-gray-600"},m4={key:1,class:"text-gray-500"};function g4(t,e,s,n,i,o){const r=z("ProfileFooter");return x(),w("div",n4,[i.profile?(x(),w("section",i4,[u("div",o4,[u("img",{src:i.profile.image_url||"/hero-illustration.png",alt:"Banner",class:"w-32 h-32 mx-auto rounded-full shadow-lg"},null,8,r4),u("h1",a4,P(i.profile.business_name),1),i.profile.area_atuacao?(x(),w("p",l4,P(i.profile.area_atuacao),1)):j("",!0),u("p",c4,P(i.profile.description),1)])])):j("",!0),u("section",d4,[i.profile&&i.service?(x(),w("div",u4,[e[1]||(e[1]=u("img",{src:gp,alt:"Pix",class:"mx-auto w-44 h-auto"},null,-1)),i.pixQrCode?(x(),w("img",{key:0,src:i.pixQrCode,alt:"QR Code Pix",class:"mx-auto w-40 h-auto"},null,8,h4)):j("",!0),e[2]||(e[2]=u("p",{class:"font-semibold"},"Cdigo de pagamento",-1)),E(u("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.pixCode=a),readonly:"",class:"w-full px-4 py-2 border rounded-md text-center"},null,512),[[R,i.pixCode]]),e[3]||(e[3]=u("p",{class:"font-semibold"},"Valor do pagamento",-1)),u("p",f4,P(o.formatPrice(i.service.price)),1),u("p",p4,"Aps o pagamento envie o comprovante para "+P(o.phoneMask(i.profile.whatsapp)),1)])):(x(),w("div",m4,"Carregando..."))]),i.profile?(x(),et(r,{key:1,profile:i.profile},null,8,["profile"])):j("",!0)])}const b4=me(s4,[["render",g4]]),y4={name:"Confirmacao",components:{Navbar:qt,Footer:Kt}},x4={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},_4={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},v4={class:"flex justify-center space-x-4"};function w4(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("section",x4,[u("div",_4,[e[2]||(e[2]=u("img",{src:ls,alt:"Sucesso",class:"w-16 h-16 mx-auto text-green-500"},null,-1)),e[3]||(e[3]=u("h1",{class:"text-2xl font-bold text-green-600"},"Cadastro efetuado com sucesso",-1)),u("div",v4,[O(a,{to:"/",class:"btn inline-block"},{default:ee(()=>e[0]||(e[0]=[te("Incio")])),_:1,__:[0]}),O(a,{to:"/login",class:"btn inline-block"},{default:ee(()=>e[1]||(e[1]=[te("Login")])),_:1,__:[1]})])])]),O(l)],64)}const k4=me(y4,[["render",w4]]),S4="/icons/error.svg",C4={name:"LinkExpirado",components:{Navbar:qt,Footer:Kt},data(){return{email:""}},methods:{async reenviarLink(){if(!Wt(this.email)){alert("E-mail invlido");return}const{error:t}=await I.auth.resend({type:"signup",email:this.email});alert(t?"Erro ao reenviar link: "+t.message:"Link reenviado! Verifique seu e-mail.")}}},M4={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4"},A4={class:"bg-white p-10 rounded-2xl shadow-xl w-full max-w-lg text-center space-y-6"},P4={class:"flex justify-center space-x-4"};function E4(t,e,s,n,i,o){const r=z("Navbar"),a=z("router-link"),l=z("Footer");return x(),w(Y,null,[O(r),u("section",M4,[u("div",A4,[e[3]||(e[3]=u("img",{src:S4,alt:"Erro",class:"w-16 h-16 mx-auto text-red-500"},null,-1)),e[4]||(e[4]=u("h1",{class:"text-2xl font-bold text-red-600"},"Link expirado ou invlido",-1)),e[5]||(e[5]=u("p",{class:"text-gray-700"},"Informe seu e-mail para receber um novo link de confirmao.",-1)),E(u("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.email=c),type:"email",placeholder:"seu@email.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[R,i.email]]),u("div",P4,[u("button",{onClick:e[1]||(e[1]=(...c)=>o.reenviarLink&&o.reenviarLink(...c)),class:"btn"},"Reenviar link"),O(a,{to:"/",class:"btn"},{default:ee(()=>e[2]||(e[2]=[te("Incio")])),_:1,__:[2]})])])]),O(l)],64)}const T4=me(C4,[["render",E4]]),O4=[{path:"/",name:"Home",component:S0},{path:"/cadastro",name:"Signup",component:Gx},{path:"/confirmacao",name:"Confirmacao",component:k4},{path:"/link-expirado",name:"LinkExpirado",component:T4},{path:"/login",name:"Login",component:t_},{path:"/onboarding",name:"Onboarding",component:__},{path:"/dashboard",name:"Dashboard",component:HS},{path:"/configuracao",name:"Configuracao",component:cC},{path:"/clientes",name:"Clientes",component:uM},{path:"/servicos",name:"Servicos",component:RA},{path:"/salas",name:"Salas",component:vE},{path:"/agendamentos",name:"Agendamentos",component:lA},{path:"/comprovantes",name:"Comprovantes",component:zE},{path:"/templates",name:"Templates",component:CT},{path:"/usuarios",name:"Usuarios",component:nP},{path:"/minha-assinatura",name:"MinhaAssinatura",component:BT},{path:"/assinatura-plus",name:"PagamentoPlus",component:HO},{path:"/faturamento",name:"Faturamento",component:cO},{path:"/buscar",name:"SearchProfiles",component:pP},{path:"/planos",name:"Planos",component:QP},{path:"/contato",name:"Contato",component:DT},{path:"/faq",name:"Faq",component:bO},{path:"/politica-de-privacidade",name:"PoliticaDePrivacidade",component:_O},{path:"/termos-de-uso",name:"TermosDeUso",component:kO},{path:"/atendimento/:id",name:"Atendimento",component:hT},{path:"/pagar-agendamento/:id",name:"PagamentoAgendamento",component:b4},{path:"/:slug",name:"PublicPage",component:KP}],Wn=Gb({history:kb(),routes:O4});Wn.beforeEach(async(t,e,s)=>{const{data:{user:n}}=await I.auth.getUser();if(n&&t.path!=="/onboarding"){const{data:i}=await I.from("profiles").select("onboarding_complete").eq("id",n.id).single();if(i&&!i.onboarding_complete){s("/onboarding");return}}s()});Wn.afterEach(t=>{window.gtag&&window.gtag("config","G-8DZT2EVSC7",{page_path:t.fullPath})});const D4=async()=>{var s;const t=window.location.hash.replace(/^#\/?/,""),e=new URLSearchParams(t);if(e.get("error_code")==="otp_expired"||(s=e.get("error_description"))!=null&&s.includes("Email link is invalid")){Wn.replace("/link-expirado");return}if(window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")){const n=e.get("access_token"),i=e.get("refresh_token");if(n&&i)try{await I.auth.setSession({access_token:n,refresh_token:i}),Wn.replace("/confirmacao")}catch{}}};D4();I.auth.onAuthStateChange(t=>{t==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.location.hash.includes("type=signup")&&Wn.replace("/confirmacao")});Fg(Wg).use(Wn).mount("#app");export{R4 as g};
